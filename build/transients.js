"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["transients"],{

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/client/client.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/client/client.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _objectAssign = _interopRequireDefault(__webpack_require__(/*! object-assign */ \"./node_modules/object-assign/index.js\"));\nvar _offsitePaymentInitializer = _interopRequireDefault(__webpack_require__(/*! ../payment/offsite-payment-initializer */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-initializer.js\"));\nvar _paymentSubmitter = _interopRequireDefault(__webpack_require__(/*! ../payment/payment-submitter */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-submitter.js\"));\nvar _clientTokenGenerator = _interopRequireDefault(__webpack_require__(/*! ../payment/client-token-generator */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/client-token-generator.js\"));\nvar _storeRequestSender = _interopRequireDefault(__webpack_require__(/*! ../store/store-request-sender */ \"./node_modules/@bigcommerce/bigpay-client/lib/store/store-request-sender.js\"));\nvar _defaultConfig = _interopRequireDefault(__webpack_require__(/*! ./default-config */ \"./node_modules/@bigcommerce/bigpay-client/lib/client/default-config.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar Client = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {Object} config\n   * @param {PaymentSubmitter} paymentSubmitter\n   * @param {OffsitePaymentInitializer} offsitePaymentInitializer\n   * @param {ClientTokenGenerator} clientTokenGenerator\n   * @param {StoreRequestSender} storeRequestSender\n   */\n  function Client(config, paymentSubmitter, offsitePaymentInitializer, clientTokenGenerator, storeRequestSender) {\n    _classCallCheck(this, Client);\n    /**\n     * @private\n     * @type {Object}\n     */\n    this.config = config;\n\n    /**\n     * @private\n     * @type {PaymentSubmitter}\n     */\n    this.paymentSubmitter = paymentSubmitter;\n\n    /**\n     * @private\n     * @type {OffsitePaymentInitializer}\n     */\n    this.offsitePaymentInitializer = offsitePaymentInitializer;\n\n    /**\n     * @private\n     * @type {ClientTokenGenerator}\n     */\n    this.clientTokenGenerator = clientTokenGenerator;\n\n    /**\n     * @private\n     * @type {StoreRequestSender}\n     */\n    this.storeRequestSender = storeRequestSender;\n  }\n\n  /**\n   * @param {string} host\n   * @returns {void}\n   */\n  return _createClass(Client, [{\n    key: \"setHost\",\n    value: function setHost(host) {\n      this.config.host = host;\n    }\n\n    /**\n     * @param {PaymentRequestData} data\n     * @param {Function} [callback]\n     * @param {string} target\n     * @returns {void}\n     */\n  }, {\n    key: \"initializeOffsitePayment\",\n    value: function initializeOffsitePayment(data, callback, target) {\n      this.offsitePaymentInitializer.initializeOffsitePayment(data, callback, target);\n    }\n\n    /**\n     * @param {PaymentRequestData} data\n     * @param {Function} [callback]\n     * @returns {void}\n     */\n  }, {\n    key: \"submitPayment\",\n    value: function submitPayment(data, callback) {\n      this.paymentSubmitter.submitPayment(data, callback);\n    }\n\n    /**\n     * @param {PaymentRequestData} data\n     * @param {Function} [callback]\n     * @returns {void}\n     */\n  }, {\n    key: \"generateClientToken\",\n    value: function generateClientToken(data, callback) {\n      this.clientTokenGenerator.generateClientToken(data, callback);\n    }\n\n    /**\n     * @param {Object} data\n     * @param {string} data.storeId\n     * @param {string} data.customerId\n     * @param {string} data.currencyCode\n     * @param {Function} [callback]\n     * @return {void}\n     */\n  }, {\n    key: \"loadInstruments\",\n    value: function loadInstruments(data, callback) {\n      this.storeRequestSender.loadInstruments(data, callback);\n    }\n\n    /**\n     * @param {Object} data\n     * @param {string} data.storeId\n     * @param {string} data.customerId\n     * @param {string} data.currencyCode\n     * @param {AddressData} data.shippingAddress\n     * @param {Function} [callback]\n     * @return {void}\n     */\n  }, {\n    key: \"loadInstrumentsWithAddress\",\n    value: function loadInstrumentsWithAddress(data, callback) {\n      this.storeRequestSender.loadInstrumentsWithAddress(data, callback);\n    }\n\n    /**\n     * @param {Object} data\n     * @param {string} data.storeId\n     * @param {string} data.customerId\n     * @param {string} data.instrumentId\n     * @param {string} data.currencyCode\n     * @param {Function} [callback]\n     * @return {void}\n     */\n  }, {\n    key: \"deleteShopperInstrument\",\n    value: function deleteShopperInstrument(data, callback) {\n      this.storeRequestSender.deleteShopperInstrument(data, callback);\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @param {Object} config\n     * @returns {Client}\n     */\n    function create(config) {\n      var clientConfig = (0, _objectAssign.default)({}, _defaultConfig.default, config);\n      var offsitePaymentInitializer = _offsitePaymentInitializer.default.create(clientConfig);\n      var paymentSubmitter = _paymentSubmitter.default.create(clientConfig);\n      var clientTokenGenerator = _clientTokenGenerator.default.create(clientConfig);\n      var storeRequestSender = _storeRequestSender.default.create(clientConfig);\n      return new Client(clientConfig, paymentSubmitter, offsitePaymentInitializer, clientTokenGenerator, storeRequestSender);\n    }\n  }]);\n}();\n//# sourceMappingURL=client.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NsaWVudC9jbGllbnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZiwyQ0FBMkMsbUJBQU8sQ0FBQyw0REFBZTtBQUNsRSx3REFBd0QsbUJBQU8sQ0FBQyxvSUFBd0M7QUFDeEcsK0NBQStDLG1CQUFPLENBQUMsZ0hBQThCO0FBQ3JGLG1EQUFtRCxtQkFBTyxDQUFDLDBIQUFtQztBQUM5RixpREFBaUQsbUJBQU8sQ0FBQyxrSEFBK0I7QUFDeEYsNENBQTRDLG1CQUFPLENBQUMsZ0dBQWtCO0FBQ3RFLHFDQUFxQyxpQ0FBaUM7QUFDdEUsc0JBQXNCLDJCQUEyQixvR0FBb0csbUJBQW1CLGlCQUFpQixzSEFBc0g7QUFDL1MsaUNBQWlDO0FBQ2pDLG1DQUFtQyxnQkFBZ0IsY0FBYyxPQUFPLGNBQWM7QUFDdEYsaUNBQWlDLHFIQUFxSCxjQUFjO0FBQ3BLLDZCQUE2QixtQ0FBbUM7QUFDaEUsOEJBQThCLDRDQUE0QywrQkFBK0Isb0JBQW9CLG1DQUFtQyxzQ0FBc0MsdUVBQXVFO0FBQzdRLGFBQWEsa0JBQWU7QUFDNUI7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxrQkFBa0I7QUFDL0IsYUFBYSwyQkFBMkI7QUFDeEMsYUFBYSxzQkFBc0I7QUFDbkMsYUFBYSxvQkFBb0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxlQUFlLFVBQVU7QUFDekIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGVBQWUsVUFBVTtBQUN6QixpQkFBaUI7QUFDakI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxlQUFlLFVBQVU7QUFDekIsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsVUFBVTtBQUN6QixnQkFBZ0I7QUFDaEI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxhQUFhO0FBQzVCLGVBQWUsVUFBVTtBQUN6QixnQkFBZ0I7QUFDaEI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsVUFBVTtBQUN6QixnQkFBZ0I7QUFDaEI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvYmlncGF5LWNsaWVudC9saWIvY2xpZW50L2NsaWVudC5qcz81MjFlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF9vYmplY3RBc3NpZ24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJvYmplY3QtYXNzaWduXCIpKTtcbnZhciBfb2Zmc2l0ZVBheW1lbnRJbml0aWFsaXplciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL3BheW1lbnQvb2Zmc2l0ZS1wYXltZW50LWluaXRpYWxpemVyXCIpKTtcbnZhciBfcGF5bWVudFN1Ym1pdHRlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL3BheW1lbnQvcGF5bWVudC1zdWJtaXR0ZXJcIikpO1xudmFyIF9jbGllbnRUb2tlbkdlbmVyYXRvciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL3BheW1lbnQvY2xpZW50LXRva2VuLWdlbmVyYXRvclwiKSk7XG52YXIgX3N0b3JlUmVxdWVzdFNlbmRlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL3N0b3JlL3N0b3JlLXJlcXVlc3Qtc2VuZGVyXCIpKTtcbnZhciBfZGVmYXVsdENvbmZpZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vZGVmYXVsdC1jb25maWdcIikpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKSB7IHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTsgfVxuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsIG4pIHsgaWYgKCEoYSBpbnN0YW5jZW9mIG4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLCByKSB7IGZvciAodmFyIHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgeyB2YXIgbyA9IHJbdF07IG8uZW51bWVyYWJsZSA9IG8uZW51bWVyYWJsZSB8fCAhMSwgby5jb25maWd1cmFibGUgPSAhMCwgXCJ2YWx1ZVwiIGluIG8gJiYgKG8ud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBfdG9Qcm9wZXJ0eUtleShvLmtleSksIG8pOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLCByLCB0KSB7IHJldHVybiByICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLCByKSwgdCAmJiBfZGVmaW5lUHJvcGVydGllcyhlLCB0KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6ICExIH0pLCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIENsaWVudCA9IGV4cG9ydHMuZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAqIEBwYXJhbSB7UGF5bWVudFN1Ym1pdHRlcn0gcGF5bWVudFN1Ym1pdHRlclxuICAgKiBAcGFyYW0ge09mZnNpdGVQYXltZW50SW5pdGlhbGl6ZXJ9IG9mZnNpdGVQYXltZW50SW5pdGlhbGl6ZXJcbiAgICogQHBhcmFtIHtDbGllbnRUb2tlbkdlbmVyYXRvcn0gY2xpZW50VG9rZW5HZW5lcmF0b3JcbiAgICogQHBhcmFtIHtTdG9yZVJlcXVlc3RTZW5kZXJ9IHN0b3JlUmVxdWVzdFNlbmRlclxuICAgKi9cbiAgZnVuY3Rpb24gQ2xpZW50KGNvbmZpZywgcGF5bWVudFN1Ym1pdHRlciwgb2Zmc2l0ZVBheW1lbnRJbml0aWFsaXplciwgY2xpZW50VG9rZW5HZW5lcmF0b3IsIHN0b3JlUmVxdWVzdFNlbmRlcikge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGllbnQpO1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1BheW1lbnRTdWJtaXR0ZXJ9XG4gICAgICovXG4gICAgdGhpcy5wYXltZW50U3VibWl0dGVyID0gcGF5bWVudFN1Ym1pdHRlcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09mZnNpdGVQYXltZW50SW5pdGlhbGl6ZXJ9XG4gICAgICovXG4gICAgdGhpcy5vZmZzaXRlUGF5bWVudEluaXRpYWxpemVyID0gb2Zmc2l0ZVBheW1lbnRJbml0aWFsaXplcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NsaWVudFRva2VuR2VuZXJhdG9yfVxuICAgICAqL1xuICAgIHRoaXMuY2xpZW50VG9rZW5HZW5lcmF0b3IgPSBjbGllbnRUb2tlbkdlbmVyYXRvcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1N0b3JlUmVxdWVzdFNlbmRlcn1cbiAgICAgKi9cbiAgICB0aGlzLnN0b3JlUmVxdWVzdFNlbmRlciA9IHN0b3JlUmVxdWVzdFNlbmRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaG9zdFxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoQ2xpZW50LCBbe1xuICAgIGtleTogXCJzZXRIb3N0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldEhvc3QoaG9zdCkge1xuICAgICAgdGhpcy5jb25maWcuaG9zdCA9IGhvc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQYXltZW50UmVxdWVzdERhdGF9IGRhdGFcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldFxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICB9LCB7XG4gICAga2V5OiBcImluaXRpYWxpemVPZmZzaXRlUGF5bWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0aWFsaXplT2Zmc2l0ZVBheW1lbnQoZGF0YSwgY2FsbGJhY2ssIHRhcmdldCkge1xuICAgICAgdGhpcy5vZmZzaXRlUGF5bWVudEluaXRpYWxpemVyLmluaXRpYWxpemVPZmZzaXRlUGF5bWVudChkYXRhLCBjYWxsYmFjaywgdGFyZ2V0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja11cbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJzdWJtaXRQYXltZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN1Ym1pdFBheW1lbnQoZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgIHRoaXMucGF5bWVudFN1Ym1pdHRlci5zdWJtaXRQYXltZW50KGRhdGEsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja11cbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJnZW5lcmF0ZUNsaWVudFRva2VuXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlQ2xpZW50VG9rZW4oZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuY2xpZW50VG9rZW5HZW5lcmF0b3IuZ2VuZXJhdGVDbGllbnRUb2tlbihkYXRhLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YS5zdG9yZUlkXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGEuY3VzdG9tZXJJZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhLmN1cnJlbmN5Q29kZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja11cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICB9LCB7XG4gICAga2V5OiBcImxvYWRJbnN0cnVtZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkSW5zdHJ1bWVudHMoZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuc3RvcmVSZXF1ZXN0U2VuZGVyLmxvYWRJbnN0cnVtZW50cyhkYXRhLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YS5zdG9yZUlkXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGEuY3VzdG9tZXJJZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhLmN1cnJlbmN5Q29kZVxuICAgICAqIEBwYXJhbSB7QWRkcmVzc0RhdGF9IGRhdGEuc2hpcHBpbmdBZGRyZXNzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwibG9hZEluc3RydW1lbnRzV2l0aEFkZHJlc3NcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZEluc3RydW1lbnRzV2l0aEFkZHJlc3MoZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuc3RvcmVSZXF1ZXN0U2VuZGVyLmxvYWRJbnN0cnVtZW50c1dpdGhBZGRyZXNzKGRhdGEsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhLnN0b3JlSWRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YS5jdXN0b21lcklkXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGEuaW5zdHJ1bWVudElkXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGEuY3VycmVuY3lDb2RlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwiZGVsZXRlU2hvcHBlckluc3RydW1lbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVsZXRlU2hvcHBlckluc3RydW1lbnQoZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuc3RvcmVSZXF1ZXN0U2VuZGVyLmRlbGV0ZVNob3BwZXJJbnN0cnVtZW50KGRhdGEsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJjcmVhdGVcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAgICogQHJldHVybnMge0NsaWVudH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUoY29uZmlnKSB7XG4gICAgICB2YXIgY2xpZW50Q29uZmlnID0gKDAsIF9vYmplY3RBc3NpZ24uZGVmYXVsdCkoe30sIF9kZWZhdWx0Q29uZmlnLmRlZmF1bHQsIGNvbmZpZyk7XG4gICAgICB2YXIgb2Zmc2l0ZVBheW1lbnRJbml0aWFsaXplciA9IF9vZmZzaXRlUGF5bWVudEluaXRpYWxpemVyLmRlZmF1bHQuY3JlYXRlKGNsaWVudENvbmZpZyk7XG4gICAgICB2YXIgcGF5bWVudFN1Ym1pdHRlciA9IF9wYXltZW50U3VibWl0dGVyLmRlZmF1bHQuY3JlYXRlKGNsaWVudENvbmZpZyk7XG4gICAgICB2YXIgY2xpZW50VG9rZW5HZW5lcmF0b3IgPSBfY2xpZW50VG9rZW5HZW5lcmF0b3IuZGVmYXVsdC5jcmVhdGUoY2xpZW50Q29uZmlnKTtcbiAgICAgIHZhciBzdG9yZVJlcXVlc3RTZW5kZXIgPSBfc3RvcmVSZXF1ZXN0U2VuZGVyLmRlZmF1bHQuY3JlYXRlKGNsaWVudENvbmZpZyk7XG4gICAgICByZXR1cm4gbmV3IENsaWVudChjbGllbnRDb25maWcsIHBheW1lbnRTdWJtaXR0ZXIsIG9mZnNpdGVQYXltZW50SW5pdGlhbGl6ZXIsIGNsaWVudFRva2VuR2VuZXJhdG9yLCBzdG9yZVJlcXVlc3RTZW5kZXIpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/client/client.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/client/default-config.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/client/default-config.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar DEFAULT_CONFIG = {\n  host: ''\n};\nvar _default = exports[\"default\"] = DEFAULT_CONFIG;\n//# sourceMappingURL=default-config.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NsaWVudC9kZWZhdWx0LWNvbmZpZy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0JBQWU7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvYmlncGF5LWNsaWVudC9saWIvY2xpZW50L2RlZmF1bHQtY29uZmlnLmpzPzhhNGEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG52YXIgREVGQVVMVF9DT05GSUcgPSB7XG4gIGhvc3Q6ICcnXG59O1xudmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gREVGQVVMVF9DT05GSUc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0LWNvbmZpZy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/client/default-config.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/content-types.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/content-types.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.APPLICATION_JSON = void 0;\nvar APPLICATION_JSON = exports.APPLICATION_JSON = 'application/json';\n//# sourceMappingURL=content-types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi9odHRwLXJlcXVlc3QvY29udGVudC10eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRix3QkFBd0I7QUFDeEIsdUJBQXVCLHdCQUF3QjtBQUMvQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9jb21tb24vaHR0cC1yZXF1ZXN0L2NvbnRlbnQtdHlwZXMuanM/MDdmYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuQVBQTElDQVRJT05fSlNPTiA9IHZvaWQgMDtcbnZhciBBUFBMSUNBVElPTl9KU09OID0gZXhwb3J0cy5BUFBMSUNBVElPTl9KU09OID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udGVudC10eXBlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/content-types.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/default-options.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/default-options.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _contentTypes = __webpack_require__(/*! ./content-types */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/content-types.js\");\nvar _methodTypes = __webpack_require__(/*! ./method-types */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/method-types.js\");\nvar DEFAULT_OPTIONS = {\n  headers: {\n    Accept: _contentTypes.APPLICATION_JSON,\n    'Content-Type': _contentTypes.APPLICATION_JSON\n  },\n  method: _methodTypes.GET\n};\nvar _default = exports[\"default\"] = DEFAULT_OPTIONS;\n//# sourceMappingURL=default-options.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi9odHRwLXJlcXVlc3QvZGVmYXVsdC1vcHRpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2Ysb0JBQW9CLG1CQUFPLENBQUMsMkdBQWlCO0FBQzdDLG1CQUFtQixtQkFBTyxDQUFDLHlHQUFnQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZUFBZSxrQkFBZTtBQUM5QiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9jb21tb24vaHR0cC1yZXF1ZXN0L2RlZmF1bHQtb3B0aW9ucy5qcz9hN2Q2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF9jb250ZW50VHlwZXMgPSByZXF1aXJlKFwiLi9jb250ZW50LXR5cGVzXCIpO1xudmFyIF9tZXRob2RUeXBlcyA9IHJlcXVpcmUoXCIuL21ldGhvZC10eXBlc1wiKTtcbnZhciBERUZBVUxUX09QVElPTlMgPSB7XG4gIGhlYWRlcnM6IHtcbiAgICBBY2NlcHQ6IF9jb250ZW50VHlwZXMuQVBQTElDQVRJT05fSlNPTixcbiAgICAnQ29udGVudC1UeXBlJzogX2NvbnRlbnRUeXBlcy5BUFBMSUNBVElPTl9KU09OXG4gIH0sXG4gIG1ldGhvZDogX21ldGhvZFR5cGVzLkdFVFxufTtcbnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IERFRkFVTFRfT1BUSU9OUztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQtb3B0aW9ucy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/default-options.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/method-types.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/method-types.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.POST = exports.GET = exports.DELETE = void 0;\nvar GET = exports.GET = 'GET';\nvar POST = exports.POST = 'POST';\nvar DELETE = exports.DELETE = 'DELETE';\n//# sourceMappingURL=method-types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi9odHRwLXJlcXVlc3QvbWV0aG9kLXR5cGVzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLFlBQVksR0FBRyxXQUFXLEdBQUcsY0FBYztBQUMzQyxVQUFVLFdBQVc7QUFDckIsV0FBVyxZQUFZO0FBQ3ZCLGFBQWEsY0FBYztBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9jb21tb24vaHR0cC1yZXF1ZXN0L21ldGhvZC10eXBlcy5qcz8xZjY2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5QT1NUID0gZXhwb3J0cy5HRVQgPSBleHBvcnRzLkRFTEVURSA9IHZvaWQgMDtcbnZhciBHRVQgPSBleHBvcnRzLkdFVCA9ICdHRVQnO1xudmFyIFBPU1QgPSBleHBvcnRzLlBPU1QgPSAnUE9TVCc7XG52YXIgREVMRVRFID0gZXhwb3J0cy5ERUxFVEUgPSAnREVMRVRFJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ldGhvZC10eXBlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/method-types.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/payload-transformer.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/payload-transformer.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _objectAssign2 = _interopRequireDefault(__webpack_require__(/*! object-assign */ \"./node_modules/object-assign/index.js\"));\nvar _contentTypes = __webpack_require__(/*! ./content-types */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/content-types.js\");\nvar _utils = __webpack_require__(/*! ../utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar PayloadTransformer = exports[\"default\"] = /*#__PURE__*/function () {\n  function PayloadTransformer() {\n    _classCallCheck(this, PayloadTransformer);\n  }\n  return _createClass(PayloadTransformer, [{\n    key: \"toRequest\",\n    value:\n    /**\n     * @param {Object} data\n     * @param {string} [contentType = APPLICATION_JSON]\n     * @returns {Object}\n     */\n    function toRequest(data) {\n      var contentType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _contentTypes.APPLICATION_JSON;\n      if (data && (0, _utils.includes)(contentType, _contentTypes.APPLICATION_JSON)) {\n        return JSON.stringify(data);\n      }\n      return data;\n    }\n\n    /**\n     * @param {XMLHttpRequest} xhr\n     * @returns {Object}\n     * @property {Object} data\n     * @property {number} status\n     * @property {string} statusText\n     */\n  }, {\n    key: \"fromResponse\",\n    value: function fromResponse(xhr) {\n      var headers = this.parseResponseHeaders(xhr.getAllResponseHeaders());\n      var contentType = xhr.getResponseHeader('Content-Type');\n      var status = xhr.status,\n        statusText = xhr.statusText;\n      var data = 'response' in xhr ? xhr.response : xhr.responseText;\n      if (data && (0, _utils.includes)(contentType, _contentTypes.APPLICATION_JSON)) {\n        data = JSON.parse(data);\n      }\n      return {\n        data: data,\n        headers: headers,\n        status: status,\n        statusText: statusText\n      };\n    }\n\n    /**\n     * @private\n     * @param {string} rawHeaders\n     * @returns {Object}\n     */\n  }, {\n    key: \"parseResponseHeaders\",\n    value: function parseResponseHeaders(rawHeaders) {\n      var lines = rawHeaders ? rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ').split(/\\r?\\n/) : [];\n      return lines.reduce(function (headers, line) {\n        var parts = line.split(':');\n        var key = (parts.shift() || '').trim();\n        if (!key) {\n          return headers;\n        }\n        return (0, _objectAssign2.default)({}, headers, _defineProperty({}, key.toLowerCase(), parts.join(':').trim()));\n      }, {});\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {PayloadTransformer}\n     */\n    function create() {\n      return new PayloadTransformer();\n    }\n  }]);\n}();\n//# sourceMappingURL=payload-transformer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi9odHRwLXJlcXVlc3QvcGF5bG9hZC10cmFuc2Zvcm1lci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBZTtBQUNmLDRDQUE0QyxtQkFBTyxDQUFDLDREQUFlO0FBQ25FLG9CQUFvQixtQkFBTyxDQUFDLDJHQUFpQjtBQUM3QyxhQUFhLG1CQUFPLENBQUMscUZBQVU7QUFDL0IscUNBQXFDLGlDQUFpQztBQUN0RSxzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxvQ0FBb0Msb0VBQW9FLDBEQUEwRDtBQUNsSyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1EseUJBQXlCLGtCQUFlO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CLGlCQUFpQjtBQUNqQixrQkFBa0IsUUFBUTtBQUMxQixrQkFBa0IsUUFBUTtBQUMxQixrQkFBa0IsUUFBUTtBQUMxQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyw2QkFBNkI7QUFDMUUsT0FBTyxJQUFJO0FBQ1g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9jb21tb24vaHR0cC1yZXF1ZXN0L3BheWxvYWQtdHJhbnNmb3JtZXIuanM/ODk3OSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfb2JqZWN0QXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIm9iamVjdC1hc3NpZ25cIikpO1xudmFyIF9jb250ZW50VHlwZXMgPSByZXF1aXJlKFwiLi9jb250ZW50LXR5cGVzXCIpO1xudmFyIF91dGlscyA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSkgeyByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07IH1cbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0KSB7IHJldHVybiAociA9IF90b1Byb3BlcnR5S2V5KHIpKSBpbiBlID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIHsgdmFsdWU6IHQsIGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAgfSkgOiBlW3JdID0gdCwgZTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsIG4pIHsgaWYgKCEoYSBpbnN0YW5jZW9mIG4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLCByKSB7IGZvciAodmFyIHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgeyB2YXIgbyA9IHJbdF07IG8uZW51bWVyYWJsZSA9IG8uZW51bWVyYWJsZSB8fCAhMSwgby5jb25maWd1cmFibGUgPSAhMCwgXCJ2YWx1ZVwiIGluIG8gJiYgKG8ud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBfdG9Qcm9wZXJ0eUtleShvLmtleSksIG8pOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLCByLCB0KSB7IHJldHVybiByICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLCByKSwgdCAmJiBfZGVmaW5lUHJvcGVydGllcyhlLCB0KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6ICExIH0pLCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIFBheWxvYWRUcmFuc2Zvcm1lciA9IGV4cG9ydHMuZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFBheWxvYWRUcmFuc2Zvcm1lcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGF5bG9hZFRyYW5zZm9ybWVyKTtcbiAgfVxuICByZXR1cm4gX2NyZWF0ZUNsYXNzKFBheWxvYWRUcmFuc2Zvcm1lciwgW3tcbiAgICBrZXk6IFwidG9SZXF1ZXN0XCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvbnRlbnRUeXBlID0gQVBQTElDQVRJT05fSlNPTl1cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRvUmVxdWVzdChkYXRhKSB7XG4gICAgICB2YXIgY29udGVudFR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IF9jb250ZW50VHlwZXMuQVBQTElDQVRJT05fSlNPTjtcbiAgICAgIGlmIChkYXRhICYmICgwLCBfdXRpbHMuaW5jbHVkZXMpKGNvbnRlbnRUeXBlLCBfY29udGVudFR5cGVzLkFQUExJQ0FUSU9OX0pTT04pKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7WE1MSHR0cFJlcXVlc3R9IHhoclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICogQHByb3BlcnR5IHtPYmplY3R9IGRhdGFcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gc3RhdHVzXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IHN0YXR1c1RleHRcbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJmcm9tUmVzcG9uc2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZnJvbVJlc3BvbnNlKHhocikge1xuICAgICAgdmFyIGhlYWRlcnMgPSB0aGlzLnBhcnNlUmVzcG9uc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG4gICAgICB2YXIgY29udGVudFR5cGUgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ0NvbnRlbnQtVHlwZScpO1xuICAgICAgdmFyIHN0YXR1cyA9IHhoci5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQgPSB4aHIuc3RhdHVzVGV4dDtcbiAgICAgIHZhciBkYXRhID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgaWYgKGRhdGEgJiYgKDAsIF91dGlscy5pbmNsdWRlcykoY29udGVudFR5cGUsIF9jb250ZW50VHlwZXMuQVBQTElDQVRJT05fSlNPTikpIHtcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICBzdGF0dXM6IHN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogc3RhdHVzVGV4dFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByYXdIZWFkZXJzXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJwYXJzZVJlc3BvbnNlSGVhZGVyc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZVJlc3BvbnNlSGVhZGVycyhyYXdIZWFkZXJzKSB7XG4gICAgICB2YXIgbGluZXMgPSByYXdIZWFkZXJzID8gcmF3SGVhZGVycy5yZXBsYWNlKC9cXHI/XFxuW1xcdCBdKy9nLCAnICcpLnNwbGl0KC9cXHI/XFxuLykgOiBbXTtcbiAgICAgIHJldHVybiBsaW5lcy5yZWR1Y2UoZnVuY3Rpb24gKGhlYWRlcnMsIGxpbmUpIHtcbiAgICAgICAgdmFyIHBhcnRzID0gbGluZS5zcGxpdCgnOicpO1xuICAgICAgICB2YXIga2V5ID0gKHBhcnRzLnNoaWZ0KCkgfHwgJycpLnRyaW0oKTtcbiAgICAgICAgaWYgKCFrZXkpIHtcbiAgICAgICAgICByZXR1cm4gaGVhZGVycztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHt9LCBoZWFkZXJzLCBfZGVmaW5lUHJvcGVydHkoe30sIGtleS50b0xvd2VyQ2FzZSgpLCBwYXJ0cy5qb2luKCc6JykudHJpbSgpKSk7XG4gICAgICB9LCB7fSk7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwiY3JlYXRlXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHJldHVybnMge1BheWxvYWRUcmFuc2Zvcm1lcn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgICByZXR1cm4gbmV3IFBheWxvYWRUcmFuc2Zvcm1lcigpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGF5bG9hZC10cmFuc2Zvcm1lci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/payload-transformer.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/request-factory.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/request-factory.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar RequestFactory = exports[\"default\"] = /*#__PURE__*/function () {\n  function RequestFactory() {\n    _classCallCheck(this, RequestFactory);\n  }\n  return _createClass(RequestFactory, [{\n    key: \"createRequest\",\n    value:\n    /**\n     * @param {string} url\n     * @param {Object} options\n     * @param {Function} [callback]\n     * @returns {XMLHttpRequest}\n     */\n    function createRequest(url, options, callback) {\n      var xhr = new XMLHttpRequest();\n      xhr.onerror = function () {\n        if (callback) {\n          callback(new Error(xhr.statusText));\n        }\n      };\n      xhr.onload = function () {\n        if (callback) {\n          callback();\n        }\n      };\n      xhr.open(options.method, url, true);\n      this.setOptions(xhr, options);\n      return xhr;\n    }\n\n    /**\n     * @private\n     * @param {XMLHttpRequest} xhr\n     * @param {Object} headers\n     * @returns {void}\n     */\n  }, {\n    key: \"setHeaders\",\n    value: function setHeaders(xhr, headers) {\n      var headerKeys = Object.keys(headers);\n      headerKeys.forEach(function (key) {\n        var value = headers[key];\n        xhr.setRequestHeader(key, value);\n      });\n    }\n\n    /**\n     * @private\n     * @param {XMLHttpRequest} xhr\n     * @param {Object} options\n     * @returns {void}\n     */\n  }, {\n    key: \"setOptions\",\n    value: function setOptions(xhr, options) {\n      xhr.withCredentials = options.withCredentials;\n      if (options.headers) {\n        this.setHeaders(xhr, options.headers);\n      }\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {RequestFactory}\n     */\n    function create() {\n      return new RequestFactory();\n    }\n  }]);\n}();\n//# sourceMappingURL=request-factory.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi9odHRwLXJlcXVlc3QvcmVxdWVzdC1mYWN0b3J5LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2Ysc0JBQXNCLDJCQUEyQixvR0FBb0csbUJBQW1CLGlCQUFpQixzSEFBc0g7QUFDL1MsaUNBQWlDO0FBQ2pDLG1DQUFtQyxnQkFBZ0IsY0FBYyxPQUFPLGNBQWM7QUFDdEYsaUNBQWlDLHFIQUFxSCxjQUFjO0FBQ3BLLDZCQUE2QixtQ0FBbUM7QUFDaEUsOEJBQThCLDRDQUE0QywrQkFBK0Isb0JBQW9CLG1DQUFtQyxzQ0FBc0MsdUVBQXVFO0FBQzdRLHFCQUFxQixrQkFBZTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxVQUFVO0FBQ3pCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0IsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi9odHRwLXJlcXVlc3QvcmVxdWVzdC1mYWN0b3J5LmpzP2U3OGYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgUmVxdWVzdEZhY3RvcnkgPSBleHBvcnRzLmRlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBSZXF1ZXN0RmFjdG9yeSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVxdWVzdEZhY3RvcnkpO1xuICB9XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoUmVxdWVzdEZhY3RvcnksIFt7XG4gICAga2V5OiBcImNyZWF0ZVJlcXVlc3RcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdXG4gICAgICogQHJldHVybnMge1hNTEh0dHBSZXF1ZXN0fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3QodXJsLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcih4aHIuc3RhdHVzVGV4dCkpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHhoci5vcGVuKG9wdGlvbnMubWV0aG9kLCB1cmwsIHRydWUpO1xuICAgICAgdGhpcy5zZXRPcHRpb25zKHhociwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4geGhyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtYTUxIdHRwUmVxdWVzdH0geGhyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJzZXRIZWFkZXJzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldEhlYWRlcnMoeGhyLCBoZWFkZXJzKSB7XG4gICAgICB2YXIgaGVhZGVyS2V5cyA9IE9iamVjdC5rZXlzKGhlYWRlcnMpO1xuICAgICAgaGVhZGVyS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gaGVhZGVyc1trZXldO1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtYTUxIdHRwUmVxdWVzdH0geGhyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJzZXRPcHRpb25zXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldE9wdGlvbnMoeGhyLCBvcHRpb25zKSB7XG4gICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gb3B0aW9ucy53aXRoQ3JlZGVudGlhbHM7XG4gICAgICBpZiAob3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgIHRoaXMuc2V0SGVhZGVycyh4aHIsIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICB9XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwiY3JlYXRlXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHJldHVybnMge1JlcXVlc3RGYWN0b3J5fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICAgIHJldHVybiBuZXcgUmVxdWVzdEZhY3RvcnkoKTtcbiAgICB9XG4gIH1dKTtcbn0oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlcXVlc3QtZmFjdG9yeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/request-factory.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/request-sender.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/request-sender.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _deepAssign = _interopRequireDefault(__webpack_require__(/*! deep-assign */ \"./node_modules/deep-assign/index.js\"));\nvar _objectAssign = _interopRequireDefault(__webpack_require__(/*! object-assign */ \"./node_modules/object-assign/index.js\"));\nvar _methodTypes = __webpack_require__(/*! ./method-types */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/method-types.js\");\nvar _defaultOptions = _interopRequireDefault(__webpack_require__(/*! ./default-options */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/default-options.js\"));\nvar _payloadTransformer = _interopRequireDefault(__webpack_require__(/*! ./payload-transformer */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/payload-transformer.js\"));\nvar _requestFactory = _interopRequireDefault(__webpack_require__(/*! ./request-factory */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/request-factory.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar RequestSender = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {RequestFactory} requestFactory\n   * @param {PayloadTransformer} payloadTransformer\n   */\n  function RequestSender(requestFactory, payloadTransformer) {\n    _classCallCheck(this, RequestSender);\n    /**\n     * @private\n     * @type {RequestFactory}\n     */\n    this.requestFactory = requestFactory;\n\n    /**\n     * @private\n     * @type {PayloadTransformer}\n     */\n    this.payloadTransformer = payloadTransformer;\n  }\n\n  /**\n   * @param {string} url\n   * @param {Object} data\n   * @param {Object} [options]\n   * @param {Function} [callback]\n   * @returns {void}\n   */\n  return _createClass(RequestSender, [{\n    key: \"sendRequest\",\n    value: function sendRequest(url, data, options, callback) {\n      var _this = this;\n      var mergedOptions = (0, _deepAssign.default)({}, _defaultOptions.default, options);\n      var xhr = this.requestFactory.createRequest(url, mergedOptions, function (error) {\n        var response = _this.payloadTransformer.fromResponse(xhr);\n        if (!callback) {\n          return;\n        }\n        if (error || !_this.isSuccessfulRequest(xhr)) {\n          callback(response);\n          return;\n        }\n        callback(null, response);\n      });\n      var payload = this.payloadTransformer.toRequest(data, mergedOptions.headers['Content-Type']);\n      xhr.send(payload);\n    }\n\n    /**\n     * @param {string} url\n     * @param {Object} data\n     * @param {Object} [options]\n     * @param {Function} [callback]\n     * @returns {void}\n     */\n  }, {\n    key: \"postRequest\",\n    value: function postRequest(url, data, options, callback) {\n      var mergedOptions = (0, _objectAssign.default)({}, options, {\n        method: _methodTypes.POST\n      });\n      this.sendRequest(url, data, mergedOptions, callback);\n    }\n\n    /**\n     * @private\n     * @param {XMLHttpRequest} xhr\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isSuccessfulRequest\",\n    value: function isSuccessfulRequest(xhr) {\n      return xhr.status >= 200 && xhr.status < 300;\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {RequestSender}\n     */\n    function create() {\n      var requestFactory = _requestFactory.default.create();\n      var payloadTransformer = _payloadTransformer.default.create();\n      return new RequestSender(requestFactory, payloadTransformer);\n    }\n  }]);\n}();\n//# sourceMappingURL=request-sender.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi9odHRwLXJlcXVlc3QvcmVxdWVzdC1zZW5kZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZix5Q0FBeUMsbUJBQU8sQ0FBQyx3REFBYTtBQUM5RCwyQ0FBMkMsbUJBQU8sQ0FBQyw0REFBZTtBQUNsRSxtQkFBbUIsbUJBQU8sQ0FBQyx5R0FBZ0I7QUFDM0MsNkNBQTZDLG1CQUFPLENBQUMsK0dBQW1CO0FBQ3hFLGlEQUFpRCxtQkFBTyxDQUFDLHVIQUF1QjtBQUNoRiw2Q0FBNkMsbUJBQU8sQ0FBQywrR0FBbUI7QUFDeEUscUNBQXFDLGlDQUFpQztBQUN0RSxzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1Esb0JBQW9CLGtCQUFlO0FBQ25DO0FBQ0EsYUFBYSxnQkFBZ0I7QUFDN0IsYUFBYSxvQkFBb0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxVQUFVO0FBQ3ZCLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsVUFBVTtBQUN6QixpQkFBaUI7QUFDakI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHVEQUF1RDtBQUN2RDtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQixpQkFBaUI7QUFDakI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvYmlncGF5LWNsaWVudC9saWIvY29tbW9uL2h0dHAtcmVxdWVzdC9yZXF1ZXN0LXNlbmRlci5qcz8xN2MwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF9kZWVwQXNzaWduID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiZGVlcC1hc3NpZ25cIikpO1xudmFyIF9vYmplY3RBc3NpZ24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJvYmplY3QtYXNzaWduXCIpKTtcbnZhciBfbWV0aG9kVHlwZXMgPSByZXF1aXJlKFwiLi9tZXRob2QtdHlwZXNcIik7XG52YXIgX2RlZmF1bHRPcHRpb25zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9kZWZhdWx0LW9wdGlvbnNcIikpO1xudmFyIF9wYXlsb2FkVHJhbnNmb3JtZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3BheWxvYWQtdHJhbnNmb3JtZXJcIikpO1xudmFyIF9yZXF1ZXN0RmFjdG9yeSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcmVxdWVzdC1mYWN0b3J5XCIpKTtcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSkgeyByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07IH1cbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhhLCBuKSB7IGlmICghKGEgaW5zdGFuY2VvZiBuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSwgcikgeyBmb3IgKHZhciB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0KyspIHsgdmFyIG8gPSByW3RdOyBvLmVudW1lcmFibGUgPSBvLmVudW1lcmFibGUgfHwgITEsIG8uY29uZmlndXJhYmxlID0gITAsIFwidmFsdWVcIiBpbiBvICYmIChvLndyaXRhYmxlID0gITApLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgX3RvUHJvcGVydHlLZXkoby5rZXkpLCBvKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSwgciwgdCkgeyByZXR1cm4gciAmJiBfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSwgciksIHQgJiYgX2RlZmluZVByb3BlcnRpZXMoZSwgdCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiAhMSB9KSwgZTsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbnZhciBSZXF1ZXN0U2VuZGVyID0gZXhwb3J0cy5kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7UmVxdWVzdEZhY3Rvcnl9IHJlcXVlc3RGYWN0b3J5XG4gICAqIEBwYXJhbSB7UGF5bG9hZFRyYW5zZm9ybWVyfSBwYXlsb2FkVHJhbnNmb3JtZXJcbiAgICovXG4gIGZ1bmN0aW9uIFJlcXVlc3RTZW5kZXIocmVxdWVzdEZhY3RvcnksIHBheWxvYWRUcmFuc2Zvcm1lcikge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXF1ZXN0U2VuZGVyKTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtSZXF1ZXN0RmFjdG9yeX1cbiAgICAgKi9cbiAgICB0aGlzLnJlcXVlc3RGYWN0b3J5ID0gcmVxdWVzdEZhY3Rvcnk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtQYXlsb2FkVHJhbnNmb3JtZXJ9XG4gICAgICovXG4gICAgdGhpcy5wYXlsb2FkVHJhbnNmb3JtZXIgPSBwYXlsb2FkVHJhbnNmb3JtZXI7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja11cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKFJlcXVlc3RTZW5kZXIsIFt7XG4gICAga2V5OiBcInNlbmRSZXF1ZXN0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRSZXF1ZXN0KHVybCwgZGF0YSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB2YXIgbWVyZ2VkT3B0aW9ucyA9ICgwLCBfZGVlcEFzc2lnbi5kZWZhdWx0KSh7fSwgX2RlZmF1bHRPcHRpb25zLmRlZmF1bHQsIG9wdGlvbnMpO1xuICAgICAgdmFyIHhociA9IHRoaXMucmVxdWVzdEZhY3RvcnkuY3JlYXRlUmVxdWVzdCh1cmwsIG1lcmdlZE9wdGlvbnMsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5wYXlsb2FkVHJhbnNmb3JtZXIuZnJvbVJlc3BvbnNlKHhocik7XG4gICAgICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yIHx8ICFfdGhpcy5pc1N1Y2Nlc3NmdWxSZXF1ZXN0KHhocikpIHtcbiAgICAgICAgICBjYWxsYmFjayhyZXNwb25zZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIHBheWxvYWQgPSB0aGlzLnBheWxvYWRUcmFuc2Zvcm1lci50b1JlcXVlc3QoZGF0YSwgbWVyZ2VkT3B0aW9ucy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSk7XG4gICAgICB4aHIuc2VuZChwYXlsb2FkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXVxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICB9LCB7XG4gICAga2V5OiBcInBvc3RSZXF1ZXN0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBvc3RSZXF1ZXN0KHVybCwgZGF0YSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBtZXJnZWRPcHRpb25zID0gKDAsIF9vYmplY3RBc3NpZ24uZGVmYXVsdCkoe30sIG9wdGlvbnMsIHtcbiAgICAgICAgbWV0aG9kOiBfbWV0aG9kVHlwZXMuUE9TVFxuICAgICAgfSk7XG4gICAgICB0aGlzLnNlbmRSZXF1ZXN0KHVybCwgZGF0YSwgbWVyZ2VkT3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtYTUxIdHRwUmVxdWVzdH0geGhyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwiaXNTdWNjZXNzZnVsUmVxdWVzdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1N1Y2Nlc3NmdWxSZXF1ZXN0KHhocikge1xuICAgICAgcmV0dXJuIHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDA7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwiY3JlYXRlXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHJldHVybnMge1JlcXVlc3RTZW5kZXJ9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgICAgdmFyIHJlcXVlc3RGYWN0b3J5ID0gX3JlcXVlc3RGYWN0b3J5LmRlZmF1bHQuY3JlYXRlKCk7XG4gICAgICB2YXIgcGF5bG9hZFRyYW5zZm9ybWVyID0gX3BheWxvYWRUcmFuc2Zvcm1lci5kZWZhdWx0LmNyZWF0ZSgpO1xuICAgICAgcmV0dXJuIG5ldyBSZXF1ZXN0U2VuZGVyKHJlcXVlc3RGYWN0b3J5LCBwYXlsb2FkVHJhbnNmb3JtZXIpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVxdWVzdC1zZW5kZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/request-sender.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/utils/includes.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/utils/includes.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = includes;\n/**\n * @param {array|string} items\n * @param {array|string} item\n * @returns {boolean}\n */\nfunction includes(items, item) {\n  if (!Array.isArray(items) && typeof items !== 'string') {\n    return false;\n  }\n  return items.indexOf(item) !== -1;\n}\n//# sourceMappingURL=includes.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9pbmNsdWRlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBZTtBQUNmO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCLFdBQVcsY0FBYztBQUN6QixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9jb21tb24vdXRpbHMvaW5jbHVkZXMuanM/N2VkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGluY2x1ZGVzO1xuLyoqXG4gKiBAcGFyYW0ge2FycmF5fHN0cmluZ30gaXRlbXNcbiAqIEBwYXJhbSB7YXJyYXl8c3RyaW5nfSBpdGVtXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaW5jbHVkZXMoaXRlbXMsIGl0ZW0pIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGl0ZW1zKSAmJiB0eXBlb2YgaXRlbXMgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBpdGVtcy5pbmRleE9mKGl0ZW0pICE9PSAtMTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluY2x1ZGVzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/utils/includes.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nObject.defineProperty(exports, \"includes\", ({\n  enumerable: true,\n  get: function get() {\n    return _includes.default;\n  }\n}));\nObject.defineProperty(exports, \"isNil\", ({\n  enumerable: true,\n  get: function get() {\n    return _isNil.default;\n  }\n}));\nObject.defineProperty(exports, \"isObject\", ({\n  enumerable: true,\n  get: function get() {\n    return _isObject.default;\n  }\n}));\nObject.defineProperty(exports, \"omitEmptyStringAndNil\", ({\n  enumerable: true,\n  get: function get() {\n    return _omitEmptystringAndNil.default;\n  }\n}));\nObject.defineProperty(exports, \"omitNil\", ({\n  enumerable: true,\n  get: function get() {\n    return _omitNil.default;\n  }\n}));\nObject.defineProperty(exports, \"omitProperty\", ({\n  enumerable: true,\n  get: function get() {\n    return _omitProperty.default;\n  }\n}));\nObject.defineProperty(exports, \"toNumber\", ({\n  enumerable: true,\n  get: function get() {\n    return _toNumber.default;\n  }\n}));\nObject.defineProperty(exports, \"toSnakeCase\", ({\n  enumerable: true,\n  get: function get() {\n    return _toSnakeCase.default;\n  }\n}));\nObject.defineProperty(exports, \"toString\", ({\n  enumerable: true,\n  get: function get() {\n    return _toString.default;\n  }\n}));\nvar _includes = _interopRequireDefault(__webpack_require__(/*! ./includes */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/includes.js\"));\nvar _isNil = _interopRequireDefault(__webpack_require__(/*! ./is-nil */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-nil.js\"));\nvar _isObject = _interopRequireDefault(__webpack_require__(/*! ./is-object */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-object.js\"));\nvar _omitEmptystringAndNil = _interopRequireDefault(__webpack_require__(/*! ./omit-emptystring-and-nil */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-emptystring-and-nil.js\"));\nvar _omitNil = _interopRequireDefault(__webpack_require__(/*! ./omit-nil */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-nil.js\"));\nvar _omitProperty = _interopRequireDefault(__webpack_require__(/*! ./omit-property */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-property.js\"));\nvar _toNumber = _interopRequireDefault(__webpack_require__(/*! ./to-number */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/to-number.js\"));\nvar _toSnakeCase = _interopRequireDefault(__webpack_require__(/*! ./to-snake-case */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/to-snake-case.js\"));\nvar _toString = _interopRequireDefault(__webpack_require__(/*! ./to-string */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/to-string.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRiw0Q0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRix5Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRiw0Q0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRix5REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRiwyQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRixnREFBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRiw0Q0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRiwrQ0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRiw0Q0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRix1Q0FBdUMsbUJBQU8sQ0FBQywwRkFBWTtBQUMzRCxvQ0FBb0MsbUJBQU8sQ0FBQyxzRkFBVTtBQUN0RCx1Q0FBdUMsbUJBQU8sQ0FBQyw0RkFBYTtBQUM1RCxvREFBb0QsbUJBQU8sQ0FBQywwSEFBNEI7QUFDeEYsc0NBQXNDLG1CQUFPLENBQUMsMEZBQVk7QUFDMUQsMkNBQTJDLG1CQUFPLENBQUMsb0dBQWlCO0FBQ3BFLHVDQUF1QyxtQkFBTyxDQUFDLDRGQUFhO0FBQzVELDBDQUEwQyxtQkFBTyxDQUFDLG9HQUFpQjtBQUNuRSx1Q0FBdUMsbUJBQU8sQ0FBQyw0RkFBYTtBQUM1RCxxQ0FBcUMsaUNBQWlDO0FBQ3RFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9pbmRleC5qcz83OWM0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiaW5jbHVkZXNcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2luY2x1ZGVzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiaXNOaWxcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2lzTmlsLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiaXNPYmplY3RcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2lzT2JqZWN0LmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwib21pdEVtcHR5U3RyaW5nQW5kTmlsXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9vbWl0RW1wdHlzdHJpbmdBbmROaWwuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJvbWl0TmlsXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9vbWl0TmlsLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwib21pdFByb3BlcnR5XCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9vbWl0UHJvcGVydHkuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ0b051bWJlclwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfdG9OdW1iZXIuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ0b1NuYWtlQ2FzZVwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfdG9TbmFrZUNhc2UuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ0b1N0cmluZ1wiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfdG9TdHJpbmcuZGVmYXVsdDtcbiAgfVxufSk7XG52YXIgX2luY2x1ZGVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9pbmNsdWRlc1wiKSk7XG52YXIgX2lzTmlsID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9pcy1uaWxcIikpO1xudmFyIF9pc09iamVjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vaXMtb2JqZWN0XCIpKTtcbnZhciBfb21pdEVtcHR5c3RyaW5nQW5kTmlsID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9vbWl0LWVtcHR5c3RyaW5nLWFuZC1uaWxcIikpO1xudmFyIF9vbWl0TmlsID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9vbWl0LW5pbFwiKSk7XG52YXIgX29taXRQcm9wZXJ0eSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vb21pdC1wcm9wZXJ0eVwiKSk7XG52YXIgX3RvTnVtYmVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi90by1udW1iZXJcIikpO1xudmFyIF90b1NuYWtlQ2FzZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdG8tc25ha2UtY2FzZVwiKSk7XG52YXIgX3RvU3RyaW5nID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi90by1zdHJpbmdcIikpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKSB7IHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTsgfVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-empty-string.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-empty-string.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = isEmptyString;\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isEmptyString(value) {\n  return value === '';\n}\n//# sourceMappingURL=is-empty-string.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9pcy1lbXB0eS1zdHJpbmcuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZjtBQUNBLFdBQVcsR0FBRztBQUNkLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9pcy1lbXB0eS1zdHJpbmcuanM/NmUwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGlzRW1wdHlTdHJpbmc7XG4vKipcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0VtcHR5U3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gJyc7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy1lbXB0eS1zdHJpbmcuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-empty-string.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-emptystring-or-nil.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-emptystring-or-nil.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = isEmptyStringOrNil;\nvar _isEmptyString = _interopRequireDefault(__webpack_require__(/*! ./is-empty-string */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-empty-string.js\"));\nvar _isNil = _interopRequireDefault(__webpack_require__(/*! ./is-nil */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-nil.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isEmptyStringOrNil(value) {\n  return (0, _isEmptyString.default)(value) || (0, _isNil.default)(value);\n}\n//# sourceMappingURL=is-emptystring-or-nil.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9pcy1lbXB0eXN0cmluZy1vci1uaWwuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZiw0Q0FBNEMsbUJBQU8sQ0FBQyx3R0FBbUI7QUFDdkUsb0NBQW9DLG1CQUFPLENBQUMsc0ZBQVU7QUFDdEQscUNBQXFDLGlDQUFpQztBQUN0RTtBQUNBLFdBQVcsR0FBRztBQUNkLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9pcy1lbXB0eXN0cmluZy1vci1uaWwuanM/MGExMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGlzRW1wdHlTdHJpbmdPck5pbDtcbnZhciBfaXNFbXB0eVN0cmluZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vaXMtZW1wdHktc3RyaW5nXCIpKTtcbnZhciBfaXNOaWwgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2lzLW5pbFwiKSk7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9OyB9XG4vKipcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0VtcHR5U3RyaW5nT3JOaWwodmFsdWUpIHtcbiAgcmV0dXJuICgwLCBfaXNFbXB0eVN0cmluZy5kZWZhdWx0KSh2YWx1ZSkgfHwgKDAsIF9pc05pbC5kZWZhdWx0KSh2YWx1ZSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy1lbXB0eXN0cmluZy1vci1uaWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-emptystring-or-nil.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-nil.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-nil.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = isNil;\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isNil(value) {\n  if (value === null || value === undefined) {\n    return true;\n  }\n  return false;\n}\n//# sourceMappingURL=is-nil.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9pcy1uaWwuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZjtBQUNBLFdBQVcsR0FBRztBQUNkLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9pcy1uaWwuanM/MjE3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGlzTmlsO1xuLyoqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNOaWwodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy1uaWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-nil.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-object.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-object.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = isObject;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isObject(value) {\n  return value !== null && _typeof(value) === 'object' && !Array.isArray(value);\n}\n//# sourceMappingURL=is-object.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9pcy1vYmplY3QuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZixzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUztBQUNBLFdBQVcsR0FBRztBQUNkLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9pcy1vYmplY3QuanM/NTMwZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGlzT2JqZWN0O1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuLyoqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIF90eXBlb2YodmFsdWUpID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy1vYmplY3QuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-object.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-emptystring-and-nil.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-emptystring-and-nil.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = omitEmptyStringAndNil;\nvar _isEmptystringOrNil = _interopRequireDefault(__webpack_require__(/*! ./is-emptystring-or-nil */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-emptystring-or-nil.js\"));\nvar _omitProperty = _interopRequireDefault(__webpack_require__(/*! ./omit-property */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-property.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/**\n * @param {Object} object\n * @returns {Object}\n */\nfunction omitEmptyStringAndNil(object) {\n  return (0, _omitProperty.default)(object, _isEmptystringOrNil.default);\n}\n//# sourceMappingURL=omit-emptystring-and-nil.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9vbWl0LWVtcHR5c3RyaW5nLWFuZC1uaWwuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZixpREFBaUQsbUJBQU8sQ0FBQyxvSEFBeUI7QUFDbEYsMkNBQTJDLG1CQUFPLENBQUMsb0dBQWlCO0FBQ3BFLHFDQUFxQyxpQ0FBaUM7QUFDdEU7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvYmlncGF5LWNsaWVudC9saWIvY29tbW9uL3V0aWxzL29taXQtZW1wdHlzdHJpbmctYW5kLW5pbC5qcz84NmQ1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gb21pdEVtcHR5U3RyaW5nQW5kTmlsO1xudmFyIF9pc0VtcHR5c3RyaW5nT3JOaWwgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2lzLWVtcHR5c3RyaW5nLW9yLW5pbFwiKSk7XG52YXIgX29taXRQcm9wZXJ0eSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vb21pdC1wcm9wZXJ0eVwiKSk7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9OyB9XG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIG9taXRFbXB0eVN0cmluZ0FuZE5pbChvYmplY3QpIHtcbiAgcmV0dXJuICgwLCBfb21pdFByb3BlcnR5LmRlZmF1bHQpKG9iamVjdCwgX2lzRW1wdHlzdHJpbmdPck5pbC5kZWZhdWx0KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9taXQtZW1wdHlzdHJpbmctYW5kLW5pbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-emptystring-and-nil.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-nil.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-nil.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = omitNil;\nvar _isNil = _interopRequireDefault(__webpack_require__(/*! ./is-nil */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-nil.js\"));\nvar _omitProperty = _interopRequireDefault(__webpack_require__(/*! ./omit-property */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-property.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/**\n * @param {Object} object\n * @returns {Object}\n */\nfunction omitNil(object) {\n  return (0, _omitProperty.default)(object, _isNil.default);\n}\n//# sourceMappingURL=omit-nil.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9vbWl0LW5pbC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBZTtBQUNmLG9DQUFvQyxtQkFBTyxDQUFDLHNGQUFVO0FBQ3RELDJDQUEyQyxtQkFBTyxDQUFDLG9HQUFpQjtBQUNwRSxxQ0FBcUMsaUNBQWlDO0FBQ3RFO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9vbWl0LW5pbC5qcz8zMTA4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gb21pdE5pbDtcbnZhciBfaXNOaWwgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2lzLW5pbFwiKSk7XG52YXIgX29taXRQcm9wZXJ0eSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vb21pdC1wcm9wZXJ0eVwiKSk7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9OyB9XG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIG9taXROaWwob2JqZWN0KSB7XG4gIHJldHVybiAoMCwgX29taXRQcm9wZXJ0eS5kZWZhdWx0KShvYmplY3QsIF9pc05pbC5kZWZhdWx0KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9taXQtbmlsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-nil.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-property.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-property.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = omitProperty;\nvar _isObject = _interopRequireDefault(__webpack_require__(/*! ./is-object */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/is-object.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/**\n * @param {Object} object\n * @param {Function} predicateFn\n * @returns {Object}\n */\nfunction omitProperty(object, predicateFn) {\n  if (!(0, _isObject.default)(object)) {\n    return object;\n  }\n  var keys = Object.keys(object);\n  return keys.reduce(function (result, key) {\n    var value = object[key];\n    if (!predicateFn(value)) {\n      result[key] = value;\n    }\n    return result;\n  }, {});\n}\n//# sourceMappingURL=omit-property.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy9vbWl0LXByb3BlcnR5LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2YsdUNBQXVDLG1CQUFPLENBQUMsNEZBQWE7QUFDNUQscUNBQXFDLGlDQUFpQztBQUN0RTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFVBQVU7QUFDckIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSTtBQUNQO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvYmlncGF5LWNsaWVudC9saWIvY29tbW9uL3V0aWxzL29taXQtcHJvcGVydHkuanM/ZTk0YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IG9taXRQcm9wZXJ0eTtcbnZhciBfaXNPYmplY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2lzLW9iamVjdFwiKSk7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9OyB9XG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZUZuXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBvbWl0UHJvcGVydHkob2JqZWN0LCBwcmVkaWNhdGVGbikge1xuICBpZiAoISgwLCBfaXNPYmplY3QuZGVmYXVsdCkob2JqZWN0KSkge1xuICAgIHJldHVybiBvYmplY3Q7XG4gIH1cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwga2V5KSB7XG4gICAgdmFyIHZhbHVlID0gb2JqZWN0W2tleV07XG4gICAgaWYgKCFwcmVkaWNhdGVGbih2YWx1ZSkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sIHt9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9taXQtcHJvcGVydHkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/utils/omit-property.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/utils/to-number.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/utils/to-number.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = toNumber;\n/**\n * @param {*} value\n * @returns {number}\n */\nfunction toNumber(value) {\n  return parseFloat(value) || 0;\n}\n//# sourceMappingURL=to-number.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy90by1udW1iZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZjtBQUNBLFdBQVcsR0FBRztBQUNkLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy90by1udW1iZXIuanM/YjYxNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHRvTnVtYmVyO1xuLyoqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvLW51bWJlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/utils/to-number.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/utils/to-snake-case.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/utils/to-snake-case.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = toSnakeCase;\n/**\n * @param {string} string\n * @returns {string}\n */\nfunction toSnakeCase(string) {\n  if (typeof string !== 'string') {\n    return string;\n  }\n  return string.replace(/([a-z\\d])([A-Z]+)/g, '$1_$2').replace(/[-\\s]+/g, '_').toLowerCase();\n}\n//# sourceMappingURL=to-snake-case.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy90by1zbmFrZS1jYXNlLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2Y7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvYmlncGF5LWNsaWVudC9saWIvY29tbW9uL3V0aWxzL3RvLXNuYWtlLWNhc2UuanM/ZjYyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHRvU25ha2VDYXNlO1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB0b1NuYWtlQ2FzZShzdHJpbmcpIHtcbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfVxuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbYS16XFxkXSkoW0EtWl0rKS9nLCAnJDFfJDInKS5yZXBsYWNlKC9bLVxcc10rL2csICdfJykudG9Mb3dlckNhc2UoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvLXNuYWtlLWNhc2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/utils/to-snake-case.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/common/utils/to-string.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/common/utils/to-string.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = toString;\n/**\n * @param {*} value\n * @returns {string}\n */\nfunction toString(value) {\n  if (typeof value === 'string') {\n    return value;\n  }\n  if (typeof value === 'number' && !Number.isNaN(value)) {\n    return value.toString();\n  }\n  return '';\n}\n//# sourceMappingURL=to-string.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy90by1zdHJpbmcuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZjtBQUNBLFdBQVcsR0FBRztBQUNkLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2NvbW1vbi91dGlscy90by1zdHJpbmcuanM/YjI4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHRvU3RyaW5nO1xuLyoqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB0b1N0cmluZyh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhTnVtYmVyLmlzTmFOKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICB9XG4gIHJldHVybiAnJztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvLXN0cmluZy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/common/utils/to-string.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.createClient = createClient;\nvar _client = _interopRequireDefault(__webpack_require__(/*! ./client/client */ \"./node_modules/@bigcommerce/bigpay-client/lib/client/client.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/**\n * @param {Object} [config]\n * @returns {Client}\n */\nfunction createClient(config) {\n  return _client.default.create(config);\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLG9CQUFvQjtBQUNwQixxQ0FBcUMsbUJBQU8sQ0FBQyx1RkFBaUI7QUFDOUQscUNBQXFDLGlDQUFpQztBQUN0RTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9pbmRleC5qcz9hNzFjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5jcmVhdGVDbGllbnQgPSBjcmVhdGVDbGllbnQ7XG52YXIgX2NsaWVudCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vY2xpZW50L2NsaWVudFwiKSk7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9OyB9XG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnXVxuICogQHJldHVybnMge0NsaWVudH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2xpZW50KGNvbmZpZykge1xuICByZXR1cm4gX2NsaWVudC5kZWZhdWx0LmNyZWF0ZShjb25maWcpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/index.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/client-token-generator.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/client-token-generator.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _requestSender = _interopRequireDefault(__webpack_require__(/*! ../common/http-request/request-sender */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/request-sender.js\"));\nvar _clientTokenMapper = _interopRequireDefault(__webpack_require__(/*! ./v2/payment-mappers/client-token-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/client-token-mapper.js\"));\nvar _urlHelper = _interopRequireDefault(__webpack_require__(/*! ./url-helper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/url-helper.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar ClientTokenGenerator = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {UrlHelper} urlHelper\n   * @param {RequestSender} requestSender\n   * @param {ClientTokenMapper} clientTokenMapper\n   * @returns {void}\n   */\n  function ClientTokenGenerator(urlHelper, requestSender, clientTokenMapper) {\n    _classCallCheck(this, ClientTokenGenerator);\n    /**\n     * @private\n     * @type {UrlHelper}\n     */\n    this.urlHelper = urlHelper;\n\n    /**\n     * @private\n     * @type {RequestSender}\n     */\n    this.requestSender = requestSender;\n\n    /**\n     * @private\n     * @type {ClientTokenMapper}\n     */\n    this.clientTokenMapper = clientTokenMapper;\n  }\n\n  /**\n   * @param {PaymentRequestData} data\n   * @param {Function} [callback]\n   * @returns {void}\n   */\n  return _createClass(ClientTokenGenerator, [{\n    key: \"generateClientToken\",\n    value: function generateClientToken(data, callback) {\n      var url = this.urlHelper.getGenerateClientTokenUrl();\n      var payload = this.clientTokenMapper.mapToClientToken(data);\n      this.requestSender.postRequest(url, payload, {}, callback);\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @param {Object} config\n     * @returns {PaymentSubmitter}\n     */\n    function create(config) {\n      var urlHelper = _urlHelper.default.create(config);\n      var requestSender = _requestSender.default.create();\n      var clientTokenMapper = _clientTokenMapper.default.create();\n      return new ClientTokenGenerator(urlHelper, requestSender, clientTokenMapper);\n    }\n  }]);\n}();\n//# sourceMappingURL=client-token-generator.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvY2xpZW50LXRva2VuLWdlbmVyYXRvci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBZTtBQUNmLDRDQUE0QyxtQkFBTyxDQUFDLGtJQUF1QztBQUMzRixnREFBZ0QsbUJBQU8sQ0FBQyxpSkFBMEM7QUFDbEcsd0NBQXdDLG1CQUFPLENBQUMseUZBQWM7QUFDOUQscUNBQXFDLGlDQUFpQztBQUN0RSxzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1EsMkJBQTJCLGtCQUFlO0FBQzFDO0FBQ0EsYUFBYSxXQUFXO0FBQ3hCLGFBQWEsZUFBZTtBQUM1QixhQUFhLG1CQUFtQjtBQUNoQyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWEsb0JBQW9CO0FBQ2pDLGFBQWEsVUFBVTtBQUN2QixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvY2xpZW50LXRva2VuLWdlbmVyYXRvci5qcz81MTM0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF9yZXF1ZXN0U2VuZGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vY29tbW9uL2h0dHAtcmVxdWVzdC9yZXF1ZXN0LXNlbmRlclwiKSk7XG52YXIgX2NsaWVudFRva2VuTWFwcGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92Mi9wYXltZW50LW1hcHBlcnMvY2xpZW50LXRva2VuLW1hcHBlclwiKSk7XG52YXIgX3VybEhlbHBlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdXJsLWhlbHBlclwiKSk7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9OyB9XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgQ2xpZW50VG9rZW5HZW5lcmF0b3IgPSBleHBvcnRzLmRlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQHBhcmFtIHtVcmxIZWxwZXJ9IHVybEhlbHBlclxuICAgKiBAcGFyYW0ge1JlcXVlc3RTZW5kZXJ9IHJlcXVlc3RTZW5kZXJcbiAgICogQHBhcmFtIHtDbGllbnRUb2tlbk1hcHBlcn0gY2xpZW50VG9rZW5NYXBwZXJcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBmdW5jdGlvbiBDbGllbnRUb2tlbkdlbmVyYXRvcih1cmxIZWxwZXIsIHJlcXVlc3RTZW5kZXIsIGNsaWVudFRva2VuTWFwcGVyKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENsaWVudFRva2VuR2VuZXJhdG9yKTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtVcmxIZWxwZXJ9XG4gICAgICovXG4gICAgdGhpcy51cmxIZWxwZXIgPSB1cmxIZWxwZXI7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtSZXF1ZXN0U2VuZGVyfVxuICAgICAqL1xuICAgIHRoaXMucmVxdWVzdFNlbmRlciA9IHJlcXVlc3RTZW5kZXI7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtDbGllbnRUb2tlbk1hcHBlcn1cbiAgICAgKi9cbiAgICB0aGlzLmNsaWVudFRva2VuTWFwcGVyID0gY2xpZW50VG9rZW5NYXBwZXI7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtQYXltZW50UmVxdWVzdERhdGF9IGRhdGFcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoQ2xpZW50VG9rZW5HZW5lcmF0b3IsIFt7XG4gICAga2V5OiBcImdlbmVyYXRlQ2xpZW50VG9rZW5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2VuZXJhdGVDbGllbnRUb2tlbihkYXRhLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHVybCA9IHRoaXMudXJsSGVscGVyLmdldEdlbmVyYXRlQ2xpZW50VG9rZW5VcmwoKTtcbiAgICAgIHZhciBwYXlsb2FkID0gdGhpcy5jbGllbnRUb2tlbk1hcHBlci5tYXBUb0NsaWVudFRva2VuKGRhdGEpO1xuICAgICAgdGhpcy5yZXF1ZXN0U2VuZGVyLnBvc3RSZXF1ZXN0KHVybCwgcGF5bG9hZCwge30sIGNhbGxiYWNrKTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJjcmVhdGVcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAgICogQHJldHVybnMge1BheW1lbnRTdWJtaXR0ZXJ9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlKGNvbmZpZykge1xuICAgICAgdmFyIHVybEhlbHBlciA9IF91cmxIZWxwZXIuZGVmYXVsdC5jcmVhdGUoY29uZmlnKTtcbiAgICAgIHZhciByZXF1ZXN0U2VuZGVyID0gX3JlcXVlc3RTZW5kZXIuZGVmYXVsdC5jcmVhdGUoKTtcbiAgICAgIHZhciBjbGllbnRUb2tlbk1hcHBlciA9IF9jbGllbnRUb2tlbk1hcHBlci5kZWZhdWx0LmNyZWF0ZSgpO1xuICAgICAgcmV0dXJuIG5ldyBDbGllbnRUb2tlbkdlbmVyYXRvcih1cmxIZWxwZXIsIHJlcXVlc3RTZW5kZXIsIGNsaWVudFRva2VuTWFwcGVyKTtcbiAgICB9XG4gIH1dKTtcbn0oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC10b2tlbi1nZW5lcmF0b3IuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/client-token-generator.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-initializer.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-initializer.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _formPoster = __webpack_require__(/*! @bigcommerce/form-poster */ \"./node_modules/@bigcommerce/form-poster/lib/index.js\");\nvar _paymentTypes = __webpack_require__(/*! ./payment-types */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-types.js\");\nvar _payloadMapper = _interopRequireDefault(__webpack_require__(/*! ./offsite-payment-mappers/payload-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/payload-mapper.js\"));\nvar _urlHelper = _interopRequireDefault(__webpack_require__(/*! ./url-helper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/url-helper.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar OffsitePaymentInitializer = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {UrlHelper} urlHelper\n   * @param {FormPoster} formPoster\n   * @param {PayloadMapper} payloadMapper\n   * @returns {void}\n   */\n  function OffsitePaymentInitializer(urlHelper, formPoster, payloadMapper) {\n    _classCallCheck(this, OffsitePaymentInitializer);\n    /**\n     * @private\n     * @type {UrlHelper}\n     */\n    this.urlHelper = urlHelper;\n\n    /**\n     * @private\n     * @type {FormPoster}\n     */\n    this.formPoster = formPoster;\n\n    /**\n     * @private\n     * @type {PayloadMapper}\n     */\n    this.payloadMapper = payloadMapper;\n  }\n\n  /**\n   * @param {PaymentRequestData} data\n   * @param {Function} [callback]\n   * @param {string} target\n   * @returns {void}\n   * @throws {Error}\n   */\n  return _createClass(OffsitePaymentInitializer, [{\n    key: \"initializeOffsitePayment\",\n    value: function initializeOffsitePayment(data, callback, target) {\n      var _data$paymentMethod = data.paymentMethod,\n        paymentMethod = _data$paymentMethod === void 0 ? {} : _data$paymentMethod;\n      if (paymentMethod.type !== _paymentTypes.HOSTED) {\n        throw new Error(\"\".concat(paymentMethod.type, \" is not supported.\"));\n      }\n      var payload = this.payloadMapper.mapToPayload(data);\n      var url = this.urlHelper.getOffsitePaymentUrl();\n      this.formPoster.postForm(url, payload, callback, target);\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @param {Object} config\n     * @returns {OffsitePaymentInitializer}\n     */\n    function create(config) {\n      var urlHelper = _urlHelper.default.create(config);\n      var formPoster = (0, _formPoster.createFormPoster)();\n      var payloadMapper = _payloadMapper.default.create();\n      return new OffsitePaymentInitializer(urlHelper, formPoster, payloadMapper);\n    }\n  }]);\n}();\n//# sourceMappingURL=offsite-payment-initializer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvb2Zmc2l0ZS1wYXltZW50LWluaXRpYWxpemVyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2Ysa0JBQWtCLG1CQUFPLENBQUMsc0ZBQTBCO0FBQ3BELG9CQUFvQixtQkFBTyxDQUFDLCtGQUFpQjtBQUM3Qyw0Q0FBNEMsbUJBQU8sQ0FBQyxpSkFBMEM7QUFDOUYsd0NBQXdDLG1CQUFPLENBQUMseUZBQWM7QUFDOUQscUNBQXFDLGlDQUFpQztBQUN0RSxzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1EsZ0NBQWdDLGtCQUFlO0FBQy9DO0FBQ0EsYUFBYSxXQUFXO0FBQ3hCLGFBQWEsWUFBWTtBQUN6QixhQUFhLGVBQWU7QUFDNUIsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhLG9CQUFvQjtBQUNqQyxhQUFhLFVBQVU7QUFDdkIsYUFBYSxRQUFRO0FBQ3JCLGVBQWU7QUFDZixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9wYXltZW50L29mZnNpdGUtcGF5bWVudC1pbml0aWFsaXplci5qcz9hZTI0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF9mb3JtUG9zdGVyID0gcmVxdWlyZShcIkBiaWdjb21tZXJjZS9mb3JtLXBvc3RlclwiKTtcbnZhciBfcGF5bWVudFR5cGVzID0gcmVxdWlyZShcIi4vcGF5bWVudC10eXBlc1wiKTtcbnZhciBfcGF5bG9hZE1hcHBlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vb2Zmc2l0ZS1wYXltZW50LW1hcHBlcnMvcGF5bG9hZC1tYXBwZXJcIikpO1xudmFyIF91cmxIZWxwZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3VybC1oZWxwZXJcIikpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKSB7IHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTsgfVxuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsIG4pIHsgaWYgKCEoYSBpbnN0YW5jZW9mIG4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLCByKSB7IGZvciAodmFyIHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgeyB2YXIgbyA9IHJbdF07IG8uZW51bWVyYWJsZSA9IG8uZW51bWVyYWJsZSB8fCAhMSwgby5jb25maWd1cmFibGUgPSAhMCwgXCJ2YWx1ZVwiIGluIG8gJiYgKG8ud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBfdG9Qcm9wZXJ0eUtleShvLmtleSksIG8pOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLCByLCB0KSB7IHJldHVybiByICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLCByKSwgdCAmJiBfZGVmaW5lUHJvcGVydGllcyhlLCB0KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6ICExIH0pLCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIE9mZnNpdGVQYXltZW50SW5pdGlhbGl6ZXIgPSBleHBvcnRzLmRlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQHBhcmFtIHtVcmxIZWxwZXJ9IHVybEhlbHBlclxuICAgKiBAcGFyYW0ge0Zvcm1Qb3N0ZXJ9IGZvcm1Qb3N0ZXJcbiAgICogQHBhcmFtIHtQYXlsb2FkTWFwcGVyfSBwYXlsb2FkTWFwcGVyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgZnVuY3Rpb24gT2Zmc2l0ZVBheW1lbnRJbml0aWFsaXplcih1cmxIZWxwZXIsIGZvcm1Qb3N0ZXIsIHBheWxvYWRNYXBwZXIpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT2Zmc2l0ZVBheW1lbnRJbml0aWFsaXplcik7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7VXJsSGVscGVyfVxuICAgICAqL1xuICAgIHRoaXMudXJsSGVscGVyID0gdXJsSGVscGVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Rm9ybVBvc3Rlcn1cbiAgICAgKi9cbiAgICB0aGlzLmZvcm1Qb3N0ZXIgPSBmb3JtUG9zdGVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7UGF5bG9hZE1hcHBlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBheWxvYWRNYXBwZXIgPSBwYXlsb2FkTWFwcGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja11cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldFxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICogQHRocm93cyB7RXJyb3J9XG4gICAqL1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKE9mZnNpdGVQYXltZW50SW5pdGlhbGl6ZXIsIFt7XG4gICAga2V5OiBcImluaXRpYWxpemVPZmZzaXRlUGF5bWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0aWFsaXplT2Zmc2l0ZVBheW1lbnQoZGF0YSwgY2FsbGJhY2ssIHRhcmdldCkge1xuICAgICAgdmFyIF9kYXRhJHBheW1lbnRNZXRob2QgPSBkYXRhLnBheW1lbnRNZXRob2QsXG4gICAgICAgIHBheW1lbnRNZXRob2QgPSBfZGF0YSRwYXltZW50TWV0aG9kID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJHBheW1lbnRNZXRob2Q7XG4gICAgICBpZiAocGF5bWVudE1ldGhvZC50eXBlICE9PSBfcGF5bWVudFR5cGVzLkhPU1RFRCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQocGF5bWVudE1ldGhvZC50eXBlLCBcIiBpcyBub3Qgc3VwcG9ydGVkLlwiKSk7XG4gICAgICB9XG4gICAgICB2YXIgcGF5bG9hZCA9IHRoaXMucGF5bG9hZE1hcHBlci5tYXBUb1BheWxvYWQoZGF0YSk7XG4gICAgICB2YXIgdXJsID0gdGhpcy51cmxIZWxwZXIuZ2V0T2Zmc2l0ZVBheW1lbnRVcmwoKTtcbiAgICAgIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybSh1cmwsIHBheWxvYWQsIGNhbGxiYWNrLCB0YXJnZXQpO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImNyZWF0ZVwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAgICAgKiBAcmV0dXJucyB7T2Zmc2l0ZVBheW1lbnRJbml0aWFsaXplcn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUoY29uZmlnKSB7XG4gICAgICB2YXIgdXJsSGVscGVyID0gX3VybEhlbHBlci5kZWZhdWx0LmNyZWF0ZShjb25maWcpO1xuICAgICAgdmFyIGZvcm1Qb3N0ZXIgPSAoMCwgX2Zvcm1Qb3N0ZXIuY3JlYXRlRm9ybVBvc3RlcikoKTtcbiAgICAgIHZhciBwYXlsb2FkTWFwcGVyID0gX3BheWxvYWRNYXBwZXIuZGVmYXVsdC5jcmVhdGUoKTtcbiAgICAgIHJldHVybiBuZXcgT2Zmc2l0ZVBheW1lbnRJbml0aWFsaXplcih1cmxIZWxwZXIsIGZvcm1Qb3N0ZXIsIHBheWxvYWRNYXBwZXIpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2Zmc2l0ZS1wYXltZW50LWluaXRpYWxpemVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-initializer.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/address-mapper.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/address-mapper.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar AddressMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  function AddressMapper() {\n    _classCallCheck(this, AddressMapper);\n  }\n  return _createClass(AddressMapper, [{\n    key: \"mapToBillingAddress\",\n    value:\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    function mapToBillingAddress(data) {\n      return this.mapToAddress(data, 'billingAddress');\n    }\n\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToShippingAddress\",\n    value: function mapToShippingAddress(data) {\n      return this.mapToAddress(data, 'shippingAddress');\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @param {string} addressKey\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToAddress\",\n    value: function mapToAddress(data, addressKey) {\n      var _omitNil;\n      var address = data[addressKey] || {};\n      var formattedAddressKey = (0, _utils.toSnakeCase)(addressKey);\n      return (0, _utils.omitNil)((_omitNil = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_omitNil, \"\".concat(formattedAddressKey, \"_city\"), address.city), \"\".concat(formattedAddressKey, \"_company\"), address.company), \"\".concat(formattedAddressKey, \"_country_code\"), address.countryCode), \"\".concat(formattedAddressKey, \"_country\"), address.country), \"\".concat(formattedAddressKey, \"_first_name\"), address.firstName), \"\".concat(formattedAddressKey, \"_last_name\"), address.lastName), \"\".concat(formattedAddressKey, \"_phone\"), address.phone), \"\".concat(formattedAddressKey, \"_state_code\"), address.provinceCode), \"\".concat(formattedAddressKey, \"_state\"), address.province), \"\".concat(formattedAddressKey, \"_street_1\"), address.addressLine1), _defineProperty(_defineProperty(_omitNil, \"\".concat(formattedAddressKey, \"_street_2\"), address.addressLine2), \"\".concat(formattedAddressKey, \"_zip\"), address.postCode)));\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {AddressMapper}\n     */\n    function create() {\n      return new AddressMapper();\n    }\n  }]);\n}();\n//# sourceMappingURL=address-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvb2Zmc2l0ZS1wYXltZW50LW1hcHBlcnMvYWRkcmVzcy1tYXBwZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZixhQUFhLG1CQUFPLENBQUMsK0ZBQW9CO0FBQ3pDLHNCQUFzQiwyQkFBMkIsb0dBQW9HLG1CQUFtQixpQkFBaUIsc0hBQXNIO0FBQy9TLG9DQUFvQyxvRUFBb0UsMERBQTBEO0FBQ2xLLGlDQUFpQztBQUNqQyxtQ0FBbUMsZ0JBQWdCLGNBQWMsT0FBTyxjQUFjO0FBQ3RGLGlDQUFpQyxxSEFBcUgsY0FBYztBQUNwSyw2QkFBNkIsbUNBQW1DO0FBQ2hFLDhCQUE4Qiw0Q0FBNEMsK0JBQStCLG9CQUFvQixtQ0FBbUMsc0NBQXNDLHVFQUF1RTtBQUM3USxvQkFBb0Isa0JBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxpQkFBaUI7QUFDakI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvb2Zmc2l0ZS1wYXltZW50LW1hcHBlcnMvYWRkcmVzcy1tYXBwZXIuanM/NzVmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfdXRpbHMgPSByZXF1aXJlKFwiLi4vLi4vY29tbW9uL3V0aWxzXCIpO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KGUsIHIsIHQpIHsgcmV0dXJuIChyID0gX3RvUHJvcGVydHlLZXkocikpIGluIGUgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgeyB2YWx1ZTogdCwgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCB9KSA6IGVbcl0gPSB0LCBlOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgQWRkcmVzc01hcHBlciA9IGV4cG9ydHMuZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEFkZHJlc3NNYXBwZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFkZHJlc3NNYXBwZXIpO1xuICB9XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoQWRkcmVzc01hcHBlciwgW3tcbiAgICBrZXk6IFwibWFwVG9CaWxsaW5nQWRkcmVzc1wiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXBUb0JpbGxpbmdBZGRyZXNzKGRhdGEpIHtcbiAgICAgIHJldHVybiB0aGlzLm1hcFRvQWRkcmVzcyhkYXRhLCAnYmlsbGluZ0FkZHJlc3MnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwibWFwVG9TaGlwcGluZ0FkZHJlc3NcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwVG9TaGlwcGluZ0FkZHJlc3MoZGF0YSkge1xuICAgICAgcmV0dXJuIHRoaXMubWFwVG9BZGRyZXNzKGRhdGEsICdzaGlwcGluZ0FkZHJlc3MnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFkZHJlc3NLZXlcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqL1xuICB9LCB7XG4gICAga2V5OiBcIm1hcFRvQWRkcmVzc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBUb0FkZHJlc3MoZGF0YSwgYWRkcmVzc0tleSkge1xuICAgICAgdmFyIF9vbWl0TmlsO1xuICAgICAgdmFyIGFkZHJlc3MgPSBkYXRhW2FkZHJlc3NLZXldIHx8IHt9O1xuICAgICAgdmFyIGZvcm1hdHRlZEFkZHJlc3NLZXkgPSAoMCwgX3V0aWxzLnRvU25ha2VDYXNlKShhZGRyZXNzS2V5KTtcbiAgICAgIHJldHVybiAoMCwgX3V0aWxzLm9taXROaWwpKChfb21pdE5pbCA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX29taXROaWwsIFwiXCIuY29uY2F0KGZvcm1hdHRlZEFkZHJlc3NLZXksIFwiX2NpdHlcIiksIGFkZHJlc3MuY2l0eSksIFwiXCIuY29uY2F0KGZvcm1hdHRlZEFkZHJlc3NLZXksIFwiX2NvbXBhbnlcIiksIGFkZHJlc3MuY29tcGFueSksIFwiXCIuY29uY2F0KGZvcm1hdHRlZEFkZHJlc3NLZXksIFwiX2NvdW50cnlfY29kZVwiKSwgYWRkcmVzcy5jb3VudHJ5Q29kZSksIFwiXCIuY29uY2F0KGZvcm1hdHRlZEFkZHJlc3NLZXksIFwiX2NvdW50cnlcIiksIGFkZHJlc3MuY291bnRyeSksIFwiXCIuY29uY2F0KGZvcm1hdHRlZEFkZHJlc3NLZXksIFwiX2ZpcnN0X25hbWVcIiksIGFkZHJlc3MuZmlyc3ROYW1lKSwgXCJcIi5jb25jYXQoZm9ybWF0dGVkQWRkcmVzc0tleSwgXCJfbGFzdF9uYW1lXCIpLCBhZGRyZXNzLmxhc3ROYW1lKSwgXCJcIi5jb25jYXQoZm9ybWF0dGVkQWRkcmVzc0tleSwgXCJfcGhvbmVcIiksIGFkZHJlc3MucGhvbmUpLCBcIlwiLmNvbmNhdChmb3JtYXR0ZWRBZGRyZXNzS2V5LCBcIl9zdGF0ZV9jb2RlXCIpLCBhZGRyZXNzLnByb3ZpbmNlQ29kZSksIFwiXCIuY29uY2F0KGZvcm1hdHRlZEFkZHJlc3NLZXksIFwiX3N0YXRlXCIpLCBhZGRyZXNzLnByb3ZpbmNlKSwgXCJcIi5jb25jYXQoZm9ybWF0dGVkQWRkcmVzc0tleSwgXCJfc3RyZWV0XzFcIiksIGFkZHJlc3MuYWRkcmVzc0xpbmUxKSwgX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfb21pdE5pbCwgXCJcIi5jb25jYXQoZm9ybWF0dGVkQWRkcmVzc0tleSwgXCJfc3RyZWV0XzJcIiksIGFkZHJlc3MuYWRkcmVzc0xpbmUyKSwgXCJcIi5jb25jYXQoZm9ybWF0dGVkQWRkcmVzc0tleSwgXCJfemlwXCIpLCBhZGRyZXNzLnBvc3RDb2RlKSkpO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImNyZWF0ZVwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtBZGRyZXNzTWFwcGVyfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICAgIHJldHVybiBuZXcgQWRkcmVzc01hcHBlcigpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRkcmVzcy1tYXBwZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/address-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/customer-mapper.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/customer-mapper.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar CustomerMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  function CustomerMapper() {\n    _classCallCheck(this, CustomerMapper);\n  }\n  return _createClass(CustomerMapper, [{\n    key: \"mapToCustomer\",\n    value:\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    function mapToCustomer(data) {\n      var _data$customer = data.customer,\n        customer = _data$customer === void 0 ? {} : _data$customer,\n        _data$quoteMeta = data.quoteMeta,\n        quoteMeta = _data$quoteMeta === void 0 ? {} : _data$quoteMeta,\n        _data$store = data.store,\n        store = _data$store === void 0 ? {} : _data$store;\n      return (0, _utils.omitNil)({\n        customer_browser_info: navigator.userAgent,\n        customer_email: customer.email,\n        customer_first_name: customer.firstName,\n        customer_geo_ip_country_code: quoteMeta.request ? quoteMeta.request.geoCountryCode : null,\n        customer_id: customer.customerId,\n        customer_last_name: customer.lastName,\n        customer_locale: store.storeLanguage,\n        customer_name: customer.name,\n        customer_phone: customer.phoneNumber,\n        customer_reference: customer.email\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {CustomerMapper}\n     */\n    function create() {\n      return new CustomerMapper();\n    }\n  }]);\n}();\n//# sourceMappingURL=customer-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvb2Zmc2l0ZS1wYXltZW50LW1hcHBlcnMvY3VzdG9tZXItbWFwcGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2YsYUFBYSxtQkFBTyxDQUFDLCtGQUFvQjtBQUN6QyxzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1EscUJBQXFCLGtCQUFlO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvQkFBb0I7QUFDbkMsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvYmlncGF5LWNsaWVudC9saWIvcGF5bWVudC9vZmZzaXRlLXBheW1lbnQtbWFwcGVycy9jdXN0b21lci1tYXBwZXIuanM/YjE1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfdXRpbHMgPSByZXF1aXJlKFwiLi4vLi4vY29tbW9uL3V0aWxzXCIpO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsIG4pIHsgaWYgKCEoYSBpbnN0YW5jZW9mIG4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLCByKSB7IGZvciAodmFyIHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgeyB2YXIgbyA9IHJbdF07IG8uZW51bWVyYWJsZSA9IG8uZW51bWVyYWJsZSB8fCAhMSwgby5jb25maWd1cmFibGUgPSAhMCwgXCJ2YWx1ZVwiIGluIG8gJiYgKG8ud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBfdG9Qcm9wZXJ0eUtleShvLmtleSksIG8pOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLCByLCB0KSB7IHJldHVybiByICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLCByKSwgdCAmJiBfZGVmaW5lUHJvcGVydGllcyhlLCB0KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6ICExIH0pLCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIEN1c3RvbWVyTWFwcGVyID0gZXhwb3J0cy5kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ3VzdG9tZXJNYXBwZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEN1c3RvbWVyTWFwcGVyKTtcbiAgfVxuICByZXR1cm4gX2NyZWF0ZUNsYXNzKEN1c3RvbWVyTWFwcGVyLCBbe1xuICAgIGtleTogXCJtYXBUb0N1c3RvbWVyXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQYXltZW50UmVxdWVzdERhdGF9IGRhdGFcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcFRvQ3VzdG9tZXIoZGF0YSkge1xuICAgICAgdmFyIF9kYXRhJGN1c3RvbWVyID0gZGF0YS5jdXN0b21lcixcbiAgICAgICAgY3VzdG9tZXIgPSBfZGF0YSRjdXN0b21lciA9PT0gdm9pZCAwID8ge30gOiBfZGF0YSRjdXN0b21lcixcbiAgICAgICAgX2RhdGEkcXVvdGVNZXRhID0gZGF0YS5xdW90ZU1ldGEsXG4gICAgICAgIHF1b3RlTWV0YSA9IF9kYXRhJHF1b3RlTWV0YSA9PT0gdm9pZCAwID8ge30gOiBfZGF0YSRxdW90ZU1ldGEsXG4gICAgICAgIF9kYXRhJHN0b3JlID0gZGF0YS5zdG9yZSxcbiAgICAgICAgc3RvcmUgPSBfZGF0YSRzdG9yZSA9PT0gdm9pZCAwID8ge30gOiBfZGF0YSRzdG9yZTtcbiAgICAgIHJldHVybiAoMCwgX3V0aWxzLm9taXROaWwpKHtcbiAgICAgICAgY3VzdG9tZXJfYnJvd3Nlcl9pbmZvOiBuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgICAgICBjdXN0b21lcl9lbWFpbDogY3VzdG9tZXIuZW1haWwsXG4gICAgICAgIGN1c3RvbWVyX2ZpcnN0X25hbWU6IGN1c3RvbWVyLmZpcnN0TmFtZSxcbiAgICAgICAgY3VzdG9tZXJfZ2VvX2lwX2NvdW50cnlfY29kZTogcXVvdGVNZXRhLnJlcXVlc3QgPyBxdW90ZU1ldGEucmVxdWVzdC5nZW9Db3VudHJ5Q29kZSA6IG51bGwsXG4gICAgICAgIGN1c3RvbWVyX2lkOiBjdXN0b21lci5jdXN0b21lcklkLFxuICAgICAgICBjdXN0b21lcl9sYXN0X25hbWU6IGN1c3RvbWVyLmxhc3ROYW1lLFxuICAgICAgICBjdXN0b21lcl9sb2NhbGU6IHN0b3JlLnN0b3JlTGFuZ3VhZ2UsXG4gICAgICAgIGN1c3RvbWVyX25hbWU6IGN1c3RvbWVyLm5hbWUsXG4gICAgICAgIGN1c3RvbWVyX3Bob25lOiBjdXN0b21lci5waG9uZU51bWJlcixcbiAgICAgICAgY3VzdG9tZXJfcmVmZXJlbmNlOiBjdXN0b21lci5lbWFpbFxuICAgICAgfSk7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwiY3JlYXRlXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHJldHVybnMge0N1c3RvbWVyTWFwcGVyfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICAgIHJldHVybiBuZXcgQ3VzdG9tZXJNYXBwZXIoKTtcbiAgICB9XG4gIH1dKTtcbn0oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWN1c3RvbWVyLW1hcHBlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/customer-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/meta-mapper.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/meta-mapper.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar MetaMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  function MetaMapper() {\n    _classCallCheck(this, MetaMapper);\n  }\n  return _createClass(MetaMapper, [{\n    key: \"mapToMeta\",\n    value:\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    function mapToMeta(data) {\n      var source = data.source;\n      return (0, _utils.omitNil)({\n        meta_referrer: document.referrer,\n        meta_source: source,\n        meta_user_agent: navigator.userAgent\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {MetaMapper}\n     */\n    function create() {\n      return new MetaMapper();\n    }\n  }]);\n}();\n//# sourceMappingURL=meta-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvb2Zmc2l0ZS1wYXltZW50LW1hcHBlcnMvbWV0YS1tYXBwZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZixhQUFhLG1CQUFPLENBQUMsK0ZBQW9CO0FBQ3pDLHNCQUFzQiwyQkFBMkIsb0dBQW9HLG1CQUFtQixpQkFBaUIsc0hBQXNIO0FBQy9TLGlDQUFpQztBQUNqQyxtQ0FBbUMsZ0JBQWdCLGNBQWMsT0FBTyxjQUFjO0FBQ3RGLGlDQUFpQyxxSEFBcUgsY0FBYztBQUNwSyw2QkFBNkIsbUNBQW1DO0FBQ2hFLDhCQUE4Qiw0Q0FBNEMsK0JBQStCLG9CQUFvQixtQ0FBbUMsc0NBQXNDLHVFQUF1RTtBQUM3USxpQkFBaUIsa0JBQWU7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9wYXltZW50L29mZnNpdGUtcGF5bWVudC1tYXBwZXJzL21ldGEtbWFwcGVyLmpzP2I4OGUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG52YXIgX3V0aWxzID0gcmVxdWlyZShcIi4uLy4uL2NvbW1vbi91dGlsc1wiKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhhLCBuKSB7IGlmICghKGEgaW5zdGFuY2VvZiBuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSwgcikgeyBmb3IgKHZhciB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0KyspIHsgdmFyIG8gPSByW3RdOyBvLmVudW1lcmFibGUgPSBvLmVudW1lcmFibGUgfHwgITEsIG8uY29uZmlndXJhYmxlID0gITAsIFwidmFsdWVcIiBpbiBvICYmIChvLndyaXRhYmxlID0gITApLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgX3RvUHJvcGVydHlLZXkoby5rZXkpLCBvKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSwgciwgdCkgeyByZXR1cm4gciAmJiBfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSwgciksIHQgJiYgX2RlZmluZVByb3BlcnRpZXMoZSwgdCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiAhMSB9KSwgZTsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbnZhciBNZXRhTWFwcGVyID0gZXhwb3J0cy5kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTWV0YU1hcHBlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWV0YU1hcHBlcik7XG4gIH1cbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhNZXRhTWFwcGVyLCBbe1xuICAgIGtleTogXCJtYXBUb01ldGFcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwVG9NZXRhKGRhdGEpIHtcbiAgICAgIHZhciBzb3VyY2UgPSBkYXRhLnNvdXJjZTtcbiAgICAgIHJldHVybiAoMCwgX3V0aWxzLm9taXROaWwpKHtcbiAgICAgICAgbWV0YV9yZWZlcnJlcjogZG9jdW1lbnQucmVmZXJyZXIsXG4gICAgICAgIG1ldGFfc291cmNlOiBzb3VyY2UsXG4gICAgICAgIG1ldGFfdXNlcl9hZ2VudDogbmF2aWdhdG9yLnVzZXJBZ2VudFxuICAgICAgfSk7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwiY3JlYXRlXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHJldHVybnMge01ldGFNYXBwZXJ9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgICAgcmV0dXJuIG5ldyBNZXRhTWFwcGVyKCk7XG4gICAgfVxuICB9XSk7XG59KCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRhLW1hcHBlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/meta-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/payload-mapper.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/payload-mapper.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _objectAssign = _interopRequireDefault(__webpack_require__(/*! object-assign */ \"./node_modules/object-assign/index.js\"));\nvar _utils = __webpack_require__(/*! ../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nvar _addressMapper = _interopRequireDefault(__webpack_require__(/*! ./address-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/address-mapper.js\"));\nvar _customerMapper = _interopRequireDefault(__webpack_require__(/*! ./customer-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/customer-mapper.js\"));\nvar _metaMapper = _interopRequireDefault(__webpack_require__(/*! ./meta-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/meta-mapper.js\"));\nvar _paymentMethodIdMapper = _interopRequireDefault(__webpack_require__(/*! ../payment-method-mappers/payment-method-id-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-mappers/payment-method-id-mapper.js\"));\nvar _storeMapper = _interopRequireDefault(__webpack_require__(/*! ./store-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/store-mapper.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar PayloadMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {AddressMapper} addressMapper\n   * @param {CustomerMapper} customerMapper\n   * @param {MetaMapper} metaMapper\n   * @param {PaymentMethodIdMapper} paymentMethodIdMapper\n   * @param {StoreMapper} storeMapper\n   * @returns {Object}\n   */\n  function PayloadMapper(addressMapper, customerMapper, metaMapper, paymentMethodIdMapper, storeMapper) {\n    _classCallCheck(this, PayloadMapper);\n    /**\n     * @private\n     * @type {AddressMapper}\n     */\n    this.addressMapper = addressMapper;\n\n    /**\n     * @private\n     * @type {CustomerMapper}\n     */\n    this.customerMapper = customerMapper;\n\n    /**\n     * @private\n     * @type {MetaMapper}\n     */\n    this.metaMapper = metaMapper;\n\n    /**\n     * @private\n     * @type {PaymentMethodIdMapper}\n     */\n    this.paymentMethodIdMapper = paymentMethodIdMapper;\n\n    /**\n     * @private\n     * @type {StoreMapper}\n     */\n    this.storeMapper = storeMapper;\n  }\n\n  /**\n   * @param {PaymentRequestData} data\n   * @returns {Object}\n   */\n  return _createClass(PayloadMapper, [{\n    key: \"mapToPayload\",\n    value: function mapToPayload(data) {\n      var authToken = data.authToken,\n        _data$order = data.order,\n        order = _data$order === void 0 ? {} : _data$order,\n        _data$payment = data.payment,\n        payment = _data$payment === void 0 ? {} : _data$payment,\n        _data$paymentMethod = data.paymentMethod,\n        paymentMethod = _data$paymentMethod === void 0 ? {} : _data$paymentMethod;\n      var payload = (0, _objectAssign.default)({\n        amount: order.grandTotal ? order.grandTotal.integerAmount : null,\n        tax: order.taxTotal ? order.taxTotal.integerAmount : null,\n        bc_auth_token: authToken,\n        currency: order.currency,\n        gateway: this.paymentMethodIdMapper.mapToId(paymentMethod),\n        notify_url: order.callbackUrl,\n        order_id: order.orderId ? (0, _utils.toString)(order.orderId) : null,\n        page_title: document.title ? document.title : null,\n        payment_method_id: paymentMethod.id,\n        reference_id: order.orderId ? (0, _utils.toString)(order.orderId) : null,\n        return_url: paymentMethod.returnUrl || (order.payment ? order.payment.returnUrl : null)\n      }, this.addressMapper.mapToBillingAddress(data), this.customerMapper.mapToCustomer(data), this.metaMapper.mapToMeta(data), this.addressMapper.mapToShippingAddress(data), this.storeMapper.mapToStore(data));\n      var _payment$formattedPay = payment.formattedPayload,\n        formattedPayload = _payment$formattedPay === void 0 ? {} : _payment$formattedPay;\n      (0, _objectAssign.default)(payload, formattedPayload);\n      return (0, _utils.omitNil)(payload);\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {PayloadMapper}\n     */\n    function create() {\n      var addressMapper = _addressMapper.default.create();\n      var customerMapper = _customerMapper.default.create();\n      var metaMapper = _metaMapper.default.create();\n      var paymentMethodIdMapper = _paymentMethodIdMapper.default.create();\n      var storeMapper = _storeMapper.default.create();\n      return new PayloadMapper(addressMapper, customerMapper, metaMapper, paymentMethodIdMapper, storeMapper);\n    }\n  }]);\n}();\n//# sourceMappingURL=payload-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvb2Zmc2l0ZS1wYXltZW50LW1hcHBlcnMvcGF5bG9hZC1tYXBwZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZiwyQ0FBMkMsbUJBQU8sQ0FBQyw0REFBZTtBQUNsRSxhQUFhLG1CQUFPLENBQUMsK0ZBQW9CO0FBQ3pDLDRDQUE0QyxtQkFBTyxDQUFDLHlIQUFrQjtBQUN0RSw2Q0FBNkMsbUJBQU8sQ0FBQywySEFBbUI7QUFDeEUseUNBQXlDLG1CQUFPLENBQUMsbUhBQWU7QUFDaEUsb0RBQW9ELG1CQUFPLENBQUMsb0tBQW9EO0FBQ2hILDBDQUEwQyxtQkFBTyxDQUFDLHFIQUFnQjtBQUNsRSxxQ0FBcUMsaUNBQWlDO0FBQ3RFLHNCQUFzQiwyQkFBMkIsb0dBQW9HLG1CQUFtQixpQkFBaUIsc0hBQXNIO0FBQy9TLGlDQUFpQztBQUNqQyxtQ0FBbUMsZ0JBQWdCLGNBQWMsT0FBTyxjQUFjO0FBQ3RGLGlDQUFpQyxxSEFBcUgsY0FBYztBQUNwSyw2QkFBNkIsbUNBQW1DO0FBQ2hFLDhCQUE4Qiw0Q0FBNEMsK0JBQStCLG9CQUFvQixtQ0FBbUMsc0NBQXNDLHVFQUF1RTtBQUM3USxvQkFBb0Isa0JBQWU7QUFDbkM7QUFDQSxhQUFhLGVBQWU7QUFDNUIsYUFBYSxnQkFBZ0I7QUFDN0IsYUFBYSxZQUFZO0FBQ3pCLGFBQWEsdUJBQXVCO0FBQ3BDLGFBQWEsYUFBYTtBQUMxQixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxvQkFBb0I7QUFDakMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBLGdEQUFnRDtBQUNoRDtBQUNBLDREQUE0RDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxpRUFBaUU7QUFDakU7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvb2Zmc2l0ZS1wYXltZW50LW1hcHBlcnMvcGF5bG9hZC1tYXBwZXIuanM/NTg3OSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfb2JqZWN0QXNzaWduID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwib2JqZWN0LWFzc2lnblwiKSk7XG52YXIgX3V0aWxzID0gcmVxdWlyZShcIi4uLy4uL2NvbW1vbi91dGlsc1wiKTtcbnZhciBfYWRkcmVzc01hcHBlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vYWRkcmVzcy1tYXBwZXJcIikpO1xudmFyIF9jdXN0b21lck1hcHBlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vY3VzdG9tZXItbWFwcGVyXCIpKTtcbnZhciBfbWV0YU1hcHBlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vbWV0YS1tYXBwZXJcIikpO1xudmFyIF9wYXltZW50TWV0aG9kSWRNYXBwZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9wYXltZW50LW1ldGhvZC1tYXBwZXJzL3BheW1lbnQtbWV0aG9kLWlkLW1hcHBlclwiKSk7XG52YXIgX3N0b3JlTWFwcGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9zdG9yZS1tYXBwZXJcIikpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKSB7IHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTsgfVxuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsIG4pIHsgaWYgKCEoYSBpbnN0YW5jZW9mIG4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLCByKSB7IGZvciAodmFyIHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgeyB2YXIgbyA9IHJbdF07IG8uZW51bWVyYWJsZSA9IG8uZW51bWVyYWJsZSB8fCAhMSwgby5jb25maWd1cmFibGUgPSAhMCwgXCJ2YWx1ZVwiIGluIG8gJiYgKG8ud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBfdG9Qcm9wZXJ0eUtleShvLmtleSksIG8pOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLCByLCB0KSB7IHJldHVybiByICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLCByKSwgdCAmJiBfZGVmaW5lUHJvcGVydGllcyhlLCB0KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6ICExIH0pLCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIFBheWxvYWRNYXBwZXIgPSBleHBvcnRzLmRlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQHBhcmFtIHtBZGRyZXNzTWFwcGVyfSBhZGRyZXNzTWFwcGVyXG4gICAqIEBwYXJhbSB7Q3VzdG9tZXJNYXBwZXJ9IGN1c3RvbWVyTWFwcGVyXG4gICAqIEBwYXJhbSB7TWV0YU1hcHBlcn0gbWV0YU1hcHBlclxuICAgKiBAcGFyYW0ge1BheW1lbnRNZXRob2RJZE1hcHBlcn0gcGF5bWVudE1ldGhvZElkTWFwcGVyXG4gICAqIEBwYXJhbSB7U3RvcmVNYXBwZXJ9IHN0b3JlTWFwcGVyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBmdW5jdGlvbiBQYXlsb2FkTWFwcGVyKGFkZHJlc3NNYXBwZXIsIGN1c3RvbWVyTWFwcGVyLCBtZXRhTWFwcGVyLCBwYXltZW50TWV0aG9kSWRNYXBwZXIsIHN0b3JlTWFwcGVyKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBheWxvYWRNYXBwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FkZHJlc3NNYXBwZXJ9XG4gICAgICovXG4gICAgdGhpcy5hZGRyZXNzTWFwcGVyID0gYWRkcmVzc01hcHBlcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0N1c3RvbWVyTWFwcGVyfVxuICAgICAqL1xuICAgIHRoaXMuY3VzdG9tZXJNYXBwZXIgPSBjdXN0b21lck1hcHBlcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge01ldGFNYXBwZXJ9XG4gICAgICovXG4gICAgdGhpcy5tZXRhTWFwcGVyID0gbWV0YU1hcHBlcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1BheW1lbnRNZXRob2RJZE1hcHBlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBheW1lbnRNZXRob2RJZE1hcHBlciA9IHBheW1lbnRNZXRob2RJZE1hcHBlcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1N0b3JlTWFwcGVyfVxuICAgICAqL1xuICAgIHRoaXMuc3RvcmVNYXBwZXIgPSBzdG9yZU1hcHBlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhQYXlsb2FkTWFwcGVyLCBbe1xuICAgIGtleTogXCJtYXBUb1BheWxvYWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwVG9QYXlsb2FkKGRhdGEpIHtcbiAgICAgIHZhciBhdXRoVG9rZW4gPSBkYXRhLmF1dGhUb2tlbixcbiAgICAgICAgX2RhdGEkb3JkZXIgPSBkYXRhLm9yZGVyLFxuICAgICAgICBvcmRlciA9IF9kYXRhJG9yZGVyID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJG9yZGVyLFxuICAgICAgICBfZGF0YSRwYXltZW50ID0gZGF0YS5wYXltZW50LFxuICAgICAgICBwYXltZW50ID0gX2RhdGEkcGF5bWVudCA9PT0gdm9pZCAwID8ge30gOiBfZGF0YSRwYXltZW50LFxuICAgICAgICBfZGF0YSRwYXltZW50TWV0aG9kID0gZGF0YS5wYXltZW50TWV0aG9kLFxuICAgICAgICBwYXltZW50TWV0aG9kID0gX2RhdGEkcGF5bWVudE1ldGhvZCA9PT0gdm9pZCAwID8ge30gOiBfZGF0YSRwYXltZW50TWV0aG9kO1xuICAgICAgdmFyIHBheWxvYWQgPSAoMCwgX29iamVjdEFzc2lnbi5kZWZhdWx0KSh7XG4gICAgICAgIGFtb3VudDogb3JkZXIuZ3JhbmRUb3RhbCA/IG9yZGVyLmdyYW5kVG90YWwuaW50ZWdlckFtb3VudCA6IG51bGwsXG4gICAgICAgIHRheDogb3JkZXIudGF4VG90YWwgPyBvcmRlci50YXhUb3RhbC5pbnRlZ2VyQW1vdW50IDogbnVsbCxcbiAgICAgICAgYmNfYXV0aF90b2tlbjogYXV0aFRva2VuLFxuICAgICAgICBjdXJyZW5jeTogb3JkZXIuY3VycmVuY3ksXG4gICAgICAgIGdhdGV3YXk6IHRoaXMucGF5bWVudE1ldGhvZElkTWFwcGVyLm1hcFRvSWQocGF5bWVudE1ldGhvZCksXG4gICAgICAgIG5vdGlmeV91cmw6IG9yZGVyLmNhbGxiYWNrVXJsLFxuICAgICAgICBvcmRlcl9pZDogb3JkZXIub3JkZXJJZCA/ICgwLCBfdXRpbHMudG9TdHJpbmcpKG9yZGVyLm9yZGVySWQpIDogbnVsbCxcbiAgICAgICAgcGFnZV90aXRsZTogZG9jdW1lbnQudGl0bGUgPyBkb2N1bWVudC50aXRsZSA6IG51bGwsXG4gICAgICAgIHBheW1lbnRfbWV0aG9kX2lkOiBwYXltZW50TWV0aG9kLmlkLFxuICAgICAgICByZWZlcmVuY2VfaWQ6IG9yZGVyLm9yZGVySWQgPyAoMCwgX3V0aWxzLnRvU3RyaW5nKShvcmRlci5vcmRlcklkKSA6IG51bGwsXG4gICAgICAgIHJldHVybl91cmw6IHBheW1lbnRNZXRob2QucmV0dXJuVXJsIHx8IChvcmRlci5wYXltZW50ID8gb3JkZXIucGF5bWVudC5yZXR1cm5VcmwgOiBudWxsKVxuICAgICAgfSwgdGhpcy5hZGRyZXNzTWFwcGVyLm1hcFRvQmlsbGluZ0FkZHJlc3MoZGF0YSksIHRoaXMuY3VzdG9tZXJNYXBwZXIubWFwVG9DdXN0b21lcihkYXRhKSwgdGhpcy5tZXRhTWFwcGVyLm1hcFRvTWV0YShkYXRhKSwgdGhpcy5hZGRyZXNzTWFwcGVyLm1hcFRvU2hpcHBpbmdBZGRyZXNzKGRhdGEpLCB0aGlzLnN0b3JlTWFwcGVyLm1hcFRvU3RvcmUoZGF0YSkpO1xuICAgICAgdmFyIF9wYXltZW50JGZvcm1hdHRlZFBheSA9IHBheW1lbnQuZm9ybWF0dGVkUGF5bG9hZCxcbiAgICAgICAgZm9ybWF0dGVkUGF5bG9hZCA9IF9wYXltZW50JGZvcm1hdHRlZFBheSA9PT0gdm9pZCAwID8ge30gOiBfcGF5bWVudCRmb3JtYXR0ZWRQYXk7XG4gICAgICAoMCwgX29iamVjdEFzc2lnbi5kZWZhdWx0KShwYXlsb2FkLCBmb3JtYXR0ZWRQYXlsb2FkKTtcbiAgICAgIHJldHVybiAoMCwgX3V0aWxzLm9taXROaWwpKHBheWxvYWQpO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImNyZWF0ZVwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtQYXlsb2FkTWFwcGVyfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICAgIHZhciBhZGRyZXNzTWFwcGVyID0gX2FkZHJlc3NNYXBwZXIuZGVmYXVsdC5jcmVhdGUoKTtcbiAgICAgIHZhciBjdXN0b21lck1hcHBlciA9IF9jdXN0b21lck1hcHBlci5kZWZhdWx0LmNyZWF0ZSgpO1xuICAgICAgdmFyIG1ldGFNYXBwZXIgPSBfbWV0YU1hcHBlci5kZWZhdWx0LmNyZWF0ZSgpO1xuICAgICAgdmFyIHBheW1lbnRNZXRob2RJZE1hcHBlciA9IF9wYXltZW50TWV0aG9kSWRNYXBwZXIuZGVmYXVsdC5jcmVhdGUoKTtcbiAgICAgIHZhciBzdG9yZU1hcHBlciA9IF9zdG9yZU1hcHBlci5kZWZhdWx0LmNyZWF0ZSgpO1xuICAgICAgcmV0dXJuIG5ldyBQYXlsb2FkTWFwcGVyKGFkZHJlc3NNYXBwZXIsIGN1c3RvbWVyTWFwcGVyLCBtZXRhTWFwcGVyLCBwYXltZW50TWV0aG9kSWRNYXBwZXIsIHN0b3JlTWFwcGVyKTtcbiAgICB9XG4gIH1dKTtcbn0oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBheWxvYWQtbWFwcGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/payload-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/store-mapper.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/store-mapper.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar StoreMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  function StoreMapper() {\n    _classCallCheck(this, StoreMapper);\n  }\n  return _createClass(StoreMapper, [{\n    key: \"mapToStore\",\n    value:\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    function mapToStore(data) {\n      var _data$store = data.store,\n        store = _data$store === void 0 ? {} : _data$store;\n      return (0, _utils.omitNil)({\n        store_hash: store.storeHash,\n        store_id: store.storeId ? (0, _utils.toString)(store.storeId) : null\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {StoreMapper}\n     */\n    function create() {\n      return new StoreMapper();\n    }\n  }]);\n}();\n//# sourceMappingURL=store-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvb2Zmc2l0ZS1wYXltZW50LW1hcHBlcnMvc3RvcmUtbWFwcGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2YsYUFBYSxtQkFBTyxDQUFDLCtGQUFvQjtBQUN6QyxzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1Esa0JBQWtCLGtCQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvQkFBb0I7QUFDbkMsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9wYXltZW50L29mZnNpdGUtcGF5bWVudC1tYXBwZXJzL3N0b3JlLW1hcHBlci5qcz9jN2E2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF91dGlscyA9IHJlcXVpcmUoXCIuLi8uLi9jb21tb24vdXRpbHNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgU3RvcmVNYXBwZXIgPSBleHBvcnRzLmRlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTdG9yZU1hcHBlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RvcmVNYXBwZXIpO1xuICB9XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoU3RvcmVNYXBwZXIsIFt7XG4gICAga2V5OiBcIm1hcFRvU3RvcmVcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwVG9TdG9yZShkYXRhKSB7XG4gICAgICB2YXIgX2RhdGEkc3RvcmUgPSBkYXRhLnN0b3JlLFxuICAgICAgICBzdG9yZSA9IF9kYXRhJHN0b3JlID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJHN0b3JlO1xuICAgICAgcmV0dXJuICgwLCBfdXRpbHMub21pdE5pbCkoe1xuICAgICAgICBzdG9yZV9oYXNoOiBzdG9yZS5zdG9yZUhhc2gsXG4gICAgICAgIHN0b3JlX2lkOiBzdG9yZS5zdG9yZUlkID8gKDAsIF91dGlscy50b1N0cmluZykoc3RvcmUuc3RvcmVJZCkgOiBudWxsXG4gICAgICB9KTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJjcmVhdGVcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7U3RvcmVNYXBwZXJ9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgICAgcmV0dXJuIG5ldyBTdG9yZU1hcHBlcigpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RvcmUtbWFwcGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/offsite-payment-mappers/store-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-ids.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-ids.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.PAYPAL_COMMERCE_VENMO = exports.PAYPAL_COMMERCE_CREDIT_CARDS = exports.PAYPAL_COMMERCE_CREDIT = exports.PAYPAL_COMMERCE_ALTERNATIVE_METHODS = exports.PAYPAL_COMMERCE_ACCELERATED_CHECKOUT = exports.PAYPAL_COMMERCE = exports.BRAINTREE_VISACHECKOUT = exports.BRAINTREE_PAYPAL_CREDIT = exports.BRAINTREE_PAYPAL = exports.BRAINTREE_LOCAL_METHODS = exports.BRAINTREE_GOOGLEPAY = exports.BRAINTREE_ACH = exports.BRAINTREE_ACCELERATED_CHECKOUT = exports.BRAINTREE = exports.BIGCOMMERCE_PAYMENTS_VENMO = exports.BIGCOMMERCE_PAYMENTS_PAYLATER = exports.BIGCOMMERCE_PAYMENTS_FASTLANE = exports.BIGCOMMERCE_PAYMENTS_CREDIT_CARDS = exports.BIGCOMMERCE_PAYMENTS_APMS = exports.BIGCOMMERCE_PAYMENTS = void 0;\nvar BIGCOMMERCE_PAYMENTS = exports.BIGCOMMERCE_PAYMENTS = 'bigcommerce_payments';\nvar BIGCOMMERCE_PAYMENTS_PAYLATER = exports.BIGCOMMERCE_PAYMENTS_PAYLATER = 'bigcommerce_payments_paylater';\nvar BIGCOMMERCE_PAYMENTS_CREDIT_CARDS = exports.BIGCOMMERCE_PAYMENTS_CREDIT_CARDS = 'bigcommerce_payments_creditcards';\nvar BIGCOMMERCE_PAYMENTS_FASTLANE = exports.BIGCOMMERCE_PAYMENTS_FASTLANE = 'bigcommerce_payments_fastlane';\nvar BIGCOMMERCE_PAYMENTS_APMS = exports.BIGCOMMERCE_PAYMENTS_APMS = 'bigcommerce_payments_apms';\nvar BIGCOMMERCE_PAYMENTS_VENMO = exports.BIGCOMMERCE_PAYMENTS_VENMO = 'bigcommerce_payments_venmo';\nvar BRAINTREE = exports.BRAINTREE = 'braintree';\nvar BRAINTREE_PAYPAL = exports.BRAINTREE_PAYPAL = 'braintreepaypal';\nvar BRAINTREE_PAYPAL_CREDIT = exports.BRAINTREE_PAYPAL_CREDIT = 'braintreepaypalcredit';\nvar BRAINTREE_VISACHECKOUT = exports.BRAINTREE_VISACHECKOUT = 'braintreevisacheckout';\nvar BRAINTREE_LOCAL_METHODS = exports.BRAINTREE_LOCAL_METHODS = 'braintreelocalmethods';\nvar BRAINTREE_GOOGLEPAY = exports.BRAINTREE_GOOGLEPAY = 'googlepaybraintree';\nvar BRAINTREE_ACH = exports.BRAINTREE_ACH = 'braintreeach';\nvar BRAINTREE_ACCELERATED_CHECKOUT = exports.BRAINTREE_ACCELERATED_CHECKOUT = 'braintreeacceleratedcheckout';\nvar PAYPAL_COMMERCE = exports.PAYPAL_COMMERCE = 'paypalcommerce';\nvar PAYPAL_COMMERCE_ACCELERATED_CHECKOUT = exports.PAYPAL_COMMERCE_ACCELERATED_CHECKOUT = 'paypalcommerceacceleratedcheckout';\nvar PAYPAL_COMMERCE_ALTERNATIVE_METHODS = exports.PAYPAL_COMMERCE_ALTERNATIVE_METHODS = 'paypalcommercealternativemethods';\nvar PAYPAL_COMMERCE_CREDIT = exports.PAYPAL_COMMERCE_CREDIT = 'paypalcommercecredit';\nvar PAYPAL_COMMERCE_CREDIT_CARDS = exports.PAYPAL_COMMERCE_CREDIT_CARDS = 'paypalcommercecreditcards';\nvar PAYPAL_COMMERCE_VENMO = exports.PAYPAL_COMMERCE_VENMO = 'paypalcommercevenmo';\n//# sourceMappingURL=payment-method-ids.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvcGF5bWVudC1tZXRob2QtaWRzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLDZCQUE2QixHQUFHLG9DQUFvQyxHQUFHLDhCQUE4QixHQUFHLDJDQUEyQyxHQUFHLDRDQUE0QyxHQUFHLHVCQUF1QixHQUFHLDhCQUE4QixHQUFHLCtCQUErQixHQUFHLHdCQUF3QixHQUFHLCtCQUErQixHQUFHLDJCQUEyQixHQUFHLHFCQUFxQixHQUFHLHNDQUFzQyxHQUFHLGlCQUFpQixHQUFHLGtDQUFrQyxHQUFHLHFDQUFxQyxHQUFHLHFDQUFxQyxHQUFHLHlDQUF5QyxHQUFHLGlDQUFpQyxHQUFHLDRCQUE0QjtBQUNuckIsMkJBQTJCLDRCQUE0QjtBQUN2RCxvQ0FBb0MscUNBQXFDO0FBQ3pFLHdDQUF3Qyx5Q0FBeUM7QUFDakYsb0NBQW9DLHFDQUFxQztBQUN6RSxnQ0FBZ0MsaUNBQWlDO0FBQ2pFLGlDQUFpQyxrQ0FBa0M7QUFDbkUsZ0JBQWdCLGlCQUFpQjtBQUNqQyx1QkFBdUIsd0JBQXdCO0FBQy9DLDhCQUE4QiwrQkFBK0I7QUFDN0QsNkJBQTZCLDhCQUE4QjtBQUMzRCw4QkFBOEIsK0JBQStCO0FBQzdELDBCQUEwQiwyQkFBMkI7QUFDckQsb0JBQW9CLHFCQUFxQjtBQUN6QyxxQ0FBcUMsc0NBQXNDO0FBQzNFLHNCQUFzQix1QkFBdUI7QUFDN0MsMkNBQTJDLDRDQUE0QztBQUN2RiwwQ0FBMEMsMkNBQTJDO0FBQ3JGLDZCQUE2Qiw4QkFBOEI7QUFDM0QsbUNBQW1DLG9DQUFvQztBQUN2RSw0QkFBNEIsNkJBQTZCO0FBQ3pEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvcGF5bWVudC1tZXRob2QtaWRzLmpzP2MzYTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlBBWVBBTF9DT01NRVJDRV9WRU5NTyA9IGV4cG9ydHMuUEFZUEFMX0NPTU1FUkNFX0NSRURJVF9DQVJEUyA9IGV4cG9ydHMuUEFZUEFMX0NPTU1FUkNFX0NSRURJVCA9IGV4cG9ydHMuUEFZUEFMX0NPTU1FUkNFX0FMVEVSTkFUSVZFX01FVEhPRFMgPSBleHBvcnRzLlBBWVBBTF9DT01NRVJDRV9BQ0NFTEVSQVRFRF9DSEVDS09VVCA9IGV4cG9ydHMuUEFZUEFMX0NPTU1FUkNFID0gZXhwb3J0cy5CUkFJTlRSRUVfVklTQUNIRUNLT1VUID0gZXhwb3J0cy5CUkFJTlRSRUVfUEFZUEFMX0NSRURJVCA9IGV4cG9ydHMuQlJBSU5UUkVFX1BBWVBBTCA9IGV4cG9ydHMuQlJBSU5UUkVFX0xPQ0FMX01FVEhPRFMgPSBleHBvcnRzLkJSQUlOVFJFRV9HT09HTEVQQVkgPSBleHBvcnRzLkJSQUlOVFJFRV9BQ0ggPSBleHBvcnRzLkJSQUlOVFJFRV9BQ0NFTEVSQVRFRF9DSEVDS09VVCA9IGV4cG9ydHMuQlJBSU5UUkVFID0gZXhwb3J0cy5CSUdDT01NRVJDRV9QQVlNRU5UU19WRU5NTyA9IGV4cG9ydHMuQklHQ09NTUVSQ0VfUEFZTUVOVFNfUEFZTEFURVIgPSBleHBvcnRzLkJJR0NPTU1FUkNFX1BBWU1FTlRTX0ZBU1RMQU5FID0gZXhwb3J0cy5CSUdDT01NRVJDRV9QQVlNRU5UU19DUkVESVRfQ0FSRFMgPSBleHBvcnRzLkJJR0NPTU1FUkNFX1BBWU1FTlRTX0FQTVMgPSBleHBvcnRzLkJJR0NPTU1FUkNFX1BBWU1FTlRTID0gdm9pZCAwO1xudmFyIEJJR0NPTU1FUkNFX1BBWU1FTlRTID0gZXhwb3J0cy5CSUdDT01NRVJDRV9QQVlNRU5UUyA9ICdiaWdjb21tZXJjZV9wYXltZW50cyc7XG52YXIgQklHQ09NTUVSQ0VfUEFZTUVOVFNfUEFZTEFURVIgPSBleHBvcnRzLkJJR0NPTU1FUkNFX1BBWU1FTlRTX1BBWUxBVEVSID0gJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyJztcbnZhciBCSUdDT01NRVJDRV9QQVlNRU5UU19DUkVESVRfQ0FSRFMgPSBleHBvcnRzLkJJR0NPTU1FUkNFX1BBWU1FTlRTX0NSRURJVF9DQVJEUyA9ICdiaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkcyc7XG52YXIgQklHQ09NTUVSQ0VfUEFZTUVOVFNfRkFTVExBTkUgPSBleHBvcnRzLkJJR0NPTU1FUkNFX1BBWU1FTlRTX0ZBU1RMQU5FID0gJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lJztcbnZhciBCSUdDT01NRVJDRV9QQVlNRU5UU19BUE1TID0gZXhwb3J0cy5CSUdDT01NRVJDRV9QQVlNRU5UU19BUE1TID0gJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMnO1xudmFyIEJJR0NPTU1FUkNFX1BBWU1FTlRTX1ZFTk1PID0gZXhwb3J0cy5CSUdDT01NRVJDRV9QQVlNRU5UU19WRU5NTyA9ICdiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbyc7XG52YXIgQlJBSU5UUkVFID0gZXhwb3J0cy5CUkFJTlRSRUUgPSAnYnJhaW50cmVlJztcbnZhciBCUkFJTlRSRUVfUEFZUEFMID0gZXhwb3J0cy5CUkFJTlRSRUVfUEFZUEFMID0gJ2JyYWludHJlZXBheXBhbCc7XG52YXIgQlJBSU5UUkVFX1BBWVBBTF9DUkVESVQgPSBleHBvcnRzLkJSQUlOVFJFRV9QQVlQQUxfQ1JFRElUID0gJ2JyYWludHJlZXBheXBhbGNyZWRpdCc7XG52YXIgQlJBSU5UUkVFX1ZJU0FDSEVDS09VVCA9IGV4cG9ydHMuQlJBSU5UUkVFX1ZJU0FDSEVDS09VVCA9ICdicmFpbnRyZWV2aXNhY2hlY2tvdXQnO1xudmFyIEJSQUlOVFJFRV9MT0NBTF9NRVRIT0RTID0gZXhwb3J0cy5CUkFJTlRSRUVfTE9DQUxfTUVUSE9EUyA9ICdicmFpbnRyZWVsb2NhbG1ldGhvZHMnO1xudmFyIEJSQUlOVFJFRV9HT09HTEVQQVkgPSBleHBvcnRzLkJSQUlOVFJFRV9HT09HTEVQQVkgPSAnZ29vZ2xlcGF5YnJhaW50cmVlJztcbnZhciBCUkFJTlRSRUVfQUNIID0gZXhwb3J0cy5CUkFJTlRSRUVfQUNIID0gJ2JyYWludHJlZWFjaCc7XG52YXIgQlJBSU5UUkVFX0FDQ0VMRVJBVEVEX0NIRUNLT1VUID0gZXhwb3J0cy5CUkFJTlRSRUVfQUNDRUxFUkFURURfQ0hFQ0tPVVQgPSAnYnJhaW50cmVlYWNjZWxlcmF0ZWRjaGVja291dCc7XG52YXIgUEFZUEFMX0NPTU1FUkNFID0gZXhwb3J0cy5QQVlQQUxfQ09NTUVSQ0UgPSAncGF5cGFsY29tbWVyY2UnO1xudmFyIFBBWVBBTF9DT01NRVJDRV9BQ0NFTEVSQVRFRF9DSEVDS09VVCA9IGV4cG9ydHMuUEFZUEFMX0NPTU1FUkNFX0FDQ0VMRVJBVEVEX0NIRUNLT1VUID0gJ3BheXBhbGNvbW1lcmNlYWNjZWxlcmF0ZWRjaGVja291dCc7XG52YXIgUEFZUEFMX0NPTU1FUkNFX0FMVEVSTkFUSVZFX01FVEhPRFMgPSBleHBvcnRzLlBBWVBBTF9DT01NRVJDRV9BTFRFUk5BVElWRV9NRVRIT0RTID0gJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzJztcbnZhciBQQVlQQUxfQ09NTUVSQ0VfQ1JFRElUID0gZXhwb3J0cy5QQVlQQUxfQ09NTUVSQ0VfQ1JFRElUID0gJ3BheXBhbGNvbW1lcmNlY3JlZGl0JztcbnZhciBQQVlQQUxfQ09NTUVSQ0VfQ1JFRElUX0NBUkRTID0gZXhwb3J0cy5QQVlQQUxfQ09NTUVSQ0VfQ1JFRElUX0NBUkRTID0gJ3BheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHMnO1xudmFyIFBBWVBBTF9DT01NRVJDRV9WRU5NTyA9IGV4cG9ydHMuUEFZUEFMX0NPTU1FUkNFX1ZFTk1PID0gJ3BheXBhbGNvbW1lcmNldmVubW8nO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGF5bWVudC1tZXRob2QtaWRzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-ids.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-mappers/payment-method-id-mapper.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-mappers/payment-method-id-mapper.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _paymentMethodTypes = __webpack_require__(/*! ../payment-method-types */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-types.js\");\nvar _paymentMethodIds = __webpack_require__(/*! ../payment-method-ids */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-ids.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * @param {string} id\n * @return {Boolean}\n */\nfunction isBraintreePaymentMethod(id) {\n  switch (id) {\n    case _paymentMethodIds.BRAINTREE_PAYPAL:\n    case _paymentMethodIds.BRAINTREE_PAYPAL_CREDIT:\n    case _paymentMethodIds.BRAINTREE_VISACHECKOUT:\n    case _paymentMethodIds.BRAINTREE_GOOGLEPAY:\n    case _paymentMethodIds.BRAINTREE_ACH:\n    case _paymentMethodIds.BRAINTREE_LOCAL_METHODS:\n    case _paymentMethodIds.BRAINTREE_ACCELERATED_CHECKOUT:\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * @param {string} id\n * @return {Boolean}\n */\nfunction isPaypalCommercePaymentMethod(id) {\n  switch (id) {\n    case _paymentMethodIds.PAYPAL_COMMERCE_CREDIT:\n    case _paymentMethodIds.PAYPAL_COMMERCE_CREDIT_CARDS:\n    case _paymentMethodIds.PAYPAL_COMMERCE_ACCELERATED_CHECKOUT:\n    case _paymentMethodIds.PAYPAL_COMMERCE_ALTERNATIVE_METHODS:\n    case _paymentMethodIds.PAYPAL_COMMERCE_VENMO:\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * @param {string} id\n * @return {Boolean}\n */\nfunction isBigCommercePaymentsPaymentMethod(id) {\n  switch (id) {\n    case _paymentMethodIds.BIGCOMMERCE_PAYMENTS:\n    case _paymentMethodIds.BIGCOMMERCE_PAYMENTS_PAYLATER:\n    case _paymentMethodIds.BIGCOMMERCE_PAYMENTS_CREDIT_CARDS:\n    case _paymentMethodIds.BIGCOMMERCE_PAYMENTS_FASTLANE:\n    case _paymentMethodIds.BIGCOMMERCE_PAYMENTS_APMS:\n    case _paymentMethodIds.BIGCOMMERCE_PAYMENTS_VENMO:\n      return true;\n    default:\n      return false;\n  }\n}\nvar PaymentMethodIdMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  function PaymentMethodIdMapper() {\n    _classCallCheck(this, PaymentMethodIdMapper);\n  }\n  return _createClass(PaymentMethodIdMapper, [{\n    key: \"mapToId\",\n    value:\n    /**\n     * @param {PaymentMethod} paymentMethod\n     * @returns {string}\n     */\n    function mapToId(paymentMethod) {\n      var id = paymentMethod.id;\n      if (paymentMethod.method === _paymentMethodTypes.MULTI_OPTION) {\n        id = paymentMethod.gateway;\n      }\n      if (isBraintreePaymentMethod(id)) {\n        return _paymentMethodIds.BRAINTREE;\n      }\n      if (isPaypalCommercePaymentMethod(id)) {\n        return _paymentMethodIds.PAYPAL_COMMERCE;\n      }\n      if (isBigCommercePaymentsPaymentMethod(id)) {\n        return _paymentMethodIds.BIGCOMMERCE_PAYMENTS;\n      }\n      return id;\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {PaymentMethodIdMapper}\n     */\n    function create() {\n      return new PaymentMethodIdMapper();\n    }\n  }]);\n}();\n//# sourceMappingURL=payment-method-id-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvcGF5bWVudC1tZXRob2QtbWFwcGVycy9wYXltZW50LW1ldGhvZC1pZC1tYXBwZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZiwwQkFBMEIsbUJBQU8sQ0FBQyw4R0FBeUI7QUFDM0Qsd0JBQXdCLG1CQUFPLENBQUMsMEdBQXVCO0FBQ3ZELHNCQUFzQiwyQkFBMkIsb0dBQW9HLG1CQUFtQixpQkFBaUIsc0hBQXNIO0FBQy9TLGlDQUFpQztBQUNqQyxtQ0FBbUMsZ0JBQWdCLGNBQWMsT0FBTyxjQUFjO0FBQ3RGLGlDQUFpQyxxSEFBcUgsY0FBYztBQUNwSyw2QkFBNkIsbUNBQW1DO0FBQ2hFLDhCQUE4Qiw0Q0FBNEMsK0JBQStCLG9CQUFvQixtQ0FBbUMsc0NBQXNDLHVFQUF1RTtBQUM3UTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrQkFBZTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZUFBZTtBQUM5QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvcGF5bWVudC1tZXRob2QtbWFwcGVycy9wYXltZW50LW1ldGhvZC1pZC1tYXBwZXIuanM/YTZlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfcGF5bWVudE1ldGhvZFR5cGVzID0gcmVxdWlyZShcIi4uL3BheW1lbnQtbWV0aG9kLXR5cGVzXCIpO1xudmFyIF9wYXltZW50TWV0aG9kSWRzID0gcmVxdWlyZShcIi4uL3BheW1lbnQtbWV0aG9kLWlkc1wiKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhhLCBuKSB7IGlmICghKGEgaW5zdGFuY2VvZiBuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSwgcikgeyBmb3IgKHZhciB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0KyspIHsgdmFyIG8gPSByW3RdOyBvLmVudW1lcmFibGUgPSBvLmVudW1lcmFibGUgfHwgITEsIG8uY29uZmlndXJhYmxlID0gITAsIFwidmFsdWVcIiBpbiBvICYmIChvLndyaXRhYmxlID0gITApLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgX3RvUHJvcGVydHlLZXkoby5rZXkpLCBvKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSwgciwgdCkgeyByZXR1cm4gciAmJiBfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSwgciksIHQgJiYgX2RlZmluZVByb3BlcnRpZXMoZSwgdCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiAhMSB9KSwgZTsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc0JyYWludHJlZVBheW1lbnRNZXRob2QoaWQpIHtcbiAgc3dpdGNoIChpZCkge1xuICAgIGNhc2UgX3BheW1lbnRNZXRob2RJZHMuQlJBSU5UUkVFX1BBWVBBTDpcbiAgICBjYXNlIF9wYXltZW50TWV0aG9kSWRzLkJSQUlOVFJFRV9QQVlQQUxfQ1JFRElUOlxuICAgIGNhc2UgX3BheW1lbnRNZXRob2RJZHMuQlJBSU5UUkVFX1ZJU0FDSEVDS09VVDpcbiAgICBjYXNlIF9wYXltZW50TWV0aG9kSWRzLkJSQUlOVFJFRV9HT09HTEVQQVk6XG4gICAgY2FzZSBfcGF5bWVudE1ldGhvZElkcy5CUkFJTlRSRUVfQUNIOlxuICAgIGNhc2UgX3BheW1lbnRNZXRob2RJZHMuQlJBSU5UUkVFX0xPQ0FMX01FVEhPRFM6XG4gICAgY2FzZSBfcGF5bWVudE1ldGhvZElkcy5CUkFJTlRSRUVfQUNDRUxFUkFURURfQ0hFQ0tPVVQ6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc1BheXBhbENvbW1lcmNlUGF5bWVudE1ldGhvZChpZCkge1xuICBzd2l0Y2ggKGlkKSB7XG4gICAgY2FzZSBfcGF5bWVudE1ldGhvZElkcy5QQVlQQUxfQ09NTUVSQ0VfQ1JFRElUOlxuICAgIGNhc2UgX3BheW1lbnRNZXRob2RJZHMuUEFZUEFMX0NPTU1FUkNFX0NSRURJVF9DQVJEUzpcbiAgICBjYXNlIF9wYXltZW50TWV0aG9kSWRzLlBBWVBBTF9DT01NRVJDRV9BQ0NFTEVSQVRFRF9DSEVDS09VVDpcbiAgICBjYXNlIF9wYXltZW50TWV0aG9kSWRzLlBBWVBBTF9DT01NRVJDRV9BTFRFUk5BVElWRV9NRVRIT0RTOlxuICAgIGNhc2UgX3BheW1lbnRNZXRob2RJZHMuUEFZUEFMX0NPTU1FUkNFX1ZFTk1POlxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudE1ldGhvZChpZCkge1xuICBzd2l0Y2ggKGlkKSB7XG4gICAgY2FzZSBfcGF5bWVudE1ldGhvZElkcy5CSUdDT01NRVJDRV9QQVlNRU5UUzpcbiAgICBjYXNlIF9wYXltZW50TWV0aG9kSWRzLkJJR0NPTU1FUkNFX1BBWU1FTlRTX1BBWUxBVEVSOlxuICAgIGNhc2UgX3BheW1lbnRNZXRob2RJZHMuQklHQ09NTUVSQ0VfUEFZTUVOVFNfQ1JFRElUX0NBUkRTOlxuICAgIGNhc2UgX3BheW1lbnRNZXRob2RJZHMuQklHQ09NTUVSQ0VfUEFZTUVOVFNfRkFTVExBTkU6XG4gICAgY2FzZSBfcGF5bWVudE1ldGhvZElkcy5CSUdDT01NRVJDRV9QQVlNRU5UU19BUE1TOlxuICAgIGNhc2UgX3BheW1lbnRNZXRob2RJZHMuQklHQ09NTUVSQ0VfUEFZTUVOVFNfVkVOTU86XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG52YXIgUGF5bWVudE1ldGhvZElkTWFwcGVyID0gZXhwb3J0cy5kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUGF5bWVudE1ldGhvZElkTWFwcGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQYXltZW50TWV0aG9kSWRNYXBwZXIpO1xuICB9XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoUGF5bWVudE1ldGhvZElkTWFwcGVyLCBbe1xuICAgIGtleTogXCJtYXBUb0lkXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQYXltZW50TWV0aG9kfSBwYXltZW50TWV0aG9kXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXBUb0lkKHBheW1lbnRNZXRob2QpIHtcbiAgICAgIHZhciBpZCA9IHBheW1lbnRNZXRob2QuaWQ7XG4gICAgICBpZiAocGF5bWVudE1ldGhvZC5tZXRob2QgPT09IF9wYXltZW50TWV0aG9kVHlwZXMuTVVMVElfT1BUSU9OKSB7XG4gICAgICAgIGlkID0gcGF5bWVudE1ldGhvZC5nYXRld2F5O1xuICAgICAgfVxuICAgICAgaWYgKGlzQnJhaW50cmVlUGF5bWVudE1ldGhvZChpZCkpIHtcbiAgICAgICAgcmV0dXJuIF9wYXltZW50TWV0aG9kSWRzLkJSQUlOVFJFRTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1BheXBhbENvbW1lcmNlUGF5bWVudE1ldGhvZChpZCkpIHtcbiAgICAgICAgcmV0dXJuIF9wYXltZW50TWV0aG9kSWRzLlBBWVBBTF9DT01NRVJDRTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0JpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50TWV0aG9kKGlkKSkge1xuICAgICAgICByZXR1cm4gX3BheW1lbnRNZXRob2RJZHMuQklHQ09NTUVSQ0VfUEFZTUVOVFM7XG4gICAgICB9XG4gICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwiY3JlYXRlXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHJldHVybnMge1BheW1lbnRNZXRob2RJZE1hcHBlcn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgICByZXR1cm4gbmV3IFBheW1lbnRNZXRob2RJZE1hcHBlcigpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGF5bWVudC1tZXRob2QtaWQtbWFwcGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-mappers/payment-method-id-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-types.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-types.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.PPSDK_CREDIT_CARD = exports.MULTI_OPTION = exports.CREDIT_CARD = void 0;\nvar CREDIT_CARD = exports.CREDIT_CARD = 'credit-card';\nvar MULTI_OPTION = exports.MULTI_OPTION = 'multi-option';\nvar PPSDK_CREDIT_CARD = exports.PPSDK_CREDIT_CARD = 'card';\n//# sourceMappingURL=payment-method-types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvcGF5bWVudC1tZXRob2QtdHlwZXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YseUJBQXlCLEdBQUcsb0JBQW9CLEdBQUcsbUJBQW1CO0FBQ3RFLGtCQUFrQixtQkFBbUI7QUFDckMsbUJBQW1CLG9CQUFvQjtBQUN2Qyx3QkFBd0IseUJBQXlCO0FBQ2pEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvcGF5bWVudC1tZXRob2QtdHlwZXMuanM/YjI5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuUFBTREtfQ1JFRElUX0NBUkQgPSBleHBvcnRzLk1VTFRJX09QVElPTiA9IGV4cG9ydHMuQ1JFRElUX0NBUkQgPSB2b2lkIDA7XG52YXIgQ1JFRElUX0NBUkQgPSBleHBvcnRzLkNSRURJVF9DQVJEID0gJ2NyZWRpdC1jYXJkJztcbnZhciBNVUxUSV9PUFRJT04gPSBleHBvcnRzLk1VTFRJX09QVElPTiA9ICdtdWx0aS1vcHRpb24nO1xudmFyIFBQU0RLX0NSRURJVF9DQVJEID0gZXhwb3J0cy5QUFNES19DUkVESVRfQ0FSRCA9ICdjYXJkJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBheW1lbnQtbWV0aG9kLXR5cGVzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-types.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-submitter.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-submitter.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _requestSender = _interopRequireDefault(__webpack_require__(/*! ../common/http-request/request-sender */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/request-sender.js\"));\nvar _paymentTypes = __webpack_require__(/*! ./payment-types */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-types.js\");\nvar _payloadMapper = _interopRequireDefault(__webpack_require__(/*! ./v1/payment-mappers/payload-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/payload-mapper.js\"));\nvar _ppsdkPayloadMapper = _interopRequireDefault(__webpack_require__(/*! ./ppsdk/payment-mappers/ppsdk-payload-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/ppsdk/payment-mappers/ppsdk-payload-mapper.js\"));\nvar _urlHelper = _interopRequireDefault(__webpack_require__(/*! ./url-helper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/url-helper.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar PaymentSubmitter = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {UrlHelper} urlHelper\n   * @param {RequestSender} requestSender\n   * @param {PayloadMapper} payloadMapper\n   * @param {PpsdkPayloadMapper} ppsdkPayloadMapper\n   * @returns {void}\n   */\n  function PaymentSubmitter(urlHelper, requestSender, payloadMapper, ppsdkPayloadMapper) {\n    _classCallCheck(this, PaymentSubmitter);\n    /**\n     * @private\n     * @type {UrlHelper}\n     */\n    this.urlHelper = urlHelper;\n\n    /**\n     * @private\n     * @type {RequestSender}\n     */\n    this.requestSender = requestSender;\n\n    /**\n     * @private\n     * @type {PayloadMapper}\n     */\n    this.payloadMapper = payloadMapper;\n\n    /**\n    * @private\n    * @type {PpsdkPayloadMapper}\n    */\n    this.ppsdkPayloadMapper = ppsdkPayloadMapper;\n  }\n\n  /**\n   * @param {PaymentRequestData} data\n   * @param {Function} [callback]\n   * @returns {void}\n   * @throws {Error}\n   */\n  return _createClass(PaymentSubmitter, [{\n    key: \"submitPayment\",\n    value: function submitPayment(data, callback) {\n      var _data$paymentMethod = data.paymentMethod,\n        paymentMethod = _data$paymentMethod === void 0 ? {} : _data$paymentMethod;\n      if (paymentMethod.type !== _paymentTypes.API && paymentMethod.type !== _paymentTypes.SDK) {\n        throw new Error(\"\".concat(paymentMethod.type, \" is not supported.\"));\n      }\n      var payload = paymentMethod.type === _paymentTypes.SDK ? this.ppsdkPayloadMapper.mapToPayload(data) : this.payloadMapper.mapToPayload(data);\n      var url = paymentMethod.type === _paymentTypes.SDK ? this.urlHelper.getPpsdkPaymentUrl() : this.urlHelper.getPaymentUrl();\n      var options = {\n        headers: this.payloadMapper.mapToHeaders(data)\n      };\n      this.requestSender.postRequest(url, payload, options, callback);\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @param {Object} config\n     * @returns {PaymentSubmitter}\n     */\n    function create(config) {\n      var urlHelper = _urlHelper.default.create(config);\n      var requestSender = _requestSender.default.create();\n      var payloadMapper = _payloadMapper.default.create();\n      var ppsdkPayloadMapper = _ppsdkPayloadMapper.default.create();\n      return new PaymentSubmitter(urlHelper, requestSender, payloadMapper, ppsdkPayloadMapper);\n    }\n  }]);\n}();\n//# sourceMappingURL=payment-submitter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvcGF5bWVudC1zdWJtaXR0ZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZiw0Q0FBNEMsbUJBQU8sQ0FBQyxrSUFBdUM7QUFDM0Ysb0JBQW9CLG1CQUFPLENBQUMsK0ZBQWlCO0FBQzdDLDRDQUE0QyxtQkFBTyxDQUFDLHVJQUFxQztBQUN6RixpREFBaUQsbUJBQU8sQ0FBQyx5SkFBOEM7QUFDdkcsd0NBQXdDLG1CQUFPLENBQUMseUZBQWM7QUFDOUQscUNBQXFDLGlDQUFpQztBQUN0RSxzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1EsdUJBQXVCLGtCQUFlO0FBQ3RDO0FBQ0EsYUFBYSxXQUFXO0FBQ3hCLGFBQWEsZUFBZTtBQUM1QixhQUFhLGVBQWU7QUFDNUIsYUFBYSxvQkFBb0I7QUFDakMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxvQkFBb0I7QUFDakMsYUFBYSxVQUFVO0FBQ3ZCLGVBQWU7QUFDZixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvcGF5bWVudC1zdWJtaXR0ZXIuanM/NWVjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfcmVxdWVzdFNlbmRlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2NvbW1vbi9odHRwLXJlcXVlc3QvcmVxdWVzdC1zZW5kZXJcIikpO1xudmFyIF9wYXltZW50VHlwZXMgPSByZXF1aXJlKFwiLi9wYXltZW50LXR5cGVzXCIpO1xudmFyIF9wYXlsb2FkTWFwcGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92MS9wYXltZW50LW1hcHBlcnMvcGF5bG9hZC1tYXBwZXJcIikpO1xudmFyIF9wcHNka1BheWxvYWRNYXBwZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3Bwc2RrL3BheW1lbnQtbWFwcGVycy9wcHNkay1wYXlsb2FkLW1hcHBlclwiKSk7XG52YXIgX3VybEhlbHBlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdXJsLWhlbHBlclwiKSk7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9OyB9XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgUGF5bWVudFN1Ym1pdHRlciA9IGV4cG9ydHMuZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge1VybEhlbHBlcn0gdXJsSGVscGVyXG4gICAqIEBwYXJhbSB7UmVxdWVzdFNlbmRlcn0gcmVxdWVzdFNlbmRlclxuICAgKiBAcGFyYW0ge1BheWxvYWRNYXBwZXJ9IHBheWxvYWRNYXBwZXJcbiAgICogQHBhcmFtIHtQcHNka1BheWxvYWRNYXBwZXJ9IHBwc2RrUGF5bG9hZE1hcHBlclxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGZ1bmN0aW9uIFBheW1lbnRTdWJtaXR0ZXIodXJsSGVscGVyLCByZXF1ZXN0U2VuZGVyLCBwYXlsb2FkTWFwcGVyLCBwcHNka1BheWxvYWRNYXBwZXIpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGF5bWVudFN1Ym1pdHRlcik7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7VXJsSGVscGVyfVxuICAgICAqL1xuICAgIHRoaXMudXJsSGVscGVyID0gdXJsSGVscGVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7UmVxdWVzdFNlbmRlcn1cbiAgICAgKi9cbiAgICB0aGlzLnJlcXVlc3RTZW5kZXIgPSByZXF1ZXN0U2VuZGVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7UGF5bG9hZE1hcHBlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBheWxvYWRNYXBwZXIgPSBwYXlsb2FkTWFwcGVyO1xuXG4gICAgLyoqXG4gICAgKiBAcHJpdmF0ZVxuICAgICogQHR5cGUge1Bwc2RrUGF5bG9hZE1hcHBlcn1cbiAgICAqL1xuICAgIHRoaXMucHBzZGtQYXlsb2FkTWFwcGVyID0gcHBzZGtQYXlsb2FkTWFwcGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja11cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqIEB0aHJvd3Mge0Vycm9yfVxuICAgKi9cbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhQYXltZW50U3VibWl0dGVyLCBbe1xuICAgIGtleTogXCJzdWJtaXRQYXltZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN1Ym1pdFBheW1lbnQoZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBfZGF0YSRwYXltZW50TWV0aG9kID0gZGF0YS5wYXltZW50TWV0aG9kLFxuICAgICAgICBwYXltZW50TWV0aG9kID0gX2RhdGEkcGF5bWVudE1ldGhvZCA9PT0gdm9pZCAwID8ge30gOiBfZGF0YSRwYXltZW50TWV0aG9kO1xuICAgICAgaWYgKHBheW1lbnRNZXRob2QudHlwZSAhPT0gX3BheW1lbnRUeXBlcy5BUEkgJiYgcGF5bWVudE1ldGhvZC50eXBlICE9PSBfcGF5bWVudFR5cGVzLlNESykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQocGF5bWVudE1ldGhvZC50eXBlLCBcIiBpcyBub3Qgc3VwcG9ydGVkLlwiKSk7XG4gICAgICB9XG4gICAgICB2YXIgcGF5bG9hZCA9IHBheW1lbnRNZXRob2QudHlwZSA9PT0gX3BheW1lbnRUeXBlcy5TREsgPyB0aGlzLnBwc2RrUGF5bG9hZE1hcHBlci5tYXBUb1BheWxvYWQoZGF0YSkgOiB0aGlzLnBheWxvYWRNYXBwZXIubWFwVG9QYXlsb2FkKGRhdGEpO1xuICAgICAgdmFyIHVybCA9IHBheW1lbnRNZXRob2QudHlwZSA9PT0gX3BheW1lbnRUeXBlcy5TREsgPyB0aGlzLnVybEhlbHBlci5nZXRQcHNka1BheW1lbnRVcmwoKSA6IHRoaXMudXJsSGVscGVyLmdldFBheW1lbnRVcmwoKTtcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBoZWFkZXJzOiB0aGlzLnBheWxvYWRNYXBwZXIubWFwVG9IZWFkZXJzKGRhdGEpXG4gICAgICB9O1xuICAgICAgdGhpcy5yZXF1ZXN0U2VuZGVyLnBvc3RSZXF1ZXN0KHVybCwgcGF5bG9hZCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImNyZWF0ZVwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAgICAgKiBAcmV0dXJucyB7UGF5bWVudFN1Ym1pdHRlcn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUoY29uZmlnKSB7XG4gICAgICB2YXIgdXJsSGVscGVyID0gX3VybEhlbHBlci5kZWZhdWx0LmNyZWF0ZShjb25maWcpO1xuICAgICAgdmFyIHJlcXVlc3RTZW5kZXIgPSBfcmVxdWVzdFNlbmRlci5kZWZhdWx0LmNyZWF0ZSgpO1xuICAgICAgdmFyIHBheWxvYWRNYXBwZXIgPSBfcGF5bG9hZE1hcHBlci5kZWZhdWx0LmNyZWF0ZSgpO1xuICAgICAgdmFyIHBwc2RrUGF5bG9hZE1hcHBlciA9IF9wcHNka1BheWxvYWRNYXBwZXIuZGVmYXVsdC5jcmVhdGUoKTtcbiAgICAgIHJldHVybiBuZXcgUGF5bWVudFN1Ym1pdHRlcih1cmxIZWxwZXIsIHJlcXVlc3RTZW5kZXIsIHBheWxvYWRNYXBwZXIsIHBwc2RrUGF5bG9hZE1hcHBlcik7XG4gICAgfVxuICB9XSk7XG59KCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXltZW50LXN1Ym1pdHRlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-submitter.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-types.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-types.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.SDK = exports.OFFLINE = exports.HOSTED = exports.API = void 0;\nvar API = exports.API = 'PAYMENT_TYPE_API';\nvar HOSTED = exports.HOSTED = 'PAYMENT_TYPE_HOSTED';\nvar OFFLINE = exports.OFFLINE = 'PAYMENT_TYPE_OFFLINE';\nvar SDK = exports.SDK = 'PAYMENT_TYPE_SDK';\n//# sourceMappingURL=payment-types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvcGF5bWVudC10eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixXQUFXLEdBQUcsZUFBZSxHQUFHLGNBQWMsR0FBRyxXQUFXO0FBQzVELFVBQVUsV0FBVztBQUNyQixhQUFhLGNBQWM7QUFDM0IsY0FBYyxlQUFlO0FBQzdCLFVBQVUsV0FBVztBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9wYXltZW50L3BheW1lbnQtdHlwZXMuanM/MjBjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuU0RLID0gZXhwb3J0cy5PRkZMSU5FID0gZXhwb3J0cy5IT1NURUQgPSBleHBvcnRzLkFQSSA9IHZvaWQgMDtcbnZhciBBUEkgPSBleHBvcnRzLkFQSSA9ICdQQVlNRU5UX1RZUEVfQVBJJztcbnZhciBIT1NURUQgPSBleHBvcnRzLkhPU1RFRCA9ICdQQVlNRU5UX1RZUEVfSE9TVEVEJztcbnZhciBPRkZMSU5FID0gZXhwb3J0cy5PRkZMSU5FID0gJ1BBWU1FTlRfVFlQRV9PRkZMSU5FJztcbnZhciBTREsgPSBleHBvcnRzLlNESyA9ICdQQVlNRU5UX1RZUEVfU0RLJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBheW1lbnQtdHlwZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-types.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/ppsdk/payment-mappers/ppsdk-payload-mapper.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/ppsdk/payment-mappers/ppsdk-payload-mapper.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nvar _paymentMethodTypes = __webpack_require__(/*! ../../payment-method-types */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-types.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar PpsdkPayloadMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  function PpsdkPayloadMapper() {\n    _classCallCheck(this, PpsdkPayloadMapper);\n  }\n  return _createClass(PpsdkPayloadMapper, [{\n    key: \"mapToPayload\",\n    value:\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    function mapToPayload(data) {\n      var additionalAction = data.additionalAction,\n        _data$payment = data.payment,\n        payment = _data$payment === void 0 ? {} : _data$payment,\n        paymentMethod = data.paymentMethod;\n      return (0, _utils.omitNil)({\n        instrument: {\n          expires: {\n            month: payment.ccExpiry ? (0, _utils.toNumber)(payment.ccExpiry.month) : null,\n            year: payment.ccExpiry ? (0, _utils.toNumber)(payment.ccExpiry.year) : null\n          },\n          name: payment.ccName,\n          number: payment.ccNumber,\n          verification_value: payment.ccCvv,\n          type: _paymentMethodTypes.PPSDK_CREDIT_CARD\n        },\n        form_nonce: payment.hostedFormNonce,\n        payment_method_id: paymentMethod.id,\n        human_verification: additionalAction ? {\n          id: 'recaptcha_v2_verification',\n          parameters: {\n            token: additionalAction ? additionalAction.data.human_verification_token : null\n          }\n        } : null\n      });\n    }\n\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToHeaders\",\n    value: function mapToHeaders(data) {\n      var authToken = data.authToken;\n      return (0, _utils.omitNil)({\n        Authorization: authToken\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {PayloadMapper}\n     */\n    function create() {\n      return new PpsdkPayloadMapper();\n    }\n  }]);\n}();\n//# sourceMappingURL=ppsdk-payload-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvcHBzZGsvcGF5bWVudC1tYXBwZXJzL3Bwc2RrLXBheWxvYWQtbWFwcGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2YsYUFBYSxtQkFBTyxDQUFDLGtHQUF1QjtBQUM1QywwQkFBMEIsbUJBQU8sQ0FBQyxpSEFBNEI7QUFDOUQsc0JBQXNCLDJCQUEyQixvR0FBb0csbUJBQW1CLGlCQUFpQixzSEFBc0g7QUFDL1MsaUNBQWlDO0FBQ2pDLG1DQUFtQyxnQkFBZ0IsY0FBYyxPQUFPLGNBQWM7QUFDdEYsaUNBQWlDLHFIQUFxSCxjQUFjO0FBQ3BLLDZCQUE2QixtQ0FBbUM7QUFDaEUsOEJBQThCLDRDQUE0QywrQkFBK0Isb0JBQW9CLG1DQUFtQyxzQ0FBc0MsdUVBQXVFO0FBQzdRLHlCQUF5QixrQkFBZTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsT0FBTztBQUNQOztBQUVBO0FBQ0EsZUFBZSxvQkFBb0I7QUFDbkMsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9wYXltZW50L3Bwc2RrL3BheW1lbnQtbWFwcGVycy9wcHNkay1wYXlsb2FkLW1hcHBlci5qcz84NmRjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF91dGlscyA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jb21tb24vdXRpbHNcIik7XG52YXIgX3BheW1lbnRNZXRob2RUeXBlcyA9IHJlcXVpcmUoXCIuLi8uLi9wYXltZW50LW1ldGhvZC10eXBlc1wiKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhhLCBuKSB7IGlmICghKGEgaW5zdGFuY2VvZiBuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSwgcikgeyBmb3IgKHZhciB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0KyspIHsgdmFyIG8gPSByW3RdOyBvLmVudW1lcmFibGUgPSBvLmVudW1lcmFibGUgfHwgITEsIG8uY29uZmlndXJhYmxlID0gITAsIFwidmFsdWVcIiBpbiBvICYmIChvLndyaXRhYmxlID0gITApLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgX3RvUHJvcGVydHlLZXkoby5rZXkpLCBvKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSwgciwgdCkgeyByZXR1cm4gciAmJiBfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSwgciksIHQgJiYgX2RlZmluZVByb3BlcnRpZXMoZSwgdCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiAhMSB9KSwgZTsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbnZhciBQcHNka1BheWxvYWRNYXBwZXIgPSBleHBvcnRzLmRlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQcHNka1BheWxvYWRNYXBwZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBwc2RrUGF5bG9hZE1hcHBlcik7XG4gIH1cbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhQcHNka1BheWxvYWRNYXBwZXIsIFt7XG4gICAga2V5OiBcIm1hcFRvUGF5bG9hZFwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXBUb1BheWxvYWQoZGF0YSkge1xuICAgICAgdmFyIGFkZGl0aW9uYWxBY3Rpb24gPSBkYXRhLmFkZGl0aW9uYWxBY3Rpb24sXG4gICAgICAgIF9kYXRhJHBheW1lbnQgPSBkYXRhLnBheW1lbnQsXG4gICAgICAgIHBheW1lbnQgPSBfZGF0YSRwYXltZW50ID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJHBheW1lbnQsXG4gICAgICAgIHBheW1lbnRNZXRob2QgPSBkYXRhLnBheW1lbnRNZXRob2Q7XG4gICAgICByZXR1cm4gKDAsIF91dGlscy5vbWl0TmlsKSh7XG4gICAgICAgIGluc3RydW1lbnQ6IHtcbiAgICAgICAgICBleHBpcmVzOiB7XG4gICAgICAgICAgICBtb250aDogcGF5bWVudC5jY0V4cGlyeSA/ICgwLCBfdXRpbHMudG9OdW1iZXIpKHBheW1lbnQuY2NFeHBpcnkubW9udGgpIDogbnVsbCxcbiAgICAgICAgICAgIHllYXI6IHBheW1lbnQuY2NFeHBpcnkgPyAoMCwgX3V0aWxzLnRvTnVtYmVyKShwYXltZW50LmNjRXhwaXJ5LnllYXIpIDogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbmFtZTogcGF5bWVudC5jY05hbWUsXG4gICAgICAgICAgbnVtYmVyOiBwYXltZW50LmNjTnVtYmVyLFxuICAgICAgICAgIHZlcmlmaWNhdGlvbl92YWx1ZTogcGF5bWVudC5jY0N2dixcbiAgICAgICAgICB0eXBlOiBfcGF5bWVudE1ldGhvZFR5cGVzLlBQU0RLX0NSRURJVF9DQVJEXG4gICAgICAgIH0sXG4gICAgICAgIGZvcm1fbm9uY2U6IHBheW1lbnQuaG9zdGVkRm9ybU5vbmNlLFxuICAgICAgICBwYXltZW50X21ldGhvZF9pZDogcGF5bWVudE1ldGhvZC5pZCxcbiAgICAgICAgaHVtYW5fdmVyaWZpY2F0aW9uOiBhZGRpdGlvbmFsQWN0aW9uID8ge1xuICAgICAgICAgIGlkOiAncmVjYXB0Y2hhX3YyX3ZlcmlmaWNhdGlvbicsXG4gICAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgICAgdG9rZW46IGFkZGl0aW9uYWxBY3Rpb24gPyBhZGRpdGlvbmFsQWN0aW9uLmRhdGEuaHVtYW5fdmVyaWZpY2F0aW9uX3Rva2VuIDogbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgfSA6IG51bGxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJtYXBUb0hlYWRlcnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwVG9IZWFkZXJzKGRhdGEpIHtcbiAgICAgIHZhciBhdXRoVG9rZW4gPSBkYXRhLmF1dGhUb2tlbjtcbiAgICAgIHJldHVybiAoMCwgX3V0aWxzLm9taXROaWwpKHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYXV0aFRva2VuXG4gICAgICB9KTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJjcmVhdGVcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7UGF5bG9hZE1hcHBlcn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgICByZXR1cm4gbmV3IFBwc2RrUGF5bG9hZE1hcHBlcigpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHBzZGstcGF5bG9hZC1tYXBwZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/ppsdk/payment-mappers/ppsdk-payload-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/url-helper.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/url-helper.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar UrlHelper = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {Object} config\n   * @param {string} config.host\n   * @returns {void}\n   */\n  function UrlHelper(config) {\n    _classCallCheck(this, UrlHelper);\n    /**\n     * @private\n     * @type {Object}\n     */\n    this.config = config;\n  }\n\n  /**\n   * @private\n   * @returns {string}\n   */\n  return _createClass(UrlHelper, [{\n    key: \"host\",\n    get: function get() {\n      return this.config.host;\n    }\n\n    /**\n     * @returns {string}\n     */\n  }, {\n    key: \"getOffsitePaymentUrl\",\n    value: function getOffsitePaymentUrl() {\n      return \"\".concat(this.host, \"/pay/initialize\");\n    }\n\n    /**\n     * @returns {string}\n     */\n  }, {\n    key: \"getPaymentUrl\",\n    value: function getPaymentUrl() {\n      return \"\".concat(this.host, \"/api/public/v1/orders/payments\");\n    }\n\n    /**\n     * @returns {string}\n     */\n  }, {\n    key: \"getPpsdkPaymentUrl\",\n    value: function getPpsdkPaymentUrl() {\n      return \"\".concat(this.host, \"/payments\");\n    }\n\n    /**\n     * @returns {string}\n     */\n  }, {\n    key: \"getGenerateClientTokenUrl\",\n    value: function getGenerateClientTokenUrl() {\n      return \"\".concat(this.host, \"/api/v2/public/payments/client_tokens\");\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @param {Object} config\n     * @param {string} config.host\n     * @returns {CustomerMapper}\n     */\n    function create(config) {\n      return new UrlHelper(config);\n    }\n  }]);\n}();\n//# sourceMappingURL=url-helper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdXJsLWhlbHBlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBZTtBQUNmLHNCQUFzQiwyQkFBMkIsb0dBQW9HLG1CQUFtQixpQkFBaUIsc0hBQXNIO0FBQy9TLGlDQUFpQztBQUNqQyxtQ0FBbUMsZ0JBQWdCLGNBQWMsT0FBTyxjQUFjO0FBQ3RGLGlDQUFpQyxxSEFBcUgsY0FBYztBQUNwSyw2QkFBNkIsbUNBQW1DO0FBQ2hFLDhCQUE4Qiw0Q0FBNEMsK0JBQStCLG9CQUFvQixtQ0FBbUMsc0NBQXNDLHVFQUF1RTtBQUM3USxnQkFBZ0Isa0JBQWU7QUFDL0I7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvYmlncGF5LWNsaWVudC9saWIvcGF5bWVudC91cmwtaGVscGVyLmpzPzE5MDIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgVXJsSGVscGVyID0gZXhwb3J0cy5kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbmZpZy5ob3N0XG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgZnVuY3Rpb24gVXJsSGVscGVyKGNvbmZpZykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVcmxIZWxwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhVcmxIZWxwZXIsIFt7XG4gICAga2V5OiBcImhvc3RcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5ob3N0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0T2Zmc2l0ZVBheW1lbnRVcmxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T2Zmc2l0ZVBheW1lbnRVcmwoKSB7XG4gICAgICByZXR1cm4gXCJcIi5jb25jYXQodGhpcy5ob3N0LCBcIi9wYXkvaW5pdGlhbGl6ZVwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqL1xuICB9LCB7XG4gICAga2V5OiBcImdldFBheW1lbnRVcmxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGF5bWVudFVybCgpIHtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdCh0aGlzLmhvc3QsIFwiL2FwaS9wdWJsaWMvdjEvb3JkZXJzL3BheW1lbnRzXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0UHBzZGtQYXltZW50VXJsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBwc2RrUGF5bWVudFVybCgpIHtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdCh0aGlzLmhvc3QsIFwiL3BheW1lbnRzXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0R2VuZXJhdGVDbGllbnRUb2tlblVybFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRHZW5lcmF0ZUNsaWVudFRva2VuVXJsKCkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KHRoaXMuaG9zdCwgXCIvYXBpL3YyL3B1YmxpYy9wYXltZW50cy9jbGllbnRfdG9rZW5zXCIpO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImNyZWF0ZVwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29uZmlnLmhvc3RcbiAgICAgKiBAcmV0dXJucyB7Q3VzdG9tZXJNYXBwZXJ9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIG5ldyBVcmxIZWxwZXIoY29uZmlnKTtcbiAgICB9XG4gIH1dKTtcbn0oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybC1oZWxwZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/url-helper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/customer-mapper.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/customer-mapper.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar CustomerMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  function CustomerMapper() {\n    _classCallCheck(this, CustomerMapper);\n  }\n  return _createClass(CustomerMapper, [{\n    key: \"mapToCustomer\",\n    value:\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    function mapToCustomer(data) {\n      var _data$customer = data.customer,\n        customer = _data$customer === void 0 ? {} : _data$customer,\n        _data$quoteMeta = data.quoteMeta,\n        quoteMeta = _data$quoteMeta === void 0 ? {} : _data$quoteMeta;\n      return (0, _utils.omitNil)({\n        customer_group: customer.customerGroupName ? {\n          name: customer.customerGroupName\n        } : null,\n        geo_ip_country_code: quoteMeta.request ? quoteMeta.request.geoCountryCode : null,\n        id: customer.customerId ? (0, _utils.toString)(customer.customerId) : null,\n        session_token: quoteMeta.request ? quoteMeta.request.sessionHash : null\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {CustomerMapper}\n     */\n    function create() {\n      return new CustomerMapper();\n    }\n  }]);\n}();\n//# sourceMappingURL=customer-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjEvcGF5bWVudC1tYXBwZXJzL2N1c3RvbWVyLW1hcHBlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBZTtBQUNmLGFBQWEsbUJBQU8sQ0FBQyxrR0FBdUI7QUFDNUMsc0JBQXNCLDJCQUEyQixvR0FBb0csbUJBQW1CLGlCQUFpQixzSEFBc0g7QUFDL1MsaUNBQWlDO0FBQ2pDLG1DQUFtQyxnQkFBZ0IsY0FBYyxPQUFPLGNBQWM7QUFDdEYsaUNBQWlDLHFIQUFxSCxjQUFjO0FBQ3BLLDZCQUE2QixtQ0FBbUM7QUFDaEUsOEJBQThCLDRDQUE0QywrQkFBK0Isb0JBQW9CLG1DQUFtQyxzQ0FBc0MsdUVBQXVFO0FBQzdRLHFCQUFxQixrQkFBZTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjEvcGF5bWVudC1tYXBwZXJzL2N1c3RvbWVyLW1hcHBlci5qcz9lMzU4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF91dGlscyA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jb21tb24vdXRpbHNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgQ3VzdG9tZXJNYXBwZXIgPSBleHBvcnRzLmRlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBDdXN0b21lck1hcHBlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ3VzdG9tZXJNYXBwZXIpO1xuICB9XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoQ3VzdG9tZXJNYXBwZXIsIFt7XG4gICAga2V5OiBcIm1hcFRvQ3VzdG9tZXJcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwVG9DdXN0b21lcihkYXRhKSB7XG4gICAgICB2YXIgX2RhdGEkY3VzdG9tZXIgPSBkYXRhLmN1c3RvbWVyLFxuICAgICAgICBjdXN0b21lciA9IF9kYXRhJGN1c3RvbWVyID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJGN1c3RvbWVyLFxuICAgICAgICBfZGF0YSRxdW90ZU1ldGEgPSBkYXRhLnF1b3RlTWV0YSxcbiAgICAgICAgcXVvdGVNZXRhID0gX2RhdGEkcXVvdGVNZXRhID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJHF1b3RlTWV0YTtcbiAgICAgIHJldHVybiAoMCwgX3V0aWxzLm9taXROaWwpKHtcbiAgICAgICAgY3VzdG9tZXJfZ3JvdXA6IGN1c3RvbWVyLmN1c3RvbWVyR3JvdXBOYW1lID8ge1xuICAgICAgICAgIG5hbWU6IGN1c3RvbWVyLmN1c3RvbWVyR3JvdXBOYW1lXG4gICAgICAgIH0gOiBudWxsLFxuICAgICAgICBnZW9faXBfY291bnRyeV9jb2RlOiBxdW90ZU1ldGEucmVxdWVzdCA/IHF1b3RlTWV0YS5yZXF1ZXN0Lmdlb0NvdW50cnlDb2RlIDogbnVsbCxcbiAgICAgICAgaWQ6IGN1c3RvbWVyLmN1c3RvbWVySWQgPyAoMCwgX3V0aWxzLnRvU3RyaW5nKShjdXN0b21lci5jdXN0b21lcklkKSA6IG51bGwsXG4gICAgICAgIHNlc3Npb25fdG9rZW46IHF1b3RlTWV0YS5yZXF1ZXN0ID8gcXVvdGVNZXRhLnJlcXVlc3Quc2Vzc2lvbkhhc2ggOiBudWxsXG4gICAgICB9KTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJjcmVhdGVcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7Q3VzdG9tZXJNYXBwZXJ9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgICAgcmV0dXJuIG5ldyBDdXN0b21lck1hcHBlcigpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3VzdG9tZXItbWFwcGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/customer-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/order-mapper.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/order-mapper.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar OrderMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  function OrderMapper() {\n    _classCallCheck(this, OrderMapper);\n  }\n  return _createClass(OrderMapper, [{\n    key: \"mapToOrder\",\n    value:\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    function mapToOrder(data) {\n      var _data$order = data.order,\n        order = _data$order === void 0 ? {} : _data$order;\n      return (0, _utils.omitNil)({\n        billing_address: this.mapToBillingAddress(data),\n        coupons: this.mapToCoupons(data),\n        currency: order.currency,\n        id: order.orderId ? (0, _utils.toString)(order.orderId) : null,\n        items: this.mapToItems(data),\n        shipping: this.mapToShipping(data),\n        shipping_address: this.mapToShippingAddress(data),\n        token: order.token,\n        totals: this.mapToOrderTotals(data)\n      });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToBillingAddress\",\n    value: function mapToBillingAddress(data) {\n      var _data$customer = data.customer,\n        customer = _data$customer === void 0 ? {} : _data$customer;\n      var address = this.mapToAddress(data, 'billingAddress');\n      if (customer.email) {\n        address.email = customer.email;\n      }\n      return address;\n    }\n\n    /**\n     * @private\n     * @param  {PaymentRequestData} data\n     * @return {Shipping[]}\n     */\n  }, {\n    key: \"mapToShipping\",\n    value: function mapToShipping(data) {\n      var _ref = data.shippingOption || {},\n        description = _ref.description,\n        transitTime = _ref.transitTime;\n      if (description) {\n        return [(0, _utils.omitEmptyStringAndNil)({\n          method: description,\n          transit_time: transitTime\n        })];\n      }\n      return [];\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Coupon[]}\n     */\n  }, {\n    key: \"mapToCoupons\",\n    value: function mapToCoupons(_ref2) {\n      var _ref2$order = _ref2.order,\n        order = _ref2$order === void 0 ? {} : _ref2$order;\n      if (order.coupon && order.coupon.coupons) {\n        return order.coupon.coupons.map(function (_ref3) {\n          var code = _ref3.code;\n          return {\n            code: code\n          };\n        });\n      }\n      return [];\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToShippingAddress\",\n    value: function mapToShippingAddress(data) {\n      return this.mapToAddress(data, 'shippingAddress');\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @param {string} addressKey\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToAddress\",\n    value: function mapToAddress(data, addressKey) {\n      var address = data[addressKey] || {};\n      return (0, _utils.omitEmptyStringAndNil)({\n        city: address.city,\n        company: address.company,\n        country_code: address.countryCode,\n        country: address.country,\n        first_name: address.firstName,\n        last_name: address.lastName,\n        phone: address.phone,\n        state_code: address.provinceCode,\n        state: address.province,\n        street_1: address.addressLine1,\n        street_2: address.addressLine2,\n        zip: address.postCode\n      });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToItems\",\n    value: function mapToItems(data) {\n      var _data$cart = data.cart,\n        cart = _data$cart === void 0 ? {\n          items: []\n        } : _data$cart;\n      return cart.items.map(function (itemData) {\n        return (0, _utils.omitNil)({\n          code: itemData.id,\n          variant_id: itemData.variantId,\n          name: itemData.name,\n          price: itemData.integerAmount,\n          unit_price: itemData.integerUnitPrice,\n          quantity: itemData.quantity,\n          sku: itemData.sku\n        });\n      });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToOrderTotals\",\n    value: function mapToOrderTotals(data) {\n      var _data$order2 = data.order,\n        order = _data$order2 === void 0 ? {} : _data$order2;\n      return (0, _utils.omitNil)({\n        grand_total: order.grandTotal ? order.grandTotal.integerAmount : null,\n        handling: order.handling ? order.handling.integerAmount : null,\n        shipping: order.shipping ? order.shipping.integerAmount : null,\n        subtotal: order.subtotal ? order.subtotal.integerAmount : null,\n        tax: order.taxTotal ? order.taxTotal.integerAmount : null\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {OrderMapper}\n     */\n    function create() {\n      return new OrderMapper();\n    }\n  }]);\n}();\n//# sourceMappingURL=order-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjEvcGF5bWVudC1tYXBwZXJzL29yZGVyLW1hcHBlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBZTtBQUNmLGFBQWEsbUJBQU8sQ0FBQyxrR0FBdUI7QUFDNUMsc0JBQXNCLDJCQUEyQixvR0FBb0csbUJBQW1CLGlCQUFpQixzSEFBc0g7QUFDL1MsaUNBQWlDO0FBQ2pDLG1DQUFtQyxnQkFBZ0IsY0FBYyxPQUFPLGNBQWM7QUFDdEYsaUNBQWlDLHFIQUFxSCxjQUFjO0FBQ3BLLDZCQUE2QixtQ0FBbUM7QUFDaEUsOEJBQThCLDRDQUE0QywrQkFBK0Isb0JBQW9CLG1DQUFtQyxzQ0FBc0MsdUVBQXVFO0FBQzdRLGtCQUFrQixrQkFBZTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGlCQUFpQjtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0Isb0JBQW9CO0FBQ3BDLGdCQUFnQjtBQUNoQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGlCQUFpQjtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxvQkFBb0I7QUFDbkMsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxpQkFBaUI7QUFDakI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxpQkFBaUI7QUFDakI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjEvcGF5bWVudC1tYXBwZXJzL29yZGVyLW1hcHBlci5qcz8xNThiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF91dGlscyA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jb21tb24vdXRpbHNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgT3JkZXJNYXBwZXIgPSBleHBvcnRzLmRlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBPcmRlck1hcHBlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT3JkZXJNYXBwZXIpO1xuICB9XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoT3JkZXJNYXBwZXIsIFt7XG4gICAga2V5OiBcIm1hcFRvT3JkZXJcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwVG9PcmRlcihkYXRhKSB7XG4gICAgICB2YXIgX2RhdGEkb3JkZXIgPSBkYXRhLm9yZGVyLFxuICAgICAgICBvcmRlciA9IF9kYXRhJG9yZGVyID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJG9yZGVyO1xuICAgICAgcmV0dXJuICgwLCBfdXRpbHMub21pdE5pbCkoe1xuICAgICAgICBiaWxsaW5nX2FkZHJlc3M6IHRoaXMubWFwVG9CaWxsaW5nQWRkcmVzcyhkYXRhKSxcbiAgICAgICAgY291cG9uczogdGhpcy5tYXBUb0NvdXBvbnMoZGF0YSksXG4gICAgICAgIGN1cnJlbmN5OiBvcmRlci5jdXJyZW5jeSxcbiAgICAgICAgaWQ6IG9yZGVyLm9yZGVySWQgPyAoMCwgX3V0aWxzLnRvU3RyaW5nKShvcmRlci5vcmRlcklkKSA6IG51bGwsXG4gICAgICAgIGl0ZW1zOiB0aGlzLm1hcFRvSXRlbXMoZGF0YSksXG4gICAgICAgIHNoaXBwaW5nOiB0aGlzLm1hcFRvU2hpcHBpbmcoZGF0YSksXG4gICAgICAgIHNoaXBwaW5nX2FkZHJlc3M6IHRoaXMubWFwVG9TaGlwcGluZ0FkZHJlc3MoZGF0YSksXG4gICAgICAgIHRva2VuOiBvcmRlci50b2tlbixcbiAgICAgICAgdG90YWxzOiB0aGlzLm1hcFRvT3JkZXJUb3RhbHMoZGF0YSlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQYXltZW50UmVxdWVzdERhdGF9IGRhdGFcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqL1xuICB9LCB7XG4gICAga2V5OiBcIm1hcFRvQmlsbGluZ0FkZHJlc3NcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwVG9CaWxsaW5nQWRkcmVzcyhkYXRhKSB7XG4gICAgICB2YXIgX2RhdGEkY3VzdG9tZXIgPSBkYXRhLmN1c3RvbWVyLFxuICAgICAgICBjdXN0b21lciA9IF9kYXRhJGN1c3RvbWVyID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJGN1c3RvbWVyO1xuICAgICAgdmFyIGFkZHJlc3MgPSB0aGlzLm1hcFRvQWRkcmVzcyhkYXRhLCAnYmlsbGluZ0FkZHJlc3MnKTtcbiAgICAgIGlmIChjdXN0b21lci5lbWFpbCkge1xuICAgICAgICBhZGRyZXNzLmVtYWlsID0gY3VzdG9tZXIuZW1haWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWRkcmVzcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSAge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEByZXR1cm4ge1NoaXBwaW5nW119XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwibWFwVG9TaGlwcGluZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBUb1NoaXBwaW5nKGRhdGEpIHtcbiAgICAgIHZhciBfcmVmID0gZGF0YS5zaGlwcGluZ09wdGlvbiB8fCB7fSxcbiAgICAgICAgZGVzY3JpcHRpb24gPSBfcmVmLmRlc2NyaXB0aW9uLFxuICAgICAgICB0cmFuc2l0VGltZSA9IF9yZWYudHJhbnNpdFRpbWU7XG4gICAgICBpZiAoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFsoMCwgX3V0aWxzLm9taXRFbXB0eVN0cmluZ0FuZE5pbCkoe1xuICAgICAgICAgIG1ldGhvZDogZGVzY3JpcHRpb24sXG4gICAgICAgICAgdHJhbnNpdF90aW1lOiB0cmFuc2l0VGltZVxuICAgICAgICB9KV07XG4gICAgICB9XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEByZXR1cm5zIHtDb3Vwb25bXX1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJtYXBUb0NvdXBvbnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwVG9Db3Vwb25zKF9yZWYyKSB7XG4gICAgICB2YXIgX3JlZjIkb3JkZXIgPSBfcmVmMi5vcmRlcixcbiAgICAgICAgb3JkZXIgPSBfcmVmMiRvcmRlciA9PT0gdm9pZCAwID8ge30gOiBfcmVmMiRvcmRlcjtcbiAgICAgIGlmIChvcmRlci5jb3Vwb24gJiYgb3JkZXIuY291cG9uLmNvdXBvbnMpIHtcbiAgICAgICAgcmV0dXJuIG9yZGVyLmNvdXBvbi5jb3Vwb25zLm1hcChmdW5jdGlvbiAoX3JlZjMpIHtcbiAgICAgICAgICB2YXIgY29kZSA9IF9yZWYzLmNvZGU7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvZGU6IGNvZGVcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJtYXBUb1NoaXBwaW5nQWRkcmVzc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBUb1NoaXBwaW5nQWRkcmVzcyhkYXRhKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXBUb0FkZHJlc3MoZGF0YSwgJ3NoaXBwaW5nQWRkcmVzcycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQYXltZW50UmVxdWVzdERhdGF9IGRhdGFcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWRkcmVzc0tleVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwibWFwVG9BZGRyZXNzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hcFRvQWRkcmVzcyhkYXRhLCBhZGRyZXNzS2V5KSB7XG4gICAgICB2YXIgYWRkcmVzcyA9IGRhdGFbYWRkcmVzc0tleV0gfHwge307XG4gICAgICByZXR1cm4gKDAsIF91dGlscy5vbWl0RW1wdHlTdHJpbmdBbmROaWwpKHtcbiAgICAgICAgY2l0eTogYWRkcmVzcy5jaXR5LFxuICAgICAgICBjb21wYW55OiBhZGRyZXNzLmNvbXBhbnksXG4gICAgICAgIGNvdW50cnlfY29kZTogYWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgY291bnRyeTogYWRkcmVzcy5jb3VudHJ5LFxuICAgICAgICBmaXJzdF9uYW1lOiBhZGRyZXNzLmZpcnN0TmFtZSxcbiAgICAgICAgbGFzdF9uYW1lOiBhZGRyZXNzLmxhc3ROYW1lLFxuICAgICAgICBwaG9uZTogYWRkcmVzcy5waG9uZSxcbiAgICAgICAgc3RhdGVfY29kZTogYWRkcmVzcy5wcm92aW5jZUNvZGUsXG4gICAgICAgIHN0YXRlOiBhZGRyZXNzLnByb3ZpbmNlLFxuICAgICAgICBzdHJlZXRfMTogYWRkcmVzcy5hZGRyZXNzTGluZTEsXG4gICAgICAgIHN0cmVldF8yOiBhZGRyZXNzLmFkZHJlc3NMaW5lMixcbiAgICAgICAgemlwOiBhZGRyZXNzLnBvc3RDb2RlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJtYXBUb0l0ZW1zXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hcFRvSXRlbXMoZGF0YSkge1xuICAgICAgdmFyIF9kYXRhJGNhcnQgPSBkYXRhLmNhcnQsXG4gICAgICAgIGNhcnQgPSBfZGF0YSRjYXJ0ID09PSB2b2lkIDAgPyB7XG4gICAgICAgICAgaXRlbXM6IFtdXG4gICAgICAgIH0gOiBfZGF0YSRjYXJ0O1xuICAgICAgcmV0dXJuIGNhcnQuaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtRGF0YSkge1xuICAgICAgICByZXR1cm4gKDAsIF91dGlscy5vbWl0TmlsKSh7XG4gICAgICAgICAgY29kZTogaXRlbURhdGEuaWQsXG4gICAgICAgICAgdmFyaWFudF9pZDogaXRlbURhdGEudmFyaWFudElkLFxuICAgICAgICAgIG5hbWU6IGl0ZW1EYXRhLm5hbWUsXG4gICAgICAgICAgcHJpY2U6IGl0ZW1EYXRhLmludGVnZXJBbW91bnQsXG4gICAgICAgICAgdW5pdF9wcmljZTogaXRlbURhdGEuaW50ZWdlclVuaXRQcmljZSxcbiAgICAgICAgICBxdWFudGl0eTogaXRlbURhdGEucXVhbnRpdHksXG4gICAgICAgICAgc2t1OiBpdGVtRGF0YS5za3VcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJtYXBUb09yZGVyVG90YWxzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hcFRvT3JkZXJUb3RhbHMoZGF0YSkge1xuICAgICAgdmFyIF9kYXRhJG9yZGVyMiA9IGRhdGEub3JkZXIsXG4gICAgICAgIG9yZGVyID0gX2RhdGEkb3JkZXIyID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJG9yZGVyMjtcbiAgICAgIHJldHVybiAoMCwgX3V0aWxzLm9taXROaWwpKHtcbiAgICAgICAgZ3JhbmRfdG90YWw6IG9yZGVyLmdyYW5kVG90YWwgPyBvcmRlci5ncmFuZFRvdGFsLmludGVnZXJBbW91bnQgOiBudWxsLFxuICAgICAgICBoYW5kbGluZzogb3JkZXIuaGFuZGxpbmcgPyBvcmRlci5oYW5kbGluZy5pbnRlZ2VyQW1vdW50IDogbnVsbCxcbiAgICAgICAgc2hpcHBpbmc6IG9yZGVyLnNoaXBwaW5nID8gb3JkZXIuc2hpcHBpbmcuaW50ZWdlckFtb3VudCA6IG51bGwsXG4gICAgICAgIHN1YnRvdGFsOiBvcmRlci5zdWJ0b3RhbCA/IG9yZGVyLnN1YnRvdGFsLmludGVnZXJBbW91bnQgOiBudWxsLFxuICAgICAgICB0YXg6IG9yZGVyLnRheFRvdGFsID8gb3JkZXIudGF4VG90YWwuaW50ZWdlckFtb3VudCA6IG51bGxcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImNyZWF0ZVwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtPcmRlck1hcHBlcn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgICByZXR1cm4gbmV3IE9yZGVyTWFwcGVyKCk7XG4gICAgfVxuICB9XSk7XG59KCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcmRlci1tYXBwZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/order-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/payload-mapper.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/payload-mapper.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nvar _customerMapper = _interopRequireDefault(__webpack_require__(/*! ./customer-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/customer-mapper.js\"));\nvar _orderMapper = _interopRequireDefault(__webpack_require__(/*! ./order-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/order-mapper.js\"));\nvar _paymentMapper = _interopRequireDefault(__webpack_require__(/*! ./payment-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/payment-mapper.js\"));\nvar _storeMapper = _interopRequireDefault(__webpack_require__(/*! ./store-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/store-mapper.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar PayloadMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {CustomerMapper} customerMapper\n   * @param {OrderMapper} orderMapper\n   * @param {PaymentMapper} paymentMapper\n   * @param {StoreMapper} storeMapper\n   */\n  function PayloadMapper(customerMapper, orderMapper, paymentMapper, storeMapper) {\n    _classCallCheck(this, PayloadMapper);\n    /**\n     * @private\n     * @type {CustomerMapper}\n     */\n    this.customerMapper = customerMapper;\n\n    /**\n     * @private\n     * @type {OrderMapper}\n     */\n    this.orderMapper = orderMapper;\n\n    /**\n     * @private\n     * @type {PaymentMapper}\n     */\n    this.paymentMapper = paymentMapper;\n\n    /**\n     * @private\n     * @type {StoreMapper}\n     */\n    this.storeMapper = storeMapper;\n  }\n\n  /**\n   * @param {PaymentRequestData} data\n   * @returns {Object}\n   */\n  return _createClass(PayloadMapper, [{\n    key: \"mapToPayload\",\n    value: function mapToPayload(data) {\n      var _data$order = data.order,\n        order = _data$order === void 0 ? {} : _data$order,\n        additionalAction = data.additionalAction;\n      return (0, _utils.omitNil)({\n        customer: this.customerMapper.mapToCustomer(data),\n        notify_url: order.callbackUrl,\n        order: this.orderMapper.mapToOrder(data),\n        payment: this.paymentMapper.mapToPayment(data),\n        store: this.storeMapper.mapToStore(data),\n        additional_action: additionalAction\n      });\n    }\n\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToHeaders\",\n    value: function mapToHeaders(data) {\n      var authToken = data.authToken;\n      return (0, _utils.omitNil)({\n        Authorization: authToken\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {PayloadMapper}\n     */\n    function create() {\n      var customerMapper = _customerMapper.default.create();\n      var orderMapper = _orderMapper.default.create();\n      var paymentMapper = _paymentMapper.default.create();\n      var storeMapper = _storeMapper.default.create();\n      return new PayloadMapper(customerMapper, orderMapper, paymentMapper, storeMapper);\n    }\n  }]);\n}();\n//# sourceMappingURL=payload-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjEvcGF5bWVudC1tYXBwZXJzL3BheWxvYWQtbWFwcGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2YsYUFBYSxtQkFBTyxDQUFDLGtHQUF1QjtBQUM1Qyw2Q0FBNkMsbUJBQU8sQ0FBQyxzSEFBbUI7QUFDeEUsMENBQTBDLG1CQUFPLENBQUMsZ0hBQWdCO0FBQ2xFLDRDQUE0QyxtQkFBTyxDQUFDLG9IQUFrQjtBQUN0RSwwQ0FBMEMsbUJBQU8sQ0FBQyxnSEFBZ0I7QUFDbEUscUNBQXFDLGlDQUFpQztBQUN0RSxzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1Esb0JBQW9CLGtCQUFlO0FBQ25DO0FBQ0EsYUFBYSxnQkFBZ0I7QUFDN0IsYUFBYSxhQUFhO0FBQzFCLGFBQWEsZUFBZTtBQUM1QixhQUFhLGFBQWE7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhLG9CQUFvQjtBQUNqQyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0EsZUFBZSxvQkFBb0I7QUFDbkMsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjEvcGF5bWVudC1tYXBwZXJzL3BheWxvYWQtbWFwcGVyLmpzP2Q5NTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG52YXIgX3V0aWxzID0gcmVxdWlyZShcIi4uLy4uLy4uL2NvbW1vbi91dGlsc1wiKTtcbnZhciBfY3VzdG9tZXJNYXBwZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2N1c3RvbWVyLW1hcHBlclwiKSk7XG52YXIgX29yZGVyTWFwcGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9vcmRlci1tYXBwZXJcIikpO1xudmFyIF9wYXltZW50TWFwcGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9wYXltZW50LW1hcHBlclwiKSk7XG52YXIgX3N0b3JlTWFwcGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9zdG9yZS1tYXBwZXJcIikpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKSB7IHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTsgfVxuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsIG4pIHsgaWYgKCEoYSBpbnN0YW5jZW9mIG4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLCByKSB7IGZvciAodmFyIHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgeyB2YXIgbyA9IHJbdF07IG8uZW51bWVyYWJsZSA9IG8uZW51bWVyYWJsZSB8fCAhMSwgby5jb25maWd1cmFibGUgPSAhMCwgXCJ2YWx1ZVwiIGluIG8gJiYgKG8ud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBfdG9Qcm9wZXJ0eUtleShvLmtleSksIG8pOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLCByLCB0KSB7IHJldHVybiByICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLCByKSwgdCAmJiBfZGVmaW5lUHJvcGVydGllcyhlLCB0KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6ICExIH0pLCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIFBheWxvYWRNYXBwZXIgPSBleHBvcnRzLmRlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQHBhcmFtIHtDdXN0b21lck1hcHBlcn0gY3VzdG9tZXJNYXBwZXJcbiAgICogQHBhcmFtIHtPcmRlck1hcHBlcn0gb3JkZXJNYXBwZXJcbiAgICogQHBhcmFtIHtQYXltZW50TWFwcGVyfSBwYXltZW50TWFwcGVyXG4gICAqIEBwYXJhbSB7U3RvcmVNYXBwZXJ9IHN0b3JlTWFwcGVyXG4gICAqL1xuICBmdW5jdGlvbiBQYXlsb2FkTWFwcGVyKGN1c3RvbWVyTWFwcGVyLCBvcmRlck1hcHBlciwgcGF5bWVudE1hcHBlciwgc3RvcmVNYXBwZXIpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGF5bG9hZE1hcHBlcik7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Q3VzdG9tZXJNYXBwZXJ9XG4gICAgICovXG4gICAgdGhpcy5jdXN0b21lck1hcHBlciA9IGN1c3RvbWVyTWFwcGVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7T3JkZXJNYXBwZXJ9XG4gICAgICovXG4gICAgdGhpcy5vcmRlck1hcHBlciA9IG9yZGVyTWFwcGVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7UGF5bWVudE1hcHBlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBheW1lbnRNYXBwZXIgPSBwYXltZW50TWFwcGVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7U3RvcmVNYXBwZXJ9XG4gICAgICovXG4gICAgdGhpcy5zdG9yZU1hcHBlciA9IHN0b3JlTWFwcGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKFBheWxvYWRNYXBwZXIsIFt7XG4gICAga2V5OiBcIm1hcFRvUGF5bG9hZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBUb1BheWxvYWQoZGF0YSkge1xuICAgICAgdmFyIF9kYXRhJG9yZGVyID0gZGF0YS5vcmRlcixcbiAgICAgICAgb3JkZXIgPSBfZGF0YSRvcmRlciA9PT0gdm9pZCAwID8ge30gOiBfZGF0YSRvcmRlcixcbiAgICAgICAgYWRkaXRpb25hbEFjdGlvbiA9IGRhdGEuYWRkaXRpb25hbEFjdGlvbjtcbiAgICAgIHJldHVybiAoMCwgX3V0aWxzLm9taXROaWwpKHtcbiAgICAgICAgY3VzdG9tZXI6IHRoaXMuY3VzdG9tZXJNYXBwZXIubWFwVG9DdXN0b21lcihkYXRhKSxcbiAgICAgICAgbm90aWZ5X3VybDogb3JkZXIuY2FsbGJhY2tVcmwsXG4gICAgICAgIG9yZGVyOiB0aGlzLm9yZGVyTWFwcGVyLm1hcFRvT3JkZXIoZGF0YSksXG4gICAgICAgIHBheW1lbnQ6IHRoaXMucGF5bWVudE1hcHBlci5tYXBUb1BheW1lbnQoZGF0YSksXG4gICAgICAgIHN0b3JlOiB0aGlzLnN0b3JlTWFwcGVyLm1hcFRvU3RvcmUoZGF0YSksXG4gICAgICAgIGFkZGl0aW9uYWxfYWN0aW9uOiBhZGRpdGlvbmFsQWN0aW9uXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwibWFwVG9IZWFkZXJzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hcFRvSGVhZGVycyhkYXRhKSB7XG4gICAgICB2YXIgYXV0aFRva2VuID0gZGF0YS5hdXRoVG9rZW47XG4gICAgICByZXR1cm4gKDAsIF91dGlscy5vbWl0TmlsKSh7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGF1dGhUb2tlblxuICAgICAgfSk7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwiY3JlYXRlXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHJldHVybnMge1BheWxvYWRNYXBwZXJ9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgICAgdmFyIGN1c3RvbWVyTWFwcGVyID0gX2N1c3RvbWVyTWFwcGVyLmRlZmF1bHQuY3JlYXRlKCk7XG4gICAgICB2YXIgb3JkZXJNYXBwZXIgPSBfb3JkZXJNYXBwZXIuZGVmYXVsdC5jcmVhdGUoKTtcbiAgICAgIHZhciBwYXltZW50TWFwcGVyID0gX3BheW1lbnRNYXBwZXIuZGVmYXVsdC5jcmVhdGUoKTtcbiAgICAgIHZhciBzdG9yZU1hcHBlciA9IF9zdG9yZU1hcHBlci5kZWZhdWx0LmNyZWF0ZSgpO1xuICAgICAgcmV0dXJuIG5ldyBQYXlsb2FkTWFwcGVyKGN1c3RvbWVyTWFwcGVyLCBvcmRlck1hcHBlciwgcGF5bWVudE1hcHBlciwgc3RvcmVNYXBwZXIpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGF5bG9hZC1tYXBwZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/payload-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/payment-mapper.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/payment-mapper.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _objectAssign = _interopRequireDefault(__webpack_require__(/*! object-assign */ \"./node_modules/object-assign/index.js\"));\nvar _utils = __webpack_require__(/*! ../../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nvar _paymentMethodIdMapper = _interopRequireDefault(__webpack_require__(/*! ../../payment-method-mappers/payment-method-id-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-mappers/payment-method-id-mapper.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar PaymentMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {PaymentMethodIdMapper} paymentMethodIdMapper\n   * @returns {void}\n   */\n  function PaymentMapper(paymentMethodIdMapper) {\n    _classCallCheck(this, PaymentMapper);\n    /**\n     * @private\n     * @type {PaymentMethodIdMapper}\n     */\n    this.paymentMethodIdMapper = paymentMethodIdMapper;\n  }\n\n  /**\n   * @param {PaymentRequestData} data\n   * @returns {Object}\n   */\n  return _createClass(PaymentMapper, [{\n    key: \"mapToPayment\",\n    value: function mapToPayment(data) {\n      var _data$order = data.order,\n        order = _data$order === void 0 ? {} : _data$order,\n        _data$orderMeta = data.orderMeta,\n        orderMeta = _data$orderMeta === void 0 ? {} : _data$orderMeta,\n        _data$payment = data.payment,\n        payment = _data$payment === void 0 ? {} : _data$payment,\n        _data$paymentMethod = data.paymentMethod,\n        paymentMethod = _data$paymentMethod === void 0 ? {} : _data$paymentMethod;\n      var payload = {\n        device_info: payment.deviceSessionId ? payment.deviceSessionId : null,\n        device: orderMeta.deviceFingerprint ? {\n          fingerprint_id: orderMeta.deviceFingerprint\n        } : null,\n        gateway: this.paymentMethodIdMapper.mapToId(paymentMethod),\n        notify_url: order.callbackUrl,\n        return_url: paymentMethod.returnUrl || (order.payment ? order.payment.returnUrl : null),\n        vault_payment_instrument: !payment.instrumentId ? payment.shouldSaveInstrument : null,\n        set_as_default_stored_instrument: payment.instrumentId || payment.shouldSaveInstrument ? payment.shouldSetAsDefaultInstrument : null\n      };\n      var method = paymentMethod.method;\n      if (method) {\n        (0, _objectAssign.default)(payload, {\n          method: method\n        });\n      }\n      var nonce = payment.nonce || paymentMethod.nonce;\n      if (payment.formattedPayload) {\n        (0, _objectAssign.default)(payload, payment.formattedPayload);\n      } else if (payment.instrumentId) {\n        (0, _objectAssign.default)(payload, {\n          bigpay_token: this.mapToBigPayToken(data)\n        });\n      } else if (nonce) {\n        (0, _objectAssign.default)(payload, {\n          credit_card_token: {\n            token: nonce\n          }\n        });\n      } else if (payment.cryptogramId) {\n        (0, _objectAssign.default)(payload, {\n          credit_card_cryptogram: this.mapToCryptogram(data)\n        });\n      } else {\n        (0, _objectAssign.default)(payload, {\n          credit_card: this.mapToCreditCard(data)\n        });\n      }\n      if (payment.browser_info) {\n        (0, _objectAssign.default)(payload, {\n          browser_info: payment.browser_info\n        });\n      }\n      return (0, _utils.omitNil)(payload);\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToCreditCard\",\n    value: function mapToCreditCard(data) {\n      var _data$payment2 = data.payment,\n        payment = _data$payment2 === void 0 ? {} : _data$payment2;\n      return (0, _utils.omitNil)({\n        account_name: payment.ccName,\n        month: payment.ccExpiry ? (0, _utils.toNumber)(payment.ccExpiry.month) : null,\n        number: payment.ccNumber,\n        verification_value: payment.ccCvv,\n        year: payment.ccExpiry ? (0, _utils.toNumber)(payment.ccExpiry.year) : null,\n        customer_code: payment.ccCustomerCode,\n        three_d_secure: payment.threeDSecure,\n        hosted_form_nonce: payment.hostedFormNonce\n      });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @return {Object}\n     */\n  }, {\n    key: \"mapToBigPayToken\",\n    value: function mapToBigPayToken(_ref) {\n      var payment = _ref.payment;\n      return (0, _utils.omitNil)({\n        credit_card_number_confirmation: payment.ccNumber,\n        token: payment.instrumentId,\n        verification_value: payment.ccCvv,\n        verification_nonce: payment.nonce,\n        three_d_secure: payment.threeDSecure,\n        hosted_form_nonce: payment.hostedFormNonce,\n        token_type: payment.tokenType\n      });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @return {Object}\n     */\n  }, {\n    key: \"mapToCryptogram\",\n    value: function mapToCryptogram(_ref2) {\n      var payment = _ref2.payment;\n      return (0, _utils.omitNil)({\n        payment_cryptogram: payment.cryptogramId,\n        eci: payment.eci,\n        xid: payment.transactionId,\n        month: payment.ccExpiry ? (0, _utils.toNumber)(payment.ccExpiry.month) : null,\n        number: payment.ccNumber,\n        year: payment.ccExpiry ? (0, _utils.toNumber)(payment.ccExpiry.year) : null,\n        account_mask: payment.accountMask\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @param {PaymentMethodIdMapper} paymentMethodIdMapper\n     * @returns {PaymentMapper}\n     */\n    function create() {\n      var paymentMethodIdMapper = _paymentMethodIdMapper.default.create();\n      return new PaymentMapper(paymentMethodIdMapper);\n    }\n  }]);\n}();\n//# sourceMappingURL=payment-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjEvcGF5bWVudC1tYXBwZXJzL3BheW1lbnQtbWFwcGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2YsMkNBQTJDLG1CQUFPLENBQUMsNERBQWU7QUFDbEUsYUFBYSxtQkFBTyxDQUFDLGtHQUF1QjtBQUM1QyxvREFBb0QsbUJBQU8sQ0FBQyx1S0FBdUQ7QUFDbkgscUNBQXFDLGlDQUFpQztBQUN0RSxzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1Esb0JBQW9CLGtCQUFlO0FBQ25DO0FBQ0EsYUFBYSx1QkFBdUI7QUFDcEMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxvQkFBb0I7QUFDakMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQSw0REFBNEQ7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxpQkFBaUI7QUFDakI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxvQkFBb0I7QUFDbkMsZ0JBQWdCO0FBQ2hCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGdCQUFnQjtBQUNoQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdUJBQXVCO0FBQ3RDLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9wYXltZW50L3YxL3BheW1lbnQtbWFwcGVycy9wYXltZW50LW1hcHBlci5qcz82YWIwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF9vYmplY3RBc3NpZ24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJvYmplY3QtYXNzaWduXCIpKTtcbnZhciBfdXRpbHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vY29tbW9uL3V0aWxzXCIpO1xudmFyIF9wYXltZW50TWV0aG9kSWRNYXBwZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi8uLi9wYXltZW50LW1ldGhvZC1tYXBwZXJzL3BheW1lbnQtbWV0aG9kLWlkLW1hcHBlclwiKSk7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9OyB9XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgUGF5bWVudE1hcHBlciA9IGV4cG9ydHMuZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge1BheW1lbnRNZXRob2RJZE1hcHBlcn0gcGF5bWVudE1ldGhvZElkTWFwcGVyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgZnVuY3Rpb24gUGF5bWVudE1hcHBlcihwYXltZW50TWV0aG9kSWRNYXBwZXIpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGF5bWVudE1hcHBlcik7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7UGF5bWVudE1ldGhvZElkTWFwcGVyfVxuICAgICAqL1xuICAgIHRoaXMucGF5bWVudE1ldGhvZElkTWFwcGVyID0gcGF5bWVudE1ldGhvZElkTWFwcGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKFBheW1lbnRNYXBwZXIsIFt7XG4gICAga2V5OiBcIm1hcFRvUGF5bWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBUb1BheW1lbnQoZGF0YSkge1xuICAgICAgdmFyIF9kYXRhJG9yZGVyID0gZGF0YS5vcmRlcixcbiAgICAgICAgb3JkZXIgPSBfZGF0YSRvcmRlciA9PT0gdm9pZCAwID8ge30gOiBfZGF0YSRvcmRlcixcbiAgICAgICAgX2RhdGEkb3JkZXJNZXRhID0gZGF0YS5vcmRlck1ldGEsXG4gICAgICAgIG9yZGVyTWV0YSA9IF9kYXRhJG9yZGVyTWV0YSA9PT0gdm9pZCAwID8ge30gOiBfZGF0YSRvcmRlck1ldGEsXG4gICAgICAgIF9kYXRhJHBheW1lbnQgPSBkYXRhLnBheW1lbnQsXG4gICAgICAgIHBheW1lbnQgPSBfZGF0YSRwYXltZW50ID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJHBheW1lbnQsXG4gICAgICAgIF9kYXRhJHBheW1lbnRNZXRob2QgPSBkYXRhLnBheW1lbnRNZXRob2QsXG4gICAgICAgIHBheW1lbnRNZXRob2QgPSBfZGF0YSRwYXltZW50TWV0aG9kID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJHBheW1lbnRNZXRob2Q7XG4gICAgICB2YXIgcGF5bG9hZCA9IHtcbiAgICAgICAgZGV2aWNlX2luZm86IHBheW1lbnQuZGV2aWNlU2Vzc2lvbklkID8gcGF5bWVudC5kZXZpY2VTZXNzaW9uSWQgOiBudWxsLFxuICAgICAgICBkZXZpY2U6IG9yZGVyTWV0YS5kZXZpY2VGaW5nZXJwcmludCA/IHtcbiAgICAgICAgICBmaW5nZXJwcmludF9pZDogb3JkZXJNZXRhLmRldmljZUZpbmdlcnByaW50XG4gICAgICAgIH0gOiBudWxsLFxuICAgICAgICBnYXRld2F5OiB0aGlzLnBheW1lbnRNZXRob2RJZE1hcHBlci5tYXBUb0lkKHBheW1lbnRNZXRob2QpLFxuICAgICAgICBub3RpZnlfdXJsOiBvcmRlci5jYWxsYmFja1VybCxcbiAgICAgICAgcmV0dXJuX3VybDogcGF5bWVudE1ldGhvZC5yZXR1cm5VcmwgfHwgKG9yZGVyLnBheW1lbnQgPyBvcmRlci5wYXltZW50LnJldHVyblVybCA6IG51bGwpLFxuICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6ICFwYXltZW50Lmluc3RydW1lbnRJZCA/IHBheW1lbnQuc2hvdWxkU2F2ZUluc3RydW1lbnQgOiBudWxsLFxuICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogcGF5bWVudC5pbnN0cnVtZW50SWQgfHwgcGF5bWVudC5zaG91bGRTYXZlSW5zdHJ1bWVudCA/IHBheW1lbnQuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA6IG51bGxcbiAgICAgIH07XG4gICAgICB2YXIgbWV0aG9kID0gcGF5bWVudE1ldGhvZC5tZXRob2Q7XG4gICAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgICgwLCBfb2JqZWN0QXNzaWduLmRlZmF1bHQpKHBheWxvYWQsIHtcbiAgICAgICAgICBtZXRob2Q6IG1ldGhvZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHZhciBub25jZSA9IHBheW1lbnQubm9uY2UgfHwgcGF5bWVudE1ldGhvZC5ub25jZTtcbiAgICAgIGlmIChwYXltZW50LmZvcm1hdHRlZFBheWxvYWQpIHtcbiAgICAgICAgKDAsIF9vYmplY3RBc3NpZ24uZGVmYXVsdCkocGF5bG9hZCwgcGF5bWVudC5mb3JtYXR0ZWRQYXlsb2FkKTtcbiAgICAgIH0gZWxzZSBpZiAocGF5bWVudC5pbnN0cnVtZW50SWQpIHtcbiAgICAgICAgKDAsIF9vYmplY3RBc3NpZ24uZGVmYXVsdCkocGF5bG9hZCwge1xuICAgICAgICAgIGJpZ3BheV90b2tlbjogdGhpcy5tYXBUb0JpZ1BheVRva2VuKGRhdGEpXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChub25jZSkge1xuICAgICAgICAoMCwgX29iamVjdEFzc2lnbi5kZWZhdWx0KShwYXlsb2FkLCB7XG4gICAgICAgICAgY3JlZGl0X2NhcmRfdG9rZW46IHtcbiAgICAgICAgICAgIHRva2VuOiBub25jZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHBheW1lbnQuY3J5cHRvZ3JhbUlkKSB7XG4gICAgICAgICgwLCBfb2JqZWN0QXNzaWduLmRlZmF1bHQpKHBheWxvYWQsIHtcbiAgICAgICAgICBjcmVkaXRfY2FyZF9jcnlwdG9ncmFtOiB0aGlzLm1hcFRvQ3J5cHRvZ3JhbShkYXRhKVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICgwLCBfb2JqZWN0QXNzaWduLmRlZmF1bHQpKHBheWxvYWQsIHtcbiAgICAgICAgICBjcmVkaXRfY2FyZDogdGhpcy5tYXBUb0NyZWRpdENhcmQoZGF0YSlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAocGF5bWVudC5icm93c2VyX2luZm8pIHtcbiAgICAgICAgKDAsIF9vYmplY3RBc3NpZ24uZGVmYXVsdCkocGF5bG9hZCwge1xuICAgICAgICAgIGJyb3dzZXJfaW5mbzogcGF5bWVudC5icm93c2VyX2luZm9cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gKDAsIF91dGlscy5vbWl0TmlsKShwYXlsb2FkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJtYXBUb0NyZWRpdENhcmRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwVG9DcmVkaXRDYXJkKGRhdGEpIHtcbiAgICAgIHZhciBfZGF0YSRwYXltZW50MiA9IGRhdGEucGF5bWVudCxcbiAgICAgICAgcGF5bWVudCA9IF9kYXRhJHBheW1lbnQyID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJHBheW1lbnQyO1xuICAgICAgcmV0dXJuICgwLCBfdXRpbHMub21pdE5pbCkoe1xuICAgICAgICBhY2NvdW50X25hbWU6IHBheW1lbnQuY2NOYW1lLFxuICAgICAgICBtb250aDogcGF5bWVudC5jY0V4cGlyeSA/ICgwLCBfdXRpbHMudG9OdW1iZXIpKHBheW1lbnQuY2NFeHBpcnkubW9udGgpIDogbnVsbCxcbiAgICAgICAgbnVtYmVyOiBwYXltZW50LmNjTnVtYmVyLFxuICAgICAgICB2ZXJpZmljYXRpb25fdmFsdWU6IHBheW1lbnQuY2NDdnYsXG4gICAgICAgIHllYXI6IHBheW1lbnQuY2NFeHBpcnkgPyAoMCwgX3V0aWxzLnRvTnVtYmVyKShwYXltZW50LmNjRXhwaXJ5LnllYXIpIDogbnVsbCxcbiAgICAgICAgY3VzdG9tZXJfY29kZTogcGF5bWVudC5jY0N1c3RvbWVyQ29kZSxcbiAgICAgICAgdGhyZWVfZF9zZWN1cmU6IHBheW1lbnQudGhyZWVEU2VjdXJlLFxuICAgICAgICBob3N0ZWRfZm9ybV9ub25jZTogcGF5bWVudC5ob3N0ZWRGb3JtTm9uY2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQYXltZW50UmVxdWVzdERhdGF9IGRhdGFcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwibWFwVG9CaWdQYXlUb2tlblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBUb0JpZ1BheVRva2VuKF9yZWYpIHtcbiAgICAgIHZhciBwYXltZW50ID0gX3JlZi5wYXltZW50O1xuICAgICAgcmV0dXJuICgwLCBfdXRpbHMub21pdE5pbCkoe1xuICAgICAgICBjcmVkaXRfY2FyZF9udW1iZXJfY29uZmlybWF0aW9uOiBwYXltZW50LmNjTnVtYmVyLFxuICAgICAgICB0b2tlbjogcGF5bWVudC5pbnN0cnVtZW50SWQsXG4gICAgICAgIHZlcmlmaWNhdGlvbl92YWx1ZTogcGF5bWVudC5jY0N2dixcbiAgICAgICAgdmVyaWZpY2F0aW9uX25vbmNlOiBwYXltZW50Lm5vbmNlLFxuICAgICAgICB0aHJlZV9kX3NlY3VyZTogcGF5bWVudC50aHJlZURTZWN1cmUsXG4gICAgICAgIGhvc3RlZF9mb3JtX25vbmNlOiBwYXltZW50Lmhvc3RlZEZvcm1Ob25jZSxcbiAgICAgICAgdG9rZW5fdHlwZTogcGF5bWVudC50b2tlblR5cGVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQYXltZW50UmVxdWVzdERhdGF9IGRhdGFcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwibWFwVG9DcnlwdG9ncmFtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hcFRvQ3J5cHRvZ3JhbShfcmVmMikge1xuICAgICAgdmFyIHBheW1lbnQgPSBfcmVmMi5wYXltZW50O1xuICAgICAgcmV0dXJuICgwLCBfdXRpbHMub21pdE5pbCkoe1xuICAgICAgICBwYXltZW50X2NyeXB0b2dyYW06IHBheW1lbnQuY3J5cHRvZ3JhbUlkLFxuICAgICAgICBlY2k6IHBheW1lbnQuZWNpLFxuICAgICAgICB4aWQ6IHBheW1lbnQudHJhbnNhY3Rpb25JZCxcbiAgICAgICAgbW9udGg6IHBheW1lbnQuY2NFeHBpcnkgPyAoMCwgX3V0aWxzLnRvTnVtYmVyKShwYXltZW50LmNjRXhwaXJ5Lm1vbnRoKSA6IG51bGwsXG4gICAgICAgIG51bWJlcjogcGF5bWVudC5jY051bWJlcixcbiAgICAgICAgeWVhcjogcGF5bWVudC5jY0V4cGlyeSA/ICgwLCBfdXRpbHMudG9OdW1iZXIpKHBheW1lbnQuY2NFeHBpcnkueWVhcikgOiBudWxsLFxuICAgICAgICBhY2NvdW50X21hc2s6IHBheW1lbnQuYWNjb3VudE1hc2tcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImNyZWF0ZVwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UGF5bWVudE1ldGhvZElkTWFwcGVyfSBwYXltZW50TWV0aG9kSWRNYXBwZXJcbiAgICAgKiBAcmV0dXJucyB7UGF5bWVudE1hcHBlcn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgICB2YXIgcGF5bWVudE1ldGhvZElkTWFwcGVyID0gX3BheW1lbnRNZXRob2RJZE1hcHBlci5kZWZhdWx0LmNyZWF0ZSgpO1xuICAgICAgcmV0dXJuIG5ldyBQYXltZW50TWFwcGVyKHBheW1lbnRNZXRob2RJZE1hcHBlcik7XG4gICAgfVxuICB9XSk7XG59KCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXltZW50LW1hcHBlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/payment-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/store-mapper.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/store-mapper.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar StoreMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  function StoreMapper() {\n    _classCallCheck(this, StoreMapper);\n  }\n  return _createClass(StoreMapper, [{\n    key: \"mapToStore\",\n    value:\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    function mapToStore(data) {\n      var _data$store = data.store,\n        store = _data$store === void 0 ? {} : _data$store;\n      return (0, _utils.omitNil)({\n        hash: store.storeHash,\n        id: store.storeId ? (0, _utils.toString)(store.storeId) : null,\n        name: store.storeName\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {StoreMapper}\n     */\n    function create() {\n      return new StoreMapper();\n    }\n  }]);\n}();\n//# sourceMappingURL=store-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjEvcGF5bWVudC1tYXBwZXJzL3N0b3JlLW1hcHBlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBZTtBQUNmLGFBQWEsbUJBQU8sQ0FBQyxrR0FBdUI7QUFDNUMsc0JBQXNCLDJCQUEyQixvR0FBb0csbUJBQW1CLGlCQUFpQixzSEFBc0g7QUFDL1MsaUNBQWlDO0FBQ2pDLG1DQUFtQyxnQkFBZ0IsY0FBYyxPQUFPLGNBQWM7QUFDdEYsaUNBQWlDLHFIQUFxSCxjQUFjO0FBQ3BLLDZCQUE2QixtQ0FBbUM7QUFDaEUsOEJBQThCLDRDQUE0QywrQkFBK0Isb0JBQW9CLG1DQUFtQyxzQ0FBc0MsdUVBQXVFO0FBQzdRLGtCQUFrQixrQkFBZTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9wYXltZW50L3YxL3BheW1lbnQtbWFwcGVycy9zdG9yZS1tYXBwZXIuanM/YmQ1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfdXRpbHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vY29tbW9uL3V0aWxzXCIpO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsIG4pIHsgaWYgKCEoYSBpbnN0YW5jZW9mIG4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLCByKSB7IGZvciAodmFyIHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgeyB2YXIgbyA9IHJbdF07IG8uZW51bWVyYWJsZSA9IG8uZW51bWVyYWJsZSB8fCAhMSwgby5jb25maWd1cmFibGUgPSAhMCwgXCJ2YWx1ZVwiIGluIG8gJiYgKG8ud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBfdG9Qcm9wZXJ0eUtleShvLmtleSksIG8pOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLCByLCB0KSB7IHJldHVybiByICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLCByKSwgdCAmJiBfZGVmaW5lUHJvcGVydGllcyhlLCB0KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6ICExIH0pLCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIFN0b3JlTWFwcGVyID0gZXhwb3J0cy5kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3RvcmVNYXBwZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0b3JlTWFwcGVyKTtcbiAgfVxuICByZXR1cm4gX2NyZWF0ZUNsYXNzKFN0b3JlTWFwcGVyLCBbe1xuICAgIGtleTogXCJtYXBUb1N0b3JlXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQYXltZW50UmVxdWVzdERhdGF9IGRhdGFcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcFRvU3RvcmUoZGF0YSkge1xuICAgICAgdmFyIF9kYXRhJHN0b3JlID0gZGF0YS5zdG9yZSxcbiAgICAgICAgc3RvcmUgPSBfZGF0YSRzdG9yZSA9PT0gdm9pZCAwID8ge30gOiBfZGF0YSRzdG9yZTtcbiAgICAgIHJldHVybiAoMCwgX3V0aWxzLm9taXROaWwpKHtcbiAgICAgICAgaGFzaDogc3RvcmUuc3RvcmVIYXNoLFxuICAgICAgICBpZDogc3RvcmUuc3RvcmVJZCA/ICgwLCBfdXRpbHMudG9TdHJpbmcpKHN0b3JlLnN0b3JlSWQpIDogbnVsbCxcbiAgICAgICAgbmFtZTogc3RvcmUuc3RvcmVOYW1lXG4gICAgICB9KTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJjcmVhdGVcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7U3RvcmVNYXBwZXJ9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgICAgcmV0dXJuIG5ldyBTdG9yZU1hcHBlcigpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RvcmUtbWFwcGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/v1/payment-mappers/store-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/cart-mapper.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/cart-mapper.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar CartMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  function CartMapper() {\n    _classCallCheck(this, CartMapper);\n  }\n  return _createClass(CartMapper, [{\n    key: \"mapToCart\",\n    value:\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    function mapToCart(data) {\n      var _data$cart = data.cart,\n        cart = _data$cart === void 0 ? {} : _data$cart;\n      return (0, _utils.omitNil)({\n        currency_code: cart.currency,\n        items: this.mapToItems(data),\n        totals: this.mapToOrderTotals(data)\n      });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object[]}\n     */\n  }, {\n    key: \"mapToItems\",\n    value: function mapToItems(data) {\n      var _this = this;\n      var _data$cart2 = data.cart,\n        cart = _data$cart2 === void 0 ? {\n          items: []\n        } : _data$cart2;\n      return cart.items.map(function (itemData) {\n        return (0, _utils.omitNil)({\n          discount_amount: itemData.integerDiscount,\n          name: itemData.name,\n          price: itemData.integerAmount,\n          unit_price: itemData.integerUnitPrice,\n          quantity: itemData.quantity,\n          sku: itemData.sku,\n          tax_amount: itemData.integerTax,\n          amount: itemData.integerAmountAfterDiscount,\n          type: _this.mapToType(itemData)\n        });\n      });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToOrderTotals\",\n    value: function mapToOrderTotals(data) {\n      var _data$cart3 = data.cart,\n        cart = _data$cart3 === void 0 ? {} : _data$cart3;\n      return (0, _utils.omitNil)({\n        discount_total: cart.discount ? cart.discount.integerAmount : null,\n        grand_total: cart.grandTotal ? cart.grandTotal.integerAmount : null,\n        shipping_total: cart.shipping ? cart.shipping.integerAmount : null,\n        subtotal: cart.subtotal ? cart.subtotal.integerAmount : null,\n        surcharge_total: cart.handling ? cart.handling.integerAmount : null,\n        tax_total: cart.taxTotal ? cart.taxTotal.integerAmount : null\n      });\n    }\n\n    /**\n     * @private\n     * @param {Object} itemData\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToType\",\n    value: function mapToType(itemData) {\n      var types = {\n        ItemPhysicalEntity: 'physical',\n        ItemDigitalEntity: 'digital',\n        ItemGiftCertificateEntity: 'gift_card'\n      };\n      return types[itemData.type];\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {CartMapper}\n     */\n    function create() {\n      return new CartMapper();\n    }\n  }]);\n}();\n//# sourceMappingURL=cart-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjIvcGF5bWVudC1tYXBwZXJzL2NhcnQtbWFwcGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2YsYUFBYSxtQkFBTyxDQUFDLGtHQUF1QjtBQUM1QyxzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1EsaUJBQWlCLGtCQUFlO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvQkFBb0I7QUFDbkMsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxvQkFBb0I7QUFDbkMsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxvQkFBb0I7QUFDbkMsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9wYXltZW50L3YyL3BheW1lbnQtbWFwcGVycy9jYXJ0LW1hcHBlci5qcz9hMThmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF91dGlscyA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jb21tb24vdXRpbHNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgQ2FydE1hcHBlciA9IGV4cG9ydHMuZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIENhcnRNYXBwZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhcnRNYXBwZXIpO1xuICB9XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoQ2FydE1hcHBlciwgW3tcbiAgICBrZXk6IFwibWFwVG9DYXJ0XCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQYXltZW50UmVxdWVzdERhdGF9IGRhdGFcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcFRvQ2FydChkYXRhKSB7XG4gICAgICB2YXIgX2RhdGEkY2FydCA9IGRhdGEuY2FydCxcbiAgICAgICAgY2FydCA9IF9kYXRhJGNhcnQgPT09IHZvaWQgMCA/IHt9IDogX2RhdGEkY2FydDtcbiAgICAgIHJldHVybiAoMCwgX3V0aWxzLm9taXROaWwpKHtcbiAgICAgICAgY3VycmVuY3lfY29kZTogY2FydC5jdXJyZW5jeSxcbiAgICAgICAgaXRlbXM6IHRoaXMubWFwVG9JdGVtcyhkYXRhKSxcbiAgICAgICAgdG90YWxzOiB0aGlzLm1hcFRvT3JkZXJUb3RhbHMoZGF0YSlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQYXltZW50UmVxdWVzdERhdGF9IGRhdGFcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0W119XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwibWFwVG9JdGVtc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBUb0l0ZW1zKGRhdGEpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB2YXIgX2RhdGEkY2FydDIgPSBkYXRhLmNhcnQsXG4gICAgICAgIGNhcnQgPSBfZGF0YSRjYXJ0MiA9PT0gdm9pZCAwID8ge1xuICAgICAgICAgIGl0ZW1zOiBbXVxuICAgICAgICB9IDogX2RhdGEkY2FydDI7XG4gICAgICByZXR1cm4gY2FydC5pdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW1EYXRhKSB7XG4gICAgICAgIHJldHVybiAoMCwgX3V0aWxzLm9taXROaWwpKHtcbiAgICAgICAgICBkaXNjb3VudF9hbW91bnQ6IGl0ZW1EYXRhLmludGVnZXJEaXNjb3VudCxcbiAgICAgICAgICBuYW1lOiBpdGVtRGF0YS5uYW1lLFxuICAgICAgICAgIHByaWNlOiBpdGVtRGF0YS5pbnRlZ2VyQW1vdW50LFxuICAgICAgICAgIHVuaXRfcHJpY2U6IGl0ZW1EYXRhLmludGVnZXJVbml0UHJpY2UsXG4gICAgICAgICAgcXVhbnRpdHk6IGl0ZW1EYXRhLnF1YW50aXR5LFxuICAgICAgICAgIHNrdTogaXRlbURhdGEuc2t1LFxuICAgICAgICAgIHRheF9hbW91bnQ6IGl0ZW1EYXRhLmludGVnZXJUYXgsXG4gICAgICAgICAgYW1vdW50OiBpdGVtRGF0YS5pbnRlZ2VyQW1vdW50QWZ0ZXJEaXNjb3VudCxcbiAgICAgICAgICB0eXBlOiBfdGhpcy5tYXBUb1R5cGUoaXRlbURhdGEpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwibWFwVG9PcmRlclRvdGFsc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBUb09yZGVyVG90YWxzKGRhdGEpIHtcbiAgICAgIHZhciBfZGF0YSRjYXJ0MyA9IGRhdGEuY2FydCxcbiAgICAgICAgY2FydCA9IF9kYXRhJGNhcnQzID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJGNhcnQzO1xuICAgICAgcmV0dXJuICgwLCBfdXRpbHMub21pdE5pbCkoe1xuICAgICAgICBkaXNjb3VudF90b3RhbDogY2FydC5kaXNjb3VudCA/IGNhcnQuZGlzY291bnQuaW50ZWdlckFtb3VudCA6IG51bGwsXG4gICAgICAgIGdyYW5kX3RvdGFsOiBjYXJ0LmdyYW5kVG90YWwgPyBjYXJ0LmdyYW5kVG90YWwuaW50ZWdlckFtb3VudCA6IG51bGwsXG4gICAgICAgIHNoaXBwaW5nX3RvdGFsOiBjYXJ0LnNoaXBwaW5nID8gY2FydC5zaGlwcGluZy5pbnRlZ2VyQW1vdW50IDogbnVsbCxcbiAgICAgICAgc3VidG90YWw6IGNhcnQuc3VidG90YWwgPyBjYXJ0LnN1YnRvdGFsLmludGVnZXJBbW91bnQgOiBudWxsLFxuICAgICAgICBzdXJjaGFyZ2VfdG90YWw6IGNhcnQuaGFuZGxpbmcgPyBjYXJ0LmhhbmRsaW5nLmludGVnZXJBbW91bnQgOiBudWxsLFxuICAgICAgICB0YXhfdG90YWw6IGNhcnQudGF4VG90YWwgPyBjYXJ0LnRheFRvdGFsLmludGVnZXJBbW91bnQgOiBudWxsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtRGF0YVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwibWFwVG9UeXBlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hcFRvVHlwZShpdGVtRGF0YSkge1xuICAgICAgdmFyIHR5cGVzID0ge1xuICAgICAgICBJdGVtUGh5c2ljYWxFbnRpdHk6ICdwaHlzaWNhbCcsXG4gICAgICAgIEl0ZW1EaWdpdGFsRW50aXR5OiAnZGlnaXRhbCcsXG4gICAgICAgIEl0ZW1HaWZ0Q2VydGlmaWNhdGVFbnRpdHk6ICdnaWZ0X2NhcmQnXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHR5cGVzW2l0ZW1EYXRhLnR5cGVdO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImNyZWF0ZVwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtDYXJ0TWFwcGVyfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICAgIHJldHVybiBuZXcgQ2FydE1hcHBlcigpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FydC1tYXBwZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/cart-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/client-token-mapper.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/client-token-mapper.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nvar _cartMapper = _interopRequireDefault(__webpack_require__(/*! ./cart-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/cart-mapper.js\"));\nvar _gatewayMapper = _interopRequireDefault(__webpack_require__(/*! ./gateway-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/gateway-mapper.js\"));\nvar _quoteMapper = _interopRequireDefault(__webpack_require__(/*! ./quote-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/quote-mapper.js\"));\nvar _storeMapper = _interopRequireDefault(__webpack_require__(/*! ./store-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/store-mapper.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar ClientTokenMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {CartMapper} cartMapper\n   * @param {GatewayMapper} gatewayMapper\n   * @param {QuoteMapper} quoteMapper\n   * @param {StoreMapper} storeMapper\n   */\n  function ClientTokenMapper(cartMapper, gatewayMapper, quoteMapper, storeMapper) {\n    _classCallCheck(this, ClientTokenMapper);\n    /**\n     * @private\n     * @type {CartMapper}\n     */\n    this.cartMapper = cartMapper;\n\n    /**\n     * @private\n     * @type {GatewayMapper}\n     */\n    this.gatewayMapper = gatewayMapper;\n\n    /**\n     * @private\n     * @type {QuoteMapper}\n     */\n    this.quoteMapper = quoteMapper;\n\n    /**\n     * @private\n     * @type {StoreMapper}\n     */\n    this.storeMapper = storeMapper;\n  }\n\n  /**\n   * @param {PaymentRequestData} data\n   * @returns {Object}\n   */\n  return _createClass(ClientTokenMapper, [{\n    key: \"mapToClientToken\",\n    value: function mapToClientToken(data) {\n      return (0, _utils.omitNil)({\n        cart: this.cartMapper.mapToCart(data),\n        gateway: this.gatewayMapper.mapToGateway(data),\n        quote: this.quoteMapper.mapToQuote(data),\n        store: this.storeMapper.mapToStore(data)\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {ClientTokenMapper}\n     */\n    function create() {\n      var cartMapper = _cartMapper.default.create();\n      var gatewayMapper = _gatewayMapper.default.create();\n      var quoteMapper = _quoteMapper.default.create();\n      var storeMapper = _storeMapper.default.create();\n      return new ClientTokenMapper(cartMapper, gatewayMapper, quoteMapper, storeMapper);\n    }\n  }]);\n}();\n//# sourceMappingURL=client-token-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjIvcGF5bWVudC1tYXBwZXJzL2NsaWVudC10b2tlbi1tYXBwZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZixhQUFhLG1CQUFPLENBQUMsa0dBQXVCO0FBQzVDLHlDQUF5QyxtQkFBTyxDQUFDLDhHQUFlO0FBQ2hFLDRDQUE0QyxtQkFBTyxDQUFDLG9IQUFrQjtBQUN0RSwwQ0FBMEMsbUJBQU8sQ0FBQyxnSEFBZ0I7QUFDbEUsMENBQTBDLG1CQUFPLENBQUMsZ0hBQWdCO0FBQ2xFLHFDQUFxQyxpQ0FBaUM7QUFDdEUsc0JBQXNCLDJCQUEyQixvR0FBb0csbUJBQW1CLGlCQUFpQixzSEFBc0g7QUFDL1MsaUNBQWlDO0FBQ2pDLG1DQUFtQyxnQkFBZ0IsY0FBYyxPQUFPLGNBQWM7QUFDdEYsaUNBQWlDLHFIQUFxSCxjQUFjO0FBQ3BLLDZCQUE2QixtQ0FBbUM7QUFDaEUsOEJBQThCLDRDQUE0QywrQkFBK0Isb0JBQW9CLG1DQUFtQyxzQ0FBc0MsdUVBQXVFO0FBQzdRLHdCQUF3QixrQkFBZTtBQUN2QztBQUNBLGFBQWEsWUFBWTtBQUN6QixhQUFhLGVBQWU7QUFDNUIsYUFBYSxhQUFhO0FBQzFCLGFBQWEsYUFBYTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWEsb0JBQW9CO0FBQ2pDLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjIvcGF5bWVudC1tYXBwZXJzL2NsaWVudC10b2tlbi1tYXBwZXIuanM/NDg2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfdXRpbHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vY29tbW9uL3V0aWxzXCIpO1xudmFyIF9jYXJ0TWFwcGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9jYXJ0LW1hcHBlclwiKSk7XG52YXIgX2dhdGV3YXlNYXBwZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2dhdGV3YXktbWFwcGVyXCIpKTtcbnZhciBfcXVvdGVNYXBwZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3F1b3RlLW1hcHBlclwiKSk7XG52YXIgX3N0b3JlTWFwcGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9zdG9yZS1tYXBwZXJcIikpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKSB7IHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTsgfVxuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsIG4pIHsgaWYgKCEoYSBpbnN0YW5jZW9mIG4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLCByKSB7IGZvciAodmFyIHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgeyB2YXIgbyA9IHJbdF07IG8uZW51bWVyYWJsZSA9IG8uZW51bWVyYWJsZSB8fCAhMSwgby5jb25maWd1cmFibGUgPSAhMCwgXCJ2YWx1ZVwiIGluIG8gJiYgKG8ud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBfdG9Qcm9wZXJ0eUtleShvLmtleSksIG8pOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLCByLCB0KSB7IHJldHVybiByICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLCByKSwgdCAmJiBfZGVmaW5lUHJvcGVydGllcyhlLCB0KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6ICExIH0pLCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIENsaWVudFRva2VuTWFwcGVyID0gZXhwb3J0cy5kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7Q2FydE1hcHBlcn0gY2FydE1hcHBlclxuICAgKiBAcGFyYW0ge0dhdGV3YXlNYXBwZXJ9IGdhdGV3YXlNYXBwZXJcbiAgICogQHBhcmFtIHtRdW90ZU1hcHBlcn0gcXVvdGVNYXBwZXJcbiAgICogQHBhcmFtIHtTdG9yZU1hcHBlcn0gc3RvcmVNYXBwZXJcbiAgICovXG4gIGZ1bmN0aW9uIENsaWVudFRva2VuTWFwcGVyKGNhcnRNYXBwZXIsIGdhdGV3YXlNYXBwZXIsIHF1b3RlTWFwcGVyLCBzdG9yZU1hcHBlcikge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGllbnRUb2tlbk1hcHBlcik7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Q2FydE1hcHBlcn1cbiAgICAgKi9cbiAgICB0aGlzLmNhcnRNYXBwZXIgPSBjYXJ0TWFwcGVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7R2F0ZXdheU1hcHBlcn1cbiAgICAgKi9cbiAgICB0aGlzLmdhdGV3YXlNYXBwZXIgPSBnYXRld2F5TWFwcGVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7UXVvdGVNYXBwZXJ9XG4gICAgICovXG4gICAgdGhpcy5xdW90ZU1hcHBlciA9IHF1b3RlTWFwcGVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7U3RvcmVNYXBwZXJ9XG4gICAgICovXG4gICAgdGhpcy5zdG9yZU1hcHBlciA9IHN0b3JlTWFwcGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKENsaWVudFRva2VuTWFwcGVyLCBbe1xuICAgIGtleTogXCJtYXBUb0NsaWVudFRva2VuXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hcFRvQ2xpZW50VG9rZW4oZGF0YSkge1xuICAgICAgcmV0dXJuICgwLCBfdXRpbHMub21pdE5pbCkoe1xuICAgICAgICBjYXJ0OiB0aGlzLmNhcnRNYXBwZXIubWFwVG9DYXJ0KGRhdGEpLFxuICAgICAgICBnYXRld2F5OiB0aGlzLmdhdGV3YXlNYXBwZXIubWFwVG9HYXRld2F5KGRhdGEpLFxuICAgICAgICBxdW90ZTogdGhpcy5xdW90ZU1hcHBlci5tYXBUb1F1b3RlKGRhdGEpLFxuICAgICAgICBzdG9yZTogdGhpcy5zdG9yZU1hcHBlci5tYXBUb1N0b3JlKGRhdGEpXG4gICAgICB9KTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJjcmVhdGVcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7Q2xpZW50VG9rZW5NYXBwZXJ9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgICAgdmFyIGNhcnRNYXBwZXIgPSBfY2FydE1hcHBlci5kZWZhdWx0LmNyZWF0ZSgpO1xuICAgICAgdmFyIGdhdGV3YXlNYXBwZXIgPSBfZ2F0ZXdheU1hcHBlci5kZWZhdWx0LmNyZWF0ZSgpO1xuICAgICAgdmFyIHF1b3RlTWFwcGVyID0gX3F1b3RlTWFwcGVyLmRlZmF1bHQuY3JlYXRlKCk7XG4gICAgICB2YXIgc3RvcmVNYXBwZXIgPSBfc3RvcmVNYXBwZXIuZGVmYXVsdC5jcmVhdGUoKTtcbiAgICAgIHJldHVybiBuZXcgQ2xpZW50VG9rZW5NYXBwZXIoY2FydE1hcHBlciwgZ2F0ZXdheU1hcHBlciwgcXVvdGVNYXBwZXIsIHN0b3JlTWFwcGVyKTtcbiAgICB9XG4gIH1dKTtcbn0oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC10b2tlbi1tYXBwZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/client-token-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/gateway-mapper.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/gateway-mapper.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nvar _paymentMethodIdMapper = _interopRequireDefault(__webpack_require__(/*! ../../payment-method-mappers/payment-method-id-mapper */ \"./node_modules/@bigcommerce/bigpay-client/lib/payment/payment-method-mappers/payment-method-id-mapper.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar GatewayMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {PaymentMethodIdMapper} paymentMethodIdMapper\n   * @returns {void}\n   */\n  function GatewayMapper(paymentMethodIdMapper) {\n    _classCallCheck(this, GatewayMapper);\n    /**\n     * @private\n     * @type {PaymentMethodIdMapper}\n     */\n    this.paymentMethodIdMapper = paymentMethodIdMapper;\n  }\n\n  /**\n   * @param {PaymentRequestData} data\n   * @returns {Object}\n   */\n  return _createClass(GatewayMapper, [{\n    key: \"mapToGateway\",\n    value: function mapToGateway(data) {\n      var _data$paymentMethod = data.paymentMethod,\n        paymentMethod = _data$paymentMethod === void 0 ? {} : _data$paymentMethod;\n      return (0, _utils.omitNil)({\n        name: this.paymentMethodIdMapper.mapToId(paymentMethod)\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {GatewayMapper}\n     */\n    function create() {\n      var paymentMethodIdMapper = _paymentMethodIdMapper.default.create();\n      return new GatewayMapper(paymentMethodIdMapper);\n    }\n  }]);\n}();\n//# sourceMappingURL=gateway-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjIvcGF5bWVudC1tYXBwZXJzL2dhdGV3YXktbWFwcGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2YsYUFBYSxtQkFBTyxDQUFDLGtHQUF1QjtBQUM1QyxvREFBb0QsbUJBQU8sQ0FBQyx1S0FBdUQ7QUFDbkgscUNBQXFDLGlDQUFpQztBQUN0RSxzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1Esb0JBQW9CLGtCQUFlO0FBQ25DO0FBQ0EsYUFBYSx1QkFBdUI7QUFDcEMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxvQkFBb0I7QUFDakMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQ7QUFDNUQ7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvYmlncGF5LWNsaWVudC9saWIvcGF5bWVudC92Mi9wYXltZW50LW1hcHBlcnMvZ2F0ZXdheS1tYXBwZXIuanM/MTdmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfdXRpbHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vY29tbW9uL3V0aWxzXCIpO1xudmFyIF9wYXltZW50TWV0aG9kSWRNYXBwZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi8uLi9wYXltZW50LW1ldGhvZC1tYXBwZXJzL3BheW1lbnQtbWV0aG9kLWlkLW1hcHBlclwiKSk7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9OyB9XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgR2F0ZXdheU1hcHBlciA9IGV4cG9ydHMuZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge1BheW1lbnRNZXRob2RJZE1hcHBlcn0gcGF5bWVudE1ldGhvZElkTWFwcGVyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgZnVuY3Rpb24gR2F0ZXdheU1hcHBlcihwYXltZW50TWV0aG9kSWRNYXBwZXIpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2F0ZXdheU1hcHBlcik7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7UGF5bWVudE1ldGhvZElkTWFwcGVyfVxuICAgICAqL1xuICAgIHRoaXMucGF5bWVudE1ldGhvZElkTWFwcGVyID0gcGF5bWVudE1ldGhvZElkTWFwcGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKEdhdGV3YXlNYXBwZXIsIFt7XG4gICAga2V5OiBcIm1hcFRvR2F0ZXdheVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBUb0dhdGV3YXkoZGF0YSkge1xuICAgICAgdmFyIF9kYXRhJHBheW1lbnRNZXRob2QgPSBkYXRhLnBheW1lbnRNZXRob2QsXG4gICAgICAgIHBheW1lbnRNZXRob2QgPSBfZGF0YSRwYXltZW50TWV0aG9kID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJHBheW1lbnRNZXRob2Q7XG4gICAgICByZXR1cm4gKDAsIF91dGlscy5vbWl0TmlsKSh7XG4gICAgICAgIG5hbWU6IHRoaXMucGF5bWVudE1ldGhvZElkTWFwcGVyLm1hcFRvSWQocGF5bWVudE1ldGhvZClcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImNyZWF0ZVwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtHYXRld2F5TWFwcGVyfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICAgIHZhciBwYXltZW50TWV0aG9kSWRNYXBwZXIgPSBfcGF5bWVudE1ldGhvZElkTWFwcGVyLmRlZmF1bHQuY3JlYXRlKCk7XG4gICAgICByZXR1cm4gbmV3IEdhdGV3YXlNYXBwZXIocGF5bWVudE1ldGhvZElkTWFwcGVyKTtcbiAgICB9XG4gIH1dKTtcbn0oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdhdGV3YXktbWFwcGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/gateway-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/quote-mapper.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/quote-mapper.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar QuoteMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  function QuoteMapper() {\n    _classCallCheck(this, QuoteMapper);\n  }\n  return _createClass(QuoteMapper, [{\n    key: \"mapToQuote\",\n    value:\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    function mapToQuote(data) {\n      return (0, _utils.omitNil)({\n        billing_address: this.mapToAddress(data, 'billingAddress'),\n        shipping_address: this.mapToAddress(data, 'shippingAddress')\n      });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @param {string} addressKey\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToAddress\",\n    value: function mapToAddress(data, addressKey) {\n      var _data$customer = data.customer,\n        customer = _data$customer === void 0 ? {} : _data$customer;\n      var address = data[addressKey] || {};\n      return (0, _utils.omitNil)({\n        address_line_1: address.addressLine1,\n        address_line_2: address.addressLine2,\n        city: address.city,\n        company: address.company,\n        country_code: address.countryCode,\n        email: customer.email,\n        first_name: address.firstName,\n        last_name: address.lastName,\n        phone: address.phone,\n        postal_code: address.postCode,\n        state: address.province\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {QuoteMapper}\n     */\n    function create() {\n      return new QuoteMapper();\n    }\n  }]);\n}();\n//# sourceMappingURL=quote-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjIvcGF5bWVudC1tYXBwZXJzL3F1b3RlLW1hcHBlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBZTtBQUNmLGFBQWEsbUJBQU8sQ0FBQyxrR0FBdUI7QUFDNUMsc0JBQXNCLDJCQUEyQixvR0FBb0csbUJBQW1CLGlCQUFpQixzSEFBc0g7QUFDL1MsaUNBQWlDO0FBQ2pDLG1DQUFtQyxnQkFBZ0IsY0FBYyxPQUFPLGNBQWM7QUFDdEYsaUNBQWlDLHFIQUFxSCxjQUFjO0FBQ3BLLDZCQUE2QixtQ0FBbUM7QUFDaEUsOEJBQThCLDRDQUE0QywrQkFBK0Isb0JBQW9CLG1DQUFtQyxzQ0FBc0MsdUVBQXVFO0FBQzdRLGtCQUFrQixrQkFBZTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjIvcGF5bWVudC1tYXBwZXJzL3F1b3RlLW1hcHBlci5qcz9kYzQ5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF91dGlscyA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jb21tb24vdXRpbHNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgUXVvdGVNYXBwZXIgPSBleHBvcnRzLmRlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBRdW90ZU1hcHBlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUXVvdGVNYXBwZXIpO1xuICB9XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoUXVvdGVNYXBwZXIsIFt7XG4gICAga2V5OiBcIm1hcFRvUXVvdGVcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwVG9RdW90ZShkYXRhKSB7XG4gICAgICByZXR1cm4gKDAsIF91dGlscy5vbWl0TmlsKSh7XG4gICAgICAgIGJpbGxpbmdfYWRkcmVzczogdGhpcy5tYXBUb0FkZHJlc3MoZGF0YSwgJ2JpbGxpbmdBZGRyZXNzJyksXG4gICAgICAgIHNoaXBwaW5nX2FkZHJlc3M6IHRoaXMubWFwVG9BZGRyZXNzKGRhdGEsICdzaGlwcGluZ0FkZHJlc3MnKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BheW1lbnRSZXF1ZXN0RGF0YX0gZGF0YVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhZGRyZXNzS2V5XG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJtYXBUb0FkZHJlc3NcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwVG9BZGRyZXNzKGRhdGEsIGFkZHJlc3NLZXkpIHtcbiAgICAgIHZhciBfZGF0YSRjdXN0b21lciA9IGRhdGEuY3VzdG9tZXIsXG4gICAgICAgIGN1c3RvbWVyID0gX2RhdGEkY3VzdG9tZXIgPT09IHZvaWQgMCA/IHt9IDogX2RhdGEkY3VzdG9tZXI7XG4gICAgICB2YXIgYWRkcmVzcyA9IGRhdGFbYWRkcmVzc0tleV0gfHwge307XG4gICAgICByZXR1cm4gKDAsIF91dGlscy5vbWl0TmlsKSh7XG4gICAgICAgIGFkZHJlc3NfbGluZV8xOiBhZGRyZXNzLmFkZHJlc3NMaW5lMSxcbiAgICAgICAgYWRkcmVzc19saW5lXzI6IGFkZHJlc3MuYWRkcmVzc0xpbmUyLFxuICAgICAgICBjaXR5OiBhZGRyZXNzLmNpdHksXG4gICAgICAgIGNvbXBhbnk6IGFkZHJlc3MuY29tcGFueSxcbiAgICAgICAgY291bnRyeV9jb2RlOiBhZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICBlbWFpbDogY3VzdG9tZXIuZW1haWwsXG4gICAgICAgIGZpcnN0X25hbWU6IGFkZHJlc3MuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0X25hbWU6IGFkZHJlc3MubGFzdE5hbWUsXG4gICAgICAgIHBob25lOiBhZGRyZXNzLnBob25lLFxuICAgICAgICBwb3N0YWxfY29kZTogYWRkcmVzcy5wb3N0Q29kZSxcbiAgICAgICAgc3RhdGU6IGFkZHJlc3MucHJvdmluY2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImNyZWF0ZVwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtRdW90ZU1hcHBlcn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgICByZXR1cm4gbmV3IFF1b3RlTWFwcGVyKCk7XG4gICAgfVxuICB9XSk7XG59KCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdW90ZS1tYXBwZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/quote-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/store-mapper.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/store-mapper.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _utils = __webpack_require__(/*! ../../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar StoreMapper = exports[\"default\"] = /*#__PURE__*/function () {\n  function StoreMapper() {\n    _classCallCheck(this, StoreMapper);\n  }\n  return _createClass(StoreMapper, [{\n    key: \"mapToStore\",\n    value:\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    function mapToStore(data) {\n      return (0, _utils.omitNil)({\n        locale: this.mapToLocale(data),\n        store_identity: this.mapToIdentity(data),\n        urls: this.mapToUrls(data)\n      });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToLocale\",\n    value: function mapToLocale(data) {\n      var _data$store = data.store,\n        store = _data$store === void 0 ? {} : _data$store;\n      return (0, _utils.omitNil)({\n        country_code: store.countryCode,\n        currency_code: store.currencyCode,\n        language_code: store.storeLanguage\n      });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToIdentity\",\n    value: function mapToIdentity(data) {\n      var _data$store2 = data.store,\n        store = _data$store2 === void 0 ? {} : _data$store2;\n      return (0, _utils.omitNil)({\n        id: store.storeId ? (0, _utils.toNumber)(store.storeId) : null,\n        name: store.storeName\n      });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n  }, {\n    key: \"mapToUrls\",\n    value: function mapToUrls(data) {\n      var _data$store3 = data.store,\n        store = _data$store3 === void 0 ? {} : _data$store3;\n      return (0, _utils.omitNil)({\n        cart: store.cartLink,\n        checkout: store.checkoutLink,\n        confirmation: store.orderConfirmationLink,\n        home: store.shopPath\n      });\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @returns {StoreMapper}\n     */\n    function create() {\n      return new StoreMapper();\n    }\n  }]);\n}();\n//# sourceMappingURL=store-mapper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3BheW1lbnQvdjIvcGF5bWVudC1tYXBwZXJzL3N0b3JlLW1hcHBlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBZTtBQUNmLGFBQWEsbUJBQU8sQ0FBQyxrR0FBdUI7QUFDNUMsc0JBQXNCLDJCQUEyQixvR0FBb0csbUJBQW1CLGlCQUFpQixzSEFBc0g7QUFDL1MsaUNBQWlDO0FBQ2pDLG1DQUFtQyxnQkFBZ0IsY0FBYyxPQUFPLGNBQWM7QUFDdEYsaUNBQWlDLHFIQUFxSCxjQUFjO0FBQ3BLLDZCQUE2QixtQ0FBbUM7QUFDaEUsOEJBQThCLDRDQUE0QywrQkFBK0Isb0JBQW9CLG1DQUFtQyxzQ0FBc0MsdUVBQXVFO0FBQzdRLGtCQUFrQixrQkFBZTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGlCQUFpQjtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DLGlCQUFpQjtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxpQkFBaUI7QUFDakI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9iaWdwYXktY2xpZW50L2xpYi9wYXltZW50L3YyL3BheW1lbnQtbWFwcGVycy9zdG9yZS1tYXBwZXIuanM/NWUzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfdXRpbHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vY29tbW9uL3V0aWxzXCIpO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsIG4pIHsgaWYgKCEoYSBpbnN0YW5jZW9mIG4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLCByKSB7IGZvciAodmFyIHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgeyB2YXIgbyA9IHJbdF07IG8uZW51bWVyYWJsZSA9IG8uZW51bWVyYWJsZSB8fCAhMSwgby5jb25maWd1cmFibGUgPSAhMCwgXCJ2YWx1ZVwiIGluIG8gJiYgKG8ud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBfdG9Qcm9wZXJ0eUtleShvLmtleSksIG8pOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLCByLCB0KSB7IHJldHVybiByICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLCByKSwgdCAmJiBfZGVmaW5lUHJvcGVydGllcyhlLCB0KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6ICExIH0pLCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIFN0b3JlTWFwcGVyID0gZXhwb3J0cy5kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3RvcmVNYXBwZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0b3JlTWFwcGVyKTtcbiAgfVxuICByZXR1cm4gX2NyZWF0ZUNsYXNzKFN0b3JlTWFwcGVyLCBbe1xuICAgIGtleTogXCJtYXBUb1N0b3JlXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQYXltZW50UmVxdWVzdERhdGF9IGRhdGFcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcFRvU3RvcmUoZGF0YSkge1xuICAgICAgcmV0dXJuICgwLCBfdXRpbHMub21pdE5pbCkoe1xuICAgICAgICBsb2NhbGU6IHRoaXMubWFwVG9Mb2NhbGUoZGF0YSksXG4gICAgICAgIHN0b3JlX2lkZW50aXR5OiB0aGlzLm1hcFRvSWRlbnRpdHkoZGF0YSksXG4gICAgICAgIHVybHM6IHRoaXMubWFwVG9VcmxzKGRhdGEpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJtYXBUb0xvY2FsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBUb0xvY2FsZShkYXRhKSB7XG4gICAgICB2YXIgX2RhdGEkc3RvcmUgPSBkYXRhLnN0b3JlLFxuICAgICAgICBzdG9yZSA9IF9kYXRhJHN0b3JlID09PSB2b2lkIDAgPyB7fSA6IF9kYXRhJHN0b3JlO1xuICAgICAgcmV0dXJuICgwLCBfdXRpbHMub21pdE5pbCkoe1xuICAgICAgICBjb3VudHJ5X2NvZGU6IHN0b3JlLmNvdW50cnlDb2RlLFxuICAgICAgICBjdXJyZW5jeV9jb2RlOiBzdG9yZS5jdXJyZW5jeUNvZGUsXG4gICAgICAgIGxhbmd1YWdlX2NvZGU6IHN0b3JlLnN0b3JlTGFuZ3VhZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQYXltZW50UmVxdWVzdERhdGF9IGRhdGFcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqL1xuICB9LCB7XG4gICAga2V5OiBcIm1hcFRvSWRlbnRpdHlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwVG9JZGVudGl0eShkYXRhKSB7XG4gICAgICB2YXIgX2RhdGEkc3RvcmUyID0gZGF0YS5zdG9yZSxcbiAgICAgICAgc3RvcmUgPSBfZGF0YSRzdG9yZTIgPT09IHZvaWQgMCA/IHt9IDogX2RhdGEkc3RvcmUyO1xuICAgICAgcmV0dXJuICgwLCBfdXRpbHMub21pdE5pbCkoe1xuICAgICAgICBpZDogc3RvcmUuc3RvcmVJZCA/ICgwLCBfdXRpbHMudG9OdW1iZXIpKHN0b3JlLnN0b3JlSWQpIDogbnVsbCxcbiAgICAgICAgbmFtZTogc3RvcmUuc3RvcmVOYW1lXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UGF5bWVudFJlcXVlc3REYXRhfSBkYXRhXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJtYXBUb1VybHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwVG9VcmxzKGRhdGEpIHtcbiAgICAgIHZhciBfZGF0YSRzdG9yZTMgPSBkYXRhLnN0b3JlLFxuICAgICAgICBzdG9yZSA9IF9kYXRhJHN0b3JlMyA9PT0gdm9pZCAwID8ge30gOiBfZGF0YSRzdG9yZTM7XG4gICAgICByZXR1cm4gKDAsIF91dGlscy5vbWl0TmlsKSh7XG4gICAgICAgIGNhcnQ6IHN0b3JlLmNhcnRMaW5rLFxuICAgICAgICBjaGVja291dDogc3RvcmUuY2hlY2tvdXRMaW5rLFxuICAgICAgICBjb25maXJtYXRpb246IHN0b3JlLm9yZGVyQ29uZmlybWF0aW9uTGluayxcbiAgICAgICAgaG9tZTogc3RvcmUuc2hvcFBhdGhcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImNyZWF0ZVwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtTdG9yZU1hcHBlcn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgICByZXR1cm4gbmV3IFN0b3JlTWFwcGVyKCk7XG4gICAgfVxuICB9XSk7XG59KCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdG9yZS1tYXBwZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/payment/v2/payment-mappers/store-mapper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/store/store-request-sender.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/store/store-request-sender.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _requestSender = _interopRequireDefault(__webpack_require__(/*! ../common/http-request/request-sender */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/request-sender.js\"));\nvar _methodTypes = __webpack_require__(/*! ../common/http-request/method-types */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/http-request/method-types.js\");\nvar _urlHelper = _interopRequireDefault(__webpack_require__(/*! ./url-helper */ \"./node_modules/@bigcommerce/bigpay-client/lib/store/url-helper.js\"));\nvar _mappers = __webpack_require__(/*! ./v2/mappers */ \"./node_modules/@bigcommerce/bigpay-client/lib/store/v2/mappers/index.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar StoreRequestSender = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {UrlHelper} urlHelper\n   * @param {RequestSender} requestSender\n   * @returns {void}\n   */\n  function StoreRequestSender(urlHelper, requestSender) {\n    _classCallCheck(this, StoreRequestSender);\n    /**\n     * @private\n     * @type {UrlHelper}\n     */\n    this.urlHelper = urlHelper;\n\n    /**\n     * @private\n     * @type {RequestSender}\n     */\n    this.requestSender = requestSender;\n  }\n\n  /**\n   * @param {Object} data\n   * @param {Function} [callback]\n   * @return {void}\n   */\n  return _createClass(StoreRequestSender, [{\n    key: \"loadInstruments\",\n    value: function loadInstruments(data, callback) {\n      var url = this.urlHelper.getInstrumentsUrl(data.storeId, data.customerId, data.currencyCode);\n      var options = {\n        headers: (0, _mappers.mapToHeaders)(data)\n      };\n      this.requestSender.sendRequest(url, null, options, callback);\n    }\n\n    /**\n     * @param {Object} data\n     * @param {Function} [callback]\n     * @return {void}\n     */\n  }, {\n    key: \"loadInstrumentsWithAddress\",\n    value: function loadInstrumentsWithAddress(data, callback) {\n      var url = this.urlHelper.getTrustedShippingAddressUrl(data.storeId, data.customerId, data.currencyCode);\n      var payload = (0, _mappers.mapToTrustedShippingAddressPayload)(data);\n      var options = {\n        method: _methodTypes.POST,\n        headers: (0, _mappers.mapToHeaders)(data)\n      };\n      this.requestSender.postRequest(url, payload, options, callback);\n    }\n\n    /**\n     * @param {Object} data\n     * @param {Function} [callback]\n     * @return {void}\n     */\n  }, {\n    key: \"deleteShopperInstrument\",\n    value: function deleteShopperInstrument(data, callback) {\n      var url = this.urlHelper.getInstrumentByIdUrl(data.storeId, data.customerId, data.instrumentId, data.currencyCode);\n      var options = {\n        method: _methodTypes.DELETE,\n        headers: (0, _mappers.mapToHeaders)(data)\n      };\n      this.requestSender.sendRequest(url, null, options, callback);\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @param {Object} config\n     * @returns {StoreRequestSender}\n     */\n    function create(config) {\n      var urlHelper = _urlHelper.default.create(config);\n      var requestSender = _requestSender.default.create();\n      return new StoreRequestSender(urlHelper, requestSender);\n    }\n  }]);\n}();\n//# sourceMappingURL=store-request-sender.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3N0b3JlL3N0b3JlLXJlcXVlc3Qtc2VuZGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGtCQUFlO0FBQ2YsNENBQTRDLG1CQUFPLENBQUMsa0lBQXVDO0FBQzNGLG1CQUFtQixtQkFBTyxDQUFDLDhIQUFxQztBQUNoRSx3Q0FBd0MsbUJBQU8sQ0FBQyx1RkFBYztBQUM5RCxlQUFlLG1CQUFPLENBQUMsNkZBQWM7QUFDckMscUNBQXFDLGlDQUFpQztBQUN0RSxzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1EseUJBQXlCLGtCQUFlO0FBQ3hDO0FBQ0EsYUFBYSxXQUFXO0FBQ3hCLGFBQWEsZUFBZTtBQUM1QixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsVUFBVTtBQUN2QixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxVQUFVO0FBQ3pCLGdCQUFnQjtBQUNoQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFVBQVU7QUFDekIsZ0JBQWdCO0FBQ2hCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvYmlncGF5LWNsaWVudC9saWIvc3RvcmUvc3RvcmUtcmVxdWVzdC1zZW5kZXIuanM/YmFiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfcmVxdWVzdFNlbmRlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2NvbW1vbi9odHRwLXJlcXVlc3QvcmVxdWVzdC1zZW5kZXJcIikpO1xudmFyIF9tZXRob2RUeXBlcyA9IHJlcXVpcmUoXCIuLi9jb21tb24vaHR0cC1yZXF1ZXN0L21ldGhvZC10eXBlc1wiKTtcbnZhciBfdXJsSGVscGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi91cmwtaGVscGVyXCIpKTtcbnZhciBfbWFwcGVycyA9IHJlcXVpcmUoXCIuL3YyL21hcHBlcnNcIik7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9OyB9XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSwgbikgeyBpZiAoIShhIGluc3RhbmNlb2YgbikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHIpIHsgZm9yICh2YXIgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7IHZhciBvID0gclt0XTsgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsIHIsIHQpIHsgcmV0dXJuIHIgJiYgX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsIHIpLCB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUsIHQpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgU3RvcmVSZXF1ZXN0U2VuZGVyID0gZXhwb3J0cy5kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7VXJsSGVscGVyfSB1cmxIZWxwZXJcbiAgICogQHBhcmFtIHtSZXF1ZXN0U2VuZGVyfSByZXF1ZXN0U2VuZGVyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgZnVuY3Rpb24gU3RvcmVSZXF1ZXN0U2VuZGVyKHVybEhlbHBlciwgcmVxdWVzdFNlbmRlcikge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdG9yZVJlcXVlc3RTZW5kZXIpO1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1VybEhlbHBlcn1cbiAgICAgKi9cbiAgICB0aGlzLnVybEhlbHBlciA9IHVybEhlbHBlcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1JlcXVlc3RTZW5kZXJ9XG4gICAgICovXG4gICAgdGhpcy5yZXF1ZXN0U2VuZGVyID0gcmVxdWVzdFNlbmRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKFN0b3JlUmVxdWVzdFNlbmRlciwgW3tcbiAgICBrZXk6IFwibG9hZEluc3RydW1lbnRzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRJbnN0cnVtZW50cyhkYXRhLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHVybCA9IHRoaXMudXJsSGVscGVyLmdldEluc3RydW1lbnRzVXJsKGRhdGEuc3RvcmVJZCwgZGF0YS5jdXN0b21lcklkLCBkYXRhLmN1cnJlbmN5Q29kZSk7XG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgaGVhZGVyczogKDAsIF9tYXBwZXJzLm1hcFRvSGVhZGVycykoZGF0YSlcbiAgICAgIH07XG4gICAgICB0aGlzLnJlcXVlc3RTZW5kZXIuc2VuZFJlcXVlc3QodXJsLCBudWxsLCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJsb2FkSW5zdHJ1bWVudHNXaXRoQWRkcmVzc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkSW5zdHJ1bWVudHNXaXRoQWRkcmVzcyhkYXRhLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHVybCA9IHRoaXMudXJsSGVscGVyLmdldFRydXN0ZWRTaGlwcGluZ0FkZHJlc3NVcmwoZGF0YS5zdG9yZUlkLCBkYXRhLmN1c3RvbWVySWQsIGRhdGEuY3VycmVuY3lDb2RlKTtcbiAgICAgIHZhciBwYXlsb2FkID0gKDAsIF9tYXBwZXJzLm1hcFRvVHJ1c3RlZFNoaXBwaW5nQWRkcmVzc1BheWxvYWQpKGRhdGEpO1xuICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIG1ldGhvZDogX21ldGhvZFR5cGVzLlBPU1QsXG4gICAgICAgIGhlYWRlcnM6ICgwLCBfbWFwcGVycy5tYXBUb0hlYWRlcnMpKGRhdGEpXG4gICAgICB9O1xuICAgICAgdGhpcy5yZXF1ZXN0U2VuZGVyLnBvc3RSZXF1ZXN0KHVybCwgcGF5bG9hZCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwiZGVsZXRlU2hvcHBlckluc3RydW1lbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVsZXRlU2hvcHBlckluc3RydW1lbnQoZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgIHZhciB1cmwgPSB0aGlzLnVybEhlbHBlci5nZXRJbnN0cnVtZW50QnlJZFVybChkYXRhLnN0b3JlSWQsIGRhdGEuY3VzdG9tZXJJZCwgZGF0YS5pbnN0cnVtZW50SWQsIGRhdGEuY3VycmVuY3lDb2RlKTtcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBtZXRob2Q6IF9tZXRob2RUeXBlcy5ERUxFVEUsXG4gICAgICAgIGhlYWRlcnM6ICgwLCBfbWFwcGVycy5tYXBUb0hlYWRlcnMpKGRhdGEpXG4gICAgICB9O1xuICAgICAgdGhpcy5yZXF1ZXN0U2VuZGVyLnNlbmRSZXF1ZXN0KHVybCwgbnVsbCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImNyZWF0ZVwiLFxuICAgIHZhbHVlOlxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAgICAgKiBAcmV0dXJucyB7U3RvcmVSZXF1ZXN0U2VuZGVyfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZShjb25maWcpIHtcbiAgICAgIHZhciB1cmxIZWxwZXIgPSBfdXJsSGVscGVyLmRlZmF1bHQuY3JlYXRlKGNvbmZpZyk7XG4gICAgICB2YXIgcmVxdWVzdFNlbmRlciA9IF9yZXF1ZXN0U2VuZGVyLmRlZmF1bHQuY3JlYXRlKCk7XG4gICAgICByZXR1cm4gbmV3IFN0b3JlUmVxdWVzdFNlbmRlcih1cmxIZWxwZXIsIHJlcXVlc3RTZW5kZXIpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RvcmUtcmVxdWVzdC1zZW5kZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/store/store-request-sender.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/store/url-helper.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/store/url-helper.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar UrlHelper = exports[\"default\"] = /*#__PURE__*/function () {\n  /**\n   * @param {Object} config\n   * @param {string} config.host\n   * @returns {void}\n   */\n  function UrlHelper(config) {\n    _classCallCheck(this, UrlHelper);\n    /**\n     * @private\n     * @type {Object}\n     */\n    this.config = config;\n  }\n\n  /**\n   * @private\n   * @returns {string}\n   * @throws {Error}\n   */\n  return _createClass(UrlHelper, [{\n    key: \"host\",\n    get: function get() {\n      if (!this.config || !this.config.host) {\n        throw new Error('Host URL unavailable or not supplied.');\n      }\n      return this.config.host;\n    }\n\n    /**\n     * @param {number} storeId\n     * @param {number} customerId\n     * @param {string} currencyCode\n     * @returns {string}\n     */\n  }, {\n    key: \"getInstrumentsUrl\",\n    value: function getInstrumentsUrl(storeId, customerId, currencyCode) {\n      return \"\".concat(this.host, \"/api/v3/stores/\").concat(storeId, \"/shoppers/\").concat(customerId, \"/instruments?currency_code=\").concat(currencyCode);\n    }\n\n    /**\n     * @param {number} storeId\n     * @param {number} customerId\n     * @param {string} currencyCode\n     * @return {string}\n     */\n  }, {\n    key: \"getTrustedShippingAddressUrl\",\n    value: function getTrustedShippingAddressUrl(storeId, customerId, currencyCode) {\n      return \"\".concat(this.host, \"/api/v3/stores/\").concat(storeId, \"/shoppers/\").concat(customerId, \"/instruments/trusted_shipping_address?currency_code=\").concat(currencyCode);\n    }\n\n    /**\n     * @param {number} storeId\n     * @param {number} customerId\n     * @param {number} instrumentId\n     * @param {string} currencyCode\n     * @returns {string}\n     */\n  }, {\n    key: \"getInstrumentByIdUrl\",\n    value: function getInstrumentByIdUrl(storeId, customerId, instrumentId, currencyCode) {\n      return \"\".concat(this.host, \"/api/v2/stores/\").concat(storeId, \"/shoppers/\").concat(customerId, \"/instruments/\").concat(instrumentId, \"?currency_code=\").concat(currencyCode);\n    }\n  }], [{\n    key: \"create\",\n    value:\n    /**\n     * @param {Object} config\n     * @param {string} config.host\n     * @returns {CustomerMapper}\n     */\n    function create(config) {\n      return new UrlHelper(config);\n    }\n  }]);\n}();\n//# sourceMappingURL=url-helper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3N0b3JlL3VybC1oZWxwZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWU7QUFDZixzQkFBc0IsMkJBQTJCLG9HQUFvRyxtQkFBbUIsaUJBQWlCLHNIQUFzSDtBQUMvUyxpQ0FBaUM7QUFDakMsbUNBQW1DLGdCQUFnQixjQUFjLE9BQU8sY0FBYztBQUN0RixpQ0FBaUMscUhBQXFILGNBQWM7QUFDcEssNkJBQTZCLG1DQUFtQztBQUNoRSw4QkFBOEIsNENBQTRDLCtCQUErQixvQkFBb0IsbUNBQW1DLHNDQUFzQyx1RUFBdUU7QUFDN1EsZ0JBQWdCLGtCQUFlO0FBQy9CO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWU7QUFDZixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCO0FBQ2hCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvYmlncGF5LWNsaWVudC9saWIvc3RvcmUvdXJsLWhlbHBlci5qcz8zM2Y5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsIG4pIHsgaWYgKCEoYSBpbnN0YW5jZW9mIG4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLCByKSB7IGZvciAodmFyIHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgeyB2YXIgbyA9IHJbdF07IG8uZW51bWVyYWJsZSA9IG8uZW51bWVyYWJsZSB8fCAhMSwgby5jb25maWd1cmFibGUgPSAhMCwgXCJ2YWx1ZVwiIGluIG8gJiYgKG8ud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBfdG9Qcm9wZXJ0eUtleShvLmtleSksIG8pOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLCByLCB0KSB7IHJldHVybiByICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLCByKSwgdCAmJiBfZGVmaW5lUHJvcGVydGllcyhlLCB0KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6ICExIH0pLCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIFVybEhlbHBlciA9IGV4cG9ydHMuZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb25maWcuaG9zdFxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGZ1bmN0aW9uIFVybEhlbHBlcihjb25maWcpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXJsSGVscGVyKTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICogQHRocm93cyB7RXJyb3J9XG4gICAqL1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKFVybEhlbHBlciwgW3tcbiAgICBrZXk6IFwiaG9zdFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKCF0aGlzLmNvbmZpZyB8fCAhdGhpcy5jb25maWcuaG9zdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hvc3QgVVJMIHVuYXZhaWxhYmxlIG9yIG5vdCBzdXBwbGllZC4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5ob3N0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdG9yZUlkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGN1c3RvbWVySWRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY3VycmVuY3lDb2RlXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJnZXRJbnN0cnVtZW50c1VybFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0cnVtZW50c1VybChzdG9yZUlkLCBjdXN0b21lcklkLCBjdXJyZW5jeUNvZGUpIHtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdCh0aGlzLmhvc3QsIFwiL2FwaS92My9zdG9yZXMvXCIpLmNvbmNhdChzdG9yZUlkLCBcIi9zaG9wcGVycy9cIikuY29uY2F0KGN1c3RvbWVySWQsIFwiL2luc3RydW1lbnRzP2N1cnJlbmN5X2NvZGU9XCIpLmNvbmNhdChjdXJyZW5jeUNvZGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdG9yZUlkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGN1c3RvbWVySWRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY3VycmVuY3lDb2RlXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICB9LCB7XG4gICAga2V5OiBcImdldFRydXN0ZWRTaGlwcGluZ0FkZHJlc3NVcmxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VHJ1c3RlZFNoaXBwaW5nQWRkcmVzc1VybChzdG9yZUlkLCBjdXN0b21lcklkLCBjdXJyZW5jeUNvZGUpIHtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdCh0aGlzLmhvc3QsIFwiL2FwaS92My9zdG9yZXMvXCIpLmNvbmNhdChzdG9yZUlkLCBcIi9zaG9wcGVycy9cIikuY29uY2F0KGN1c3RvbWVySWQsIFwiL2luc3RydW1lbnRzL3RydXN0ZWRfc2hpcHBpbmdfYWRkcmVzcz9jdXJyZW5jeV9jb2RlPVwiKS5jb25jYXQoY3VycmVuY3lDb2RlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RvcmVJZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjdXN0b21lcklkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluc3RydW1lbnRJZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjdXJyZW5jeUNvZGVcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqL1xuICB9LCB7XG4gICAga2V5OiBcImdldEluc3RydW1lbnRCeUlkVXJsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RydW1lbnRCeUlkVXJsKHN0b3JlSWQsIGN1c3RvbWVySWQsIGluc3RydW1lbnRJZCwgY3VycmVuY3lDb2RlKSB7XG4gICAgICByZXR1cm4gXCJcIi5jb25jYXQodGhpcy5ob3N0LCBcIi9hcGkvdjIvc3RvcmVzL1wiKS5jb25jYXQoc3RvcmVJZCwgXCIvc2hvcHBlcnMvXCIpLmNvbmNhdChjdXN0b21lcklkLCBcIi9pbnN0cnVtZW50cy9cIikuY29uY2F0KGluc3RydW1lbnRJZCwgXCI/Y3VycmVuY3lfY29kZT1cIikuY29uY2F0KGN1cnJlbmN5Q29kZSk7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwiY3JlYXRlXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb25maWcuaG9zdFxuICAgICAqIEByZXR1cm5zIHtDdXN0b21lck1hcHBlcn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUoY29uZmlnKSB7XG4gICAgICByZXR1cm4gbmV3IFVybEhlbHBlcihjb25maWcpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXJsLWhlbHBlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/store/url-helper.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/bigpay-client/lib/store/v2/mappers/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@bigcommerce/bigpay-client/lib/store/v2/mappers/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.mapToHeaders = mapToHeaders;\nexports.mapToInstrumentPayload = mapToInstrumentPayload;\nexports.mapToTrustedShippingAddressPayload = mapToTrustedShippingAddressPayload;\nvar _utils = __webpack_require__(/*! ../../../common/utils */ \"./node_modules/@bigcommerce/bigpay-client/lib/common/utils/index.js\");\n/**\n * @param {Object} [data={}]\n * @param {Object} data.billingAddress\n * @param {CreditCard} data.creditCard\n * @param {boolean} data.defaultInstrument\n * @param {string} data.providerName\n * @return {Object}\n */\nfunction mapToInstrumentPayload() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var providerName = data.providerName,\n    defaultInstrument = data.defaultInstrument;\n  var provider = (0, _utils.omitNil)({\n    name: providerName\n  });\n  return (0, _utils.omitNil)({\n    provider: provider,\n    credit_card: mapToCreditCard(data),\n    billing_address: mapToAddress(data.billingAddress),\n    default_instrument: defaultInstrument\n  });\n}\n\n/**\n * @param {Object} [data={}]\n * @param {Object} data.shippingAddress\n * @return {Object}\n */\nfunction mapToTrustedShippingAddressPayload() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (Array.isArray(data.shippingAddress)) {\n    return (0, _utils.omitNil)({\n      shipping_addresses: data.shippingAddress.map(function (address) {\n        return mapToAddress(address);\n      })\n    });\n  }\n  return (0, _utils.omitNil)({\n    shipping_address: mapToAddress(data.shippingAddress)\n  });\n}\n\n/**\n * @param {Object} data\n * @param {string} data.authToken\n * @return {Object}\n */\nfunction mapToHeaders() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    Authorization = _ref.authToken;\n  return (0, _utils.omitNil)({\n    Authorization: Authorization\n  });\n}\n\n/**\n * @param {AddressData} address\n * @return {Object}\n */\nfunction mapToAddress() {\n  var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var state = mapToState(address.provinceCode, address.province);\n  return (0, _utils.omitNil)({\n    address_line_1: address.addressLine1,\n    address_line_2: address.addressLine2,\n    city: address.city,\n    company: address.company,\n    country_code: address.countryCode,\n    email: address.email,\n    first_name: address.firstName,\n    last_name: address.lastName,\n    phone: address.phone,\n    postal_code: address.postCode,\n    state: state\n  });\n}\n\n/**\n * @param {string} code\n * @param {string} name\n * @return {Object}\n */\nfunction mapToState(code, name) {\n  return (0, _utils.omitNil)({\n    code: code,\n    name: name\n  });\n}\n\n/**\n * @param {Object} data\n * @param {CreditCard} data.creditCard\n * @return {Object}\n */\nfunction mapToCreditCard(_ref2) {\n  var _ref2$creditCard = _ref2.creditCard,\n    creditCard = _ref2$creditCard === void 0 ? {} : _ref2$creditCard;\n  var threeDSecure = (0, _utils.omitNil)(creditCard.threeDSecure);\n  return (0, _utils.omitNil)({\n    cardholder_name: creditCard.cardholderName,\n    number: creditCard.number,\n    month: creditCard.month,\n    year: creditCard.year,\n    verification_code: creditCard.verificationCode,\n    issue_month: creditCard.issueMonth,\n    issue_year: creditCard.issueYear,\n    issue_number: creditCard.issueNumber,\n    track_data: creditCard.trackData,\n    is_manual_entry: creditCard.isManualEntry,\n    icc_data: creditCard.iccData,\n    fallback_reason: creditCard.fallbackReason,\n    is_contactless: creditCard.isContactless,\n    encrypted_pin_cryptogram: creditCard.encryptedPinCryptogram,\n    encrypted_pin_ksn: creditCard.encryptedPinKsn,\n    three_d_secure: threeDSecure\n  });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnQvbGliL3N0b3JlL3YyL21hcHBlcnMvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysb0JBQW9CO0FBQ3BCLDhCQUE4QjtBQUM5QiwwQ0FBMEM7QUFDMUMsYUFBYSxtQkFBTyxDQUFDLGtHQUF1QjtBQUM1QztBQUNBLFdBQVcsUUFBUSxRQUFRO0FBQzNCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFlBQVk7QUFDdkIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBLFdBQVcsUUFBUSxRQUFRO0FBQzNCLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxZQUFZO0FBQ3ZCLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvYmlncGF5LWNsaWVudC9saWIvc3RvcmUvdjIvbWFwcGVycy9pbmRleC5qcz82OThlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5tYXBUb0hlYWRlcnMgPSBtYXBUb0hlYWRlcnM7XG5leHBvcnRzLm1hcFRvSW5zdHJ1bWVudFBheWxvYWQgPSBtYXBUb0luc3RydW1lbnRQYXlsb2FkO1xuZXhwb3J0cy5tYXBUb1RydXN0ZWRTaGlwcGluZ0FkZHJlc3NQYXlsb2FkID0gbWFwVG9UcnVzdGVkU2hpcHBpbmdBZGRyZXNzUGF5bG9hZDtcbnZhciBfdXRpbHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vY29tbW9uL3V0aWxzXCIpO1xuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gW2RhdGE9e31dXG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YS5iaWxsaW5nQWRkcmVzc1xuICogQHBhcmFtIHtDcmVkaXRDYXJkfSBkYXRhLmNyZWRpdENhcmRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZGF0YS5kZWZhdWx0SW5zdHJ1bWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGRhdGEucHJvdmlkZXJOYW1lXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIG1hcFRvSW5zdHJ1bWVudFBheWxvYWQoKSB7XG4gIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgdmFyIHByb3ZpZGVyTmFtZSA9IGRhdGEucHJvdmlkZXJOYW1lLFxuICAgIGRlZmF1bHRJbnN0cnVtZW50ID0gZGF0YS5kZWZhdWx0SW5zdHJ1bWVudDtcbiAgdmFyIHByb3ZpZGVyID0gKDAsIF91dGlscy5vbWl0TmlsKSh7XG4gICAgbmFtZTogcHJvdmlkZXJOYW1lXG4gIH0pO1xuICByZXR1cm4gKDAsIF91dGlscy5vbWl0TmlsKSh7XG4gICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxuICAgIGNyZWRpdF9jYXJkOiBtYXBUb0NyZWRpdENhcmQoZGF0YSksXG4gICAgYmlsbGluZ19hZGRyZXNzOiBtYXBUb0FkZHJlc3MoZGF0YS5iaWxsaW5nQWRkcmVzcyksXG4gICAgZGVmYXVsdF9pbnN0cnVtZW50OiBkZWZhdWx0SW5zdHJ1bWVudFxuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gW2RhdGE9e31dXG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YS5zaGlwcGluZ0FkZHJlc3NcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gbWFwVG9UcnVzdGVkU2hpcHBpbmdBZGRyZXNzUGF5bG9hZCgpIHtcbiAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICBpZiAoQXJyYXkuaXNBcnJheShkYXRhLnNoaXBwaW5nQWRkcmVzcykpIHtcbiAgICByZXR1cm4gKDAsIF91dGlscy5vbWl0TmlsKSh7XG4gICAgICBzaGlwcGluZ19hZGRyZXNzZXM6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLm1hcChmdW5jdGlvbiAoYWRkcmVzcykge1xuICAgICAgICByZXR1cm4gbWFwVG9BZGRyZXNzKGFkZHJlc3MpO1xuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gKDAsIF91dGlscy5vbWl0TmlsKSh7XG4gICAgc2hpcHBpbmdfYWRkcmVzczogbWFwVG9BZGRyZXNzKGRhdGEuc2hpcHBpbmdBZGRyZXNzKVxuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICogQHBhcmFtIHtzdHJpbmd9IGRhdGEuYXV0aFRva2VuXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIG1hcFRvSGVhZGVycygpIHtcbiAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgIEF1dGhvcml6YXRpb24gPSBfcmVmLmF1dGhUb2tlbjtcbiAgcmV0dXJuICgwLCBfdXRpbHMub21pdE5pbCkoe1xuICAgIEF1dGhvcml6YXRpb246IEF1dGhvcml6YXRpb25cbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBZGRyZXNzRGF0YX0gYWRkcmVzc1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBtYXBUb0FkZHJlc3MoKSB7XG4gIHZhciBhZGRyZXNzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgdmFyIHN0YXRlID0gbWFwVG9TdGF0ZShhZGRyZXNzLnByb3ZpbmNlQ29kZSwgYWRkcmVzcy5wcm92aW5jZSk7XG4gIHJldHVybiAoMCwgX3V0aWxzLm9taXROaWwpKHtcbiAgICBhZGRyZXNzX2xpbmVfMTogYWRkcmVzcy5hZGRyZXNzTGluZTEsXG4gICAgYWRkcmVzc19saW5lXzI6IGFkZHJlc3MuYWRkcmVzc0xpbmUyLFxuICAgIGNpdHk6IGFkZHJlc3MuY2l0eSxcbiAgICBjb21wYW55OiBhZGRyZXNzLmNvbXBhbnksXG4gICAgY291bnRyeV9jb2RlOiBhZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgIGVtYWlsOiBhZGRyZXNzLmVtYWlsLFxuICAgIGZpcnN0X25hbWU6IGFkZHJlc3MuZmlyc3ROYW1lLFxuICAgIGxhc3RfbmFtZTogYWRkcmVzcy5sYXN0TmFtZSxcbiAgICBwaG9uZTogYWRkcmVzcy5waG9uZSxcbiAgICBwb3N0YWxfY29kZTogYWRkcmVzcy5wb3N0Q29kZSxcbiAgICBzdGF0ZTogc3RhdGVcbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvZGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIG1hcFRvU3RhdGUoY29kZSwgbmFtZSkge1xuICByZXR1cm4gKDAsIF91dGlscy5vbWl0TmlsKSh7XG4gICAgY29kZTogY29kZSxcbiAgICBuYW1lOiBuYW1lXG4gIH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gKiBAcGFyYW0ge0NyZWRpdENhcmR9IGRhdGEuY3JlZGl0Q2FyZFxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBtYXBUb0NyZWRpdENhcmQoX3JlZjIpIHtcbiAgdmFyIF9yZWYyJGNyZWRpdENhcmQgPSBfcmVmMi5jcmVkaXRDYXJkLFxuICAgIGNyZWRpdENhcmQgPSBfcmVmMiRjcmVkaXRDYXJkID09PSB2b2lkIDAgPyB7fSA6IF9yZWYyJGNyZWRpdENhcmQ7XG4gIHZhciB0aHJlZURTZWN1cmUgPSAoMCwgX3V0aWxzLm9taXROaWwpKGNyZWRpdENhcmQudGhyZWVEU2VjdXJlKTtcbiAgcmV0dXJuICgwLCBfdXRpbHMub21pdE5pbCkoe1xuICAgIGNhcmRob2xkZXJfbmFtZTogY3JlZGl0Q2FyZC5jYXJkaG9sZGVyTmFtZSxcbiAgICBudW1iZXI6IGNyZWRpdENhcmQubnVtYmVyLFxuICAgIG1vbnRoOiBjcmVkaXRDYXJkLm1vbnRoLFxuICAgIHllYXI6IGNyZWRpdENhcmQueWVhcixcbiAgICB2ZXJpZmljYXRpb25fY29kZTogY3JlZGl0Q2FyZC52ZXJpZmljYXRpb25Db2RlLFxuICAgIGlzc3VlX21vbnRoOiBjcmVkaXRDYXJkLmlzc3VlTW9udGgsXG4gICAgaXNzdWVfeWVhcjogY3JlZGl0Q2FyZC5pc3N1ZVllYXIsXG4gICAgaXNzdWVfbnVtYmVyOiBjcmVkaXRDYXJkLmlzc3VlTnVtYmVyLFxuICAgIHRyYWNrX2RhdGE6IGNyZWRpdENhcmQudHJhY2tEYXRhLFxuICAgIGlzX21hbnVhbF9lbnRyeTogY3JlZGl0Q2FyZC5pc01hbnVhbEVudHJ5LFxuICAgIGljY19kYXRhOiBjcmVkaXRDYXJkLmljY0RhdGEsXG4gICAgZmFsbGJhY2tfcmVhc29uOiBjcmVkaXRDYXJkLmZhbGxiYWNrUmVhc29uLFxuICAgIGlzX2NvbnRhY3RsZXNzOiBjcmVkaXRDYXJkLmlzQ29udGFjdGxlc3MsXG4gICAgZW5jcnlwdGVkX3Bpbl9jcnlwdG9ncmFtOiBjcmVkaXRDYXJkLmVuY3J5cHRlZFBpbkNyeXB0b2dyYW0sXG4gICAgZW5jcnlwdGVkX3Bpbl9rc246IGNyZWRpdENhcmQuZW5jcnlwdGVkUGluS3NuLFxuICAgIHRocmVlX2Rfc2VjdXJlOiB0aHJlZURTZWN1cmVcbiAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/bigpay-client/lib/store/v2/mappers/index.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/checkout-sdk/dist/esm/checkout-sdk.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@bigcommerce/checkout-sdk/dist/esm/checkout-sdk.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("var iframe_resizer__WEBPACK_IMPORTED_MODULE_0___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExtensionCommandType: () => (/* binding */ Zs),\n/* harmony export */   ExtensionQueryType: () => (/* binding */ Qs),\n/* harmony export */   createBodlService: () => (/* binding */ UC),\n/* harmony export */   createBraintreeAnalyticTracker: () => (/* binding */ MC),\n/* harmony export */   createCheckoutButtonInitializer: () => (/* binding */ Yw),\n/* harmony export */   createCheckoutService: () => (/* binding */ o_),\n/* harmony export */   createCurrencyService: () => (/* binding */ _C),\n/* harmony export */   createEmbeddedCheckoutMessenger: () => (/* binding */ hC),\n/* harmony export */   createLanguageService: () => (/* binding */ vC),\n/* harmony export */   createPayPalCommerceAnalyticTracker: () => (/* binding */ NC),\n/* harmony export */   createStepTracker: () => (/* binding */ kC),\n/* harmony export */   createStoredCardHostedFormService: () => (/* binding */ RC),\n/* harmony export */   createTimeout: () => (/* reexport safe */ _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createTimeout),\n/* harmony export */   embedCheckout: () => (/* binding */ oC)\n/* harmony export */ });\n/* harmony import */ var iframe_resizer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! iframe-resizer */ \"./node_modules/iframe-resizer/index.js\");\n/* harmony import */ var iframe_resizer_js_iframeResizer_contentWindow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! iframe-resizer/js/iframeResizer.contentWindow */ \"./node_modules/iframe-resizer/js/iframeResizer.contentWindow.js\");\n/* harmony import */ var iframe_resizer_js_iframeResizer_contentWindow__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(iframe_resizer_js_iframeResizer_contentWindow__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"./node_modules/@bigcommerce/request-sender/esm/index.js\");\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"./node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var _bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/data-store */ \"./node_modules/@bigcommerce/data-store/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm5/internal/observable/concat.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm5/internal/observable/throwError.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm5/internal/observable/merge.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm5/internal/observable/defer.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm5/internal/Observable.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm5/internal/observable/empty.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm5/internal/observable/from.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm5/internal/util/noop.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm5/internal/Subject.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm5/internal/observable/fromEvent.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/_esm5/internal/operators/catchError.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/_esm5/internal/operators/shareReplay.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/_esm5/internal/operators/switchMap.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/_esm5/internal/operators/take.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/_esm5/internal/operators/retryWhen.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/_esm5/internal/operators/delay.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/_esm5/internal/operators/filter.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/_esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/_esm5/internal/operators/distinctUntilChanged.js\");\n/* harmony import */ var _bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/memoize */ \"./node_modules/@bigcommerce/memoize/lib/index.js\");\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"./node_modules/@bigcommerce/form-poster/lib/index.js\");\n/* harmony import */ var _braintree_browser_detection__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @braintree/browser-detection */ \"./node_modules/@braintree/browser-detection/dist/browser-detection.js\");\n/* harmony import */ var local_storage_fallback__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! local-storage-fallback */ \"./node_modules/local-storage-fallback/lib/index.js\");\n/* harmony import */ var _bigcommerce_bigpay_client__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @bigcommerce/bigpay-client */ \"./node_modules/@bigcommerce/bigpay-client/lib/index.js\");\n/* harmony import */ var card_validator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! card-validator */ \"./node_modules/card-validator/index.js\");\n/* harmony import */ var card_validator__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(card_validator__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! query-string */ \"./node_modules/query-string/index.js\");\n/* harmony import */ var reselect__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! reselect */ \"./node_modules/reselect/es/index.js\");\n/* harmony import */ var reselect__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! reselect */ \"./node_modules/reselect/es/defaultMemoize.js\");\n/* harmony import */ var shallowequal__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! shallowequal */ \"./node_modules/shallowequal/index.js\");\n/* harmony import */ var shallowequal__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(shallowequal__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var intl_messageformat__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! intl-messageformat */ \"./node_modules/intl-messageformat/lib/src/core.js\");\n/* harmony import */ var messageformat__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! messageformat */ \"./node_modules/messageformat/messageformat.js\");\n/* harmony import */ var messageformat__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(messageformat__WEBPACK_IMPORTED_MODULE_14__);\nvar qe={785:t=>{t.exports=/*#__PURE__*/ (iframe_resizer__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (iframe_resizer__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(iframe_resizer__WEBPACK_IMPORTED_MODULE_0__, 2)))},939:e=>{e.exports=iframe_resizer_js_iframeResizer_contentWindow__WEBPACK_IMPORTED_MODULE_1__}},Ve={};function Ge(e){var t=Ve[e];if(void 0!==t)return t.exports;var n=Ve[e]={exports:{}};return qe[e](n,n.exports,Ge),n.exports}Ge.d=(e,t)=>{for(var n in t)Ge.o(t,n)&&!Ge.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Ge.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Ge.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var He={};Ge.r(He),Ge.d(He,{createAmazonPayV2CustomerStrategy:()=>dn,createApplePayCustomerStrategy:()=>Bn,createBigCommercePaymentsCustomerStrategy:()=>ui,createBigCommercePaymentsFastlaneCustomerStrategy:()=>Di,createBigCommercePaymentsPayLaterCustomerStrategy:()=>Ni,createBigCommercePaymentsVenmoCustomerStrategy:()=>Ri,createBoltCustomerStrategy:()=>Wi,createBraintreeFastlaneCustomerStrategy:()=>fr,createBraintreePaypalCreditCustomerStrategy:()=>ur,createBraintreePaypalCustomerStrategy:()=>dr,createBraintreeVisaCheckoutCustomerStrategy:()=>wr,createGooglePayAdyenV2CustomerStrategy:()=>Kr,createGooglePayAdyenV3CustomerStrategy:()=>Jr,createGooglePayAuthorizeDotNetCustomerStrategy:()=>Qr,createGooglePayBigCommercePaymentsCustomerStrategy:()=>To,createGooglePayBnzCustomerStrategy:()=>ao,createGooglePayBraintreeCustomerStrategy:()=>wo,createGooglePayCheckoutComCustomerStrategy:()=>io,createGooglePayCybersourceCustomerStrategy:()=>oo,createGooglePayOrbitalCustomerStrategy:()=>co,createGooglePayPayPalCommerceCustomerStrategy:()=>Eo,createGooglePayStripeCustomerStrategy:()=>yo,createGooglePayStripeUpeCustomerStrategy:()=>go,createGooglePayTdOnlineMartCustomerStrategy:()=>No,createGooglePayWorldpayAccessCustomerStrategy:()=>fo,createPayPalCommerceCreditCustomerStrategy:()=>ea,createPayPalCommerceCustomerStrategy:()=>Zo,createPayPalCommerceFastlaneCustomerStrategy:()=>Sa,createPayPalCommerceVenmoCustomerStrategy:()=>ia,createStripeLinkV2CustomerStrategy:()=>$a,createStripeUPECustomerStrategy:()=>xa});var $e={};Ge.r($e),Ge.d($e,{createAdyenV2PaymentStrategy:()=>Id,createAdyenV3PaymentStrategy:()=>Ad,createAffirmPaymentStrategy:()=>zd,createAfterpayPaymentStrategy:()=>jd,createAmazonPayV2PaymentStrategy:()=>Vd,createApplePayPaymentStrategy:()=>Wd,createBigCommercePaymentsAlternativeMethodsPaymentStrategy:()=>_c,createBigCommercePaymentsCreditCardsPaymentStrategy:()=>vc,createBigCommercePaymentsFastlanePaymentStrategy:()=>nc,createBigCommercePaymentsPayLaterPaymentStrategy:()=>ac,createBigCommercePaymentsPaymentStrategy:()=>Qd,createBigCommercePaymentsRatePayPayPaymentStrategy:()=>lc,createBigCommercePaymentsVenmoPaymentStrategy:()=>Ic,createBlueSnapDirectAPMPaymentStrategy:()=>Vc,createBlueSnapDirectCreditCardPaymentStrategy:()=>Uc,createBlueSnapV2PaymentStrategy:()=>Yc,createBoltPaymentStrategy:()=>tl,createBraintreeAchPaymentStrategy:()=>ol,createBraintreeCreditCardPaymentStrategy:()=>Ml,createBraintreeFastlanePaymentStrategy:()=>wl,createBraintreeLocalMethodsPaymentStrategy:()=>vl,createBraintreePaypalPaymentStrategy:()=>pl,createBraintreeVenmoPaymentStrategy:()=>bl,createCheckoutComAPMPaymentStrategy:()=>Zl,createCheckoutComCreditCardPaymentStrategy:()=>Gl,createCheckoutComFawryPaymentStrategy:()=>Bl,createCheckoutComIdealPaymentStrategy:()=>Yl,createCheckoutComSepaPaymentStrategy:()=>$l,createClearpayPaymentStrategy:()=>tu,createCreditCardPaymentStrategy:()=>nu,createCyberSourcePaymentStrategy:()=>vu,createCyberSourceV2PaymentStrategy:()=>Cu,createExternalPaymentStrategy:()=>bu,createGooglePayAdyenV2PaymentStrategy:()=>Tu,createGooglePayAdyenV3PaymentStrategy:()=>zu,createGooglePayAuthorizeNetPaymentStrategy:()=>Nu,createGooglePayBigCommercePaymentsPaymentStrategy:()=>Ju,createGooglePayBraintreePaymentStrategy:()=>ju,createGooglePayCheckoutComPaymentStrategy:()=>xu,createGooglePayCybersourcePaymentStrategy:()=>Fu,createGooglePayOrbitalPaymentStrategy:()=>Ru,createGooglePayPPCPPaymentStrategy:()=>Hu,createGooglePayStripePaymentStrategy:()=>Lu,createGooglePayTdOnlineMartPaymentStrategy:()=>Zu,createGooglePayWorldpayAccessPaymentStrategy:()=>Bu,createHummPaymentStrategy:()=>eh,createKlarnaPaymentStrategy:()=>ah,createKlarnaV2PaymentStrategy:()=>uh,createLegacyPaymentStrategy:()=>ph,createMolliePaymentStrategy:()=>Sh,createMonerisPaymentStrategy:()=>Ih,createNoPaymentStrategy:()=>Ph,createOfflinePaymentStrategy:()=>Eh,createOffsitePaymentStrategy:()=>Th,createPayPalCommerceAlternativeMethodsPaymentStrategy:()=>Gh,createPayPalCommerceCreditCardsPaymentStrategy:()=>Yh,createPayPalCommerceCreditPaymentStrategy:()=>Lh,createPayPalCommerceFastlanePaymentStrategy:()=>tp,createPayPalCommercePaymentStrategy:()=>xh,createPayPalCommerceRatePayPaymentStrategy:()=>Zh,createPayPalCommerceVenmoPaymentStrategy:()=>Uh,createPayPalProPaymentStrategy:()=>rp,createSagePayPaymentStrategy:()=>ap,createSezzlePaymentStrategy:()=>dp,createSquareV2PaymentStrategy:()=>gp,createStripeOCSPaymentStrategy:()=>xp,createStripeUPEPaymentStrategy:()=>Mp,createStripeV3PaymentStrategy:()=>Ep,createTDOnlineMartPaymentStrategy:()=>jp,createWorldpayAccessPaymentStrategy:()=>Hp,createZipPaymentStrategy:()=>Yp});var We,Ye,Ke={};function Je(e,t,n){return(i=t)&&i.type&&i.error?(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)(t),(0,rxjs__WEBPACK_IMPORTED_MODULE_17__.throwError)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(e,t.payload,n))):(0,rxjs__WEBPACK_IMPORTED_MODULE_17__.throwError)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(e,t,n));// removed by dead control flow\n{ var i; }}Ge.r(Ke),Ge.d(Ke,{createAmazonPayV2ButtonStrategy:()=>T_,createApplePayButtonStrategy:()=>x_,createBigCommercePaymentsAlternativeMethodsButtonStrategy:()=>G_,createBigCommercePaymentsButtonStrategy:()=>L_,createBigCommercePaymentsPayLaterButtonStrategy:()=>U_,createBigCommercePaymentsVenmoButtonStrategy:()=>W_,createBoltButtonStrategy:()=>K_,createBraintreePaypalButtonStrategy:()=>ew,createBraintreePaypalCreditButtonStrategy:()=>iw,createBraintreeVenmoButtonStrategy:()=>hw,createBraintreeVisaCheckoutButtonStrategy:()=>aw,createGooglePayAdyenV2ButtonStrategy:()=>fw,createGooglePayAdyenV3ButtonStrategy:()=>Sw,createGooglePayAuthorizeDotNetButtonStrategy:()=>_w,createGooglePayBigCommercePaymentsButtonStrategy:()=>vw,createGooglePayBraintreeButtonStrategy:()=>yw,createGooglePayCheckoutComButtonStrategy:()=>ww,createGooglePayCybersourceButtonStrategy:()=>Cw,createGooglePayOrbitalButtonStrategy:()=>Iw,createGooglePayPayPalCommerceButtonStrategy:()=>gw,createGooglePayStripeButtonStrategy:()=>bw,createGooglePayTdOnlineMartButtonStrategy:()=>Ow,createGooglePayWorldpayAccessButtonStrategy:()=>Pw,createPayPalCommerceAlternativeMethodsButtonStrategy:()=>Lw,createPayPalCommerceButtonStrategy:()=>kw,createPayPalCommerceCreditButtonStrategy:()=>Mw,createPayPalCommerceVenmoButtonStrategy:()=>xw,createPaypalExpressButtonStrategy:()=>Ww});class Ze extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentProviderCustomer=13]=\"MissingPaymentProviderCustomer\",e[e.MissingPaymentRedirectUrl=14]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=15]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=16]=\"MissingPaymentToken\",e[e.MissingShippingAddress=17]=\"MissingShippingAddress\"}(We||(We={}));class Qe extends Ze{constructor(e){super(function(e){switch(e){case We.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case We.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case We.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case We.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case We.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case We.MissingCheckoutConfig:case We.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case We.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case We.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case We.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case We.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case We.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case We.MissingPaymentProviderCustomer:return\"Unable to proceed because payment provider customer is unavailable.\";case We.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}!function(e){e.UpdateBillingAddressRequested=\"UPDATE_BILLING_ADDRESS_REQUESTED\",e.UpdateBillingAddressSucceeded=\"UPDATE_BILLING_ADDRESS_SUCCEEDED\",e.UpdateBillingAddressFailed=\"UPDATE_BILLING_ADDRESS_FAILED\",e.ContinueAsGuestRequested=\"CONTINUE_AS_GUEST_REQUESTED\",e.ContinueAsGuestSucceeded=\"CONTINUE_AS_GUEST_SUCCEEDED\",e.ContinueAsGuestFailed=\"CONTINUE_AS_GUEST_FAILED\"}(Ye||(Ye={}));class Xe extends Ze{constructor(e){super(e||\"Unable to continue as a guest because the customer is already signed in.\"),this.name=\"UnableToContinueAsGuestError\",this.type=\"unable_to_continue_as_guest\"}}var et;class tt{constructor(e,t){this._requestSender=e,this._subscriptionActionCreator=t}continueAsGuest(e,t){return n=>{const i=n.getState(),r=i.checkout.getCheckout();if(!r)throw new Qe(We.MissingCheckout);const o=i.customer.getCustomer();if(o&&!o.isGuest)throw new Xe;const a=i.billingAddress.getBillingAddress();let s;if(a){const{country:t}=a,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(a,[\"country\"]);s=Object.assign(Object.assign({},n),e)}else s=e;const d=!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEmpty)(a);return (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.merge)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ye.ContinueAsGuestRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{return e=this,n=void 0,o=function*(){const{body:e}=yield this._createOrUpdateBillingAddress(r.id,s,d,t);return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ye.ContinueAsGuestSucceeded,e)},new((i=void 0)||(i=Promise))(function(t,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function s(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((o=o.apply(e,n||[])).next())});// removed by dead control flow\n{ var e, n, i, o; }})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Ye.ContinueAsGuestFailed,e))),this._updateCustomerConsent(e,t))}}updateAddress(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{const r=n.getState(),o=r.checkout.getCheckout();if(!o)throw new Qe(We.MissingCheckout);i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ye.UpdateBillingAddressRequested));const a=r.billingAddress.getBillingAddress(),s=!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEmpty)(a),d=Object.assign(Object.assign({},e),{email:void 0===e.email&&a?a.email:e.email});a&&a.id&&(d.id=a.id),this._createOrUpdateBillingAddress(o.id,d,s,t).then(({body:e})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ye.UpdateBillingAddressSucceeded,e)),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Ye.UpdateBillingAddressFailed,e))})})}_updateCustomerConsent({email:e,acceptsAbandonedCartEmails:t,acceptsMarketingNewsletter:n},i){return null==t&&null==n?(0,rxjs__WEBPACK_IMPORTED_MODULE_22__.empty)():this._subscriptionActionCreator.updateSubscriptions({email:e,acceptsMarketingNewsletter:n||!1,acceptsAbandonedCartEmails:t||!1},i)}_createOrUpdateBillingAddress(e,t,n,i){return n?this._requestSender.updateAddress(e,t,i):this._requestSender.createAddress(e,t,i)}}class nt extends Ze{constructor(e){super(e||\"Your checkout could not be processed because your cart is empty. Please add items to your cart and try again.\"),this.name=\"EmptyCartError\",this.type=\"empty_cart\"}}!function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"}(et||(et={}));const it=et,rt={\"X-Checkout-SDK-Version\":\"1.803.0\"};const ot={include:[\"cart.lineItems.physicalItems.options\",\"cart.lineItems.digitalItems.options\",\"customer\",\"promotions.banners\"].join(\",\")};class at{constructor(e){this._requestSender=e}createAddress(e,t,{timeout:n}={}){const i=`/api/storefront/checkouts/${e}/billing-address`,r=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.post(i,{body:t,params:ot,headers:r,timeout:n}).catch(e=>{if(\"empty_cart\"===e.body.type)throw new nt;throw e})}updateAddress(e,t,{timeout:n}={}){const{id:i}=t,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,[\"id\"]),o=`/api/storefront/checkouts/${e}/billing-address/${i}`,a=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.put(o,{params:ot,body:r,headers:a,timeout:n}).catch(e=>{if(\"empty_cart\"===e.body.type)throw new nt;throw e})}}var st,dt;function ct(e,t){const n=(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createDataStore)((e,t)=>t.type===st.Synchronize?t.payload:e,e.getState(),{stateTransformer:t});return e.subscribe(e=>{n.dispatch((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(st.Synchronize,e))},{initial:!1}),n}!function(e){e.Synchronize=\"SYNCHRONIZE\"}(st||(st={})),function(e){e.ClearError=\"CLEAR_ERROR\"}(dt||(dt={}));class lt{clearError(e){return{type:dt.ClearError,payload:e}}}function ut(){try{return\"production\"}catch(e){return\"development\"}}class ht{constructor(e){this._console=e}log(...e){this._logToConsole(\"log\",...e)}info(...e){this._logToConsole(\"info\",...e)}warn(...e){this._logToConsole(\"warn\",...e)}error(...e){this._logToConsole(\"error\",...e)}debug(...e){this._logToConsole(\"debug\",...e)}_logToConsole(e,...t){this._console&&this._console[e]&&this._console[e].call(this._console,...t)}}class pt{log(){}info(){}warn(){}error(){}debug(){}}const mt=function(e=!0){return e?new ht(console):new pt}(\"test\"!==ut());function yt(){return mt}function gt(e,t,n){const i=new WeakMap;function r(e){return(...n)=>{const r=n[n.length-1],{useCache:o}=(a=r)&&\"boolean\"==typeof a.useCache?r:{useCache:!1};var a;if(!o)return e.call(this,...n);const s=i.get(this)||{};var d;return i.get(this)||i.set(this,s),s[t]||(s[t]=(d=e,(0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoize)(function(...e){const t=d.call(this,...e);return t instanceof rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable?(0,rxjs__WEBPACK_IMPORTED_MODULE_23__.from)(t).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.shareReplay)()):\"function\"==typeof t?(0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoize)(e=>(0,rxjs__WEBPACK_IMPORTED_MODULE_23__.from)(t(e)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.shareReplay)()),{isEqual:lodash__WEBPACK_IMPORTED_MODULE_5__.isEqual}):t},{isEqual:lodash__WEBPACK_IMPORTED_MODULE_5__.isEqual}))),s[t].call(this,...n)}}return{get(){if(\"function\"!=typeof n.value)throw new Error(\"Decorator should be used in functions\");const e=r.call(this,n.value);return Object.defineProperty(this,t,Object.assign(Object.assign({},n),{value:e})),e}}}var vt;!function(e){e.LoadConfigRequested=\"LOAD_CONFIG_REQUESTED\",e.LoadConfigSucceeded=\"LOAD_CONFIG_SUCCEEDED\",e.LoadConfigFailed=\"LOAD_CONFIG_FAILED\"}(vt||(vt={}));class ft{constructor(e){this._configRequestSender=e}loadConfig(e){return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(t=>{t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(vt.LoadConfigRequested)),this._configRequestSender.loadConfig(e).then(e=>{t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(vt.LoadConfigSucceeded,e.body)),t.complete()}).catch(e=>{t.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(vt.LoadConfigFailed,e))})})}}!function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);o>3&&a&&Object.defineProperty(t,n,a)}([gt],ft.prototype,\"loadConfig\",null);const St={body:{},headers:{},status:0};class _t extends Ze{constructor(e,{message:t,errors:n}={}){const{body:i,headers:r,status:o}=e||St;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=i,this.headers=r,this.status=o,this.errors=n||[]}}class wt extends _t{constructor(e){super(e,{message:e.body.title}),this.name=\"CheckoutNotAvailableError\",this.type=\"checkout_not_available\"}}const Ct=\"This API endpoint is for internal use only and may change in the future\";class It{constructor(e){this._requestSender=e}loadConfig({timeout:e,params:t}={}){return this._requestSender.get(\"/api/storefront/checkout-settings\",{timeout:e,headers:Object.assign({Accept:it.JsonV1,\"X-API-INTERNAL\":Ct},rt),params:t}).catch(e=>{if(e.status>=400&&e.status<500)throw new wt(e);throw e})}}var bt;!function(e){e.ApplyCouponRequested=\"APPLY_COUPON_REQUESTED\",e.ApplyCouponSucceeded=\"APPLY_COUPON_SUCCEEDED\",e.ApplyCouponFailed=\"APPLY_COUPON_FAILED\",e.RemoveCouponRequested=\"REMOVE_COUPON_REQUESTED\",e.RemoveCouponSucceeded=\"REMOVE_COUPON_SUCCEEDED\",e.RemoveCouponFailed=\"REMOVE_COUPON_FAILED\"}(bt||(bt={}));class Pt{constructor(e){this._couponRequestSender=e}applyCoupon(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{const r=n.getState().checkout.getCheckout();if(!r)throw new Qe(We.MissingCheckout);i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(bt.ApplyCouponRequested)),this._couponRequestSender.applyCoupon(r.id,e,t).then(({body:e})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(bt.ApplyCouponSucceeded,e)),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(bt.ApplyCouponFailed,e))})})}removeCoupon(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{const r=n.getState().checkout.getCheckout();if(!r)throw new Qe(We.MissingCheckout);i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(bt.RemoveCouponRequested)),this._couponRequestSender.removeCoupon(r.id,e,t).then(({body:e})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(bt.RemoveCouponSucceeded,e)),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(bt.RemoveCouponFailed,e))})})}}const Ot=[\"cart.lineItems.physicalItems.options\",\"cart.lineItems.digitalItems.options\",\"customer\",\"customer.customerGroup\",\"payments\",\"promotions.banners\"];var Et,At,kt,Tt;function Dt(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.uniq)(e).join(\",\")}!function(e){e.AvailableShippingOptions=\"consignments.availableShippingOptions\",e.PhysicalItemsCategoryNames=\"cart.lineItems.physicalItems.categoryNames\",e.DigitalItemsCategoryNames=\"cart.lineItems.digitalItems.categoryNames\"}(Et||(Et={}));class Mt{constructor(e){this._requestSender=e}applyCoupon(e,t,{timeout:n}={}){const i=`/api/storefront/checkouts/${e}/coupons`,r=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.post(i,{headers:r,timeout:n,params:{include:Dt([...Ot,Et.AvailableShippingOptions])},body:{couponCode:t}}).catch(e=>{if(\"empty_cart\"===e.body.type)throw new nt;throw e})}removeCoupon(e,t,{timeout:n}={}){const i=`/api/storefront/checkouts/${e}/coupons/${t}`,r=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.delete(i,{headers:r,timeout:n,params:{include:Dt([...Ot,Et.AvailableShippingOptions])}}).catch(e=>{if(\"empty_cart\"===e.body.type)throw new nt;throw e})}}!function(e){e.ApplyGiftCertificateRequested=\"APPLY_GIFT_CERTIFICATE_REQUESTED\",e.ApplyGiftCertificateSucceeded=\"APPLY_GIFT_CERTIFICATE_SUCCEEDED\",e.ApplyGiftCertificateFailed=\"APPLY_GIFT_CERTIFICATE_FAILED\",e.RemoveGiftCertificateRequested=\"REMOVE_GIFT_CERTIFICATE_REQUESTED\",e.RemoveGiftCertificateSucceeded=\"REMOVE_GIFT_CERTIFICATE_SUCCEEDED\",e.RemoveGiftCertificateFailed=\"REMOVE_GIFT_CERTIFICATE_FAILED\"}(At||(At={}));class zt{constructor(e){this._giftCertificateRequestSender=e}applyGiftCertificate(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{const r=n.getState().checkout.getCheckout();if(!r)throw new Qe(We.MissingCheckout);i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(At.ApplyGiftCertificateRequested)),this._giftCertificateRequestSender.applyGiftCertificate(r.id,e,t).then(({body:e})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(At.ApplyGiftCertificateSucceeded,e)),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(At.ApplyGiftCertificateFailed,e))})})}removeGiftCertificate(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{const r=n.getState().checkout.getCheckout();if(!r)throw new Qe(We.MissingCheckout);i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(At.RemoveGiftCertificateRequested)),this._giftCertificateRequestSender.removeGiftCertificate(r.id,e,t).then(({body:e})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(At.RemoveGiftCertificateSucceeded,e)),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(At.RemoveGiftCertificateFailed,e))})})}}class Nt{constructor(e){this._requestSender=e}applyGiftCertificate(e,t,{timeout:n}={}){const i=`/api/storefront/checkouts/${e}/gift-certificates`,r=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.post(i,{headers:r,timeout:n,params:{include:Dt(Ot)},body:{giftCertificateCode:t}}).catch(e=>{if(\"empty_cart\"===e.body.type)throw new nt;throw e})}removeGiftCertificate(e,t,{timeout:n}={}){const i=`/api/storefront/checkouts/${e}/gift-certificates/${t}`,r=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.delete(i,{headers:r,timeout:n,params:{include:Dt(Ot)}}).catch(e=>{if(\"empty_cart\"===e.body.type)throw new nt;throw e})}}function xt(e){return e&&\"resolveIds\"in e}class Ft extends Ze{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class Rt{constructor(e){var t,n,i;this._factories={},this._instances={},this._defaultToken=null!==(t=null==e?void 0:e.defaultToken)&&void 0!==t?t:\"default\",this._useFallback=null===(n=null==e?void 0:e.useFallback)||void 0===n||n,this._tokenResolver=null!==(i=null==e?void 0:e.tokenResolver)&&void 0!==i?i:e=>e}get(e,t){try{return this._getInstance(e||this._defaultToken,t||e||this._defaultToken)}catch(e){if(!this._useFallback)throw e;return this._getInstance(this._defaultToken,t||this._defaultToken)}}register(e,t){if(this._hasFactory(e))throw new Ft(`'${e}' is already registered.`);this._factories[e]=t}_hasFactory(e){return!!this._factories[e]}_hasInstance(e){return!!this._instances[e]}_getInstance(e,t){if(!this._hasInstance(t)){const n=this._tokenResolver(e,Object.keys(this._factories)),i=n&&this._factories[n];if(!i)throw new Ft(`'${e}' is not registered.`);this._instances[t]=i()}return this._instances[t]}}class Lt{constructor(e=!1){this._useFallback=e,this._registry=new Rt({tokenResolver:this._resolveToken.bind(this),useFallback:this._useFallback})}get(e){return this._registry.get(this._encodeToken(e))}register(e,t){this._registry.register(this._encodeToken(e),t)}_encodeToken(e){return btoa(JSON.stringify(e))}_decodeToken(e){return JSON.parse(atob(e))}_resolveToken(e,t){var n;const i=this._decodeToken(e),r=[];t.forEach(e=>{const t=this._decodeToken(e),n={token:e,matches:0,default:!1};for(const[e,r]of Object.entries(t)){if(e in i&&i[e]!==r){n.matches=0;break}e in i&&i[e]===r&&n.matches++,\"default\"===e&&!0===r&&(n.default=!0)}r.push(n)});const o=r.sort((e,t)=>t.matches-e.matches).filter(e=>e.matches>0);o.length>1&&o[0].matches===o[1].matches&&\"development\"===ut()&&yt().warn(\"The provided query matches at least two strategies with the same specificity. This warning can be resolved by making their resolve ID more specific.\");const a=o[0];if(a&&a.token)return a.token;if(this._useFallback){const e=null===(n=r.find(e=>e.default))||void 0===n?void 0:n.token;if(e)return e}throw new Error(\"Unable to resolve to a registered token with the provided token.\")}}class Bt extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(kt||(kt={}));class jt extends Bt{constructor(e){super(function(e){switch(e){case kt.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case kt.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case kt.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case kt.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case kt.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case kt.MissingCheckoutConfig:case kt.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case kt.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case kt.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case kt.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case kt.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case kt.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case kt.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}function Ut(e){return t=e.lineItems.physicalItems.filter(e=>!e.addedByPromotion),(0,lodash__WEBPACK_IMPORTED_MODULE_5__.reduce)(t,(e,t)=>e+t.quantity,0);// removed by dead control flow\n{ var t; }}function qt(e,t){if(null==e)throw t?t():new Error(\"An unexpected error has occurred.\");return e}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(Tt||(Tt={}));class Vt extends Bt{constructor(e){super(function(e){switch(e){case Tt.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case Tt.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case Tt.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case Tt.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}const Gt={de:\"eu\",jp:\"fe\",uk:\"eu\",us:\"na\"};var Ht,$t,Wt,Yt,Kt,Jt;!function(e){e.en_US=\"en_US\",e.en_GB=\"en_GB\",e.de_DE=\"de_DE\",e.fr_FR=\"fr_FR\",e.it_IT=\"it_IT\",e.es_ES=\"es_ES\",e.ja_JP=\"ja_JP\"}(Ht||(Ht={})),function(e){e.Home=\"Home\",e.Product=\"Product\",e.Cart=\"Cart\",e.Checkout=\"Checkout\",e.Other=\"Other\"}($t||($t={})),function(e){e.USD=\"USD\",e.EUR=\"EUR\",e.GBP=\"GBP\",e.JPY=\"JPY\"}(Wt||(Wt={})),function(e){e.PayAndShip=\"PayAndShip\",e.PayOnly=\"PayOnly\"}(Yt||(Yt={})),function(e){e.Gold=\"Gold\",e.LightGray=\"LightGray\",e.DarkGray=\"DarkGray\"}(Kt||(Kt={})),function(e){e.C0001=\"C0001\"}(Jt||(Jt={}));var Zt=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Qt{constructor(e){this.amazonPayV2ScriptLoader=e}initialize(e){return Zt(this,void 0,void 0,function*(){this.amazonPayV2SDK=yield this.amazonPayV2ScriptLoader.load(e),this.buttonParentContainer=this.buttonParentContainer||this.createAmazonPayButtonParentContainer()})}deinitialize(){var e;return this.amazonPayV2Button=void 0,null===(e=this.buttonParentContainer)||void 0===e||e.remove(),this.buttonParentContainer=void 0,this.amazonPayV2SDK=void 0,Promise.resolve()}bindButton(e,t,n){this.getAmazonPayV2SDK().Pay.bindChangeAction(`#${e}`,{amazonCheckoutSessionId:t,changeAction:n})}createButton(e,t){this.amazonPayV2Button=this.getAmazonPayV2SDK().Pay.renderButton(`#${e}`,t)}prepareCheckout(e){const t=this.prepareRequestConfig(e);this.getAmazonPayV2Button().onClick(()=>{this.getAmazonPayV2Button().initCheckout(t)})}prepareCheckoutWithCreationRequestConfig(e){this.getAmazonPayV2Button().onClick(()=>Zt(this,void 0,void 0,function*(){const t=yield e();if(t){const e=this.prepareRequestConfig(t.createCheckoutSessionConfig,t.estimatedOrderAmount,t.productType);this.getAmazonPayV2Button().initCheckout(e)}}))}signout(){return Zt(this,void 0,void 0,function*(){return this.amazonPayV2SDK&&this.amazonPayV2SDK.Pay.signout(),Promise.resolve()})}renderAmazonPayButton({buttonColor:e,checkoutState:t,containerId:n,decoupleCheckoutInitiation:i=!1,methodId:r,options:o,placement:a,isButtonMicroTextDisabled:s=!1}){const d=document.querySelector(`#${n}`);if(!d)return;const{id:c}=d.appendChild(this.getButtonParentContainer());o&&s&&(o.design=Jt.C0001);const l=null!=o?o:this.getAmazonPayV2ButtonOptions(t,r,a,i,e);return this.createButton(c,l),this.getButtonParentContainer()}updateBuyNowFlowFlag(e){this.isBuyNowFlow=Boolean(e)}isPh4Enabled(e,t){const n=!!e[\"PROJECT-3483.amazon_pay_ph4\"],i=!!e[\"INT-6885.amazon_pay_ph4_us_only\"];return n&&i?\"US\"===t:n}prepareRequestConfig(e,t,n){const{publicKeyId:i}=e,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"publicKeyId\"]);return Object.assign(Object.assign({createCheckoutSessionConfig:this.isEnvironmentSpecific(i)?r:e},t&&{estimatedOrderAmount:t}),n&&{productType:n})}createAmazonPayButtonParentContainer(){const e=Math.random().toString(16).substr(-4),t=document.createElement(\"div\");return t.id=`amazonpay_button_parent_container_${e}`,t}getAmazonPayV2ButtonOptions(e,t,n,i=!1,r=Kt.Gold){var o;const{getCart:a,getCheckout:s,getStoreConfigOrThrow:d,getPaymentMethodOrThrow:c}=this.getCheckoutState(e),{config:{merchantId:l,testMode:u},initializationData:h}=c(t);if(!h)throw new jt(kt.MissingPaymentMethod);const{checkoutLanguage:p,checkoutSessionMethod:m,createCheckoutSessionConfig:y,extractAmazonCheckoutSessionId:g,ledgerCurrency:v,publicKeyId:f=\"\",isButtonMicroTextDisabled:S}=h;if(!l||!v)throw new jt(kt.MissingPaymentMethod);const _=Object.assign({merchantId:l,ledgerCurrency:v,checkoutLanguage:p,placement:n,buttonColor:r},S?{design:Jt.C0001}:{});if(this.isBuyNowFlow)return Object.assign(Object.assign({},_),{sandbox:!!u});const w=a();_.productType=w&&0===Ut(w)?Yt.PayOnly:Yt.PayAndShip;const{checkoutSettings:{features:C},storeProfile:{shopPath:I,storeCountryCode:b}}=d();if(this.isPh4Enabled(C,b)){if(!y)throw new jt(kt.MissingPaymentMethod);const e=null===(o=s())||void 0===o?void 0:o.outstandingBalance.toString(),t=null==w?void 0:w.currency.code,n=Object.assign({},_);let r;return this.isEnvironmentSpecific(f)?(n.publicKeyId=f,r=y):(n.sandbox=!!u,r=Object.assign(Object.assign({},y),{publicKeyId:f})),i||(n.createCheckoutSessionConfig=r),e&&t&&(n.estimatedOrderAmount={amount:e,currencyCode:t}),n}const P={method:m,url:`${I}/remote-checkout/${t}/payment-session`,extractAmazonCheckoutSessionId:g};return Object.assign(Object.assign({},_),{createCheckoutSession:P,sandbox:!!u})}isEnvironmentSpecific(e){return/^(SANDBOX|LIVE)/.test(e)}getAmazonPayV2SDK(){return this.getOrThrow(this.amazonPayV2SDK)}getButtonParentContainer(){return this.getOrThrow(this.buttonParentContainer)}getAmazonPayV2Button(){return this.getOrThrow(this.amazonPayV2Button)}getOrThrow(e){return qt(e,()=>new Vt(Tt.PaymentNotInitialized))}getCheckoutState(e){return\"object\"==typeof(t=e)&&null!==t&&\"cart\"in t&&\"checkout\"in t&&\"config\"in t&&\"paymentMethods\"in t?{getCart:e.cart.getCart,getCheckout:e.checkout.getCheckout,getStoreConfigOrThrow:e.config.getStoreConfigOrThrow,getPaymentMethodOrThrow:t=>e.paymentMethods.getPaymentMethodOrThrow(t)}:e;// removed by dead control flow\n{ var t; }}}class Xt extends Bt{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class en{constructor(e,t=window){this.scriptLoader=e,this.windowWithAmazonPay=t}load(e){return t=this,n=void 0,r=function*(){const{initializationData:t}=e,n=(null==t?void 0:t.region)||\"us\",i=Gt[n];if(yield this.scriptLoader.loadScript(`https://static-${i}.payments-amazon.com/checkout.js`),!this.windowWithAmazonPay.amazon)throw new Xt;return this.windowWithAmazonPay.amazon},new((i=void 0)||(i=Promise))(function(e,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((r=r.apply(t,n||[])).next())});// removed by dead control flow\n{ var t, n, i, r; }}}function tn(){return new Qt(new en((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)()))}function nn(e,t){return Object.assign(e,{resolveIds:t})}class rn extends Bt{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class on extends Bt{constructor(e){super(e||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var an=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class sn{constructor(e,t){this.paymentIntegrationService=e,this.amazonPayV2PaymentProcessor=t}initialize(e){return an(this,void 0,void 0,function*(){const{methodId:t,amazonpay:n}=e;if(!t||!(null==n?void 0:n.container))throw new rn('Unable to proceed because \"methodId\" or \"containerId\" argument is not provided.');let i;try{i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t)}catch(e){yield this.paymentIntegrationService.loadPaymentMethod(t),i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t)}yield this.amazonPayV2PaymentProcessor.initialize(i),this.amazonPayV2PaymentProcessor.renderAmazonPayButton({checkoutState:this.paymentIntegrationService.getState(),containerId:n.container,methodId:t,placement:$t.Checkout})})}deinitialize(){return an(this,void 0,void 0,function*(){yield this.amazonPayV2PaymentProcessor.deinitialize()})}signIn(){throw new on('In order to sign in via Amazon, the shopper must click on \"Amazon Pay\" button.')}signOut(e){return an(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getPaymentId();t&&(yield this.amazonPayV2PaymentProcessor.signout(),yield this.paymentIntegrationService.remoteCheckoutSignOut(t.providerId,e))})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}}const dn=nn(e=>new sn(e,tn()),[{id:\"amazonpay\"}]);function cn(e,t){var n;return null===(n=e[t])||void 0===n||n}const ln=\"3.128.0\",un=\"3.123.2\",hn=\"3.106.0\";class pn{constructor(e){this.paymentIntegrationService=e,this.braintreeWindow=window}getSDKVersion(){const e=this.paymentIntegrationService.getState().getStoreConfig(),t=(null==e?void 0:e.checkoutSettings.features)||{};return this.getPreloadedSDKVersion()||(cn(t,\"PAYPAL-5809.braintree_hosted_fields_fix_version\")?ln:cn(t,\"PAYPAL-5636.update_braintree_sdk_version\")?un:hn)}getPreloadedSDKVersion(){const e=this.braintreeWindow.braintree;if(e){const t=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(Object.values(e),e=>!!e.VERSION);return null==t?void 0:t.VERSION}}}class mn extends Bt{constructor(e){super(e||\"Unsupported browser error\"),this.name=\"UnsupportedBrowserError\",this.type=\"unsupported_browser\"}}var yn,gn,vn,fn,Sn,_n,wn;function Cn(e){return Boolean(\"object\"==typeof e&&null!==e&&(\"type\"in e||\"message\"in e||\"code\"in e))}!function(e){e.ESTIMATED=\"ESTIMATED\",e.FINAL=\"FINAL\",e.NOT_CURRENTLY_KNOWN=\"NOT_CURRENTLY_KNOWN\"}(yn||(yn={})),function(e){e.Completed=\"COMPLETED\",e.Pending=\"PENDING\",e.Failed=\"FAILED\"}(gn||(gn={})),function(e){e.TRUSTLY=\"trustly\"}(vn||(vn={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"cancelled\",e.UNRECOGNIZED=\"unrecognized\"}(fn||(fn={})),function(e){e.Customer=\"CUSTOMER\",e.Merchant=\"MERCHANT\",e.Network=\"NETWORK\",e.Internal=\"INTERNAL\",e.Unknown=\"UNKNOWN\"}(Sn||(Sn={})),function(e){e.KountNotEnabled=\"DATA_COLLECTOR_KOUNT_NOT_ENABLED\"}(_n||(_n={})),function(e){e.Visa=\"visa\",e.Mastercard=\"mastercard\",e.AmericanExpress=\"american-express\",e.DinersClub=\"diners-club\",e.Discover=\"discover\",e.Jcb=\"jcb\",e.UnionPay=\"union-pay\",e.Maestro=\"maestro\",e.Elo=\"elo\",e.Mir=\"mir\",e.Hiper=\"hiper\",e.Hipercard=\"hipercard\"}(wn||(wn={}));var In,bn,Pn,On=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class En{constructor(e){this.braintreeScriptLoader=e}initialize(e){this.setClientToken(e)}deinitialize(){return On(this,void 0,void 0,function*(){yield this.teardownModule(this.dataCollector),this.dataCollector=void 0})}getClient(){return On(this,void 0,void 0,function*(){if(!this.client){const e=this.getClientTokenOrThrow(),t=yield this.braintreeScriptLoader.loadClient();this.client=yield t.create({authorization:e})}return this.client})}getDataCollectorOrThrow(e){return On(this,void 0,void 0,function*(){const t={deviceData:void 0,teardown:()=>Promise.resolve()};if(!this.dataCollector)try{const t=yield this.getClient(),n=yield this.braintreeScriptLoader.loadDataCollector(),i=Object.assign({client:t,kount:!0},e);this.dataCollector=yield n.create(i)}catch(e){if(Cn(e)&&e.code===_n.KountNotEnabled)return t;throw e}return this.dataCollector})}getBraintreeGooglePayment(){return On(this,void 0,void 0,function*(){if(!this.googlePayment){const[e,t]=yield Promise.all([this.getClient(),this.braintreeScriptLoader.loadGooglePayment()]);this.googlePayment=yield t.create({client:e})}return this.googlePayment})}getBraintreeThreeDS(){return On(this,void 0,void 0,function*(){if(!this.threeDS){const[e,t]=yield Promise.all([this.getClient(),this.braintreeScriptLoader.load3DS()]);this.threeDS=yield t.create({client:e,version:2})}return this.threeDS})}getBraintreeLocalPayment(e){return On(this,void 0,void 0,function*(){if(!this.braintreeLocalPayment){const[t,n]=yield Promise.all([this.getClient(),this.braintreeScriptLoader.loadLocalPayment()]);this.braintreeLocalPayment=yield new Promise((i,r)=>{n.create({client:t,merchantAccountId:e},(e,t)=>{e&&r(e),i(t)})})}return this.braintreeLocalPayment})}getUsBankAccount(){return On(this,void 0,void 0,function*(){if(!this.usBankAccount){const e=yield this.getClient(),t=yield this.braintreeScriptLoader.loadUsBankAccount();this.usBankAccount=yield t.create({client:e})}return this.usBankAccount})}getBraintreeVisaCheckout(){return this.visaCheckout||(this.visaCheckout=Promise.all([this.getClient(),this.braintreeScriptLoader.loadVisaCheckout()]).then(([e,t])=>t.create({client:e}))),this.visaCheckout}getVisaCheckoutSdk(e){return On(this,void 0,void 0,function*(){return this.visaCheckoutSDK||(this.visaCheckoutSDK=yield this.braintreeScriptLoader.loadVisaCheckoutSdk(e)),this.visaCheckoutSDK})}getVenmoCheckoutOrThrow(){return On(this,void 0,void 0,function*(){if(!this.braintreeVenmo){const e=yield this.getClient(),t=yield this.braintreeScriptLoader.loadVenmoCheckout(),n={client:e,allowDesktop:!0,paymentMethodUsage:\"multi_use\"},i=yield t.create(n);if(!i.isBrowserSupported())throw new mn;this.braintreeVenmo=i}return this.braintreeVenmo})}setClientToken(e){this.clientToken=e}getClientTokenOrThrow(){if(!this.clientToken)throw new Vt(Tt.PaymentNotInitialized);return this.clientToken}teardownModule(e){return e?e.teardown():Promise.resolve()}}!function(e){e.Sandbox=\"sandbox\",e.Production=\"production\"}(In||(In={})),function(e){e.Client=\"client\",e.DataCollector=\"dataCollector\",e.Fastlane=\"fastlane\",e.GooglePayment=\"googlePayment\",e.HostedFields=\"hostedFields\",e.LocalPayment=\"localPayment\",e.Paypal=\"paypal\",e.PaypalCheckout=\"paypalCheckout\",e.ThreeDSecure=\"threeDSecure\",e.UsBankAccount=\"usBankAccount\",e.Venmo=\"venmo\",e.VisaCheckout=\"visaCheckout\"}(bn||(bn={})),function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\"}(Pn||(Pn={}));const An={[hn]:{[bn.Client]:\"sha384-26BXDNnJI23JYRyFBj4xe4sVNrUSSiSSu11kxVXNM/vEPONm4LuL00w6ZaTgQewt\",[bn.PaypalCheckout]:\"sha384-B+vzbZwnQtzWBthpkT4TXKUibO65tyeK7eCxSvpblgprTep2+IAXB2Cxxjrn710O\",[bn.Paypal]:\"sha384-uyAGL1/3+XJAHnGoNy4eCoXdzJ4f7Ilzp+6w9PNnEjs6DCCz9WMyJjMN1gzc78U+\",[bn.LocalPayment]:\"sha384-LIvOEMkIVEwVuYBdVOQc1AC5YbGGlwyfUheS0ACK218D2STuVYQlZ4FyEPowAEfT\",[bn.DataCollector]:\"sha384-1bo9JDz+Kscthc085cCKWur8CLwUoBpoNyxsDi7932mCl0zFq3A5mv+FQLw9GHpV\",[bn.UsBankAccount]:\"sha384-xmHBVaU+w74V+OebD3AaPONFxHUGMf+QRs8G/JxVPXNNP7MDa2jL0ICWHIe2tTfJ\",[bn.GooglePayment]:\"sha384-WKDJl8mqoP82qZpMGH6AbZxnvXnSW8ILV4M64CyMLiugGMwu7LyP89wjCkHqsiBe\",[bn.ThreeDSecure]:\"sha384-VQUlpGHzsGvs5XeiGFip7EXRsvoHWEXDVmgCacfbyieZI9mdBOqq3NSoyo28OCOB\",[bn.VisaCheckout]:\"sha384-yx7mADfzTN0T43Q6rlH49LIg1EJ0iUZgBp/EczX9LXsUGkySgxrD+nWHQRBkyfoT\",[bn.Venmo]:\"sha384-QX4rPjoj1ZDhuG0aSyKs56lEKDqTMTcjYxUHY1SzO5VZDsqIE2NTkqot7KNSCyov\",[bn.HostedFields]:\"sha384-VvYBACfSu0Cr/J32uKmxG7AXcNOJE1AzIIL3kbikyS7YKp5fz5Is+NzNP/lyauNy\",[bn.Fastlane]:\"sha384-9oGsZMRZwpGtDEDYa/dFt76dECqj1xAni9gIKgc3KfMIiRnR73nEeeUDLiBzxhFa\"},[un]:{[bn.Client]:\"sha384-o+nbQGcwNNxIBeXeu3+XmbSq+Cg8R3EN3N0l5hXCgMMU2RGY0t1z0LroSEIAbfAO\",[bn.PaypalCheckout]:\"sha384-WrfbWPBS4mH86GAoycPSgiH8hQ8KH7A67C93Hjhunv/xhNk2YpBn3wbFA4Fhg9U/\",[bn.Paypal]:\"sha384-VF389nvvrRUgDsTXMxTYORDtVegB9IQa3Cxr//DyJnLYnz8/X8VCzEvck2c+Megt\",[bn.LocalPayment]:\"sha384-tZKx2rEQbfmZpoPSY5VPmJEhaq4X75dLvwHMs3VE9U+C8lPyw+hWTIL1+GPvWCIH\",[bn.DataCollector]:\"sha384-E6k3wOpP7syCDDwaRDLF06942Y00NkbwJvWi2OQXwwKzGwG5fd3E7RFUvCCecfvO\",[bn.UsBankAccount]:\"sha384-258FON8LZGG0W9Qaz4Jij83pZHu30YnKjJA7gNulLBh6CclkucgF+tHDQuYFRYfW\",[bn.GooglePayment]:\"sha384-taJ2p/0+n0VH328POAoBiuEbL3tnHUTE9S42hK1V+Txs3X+QYjZOyKW35JgHRFfO\",[bn.ThreeDSecure]:\"sha384-+NSZH4Zj3sO5bdWvPKhU5N16QDxeueTVTnUVeleeESkhLSaz4Ob1hh/5myecc9Ym\",[bn.VisaCheckout]:\"sha384-66DiBjghxk1OmBj8aksN8gbQ+CwoQcx1vPfiXUN08g1iQVM+BwewF0p7toM3i7SS\",[bn.Venmo]:\"sha384-B5UwY42kE4RoLoWbQ7YpqosUlUad2/DlGWiw0HhoZbSPk30CQAaSA10ohyLDTkDU\",[bn.HostedFields]:\"sha384-Aw9EesSaUeWxe36PqEHiOyOyOq8M6CIb1gw7/yHNVPRzGtFXXcd2OQ8qXrIlOj2P\",[bn.Fastlane]:\"sha384-rhBL1hpZ71JqG+2TsT0Dih47mbjx8cjJCpeZjk9tw3df1gFMKfCTmMyZunhr7H4Y\"},[ln]:{[bn.Client]:\"sha384-0WNxksIpRP+fYZiIdr12g6DBUQfLDzYCQJZtR/C8KkcwSGhPHfcFp3tTaGcMyFTq\",[bn.PaypalCheckout]:\"sha384-lWM1jk4BOxoDNV6Kop7tVNvQgINlmEVz0c/OwM+HNHK3QC8xqwd54Ovrt2QRDTjh\",[bn.Paypal]:\"sha384-fXUmVxC2EMZBDXZ7eTHSTL/LFBrHej/MSXT/vTBXvra4lzgLNGvREAp+x0GYObuH\",[bn.LocalPayment]:\"sha384-pha1xGuGSkmZH5x9aqHvRaO4xLea7rmQ/79PFj9zxNzxuFcOWZg7gOP7FibygOEC\",[bn.DataCollector]:\"sha384-Q6PI2F9eekWbAxhroybl+aEcvqhdowN/EQlGwBUyJOzPFn9982u9xl6SU6XfGKzc\",[bn.UsBankAccount]:\"sha384-W3RLQSKJL1tQ3+Y7mP6tmkamtZ8bV4Yw/XxL9Jj5JtXHraD8loMF8hAIG5m2zK7F\",[bn.GooglePayment]:\"sha384-TITQMsFWA3elDNGP2mWz2oKBo4qjt+TlqzovcaPoeBiAh/wPBi6nae50ADdgU1/i\",[bn.ThreeDSecure]:\"sha384-YiycYN89ZlL/Evcaq4y1ajW1mhd7JYfZBDuOwHtIn4/Jnm20GL+/XCM+zYAwWD8D\",[bn.VisaCheckout]:\"sha384-/OdaTv9qrkKzjObtUe6yzfDhHozFW/+uXlrSl736sOZRJpjGQETvpYXqMFFg69xv\",[bn.Venmo]:\"sha384-dA+ojdW9vbJS4JavcXyOs9d5uZHJg5dNtYupoPSH2zsXIiYDVS5amLb/u8qmQ6oz\",[bn.HostedFields]:\"sha384-31ZkS58+iaWsW06ftW52zzVZFp43WPd7pNYRiddYynSNg6Oh7WGbSFGorAUH6T1z\",[bn.Fastlane]:\"sha384-jlbrwNvL3HvLAUCtLSmrnQ2GH1udCUrRS/bVmReAS5fuIVvcW8Pko/Gkg82tlgtr\"}};var kn,Tn=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Dn{constructor(e,t,n){this.scriptLoader=e,this.braintreeHostWindow=t,this.braintreeSDKVersionManager=n}loadClient(){return Tn(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(bn.Client,\"client.min.js\")})}loadFastlane(){return Tn(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(bn.Fastlane,\"fastlane.min.js\")})}loadPaypalCheckout(){return Tn(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(bn.PaypalCheckout,\"paypal-checkout.min.js\")})}loadPaypal(){return Tn(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(bn.Paypal,\"paypal.min.js\")})}loadLocalPayment(){return Tn(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(bn.LocalPayment,\"local-payment.min.js\")})}loadDataCollector(){return Tn(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(bn.DataCollector,\"data-collector.min.js\")})}loadUsBankAccount(){return Tn(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(bn.UsBankAccount,\"us-bank-account.min.js\")})}loadGooglePayment(){return Tn(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(bn.GooglePayment,\"google-payment.min.js\")})}load3DS(){return Tn(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(bn.ThreeDSecure,\"three-d-secure.min.js\")})}loadVisaCheckout(){return this.loadBraintreeModuleOrThrow(bn.VisaCheckout,\"visa-checkout.min.js\")}loadVenmoCheckout(){return this.loadBraintreeModuleOrThrow(bn.Venmo,\"venmo.min.js\")}loadHostedFields(){return Tn(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(bn.HostedFields,\"hosted-fields.min.js\")})}loadVisaCheckoutSdk(e){return Tn(this,void 0,void 0,function*(){if(this.braintreeHostWindow.V)return this.braintreeHostWindow.V;const t=e?\"sha384-0eu1s1GtqzXlL9DtLgmwzC5WWlEH/ADRM0n38cVQkvtT+W/gey96rcb1LwuUOPDm\":\"sha384-1f1csvP3ZFxg4dILH1GaY4LHlZ0oX7Rk83rxmLlwbnIi4TM0NYzXoev1VoEiVDS6\";return this.scriptLoader.loadScript(`//${e?\"sandbox-\":\"\"}assets.secure.checkout.visa.com/checkout-widget/resources/js/integration/v1/sdk.js`,{async:!0,attributes:{integrity:t,crossorigin:\"anonymous\"}}).then(()=>{if(!this.braintreeHostWindow.V)throw new Xt;return this.braintreeHostWindow.V})})}loadBraintreeModuleOrThrow(e,t){return Tn(this,void 0,void 0,function*(){let n=this.getBraintreeModule(e);if(n)return n;const i=this.braintreeSDKVersionManager.getSDKVersion(),r=`//js.braintreegateway.com/web/${i}/js/${t}`,o=i in An?this.getIntegrityValuesByModuleName(e,i):void 0;if(yield this.scriptLoader.loadScript(r,o?{async:!0,attributes:{integrity:o,crossorigin:\"anonymous\"}}:void 0),n=this.getBraintreeModule(e),!n)throw new Xt;return n})}getBraintreeModule(e){var t;return null===(t=this.braintreeHostWindow.braintree)||void 0===t?void 0:t[e]}getIntegrityValuesByModuleName(e,t){const n=An[t][e];if(!n)throw new Error(\"Unexpected fileName value\");return n}}class Mn extends Bt{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}!function(e){e.BRAINTREE=\"braintree\",e.BRAINTREE_FASTLANE=\"braintreeacceleratedcheckout\"}(kn||(kn={}));var zn,Nn=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};!function(e){e.Subtotal=\"Subtotal\",e.Shipping=\"Shipping\"}(zn||(zn={}));class xn{constructor(e,t,n,i,r){this._requestSender=e,this._paymentIntegrationService=t,this._sessionFactory=n,this._braintreeSdk=i,this._applePayScriptLoader=r,this._onAuthorizeCallback=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,this._onError=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,this._onClick=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,this._subTotalLabel=zn.Subtotal,this._shippingLabel=zn.Shipping,this._hasApplePaySession=!1}initialize(e){var t;return Nn(this,void 0,void 0,function*(){const{methodId:n,applepay:i}=e;if(!n||!i)throw new jt(kt.MissingPaymentMethod);const{container:r,shippingLabel:o,subtotalLabel:a,onError:s=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,onClick:d=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,onPaymentAuthorize:c}=i;this._shippingLabel=o||zn.Shipping,this._subTotalLabel=a||zn.Subtotal,this._onAuthorizeCallback=c,this._onError=s,this._onClick=d;let l=this._paymentIntegrationService.getState();yield this._applePayScriptLoader.loadSdk();try{this._paymentMethod=l.getPaymentMethodOrThrow(n)}catch(e){l=yield this._paymentIntegrationService.loadPaymentMethod(n),this._paymentMethod=l.getPaymentMethodOrThrow(n)}yield this._paymentIntegrationService.verifyCheckoutSpamProtection(),this._applePayButton=this._createButton(r),this._applePayButton.addEventListener(\"click\",this._handleWalletButtonClick.bind(this)),(null===(t=this._paymentMethod.initializationData)||void 0===t?void 0:t.gateway)===kn.BRAINTREE&&(yield this._initializeBraintreeSdk())})}deinitialize(){return Promise.resolve()}signIn(){throw new on('In order to sign in via Apple, the shopper must click on \"Apple Pay\" button.')}signOut(){throw new on(\"Need to do signout via apple.\")}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}_createButton(e){const t=document.getElementById(e);if(!t)throw new rn(\"Unable to create sign-in button without valid container ID.\");const n=this._createApplePayButtonElement();return t.appendChild(n),n}_createApplePayButtonElement(){const e=document.createElement(\"apple-pay-button\");return e.setAttribute(\"buttonstyle\",\"black\"),e.setAttribute(\"type\",\"plain\"),e.setAttribute(\"style\",\"--apple-pay-button-width: 100%; --apple-pay-button-height: 36px; --apple-pay-button-border-radius: 4px;\"),e}_handleWalletButtonClick(e){if(e.preventDefault(),this._hasApplePaySession)return;this._onClick();const t=this._paymentIntegrationService.getState(),n=t.getCartOrThrow(),i=t.getStoreConfigOrThrow(),r=t.getCheckoutOrThrow();if(!this._paymentMethod||!this._paymentMethod.initializationData)throw new jt(kt.MissingPaymentMethod);const o=this._getBaseRequest(n,r,i,this._paymentMethod),a=this._sessionFactory.create(o);this._handleApplePayEvents(a,this._paymentMethod,i),a.begin(),this._hasApplePaySession=!0}_getBaseRequest(e,t,n,i){var r;const{storeProfile:{storeCountryCode:o,storeName:a}}=n,{currency:{code:s,decimalPlaces:d}}=e,{initializationData:{merchantCapabilities:c,supportedNetworks:l}}=i,u=e.lineItems.physicalItems.length>0,h={requiredBillingContactFields:[\"postalAddress\"],requiredShippingContactFields:[\"email\",\"phone\"],countryCode:o,currencyCode:s,merchantCapabilities:c,supportedNetworks:l,lineItems:[],total:u?{label:a,amount:`${t.grandTotal.toFixed(d)}`,type:\"pending\"}:{label:a,amount:`${t.grandTotal.toFixed(d)}`,type:\"final\"}};if(u)null===(r=h.requiredShippingContactFields)||void 0===r||r.push(\"postalAddress\");else{const e=[{label:this._subTotalLabel,amount:`${t.subtotal.toFixed(d)}`}];t.taxes.forEach(t=>e.push({label:t.name,amount:`${t.amount.toFixed(d)}`})),h.lineItems=e}return h}_handleApplePayEvents(e,t,n){e.onvalidatemerchant=n=>Nn(this,void 0,void 0,function*(){try{const{body:i}=yield this._onValidateMerchant(t,n);e.completeMerchantValidation(i)}catch(e){this._onError(e)}}),e.onshippingcontactselected=t=>Nn(this,void 0,void 0,function*(){return this._handleShippingContactSelected(e,n,t)}),e.onshippingmethodselected=t=>Nn(this,void 0,void 0,function*(){return this._handleShippingMethodSelected(e,n,t)}),e.oncancel=()=>Nn(this,void 0,void 0,function*(){this._hasApplePaySession=!1;try{const e=`/remote-checkout/${t.id}/signout`;return yield this._requestSender.get(e),yield this._paymentIntegrationService.loadCheckout()}catch(e){return this._onError(new Mn)}}),e.onpaymentauthorized=n=>Nn(this,void 0,void 0,function*(){return this._onPaymentAuthorized(n,e,t)})}_handleShippingContactSelected(e,t,n){var i;return Nn(this,void 0,void 0,function*(){const r=this._transformContactToAddress(n.shippingContact);try{yield this._paymentIntegrationService.updateShippingAddress(r)}catch(t){return e.abort(),this._hasApplePaySession=!1,this._onError(t)}const{storeProfile:{storeName:o}}=t;let a=this._paymentIntegrationService.getState();const{currency:{decimalPlaces:s}}=a.getCartOrThrow();let d=a.getCheckoutOrThrow();const c=null===(i=d.consignments[0].selectedShippingOption)||void 0===i?void 0:i.id,l=d.consignments[0].availableShippingOptions,u=null==l?void 0:l.find(({id:e})=>e===c),h=null==l?void 0:l.filter(e=>e.id!==c),p=u?[{label:u.description,amount:`${u.cost.toFixed(s)}`,detail:u.additionalDescription,identifier:u.id}]:[];if(h&&[...h.filter(e=>e.isRecommended),...h.filter(e=>!e.isRecommended)].forEach(e=>p.push({label:e.description,amount:`${e.cost.toFixed(s)}`,detail:e.additionalDescription,identifier:e.id})),!(l instanceof Array))throw new Error(\"Shipping options not available.\");if(0===l.length)return void e.completeShippingContactSelection(ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS,[],{type:\"pending\",label:o,amount:`${d.grandTotal.toFixed(s)}`},[]);const m=l.find(e=>e.isRecommended),y=m?m.id:l[0].id,g=u?u.id:y;try{yield this._updateShippingOption(g)}catch(e){return this._onError(e)}a=this._paymentIntegrationService.getState(),d=a.getCheckoutOrThrow(),e.completeShippingContactSelection({newShippingMethods:p,newTotal:{type:\"final\",label:o,amount:`${d.grandTotal.toFixed(s)}`},newLineItems:this._getUpdatedLineItems(d,s)})})}_handleShippingMethodSelected(e,t,n){return Nn(this,void 0,void 0,function*(){const{storeProfile:{storeName:i}}=t,{shippingMethod:{identifier:r}}=n;try{yield this._updateShippingOption(r)}catch(t){return e.abort(),this._hasApplePaySession=!1,this._onError(t)}const o=this._paymentIntegrationService.getState(),{currency:{decimalPlaces:a}}=o.getCartOrThrow(),s=o.getCheckoutOrThrow();e.completeShippingMethodSelection({newTotal:{type:\"final\",label:i,amount:`${s.grandTotal.toFixed(a)}`},newLineItems:this._getUpdatedLineItems(s,a)})})}_getUpdatedLineItems(e,t){const n=[{label:this._subTotalLabel,amount:`${e.subtotal.toFixed(t)}`}];return e.taxes.forEach(e=>n.push({label:e.name,amount:`${e.amount.toFixed(t)}`})),n.push({label:this._shippingLabel,amount:`${e.shippingCostTotal.toFixed(t)}`}),n}_updateShippingOption(e){return Nn(this,void 0,void 0,function*(){return this._paymentIntegrationService.selectShippingOption(e)})}_onValidateMerchant(e,t){return Nn(this,void 0,void 0,function*(){const n=[`validationUrl=${t.validationURL}`,`merchantIdentifier=${e.initializationData.merchantId}`,`displayName=${e.initializationData.storeName}`,`domainName=${window.location.hostname}`].join(\"&\");return this._requestSender.post(`${e.initializationData.paymentsUrl}/api/public/v1/payments/applepay/validate_merchant`,{credentials:!1,headers:{Accept:\"application/json\",\"Content-Type\":\"application/x-www-form-urlencoded\",\"X-XSRF-TOKEN\":null},body:n})})}_onPaymentAuthorized(e,t,n){var i;return Nn(this,void 0,void 0,function*(){const{token:r,billingContact:o,shippingContact:a}=e.payment,s=this._paymentIntegrationService.getState().getCartOrThrow().lineItems.physicalItems.length>0;let d;(null===(i=n.initializationData)||void 0===i?void 0:i.gateway)===kn.BRAINTREE&&(d=yield this._getBraintreeDeviceData());const c={methodId:n.id,paymentData:{deviceSessionId:d,formattedPayload:{apple_pay_token:{payment_data:r.paymentData,payment_method:r.paymentMethod,transaction_id:r.transactionIdentifier}}}},l=this._transformContactToAddress(o),u=this._transformContactToAddress(a),h=null==a?void 0:a.emailAddress,p=(null==a?void 0:a.phoneNumber)||\"\";try{return yield this._paymentIntegrationService.updateBillingAddress(Object.assign(Object.assign({},l),{email:h,phone:p})),s&&(yield this._paymentIntegrationService.updateShippingAddress(u)),yield this._paymentIntegrationService.submitOrder({useStoreCredit:!1}),yield this._paymentIntegrationService.submitPayment(c),t.completePayment(ApplePaySession.STATUS_SUCCESS),this._onAuthorizeCallback()}catch(e){return t.completePayment(ApplePaySession.STATUS_FAILURE),this._onError(e)}})}_transformContactToAddress(e){return{firstName:(null==e?void 0:e.givenName)||\"\",lastName:(null==e?void 0:e.familyName)||\"\",city:(null==e?void 0:e.locality)||\"\",company:\"\",address1:(null==e?void 0:e.addressLines)&&e.addressLines[0]||\"\",address2:(null==e?void 0:e.addressLines)&&e.addressLines[1]||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",phone:(null==e?void 0:e.phoneNumber)||\"\",stateOrProvince:(null==e?void 0:e.administrativeArea)||\"\",stateOrProvinceCode:(null==e?void 0:e.administrativeArea)||\"\",customFields:[]}}_getBraintreeDeviceData(){return Nn(this,void 0,void 0,function*(){try{const{deviceData:e}=yield this._braintreeSdk.getDataCollectorOrThrow();return e}catch(e){}})}_initializeBraintreeSdk(){return Nn(this,void 0,void 0,function*(){yield this._paymentIntegrationService.loadPaymentMethod(kn.BRAINTREE);const e=this._paymentIntegrationService.getState().getPaymentMethod(kn.BRAINTREE);e&&e.clientToken&&e.initializationData&&this._braintreeSdk.initialize(e.clientToken)})}}function Fn(e){if(!function(e){return\"ApplePaySession\"in e}(e))throw new Error(\"Apple pay is not supported\")}class Rn{create(e){return Fn(window),new ApplePaySession(1,e)}}class Ln{constructor(e){this.scriptLoader=e,this.sdkVersion=\"1.latest\"}loadSdk(){return e=this,t=void 0,i=function*(){yield this.scriptLoader.loadScript(`https://applepay.cdn-apple.com/jsapi/${this.sdkVersion}/apple-pay-sdk.js`),Fn(window)},new((n=void 0)||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())});// removed by dead control flow\n{ var e, t, n, i; }}}const Bn=nn(e=>{const{getHost:t}=e.getState(),i=new pn(e);return new xn((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()}),e,new Rn,new En(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),window,i)),new Ln(new _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.ScriptLoader))},[{id:\"applepay\"}]);class jn extends Bt{constructor(e){super(e||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}const Un={body:{},headers:{},status:0};class qn extends Bt{constructor(e,{message:t,errors:n}={}){const{body:i,headers:r,status:o}=e||Un;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=i,this.headers=r,this.status=o,this.errors=n||[]}}var Vn,Gn,Hn,$n,Wn,Yn,Kn,Jn;!function(e){e.BuyNow=\"BUY_NOW\"}(Vn||(Vn={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(Gn||(Gn={})),function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(Hn||(Hn={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}($n||($n={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(Wn||(Wn={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(Yn||(Yn={})),function(e){e.OXXO=\"oxxo\"}(Kn||(Kn={})),function(e){e.Approved=\"APPROVED\",e.Created=\"CREATED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\",e.PollingStop=\"POLLING_STOP\",e.PollingError=\"POLLING_ERROR\"}(Jn||(Jn={}));var Zn=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Qn{constructor(e,t,n,i){this.formPoster=e,this.paymentIntegrationService=t,this.bigCommercePaymentsRequestSender=n,this.bigCommercePaymentsScriptLoader=i}loadPayPalSdk(e,t,n,i){return Zn(this,void 0,void 0,function*(){const r=this.paymentIntegrationService.getState(),o=t||r.getCartOrThrow().currency.code,a=r.getPaymentMethodOrThrow(e);return this.paypalSdk=yield this.bigCommercePaymentsScriptLoader.getPayPalSDK(a,o,n,i),this.paypalSdk})}getPayPalSdkOrThrow(){if(!this.paypalSdk)throw new Xt;return this.paypalSdk}createBuyNowCartOrThrow(e){return Zn(this,void 0,void 0,function*(){const t=e.getBuyNowCartRequestBody();if(!t)throw new jt(kt.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new jn}})}createOrder(e,t){return Zn(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:i}=yield this.bigCommercePaymentsRequestSender.createOrder(e,Object.assign({cartId:n},t));return i})}createOrderCardFields(e,t){return Zn(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:i,setupToken:r}=yield this.bigCommercePaymentsRequestSender.createOrder(e,Object.assign({cartId:n},t));return Object.assign({orderId:i},r?{setupToken:r}:{})})}updateOrder(){return Zn(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),n=e.getConsignmentsOrThrow()[0];try{yield this.bigCommercePaymentsRequestSender.updateOrder({availableShippingOptions:n.availableShippingOptions,cartId:t.id,selectedShippingOption:n.selectedShippingOption})}catch(e){throw new qn}})}getOrderStatus(e,t){return Zn(this,void 0,void 0,function*(){try{const{status:n}=yield this.bigCommercePaymentsRequestSender.getOrderStatus(e,t);return n}catch(e){throw new qn}})}tokenizePayment(e,t){const n=this.paymentIntegrationService.getState().getCartOrThrow();if(!t)throw new jt(kt.MissingOrderId);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",action:\"set_external_checkout\",provider:e,order_id:t},n.source===Vn.BuyNow&&{cart_id:n.id}))}submitPayment(e,t,n){return Zn(this,void 0,void 0,function*(){const i={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:e,paypal_account:{order_id:t}}};yield this.paymentIntegrationService.submitPayment(Object.assign({methodId:e,paymentData:i},n?{gatewayId:n}:{}))})}getShippingOptionOrThrow(e){const t=this.paymentIntegrationService.getState().getConsignmentsOrThrow()[0],n=t.availableShippingOptions||[],i=n.find(e=>e.isRecommended),r=(e?n.find(t=>t.id===e):n.find(e=>{var n;return e.id===(null===(n=t.selectedShippingOption)||void 0===n?void 0:n.id)}))||i||n[0];if(!r)throw new Error(\"Your order can't be shipped to this address\");return r}getAddress(e){return{firstName:(null==e?void 0:e.firstName)||\"\",lastName:(null==e?void 0:e.lastName)||\"\",email:(null==e?void 0:e.email)||\"\",phone:(null==e?void 0:e.phone)||\"\",company:\"\",address1:(null==e?void 0:e.address1)||\"\",address2:(null==e?void 0:e.address2)||\"\",city:(null==e?void 0:e.city)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",stateOrProvince:\"\",stateOrProvinceCode:(null==e?void 0:e.stateOrProvinceCode)||\"\",customFields:[]}}getBillingAddressFromOrderDetails({payer:e}){var t,n;return this.getAddress({firstName:e.name.given_name,lastName:e.name.surname,email:e.email_address,address1:e.address.address_line_1,address2:e.address.address_line_2,city:e.address.admin_area_2,countryCode:e.address.country_code,postalCode:e.address.postal_code,stateOrProvinceCode:e.address.admin_area_1,phone:null===(n=null===(t=e.phone)||void 0===t?void 0:t.phone_number)||void 0===n?void 0:n.national_number})}getShippingAddressFromOrderDetails(e){const{payer:t,purchase_units:n}=e,{address:i,name:{full_name:r}}=n[0].shipping,[o,...a]=r.split(\" \");return this.getAddress({firstName:o,lastName:a.join(\" \"),email:t.email_address,address1:i.address_line_1,address2:i.address_line_2,city:i.admin_area_2,countryCode:i.country_code,postalCode:i.postal_code,stateOrProvinceCode:i.admin_area_1})}getValidButtonStyle(e){const{color:t,height:n,label:i,shape:r}=e||{},o={color:t&&Wn[t]?t:void 0,height:this.getValidHeight(n),label:i&&$n[i]?i:void 0,shape:r&&Yn[r]?r:void 0};return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(o,lodash__WEBPACK_IMPORTED_MODULE_5__.isNil)}getValidHeight(e){return e&&\"number\"==typeof e?e>55?55:e<25?25:e:40}removeElement(e){const t=e&&document.getElementById(e);t&&(t.style.display=\"none\")}}const Xn=\"This API endpoint is for internal use only and may change in the future\";var ei;!function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"}(ei||(ei={}));const ti=ei,ni={\"X-Checkout-SDK-Version\":\"1.803.0\"};var ii=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class ri{constructor(e){this.requestSender=e}createOrder(e,t){return ii(this,void 0,void 0,function*(){const n=`/api/storefront/payment/${e}`,i=t,r=Object.assign({\"X-API-INTERNAL\":Xn,\"Content-Type\":ti.Json},ni);return(yield this.requestSender.post(n,{headers:r,body:i})).body})}updateOrder(e){return ii(this,void 0,void 0,function*(){const t=e,n=Object.assign({\"X-API-INTERNAL\":Xn,\"Content-Type\":ti.Json},ni);return(yield this.requestSender.put(\"/api/storefront/initialization/bigcommerce_payments\",{headers:n,body:t})).body})}getOrderStatus(e=\"bigcommerce_payments\",t){return ii(this,void 0,void 0,function*(){const n=`/api/storefront/initialization/${e}`,i=Object.assign({\"X-API-INTERNAL\":Xn,\"Content-Type\":ti.Json},ni);return(yield this.requestSender.get(n,Object.assign({headers:i},t))).body})}}var oi=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class ai{constructor(e){this.scriptLoader=e,this.window=window}getPayPalSDK(e,t,n,i){return oi(this,void 0,void 0,function*(){const r=this.getPayPalSdkScriptConfigOrThrow(e,t,n);return this.loadPayPalSDK(r,i)})}loadPayPalSDK(e,t=!1){return oi(this,void 0,void 0,function*(){if(!this.window.paypal||t){const t=this.transformConfig(e.options),n=this.transformConfig(e.attributes),i=`https://www.paypal.com/sdk/js?${new URLSearchParams(t).toString()}`;yield this.scriptLoader.loadScript(i,{async:!0,attributes:n})}if(!this.window.paypal)throw new Xt;return this.window.paypal})}getPayPalSdkScriptConfigOrThrow(e,t,n=!0){const{id:i,clientToken:r,initializationData:o}=e;if(!(null==o?void 0:o.clientId))throw new jt(kt.MissingPaymentMethod);const{intent:a,clientId:s,merchantId:d,buyerCountry:c,attributionId:l,isVenmoEnabled:u,isHostedCheckoutEnabled:h,isPayPalCreditAvailable:p,isDeveloperModeApplicable:m,availableAlternativePaymentMethods:y=[],enabledAlternativePaymentMethods:g=[],isGooglePayEnabled:v}=o,f=h||n,S=\"bigcommerce_payments_creditcards\"===i,_=S?[\"card\"]:[],w=p?[\"credit\",\"paylater\"]:[],C=n||!f,I=u?[\"venmo\"]:[],b=C?g:[],P=v?[\"googlepay\"]:[],O=n?[\"card-fields\"]:[],E=[...S?[]:[\"card\"],...p?[]:[\"credit\",\"paylater\"],...u?[]:[\"venmo\"],...C?y.filter(e=>!g.includes(e)):y],A=[..._,...w,...I,...b];return{options:Object.assign({\"client-id\":s,\"merchant-id\":d,\"enable-funding\":A.length>0?A:void 0,\"disable-funding\":E.length>0?E:void 0,commit:f,components:[\"buttons\",\"hosted-fields\",\"payment-fields\",\"legal\",...P,...O],currency:t,intent:a},m&&{\"buyer-country\":c}),attributes:{\"data-partner-attribution-id\":l,\"data-client-token\":r}}}transformConfig(e){let t={};return Object.keys(e).forEach(n=>{const i=e[n];null==i||\"\"===i||Array.isArray(i)&&0===i.length||(t=Object.assign(Object.assign({},t),{[n]:Array.isArray(i)?i.join(\",\"):i}))}),t}}const si=e=>{const{getHost:t}=e.getState();return new Qn((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)(),e,new ri((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()})),new ai((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)()))},di=36;var ci=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class li{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}initialize(e){return ci(this,void 0,void 0,function*(){const{bigcommerce_payments:t,methodId:n}=e;if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments\" argument is not provided.');if(!t.container)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_5__.noop,this.paymentIntegrationService.getState().getPaymentMethod(n)||(yield this.paymentIntegrationService.loadPaymentMethod(n));const i=yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n);i&&i.Buttons&&\"function\"==typeof i.Buttons?this.renderButton(n,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return ci(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()})}signOut(e){return ci(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:n,onClick:i,onComplete:r}=t,o=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d}=a.initializationData||{},{checkoutTopButtonStyles:c}=d||{},l=Object.assign({createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments\"),onApprove:({orderID:t})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(e,t)},i&&{onClick:()=>i()}),u={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(t,n)=>this.onHostedCheckoutApprove(t,n,e,r)},h=Object.assign(Object.assign({fundingSource:o.FUNDING.PAYPAL,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},c),{height:di}))},l),s&&u),p=o.Buttons(h);p.isEligible()?p.render(`#${n}`):this.bigCommercePaymentsIntegrationService.removeElement(n)}onHostedCheckoutApprove(e,t,n,i){return ci(this,void 0,void 0,function*(){if(!e.orderID)throw new jt(kt.MissingOrderId);const r=this.paymentIntegrationService.getState().getCartOrThrow(),o=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(o);if(yield this.paymentIntegrationService.updateBillingAddress(t),r.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(o);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:n}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(n,e.orderID),i&&\"function\"==typeof i&&i()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return ci(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return ci(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const ui=nn(e=>new li(e,si(e)),[{id:\"bigcommerce_payments\"}]);var hi,pi,mi,yi,gi,vi,fi,Si,_i=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class wi{constructor(e){this.scriptLoader=e,this.window=window}getPayPalFastlaneSdk(e,t,n){return _i(this,void 0,void 0,function*(){if(!this.window.paypalFastlaneSdk){const i=this.getPayPalFastlaneSdkConfiguration(e,t,n);if(yield this.loadPayPalSdk(i),!this.window.paypalFastlaneSdk)throw new Xt}return this.window.paypalFastlaneSdk})}getPayPalGooglePaySdk(e,t,n,i){return _i(this,void 0,void 0,function*(){if(!this.window.paypalGooglePay||i){const i=this.getPayPalGooglePaySdkScriptConfigOrThrow(e,t,n);yield this.loadPayPalSdk(i)}if(!this.window.paypalGooglePay)throw new Xt;return this.window.paypalGooglePay})}getPayPalApmsSdk(e,t){return _i(this,void 0,void 0,function*(){if(!this.window.paypalApms){const n=this.getPayPalApmSdkConfiguration(e,t);if(yield this.loadPayPalSdk(n),!this.window.paypalApms)throw new Xt}return this.window.paypalApms})}getPayPalMessages(e,t){return _i(this,void 0,void 0,function*(){if(!this.window.paypalMessages){const n=this.getPayPalSdkMessagesConfiguration(e,t);yield this.loadPayPalSdk(n)}if(!this.window.paypalMessages)throw new Xt;return this.window.paypalMessages})}loadPayPalSdk({options:e,attributes:t}){return _i(this,void 0,void 0,function*(){const n=this.transformConfig(e),i=this.transformConfig(t),r=`https://www.paypal.com/sdk/js?${new URLSearchParams(n).toString()}`;yield this.scriptLoader.loadScript(r,{async:!0,attributes:i})})}getPayPalFastlaneSdkConfiguration(e,t,n){const{clientToken:i,initializationData:r}=e;if(!r||!r.clientId)throw new jt(kt.MissingPaymentMethod);const{intent:o,clientId:a,merchantId:s,attributionId:d}=r;return{options:{\"client-id\":a,\"merchant-id\":s,commit:!0,components:[\"fastlane\",\"three-domain-secure\"],currency:t,intent:o},attributes:{\"data-client-metadata-id\":n.replace(/-/g,\"\"),\"data-namespace\":\"paypalFastlaneSdk\",\"data-partner-attribution-id\":d,\"data-sdk-client-token\":i}}}getPayPalGooglePaySdkScriptConfigOrThrow(e,t,n=!0){const{clientToken:i,initializationData:r}=e;if(!r||!r.clientId)throw new jt(kt.MissingPaymentMethod);const{intent:o,clientId:a,merchantId:s,buyerCountry:d,attributionId:c,isHostedCheckoutEnabled:l,isDeveloperModeApplicable:u}=r,h=l||n;return{options:Object.assign({\"client-id\":a,\"merchant-id\":s,commit:h,components:[\"googlepay\"],currency:t,intent:o},u&&{\"buyer-country\":d}),attributes:{\"data-partner-attribution-id\":c,\"data-client-token\":i,\"data-namespace\":\"paypalGooglePay\"}}}getPayPalApmSdkConfiguration(e,t){const{initializationData:n}=e;if(!n||!n.clientId)throw new jt(kt.MissingPaymentMethod);const{intent:i,clientId:r,merchantId:o,buyerCountry:a,attributionId:s,isDeveloperModeApplicable:d,availableAlternativePaymentMethods:c=[],enabledAlternativePaymentMethods:l=[]}=n,u=l,h=c.filter(e=>!l.includes(e));return{options:Object.assign({\"client-id\":r,\"merchant-id\":o,\"enable-funding\":u.length>0?u:void 0,\"disable-funding\":h.length>0?h:void 0,commit:!0,components:[\"buttons\",\"payment-fields\"],currency:t,intent:i},d&&{\"buyer-country\":a}),attributes:{\"data-partner-attribution-id\":s,\"data-namespace\":\"paypalApms\"}}}getPayPalSdkMessagesConfiguration(e,t){const{initializationData:n}=e;if(!n||!n.clientId)throw new jt(kt.MissingPaymentMethod);const{clientId:i,merchantId:r,attributionId:o,isDeveloperModeApplicable:a,buyerCountry:s}=n;return{options:Object.assign({\"client-id\":i,\"merchant-id\":r,components:[\"messages\"],currency:t},a&&{\"buyer-country\":s}),attributes:{\"data-namespace\":\"paypalMessages\",\"data-partner-attribution-id\":o}}}transformConfig(e){let t={};return Object.keys(e).forEach(n=>{const i=e[n];null==i||\"\"===i||Array.isArray(i)&&0===i.length||(t=Object.assign(Object.assign({},t),{[n]:Array.isArray(i)?i.join(\",\"):i}))}),t}}function Ci(){return new wi((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.createScriptLoader)())}!function(e){e.CVV=\"cvv\",e.PAN=\"pan\"}(hi||(hi={}));class Ii{static get(e){const t=`${encodeURIComponent(`${e}`)}=`,n=document.cookie;let i=null;const r=n.indexOf(t);if(r>-1){let e=n.indexOf(\";\",r);-1===e&&(e=n.length),i=decodeURIComponent(n.substring(r+t.length,e))}return i}static set(e,t,n={secure:!0}){let i=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;const{expires:r,path:o,domain:a,secure:s}=n;if(r)i+=`; expires=${r.toUTCString()}`;else{const e=new Date,t=60;e.setTime(e.getTime()+60*t*1e3),i+=`; expires=${e.toUTCString()}`}o&&(i+=`; path=${o}`),a&&(i+=`; domain=${a}`),s&&(i+=\"; secure\"),document.cookie=i}static remove(e,t){Ii.set(e,\"\",Object.assign({expires:new Date(0)},t))}}!function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(pi||(pi={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(mi||(mi={})),function(e){e.Succeeded=\"succeeded\",e.Cancelled=\"cancelled\",e.Errored=\"errored\"}(yi||(yi={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(gi||(gi={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(vi||(vi={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(fi||(fi={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"canceled\",e.UNRECOGNIZED=\"unrecognized\"}(Si||(Si={}));var bi=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Pi{constructor(){this.window=window}initializePayPalFastlane(e,t,n){return bi(this,void 0,void 0,function*(){if(t&&(window.localStorage.setItem(\"fastlaneEnv\",\"sandbox\"),window.localStorage.setItem(\"axoEnv\",\"sandbox\")),!this.window.paypalFastlane){const t={root:{backgroundColorPrimary:\"transparent\"}};this.window.paypalFastlane=yield e.Fastlane({styles:n||t})}return this.window.paypalFastlane})}getPayPalFastlaneOrThrow(){if(!this.window.paypalFastlane)throw new Xt;return this.window.paypalFastlane}lookupCustomerOrThrow(e){return bi(this,void 0,void 0,function*(){return this.getPayPalFastlaneOrThrow().identity.lookupCustomerByEmail(e)})}triggerAuthenticationFlowOrThrow(e){return bi(this,void 0,void 0,function*(){return e?this.getPayPalFastlaneOrThrow().identity.triggerAuthenticationFlow(e):{}})}updateStorageSessionId(e){const t=new Date;t.setDate(t.getDate()+14);const n={expires:t,secure:!0};Ii.set(\"bc-fastlane-sessionId\",e,n)}removeStorageSessionId(){Ii.remove(\"bc-fastlane-sessionId\")}getStorageSessionId(){return Ii.get(\"bc-fastlane-sessionId\")||\"\"}mapPayPalFastlaneProfileToBcCustomerData(e,t){var n,i,r;const{authenticationState:o,profileData:a}=t,s=null===(r=null===(i=null===(n=null==a?void 0:a.card)||void 0===n?void 0:n.paymentSource)||void 0===i?void 0:i.card)||void 0===r?void 0:r.billingAddress,d=null==a?void 0:a.shippingAddress,c=null==a?void 0:a.name,l=null==a?void 0:a.card,u=d?this.mapPayPalToBcAddress(d.address,d.name,d.phoneNumber):void 0,h=s&&c?this.mapPayPalToBcAddress(s,c,null==d?void 0:d.phoneNumber):void 0,p=l?this.mapPayPalToBcInstrument(e,l):[],m=this.filterAddresses([u,h]);return{authenticationState:o||Si.UNRECOGNIZED,addresses:m,billingAddress:h,shippingAddress:u,instruments:p}}mapPayPalToBcInstrument(e,t){const{id:n,paymentSource:i}=t,{brand:r,expiry:o,lastDigits:a}=i.card,[s,d]=o.split(\"-\");return[{bigpayToken:n,brand:r,defaultInstrument:!1,expiryMonth:d,expiryYear:s,iin:\"\",last4:a,method:e,provider:e,trustedShippingAddress:!1,untrustedShippingCardVerificationMode:hi.PAN,type:\"card\"}]}mapBcToPayPalAddress(e){return{company:(null==e?void 0:e.company)||\"\",addressLine1:(null==e?void 0:e.address1)||\"\",addressLine2:(null==e?void 0:e.address2)||\"\",adminArea1:(null==e?void 0:e.stateOrProvinceCode)||(null==e?void 0:e.stateOrProvince)||\"\",adminArea2:(null==e?void 0:e.city)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\"}}mapPayPalToBcAddress(e,t,n,i){const[r,o]=t.fullName.split(\" \"),a=(null==n?void 0:n.nationalNumber)||\"\",s=(null==n?void 0:n.countryCode)||\"\";return{id:Date.now(),type:\"paypal-address\",firstName:t.firstName||r||\"\",lastName:t.lastName||o||\"\",company:e.company||\"\",address1:e.addressLine1,address2:e.addressLine2||\"\",city:e.adminArea2,stateOrProvince:e.adminArea1,stateOrProvinceCode:e.adminArea1,country:e.countryCode||\"\",countryCode:e.countryCode||\"\",postalCode:e.postalCode,phone:s+a,customFields:i||[]}}filterAddresses(e){return e.reduce((e,t)=>t?e.some(e=>this.isEqualAddresses(e,t))?e:[...e,t]:e,[])}isEqualAddresses(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEqual)(this.normalizeAddress(e),this.normalizeAddress(t))}normalizeAddress(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.omit)(e,[\"id\",\"phone\"])}}function Oi(){return new Pi}function Ei(e){return\"string\"!=typeof e}function Ai(e,t){if(t||e)return function(e){var t,n;const i={},r=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(e.root,Ei),o=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(e.input,Ei),a=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(e.toggle,Ei),s=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(null===(t=e.text)||void 0===t?void 0:t.body,Ei),d=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(null===(n=e.text)||void 0===n?void 0:n.caption,Ei),c=e.branding;return Object.keys(r).length&&(i.root=r),Object.keys(o).length&&(i.input=o),Object.keys(a).length&&(i.toggle=a),Object.keys(s).length&&(i.text={},i.text.body=s),Object.keys(d).length&&(i.text=Object.assign({},i.text),i.text.caption=d),c&&(i.branding=c),i}(function(e,t){var n,i,r,o,a,s,d,c,l,u,h,p,m,y,g,v,f,S,_,w,C,I;return{root:{backgroundColorPrimary:(null==e?void 0:e.fastlaneRootSettingsBackgroundColor)||(null===(n=null==t?void 0:t.root)||void 0===n?void 0:n.backgroundColorPrimary),errorColor:(null==e?void 0:e.fastlaneRootSettingsErrorColor)||(null===(i=null==t?void 0:t.root)||void 0===i?void 0:i.errorColor),fontFamily:(null==e?void 0:e.fastlaneRootSettingsFontFamily)||(null===(r=null==t?void 0:t.root)||void 0===r?void 0:r.fontFamily),fontSizeBase:(null==e?void 0:e.fastlaneRootSettingsFontSize)||(null===(o=null==t?void 0:t.root)||void 0===o?void 0:o.fontSizeBase),padding:(null==e?void 0:e.fastlaneRootSettingsPadding)||(null===(a=null==t?void 0:t.root)||void 0===a?void 0:a.padding),primaryColor:(null==e?void 0:e.fastlaneRootSettingsPrimaryColor)||(null===(s=null==t?void 0:t.root)||void 0===s?void 0:s.primaryColor)},input:{borderRadius:(null==e?void 0:e.fastlaneInputSettingsBorderRadius)||(null===(d=null==t?void 0:t.input)||void 0===d?void 0:d.borderRadius),borderColor:(null==e?void 0:e.fastlaneInputSettingsBorderColor)||(null===(c=null==t?void 0:t.input)||void 0===c?void 0:c.borderColor),focusBorderColor:(null==e?void 0:e.fastlaneInputSettingsFocusBorderBase)||(null===(l=null==t?void 0:t.input)||void 0===l?void 0:l.focusBorderColor),backgroundColor:(null==e?void 0:e.fastlaneInputSettingsBackgroundColor)||(null===(u=null==t?void 0:t.input)||void 0===u?void 0:u.backgroundColor),borderWidth:(null==e?void 0:e.fastlaneInputSettingsBorderWidth)||(null===(h=null==t?void 0:t.input)||void 0===h?void 0:h.borderWidth),textColorBase:(null==e?void 0:e.fastlaneInputSettingsTextColorBase)||(null===(p=null==t?void 0:t.input)||void 0===p?void 0:p.textColorBase)},toggle:{colorPrimary:(null==e?void 0:e.fastlaneToggleSettingsColorPrimary)||(null===(m=null==t?void 0:t.toggle)||void 0===m?void 0:m.colorPrimary),colorSecondary:(null==e?void 0:e.fastlaneToggleSettingsColorSecondary)||(null===(y=null==t?void 0:t.toggle)||void 0===y?void 0:y.colorSecondary)},text:{body:{color:(null==e?void 0:e.fastlaneTextBodySettingsColor)||(null===(v=null===(g=null==t?void 0:t.text)||void 0===g?void 0:g.body)||void 0===v?void 0:v.color),fontSize:(null==e?void 0:e.fastlaneTextBodySettingsFontSize)||(null===(S=null===(f=null==t?void 0:t.text)||void 0===f?void 0:f.body)||void 0===S?void 0:S.fontSize)},caption:{color:(null==e?void 0:e.fastlaneTextCaptionSettingsColor)||(null===(w=null===(_=null==t?void 0:t.text)||void 0===_?void 0:_.caption)||void 0===w?void 0:w.color),fontSize:(null==e?void 0:e.fastlaneTextCaptionSettingsFontSize)||(null===(I=null===(C=null==t?void 0:t.text)||void 0===C?void 0:C.caption)||void 0===I?void 0:I.fontSize)}},branding:(null==e?void 0:e.fastlaneBrandingSettings)||(null==t?void 0:t.branding)}}(e,t))}var ki=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Ti{constructor(e,t,n){this.paymentIntegrationService=e,this.bigCommercePaymentsSdk=t,this.bigCommercePaymentsFastlaneUtils=n}initialize(e){var t;return ki(this,void 0,void 0,function*(){const{methodId:n,bigcommerce_payments_fastlane:i}=e;if(!n)throw new rn('Unable to proceed because \"methodId\" argument is not provided.');try{yield this.paymentIntegrationService.loadPaymentMethod(n);const e=this.paymentIntegrationService.getState(),r=e.getCartOrThrow(),o=e.getPaymentMethodOrThrow(n),a=!!(null===(t=o.initializationData)||void 0===t?void 0:t.isDeveloperModeApplicable),s=yield this.bigCommercePaymentsSdk.getPayPalFastlaneSdk(o,r.currency.code,r.id);yield this.bigCommercePaymentsFastlaneUtils.initializePayPalFastlane(s,a,this.getFastlaneStyles(n,i))}catch(e){}return Promise.resolve()})}deinitialize(){return ki(this,void 0,void 0,function*(){return Promise.resolve()})}signIn(e,t){return ki(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return ki(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){return ki(this,void 0,void 0,function*(){const{checkoutPaymentMethodExecuted:t,continueWithCheckoutCallback:n,methodId:i}=e||{};if(!i)throw new rn('Unable to proceed because \"methodId\" argument is not provided.');if(\"function\"!=typeof n)throw new rn('Unable to proceed because \"continueWithCheckoutCallback\" argument is not provided and it must be a function.');if(this.paymentIntegrationService.getState().getCustomerOrThrow().isGuest){t&&\"function\"==typeof t&&t();try{yield this.runPayPalAuthenticationFlowOrThrow(i)}catch(e){}}n()})}runPayPalAuthenticationFlowOrThrow(e){return ki(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),n=t.getCartOrThrow().id,i=t.getCustomer(),r=t.getBillingAddress(),o=(null==i?void 0:i.email)||(null==r?void 0:r.email)||\"\",{customerContextId:a}=yield this.bigCommercePaymentsFastlaneUtils.lookupCustomerOrThrow(o),s=yield this.bigCommercePaymentsFastlaneUtils.triggerAuthenticationFlowOrThrow(a),d=s.authenticationState===Si.CANCELED;yield this.updateCustomerDataState(e,s),d?this.bigCommercePaymentsFastlaneUtils.removeStorageSessionId():this.bigCommercePaymentsFastlaneUtils.updateStorageSessionId(n)})}updateCustomerDataState(e,t){var n;return ki(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow(),{authenticationState:r,addresses:o,billingAddress:a,shippingAddress:s,instruments:d}=this.bigCommercePaymentsFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,t);if(yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:r,addresses:o,instruments:d}),a&&(yield this.paymentIntegrationService.updateBillingAddress(a)),s&&i.lineItems.physicalItems.length>0){const t=yield this.paymentIntegrationService.updateShippingAddress(s),i=t.getPaymentMethodOrThrow(e),{isFastlaneShippingOptionAutoSelectEnabled:r}=i.initializationData||{},o=t.getConsignments()||[],a=(null===(n=o[0])||void 0===n?void 0:n.availableShippingOptions)||[],d=a[0],c=a.find(e=>e.isRecommended);if((c||d)&&r){const e=(null==c?void 0:c.id)||d.id;yield this.paymentIntegrationService.selectShippingOption(e)}}})}getFastlaneStyles(e,t){const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{fastlaneStyles:i,isFastlaneStylingEnabled:r}=n.initializationData||{};return Ai(r?i:{},null==t?void 0:t.styles)}}const Di=nn(e=>new Ti(e,Ci(),Oi()),[{id:\"bigcommerce_payments_fastlane\"},{id:\"bigcommerce_payments_creditcards\"}]);var Mi=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class zi{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}initialize(e){return Mi(this,void 0,void 0,function*(){const{bigcommerce_payments_paylater:t,methodId:n}=e;if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_paylater\" argument is not provided.');if(!t.container)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_paylater.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_paylater.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_5__.noop,this.paymentIntegrationService.getState().getPaymentMethod(n)||(yield this.paymentIntegrationService.loadPaymentMethod(n));const i=yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n);i&&i.Buttons&&\"function\"==typeof i.Buttons?this.renderButton(n,t):console.error(\"[BC BigCommercePayments PayLater]: button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return Mi(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return Mi(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:n,onComplete:i,onClick:r}=t,o=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d}=a.initializationData||{},{checkoutTopButtonStyles:c}=d||{},l=Object.assign({createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_paylater\"),onApprove:({orderID:t})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(e,t)},r&&{onClick:()=>r()}),u={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(t,n)=>this.onHostedCheckoutApprove(t,n,e,i)},h=[o.FUNDING.PAYLATER,o.FUNDING.CREDIT];let p=!1;h.forEach(e=>{if(!p){const t=Object.assign(Object.assign({fundingSource:e,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},c),{height:di}))},l),s&&u),i=o.Buttons(t);i.isEligible()&&(i.render(`#${n}`),p=!0)}}),p||this.bigCommercePaymentsIntegrationService.removeElement(n)}onHostedCheckoutApprove(e,t,n,i){return Mi(this,void 0,void 0,function*(){if(!e.orderID)throw new jt(kt.MissingOrderId);const r=this.paymentIntegrationService.getState().getCartOrThrow(),o=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(o);if(yield this.paymentIntegrationService.updateBillingAddress(t),r.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(o);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:n}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(n,e.orderID),i&&\"function\"==typeof i&&i()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return Mi(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return Mi(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const Ni=nn(e=>new zi(e,si(e)),[{id:\"bigcommerce_payments_paylater\"}]);var xi=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Fi{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){return xi(this,void 0,void 0,function*(){const{bigcommerce_payments_venmo:t,methodId:n}=e;if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_venmo\" argument is not provided.');if(!t.container)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_venmo.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_venmo.onClick\" argument is not a function.');this.paymentIntegrationService.getState().getPaymentMethod(n)||(yield this.paymentIntegrationService.loadPaymentMethod(n));const i=yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n);i&&i.Buttons&&\"function\"==typeof i.Buttons?this.renderButton(n,t):console.error(\"[BC Payments Venmo]: Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return xi(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return xi(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:n,onClick:i}=t,r=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:a}=o.initializationData||{},{checkoutTopButtonStyles:s}=a||{},d=Object.assign({fundingSource:r.FUNDING.VENMO,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},s),{height:di})),createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_venmo\"),onApprove:({orderID:t})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(e,t)},i&&{onClick:()=>i()}),c=r.Buttons(d);c.isEligible()?c.render(`#${n}`):this.bigCommercePaymentsIntegrationService.removeElement(n)}}const Ri=nn(e=>new Fi(e,si(e)),[{id:\"bigcommerce_payments_venmo\"}]);class Li extends Bt{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}class Bi extends qn{constructor(e){super(e,{message:\"There is a problem processing your payment. Please try again later.\"}),this.name=\"PaymentMethodInvalidError\",this.type=\"payment_method_invalid\"}}var ji,Ui,qi,Vi=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Gi{constructor(e,t){this.paymentIntegrationService=e,this.boltScriptLoader=t,this.boltHostWindow=window}initialize(e){var t;return Vi(this,void 0,void 0,function*(){const{methodId:n,bolt:i}=e,{onInit:r}=i||{};if(!n)throw new rn('Unable to proceed because \"methodId\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(n);const o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n);if(!(null===(t=o.initializationData)||void 0===t?void 0:t.publishableKey))throw new jt(kt.MissingPaymentMethod);const{developerConfig:a,publishableKey:s}=o.initializationData;if(yield this.boltScriptLoader.loadBoltClient(s,o.config.testMode,a),r&&\"function\"==typeof r){const e=this.getCustomerEmail();r(yield this.hasBoltAccount(e),e)}})}deinitialize(){return Promise.resolve()}signIn(e,t){return Vi(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()})}signOut(e){return Vi(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()})}executePaymentMethodCheckout(e){return Vi(this,void 0,void 0,function*(){const{continueWithCheckoutCallback:t=rxjs__WEBPACK_IMPORTED_MODULE_25__.noop,checkoutPaymentMethodExecuted:n,methodId:i}=e||{},r=this.getCustomerEmail();if(!i)throw new rn('Unable to proceed because \"methodId\" argument is not provided.');if(\"function\"!=typeof t)throw new rn('Unable to proceed because \"continueWithCheckoutCallback\" argument is not provided and it must be a function.');if(r)return this.openBoltCheckoutModalOrThrow(r,i,t,n);t()})}openBoltCheckoutModalOrThrow(e,t,n,i){var r;return Vi(this,void 0,void 0,function*(){const o=this.getBoltClientOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethod(t);try{if(null===(r=null==a?void 0:a.initializationData)||void 0===r?void 0:r.embeddedOneClickEnabled){const t=yield this.hasBoltAccount(e);if(t){const t={close:()=>{n()}};yield o.openCheckout(e,t)}else n();\"function\"==typeof i&&i({hasBoltAccount:t})}else n()}catch(e){if(function(e){return\"string\"==typeof e.message&&\"string\"==typeof e.type&&(\"string\"==typeof e.subtype||!e.subtype)&&e instanceof Error}(e)&&\"MissingDataError\"!==e.name&&\"NotInitializedError\"!==e.name)throw new Li(e.message);throw e}})}getBoltClientOrThrow(){const e=this.boltHostWindow.BoltCheckout;if(!e)throw new Vt(Tt.PaymentNotInitialized);return e}hasBoltAccount(e){return Vi(this,void 0,void 0,function*(){const t=this.getBoltClientOrThrow();try{return yield t.hasBoltAccount(e)}catch(e){throw new Bi}})}getCustomerEmail(){const e=this.paymentIntegrationService.getState(),t=e.getCustomer(),n=e.getBillingAddress();return(null==t?void 0:t.email)||(null==n?void 0:n.email)||\"\"}}!function(e){e.SandboxMode=\"bolt_sandbox\",e.StagingMode=\"bolt_staging\",e.DevelopmentMode=\"bolt_development\"}(ji||(ji={})),function(e){e.Small=\"small\",e.Medium=\"medium\",e.Large=\"large\"}(Ui||(Ui={})),function(e){e.Pill=\"pill\",e.Rect=\"rect\"}(qi||(qi={}));var Hi=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class $i{constructor(e,t=window){this.scriptLoader=e,this.boltHostWindow=t}loadBoltClient(e,t,n,i,r){return Hi(this,void 0,void 0,function*(){if(this.boltHostWindow.BoltCheckout)return this.boltHostWindow.BoltCheckout;if(!e)throw new rn('Unable to initialize payment because \"publishableKey\" argument is not provided.');if(yield this.scriptLoader.loadScript(`//${this.getDomainURL(!!t,n)}/connect-bigcommerce.js`,this.getScriptOptions(\"bolt-connect\",e,i,r)),yield this.scriptLoader.loadScript(`//${this.getDomainURL(!!t,n)}/track.js`,this.getScriptOptions(\"bolt-track\",e)),!this.boltHostWindow.BoltCheckout)throw new Xt;return this.boltHostWindow.BoltCheckout})}loadBoltEmbedded(e,t,n){return Hi(this,void 0,void 0,function*(){if(yield this.scriptLoader.loadScript(`//${this.getDomainURL(!!t,n)}/embed.js`,{async:!0,attributes:{id:\"bolt-embedded\"}}),!this.boltHostWindow.Bolt)throw new Xt;return this.boltHostWindow.Bolt(e)})}getDomainURL(e,t){if(!e)return\"connect.bolt.com\";if(t)switch(t.developerMode){case ji.StagingMode:return\"connect-staging.bolt.com\";case ji.DevelopmentMode:return`connect.${t.developerDomain}`}return\"connect-sandbox.bolt.com\"}getScriptOptions(e,t,n,i){return{async:!0,attributes:Object.assign(Object.assign({id:e,\"data-publishable-key\":t},n&&{\"data-shopping-cart-id\":n}),i&&{\"data-storefront-api-token\":i})}}}const Wi=nn(e=>new Gi(e,new $i((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),[{id:\"bolt\"}]);class Yi extends rn{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}class Ki extends Bt{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}class Ji{constructor(e){const t=new Promise((e,t)=>{this.cancel=t});this.promise=Promise.race([e,t])}}const Zi=[\"buttons\",\"messages\"];var Qi,Xi,er,tr,nr,ir;!function(e){e.HORIZONTAL=\"horizontal\",e.VERTICAL=\"vertical\"}(Qi||(Qi={})),function(e){e.SMALL=\"small\",e.MEDIUM=\"medium\",e.LARGE=\"large\",e.RESPONSIVE=\"responsive\"}(Xi||(Xi={})),function(e){e.GOLD=\"gold\",e.BLUE=\"blue\",e.SIlVER=\"silver\",e.BLACK=\"black\",e.WHITE=\"white\"}(er||(er={})),function(e){e.CHECKOUT=\"checkout\",e.PAY=\"pay\",e.BUYNOW=\"buynow\",e.PAYPAL=\"paypal\",e.CREDIT=\"credit\"}(tr||(tr={})),function(e){e.PILL=\"pill\",e.RECT=\"rect\"}(nr||(nr={})),function(e){e.CART=\"cart\",e.HOME=\"homepage\",e.PAYMENT=\"payment\",e.PRODUCT=\"product\"}(ir||(ir={}));var rr=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class or{constructor(e,t,n){this.braintreeScriptLoader=e,this.braintreeHostWindow=t,this.overlay=n,this.dataCollectors={}}initialize(e,t){this.clientToken=e,this.threeDSecureOptions=t}getBraintreeFastlane(e,t,n){return rr(this,void 0,void 0,function*(){if(t&&(window.localStorage.setItem(\"axoEnv\",\"sandbox\"),window.localStorage.setItem(\"fastlaneEnv\",\"sandbox\")),!this.braintreeHostWindow.braintreeFastlane){const t=this.getClientTokenOrThrow(),i=yield this.getClient(),r=yield this.getSessionId(e),o=yield this.braintreeScriptLoader.loadFastlane(),a={root:{backgroundColorPrimary:\"transparent\"}};this.braintreeHostWindow.braintreeFastlane=yield o.create({authorization:t,client:i,deviceData:r,styles:n||a})}return this.braintreeHostWindow.braintreeFastlane})}getClient(){return rr(this,void 0,void 0,function*(){if(!this.client){const e=this.getClientTokenOrThrow(),t=yield this.braintreeScriptLoader.loadClient();this.client=t.create({authorization:e})}return this.client})}getPaypal(){return this.braintreePaypal||(this.braintreePaypal=Promise.all([this.getClient(),this.braintreeScriptLoader.loadPaypal()]).then(([e,t])=>t.create({client:e}))),this.braintreePaypal}paypal(e){var{shouldSaveInstrument:t}=e,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"shouldSaveInstrument\"]);const i=(0,_braintree_browser_detection__WEBPACK_IMPORTED_MODULE_8__.supportsPopups)();return this.getPaypal().then(e=>{var r;return i&&(null===(r=this.overlay)||void 0===r||r.show({onClick:()=>e.focusWindow()})),e.tokenize(Object.assign({enableShippingAddress:!0,flow:t?\"vault\":\"checkout\",useraction:\"commit\"},n))}).then(e=>{var t;return null===(t=this.overlay)||void 0===t||t.remove(),e}).catch(e=>{var t;throw null===(t=this.overlay)||void 0===t||t.remove(),e})}getPaypalCheckout(e,t,n){return rr(this,void 0,void 0,function*(){const i=yield this.getClient(),r=yield this.braintreeScriptLoader.loadPaypalCheckout(),o={client:i};return this.paypalCheckout=yield r.create(o,(i,r)=>{var o;if(i)return n(i);const a=Object.assign(Object.assign({currency:e.currency},e.isCreditEnabled&&{\"enable-funding\":\"paylater\"}),{components:Zi.toString(),intent:e.intent,commit:null===(o=e.commit)||void 0===o||o});this.braintreeHostWindow.paypal?t(r):r.loadPayPalSDK(a,()=>t(r))}),this.paypalCheckout})}getDataCollector(e){return rr(this,void 0,void 0,function*(){const t=(null==e?void 0:e.paypal)?\"paypal\":\"default\";let n=this.dataCollectors[t];if(!n){try{const t=yield this.getClient(),i=yield this.braintreeScriptLoader.loadDataCollector(),r=Object.assign({client:t,kount:!0},e);n=yield i.create(r)}catch(e){if(!Cn(e)||\"DATA_COLLECTOR_KOUNT_NOT_ENABLED\"!==e.code)throw e;n={deviceData:void 0,teardown:()=>Promise.resolve()}}this.dataCollectors[t]=n}return n})}getBraintreeEnv(e=!1){return e?In.Sandbox:In.Production}mapToBraintreeShippingAddressOverride(e){return{recipientName:`${e.firstName} ${e.lastName}`,line1:e.address1,line2:e.address2,city:e.city,state:e.stateOrProvinceCode,postalCode:e.postalCode,countryCode:e.countryCode,phone:e.phone}}mapToLegacyShippingAddress(e){const{email:t,phone:n,shippingAddress:i}=e,r=(null==i?void 0:i.recipientName)||\"\",[o,a]=r.split(\" \");return{email:t,first_name:o||\"\",last_name:a||\"\",phone_number:n,address_line_1:null==i?void 0:i.line1,address_line_2:null==i?void 0:i.line2,city:null==i?void 0:i.city,state:null==i?void 0:i.state,country_code:null==i?void 0:i.countryCode,postal_code:null==i?void 0:i.postalCode}}mapToLegacyBillingAddress(e){const{billingAddress:t,email:n,firstName:i,lastName:r,phone:o,shippingAddress:a}=e,s=t||a;return{email:n,first_name:i,last_name:r,phone_number:o,address_line_1:null==s?void 0:s.line1,address_line_2:null==s?void 0:s.line2,city:null==s?void 0:s.city,state:null==s?void 0:s.state,country_code:null==s?void 0:s.countryCode,postal_code:null==s?void 0:s.postalCode}}removeElement(e){const t=e&&document.getElementById(e);t&&t.remove()}getSessionId(e){return rr(this,void 0,void 0,function*(){const{deviceData:t}=yield this.getDataCollector({riskCorrelationId:e});return t})}teardown(){return rr(this,void 0,void 0,function*(){yield this.teardownModule(this.dataCollectors.default),yield this.teardownModule(this.dataCollectors.paypal),this.dataCollectors={},yield this.teardownModule(this.paypalCheckout),this.paypalCheckout=void 0})}get3DS(){return rr(this,void 0,void 0,function*(){return this.threeDS||(this.threeDS=Promise.all([this.getClient(),this.braintreeScriptLoader.load3DS()]).then(([e,t])=>t.create({client:e,version:2}))),this.threeDS})}getVenmoCheckout(e){return rr(this,void 0,void 0,function*(){if(!this.venmoCheckout){const t=yield this.getClient(),n=yield this.braintreeScriptLoader.loadVenmoCheckout(),i=Object.assign({client:t,allowDesktop:!0,paymentMethodUsage:\"multi_use\"},e||{});this.venmoCheckout=yield new Promise((e,t)=>{n.create(i,(n,i)=>n?t(n):i.isBrowserSupported()?void e(i):t(new mn))})}return this.venmoCheckout})}verifyCard(e,t,n){return rr(this,void 0,void 0,function*(){const i=yield this.tokenizeCard(e,t);return this.challenge3DSVerification(i,n)})}tokenizeCard(e,t){return rr(this,void 0,void 0,function*(){const{paymentData:n}=e;if(!function(e){if(\"object\"!=typeof e||null===e)return!1;const t=e;return\"object\"==typeof t.ccExpiry&&null!==t.ccExpiry&&\"string\"==typeof t.ccNumber&&\"string\"==typeof t.ccName}(n))throw new Yi([\"payment.paymentData\"]);const i=this.getErrorsRequiredFields(n);if(!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEmpty)(i))throw new Ki(i);const r=this.mapToCreditCard(n,t),o=yield this.getClient(),{creditCards:a}=yield o.request(r);return{nonce:a[0].nonce,bin:a[0].details.bin}})}challenge3DSVerification(e,t){return rr(this,void 0,void 0,function*(){const n=yield this.get3DS();return this.present3DSChallenge(n,t,e)})}teardownModule(e){return e?e.teardown():Promise.resolve()}getClientTokenOrThrow(){if(!this.clientToken)throw new Vt(Tt.PaymentNotInitialized);return this.clientToken}getErrorsRequiredFields(e){const{ccNumber:t,ccExpiry:n}=e,i={};return t||(i.ccNumber=[{message:\"Credit card number is required\",type:\"required\"}]),n||(i.ccExpiry=[{message:\"Expiration date is required\",type:\"required\"}]),i}mapToCreditCard(e,t){return{data:{creditCard:{cardholderName:e.ccName,number:e.ccNumber,cvv:e.ccCvv,expirationDate:`${e.ccExpiry.month}/${e.ccExpiry.year}`,options:{validate:!1},billingAddress:t&&{countryCodeAlpha2:t.countryCode,locality:t.city,countryName:t.country,postalCode:t.postalCode,streetAddress:t.address2?`${t.address1} ${t.address2}`:t.address1}}},endpoint:\"payment_methods/credit_cards\",method:\"post\"}}present3DSChallenge(e,t,n){const{nonce:i,bin:r}=n;if(!this.threeDSecureOptions||!i)throw new Vt(Tt.PaymentNotInitialized);const{addFrame:o,removeFrame:a,challengeRequested:s=!0,additionalInformation:d}=this.threeDSecureOptions,c=()=>rr(this,void 0,void 0,function*(){const t=yield e.cancelVerifyCard();return u.cancel(new Mn),t}),l=t.toFixed(2),u=new Ji(e.verifyCard({addFrame:(e,t)=>{o&&o(e,t,c)},amount:Number(l),bin:r,challengeRequested:s,nonce:i,removeFrame:a,onLookupComplete:(e,t)=>{t()},collectDeviceData:!0,additionalInformation:d}));return u.promise}}var ar=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class sr{constructor(e,t,n,i){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeIntegrationService=n,this.braintreeHostWindow=i}initialize(e){return ar(this,void 0,void 0,function*(){const{braintreepaypal:t,methodId:n}=e,{container:i,onError:r}=t||{};if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.braintreepaypal\" argument is not provided.');if(!i)throw new rn('Unable to initialize payment because \"options.braintreepaypal.container\" argument is not provided.');let o,a=this.paymentIntegrationService.getState();try{if(o=a.getPaymentMethodOrThrow(n),!o.clientToken)throw new jt(kt.MissingPaymentToken)}catch(e){a=yield this.paymentIntegrationService.loadPaymentMethod(n),o=a.getPaymentMethodOrThrow(n)}const{clientToken:s,config:d,initializationData:c}=o,{paymentButtonStyles:l}=c||{},{checkoutTopButtonStyles:u}=l||{};if(!s||!c)throw new jt(kt.MissingPaymentMethod);const h={currency:a.getCartOrThrow().currency.code,intent:c.intent,isCreditEnabled:c.isCreditEnabled,commit:!1};this.braintreeIntegrationService.initialize(s),yield this.braintreeIntegrationService.getPaypalCheckout(h,e=>{this.renderPayPalButton(e,t,n,Boolean(d.testMode),u)},e=>this.handleError(e,i,r))})}deinitialize(){return ar(this,void 0,void 0,function*(){yield this.braintreeIntegrationService.teardown()})}signIn(e,t){return ar(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return ar(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderPayPalButton(e,t,n,i,r){const{container:o,onClick:a=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}=t,{paypal:s}=this.braintreeHostWindow,d=null==s?void 0:s.FUNDING.PAYPAL;if(s&&d){const c=s.Buttons({env:this.braintreeIntegrationService.getBraintreeEnv(i),fundingSource:d,style:Object.assign(Object.assign({},r),{height:di}),createOrder:()=>this.setupPayment(e,t,n),onApprove:i=>this.tokenizePayment(i,e,n,t),onClick:a});c.isEligible()&&c.render(`#${o}`)}else this.braintreeIntegrationService.removeElement(o)}setupPayment(e,t,n){var i;return ar(this,void 0,void 0,function*(){try{yield this.paymentIntegrationService.loadDefaultCheckout();const t=this.paymentIntegrationService.getState(),r=t.getCheckoutOrThrow().outstandingBalance,o=t.getCartOrThrow().currency.code,a=t.getCustomer(),s=t.getPaymentMethodOrThrow(n),d=null==a?void 0:a.addresses[0],c=d?this.braintreeIntegrationService.mapToBraintreeShippingAddressOverride(d):void 0;return yield e.createPayment({flow:\"checkout\",enableShippingAddress:!0,shippingAddressEditable:!1,shippingAddressOverride:c,amount:r,currency:o,offerCredit:!1,intent:null===(i=s.initializationData)||void 0===i?void 0:i.intent})}catch(e){const{container:n,onError:i}=t;this.handleError(e,n,i)}})}tokenizePayment(e,t,n,i){return ar(this,void 0,void 0,function*(){try{const{deviceData:i}=yield this.braintreeIntegrationService.getDataCollector({paypal:!0}),r=yield t.tokenizePayment(e),{details:o,nonce:a}=r,s=this.braintreeIntegrationService.mapToLegacyBillingAddress(o),d=this.braintreeIntegrationService.mapToLegacyShippingAddress(o);return this.formPoster.postForm(\"/checkout.php\",{payment_type:\"paypal\",provider:n,action:\"set_external_checkout\",nonce:a,device_data:i,billing_address:JSON.stringify(s),shipping_address:JSON.stringify(d)}),r}catch(e){const{container:t,onError:n}=i;this.handleError(e,t,n)}})}handleError(e,t,n){if(this.braintreeIntegrationService.removeElement(t),!n||!Cn(e))throw e;n(e)}}const dr=nn(e=>{const t=window,n=new pn(e),i=new or(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),t,n),t);return new sr(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)(),i,t)},[{id:\"braintreepaypal\"}]);var cr=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class lr{constructor(e,t,n,i){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeIntegrationService=n,this.braintreeHostWindow=i}initialize(e){return cr(this,void 0,void 0,function*(){const{braintreepaypalcredit:t,methodId:n}=e,{container:i,onError:r}=t||{};if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.braintreepaypalcredit\" argument is not provided.');if(!i)throw new rn('Unable to initialize payment because \"options.braintreepaypalcredit.container\" argument is not provided.');let o,a=this.paymentIntegrationService.getState();try{o=a.getPaymentMethodOrThrow(n)}catch(e){a=yield this.paymentIntegrationService.loadPaymentMethod(n),o=a.getPaymentMethodOrThrow(n)}const{clientToken:s,config:d,initializationData:c}=o,{paymentButtonStyles:l}=c||{},{checkoutTopButtonStyles:u}=l||{};if(!s||!c)throw new jt(kt.MissingPaymentMethod);const h={currency:a.getCartOrThrow().currency.code,intent:c.intent,isCreditEnabled:c.isCreditEnabled,commit:!1};this.braintreeIntegrationService.initialize(s),yield this.braintreeIntegrationService.getPaypalCheckout(h,e=>{this.renderPayPalButton(e,t,n,Boolean(d.testMode),Object.assign(Object.assign({},u),{height:di}))},e=>this.handleError(e,i,r))})}deinitialize(){return cr(this,void 0,void 0,function*(){yield this.braintreeIntegrationService.teardown()})}signIn(e,t){return cr(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return cr(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderPayPalButton(e,t,n,i,r){const{container:o,onClick:a=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}=t,{paypal:s}=this.braintreeHostWindow;let d=!1;s&&[s.FUNDING.PAYLATER,s.FUNDING.CREDIT].forEach(c=>{if(!d){const l=s.Buttons({env:i?\"sandbox\":\"production\",fundingSource:c,style:r,createOrder:()=>this.setupPayment(e,t,n),onApprove:i=>this.tokenizePayment(i,e,n,t),onClick:a});l.isEligible()&&(l.render(`#${o}`),d=!0)}}),s&&d||this.braintreeIntegrationService.removeElement(o)}setupPayment(e,t,n){var i;return cr(this,void 0,void 0,function*(){try{yield this.paymentIntegrationService.loadDefaultCheckout();const t=this.paymentIntegrationService.getState(),r=t.getCheckoutOrThrow().outstandingBalance,o=t.getCartOrThrow().currency.code,a=t.getCustomer(),s=t.getPaymentMethodOrThrow(n),d=null==a?void 0:a.addresses[0],c=d?this.braintreeIntegrationService.mapToBraintreeShippingAddressOverride(d):void 0;return yield e.createPayment({flow:\"checkout\",enableShippingAddress:!0,shippingAddressEditable:!1,shippingAddressOverride:c,amount:r,currency:o,offerCredit:!0,intent:null===(i=s.initializationData)||void 0===i?void 0:i.intent})}catch(e){const{container:n,onError:i}=t;this.handleError(e,n,i)}})}tokenizePayment(e,t,n,i){return cr(this,void 0,void 0,function*(){try{const{deviceData:i}=yield this.braintreeIntegrationService.getDataCollector({paypal:!0}),r=yield t.tokenizePayment(e),{details:o,nonce:a}=r,s=this.braintreeIntegrationService.mapToLegacyBillingAddress(o),d=this.braintreeIntegrationService.mapToLegacyShippingAddress(o);return this.formPoster.postForm(\"/checkout.php\",{payment_type:\"paypal\",provider:n,action:\"set_external_checkout\",nonce:a,device_data:i,billing_address:JSON.stringify(s),shipping_address:JSON.stringify(d)}),r}catch(e){const{container:t,onError:n}=i;this.handleError(e,t,n)}})}handleError(e,t,n){if(this.braintreeIntegrationService.removeElement(t),!n||!Cn(e))throw e;n(e)}}const ur=nn(e=>{const t=window,n=new pn(e),i=new or(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),t,n),t);return new lr(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)(),i,t)},[{id:\"braintreepaypalcredit\"}]);function hr(e){return\"string\"!=typeof e}function pr(e,t){if(t||e)return function(e){var t,n;const i={},r=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(e.root,hr),o=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(e.input,hr),a=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(e.toggle,hr),s=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(null===(t=e.text)||void 0===t?void 0:t.body,hr),d=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(null===(n=e.text)||void 0===n?void 0:n.caption,hr),c=e.branding;return Object.keys(r).length&&(i.root=r),Object.keys(o).length&&(i.input=o),Object.keys(a).length&&(i.toggle=a),Object.keys(s).length&&(i.text={},i.text.body=s),Object.keys(d).length&&(i.text=Object.assign({},i.text),i.text.caption=d),c&&(i.branding=c),i}(function(e,t){var n,i,r,o,a,s,d,c,l,u,h,p,m,y,g,v,f,S,_,w,C,I;return{root:{backgroundColorPrimary:(null==e?void 0:e.fastlaneRootSettingsBackgroundColor)||(null===(n=null==t?void 0:t.root)||void 0===n?void 0:n.backgroundColorPrimary),errorColor:(null==e?void 0:e.fastlaneRootSettingsErrorColor)||(null===(i=null==t?void 0:t.root)||void 0===i?void 0:i.errorColor),fontFamily:(null==e?void 0:e.fastlaneRootSettingsFontFamily)||(null===(r=null==t?void 0:t.root)||void 0===r?void 0:r.fontFamily),fontSizeBase:(null==e?void 0:e.fastlaneRootSettingsFontSize)||(null===(o=null==t?void 0:t.root)||void 0===o?void 0:o.fontSizeBase),padding:(null==e?void 0:e.fastlaneRootSettingsPadding)||(null===(a=null==t?void 0:t.root)||void 0===a?void 0:a.padding),primaryColor:(null==e?void 0:e.fastlaneRootSettingsPrimaryColor)||(null===(s=null==t?void 0:t.root)||void 0===s?void 0:s.primaryColor)},input:{borderRadius:(null==e?void 0:e.fastlaneInputSettingsBorderRadius)||(null===(d=null==t?void 0:t.input)||void 0===d?void 0:d.borderRadius),borderColor:(null==e?void 0:e.fastlaneInputSettingsBorderColor)||(null===(c=null==t?void 0:t.input)||void 0===c?void 0:c.borderColor),focusBorderColor:(null==e?void 0:e.fastlaneInputSettingsFocusBorderBase)||(null===(l=null==t?void 0:t.input)||void 0===l?void 0:l.focusBorderColor),backgroundColor:(null==e?void 0:e.fastlaneInputSettingsBackgroundColor)||(null===(u=null==t?void 0:t.input)||void 0===u?void 0:u.backgroundColor),borderWidth:(null==e?void 0:e.fastlaneInputSettingsBorderWidth)||(null===(h=null==t?void 0:t.input)||void 0===h?void 0:h.borderWidth),textColorBase:(null==e?void 0:e.fastlaneInputSettingsTextColorBase)||(null===(p=null==t?void 0:t.input)||void 0===p?void 0:p.textColorBase)},toggle:{colorPrimary:(null==e?void 0:e.fastlaneToggleSettingsColorPrimary)||(null===(m=null==t?void 0:t.toggle)||void 0===m?void 0:m.colorPrimary),colorSecondary:(null==e?void 0:e.fastlaneToggleSettingsColorSecondary)||(null===(y=null==t?void 0:t.toggle)||void 0===y?void 0:y.colorSecondary)},text:{body:{color:(null==e?void 0:e.fastlaneTextBodySettingsColor)||(null===(v=null===(g=null==t?void 0:t.text)||void 0===g?void 0:g.body)||void 0===v?void 0:v.color),fontSize:(null==e?void 0:e.fastlaneTextBodySettingsFontSize)||(null===(S=null===(f=null==t?void 0:t.text)||void 0===f?void 0:f.body)||void 0===S?void 0:S.fontSize)},caption:{color:(null==e?void 0:e.fastlaneTextCaptionSettingsColor)||(null===(w=null===(_=null==t?void 0:t.text)||void 0===_?void 0:_.caption)||void 0===w?void 0:w.color),fontSize:(null==e?void 0:e.fastlaneTextCaptionSettingsFontSize)||(null===(I=null===(C=null==t?void 0:t.text)||void 0===C?void 0:C.caption)||void 0===I?void 0:I.fontSize)}},branding:(null==e?void 0:e.fastlaneBrandingSettings)||(null==t?void 0:t.branding)}}(e,t))}var mr=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class yr{constructor(e,t){this.paymentIntegrationService=e,this.braintreeFastlaneUtils=t,this.isAcceleratedCheckoutEnabled=!1}initialize({methodId:e,braintreefastlane:t}){var n;return mr(this,void 0,void 0,function*(){if(!e)throw new rn('Unable to proceed because \"methodId\" argument is not provided.');const i=yield this.getValidPaymentMethodOrThrow(e),{isAcceleratedCheckoutEnabled:r,isFastlaneStylingEnabled:o}=i.initializationData||{},a=o?null===(n=i.initializationData)||void 0===n?void 0:n.fastlaneStyles:void 0;this.isAcceleratedCheckoutEnabled=!!r;try{if(this.isAcceleratedCheckoutEnabled){const e=pr(a,null==t?void 0:t.styles);yield this.braintreeFastlaneUtils.initializeBraintreeFastlaneOrThrow(i.id,e)}}catch(e){}return Promise.resolve()})}deinitialize(){return mr(this,void 0,void 0,function*(){return Promise.resolve()})}signIn(e,t){return mr(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return mr(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){return mr(this,void 0,void 0,function*(){const{checkoutPaymentMethodExecuted:t,continueWithCheckoutCallback:n}=e||{};if(\"function\"!=typeof n)throw new rn('Unable to proceed because \"continueWithCheckoutCallback\" argument is not provided and it must be a function.');const i=this.paymentIntegrationService.getState().getCustomerOrThrow();if(this.isAcceleratedCheckoutEnabled&&i.isGuest){const e=yield this.shouldRunAuthenticationFlow();t&&\"function\"==typeof t&&t(),e&&(yield this.braintreeFastlaneUtils.runPayPalAuthenticationFlowOrThrow(void 0,!0))}n()})}shouldRunAuthenticationFlow(){var e;return mr(this,void 0,void 0,function*(){const t=\"braintreeacceleratedcheckout\";try{yield this.paymentIntegrationService.loadPaymentMethod(t);const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t);return(null===(e=n.initializationData)||void 0===e?void 0:e.shouldRunAcceleratedCheckout)||!1}catch(e){return!1}})}getValidPaymentMethodOrThrow(e){return mr(this,void 0,void 0,function*(){let t=e;try{yield this.paymentIntegrationService.loadPaymentMethod(t)}catch(n){t=\"braintree\"===e?\"braintreeacceleratedcheckout\":\"braintree\",yield this.paymentIntegrationService.loadPaymentMethod(t)}return this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t)})}}var gr=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class vr{constructor(e,t){this.paymentIntegrationService=e,this.braintreeIntegrationService=t}getDeviceSessionId(){return gr(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getCart();return this.braintreeIntegrationService.getSessionId(null==e?void 0:e.id)})}initializeBraintreeFastlaneOrThrow(e,t){return gr(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState(),i=n.getCart(),{clientToken:r,config:o}=n.getPaymentMethodOrThrow(e);if(!r)throw new jt(kt.MissingPaymentMethod);this.methodId=e,this.braintreeIntegrationService.initialize(r),this.braintreeFastlane=yield this.braintreeIntegrationService.getBraintreeFastlane(null==i?void 0:i.id,o.testMode,t)})}getBraintreeFastlaneOrThrow(){if(!this.braintreeFastlane)throw new Xt;return this.braintreeFastlane}getBraintreeFastlaneComponentOrThrow(){return this.getBraintreeFastlaneOrThrow().FastlaneCardComponent}runPayPalAuthenticationFlowOrThrow(e,t){var n;return gr(this,void 0,void 0,function*(){try{const i=this.getMethodIdOrThrow(),r=this.getBraintreeFastlaneOrThrow(),{lookupCustomerByEmail:o,triggerAuthenticationFlow:a}=r.identity,s=this.paymentIntegrationService.getState(),d=s.getCartOrThrow(),c=s.getCustomer(),l=s.getBillingAddress(),{isFastlaneShippingOptionAutoSelectEnabled:u}=s.getPaymentMethodOrThrow(i).initializationData||{},h=e||(null==c?void 0:c.email)||(null==l?void 0:l.email)||\"\",{customerContextId:p}=yield o(h);if(!p)return yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:fn.UNRECOGNIZED,addresses:[],instruments:[]}),void this.saveSessionIdToCookies(d.id);const{authenticationState:m,profileData:y}=yield a(p),g=(null===(n=null==y?void 0:y.shippingAddress)||void 0===n?void 0:n.phoneNumber)||\"\";if(m===fn.CANCELED)return yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:m,addresses:[],instruments:[]}),void this.removeSessionIdFromCookies();const v=this.mapPayPalToBcAddress([y.shippingAddress],[g])||[],f=this.getPayPalBillingAddresses(y),S=f?this.mapPayPalToBcAddress([f],[g]):[],_=y.card?this.mapPayPalToBcInstrument(i,[y.card]):[],w=this.mergeShippingAndBillingAddresses(v,S);if(this.saveSessionIdToCookies(d.id),yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:m,addresses:w,instruments:_}),S.length>0&&d.lineItems.physicalItems.length>0&&(yield this.paymentIntegrationService.updateBillingAddress(S[0])),S.length>0&&d.lineItems.digitalItems.length>0&&0===d.lineItems.physicalItems.length){const{firstName:e,lastName:t}=w[0],n=Object.assign(Object.assign({},S[0]),{firstName:e,lastName:t});yield this.paymentIntegrationService.updateBillingAddress(n)}v.length>0&&d.lineItems.physicalItems.length>0&&(yield this.paymentIntegrationService.updateShippingAddress(v[0]),t&&u&&(yield this.setShippingOption()))}catch(e){}})}getSessionIdFromCookies(){return Ii.get(\"bc-fastlane-sessionId\")||\"\"}saveSessionIdToCookies(e){const t=new Date;t.setDate(t.getDate()+14),Ii.set(\"bc-fastlane-sessionId\",e,{expires:t,secure:!0})}removeSessionIdFromCookies(){Ii.remove(\"bc-fastlane-sessionId\")}mapPayPalToBcInstrument(e,t){if(t)return t.map(t=>{const{id:n,paymentSource:i}=t,{brand:r,expiry:o,lastDigits:a,binDetails:s}=i.card,[d,c]=o.split(\"-\");return{bigpayToken:n,brand:r,defaultInstrument:!1,expiryMonth:c,expiryYear:d,iin:(null==s?void 0:s.bin)||\"\",last4:a,method:e,provider:e,trustedShippingAddress:!1,type:\"card\",untrustedShippingCardVerificationMode:hi.PAN}})}mapPayPalToBcAddress(e,t){if(!e)return[];const n=this.paymentIntegrationService.getState().getCountries()||[],i=e=>{const t=n.find(t=>t.code===e);return(null==t?void 0:t.name)||\"\"};return e.map(e=>({id:Date.now(),type:\"paypal-address\",firstName:e.firstName||\"\",lastName:e.lastName||\"\",company:e.company||\"\",address1:e.streetAddress,address2:e.extendedAddress||\"\",city:e.locality,stateOrProvince:e.region,stateOrProvinceCode:e.region,country:i(e.countryCodeAlpha2),countryCode:e.countryCodeAlpha2,postalCode:e.postalCode,phone:t&&t[0]||\"\",customFields:[]}))}getPayPalBillingAddresses(e){const{card:t,name:n}=e||{};if(!t)return;const{firstName:i,lastName:r}=t.paymentSource.card.billingAddress,{firstName:o,lastName:a}=n||{},{shippingAddress:s}=e||{},d=Object.assign(Object.assign({},t.paymentSource.card.billingAddress),{firstName:i||o,lastName:r||a});return s&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEqual)(this.normalizeAddress(d),this.normalizeAddress(s))?s:d}normalizeAddress(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.omit)(e,[\"id\"])}mergeShippingAndBillingAddresses(e,t){const n=t.filter(t=>!e.some(e=>(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEqual)(this.normalizeAddress(e),this.normalizeAddress(t))));return[...e,...n]}getMethodIdOrThrow(){if(!this.methodId)throw new rn('Unable to proceed because \"methodId\" argument is not provided.');return this.methodId}setShippingOption(){var e;return gr(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getConsignments()||[],n=(null===(e=t[0])||void 0===e?void 0:e.availableShippingOptions)||[],i=n.find(e=>e.isRecommended);if(i||n.length){const e=i||n[0];yield this.paymentIntegrationService.selectShippingOption(e.id)}})}}const fr=nn(e=>{const t=window,n=new pn(e),i=new or(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),t,n),t),r=new vr(e,i);return new yr(e,r)},[{id:\"braintreeacceleratedcheckout\"},{id:\"braintree\"}]);var Sr=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class _r{constructor(e,t,n){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeSdk=n,this.buttonClassName=\"visa-checkout-wrapper\",this.onError=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}initialize(e){return Sr(this,void 0,void 0,function*(){const{braintreevisacheckout:t,methodId:n}=e;if(!n)throw new rn('Unable to proceed because \"methodId\" argument is not provided.');if(!t)throw new rn('Unable to proceed because \"options.braintreevisacheckout\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(n);const i=this.paymentIntegrationService.getState(),r=i.getCheckoutOrThrow(),{clientToken:o,config:a}=i.getPaymentMethodOrThrow(n),s=i.getStoreConfigOrThrow();if(!o)throw new jt(kt.MissingPaymentMethod);this.braintreeSdk.initialize(o);const d=yield this.braintreeSdk.getBraintreeVisaCheckout(),c=yield this.braintreeSdk.getVisaCheckoutSdk(a.testMode),{container:l,onError:u}=t;this.onError=u||lodash__WEBPACK_IMPORTED_MODULE_5__.noop;const h=d.createInitOptions({paymentRequest:{currencyCode:s.currency.code,subtotal:String(r.subtotal)},settings:{locale:s.storeProfile.storeLanguage,shipping:{collectShipping:!0}}}),p=this.createSignInButton(l,this.buttonClassName);yield c.init(h),c.on(\"payment.success\",e=>this.tokenizePayment(d,e).then(()=>this.paymentIntegrationService.loadCheckout()).catch(e=>this.handleError(e))),c.on(\"payment.error\",(e,t)=>this.handleError(t)),p.style.visibility=\"visible\"})}deinitialize(){return Sr(this,void 0,void 0,function*(){yield this.braintreeSdk.deinitialize()})}signIn(){throw new on('In order to sign in via VisaCheckout, the shopper must click on \"Visa Checkout\" button.')}signOut(e){return Sr(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}tokenizePayment(e,t){return Sr(this,void 0,void 0,function*(){return Promise.all([e.tokenize(t),this.braintreeSdk.getDataCollectorOrThrow()]).then(([e,t])=>{const n=this.paymentIntegrationService.getState(),i=n.getShippingAddress(),r=n.getBillingAddress(),{shippingAddress:o=this.mapToVisaCheckoutAddress(i),billingAddress:a=this.mapToVisaCheckoutAddress(r)}=e;return this.postForm(Object.assign(Object.assign({},e),{shippingAddress:o,billingAddress:a}),t)})})}postForm(e,t){const{userData:n,billingAddress:i,shippingAddress:r,details:o}=e,{userEmail:a}=n,{deviceData:s}=t;return this.formPoster.postForm(\"/checkout.php\",{payment_type:e.type,nonce:e.nonce,provider:\"braintreevisacheckout\",action:\"set_external_checkout\",device_data:s,card_information:JSON.stringify({type:o.cardType,number:o.lastTwo}),billing_address:JSON.stringify(this.getAddress(a,i)),shipping_address:JSON.stringify(this.getAddress(a,r))})}mapToVisaCheckoutAddress(e){return e?{firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phone,streetAddress:e.address1,extendedAddress:e.address2,locality:e.city,region:e.stateOrProvinceCode,countryCode:e.countryCode,postalCode:e.postalCode}:{}}getAddress(e,t={}){return{email:e,first_name:t.firstName,last_name:t.lastName,phone_number:t.phoneNumber,address_line_1:t.streetAddress,address_line_2:t.extendedAddress,city:t.locality,state:t.region,country_code:t.countryCode,postal_code:t.postalCode}}createSignInButton(e,t){const n=document.querySelector(`#${e}`);if(!n)throw new Error(\"Unable to proceed because the provided container ID is not valid.\");return this.insertVisaCheckoutButton(n,t)}insertVisaCheckoutButton(e,t){const n=document.createElement(\"div\");return n.style.display=\"flex\",n.style.flexDirection=\"column\",n.style.visibility=\"hidden\",n.style.width=\"max-content\",n.className=t,n.innerHTML='\\n            <img\\n                alt=\"Visa Checkout\"\\n                class=\"v-button\"\\n                role=\"button\"\\n                src=\"https://secure.checkout.visa.com/wallet-services-web/xo/button.png?acceptCanadianVisaDebit=false&cobrand=true&height=34&width=178\"\\n                />\\n            <a class=\"v-learn v-learn-default\" style=\"text-align: right; display: block; font-size: 10px; color: #003366;\" href=\"#\" data-locale=\"en_US\">Tell Me More</a>',e.appendChild(n),n}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const wr=nn(e=>{const t=window,n=new pn(e),i=new En(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),t,n));return new _r(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)(),i)},[{id:\"braintreevisacheckout\"}]),Cr=function(e,t,n){return t&&n?Ir(0,t,n):function(e){const t=class extends e{};return Object.getOwnPropertyNames(e.prototype).forEach(n=>{const i=Object.getOwnPropertyDescriptor(e.prototype,n);i&&\"constructor\"!==n&&Object.defineProperty(t.prototype,n,Ir(e.prototype,n,i))}),t}(e)};function Ir(e,t,n){if(\"function\"!=typeof n.value)return n;let i=n.value;return{get(){const e=i.bind(this);return Object.defineProperty(this,t,Object.assign(Object.assign({},n),{value:e})),e},set(e){i=e}}}class br{constructor(e){if(!e)throw new Error(\"Currency settings missing\");const{decimalPlaces:t,symbolLocation:n,symbol:i,thousandsSeparator:r,decimalSeparator:o}=e;if(\"string\"!=typeof n||\"string\"!=typeof i||\"string\"!=typeof r||\"string\"!=typeof o||\"string\"!=typeof t)throw new rn(\"Invalid currency settings provided\");this._decimalPlaces=parseInt(t,10),this._symbolLocation=n,this._symbol=i,this._thousandsSeparator=r,this._decimalSeparator=o}format(e){if(\"number\"!=typeof e)throw new rn(\"Invalid amount provided\");const t=this._formatNumber(e),n=this._formatCurrency(t);return e<0?`-${n}`:n}_formatNumber(e){const t=Math.abs(e),[n,i=\"\"]=this._toFixed(t,this._decimalPlaces).split(\".\"),r=n.replace(/\\B(?=(\\d{3})+(?!\\d))/g,this._thousandsSeparator);return this._decimalPlaces<1?r:[r,i].join(this._decimalSeparator)}_formatCurrency(e){return\"left\"===this._symbolLocation.toLowerCase()?`${this._symbol}${e}`:`${e}${this._symbol}`}_toFixed(e,t){return(+`${Math.round(+`${e}e${t}`)}e${-t}`).toFixed(t)}}let Pr=class{constructor(e){this._storeConfig=e,this._customerFormatter=new br(this._storeConfig.shopperCurrency),this._storeFormatter=new br(this._storeConfig.currency)}toCustomerCurrency(e){const t=this._storeConfig.shopperCurrency.exchangeRate;return this._customerFormatter.format(e*t)}toStoreCurrency(e){return this._storeFormatter.format(e)}};Pr=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Cr],Pr);const Or=Pr,Er=(e,t)=>!!e&&(!!e.lineItems.physicalItems.some(e=>e.isShippingRequired)||!(!t||!e.lineItems.customItems)&&e.lineItems.customItems.length>0);var Ar,kr,Tr,Dr,Mr,zr,Nr,xr,Fr;function Rr(e){return e in zr}!function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(Ar||(Ar={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(kr||(kr={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(Tr||(Tr={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(Dr||(Dr={})),function(e){e.ESTIMATED=\"ESTIMATED\",e.FINAL=\"FINAL\",e.NOT_CURRENTLY_KNOWN=\"NOT_CURRENTLY_KNOWN\"}(Mr||(Mr={})),function(e){e.AMEX=\"AMEX\",e.DISCOVER=\"DISCOVER\",e.INTERAC=\"INTERAC\",e.JCB=\"JCB\",e.MC=\"MASTERCARD\",e.VISA=\"VISA\"}(zr||(zr={})),function(e){e.OFFER=\"OFFER\",e.PAYMENT_AUTHORIZATION=\"PAYMENT_AUTHORIZATION\",e.SHIPPING_ADDRESS=\"SHIPPING_ADDRESS\",e.SHIPPING_OPTION=\"SHIPPING_OPTION\"}(Nr||(Nr={})),function(e){e.OFFER_INVALID=\"OFFER_INVALID\",e.PAYMENT_DATA_INVALID=\"PAYMENT_DATA_INVALID\",e.SHIPPING_ADDRESS_INVALID=\"SHIPPING_ADDRESS_INVALID\",e.SHIPPING_ADDRESS_UNSERVICEABLE=\"SHIPPING_ADDRESS_UNSERVICEABLE\",e.SHIPPING_OPTION_INVALID=\"SHIPPING_OPTION_INVALID\",e.OTHER_ERROR=\"OTHER_ERROR\"}(xr||(xr={})),function(e){e.INITIALIZE=\"INITIALIZE\",e.SHIPPING_OPTION=\"SHIPPING_OPTION\",e.SHIPPING_ADDRESS=\"SHIPPING_ADDRESS\",e.OFFER=\"OFFER\"}(Fr||(Fr={}));var Lr,Br=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class jr{constructor(e,t){this._gatewayIdentifier=e,this._paymentIntegrationService=t,this._isBuyNowFlow=!1}mapToShippingAddressRequestBody({shippingAddress:e}){if(!e)return;const{company:t=\"\",phone:n=\"\"}=this._paymentIntegrationService.getState().getShippingAddress()||{};return this._mapToAddressRequestBody(e,t,n)}mapToBillingAddressRequestBody(e){const{billingAddress:t}=e.paymentMethodData.info;if(!t)return;const{company:n=\"\",phone:i=\"\",email:r,customFields:o=[]}=this._paymentIntegrationService.getState().getBillingAddress()||{};return Object.assign(Object.assign({},this._mapToAddressRequestBody(t,n,i,o)),{email:r||e.email})}mapToExternalCheckoutData(e){var t;const{paymentMethodData:{tokenizationData:{token:n},info:{cardNetwork:i,cardDetails:r}}}=e;if(!n)throw new jt(kt.MissingPaymentToken);return Promise.resolve(Object.assign({nonce:n,card_information:{type:i,number:r}},this._isBuyNowFlow&&{cart_id:null===(t=this._paymentIntegrationService.getState().getCart())||void 0===t?void 0:t.id}))}getRequiredData(){var e;return Br(this,void 0,void 0,function*(){const t={emailRequired:!0};if(!this._isShippingAddressRequired())return t;const n=yield this._paymentIntegrationService.loadShippingCountries(),i=null===(e=n.getShippingCountries())||void 0===e?void 0:e.map(e=>e.code);return Object.assign(Object.assign({},t),{shippingAddressRequired:!0,shippingAddressParameters:Object.assign({phoneNumberRequired:!0},i&&{allowedCountryCodes:i}),shippingOptionRequired:!0})})}getCallbackIntents(){return this._isShippingAddressRequired()?[Nr.OFFER,Nr.SHIPPING_ADDRESS,Nr.SHIPPING_OPTION]:[Nr.OFFER]}getCallbackTriggers(){const e=this._paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features[\"PI-2875.googlepay_coupons_handling\"]||!1;return{availableTriggers:[Fr.INITIALIZE,Fr.SHIPPING_ADDRESS,Fr.SHIPPING_OPTION,...e?[Fr.OFFER]:[]],initializationTrigger:[Fr.INITIALIZE],addressChangeTriggers:[Fr.INITIALIZE,Fr.SHIPPING_ADDRESS],shippingOptionsChangeTriggers:[Fr.SHIPPING_OPTION],offerChangeTriggers:e?[Fr.OFFER]:[]}}getNonce(e){var t;const n=null===(t=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.nonce;if(!n)throw new jt(kt.MissingPaymentToken);return Promise.resolve(n)}extraPaymentData(){return Promise.resolve(void 0)}getMerchantInfo(){const{googleMerchantName:e,googleMerchantId:t,platformToken:n}=this.getGooglePayInitializationData();return{merchantName:e,merchantId:t,authJwt:n}}getTransactionInfo(){let e;if(this._isBuyNowFlow)e=this._getCurrencyCodeOrThrow();else{const{getCartOrThrow:t}=this._paymentIntegrationService.getState();e=t().currency.code}const t=this.getGooglePayInitializationData().storeCountry;return Object.assign(Object.assign({},t&&{countryCode:t}),{currencyCode:e,totalPriceStatus:Mr.ESTIMATED,totalPrice:\"0\"})}getPaymentGatewayParameters(){const e=this.getGooglePayInitializationData().gatewayMerchantId;if(!e)throw new rn(\"Unable to proceed, gatewayMerchantId is missing.\");return{gateway:this._gatewayIdentifier,gatewayMerchantId:e}}getCardParameters(){return{allowedAuthMethods:[\"PAN_ONLY\",\"CRYPTOGRAM_3DS\"],allowedCardNetworks:this.getPaymentMethod().supportedCards.filter(Rr).map(e=>zr[e]),billingAddressRequired:!0,billingAddressParameters:{format:\"FULL\",phoneNumberRequired:!0}}}initialize(e,t,n){return this._getPaymentMethodFn=e,this._isBuyNowFlow=Boolean(t),this._currencyCode=n,this._isBuyNowFlow&&this._getCurrencyCodeOrThrow(),Promise.resolve()}handleShippingAddressChange(e){var t,n,i,r;return Br(this,void 0,void 0,function*(){e&&(e.name=e.name||\"\",e.address1=e.address1||\"\");const o=this.mapToShippingAddressRequestBody({shippingAddress:e});o&&(yield this._paymentIntegrationService.updateShippingAddress(o));const a=this._paymentIntegrationService.getState(),s=a.getConsignments();if(!(null==s?void 0:s[0]))return;const d=s[0],c=a.getStoreConfigOrThrow();this._currencyService||(this._currencyService=new Or(c));const l=(d.availableShippingOptions||[]).map(this._getGooglePayShippingOption.bind(this)),u=null===(t=d.availableShippingOptions)||void 0===t?void 0:t.find(e=>e.isRecommended);if(l.length){const e=(null===(n=d.selectedShippingOption)||void 0===n?void 0:n.id)||(null==u?void 0:u.id)||(null===(i=l[0])||void 0===i?void 0:i.id);return!(null===(r=d.selectedShippingOption)||void 0===r?void 0:r.id)&&l[0]&&(yield this.handleShippingOptionChange((null==u?void 0:u.id)||l[0].id)),{defaultSelectedOptionId:e,shippingOptions:l}}})}handleShippingOptionChange(e){return Br(this,void 0,void 0,function*(){if(\"shipping_option_unselected\"!==e)return this._paymentIntegrationService.selectShippingOption(e)})}getTotalPrice(){const{getCheckoutOrThrow:e,getCartOrThrow:t}=this._paymentIntegrationService.getState(),{decimalPlaces:n}=t().currency;return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.round)(e().outstandingBalance,n).toFixed(n)}handleCoupons(e){return Br(this,void 0,void 0,function*(){const{redemptionCodes:t=[]}=e,{offers:n}=this.getAppliedCoupons();let i;return yield t.reduce((e,t)=>Br(this,void 0,void 0,function*(){if(yield e,n.some(({redemptionCode:e})=>e===t))return;const r=yield this.applyCoupon(t);r&&(i=r)}),Promise.resolve()),yield n.reduce((e,n)=>Br(this,void 0,void 0,function*(){yield e,t.includes(n.redemptionCode)||(yield this._paymentIntegrationService.removeCoupon(n.redemptionCode))}),Promise.resolve()),{newOfferInfo:this.getAppliedCoupons(),error:i}})}getAppliedCoupons(){const e=this._paymentIntegrationService.getState(),{coupons:t}=e.getCheckout()||{};return{offers:(t||[]).map(e=>{const{displayName:t,code:n}=e;return{redemptionCode:n,description:t}})}}applyCoupon(e){return Br(this,void 0,void 0,function*(){let t;try{yield this._paymentIntegrationService.applyCoupon(e)}catch(e){return e instanceof Error&&(t={reason:xr.OFFER_INVALID,message:e.message,intent:Fr.OFFER}),t}})}getGooglePayInitializationData(){return qt(this.getPaymentMethod().initializationData,()=>new rn(\"Missing initialization data.\"))}getPaymentMethod(){return qt(this._getPaymentMethodFn,()=>new Vt(Tt.PaymentNotInitialized))()}getGatewayIdentifier(){return this._gatewayIdentifier}setGatewayIdentifier(e){this._gatewayIdentifier=e||this.getGatewayIdentifier()}_isShippingAddressRequired(){const{getCartOrThrow:e,getStoreConfig:t,getShippingAddress:n}=this._paymentIntegrationService.getState();return void 0===n()&&Er(e(),t())}_mapToAddressRequestBody(e,t,n,i){const{name:r,address1:o,address2:a,address3:s,locality:d,administrativeArea:c,countryCode:l,postalCode:u,phoneNumber:h}=e,[p,m]=this._getFirstAndLastName(r);return{firstName:p,lastName:m,company:t,address1:o,address2:`${a} ${s}`.trim(),city:d||c,stateOrProvince:c,stateOrProvinceCode:c,countryCode:l,postalCode:u,phone:h||n,customFields:i||[]}}_getFirstAndLastName(e){const t=e.split(\" \");return 1===t.length?[e,\"\"]:[t.slice(0,-1).join(\" \"),t[t.length-1]]}_getCurrencyCodeOrThrow(){return qt(this._currencyCode,()=>new rn('Unable to initialize payment because \"options.currencyCode\" argument is not provided.'))}_getGooglePayShippingOption({id:e,cost:t,description:n,additionalDescription:i}){var r;const o=null===(r=this._currencyService)||void 0===r?void 0:r.toCustomerCurrency(t);return this._paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features[\"PI-3540.googlepay_new_shipping_options_description\"]?{id:e,label:`${o||t} ${n}`,description:i}:{id:e,label:n,description:o||t}}}function Ur(e){return\"object\"==typeof e&&null!==e&&\"statusCode\"in e}function qr(e){return Object.values(Lr).includes(e)}!function(e){e.ADYEN_V2=\"googlepayadyenv2\",e.ADYEN_V3=\"googlepayadyenv3\",e.AUTHORIZE_NET=\"googlepayauthorizenet\",e.BNZ=\"googlepaybnz\",e.BRAINTREE=\"googlepaybraintree\",e.PAYPAL_COMMERCE=\"googlepaypaypalcommerce\",e.BIGCOMMERCE_PAYMENTS=\"googlepay_bigcommerce_payments\",e.CHECKOUT_COM=\"googlepaycheckoutcom\",e.CYBERSOURCE_V2=\"googlepaycybersourcev2\",e.ORBITAL=\"googlepayorbital\",e.STRIPE=\"googlepaystripe\",e.STRIPE_UPE=\"googlepaystripeupe\",e.STRIPE_OCS=\"googlepaystripeocs\",e.WORLDPAY_ACCESS=\"googlepayworldpayaccess\",e.TD_ONLINE_MART=\"googlepaytdonlinemart\"}(Lr||(Lr={}));var Vr=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Gr{constructor(e,t){this._paymentIntegrationService=e,this._googlePayPaymentProcessor=t}initialize(e){var t;return Vr(this,void 0,void 0,function*(){if(!(null==e?void 0:e.methodId)||!qr(e.methodId))throw new rn('Unable to proceed because \"methodId\" is not a valid key.');this._methodId=e.methodId;const n=e[this._getMethodId()];if(!n)throw new rn(\"Unable to proceed without valid options.\");let i,r=this._paymentIntegrationService.getState();try{i=r.getPaymentMethodOrThrow(this._getMethodId())}catch(e){r=yield this._paymentIntegrationService.loadPaymentMethod(this._getMethodId()),i=r.getPaymentMethodOrThrow(this._getMethodId())}try{yield this._googlePayPaymentProcessor.initialize(()=>i,this._getGooglePayClientOptions(null===(t=i.initializationData)||void 0===t?void 0:t.storeCountry))}catch(e){return}this._addPaymentButton(n)})}signIn(){return Promise.reject(new on('In order to sign in via Google Pay, the shopper must click on \"Google Pay\" button.'))}signOut(){var e;return Vr(this,void 0,void 0,function*(){const t=null===(e=this._paymentIntegrationService.getState().getPaymentId())||void 0===e?void 0:e.providerId;t&&(yield this._googlePayPaymentProcessor.signOut(t))})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}deinitialize(){var e;return null===(e=this._paymentButton)||void 0===e||e.remove(),this._paymentButton=void 0,this._methodId=void 0,Promise.resolve()}_getGooglePayClientOptions(e){return{paymentDataCallbacks:{onPaymentDataChanged:({callbackTrigger:t,shippingAddress:n,shippingOptionData:i,offerData:r})=>Vr(this,void 0,void 0,function*(){const{availableTriggers:o,addressChangeTriggers:a,shippingOptionsChangeTriggers:s,offerChangeTriggers:d}=this._googlePayPaymentProcessor.getCallbackTriggers();if(!o.includes(t))return;const c=a.includes(t)?yield this._googlePayPaymentProcessor.handleShippingAddressChange(n):void 0;s.includes(t)&&(yield this._googlePayPaymentProcessor.handleShippingOptionChange(i.id));const{newOfferInfo:l,error:u}=d.includes(t)?yield this._googlePayPaymentProcessor.handleCoupons(r):{},h=u;yield this._paymentIntegrationService.loadCheckout();const p=this._googlePayPaymentProcessor.getTotalPrice(),{code:m}=this._paymentIntegrationService.getState().getCartOrThrow().currency;return Object.assign(Object.assign(Object.assign({newTransactionInfo:Object.assign(Object.assign({},e&&{countryCode:e}),{currencyCode:m,totalPriceStatus:Mr.FINAL,totalPrice:p})},c&&{newShippingOptionParameters:c}),l&&{newOfferInfo:l}),h&&{error:h})})}}}_addPaymentButton({container:e,buttonColor:t,buttonType:n,onClick:i,onError:r}){var o;this._paymentButton=null!==(o=this._paymentButton)&&void 0!==o?o:this._googlePayPaymentProcessor.addPaymentButton(e,{buttonColor:null!=t?t:\"default\",buttonType:null!=n?n:\"plain\",onClick:this._handleClick(r,i)})}_handleClick(e,t){return n=>Vr(this,void 0,void 0,function*(){n.preventDefault(),t&&\"function\"==typeof t&&t();try{yield this._googlePayPaymentProcessor.initializeWidget(),yield this._interactWithPaymentSheet()}catch(t){let n=t;if(Ur(t)){if(\"CANCELED\"===t.statusCode)throw new Mn;n=new Li(JSON.stringify(t))}throw null==e||e(new Li(\"An error occurred while requesting your Google Pay payment details.\")),n}})}_interactWithPaymentSheet(){return Vr(this,void 0,void 0,function*(){const e=yield this._googlePayPaymentProcessor.showPaymentSheet(),t=this._googlePayPaymentProcessor.mapToBillingAddressRequestBody(e),n=this._googlePayPaymentProcessor.mapToShippingAddressRequestBody(e),i=\"/embedded-checkout\"===window.location.pathname?this._paymentIntegrationService.getState().getStoreConfigOrThrow().links.siteLink:void 0;t&&(yield this._paymentIntegrationService.updateBillingAddress(t)),n&&(yield this._paymentIntegrationService.updateShippingAddress(n)),yield this._googlePayPaymentProcessor.setExternalCheckoutForm(this._getMethodId(),e,i)})}_getMethodId(){return qt(this._methodId,()=>new Vt(Tt.PaymentNotInitialized))}}var Hr=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class $r{constructor(e,t,n,i){this._scriptLoader=e,this._gateway=t,this._requestSender=n,this._formPoster=i,this._baseRequest={apiVersion:2,apiVersionMinor:0}}initialize(e,t,n,i){return Hr(this,void 0,void 0,function*(){this._paymentsClient=yield this._scriptLoader.getGooglePaymentsClient(e().config.testMode,t),yield this._gateway.initialize(e,n,i),this._buildButtonPayloads()})}initializeWidget(){return Hr(this,void 0,void 0,function*(){yield this._buildWidgetPayloads(),yield this._determineReadinessToPay(),this._prefetchGooglePaymentData()})}getNonce(e){return this._gateway.getNonce(e)}extraPaymentData(){return Hr(this,void 0,void 0,function*(){return this._gateway.extraPaymentData()})}addPaymentButton(e,t){const n=document.querySelector(`#${e}`);if(!n)return;const i=this._getPaymentsClient().createButton(Object.assign(Object.assign({},t),{allowedPaymentMethods:[this._getBaseCardPaymentMethod()]}));return n.appendChild(i)}showPaymentSheet(){return Hr(this,void 0,void 0,function*(){const e=this._getPaymentDataRequest();return this._getPaymentsClient().loadPaymentData(e)})}setExternalCheckoutXhr(e,t){return Hr(this,void 0,void 0,function*(){return this._setExternalCheckout(e,t)})}setExternalCheckoutForm(e,t,n){return Hr(this,void 0,void 0,function*(){return this._setExternalCheckout(e,t,!0,n)})}mapToBillingAddressRequestBody(e){return this._gateway.mapToBillingAddressRequestBody(e)}mapToShippingAddressRequestBody(e){return this._gateway.mapToShippingAddressRequestBody(e)}processAdditionalAction(e,t){return\"processAdditionalAction\"in this._gateway?this._gateway.processAdditionalAction(e,t):Promise.reject(e)}signOut(e){return Hr(this,void 0,void 0,function*(){yield this._requestSender.get(`/remote-checkout/${e}/signout`)})}getCallbackTriggers(){return this._gateway.getCallbackTriggers()}handleShippingAddressChange(e){return Hr(this,void 0,void 0,function*(){return this._gateway.handleShippingAddressChange(e)})}handleShippingOptionChange(e){return Hr(this,void 0,void 0,function*(){yield this._gateway.handleShippingOptionChange(e)})}handleCoupons(e){return Hr(this,void 0,void 0,function*(){return this._gateway.handleCoupons(e)})}getTotalPrice(){return this._gateway.getTotalPrice()}_setExternalCheckout(e,t,n=!1,i){return Hr(this,void 0,void 0,function*(){const r=\"/checkout.php\",o=Object.assign({action:\"set_external_checkout\",provider:e},yield this._gateway.mapToExternalCheckoutData(t));if(n)return new Promise(e=>{this._formPoster.postForm(i?`${i}/checkout`:r,Object.assign(Object.assign({},o),{card_information:JSON.stringify(o.card_information)}),e)});yield this._requestSender.post(r,{headers:Object.assign({Accept:\"text/html\",\"Content-Type\":\"application/x-www-form-urlencoded\"},ni),body:o})})}_prefetchGooglePaymentData(){const e=this._getPaymentDataRequest();e.transactionInfo=this._gateway.getTransactionInfo(),this._getPaymentsClient().prefetchPaymentData(e)}_determineReadinessToPay(){return Hr(this,void 0,void 0,function*(){try{const{result:e}=yield this._getPaymentsClient().isReadyToPay(this._getIsReadyToPayRequest());if(!1===e)throw new Li(\"Google Pay is not supported by the current device and browser, please try another payment method.\")}catch(e){if(e instanceof Li)throw e;throw new Li}})}_buildButtonPayloads(){this._baseCardPaymentMethod={type:\"CARD\",parameters:this._gateway.getCardParameters()}}_buildWidgetPayloads(){return Hr(this,void 0,void 0,function*(){const e=this._getBaseCardPaymentMethod();this._cardPaymentMethod=Object.assign(Object.assign({},e),{tokenizationSpecification:{type:\"PAYMENT_GATEWAY\",parameters:yield this._gateway.getPaymentGatewayParameters()}}),this._paymentDataRequest=Object.assign(Object.assign(Object.assign(Object.assign({},this._baseRequest),{allowedPaymentMethods:[this._cardPaymentMethod],transactionInfo:this._gateway.getTransactionInfo(),merchantInfo:this._gateway.getMerchantInfo()}),yield this._gateway.getRequiredData()),{callbackIntents:this._gateway.getCallbackIntents(),offerInfo:this._gateway.getAppliedCoupons()}),this._isReadyToPayRequest=Object.assign(Object.assign({},this._baseRequest),{allowedPaymentMethods:[e]})})}_getBaseCardPaymentMethod(){return this._getOrThrow(this._baseCardPaymentMethod)}_getPaymentDataRequest(){return this._getOrThrow(this._paymentDataRequest)}_getIsReadyToPayRequest(){return this._getOrThrow(this._isReadyToPayRequest)}_getPaymentsClient(){return this._getOrThrow(this._paymentsClient)}_getOrThrow(e){return qt(e,()=>new Vt(Tt.PaymentNotInitialized))}}class Wr{constructor(e){this._scriptLoader=e,this._window=window}getGooglePaymentsClient(e=!1,t){return n=this,i=void 0,o=function*(){if(yield this._scriptLoader.loadScript(\"https://pay.google.com/gp/p/js/pay.js\"),!this._window.google)throw new Xt;return void 0===this._paymentsClient&&(this._paymentsClient=new this._window.google.payments.api.PaymentsClient(Object.assign({environment:e?\"TEST\":\"PRODUCTION\"},null!=t?t:{}))),this._paymentsClient},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}}function Yr(){return new Wr((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())}const Kr=nn(e=>{const t=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)();return new Gr(e,new $r(Yr(),new jr(\"adyen\",e),t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()))},[{id:\"googlepayadyenv2\"}]),Jr=nn(e=>{const t=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)();return new Gr(e,new $r(Yr(),new jr(\"adyen\",e),t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()))},[{id:\"googlepayadyenv3\"}]);class Zr extends jr{constructor(e){super(\"authorizenet\",e)}mapToExternalCheckoutData(e){const t=Object.create(null,{mapToExternalCheckoutData:{get:()=>super.mapToExternalCheckoutData}});return n=this,i=void 0,o=function*(){const n=yield t.mapToExternalCheckoutData.call(this,e);return n.nonce=btoa(n.nonce),n},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}getPaymentGatewayParameters(){const e=this.getGooglePayInitializationData();return function(e){if(!function(e){return\"paymentGatewayId\"in e}(e))throw new jt(kt.MissingPaymentMethod)}(e),{gateway:this.getGatewayIdentifier(),gatewayMerchantId:e.paymentGatewayId}}}const Qr=nn(e=>new Gr(e,new $r(Yr(),new Zr(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepayauthorizenet\"}]),Xr=e=>\"object\"==typeof e&&null!==e&&\"body\"in e;function eo(e){if(!function(e){return\"checkoutcomkey\"in e}(e))throw new jt(kt.MissingPaymentMethod)}var to=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class no extends jr{constructor(e,t){super(\"checkoutltd\",e),this._requestSender=t}processAdditionalAction(e){return new Promise((t,n)=>{if(Xr(e)&&function(e){var t;if(\"object\"!=typeof e||null===e)return!1;const n=e;return\"string\"==typeof(null===(t=n.three_ds_result)||void 0===t?void 0:t.acs_url)&&\"string\"==typeof n.three_ds_result.code}(e.body)&&\"three_d_secure_required\"===e.body.three_ds_result.code)return window.location.assign(e.body.three_ds_result.acs_url);n(e)})}mapToExternalCheckoutData(e){const t=Object.create(null,{mapToExternalCheckoutData:{get:()=>super.mapToExternalCheckoutData}});return to(this,void 0,void 0,function*(){const n=yield t.mapToExternalCheckoutData.call(this,e);let i;try{i=JSON.parse(n.nonce)}catch(e){throw new rn(\"Unable to parse response from Google Pay.\")}return function(e){if(!function(e){return\"object\"==typeof e&&null!==e&&\"protocolVersion\"in e&&\"signature\"in e&&\"signedMessage\"in e}(e))throw new jt(kt.MissingPaymentToken)}(i),n.nonce=yield this._tokenize(i),n})}getPaymentGatewayParameters(){const e=this.getGooglePayInitializationData();return eo(e),{gateway:this.getGatewayIdentifier(),gatewayMerchantId:e.checkoutcomkey}}_tokenize(e){return to(this,void 0,void 0,function*(){const t=this.getPaymentMethod().config.testMode?\"https://api.sandbox.checkout.com/tokens\":\"https://api.checkout.com/tokens\",n=this.getGooglePayInitializationData();eo(n);const{body:i}=yield this._requestSender.post(t,{credentials:!1,body:{type:\"googlepay\",token_data:e},headers:{Authorization:n.checkoutcomkey,\"Content-Type\":ti.Json,\"X-XSRF-TOKEN\":null}});return i.token})}}const io=nn(e=>{const t=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)();return new Gr(e,new $r(Yr(),new no(e,t),t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()))},[{id:\"googlepaycheckoutcom\"}]);class ro extends jr{constructor(e){super(\"cybersource\",e)}mapToExternalCheckoutData(e){const t=Object.create(null,{mapToExternalCheckoutData:{get:()=>super.mapToExternalCheckoutData}});return n=this,i=void 0,o=function*(){const n=yield t.mapToExternalCheckoutData.call(this,e);return n.nonce=btoa(n.nonce),n},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}}const oo=nn(e=>new Gr(e,new $r(Yr(),new ro(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaycybersourcev2\"}]),ao=nn(e=>new Gr(e,new $r(Yr(),new ro(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaybnz\"}]);class so extends jr{constructor(e){super(\"chase\",e)}mapToExternalCheckoutData(e){const t=Object.create(null,{mapToExternalCheckoutData:{get:()=>super.mapToExternalCheckoutData}});return n=this,i=void 0,o=function*(){const n=yield t.mapToExternalCheckoutData.call(this,e);return n.nonce=btoa(n.nonce),n},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}}const co=nn(e=>new Gr(e,new $r(Yr(),new so(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepayorbital\"}]);function lo(e){if(!function(e){return\"stripeConnectedAccount\"in e&&\"stripePublishableKey\"in e&&\"stripeVersion\"in e}(e))throw new jt(kt.MissingPaymentMethod)}var uo=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class ho extends jr{constructor(e,t){super(\"stripe\",e),this.paymentIntegrationService=e,this.scriptLoader=t}mapToExternalCheckoutData(e){const t=Object.create(null,{mapToExternalCheckoutData:{get:()=>super.mapToExternalCheckoutData}});return uo(this,void 0,void 0,function*(){const n=yield t.mapToExternalCheckoutData.call(this,e);let i;try{i=JSON.parse(n.nonce)}catch(e){throw new rn(\"Unable to parse response from Google Pay.\")}return function(e){if(!function(e){return\"object\"==typeof e&&null!==e&&\"id\"in e}(e))throw new jt(kt.MissingPaymentToken)}(i),n.nonce=i.id,n})}getPaymentGatewayParameters(){const e=this.getGooglePayInitializationData();lo(e);const{stripeVersion:t,stripePublishableKey:n,stripeConnectedAccount:i}=e;return{gateway:this.getGatewayIdentifier(),\"stripe:version\":t,\"stripe:publishableKey\":`${n}/${i}`}}processAdditionalAction(e,t){var n,i;return uo(this,void 0,void 0,function*(){if(!t)throw new Yi([\"payment\"]);if(!Xr(e)||(\"object\"!=typeof(r=e.body)||null===r||!(\"three_ds_result\"in r)||!(\"errors\"in r)))throw e;var r;const o=this.paymentIntegrationService.getState(),a=null===(n=o.getStoreConfig())||void 0===n?void 0:n.checkoutSettings.features[\"STRIPE-476.enable_stripe_googlepay_3ds\"];if((0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"three_d_secure_required\"})&&a){const n=this.getGooglePayInitializationData();lo(n);const{stripePublishableKey:r,stripeConnectedAccount:o}=n;this.stripeUPEClient=yield this.loadStripeJs(r,o);const a=e.body.three_ds_result.token;let s,d=!1;try{s=yield this.stripeUPEClient.confirmCardPayment(a)}catch(e){try{s=yield this.stripeUPEClient.retrievePaymentIntent(a)}catch(e){d=!0}}if(null==s?void 0:s.error){if(this._throwDisplayableStripeError(s.error),this._isCancellationError(s.error))throw new Mn;throw new Li}if(!(null==s?void 0:s.paymentIntent)&&!d)throw new qn;return this.paymentIntegrationService.submitPayment({methodId:t,paymentData:{nonce:(null===(i=null==s?void 0:s.paymentIntent)||void 0===i?void 0:i.id)||a}})}throw e})}loadStripeJs(e,t){return uo(this,void 0,void 0,function*(){return this.stripeUPEClient?this.stripeUPEClient:this.scriptLoader.getStripeClient(e,t)})}_isCancellationError(e){var t,n;return e&&-1!==(null===(n=null===(t=e.payment_intent.last_payment_error)||void 0===t?void 0:t.message)||void 0===n?void 0:n.indexOf(\"canceled\"))}_throwDisplayableStripeError(e){if((0,lodash__WEBPACK_IMPORTED_MODULE_5__.includes)([\"card_error\",\"invalid_request_error\",\"validation_error\"],e.type))throw new Error(e.message)}}var po=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class mo{constructor(e,t=window){this.scriptLoader=e,this.stripeWindow=t}getStripeClient(e,t,n){return po(this,void 0,void 0,function*(){let i=this.stripeWindow.bcStripeClient;return i||(i=(yield this.load())(e,{stripeAccount:t,locale:n,betas:[\"payment_element_beta_2\",\"alipay_pm_beta_1\",\"link_default_integration_beta_1\",\"shipping_address_element_beta_1\",\"address_element_beta_1\"],apiVersion:\"2020-03-02;alipay_beta=v1;link_beta=v1\"}),Object.assign(this.stripeWindow,{bcStripeClient:i})),i})}load(){return po(this,void 0,void 0,function*(){if(this.stripeWindow.Stripe||(yield this.scriptLoader.loadScript(\"https://js.stripe.com/v3/\")),!this.stripeWindow.Stripe)throw new Xt;return this.stripeWindow.Stripe})}}const yo=nn(e=>new Gr(e,new $r(Yr(),new ho(e,new mo((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaystripe\"},{id:\"googlepaystripeocs\"}]),go=nn(e=>new Gr(e,new $r(Yr(),new ho(e,new mo((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaystripeupe\"}]);class vo extends jr{constructor(e){super(\"worldpay\",e)}mapToExternalCheckoutData(e){const t=Object.create(null,{mapToExternalCheckoutData:{get:()=>super.mapToExternalCheckoutData}});return n=this,i=void 0,o=function*(){const n=yield t.mapToExternalCheckoutData.call(this,e);return n.nonce=btoa(n.nonce),n},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}}const fo=nn(e=>new Gr(e,new $r(Yr(),new vo(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepayworldpayaccess\"}]);var So=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class _o extends jr{constructor(e,t){super(\"braintree\",e),this._braintreeSdk=t,this._methodId=Lr.BRAINTREE,this._service=e}initialize(e,t,n){const i=Object.create(null,{initialize:{get:()=>super.initialize},getPaymentMethod:{get:()=>super.getPaymentMethod}});return So(this,void 0,void 0,function*(){yield i.initialize.call(this,e,t,n);let r=i.getPaymentMethod.call(this);if(r.clientToken||(r=(yield this._service.loadPaymentMethod(this._methodId)).getPaymentMethodOrThrow(this._methodId)),!r.clientToken||!r.initializationData)throw new jt(kt.MissingPaymentMethod);return this._braintreeSdk.initialize(r.clientToken),this._braintreeGooglePayment=yield this._braintreeSdk.getBraintreeGooglePayment(),Promise.resolve()})}getNonce(e){const t=Object.create(null,{getNonce:{get:()=>super.getNonce},getPaymentMethod:{get:()=>super.getPaymentMethod}});var n;return So(this,void 0,void 0,function*(){const i=yield t.getNonce.call(this,e),{clientToken:r,initializationData:o}=t.getPaymentMethod.call(this);if(!r||!o||!(null===(n=o.card_information)||void 0===n?void 0:n.bin))throw new jt(kt.MissingPaymentMethod);const{isThreeDSecureEnabled:a,card_information:{bin:s,isNetworkTokenized:d}}=o;if(a&&!d){const e=yield this._braintreeSdk.getBraintreeThreeDS(),{orderAmount:t}=this._service.getState().getOrderOrThrow();return(yield this._braintreePresent3DSChallenge(e,t,i,s)).nonce}return i})}extraPaymentData(){return So(this,void 0,void 0,function*(){return{deviceSessionId:yield this._getBraintreeDeviceData()}})}mapToExternalCheckoutData(e){const t=Object.create(null,{mapToExternalCheckoutData:{get:()=>super.mapToExternalCheckoutData}});return So(this,void 0,void 0,function*(){const n=yield t.mapToExternalCheckoutData.call(this,e);let i;try{i=JSON.parse(n.nonce)}catch(e){throw new rn(\"Unable to parse response from Google Pay.\")}return function(e){if(!function(e){return\"object\"==typeof e&&null!==e&&\"androidPayCards\"in e}(e))throw new jt(kt.MissingPaymentToken)}(i),n.nonce=i.androidPayCards[0].nonce,n.card_information.bin=i.androidPayCards[0].details.bin,n.card_information.isNetworkTokenized=i.androidPayCards[0].details.isNetworkTokenized,n})}getCardParameters(){return super.getCardParameters()}getPaymentGatewayParameters(){const e=Object.create(null,{getMerchantInfo:{get:()=>super.getMerchantInfo},getTransactionInfo:{get:()=>super.getTransactionInfo},getRequiredData:{get:()=>super.getRequiredData}});return So(this,void 0,void 0,function*(){return this.getBraintreeGooglePayment().createPaymentDataRequest(Object.assign({merchantInfo:e.getMerchantInfo.call(this),transactionInfo:e.getTransactionInfo.call(this),cardRequirements:{billingAddressRequired:!0,billingAddressFormat:\"FULL\"}},yield e.getRequiredData.call(this))).paymentMethodTokenizationParameters.parameters})}getBraintreeGooglePayment(){if(!this._braintreeGooglePayment)throw new jt(kt.MissingPaymentMethod);return this._braintreeGooglePayment}_getBraintreeDeviceData(){return So(this,void 0,void 0,function*(){const{deviceData:e}=yield this._braintreeSdk.getDataCollectorOrThrow();return e})}_braintreePresent3DSChallenge(e,t,n,i){return new Ji(e.verifyCard({amount:t,bin:i,nonce:n,onLookupComplete:(e,t)=>{t()}})).promise}}const wo=nn(e=>{const t=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),i=window,r=new pn(e),o=new En(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),i,r));return new Gr(e,new $r(Yr(),new _o(e,o),t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()))},[{id:\"googlepaybraintree\"}]);var Co=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Io{constructor(e){this.scriptLoader=e,this.window=window}getPayPalFastlaneSdk(e,t,n){return Co(this,void 0,void 0,function*(){if(!this.window.paypalFastlaneSdk){const i=this.getPayPalFastlaneSdkConfiguration(e,t,n);if(yield this.loadPayPalSdk(i),!this.window.paypalFastlaneSdk)throw new Xt}return this.window.paypalFastlaneSdk})}getPayPalGooglePaySdk(e,t,n,i){return Co(this,void 0,void 0,function*(){if(!this.window.paypalGooglePay||i){const i=this.getPayPalGooglePaySdkScriptConfigOrThrow(e,t,n);yield this.loadPayPalSdk(i)}if(!this.window.paypalGooglePay)throw new Xt;return this.window.paypalGooglePay})}getPayPalApmsSdk(e,t){return Co(this,void 0,void 0,function*(){if(!this.window.paypalApms){const n=this.getPayPalApmSdkConfiguration(e,t);if(yield this.loadPayPalSdk(n),!this.window.paypalApms)throw new Xt}return this.window.paypalApms})}getPayPalMessages(e,t){return Co(this,void 0,void 0,function*(){if(!this.window.paypalMessages){const n=this.getPayPalSdkMessagesConfiguration(e,t);yield this.loadPayPalSdk(n)}if(!this.window.paypalMessages)throw new Xt;return this.window.paypalMessages})}loadPayPalSdk({options:e,attributes:t}){return Co(this,void 0,void 0,function*(){const n=this.transformConfig(e),i=this.transformConfig(t),r=`https://www.paypal.com/sdk/js?${new URLSearchParams(n).toString()}`;yield this.scriptLoader.loadScript(r,{async:!0,attributes:i})})}getPayPalFastlaneSdkConfiguration(e,t,n){const{clientToken:i,initializationData:r}=e;if(!r||!r.clientId)throw new jt(kt.MissingPaymentMethod);const{intent:o,clientId:a,merchantId:s,attributionId:d}=r;return{options:{\"client-id\":a,\"merchant-id\":s,commit:!0,components:[\"fastlane\",\"buttons\",\"payment-fields\",\"hosted-fields\",\"three-domain-secure\"],currency:t,intent:o},attributes:{\"data-client-metadata-id\":n.replace(/-/g,\"\"),\"data-namespace\":\"paypalFastlaneSdk\",\"data-partner-attribution-id\":d,\"data-sdk-client-token\":i}}}getPayPalGooglePaySdkScriptConfigOrThrow(e,t,n=!0){const{clientToken:i,initializationData:r}=e;if(!r||!r.clientId)throw new jt(kt.MissingPaymentMethod);const{intent:o,clientId:a,merchantId:s,buyerCountry:d,attributionId:c,isHostedCheckoutEnabled:l,isDeveloperModeApplicable:u}=r,h=l||n;return{options:Object.assign({\"client-id\":a,\"merchant-id\":s,commit:h,components:[\"googlepay\"],currency:t,intent:o},u&&{\"buyer-country\":d}),attributes:{\"data-partner-attribution-id\":c,\"data-client-token\":i,\"data-namespace\":\"paypalGooglePay\"}}}getPayPalApmSdkConfiguration(e,t){const{initializationData:n}=e;if(!n||!n.clientId)throw new jt(kt.MissingPaymentMethod);const{intent:i,clientId:r,merchantId:o,buyerCountry:a,attributionId:s,isDeveloperModeApplicable:d,availableAlternativePaymentMethods:c=[],enabledAlternativePaymentMethods:l=[]}=n,u=l,h=c.filter(e=>!l.includes(e));return{options:Object.assign({\"client-id\":r,\"merchant-id\":o,\"enable-funding\":u.length>0?u:void 0,\"disable-funding\":h.length>0?h:void 0,commit:!0,components:[\"buttons\",\"payment-fields\"],currency:t,intent:i},d&&{\"buyer-country\":a}),attributes:{\"data-partner-attribution-id\":s,\"data-namespace\":\"paypalApms\"}}}getPayPalSdkMessagesConfiguration(e,t){const{initializationData:n}=e;if(!n||!n.clientId)throw new jt(kt.MissingPaymentMethod);const{clientId:i,merchantId:r,attributionId:o,isDeveloperModeApplicable:a,buyerCountry:s}=n;return{options:Object.assign({\"client-id\":i,\"merchant-id\":r,components:[\"messages\"],currency:t},a&&{\"buyer-country\":s}),attributes:{\"data-namespace\":\"paypalMessages\",\"data-partner-attribution-id\":o}}}transformConfig(e){let t={};return Object.keys(e).forEach(n=>{const i=e[n];null==i||\"\"===i||Array.isArray(i)&&0===i.length||(t=Object.assign(Object.assign({},t),{[n]:Array.isArray(i)?i.join(\",\"):i}))}),t}}function bo(e){if(!function(e){return!!e.initializationData&&\"attributionId\"in e.initializationData&&\"isVenmoEnabled\"in e.initializationData&&\"isGooglePayEnabled\"in e.initializationData&&\"isPayPalCreditAvailable\"in e.initializationData}(e))throw new jt(kt.MissingPaymentMethod)}var Po=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Oo extends jr{constructor(e,t){super(\"paypalsb\",e),this.payPalCommerceSdk=t,this.service=e}initialize(e,t,n){const i=Object.create(null,{initialize:{get:()=>super.initialize},getPaymentMethod:{get:()=>super.getPaymentMethod}});var r,o,a,s,d;return Po(this,void 0,void 0,function*(){const c=null!==(o=null===(r=this.service.getState().getStoreConfig())||void 0===r?void 0:r.currency.code)&&void 0!==o?o:n;if(!c)throw new jt(kt.MissingPaymentMethod);yield i.initialize.call(this,e,t,c);const l=i.getPaymentMethod.call(this);if(!l.initializationData)throw new jt(kt.MissingPaymentMethod);bo(l);const u=yield this.payPalCommerceSdk.getPayPalGooglePaySdk(l,c);this.googlepayConfig=yield u.Googlepay().config();const{allowedPaymentMethods:h}=this.googlepayConfig;this.setGatewayIdentifier(null===(d=null===(s=null===(a=h[0])||void 0===a?void 0:a.tokenizationSpecification)||void 0===s?void 0:s.parameters)||void 0===d?void 0:d.gateway)})}getPaymentGatewayParameters(){if(this.googlepayConfig){const{allowedPaymentMethods:e}=this.googlepayConfig,{gatewayMerchantId:t}=e[0].tokenizationSpecification.parameters;return{gateway:this.getGatewayIdentifier(),gatewayMerchantId:t}}return{gateway:this.getGatewayIdentifier()}}mapToExternalCheckoutData(e){const t=Object.create(null,{mapToExternalCheckoutData:{get:()=>super.mapToExternalCheckoutData}});return Po(this,void 0,void 0,function*(){const n=yield t.mapToExternalCheckoutData.call(this,e);return n.nonce=btoa(n.nonce),n})}}const Eo=nn(e=>new Gr(e,new $r(Yr(),new Oo(e,new Io((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaypaypalcommerce\"}]);var Ao=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class ko extends jr{constructor(e,t){super(\"googlepay_bigcommerce_payments\",e),this.payPalSdkHelper=t,this.service=e}initialize(e,t,n){const i=Object.create(null,{initialize:{get:()=>super.initialize},getPaymentMethod:{get:()=>super.getPaymentMethod}});var r,o,a,s,d;return Ao(this,void 0,void 0,function*(){const c=null!==(o=null===(r=this.service.getState().getStoreConfig())||void 0===r?void 0:r.currency.code)&&void 0!==o?o:n;if(!c)throw new jt(kt.MissingPaymentMethod);yield i.initialize.call(this,e,t,c);const l=i.getPaymentMethod.call(this);if(!l.initializationData)throw new jt(kt.MissingPaymentMethod);bo(l);const u=yield this.payPalSdkHelper.getPayPalGooglePaySdk(l,c);this.googlepayConfig=yield u.Googlepay().config();const{allowedPaymentMethods:h}=this.googlepayConfig;this.setGatewayIdentifier(null===(d=null===(s=null===(a=h[0])||void 0===a?void 0:a.tokenizationSpecification)||void 0===s?void 0:s.parameters)||void 0===d?void 0:d.gateway)})}getPaymentGatewayParameters(){if(this.googlepayConfig){const{allowedPaymentMethods:e}=this.googlepayConfig,{gatewayMerchantId:t}=e[0].tokenizationSpecification.parameters;return{gateway:this.getGatewayIdentifier(),gatewayMerchantId:t}}return{gateway:this.getGatewayIdentifier()}}mapToExternalCheckoutData(e){const t=Object.create(null,{mapToExternalCheckoutData:{get:()=>super.mapToExternalCheckoutData}});return Ao(this,void 0,void 0,function*(){const n=yield t.mapToExternalCheckoutData.call(this,e);return n.nonce=btoa(n.nonce),n})}}const To=nn(e=>new Gr(e,new $r(Yr(),new ko(e,new wi((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepay_bigcommerce_payments\"}]);function Do(){const{navigator:e}=window;let t;return t=e.language?e.language:e.userLanguage,{color_depth:window.screen.colorDepth||24,java_enabled:\"function\"==typeof e.javaEnabled&&e.javaEnabled(),language:t,screen_height:window.screen.height,screen_width:window.screen.width,time_zone_offset:(new Date).getTimezoneOffset().toString()}}var Mo=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class zo extends jr{constructor(e,t){super(\"worldlinena\",e),this.formPoster=t}extraPaymentData(){return Mo(this,void 0,void 0,function*(){return Promise.resolve({browser_info:Do()})})}processAdditionalAction(e){return Mo(this,void 0,void 0,function*(){if(!function(e){return Xr(e)&&(t=e.body,(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isObject)(t)&&\"object\"==typeof t&&\"errors\"in t&&\"three_ds_result\"in t&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isArray)(t.errors)&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(t.errors,{code:\"three_d_secure_required\"}));// removed by dead control flow\n{ var t; }}(e))throw e;const{three_ds_result:t}=e.body,{acs_url:n,payer_auth_request:i,merchant_data:r}=t||{};if(!n||!i||!r)throw new Yi([\"formUrl\",\"threeDSSessionData\",\"creq\"]);return new Promise(e=>{this.formPoster.postForm(n,{threeDSSessionData:i,creq:r},e,\"_top\")})})}}const No=nn(e=>new Gr(e,new $r(Yr(),new zo(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaytdonlinemart\"}]);var xo,Fo,Ro,Lo,Bo,jo,Uo;!function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(xo||(xo={})),function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(Fo||(Fo={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(Ro||(Ro={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(Lo||(Lo={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(Bo||(Bo={})),(jo||(jo={})).OXXO=\"oxxo\",function(e){e.Approved=\"APPROVED\",e.Created=\"CREATED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\",e.PollingStop=\"POLLING_STOP\",e.PollingError=\"POLLING_ERROR\"}(Uo||(Uo={}));var qo=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Vo{constructor(e,t,n,i){this.formPoster=e,this.paymentIntegrationService=t,this.paypalCommerceRequestSender=n,this.paypalCommerceScriptLoader=i}loadPayPalSdk(e,t,n,i){return qo(this,void 0,void 0,function*(){const r=this.paymentIntegrationService.getState(),o=t||r.getCartOrThrow().currency.code,a=r.getPaymentMethodOrThrow(e);return this.paypalSdk=yield this.paypalCommerceScriptLoader.getPayPalSDK(a,o,n,i),this.paypalSdk})}getPayPalSdkOrThrow(){if(!this.paypalSdk)throw new Xt;return this.paypalSdk}createBuyNowCartOrThrow(e){return qo(this,void 0,void 0,function*(){const t=e.getBuyNowCartRequestBody();if(!t)throw new jt(kt.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new jn}})}createOrder(e,t){return qo(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:i}=yield this.paypalCommerceRequestSender.createOrder(e,Object.assign({cartId:n},t));return i})}createOrderCardFields(e,t){return qo(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:i,setupToken:r}=yield this.paypalCommerceRequestSender.createOrder(e,Object.assign({cartId:n},t));return Object.assign({orderId:i},r?{setupToken:r}:{})})}updateOrder(){return qo(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),n=e.getConsignmentsOrThrow()[0];try{yield this.paypalCommerceRequestSender.updateOrder({availableShippingOptions:n.availableShippingOptions,cartId:t.id,selectedShippingOption:n.selectedShippingOption})}catch(e){throw new qn}})}getOrderStatus(e,t){return qo(this,void 0,void 0,function*(){try{const{status:n}=yield this.paypalCommerceRequestSender.getOrderStatus(e,t);return n}catch(e){throw new qn}})}tokenizePayment(e,t){const n=this.paymentIntegrationService.getState().getCartOrThrow();if(!t)throw new jt(kt.MissingOrderId);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",action:\"set_external_checkout\",provider:e,order_id:t},n.source===Vn.BuyNow&&{cart_id:n.id}))}submitPayment(e,t,n){return qo(this,void 0,void 0,function*(){const i={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:e,paypal_account:{order_id:t}}};yield this.paymentIntegrationService.submitPayment(Object.assign({methodId:e,paymentData:i},n?{gatewayId:n}:{}))})}getShippingOptionOrThrow(e){const t=this.paymentIntegrationService.getState().getConsignmentsOrThrow()[0],n=t.availableShippingOptions||[],i=n.find(e=>e.isRecommended),r=(e?n.find(t=>t.id===e):n.find(e=>{var n;return e.id===(null===(n=t.selectedShippingOption)||void 0===n?void 0:n.id)}))||i||n[0];if(!r)throw new Error(\"Your order can't be shipped to this address\");return r}getAddress(e){return{firstName:(null==e?void 0:e.firstName)||\"\",lastName:(null==e?void 0:e.lastName)||\"\",email:(null==e?void 0:e.email)||\"\",phone:(null==e?void 0:e.phone)||\"\",company:\"\",address1:(null==e?void 0:e.address1)||\"\",address2:(null==e?void 0:e.address2)||\"\",city:(null==e?void 0:e.city)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",stateOrProvince:\"\",stateOrProvinceCode:(null==e?void 0:e.stateOrProvinceCode)||\"\",customFields:[]}}getBillingAddressFromOrderDetails({payer:e}){var t,n;return this.getAddress({firstName:e.name.given_name,lastName:e.name.surname,email:e.email_address,address1:e.address.address_line_1,address2:e.address.address_line_2,city:e.address.admin_area_2,countryCode:e.address.country_code,postalCode:e.address.postal_code,stateOrProvinceCode:e.address.admin_area_1,phone:null===(n=null===(t=e.phone)||void 0===t?void 0:t.phone_number)||void 0===n?void 0:n.national_number})}getShippingAddressFromOrderDetails(e){const{payer:t,purchase_units:n}=e,{address:i,name:{full_name:r}}=n[0].shipping,[o,...a]=r.split(\" \");return this.getAddress({firstName:o,lastName:a.join(\" \"),email:t.email_address,address1:i.address_line_1,address2:i.address_line_2,city:i.admin_area_2,countryCode:i.country_code,postalCode:i.postal_code,stateOrProvinceCode:i.admin_area_1})}getValidButtonStyle(e){const{color:t,height:n,label:i,shape:r}=e||{},o={color:t&&Lo[t]?t:void 0,height:this.getValidHeight(n),label:i&&Ro[i]?i:void 0,shape:r&&Bo[r]?r:void 0};return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(o,lodash__WEBPACK_IMPORTED_MODULE_5__.isNil)}getValidHeight(e){return e&&\"number\"==typeof e?e>55?55:e<25?25:e:40}removeElement(e){const t=e&&document.getElementById(e);t&&(t.style.display=\"none\")}}var Go=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Ho{constructor(e){this.requestSender=e}createOrder(e,t){return Go(this,void 0,void 0,function*(){const n=`/api/storefront/payment/${e}`,i=t,r=Object.assign({\"X-API-INTERNAL\":Xn,\"Content-Type\":ti.Json},ni);return(yield this.requestSender.post(n,{headers:r,body:i})).body})}updateOrder(e){return Go(this,void 0,void 0,function*(){const t=e,n=Object.assign({\"X-API-INTERNAL\":Xn,\"Content-Type\":ti.Json},ni);return(yield this.requestSender.put(\"/api/storefront/initialization/paypalcommerce\",{headers:n,body:t})).body})}getOrderStatus(e=\"paypalcommerce\",t){return Go(this,void 0,void 0,function*(){const n=`/api/storefront/initialization/${e}`,i=Object.assign({\"X-API-INTERNAL\":Xn,\"Content-Type\":ti.Json},ni);return(yield this.requestSender.get(n,Object.assign({headers:i},t))).body})}}var $o=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Wo{constructor(e){this.scriptLoader=e,this.window=window}getPayPalSDK(e,t,n,i){return $o(this,void 0,void 0,function*(){const r=this.getPayPalSdkScriptConfigOrThrow(e,t,n);return this.loadPayPalSDK(r,i)})}loadPayPalSDK(e,t=!1){return $o(this,void 0,void 0,function*(){if(!this.window.paypal||t){const t=this.transformConfig(e.options),n=this.transformConfig(e.attributes),i=`https://www.paypal.com/sdk/js?${new URLSearchParams(t).toString()}`;yield this.scriptLoader.loadScript(i,{async:!0,attributes:n})}if(!this.window.paypal)throw new Xt;return this.window.paypal})}getPayPalSdkScriptConfigOrThrow(e,t,n=!0){const{id:i,clientToken:r,initializationData:o}=e;if(!(null==o?void 0:o.clientId))throw new jt(kt.MissingPaymentMethod);const{intent:a,clientId:s,merchantId:d,buyerCountry:c,attributionId:l,isVenmoEnabled:u,isHostedCheckoutEnabled:h,isPayPalCreditAvailable:p,isDeveloperModeApplicable:m,availableAlternativePaymentMethods:y=[],enabledAlternativePaymentMethods:g=[],isGooglePayEnabled:v}=o,f=h||n,S=\"paypalcommercecreditcards\"===i,_=S?[\"card\"]:[],w=p?[\"credit\",\"paylater\"]:[],C=n||!f,I=u?[\"venmo\"]:[],b=C?g:[],P=v?[\"googlepay\"]:[],O=n?[\"card-fields\"]:[],E=[...S?[]:[\"card\"],...p?[]:[\"credit\",\"paylater\"],...u?[]:[\"venmo\"],...C?y.filter(e=>!g.includes(e)):y],A=[..._,...w,...I,...b];return{options:Object.assign({\"client-id\":s,\"merchant-id\":d,\"enable-funding\":A.length>0?A:void 0,\"disable-funding\":E.length>0?E:void 0,commit:f,components:[\"buttons\",\"hosted-fields\",\"payment-fields\",\"legal\",...P,...O],currency:t,intent:a},m&&{\"buyer-country\":c}),attributes:{\"data-partner-attribution-id\":l,\"data-client-token\":r}}}transformConfig(e){let t={};return Object.keys(e).forEach(n=>{const i=e[n];null==i||\"\"===i||Array.isArray(i)&&0===i.length||(t=Object.assign(Object.assign({},t),{[n]:Array.isArray(i)?i.join(\",\"):i}))}),t}}const Yo=e=>{const{getHost:t}=e.getState();return new Vo((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)(),e,new Ho((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()})),new Wo((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)()))};var Ko=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Jo{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}initialize(e){return Ko(this,void 0,void 0,function*(){const{paypalcommerce:t,methodId:n}=e;if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');if(!t.container)throw new rn('Unable to initialize payment because \"options.paypalcommerce.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new rn('Unable to initialize payment because \"options.paypalcommerce.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_5__.noop,this.paymentIntegrationService.getState().getPaymentMethod(n)||(yield this.paymentIntegrationService.loadPaymentMethod(n));const i=yield this.paypalCommerceIntegrationService.loadPayPalSdk(n);i&&i.Buttons&&\"function\"==typeof i.Buttons?this.renderButton(n,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return Ko(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()})}signOut(e){return Ko(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:n,onClick:i,onComplete:r}=t,o=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d,isAppSwitchEnabled:c}=a.initializationData||{},{checkoutTopButtonStyles:l}=d||{},u=Object.assign({createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommerce\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)},i&&{onClick:()=>i()}),h=Object.assign(Object.assign({},!c&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(t,n)=>this.onHostedCheckoutApprove(t,n,e,r)}),p=Object.assign(Object.assign({fundingSource:o.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},l),{height:di}))},u),s&&h),m=o.Buttons(p);m.isEligible()?m.render(`#${n}`):this.paypalCommerceIntegrationService.removeElement(n)}onHostedCheckoutApprove(e,t,n,i){return Ko(this,void 0,void 0,function*(){if(!e.orderID)throw new jt(kt.MissingOrderId);const r=this.paymentIntegrationService.getState().getCartOrThrow(),o=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(o);if(yield this.paymentIntegrationService.updateBillingAddress(t),r.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(o);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:n}}),yield this.paypalCommerceIntegrationService.submitPayment(n,e.orderID),i&&\"function\"==typeof i&&i()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return Ko(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return Ko(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const Zo=nn(e=>new Jo(e,Yo(e)),[{id:\"paypalcommerce\"}]);var Qo=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Xo{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}initialize(e){return Qo(this,void 0,void 0,function*(){const{paypalcommercecredit:t,methodId:n}=e;if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.paypalcommercecredit\" argument is not provided.');if(!t.container)throw new rn('Unable to initialize payment because \"options.paypalcommercecredit.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new rn('Unable to initialize payment because \"options.paypalcommercecredit.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_5__.noop,this.paymentIntegrationService.getState().getPaymentMethod(n)||(yield this.paymentIntegrationService.loadPaymentMethod(n));const i=yield this.paypalCommerceIntegrationService.loadPayPalSdk(n);i&&i.Buttons&&\"function\"==typeof i.Buttons?this.renderButton(n,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return Qo(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return Qo(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:n,onComplete:i,onClick:r}=t,o=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d,isAppSwitchEnabled:c}=a.initializationData||{},{checkoutTopButtonStyles:l}=d||{},u=Object.assign({createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecredit\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)},r&&{onClick:()=>r()}),h=Object.assign(Object.assign({},!c&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(t,n)=>this.onHostedCheckoutApprove(t,n,e,i)}),p=[o.FUNDING.PAYLATER,o.FUNDING.CREDIT];let m=!1;p.forEach(e=>{if(!m){const t=Object.assign(Object.assign({fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},l),{height:di}))},u),s&&h),i=o.Buttons(t);i.isEligible()&&(i.render(`#${n}`),m=!0)}}),m||this.paypalCommerceIntegrationService.removeElement(n)}onHostedCheckoutApprove(e,t,n,i){return Qo(this,void 0,void 0,function*(){if(!e.orderID)throw new jt(kt.MissingOrderId);const r=this.paymentIntegrationService.getState().getCartOrThrow(),o=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(o);if(yield this.paymentIntegrationService.updateBillingAddress(t),r.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(o);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:n}}),yield this.paypalCommerceIntegrationService.submitPayment(n,e.orderID),i&&\"function\"==typeof i&&i()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return Qo(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return Qo(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const ea=nn(e=>new Xo(e,Yo(e)),[{id:\"paypalcommercecredit\"}]);var ta=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class na{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return ta(this,void 0,void 0,function*(){const{paypalcommercevenmo:t,methodId:n}=e;if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');if(!t.container)throw new rn('Unable to initialize payment because \"options.paypalcommercevenmo.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new rn('Unable to initialize payment because \"options.paypalcommercevenmo.onClick\" argument is not a function.');this.paymentIntegrationService.getState().getPaymentMethod(n)||(yield this.paymentIntegrationService.loadPaymentMethod(n));const i=yield this.paypalCommerceIntegrationService.loadPayPalSdk(n);i&&i.Buttons&&\"function\"==typeof i.Buttons?this.renderButton(n,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return ta(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return ta(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:n,onClick:i}=t,r=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:a}=o.initializationData||{},{checkoutTopButtonStyles:s}=a||{},d=Object.assign({fundingSource:r.FUNDING.VENMO,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},s),{height:di})),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmo\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)},i&&{onClick:()=>i()}),c=r.Buttons(d);c.isEligible()?c.render(`#${n}`):this.paypalCommerceIntegrationService.removeElement(n)}}const ia=nn(e=>new na(e,Yo(e)),[{id:\"paypalcommercevenmo\"}]);function ra(){return new Io((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.createScriptLoader)())}var oa,aa,sa,da,ca,la,ua;!function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(oa||(oa={})),function(e){e.Succeeded=\"succeeded\",e.Cancelled=\"cancelled\",e.Errored=\"errored\"}(aa||(aa={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(sa||(sa={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(da||(da={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(ca||(ca={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(la||(la={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"canceled\",e.UNRECOGNIZED=\"unrecognized\"}(ua||(ua={}));var ha=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class pa{constructor(){this.window=window}initializePayPalFastlane(e,t,n){return ha(this,void 0,void 0,function*(){if(t&&(window.localStorage.setItem(\"fastlaneEnv\",\"sandbox\"),window.localStorage.setItem(\"axoEnv\",\"sandbox\")),!this.window.paypalFastlane){const t={root:{backgroundColorPrimary:\"transparent\"}};this.window.paypalFastlane=yield e.Fastlane({styles:n||t})}return this.window.paypalFastlane})}getPayPalFastlaneOrThrow(){if(!this.window.paypalFastlane)throw new Xt;return this.window.paypalFastlane}lookupCustomerOrThrow(e){return ha(this,void 0,void 0,function*(){return this.getPayPalFastlaneOrThrow().identity.lookupCustomerByEmail(e)})}triggerAuthenticationFlowOrThrow(e){return ha(this,void 0,void 0,function*(){return e?this.getPayPalFastlaneOrThrow().identity.triggerAuthenticationFlow(e):{}})}updateStorageSessionId(e){const t=new Date;t.setDate(t.getDate()+14);const n={expires:t,secure:!0};Ii.set(\"bc-fastlane-sessionId\",e,n)}removeStorageSessionId(){Ii.remove(\"bc-fastlane-sessionId\")}getStorageSessionId(){return Ii.get(\"bc-fastlane-sessionId\")||\"\"}mapPayPalFastlaneProfileToBcCustomerData(e,t){var n,i,r;const{authenticationState:o,profileData:a}=t,s=null===(r=null===(i=null===(n=null==a?void 0:a.card)||void 0===n?void 0:n.paymentSource)||void 0===i?void 0:i.card)||void 0===r?void 0:r.billingAddress,d=null==a?void 0:a.shippingAddress,c=null==a?void 0:a.name,l=null==a?void 0:a.card,u=d?this.mapPayPalToBcAddress(d.address,d.name,d.phoneNumber):void 0,h=s&&c?this.mapPayPalToBcAddress(s,c,null==d?void 0:d.phoneNumber):void 0,p=l?this.mapPayPalToBcInstrument(e,l):[],m=this.filterAddresses([u,h]);return{authenticationState:o||ua.UNRECOGNIZED,addresses:m,billingAddress:h,shippingAddress:u,instruments:p}}mapPayPalToBcInstrument(e,t){const{id:n,paymentSource:i}=t,{brand:r,expiry:o,lastDigits:a}=i.card,[s,d]=o.split(\"-\");return[{bigpayToken:n,brand:r,defaultInstrument:!1,expiryMonth:d,expiryYear:s,iin:\"\",last4:a,method:e,provider:e,trustedShippingAddress:!1,untrustedShippingCardVerificationMode:hi.PAN,type:\"card\"}]}mapBcToPayPalAddress(e){return{company:(null==e?void 0:e.company)||\"\",addressLine1:(null==e?void 0:e.address1)||\"\",addressLine2:(null==e?void 0:e.address2)||\"\",adminArea1:(null==e?void 0:e.stateOrProvinceCode)||(null==e?void 0:e.stateOrProvince)||\"\",adminArea2:(null==e?void 0:e.city)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\"}}mapPayPalToBcAddress(e,t,n,i){const[r,o]=t.fullName.split(\" \"),a=(null==n?void 0:n.nationalNumber)||\"\",s=(null==n?void 0:n.countryCode)||\"\";return{id:Date.now(),type:\"paypal-address\",firstName:t.firstName||r||\"\",lastName:t.lastName||o||\"\",company:e.company||\"\",address1:e.addressLine1,address2:e.addressLine2||\"\",city:e.adminArea2,stateOrProvince:e.adminArea1,stateOrProvinceCode:e.adminArea1,country:e.countryCode||\"\",countryCode:e.countryCode||\"\",postalCode:e.postalCode,phone:s+a,customFields:i||[]}}filterAddresses(e){return e.reduce((e,t)=>t?e.some(e=>this.isEqualAddresses(e,t))?e:[...e,t]:e,[])}isEqualAddresses(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEqual)(this.normalizeAddress(e),this.normalizeAddress(t))}normalizeAddress(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.omit)(e,[\"id\",\"phone\"])}}function ma(){return new pa}function ya(e){return\"string\"!=typeof e}function ga(e,t){if(t||e)return function(e){var t,n;const i={},r=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(e.root,ya),o=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(e.input,ya),a=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(e.toggle,ya),s=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(null===(t=e.text)||void 0===t?void 0:t.body,ya),d=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(null===(n=e.text)||void 0===n?void 0:n.caption,ya),c=e.branding;return Object.keys(r).length&&(i.root=r),Object.keys(o).length&&(i.input=o),Object.keys(a).length&&(i.toggle=a),Object.keys(s).length&&(i.text={},i.text.body=s),Object.keys(d).length&&(i.text=Object.assign({},i.text),i.text.caption=d),c&&(i.branding=c),i}(function(e,t){var n,i,r,o,a,s,d,c,l,u,h,p,m,y,g,v,f,S,_,w,C,I;return{root:{backgroundColorPrimary:(null==e?void 0:e.fastlaneRootSettingsBackgroundColor)||(null===(n=null==t?void 0:t.root)||void 0===n?void 0:n.backgroundColorPrimary),errorColor:(null==e?void 0:e.fastlaneRootSettingsErrorColor)||(null===(i=null==t?void 0:t.root)||void 0===i?void 0:i.errorColor),fontFamily:(null==e?void 0:e.fastlaneRootSettingsFontFamily)||(null===(r=null==t?void 0:t.root)||void 0===r?void 0:r.fontFamily),fontSizeBase:(null==e?void 0:e.fastlaneRootSettingsFontSize)||(null===(o=null==t?void 0:t.root)||void 0===o?void 0:o.fontSizeBase),padding:(null==e?void 0:e.fastlaneRootSettingsPadding)||(null===(a=null==t?void 0:t.root)||void 0===a?void 0:a.padding),primaryColor:(null==e?void 0:e.fastlaneRootSettingsPrimaryColor)||(null===(s=null==t?void 0:t.root)||void 0===s?void 0:s.primaryColor)},input:{borderRadius:(null==e?void 0:e.fastlaneInputSettingsBorderRadius)||(null===(d=null==t?void 0:t.input)||void 0===d?void 0:d.borderRadius),borderColor:(null==e?void 0:e.fastlaneInputSettingsBorderColor)||(null===(c=null==t?void 0:t.input)||void 0===c?void 0:c.borderColor),focusBorderColor:(null==e?void 0:e.fastlaneInputSettingsFocusBorderBase)||(null===(l=null==t?void 0:t.input)||void 0===l?void 0:l.focusBorderColor),backgroundColor:(null==e?void 0:e.fastlaneInputSettingsBackgroundColor)||(null===(u=null==t?void 0:t.input)||void 0===u?void 0:u.backgroundColor),borderWidth:(null==e?void 0:e.fastlaneInputSettingsBorderWidth)||(null===(h=null==t?void 0:t.input)||void 0===h?void 0:h.borderWidth),textColorBase:(null==e?void 0:e.fastlaneInputSettingsTextColorBase)||(null===(p=null==t?void 0:t.input)||void 0===p?void 0:p.textColorBase)},toggle:{colorPrimary:(null==e?void 0:e.fastlaneToggleSettingsColorPrimary)||(null===(m=null==t?void 0:t.toggle)||void 0===m?void 0:m.colorPrimary),colorSecondary:(null==e?void 0:e.fastlaneToggleSettingsColorSecondary)||(null===(y=null==t?void 0:t.toggle)||void 0===y?void 0:y.colorSecondary)},text:{body:{color:(null==e?void 0:e.fastlaneTextBodySettingsColor)||(null===(v=null===(g=null==t?void 0:t.text)||void 0===g?void 0:g.body)||void 0===v?void 0:v.color),fontSize:(null==e?void 0:e.fastlaneTextBodySettingsFontSize)||(null===(S=null===(f=null==t?void 0:t.text)||void 0===f?void 0:f.body)||void 0===S?void 0:S.fontSize)},caption:{color:(null==e?void 0:e.fastlaneTextCaptionSettingsColor)||(null===(w=null===(_=null==t?void 0:t.text)||void 0===_?void 0:_.caption)||void 0===w?void 0:w.color),fontSize:(null==e?void 0:e.fastlaneTextCaptionSettingsFontSize)||(null===(I=null===(C=null==t?void 0:t.text)||void 0===C?void 0:C.caption)||void 0===I?void 0:I.fontSize)}},branding:(null==e?void 0:e.fastlaneBrandingSettings)||(null==t?void 0:t.branding)}}(e,t))}var va=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class fa{constructor(e,t,n){this.paymentIntegrationService=e,this.paypalCommerceSdk=t,this.paypalCommerceFastlaneUtils=n}initialize(e){var t;return va(this,void 0,void 0,function*(){const{methodId:n,paypalcommercefastlane:i}=e;if(!n)throw new rn('Unable to proceed because \"methodId\" argument is not provided.');try{yield this.paymentIntegrationService.loadPaymentMethod(n);const e=this.paymentIntegrationService.getState(),r=e.getCartOrThrow(),o=e.getPaymentMethodOrThrow(n),a=!!(null===(t=o.initializationData)||void 0===t?void 0:t.isDeveloperModeApplicable),s=yield this.paypalCommerceSdk.getPayPalFastlaneSdk(o,r.currency.code,r.id);yield this.paypalCommerceFastlaneUtils.initializePayPalFastlane(s,a,this.getFastlaneStyles(n,i))}catch(e){}return Promise.resolve()})}deinitialize(){return va(this,void 0,void 0,function*(){return Promise.resolve()})}signIn(e,t){return va(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return va(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){return va(this,void 0,void 0,function*(){const{checkoutPaymentMethodExecuted:t,continueWithCheckoutCallback:n,methodId:i}=e||{};if(!i)throw new rn('Unable to proceed because \"methodId\" argument is not provided.');if(\"function\"!=typeof n)throw new rn('Unable to proceed because \"continueWithCheckoutCallback\" argument is not provided and it must be a function.');if(this.paymentIntegrationService.getState().getCustomerOrThrow().isGuest){t&&\"function\"==typeof t&&t();try{yield this.runPayPalAuthenticationFlowOrThrow(i)}catch(e){}}n()})}runPayPalAuthenticationFlowOrThrow(e){return va(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),n=t.getCartOrThrow().id,i=t.getCustomer(),r=t.getBillingAddress(),o=(null==i?void 0:i.email)||(null==r?void 0:r.email)||\"\",{customerContextId:a}=yield this.paypalCommerceFastlaneUtils.lookupCustomerOrThrow(o),s=yield this.paypalCommerceFastlaneUtils.triggerAuthenticationFlowOrThrow(a),d=s.authenticationState===ua.CANCELED;yield this.updateCustomerDataState(e,s),d?this.paypalCommerceFastlaneUtils.removeStorageSessionId():this.paypalCommerceFastlaneUtils.updateStorageSessionId(n)})}updateCustomerDataState(e,t){var n;return va(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow(),{authenticationState:r,addresses:o,billingAddress:a,shippingAddress:s,instruments:d}=this.paypalCommerceFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,t);if(yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:r,addresses:o,instruments:d}),a&&(yield this.paymentIntegrationService.updateBillingAddress(a)),s&&i.lineItems.physicalItems.length>0){const t=yield this.paymentIntegrationService.updateShippingAddress(s),i=t.getPaymentMethodOrThrow(e),{isFastlaneShippingOptionAutoSelectEnabled:r}=i.initializationData||{},o=t.getConsignments()||[],a=(null===(n=o[0])||void 0===n?void 0:n.availableShippingOptions)||[],d=a[0],c=a.find(e=>e.isRecommended);if((c||d)&&r){const e=(null==c?void 0:c.id)||d.id;yield this.paymentIntegrationService.selectShippingOption(e)}}})}getFastlaneStyles(e,t){const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{fastlaneStyles:i,isFastlaneStylingEnabled:r}=n.initializationData||{};return ga(r?i:{},null==t?void 0:t.styles)}}const Sa=nn(e=>new fa(e,ra(),ma()),[{id:\"paypalcommerceacceleratedcheckout\"},{id:\"paypalcommercecreditcards\"}]);var _a,wa,Ca,Ia,ba,Pa,Oa,Ea,Aa=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class ka{constructor(e,t=window){this.scriptLoader=e,this.stripeWindow=t}getStripeClient(e,t,n){return Aa(this,void 0,void 0,function*(){if(this.stripeWindow.bcStripeClient)return this.stripeWindow.bcStripeClient;const i=yield this.load(),{stripePublishableKey:r,stripeConnectedAccount:o}=e,a=i(r,Object.assign(Object.assign(Object.assign({},o?{stripeAccount:o}:{}),t?{betas:t}:{}),n?{apiVersion:n}:{}));return Object.assign(this.stripeWindow,{bcStripeClient:a}),a})}getElements(e,t){return Aa(this,void 0,void 0,function*(){let n=this.stripeWindow.bcStripeElements;return n?yield this.updateStripeElements(t):(n=e.elements(t),Object.assign(this.stripeWindow,{bcStripeElements:n})),n})}updateStripeElements(e){return Aa(this,void 0,void 0,function*(){const t=this.stripeWindow.bcStripeElements;t&&(t.update(e),yield t.fetchUpdates())})}load(){return Aa(this,void 0,void 0,function*(){if(!this.stripeWindow.Stripe&&(yield this.scriptLoader.loadScript(\"https://js.stripe.com/v3/\"),!this.stripeWindow.Stripe))throw new Xt;return this.stripeWindow.Stripe})}}function Ta(e){return\"object\"==typeof e&&null!==e&&\"initializationData\"in e&&void 0!==e.initializationData&&null!==e.initializationData&&\"object\"==typeof e.initializationData&&\"stripePublishableKey\"in e.initializationData&&\"stripeConnectedAccount\"in e.initializationData&&\"shopperLanguage\"in e.initializationData&&void 0!==e.initializationData.stripePublishableKey&&void 0!==e.initializationData.stripeConnectedAccount&&void 0!==e.initializationData.shopperLanguage}function Da(e){return\"stripeLinkAuthenticationState\"in e}!function(e){e.SHIPPING=\"shipping\",e.BILLING=\"billing\"}(_a||(_a={})),function(e){e.SPLIT=\"split\",e.FULL=\"full\",e.ORGANIZATION=\"organization\"}(wa||(wa={})),function(e){e.CreditCard=\"card\",e.Link=\"link\",e.EPS=\"eps\",e.GRABPAY=\"grabpay\",e.BANCONTACT=\"bancontact\",e.IDEAL=\"ideal\",e.ALIPAY=\"alipay\",e.KLARNA=\"klarna\",e.OCS=\"optimized_checkout\"}(Ca||(Ca={})),function(e){e.NEVER=\"never\",e.AUTO=\"auto\",e.ALWAYS=\"always\",e.PAYMENT=\"payment\",e.IF_REQUIRED=\"if_required\"}(Ia||(Ia={})),function(e){e.PAYMENT=\"payment\",e.AUTHENTICATION=\"linkAuthentication\",e.SHIPPING=\"address\",e.EXPRESS_CHECKOUT=\"expressCheckout\"}(ba||(ba={})),function(e){e.REQUIRES_PAYMENT_METHOD=\"requires_payment_method\",e.REQUIRES_CONFIRMATION=\"requires_confirmation\",e.REQUIRES_ACTION=\"requires_action\",e.PROCESSING=\"processing\",e.SUCCEEDED=\"succeeded\",e.CANCELED=\"canceled\"}(Pa||(Pa={})),function(e){e.CLICK=\"click\",e.CHANGE=\"change\",e.READY=\"ready\",e.SHIPPING_ADDRESS_CHANGE=\"shippingaddresschange\",e.SHIPPING_RATE_CHANGE=\"shippingratechange\",e.CONFIRM=\"confirm\",e.CANCEL=\"cancel\",e.LOADER_START=\"loaderstart\"}(Oa||(Oa={})),function(e){e.ON_SESSION=\"on_session\",e.OFF_SESSION=\"off_session\"}(Ea||(Ea={}));const Ma=[\"payment_element_beta_2\",\"alipay_pm_beta_1\",\"link_default_integration_beta_1\",\"shipping_address_element_beta_1\",\"address_element_beta_1\"],za=\"2020-03-02;alipay_beta=v1;link_beta=v1\";class Na{constructor(e,t){this.paymentIntegrationService=e,this.scriptLoader=t}initialize(e){var t,n,i,r,o;return n=this,i=void 0,o=function*(){let n;if(!e.stripeupe)throw new rn('Unable to proceed because \"options\" argument is not provided.');const{container:i,gatewayId:r,methodId:o,onEmailChange:a,getStyles:s,isLoading:d}=e.stripeupe;Object.entries(e.stripeupe).forEach(([e,t])=>{if(!t)throw new rn(`Unable to proceed because \"${e}\" argument is not provided.`)}),yield this.paymentIntegrationService.loadPaymentMethod(r,{params:{method:o}});const c=this.paymentIntegrationService.getState(),l=c.getPaymentMethodOrThrow(o,r),{clientToken:u}=l;if(!Ta(l)||!u)throw new jt(kt.MissingPaymentToken);const{email:h}=c.getCustomerOrThrow(),p=c.getPaymentProviderCustomerOrThrow(),m=(Da(p)?p:{}).stripeLinkAuthenticationState;if(!h){let e;const r=\"function\"==typeof s&&s();e=r?{variables:{colorPrimary:r.fieldInnerShadow,colorBackground:r.fieldBackground,colorText:r.labelText,colorDanger:r.fieldErrorText,colorTextSecondary:r.labelText,colorTextPlaceholder:r.fieldPlaceholderText},rules:{\".Input\":{borderColor:r.fieldBorder,color:r.fieldText,boxShadow:r.fieldInnerShadow}}}:{},n=yield this.scriptLoader.getStripeClient(l.initializationData,Ma,za),this._stripeElements=yield this.scriptLoader.getElements(n,{clientSecret:u,appearance:e});const{getBillingAddress:o,getConsignments:c}=this.paymentIntegrationService.getState(),h=c(),p=null===(t=null==h?void 0:h[0])||void 0===t?void 0:t.id,{email:y}=o()||{},g=y?{defaultValues:{mode:_a.SHIPPING,email:y}}:{},v=this._stripeElements.getElement(ba.AUTHENTICATION)||this._stripeElements.create(ba.AUTHENTICATION,g);v.on(Oa.CHANGE,e=>{if(!(\"authenticated\"in e))throw new jt(kt.MissingCustomer);this.paymentIntegrationService.updatePaymentProviderCustomer({stripeLinkAuthenticationState:e.authenticated}),e.complete?a(e.authenticated,e.value.email):a(!1,\"\"),d&&d(!1),void 0===m&&e.authenticated&&p&&this.paymentIntegrationService.deleteConsignment(p)}),v.mount(`#${i}`)}},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())})}deinitialize(){var e,t;return null===(t=null===(e=this._stripeElements)||void 0===e?void 0:e.getElement(ba.AUTHENTICATION))||void 0===t||t.unmount(),Promise.resolve()}signIn(e,t){return this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()}signOut(e){return this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}}const xa=nn(e=>new Na(e,new ka((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),[{id:\"stripeupe\"}]),Fa={size:70,color:\"#d9d9d9\",backgroundColor:\"#ffffff\"},Ra={position:\"fixed\",\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"},La=\"embedded-checkout-loading-indicator-rotation\";class Ba{constructor(e){this.styles=Object.assign(Object.assign({},Fa),e&&e.styles),this.containerStyles=Object.assign({},e&&e.containerStyles),this.defineAnimation(),this.container=this.buildContainer(),this.indicator=this.buildIndicator(),this.container.appendChild(this.indicator)}show(e){if(e){const t=document.getElementById(e);if(!t)throw new Error(\"Unable to attach the loading indicator because the parent ID is not valid.\");t.appendChild(this.container)}this.container.style.visibility=\"visible\",this.container.style.opacity=\"1\"}hide(){const e=()=>{this.container.style.visibility=\"hidden\",this.container.removeEventListener(\"transitionend\",e)};this.container.addEventListener(\"transitionend\",e),this.container.style.opacity=\"0\"}buildContainer(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.bottom=\"0\",e.style.left=\"0\",e.style.height=\"100%\",e.style.width=\"100%\",e.style.position=\"absolute\",e.style.right=\"0\",e.style.top=\"0\",e.style.transition=\"all 250ms ease-out\",e.style.opacity=\"0\",this.setStyleAttribute(e,this.containerStyles),e}buildIndicator(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.width=`${this.styles.size}px`,e.style.height=`${this.styles.size}px`,e.style.borderRadius=`${this.styles.size}px`,e.style.border=\"solid 1px\",e.style.borderColor=`${this.styles.backgroundColor} ${this.styles.backgroundColor} ${this.styles.color} ${this.styles.color}`,e.style.margin=\"0 auto\",e.style.position=\"absolute\",e.style.left=\"0\",e.style.right=\"0\",e.style.top=\"50%\",e.style.transform=\"translateY(-50%) rotate(0deg)\",e.style.transformStyle=\"preserve-3d\",e.style.animation=`${La} 500ms infinite cubic-bezier(0.69, 0.31, 0.56, 0.83)`,e}setStyleAttribute(e,t){Object.keys(t).forEach(n=>{e.style.setProperty(n,t[n])})}defineAnimation(){var e;if(document.getElementById(La))return;const t=document.createElement(\"style\");t.id=La,null===(e=document.head)||void 0===e||e.appendChild(t),t.sheet instanceof CSSStyleSheet&&t.sheet.insertRule(`\\n                @keyframes ${La} {\\n                    0% { transform: translateY(-50%) rotate(0deg); }\\n                    100% { transform: translateY(-50%) rotate(360deg); }\\n                }\\n            `,0)}}var ja=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Ua{constructor(e,t){this.paymentIntegrationService=e,this.scriptLoader=t,this.isMounted=!1}deinitialize(){var e;null===(e=this.checkoutEventsUnsubscribe)||void 0===e||e.call(this),this.isMounted=!1}initCheckoutEventsSubscription(e,t,n,i){this.checkoutEventsUnsubscribe=this.paymentIntegrationService.subscribe(()=>ja(this,void 0,void 0,function*(){var r;const o=null==i?void 0:i.getElement(ba.PAYMENT);if(o){try{yield this.updateStripePaymentIntent(e,t)}catch(e){return this.isMounted&&(o.unmount(),this.isMounted=!1),void(e instanceof Error&&(null===(r=n.onError)||void 0===r||r.call(n,e)))}this.isMounted||(yield null==i?void 0:i.fetchUpdates(),this.mountElement(o,n.containerId))}}),e=>{var t;return null===(t=e.getCheckout())||void 0===t?void 0:t.outstandingBalance},e=>{var t;return null===(t=e.getCheckout())||void 0===t?void 0:t.coupons})}mountElement(e,t){document.getElementById(t)&&(e.mount(`#${t}`),this.isMounted=!0)}mapAppearanceVariables(e){return{colorPrimary:e.fieldInnerShadow,colorBackground:e.fieldBackground,colorText:e.labelText,colorDanger:e.fieldErrorText,colorTextSecondary:e.labelText,colorTextPlaceholder:e.fieldPlaceholderText,colorIcon:e.fieldPlaceholderText}}mapInputAppearanceRules(e){return{borderColor:e.fieldBorder,color:e.fieldText,boxShadow:e.fieldInnerShadow}}throwStripeError(e){if(\"object\"==typeof(t=e)&&null!==t&&\"type\"in t&&(this.throwDisplayableStripeError(e),this.isCancellationError(e)))throw new Mn;var t;throw new Li}throwDisplayableStripeError(e){if((0,lodash__WEBPACK_IMPORTED_MODULE_5__.includes)([\"card_error\",\"invalid_request_error\",\"validation_error\"],e.type))throw new Error(e.message)}isCancellationError(e){var t;const n=null===(t=null==e?void 0:e.payment_intent.last_payment_error)||void 0===t?void 0:t.message;return!!n&&-1!==n.indexOf(\"canceled\")}throwPaymentConfirmationProceedMessage(){throw new Li(\"We've received your order and are processing your payment. Once the payment is verified, your order will be completed. We will send you an email when it's completed. Please note, this process may take a few minutes depending on the processing times of your chosen method.\")}isPaymentCompleted(e,t){return ja(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState(),i=n.getPaymentMethodOrThrow(e),{features:r}=n.getStoreConfigOrThrow().checkoutSettings;if(!i.clientToken||!t||!r[\"PI-626.Block_unnecessary_payment_confirmation_for_StripeUPE\"])return!1;const{paymentIntent:o}=yield t.retrievePaymentIntent(i.clientToken);return(null==o?void 0:o.status)===Pa.SUCCEEDED})}mapStripePaymentData(e,t,n=!1){const i=this.paymentIntegrationService.getState().getBillingAddress(),{firstName:r,lastName:o,email:a}=i||{},s=this._mapStripeAddress(i);if(!e)throw new Vt(Tt.PaymentNotInitialized);if(!(a&&s&&s.city&&s.country&&r&&o))throw new jt(kt.MissingBillingAddress);return{elements:e,redirect:Ia.IF_REQUIRED,confirmParams:Object.assign({payment_method_data:Object.assign(Object.assign({},n?{allow_redisplay:\"always\"}:{}),{billing_details:{email:a,address:s,name:`${r} ${o}`}})},t&&{return_url:t})}}isAdditionalActionError(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e,{code:\"additional_action_required\"})}isRedirectAction(e){const{type:t,data:{redirect_url:n}}=e;return\"redirect_to_url\"===t&&!!n}isOnPageAdditionalAction(e){const{type:t,data:{token:n}}=e;return\"additional_action_requires_payment_method\"===t&&!!n}updateStripePaymentIntent(e,t){return ja(this,void 0,void 0,function*(){const n=yield this.paymentIntegrationService.loadPaymentMethod(e,{params:{method:t}}),{clientToken:i}=n.getPaymentMethodOrThrow(t);if(!i)throw new jt(kt.MissingPaymentMethod);this.scriptLoader.updateStripeElements({clientSecret:i})})}_mapStripeAddress(e){if(e){const{city:t,address1:n,address2:i,countryCode:r,postalCode:o,stateOrProvinceCode:a}=e;return Object.assign({city:t,country:r,postal_code:o,line1:n,line2:i},a?{state:a}:{})}throw new jt(kt.MissingBillingAddress)}}class qa{constructor(e){this._decimalPlaces=e}toInteger(e){return Math.round(e*Math.pow(10,this._decimalPlaces))}}const Va=[\"AC\",\"AD\",\"AE\",\"AF\",\"AG\",\"AI\",\"AL\",\"AM\",\"AO\",\"AQ\",\"AR\",\"AT\",\"AU\",\"AW\",\"AX\",\"AZ\",\"BA\",\"BB\",\"BD\",\"BE\",\"BF\",\"BG\",\"BH\",\"BI\",\"BJ\",\"BL\",\"BM\",\"BN\",\"BO\",\"BQ\",\"BR\",\"BS\",\"BT\",\"BV\",\"BW\",\"BY\",\"BZ\",\"CA\",\"CD\",\"CF\",\"CG\",\"CH\",\"CI\",\"CK\",\"CL\",\"CM\",\"CN\",\"CO\",\"CR\",\"CV\",\"CW\",\"CY\",\"CZ\",\"DE\",\"DJ\",\"DK\",\"DM\",\"DO\",\"DZ\",\"EC\",\"EE\",\"EG\",\"EH\",\"ER\",\"ES\",\"ET\",\"FI\",\"FJ\",\"FK\",\"FO\",\"FR\",\"GA\",\"GB\",\"GD\",\"GE\",\"GF\",\"GG\",\"GH\",\"GI\",\"GL\",\"GM\",\"GN\",\"GP\",\"GQ\",\"GR\",\"GS\",\"GT\",\"GU\",\"GW\",\"GY\",\"HK\",\"HN\",\"HR\",\"HT\",\"HU\",\"ID\",\"IE\",\"IL\",\"IM\",\"IN\",\"IO\",\"IQ\",\"IS\",\"IT\",\"JE\",\"JM\",\"JO\",\"JP\",\"KE\",\"KG\",\"KH\",\"KI\",\"KM\",\"KN\",\"KR\",\"KW\",\"KY\",\"KZ\",\"LA\",\"LB\",\"LC\",\"LI\",\"LK\",\"LR\",\"LS\",\"LT\",\"LU\",\"LV\",\"LY\",\"MA\",\"MC\",\"MD\",\"ME\",\"MF\",\"MG\",\"MK\",\"ML\",\"MM\",\"MN\",\"MO\",\"MQ\",\"MR\",\"MS\",\"MT\",\"MU\",\"MV\",\"MW\",\"MX\",\"MY\",\"MZ\",\"NA\",\"NC\",\"NE\",\"NG\",\"NI\",\"NL\",\"NO\",\"NP\",\"NR\",\"NU\",\"NZ\",\"OM\",\"PA\",\"PE\",\"PF\",\"PG\",\"PH\",\"PK\",\"PL\",\"PM\",\"PN\",\"PR\",\"PS\",\"PT\",\"PY\",\"QA\",\"RE\",\"RO\",\"RS\",\"RU\",\"RW\",\"SA\",\"SB\",\"SC\",\"SD\",\"SE\",\"SG\",\"SH\",\"SI\",\"SJ\",\"SK\",\"SL\",\"SM\",\"SN\",\"SO\",\"SR\",\"SS\",\"ST\",\"SV\",\"SX\",\"SZ\",\"TA\",\"TC\",\"TD\",\"TF\",\"TG\",\"TH\",\"TJ\",\"TK\",\"TL\",\"TM\",\"TN\",\"TO\",\"TR\",\"TT\",\"TV\",\"TW\",\"TZ\",\"UA\",\"UG\",\"US\",\"UY\",\"UZ\",\"VA\",\"VC\",\"VE\",\"VG\",\"VN\",\"VU\",\"WF\",\"WS\",\"XK\",\"YE\",\"YT\",\"ZA\",\"ZM\",\"ZW\",\"ZZ\"];var Ga=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Ha{constructor(e,t,n,i){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=n,this.loadingIndicator=i}initialize(e){return Ga(this,void 0,void 0,function*(){const{stripeocs:t}=e||{};if(!t)throw new rn('Unable to proceed because \"options\" argument is not provided.');const{methodId:n,gatewayId:i,container:r}=t;if(!r||!n||!i)throw new Vt(Tt.PaymentNotInitialized);const o=(yield this.paymentIntegrationService.loadPaymentMethod(i,{params:{method:n}})).getPaymentMethodOrThrow(n,i),{loadingContainerId:a,buttonHeight:s,onComplete:d}=t;if(this._loadingIndicatorContainer=a,this._onComplete=d,!Ta(o))throw new jt(kt.MissingPaymentMethod);const{initializationData:c}=o,{captureMethod:l}=c;return this._captureMethod=l,this._stripeClient=yield this.scriptLoader.getStripeClient(c),yield this._mountExpressCheckoutElement(n,r,this._stripeClient,s),Promise.resolve()})}signIn(){return Promise.resolve()}signOut(){return Promise.resolve()}executePaymentMethodCheckout(){return Promise.resolve()}deinitialize(){return Promise.resolve()}_mountExpressCheckoutElement(e,t,n,i=40){return Ga(this,void 0,void 0,function*(){const r=this._shouldRequireShippingAddress(),o=Object.assign(Object.assign(Object.assign({shippingAddressRequired:r},r?{allowedShippingCountries:yield this._getAvailableCountries()}:{}),r?{shippingRates:[{id:\"_\",amount:0,displayName:\"Pending rates\"}]}:{}),{billingAddressRequired:!0,emailRequired:!0,phoneNumberRequired:!0,paymentMethods:{link:Ia.AUTO,applePay:Ia.NEVER,googlePay:Ia.NEVER,amazonPay:Ia.NEVER,paypal:Ia.NEVER,klarna:Ia.NEVER},buttonHeight:i}),{cartAmount:a}=this.paymentIntegrationService.getState().getCartOrThrow(),s=Object.assign({mode:\"payment\",amount:this._toCents(a),currency:this._getCurrency()},this._captureMethod?{captureMethod:this._captureMethod}:{});this._stripeElements=n.elements(s),this._linkV2Element=this._stripeElements.create(ba.EXPRESS_CHECKOUT,o),this._linkV2Element.mount(`#${t}`),this._initializeEvents(this._linkV2Element,e)})}_initializeEvents(e,t){this._shouldRequireShippingAddress()&&(e.on(Oa.SHIPPING_ADDRESS_CHANGE,e=>Ga(this,void 0,void 0,function*(){return this._onShippingAddressChange(e)})),e.on(Oa.SHIPPING_RATE_CHANGE,e=>Ga(this,void 0,void 0,function*(){return this._onShippingRateChange(e)}))),e.on(Oa.CONFIRM,e=>Ga(this,void 0,void 0,function*(){return this._onConfirm(e,t)})),e.on(Oa.CANCEL,this._onCancel)}_onShippingAddressChange(e){return Ga(this,void 0,void 0,function*(){if(\"address\"in e){const t=e.address,n={firstName:\"\",lastName:\"\",phone:\"\",company:\"\",address1:\"\",address2:\"\",city:(null==t?void 0:t.city)||\"\",countryCode:(null==t?void 0:t.country)||\"\",postalCode:(null==t?void 0:t.postal_code)||\"\",stateOrProvince:(null==t?void 0:t.state)||\"\",stateOrProvinceCode:\"\",customFields:[]};yield this.paymentIntegrationService.updateShippingAddress(n);const i=yield this._getAvailableShippingOptions();yield this._updateDisplayedPrice(),e.resolve({shippingRates:i})}})}_onCancel(){throw new Mn}_onShippingRateChange(e){return Ga(this,void 0,void 0,function*(){if(\"shippingRate\"in e){const{shippingRate:t}=e;yield this._handleShippingOptionChange(null==t?void 0:t.id),yield this._updateDisplayedPrice(),e.resolve({})}})}_onConfirm(e,t){return Ga(this,void 0,void 0,function*(){if(\"billingDetails\"in e&&\"shippingAddress\"in e&&this._stripeClient&&this._stripeElements){yield this._updateShippingAndBillingAddress(e),yield this.paymentIntegrationService.submitOrder();const n=this._getPaymentPayload(t);try{yield this.paymentIntegrationService.submitPayment(n)}catch(e){yield this._processAdditionalAction(e,t)}}return Promise.resolve()})}_updateShippingAndBillingAddress(e){var t,n,i,r,o,a,s,d;return Ga(this,void 0,void 0,function*(){const c=this._shouldRequireShippingAddress(),l=(null===(n=null===(t=e.shippingAddress)||void 0===t?void 0:t.name)||void 0===n?void 0:n.split(\" \")[0])||(null===(r=null===(i=e.billingDetails)||void 0===i?void 0:i.name)||void 0===r?void 0:r.split(\" \")[0])||\"\",u=(null===(a=null===(o=e.shippingAddress)||void 0===o?void 0:o.name)||void 0===a?void 0:a.split(\" \")[1])||(null===(d=null===(s=e.billingDetails)||void 0===s?void 0:s.name)||void 0===d?void 0:d.split(\" \")[1])||\"\";if(c){const t=this._mapShippingAddress(e.shippingAddress,e.billingDetails,l,u);yield this.paymentIntegrationService.updateShippingAddress(t)}const h=this._mapBillingAddress(e.shippingAddress,e.billingDetails,l,u);yield this.paymentIntegrationService.updateBillingAddress(h)})}_mapShippingAddress(e,t,n,i){var r,o,a,s,d,c,l;return{firstName:n,lastName:i,phone:(null==t?void 0:t.phone)||\"\",company:\"\",address1:(null===(r=null==e?void 0:e.address)||void 0===r?void 0:r.line1)||\"\",address2:(null===(o=null==e?void 0:e.address)||void 0===o?void 0:o.line2)||\"\",city:(null===(a=null==e?void 0:e.address)||void 0===a?void 0:a.city)||\"\",countryCode:(null===(s=null==e?void 0:e.address)||void 0===s?void 0:s.country)||\"\",postalCode:(null===(d=null==e?void 0:e.address)||void 0===d?void 0:d.postal_code)||\"\",stateOrProvince:(null===(c=null==e?void 0:e.address)||void 0===c?void 0:c.state)||\"\",stateOrProvinceCode:(null===(l=null==e?void 0:e.address)||void 0===l?void 0:l.state)||\"\",customFields:[]}}_mapBillingAddress(e,t,n,i){var r,o,a,s,d,c;return{email:(null==t?void 0:t.email)||\"\",firstName:n,lastName:i,phone:(null==t?void 0:t.phone)||\"\",company:\"\",address1:(null===(r=null==t?void 0:t.address)||void 0===r?void 0:r.line1)||\"\",address2:\"\",city:(null===(o=null==t?void 0:t.address)||void 0===o?void 0:o.city)||\"\",countryCode:(null===(a=null==t?void 0:t.address)||void 0===a?void 0:a.country)||\"\",postalCode:(null===(s=null==t?void 0:t.address)||void 0===s?void 0:s.postal_code)||\"\",stateOrProvince:(null===(d=null==t?void 0:t.address)||void 0===d?void 0:d.state)||\"\",stateOrProvinceCode:(null===(c=null==e?void 0:e.address)||void 0===c?void 0:c.state)||\"\",customFields:[]}}_processAdditionalAction(e,t){return Ga(this,void 0,void 0,function*(){if(!Xr(e)||!this.stripeIntegrationService.isAdditionalActionError(e.body.errors))throw e;if(!this._stripeClient||!this._stripeElements)throw new Vt(Tt.PaymentNotInitialized);const{data:n}=e.body.additional_action_required,{token:i}=n,{paymentIntent:r}=yield this._confirmStripePaymentOrThrow(n,t),o=this._getPaymentPayload(t,(null==r?void 0:r.id)||i);try{this._toggleLoadingIndicator(!0),yield this.paymentIntegrationService.submitPayment(o),yield this._completeCheckoutFlow()}catch(e){this.stripeIntegrationService.throwPaymentConfirmationProceedMessage()}finally{this._toggleLoadingIndicator(!1)}})}_confirmStripePaymentOrThrow(e,t){var n,i,r;return Ga(this,void 0,void 0,function*(){const{token:o,redirect_url:a}=e,s=this.stripeIntegrationService.mapStripePaymentData(this._stripeElements,a);let d;try{const e=(yield this.stripeIntegrationService.isPaymentCompleted(t,this._stripeClient))?yield null===(r=this._stripeClient)||void 0===r?void 0:r.retrievePaymentIntent(o||\"\"):yield null===(n=this._stripeClient)||void 0===n?void 0:n.confirmPayment({elements:s.elements,clientSecret:o,redirect:Ia.IF_REQUIRED,confirmParams:{return_url:null===(i=s.confirmParams)||void 0===i?void 0:i.return_url}});if(d=null==e?void 0:e.error,d||!(null==e?void 0:e.paymentIntent))throw new Li;return e}catch(e){return this.stripeIntegrationService.throwStripeError(d)}})}_completeCheckoutFlow(){return Ga(this,void 0,void 0,function*(){return\"function\"==typeof this._onComplete?this._onComplete():(window.location.replace(\"/order-confirmation\"),Promise.resolve())})}_getPaymentPayload(e,t){var n;const i=(null===(n=this.paymentIntegrationService.getState().getCart())||void 0===n?void 0:n.id)||\"\";return{methodId:e,paymentData:{formattedPayload:Object.assign(Object.assign({cart_id:i},t?{credit_card_token:{token:t}}:{}),{confirm:!1,payment_method_id:Ca.Link})}}}_shouldRequireShippingAddress(){const{getCartOrThrow:e}=this.paymentIntegrationService.getState(),{lineItems:t}=e();return!!t.physicalItems.length}_updateDisplayedPrice(){return Ga(this,void 0,void 0,function*(){this._stripeElements&&this._stripeElements.update({currency:this._getCurrency(),mode:\"payment\",amount:yield this._getTotalPrice()})})}_getCurrency(){if(!this._currencyCode){const{code:e}=this.paymentIntegrationService.getState().getCartOrThrow().currency;this._currencyCode=e.toLowerCase()}return this._currencyCode}_getTotalPrice(){return Ga(this,void 0,void 0,function*(){yield this.paymentIntegrationService.loadCheckout();const{getCheckoutOrThrow:e,getCartOrThrow:t}=this.paymentIntegrationService.getState(),{decimalPlaces:n}=t().currency,i=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.round)(e().outstandingBalance,n).toFixed(n);return this._toCents(+i)})}_getAvailableCountries(){var e;return Ga(this,void 0,void 0,function*(){const t=yield this.paymentIntegrationService.loadShippingCountries();return((null===(e=t.getShippingCountries())||void 0===e?void 0:e.map(e=>e.code))||[]).filter(e=>Va.includes(e))})}_getAvailableShippingOptions(){var e,t;return Ga(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getConsignments();if(!(null==n?void 0:n[0]))return;const i=n[0],r=(i.availableShippingOptions||[]).map(this._getStripeShippingOption.bind(this)),o=null===(e=i.selectedShippingOption)||void 0===e?void 0:e.id;return o?r.sort(e=>e.id===o?-1:0):yield this._handleShippingOptionChange(null===(t=r[0])||void 0===t?void 0:t.id),r})}_getStripeShippingOption({id:e,cost:t,description:n}){return{id:e,displayName:n,amount:this._toCents(t)}}_handleShippingOptionChange(e){return Ga(this,void 0,void 0,function*(){if(e&&\"shipping_option_unselected\"!==e)return this.paymentIntegrationService.selectShippingOption(e)})}_getAmountTransformer(){if(this._amountTransformer)return this._amountTransformer;const{getCart:e}=this.paymentIntegrationService.getState(),{currency:t}=e()||{};return t?new qa(t.decimalPlaces):void 0}_toCents(e){const t=Math.round(100*e),n=this._getAmountTransformer();return n?n.toInteger(e):t}_toggleLoadingIndicator(e){e&&this._loadingIndicatorContainer?this.loadingIndicator.show(this._loadingIndicatorContainer):this.loadingIndicator.hide()}}const $a=nn(e=>{const t=new ka((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)()),n=new Ba({containerStyles:Ra});return new Ha(e,t,new Ua(e,t),n)},[{id:\"stripeocs\"}]);function Wa(e){const t=e;return\"object\"==typeof t&&\"object\"==typeof t.payload&&\"string\"==typeof t.payload.token}var Ya;!function(e){e.SignInCustomerRequested=\"SIGN_IN_CUSTOMER_REQUESTED\",e.SignInCustomerSucceeded=\"SIGN_IN_CUSTOMER_SUCCEEDED\",e.SignInCustomerFailed=\"SIGN_IN_CUSTOMER_FAILED\",e.SignOutCustomerRequested=\"SIGN_OUT_CUSTOMER_REQUESTED\",e.SignOutCustomerSucceeded=\"SIGN_OUT_CUSTOMER_SUCCEEDED\",e.SignOutCustomerFailed=\"SIGN_OUT_CUSTOMER_FAILED\",e.CreateCustomerRequested=\"CREATE_CUSTOMER_REQUESTED\",e.CreateCustomerSucceeded=\"CREATE_CUSTOMER_SUCCEEDED\",e.CreateCustomerFailed=\"CREATE_CUSTOMER_FAILED\",e.CreateCustomerAddressRequested=\"CREATE_CUSTOMER_ADDRESS_REQUESTED\",e.CreateCustomerAddressSucceeded=\"CREATE_CUSTOMER_ADDRESS_SUCCEEDED\",e.CreateCustomerAddressFailed=\"CREATE_CUSTOMER_ADDRESS_FAILED\",e.StripeLinkAuthenticated=\"STRIPE_LINK_AUTHENTICATED\"}(Ya||(Ya={}));var Ka,Ja;class Za{constructor(e,t,n){this._customerRequestSender=e,this._checkoutActionCreator=t,this._spamProtectionActionCreator=n}createCustomer(e,t){return n=>{const i=n.getState().config.getStoreConfigOrThrow(),{isStorefrontSpamProtectionEnabled:r}=i.checkoutSettings,o=i=>(0,rxjs__WEBPACK_IMPORTED_MODULE_23__.from)(this._customerRequestSender.createAccount(Object.assign(Object.assign({},e),{token:i}),t)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)(this._checkoutActionCreator.loadCurrentCheckout(t)(n),(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ya.CreateCustomerSucceeded)))));return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ya.CreateCustomerRequested)),r?(0,rxjs__WEBPACK_IMPORTED_MODULE_23__.from)(this._spamProtectionActionCreator.execute()(n)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(e=>{var t;return Wa(e)?(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)(e),o(null===(t=e.payload)||void 0===t?void 0:t.token)):(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)(e)})):o()).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Ya.CreateCustomerFailed,e)))}}createAddress(e,t){return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ya.CreateCustomerAddressRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{return n=this,i=void 0,o=function*(){const{body:n}=yield this._customerRequestSender.createAddress(e,t);return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ya.CreateCustomerAddressSucceeded,n)},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Ya.CreateCustomerAddressFailed,e)))}signInCustomer(e,t){return n=>{const i=n.getState().checkout.getCheckoutOrThrow(),r=i.cart.source===Vn.BuyNow?i.id:void 0;return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ya.SignInCustomerRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_23__.from)(this._customerRequestSender.signInCustomer(Object.assign(Object.assign({},e),{cartId:r}),t)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(({body:e})=>e.data.persistentCartRetrievalInformation?(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)(this._checkoutActionCreator.loadCheckout(e.data.persistentCartRetrievalInformation.id,t)(n),(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ya.SignInCustomerSucceeded,e.data))):(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)(this._checkoutActionCreator.loadCurrentCheckout(t)(n),(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ya.SignInCustomerSucceeded,e.data)))))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Ya.SignInCustomerFailed,e)))}}signOutCustomer(e){return t=>{const n=t.getState().checkout.getCheckoutOrThrow(),i=n.cart.source===Vn.BuyNow?n.id:void 0;return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ya.SignOutCustomerRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_23__.from)(this._customerRequestSender.signOutCustomer(e,i)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(({body:n})=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)(this._checkoutActionCreator.loadCurrentCheckout(e)(t),(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ya.SignOutCustomerSucceeded,n.data)))))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Ya.SignOutCustomerFailed,e)))}}}class Qa{constructor(e){this._requestSender=e}createAccount(e,{timeout:t}={}){return this._requestSender.post(\"/api/storefront/customer\",{timeout:t,headers:rt,body:e})}createAddress(e,{timeout:t}={}){return this._requestSender.post(\"/api/storefront/customer-address\",{timeout:t,headers:rt,body:e})}signInCustomer(e,{timeout:t}={}){return this._requestSender.post(\"/internalapi/v1/checkout/customer\",{timeout:t,headers:rt,body:e})}signOutCustomer({timeout:e}={},t){return this._requestSender.delete(\"/internalapi/v1/checkout/customer\",Object.assign({timeout:e,headers:rt},t&&{body:{cartId:t}}))}}!function(e){e.SignInFailed=\"CUSTOMER_STRATEGY_SIGN_IN_FAILED\",e.SignInRequested=\"CUSTOMER_STRATEGY_SIGN_IN_REQUESTED\",e.SignInSucceeded=\"CUSTOMER_STRATEGY_SIGN_IN_SUCCEEDED\",e.SignOutFailed=\"CUSTOMER_STRATEGY_SIGN_OUT_FAILED\",e.SignOutRequested=\"CUSTOMER_STRATEGY_SIGN_OUT_REQUESTED\",e.SignOutSucceeded=\"CUSTOMER_STRATEGY_SIGN_OUT_SUCCEEDED\",e.ExecutePaymentMethodCheckoutFailed=\"CUSTOMER_STRATEGY_EXECUTE_PAYMENT_METHOD_CHECKOUT_FAILED\",e.ExecutePaymentMethodCheckoutRequested=\"CUSTOMER_STRATEGY_EXECUTE_PAYMENT_METHOD_CHECKOUT_REQUESTED\",e.ExecutePaymentMethodCheckoutSucceeded=\"CUSTOMER_STRATEGY_EXECUTE_PAYMENT_METHOD_CHECKOUT_SUCCEEDED\",e.InitializeFailed=\"CUSTOMER_STRATEGY_INITIALIZE_FAILED\",e.InitializeRequested=\"CUSTOMER_STRATEGY_INITIALIZE_REQUESTED\",e.InitializeSucceeded=\"CUSTOMER_STRATEGY_INITIALIZE_SUCCEEDED\",e.DeinitializeFailed=\"CUSTOMER_STRATEGY_DEINITIALIZE_FAILED\",e.DeinitializeRequested=\"CUSTOMER_STRATEGY_DEINITIALIZE_REQUESTED\",e.DeinitializeSucceeded=\"CUSTOMER_STRATEGY_DEINITIALIZE_SUCCEEDED\",e.WidgetInteractionStarted=\"CUSTOMER_STRATEGY_WIDGET_INTERACTION_STARTED\",e.WidgetInteractionFinished=\"CUSTOMER_STRATEGY_WIDGET_INTERACTION_FINISHED\",e.WidgetInteractionFailed=\"CUSTOMER_STRATEGY_WIDGET_INTERACTION_FAILED\"}(Ka||(Ka={}));class Xa{constructor(e,t){this._strategyRegistry=e,this._strategyRegistryV2=t}signIn(e,t){return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(n=>{const i=t&&t.methodId,r={methodId:i};n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ka.SignInRequested,void 0,r)),this._getStrategy(i).signIn(e,t).then(()=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ka.SignInSucceeded,void 0,r)),n.complete()}).catch(e=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Ka.SignInFailed,e,r))})})}signOut(e){return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(t=>{const n=e&&e.methodId,i={methodId:n};t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ka.SignOutRequested,void 0,i)),this._getStrategy(n).signOut(e).then(()=>{t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ka.SignOutSucceeded,void 0,i)),t.complete()}).catch(e=>{t.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Ka.SignOutFailed,e,i))})})}executePaymentMethodCheckout(e){return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(t=>{const n=e&&e.methodId,i={methodId:n};t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ka.ExecutePaymentMethodCheckoutRequested,void 0,i)),this._getStrategy(n).executePaymentMethodCheckout(e).then(()=>{t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ka.ExecutePaymentMethodCheckoutSucceeded,void 0,i)),t.complete()}).catch(e=>{t.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Ka.ExecutePaymentMethodCheckoutFailed,e,i))})})}initialize(e){return t=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(n=>{const i=t.getState(),r=e&&e.methodId,o={methodId:r};if(r&&i.customerStrategies.isInitialized(r))return n.complete();n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ka.InitializeRequested,void 0,o)),this._getStrategy(r).initialize(e).then(()=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ka.InitializeSucceeded,void 0,o)),n.complete()}).catch(e=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Ka.InitializeFailed,e,o))})})}deinitialize(e){return t=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(n=>{const i=t.getState(),r=e&&e.methodId,o={methodId:r};if(r&&!i.customerStrategies.isInitialized(r))return n.complete();n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ka.DeinitializeRequested,void 0,o)),this._getStrategy(r).deinitialize(e).then(()=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ka.DeinitializeSucceeded,void 0,o)),n.complete()}).catch(e=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Ka.DeinitializeFailed,e,o))})})}widgetInteraction(e,t){return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(n=>{const i={methodId:t&&t.methodId};n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ka.WidgetInteractionStarted,void 0,i)),e().then(()=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ka.WidgetInteractionFinished,void 0,i)),n.complete()}).catch(e=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Ka.WidgetInteractionFailed,e,i))})})}_getStrategy(e){let t;try{t=this._strategyRegistryV2.get({id:e||\"\"})}catch(n){t=this._strategyRegistry.get(e)}return t}}function es(e,t=[]){return Array.isArray(t)?Dt([...e,...t]):function(e,t){const n=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.keys)((0,lodash__WEBPACK_IMPORTED_MODULE_5__.pickBy)(t,e=>!e)),i=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.keys)((0,lodash__WEBPACK_IMPORTED_MODULE_5__.filter)(t));return Dt([...(0,lodash__WEBPACK_IMPORTED_MODULE_5__.difference)(e,n),...i])}(e,t)}class ts{constructor(e){this._requestSender=e}loadCheckout(e,{params:{include:t}={},timeout:n}={}){const i=`/api/storefront/checkout/${e}`,r=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.get(i,{params:{include:es(Ot,t)},headers:r,timeout:n}).catch(e=>{if(e.status>=400&&e.status<500)throw new wt(e);throw e})}updateCheckout(e,t,{params:{include:n}={},timeout:i}={}){const r=`/api/storefront/checkout/${e}`,o=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.put(r,{params:{include:es(Ot,n)},body:t,headers:o,timeout:i})}}!function(e){e.LoadCheckoutRequested=\"LOAD_CHECKOUT_REQUESTED\",e.LoadCheckoutSucceeded=\"LOAD_CHECKOUT_SUCCEEDED\",e.LoadCheckoutFailed=\"LOAD_CHECKOUT_FAILED\",e.UpdateCheckoutRequested=\"UPDATE_CHECKOUT_REQUESTED\",e.UpdateCheckoutSucceeded=\"UPDATE_CHECKOUT_SUCCEEDED\",e.UpdateCheckoutFailed=\"UPDATE_CHECKOUT_FAILED\"}(Ja||(Ja={}));var ns;class is{constructor(e,t,n){this._checkoutRequestSender=e,this._configActionCreator=t,this._formFieldsActionCreator=n}loadCheckout(e,t){return()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ja.LoadCheckoutRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_18__.merge)(this._configActionCreator.loadConfig({useCache:!0,timeout:null==t?void 0:t.timeout,params:{checkoutId:e}}),this._formFieldsActionCreator.loadFormFields({useCache:!0,timeout:null==t?void 0:t.timeout})),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>this._checkoutRequestSender.loadCheckout(e,t).then(({body:e})=>(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ja.LoadCheckoutSucceeded,this._transformCustomerAddresses(e))))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Ja.LoadCheckoutFailed,e)))}loadDefaultCheckout(e){return t=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ja.LoadCheckoutRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_18__.merge)(this._configActionCreator.loadConfig({useCache:!0,timeout:null==e?void 0:e.timeout}),this._formFieldsActionCreator.loadFormFields({useCache:!0,timeout:null==e?void 0:e.timeout})),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{return n=this,i=void 0,o=function*(){const n=t.getState().config.getContextConfig();if(!n||!n.checkoutId)throw new Qe(We.MissingCheckoutConfig);const{body:i}=yield this._checkoutRequestSender.loadCheckout(n.checkoutId,e);return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ja.LoadCheckoutSucceeded,this._transformCustomerAddresses(i))},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Ja.LoadCheckoutFailed,e)))}updateCheckout(e,t){return n=>new rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable(i=>{const r=n.getState().checkout.getCheckout();if(!r)throw new Qe(We.MissingCheckout);i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ja.UpdateCheckoutRequested)),this._checkoutRequestSender.updateCheckout(r.id,e,t).then(({body:e})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Ja.UpdateCheckoutSucceeded,e)),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Ja.UpdateCheckoutFailed,e))})})}loadCurrentCheckout(e){return t=>{const n=t.getState().checkout.getCheckout();if(!n)throw new Qe(We.MissingCheckout);return this.loadCheckout(n.id,e)(t)}}_transformCustomerAddresses(e){return Object.assign(Object.assign({},e),{customer:Object.assign(Object.assign({},e.customer),{addresses:e.customer.addresses.map(e=>Object.assign(Object.assign({},e),{shouldSaveAddress:!1}))})})}}!function(e){e.LoadFormFieldsRequested=\"LOAD_FORM_FIELDS_REQUESTED\",e.LoadFormFieldsSucceeded=\"LOAD_FORM_FIELDS_SUCCEEDED\",e.LoadFormFieldsFailed=\"LOAD_FORM_FIELDS_FAILED\"}(ns||(ns={}));var rs;class os{constructor(e){this._formFieldsRequestSender=e}loadFormFields(e){return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(ns.LoadFormFieldsRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{return t=this,n=void 0,r=function*(){const{body:t}=yield this._formFieldsRequestSender.loadFields(e);return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(ns.LoadFormFieldsSucceeded,t)},new((i=void 0)||(i=Promise))(function(e,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((r=r.apply(t,n||[])).next())});// removed by dead control flow\n{ var t, n, i, r; }})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(ns.LoadFormFieldsFailed,e)))}}!function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);o>3&&a&&Object.defineProperty(t,n,a)}([gt],os.prototype,\"loadFormFields\",null);class as{constructor(e){this._requestSender=e}loadFields({timeout:e}={}){return this._requestSender.get(\"/api/storefront/form-fields\",{timeout:e,headers:Object.assign({Accept:it.JsonV1,\"X-API-INTERNAL\":Ct},rt)})}}!function(e){e.LoadPaymentMethodRequested=\"LOAD_PAYMENT_METHOD_REQUESTED\",e.LoadPaymentMethodSucceeded=\"LOAD_PAYMENT_METHOD_SUCCEEDED\",e.LoadPaymentMethodFailed=\"LOAD_PAYMENT_METHOD_FAILED\",e.LoadPaymentMethodsRequested=\"LOAD_PAYMENT_METHODS_REQUESTED\",e.LoadPaymentMethodsSucceeded=\"LOAD_PAYMENT_METHODS_SUCCEEDED\",e.LoadPaymentMethodsFailed=\"LOAD_PAYMENT_METHODS_FAILED\"}(rs||(rs={}));const ss=e=>!!e;class ds{constructor(e){this._requestSender=e}loadPaymentMethodsById(e,t){return n=>new rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable(i=>{var r;const o=null===(r=n.getState().cart.getCart())||void 0===r?void 0:r.id,a=o?Object.assign(Object.assign({},null==t?void 0:t.params),{cartId:o}):Object.assign({},null==t?void 0:t.params);i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(rs.LoadPaymentMethodsRequested)),Promise.all(e.map(e=>{return n=this,i=void 0,o=function*(){try{return(yield this._requestSender.loadPaymentMethod(e,Object.assign(Object.assign({},t),{params:a}))).body}catch(e){return}},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }})).then(e=>{const t=e.filter(ss);i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(rs.LoadPaymentMethodsSucceeded,t)),i.complete()}).catch(e=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(rs.LoadPaymentMethodsFailed,e)),i.complete()})})}loadPaymentMethods(e){return t=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(n=>{const i=t.getState().cart.getCartOrThrow();n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(rs.LoadPaymentMethodsRequested)),this._requestSender.loadPaymentMethods(Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},null==e?void 0:e.params),{cartId:i.id})})).then(e=>{const t={deviceSessionId:e.headers[\"x-device-session-id\"],sessionHash:e.headers[\"x-session-hash\"]},i=e.body;n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(rs.LoadPaymentMethodsSucceeded,i,t)),n.complete()}).catch(e=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(rs.LoadPaymentMethodsFailed,e))})})}loadPaymentMethod(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{var r;const o=null===(r=n.getState().cart.getCart())||void 0===r?void 0:r.id,a=o?Object.assign(Object.assign({},null==t?void 0:t.params),{cartId:o}):Object.assign({},null==t?void 0:t.params);i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(rs.LoadPaymentMethodRequested,void 0,{methodId:e})),this._requestSender.loadPaymentMethod(e,Object.assign(Object.assign({},t),{params:a})).then(t=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(rs.LoadPaymentMethodSucceeded,t.body,{methodId:e})),i.complete()}).catch(t=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(rs.LoadPaymentMethodFailed,t,{methodId:e}))})})}}!function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);o>3&&a&&Object.defineProperty(t,n,a)}([gt],ds.prototype,\"loadPaymentMethod\",null);class cs{constructor(e){this._requestSender=e}loadPaymentMethods({timeout:e,params:t}={}){return this._requestSender.get(\"/api/storefront/payments\",{timeout:e,headers:Object.assign({Accept:it.JsonV1,\"X-API-INTERNAL\":Ct},rt),params:t})}loadPaymentMethod(e,{timeout:t,params:n}={}){const i=`/api/storefront/payments/${e}`;return this._requestSender.get(i,{timeout:t,headers:Object.assign({Accept:it.JsonV1,\"X-API-INTERNAL\":Ct},rt),params:n})}}class ls extends Ze{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}var us;class hs{constructor(e,t=window){this._scriptLoader=e,this._window=t}load({useMasterpassSrc:e,language:t,testMode:n,checkoutId:i}){return r=this,o=void 0,s=function*(){if(e){const e=[`https://${n?\"sandbox.\":\"\"}src.mastercard.com/srci/integration/merchant.js`,[`locale=${t}`,`checkoutid=${i}`].join(\"&\")].join(\"?\");if(yield this._scriptLoader.loadScript(e),!this._window.masterpass)throw new ls;return this._window.masterpass}if(yield this._scriptLoader.loadScript(`//${n?\"sandbox.\":\"\"}masterpass.com/integration/merchant.js`),!this._window.masterpass)throw new ls;return this._window.masterpass},new((a=void 0)||(a=Promise))(function(e,t){function n(e){try{d(s.next(e))}catch(e){t(e)}}function i(e){try{d(s.throw(e))}catch(e){t(e)}}function d(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a(function(e){e(r)})).then(n,i)}d((s=s.apply(r,o||[])).next())});// removed by dead control flow\n{ var r, o, a, s; }}}class ps{constructor(e){this._requestSender=e}initializeBilling(e,t,{timeout:n}={}){const i=`/remote-checkout/${e}/billing`;return this._requestSender.get(i,{params:t,timeout:n,headers:rt})}initializeShipping(e,t,{timeout:n}={}){const i=`/remote-checkout/${e}/shipping`;return this._requestSender.get(i,{params:t,timeout:n,headers:rt})}initializePayment(e,t,{timeout:n}={}){const i=`/remote-checkout/${e}/payment`;return this._requestSender.get(i,{params:t,timeout:n,headers:rt})}loadSettings(e,{timeout:t}={}){const n=`/remote-checkout/${e}/settings`;return this._requestSender.get(n,{timeout:t,headers:rt})}signOut(e,{timeout:t}={}){const n=`/remote-checkout/${e}/signout`;return this._requestSender.get(n,{timeout:t,headers:rt})}generateToken({timeout:e}={}){return this._requestSender.get(\"/remote-checkout-token\",{timeout:e,headers:rt})}trackAuthorizationEvent({timeout:e}={}){return this._requestSender.post(\"/remote-checkout/events/shopper-checkout-service-provider-authorization-requested\",{timeout:e,headers:rt})}forgetCheckout({timeout:e}={}){return this._requestSender.post(\"/remote-checkout/forget-checkout\",{timeout:e,headers:rt})}}!function(e){e.ForgetCheckoutRemoteCustomerRequested=\"FORGET_CHECKOUT_REMOTE_CUSTOMER_REQUESTED\",e.ForgetCheckoutRemoteCustomerSucceeded=\"FORGET_CHECKOUT_REMOTE_CUSTOMER_SUCCEEDED\",e.ForgetCheckoutRemoteCustomerFailed=\"FORGET_CHECKOUT_REMOTE_CUSTOMER_FAILED\",e.InitializeRemoteBillingRequested=\"INITIALIZE_REMOTE_BILLING_REQUESTED\",e.InitializeRemoteBillingSucceeded=\"INITIALIZE_REMOTE_BILLING_SUCCEEDED\",e.InitializeRemoteBillingFailed=\"INITIALIZE_REMOTE_BILLING_FAILED\",e.InitializeRemoteShippingRequested=\"INITIALIZE_REMOTE_SHIPPING_REQUESTED\",e.InitializeRemoteShippingSucceeded=\"INITIALIZE_REMOTE_SHIPPING_SUCCEEDED\",e.InitializeRemoteShippingFailed=\"INITIALIZE_REMOTE_SHIPPING_FAILED\",e.InitializeRemotePaymentRequested=\"INITIALIZE_REMOTE_PAYMENT_REQUESTED\",e.InitializeRemotePaymentSucceeded=\"INITIALIZE_REMOTE_PAYMENT_SUCCEEDED\",e.InitializeRemotePaymentFailed=\"INITIALIZE_REMOTE_PAYMENT_FAILED\",e.LoadRemoteSettingsRequested=\"LOAD_REMOTE_SETTINGS_REQUESTED\",e.LoadRemoteSettingsSucceeded=\"LOAD_REMOTE_SETTINGS_SUCCEEDED\",e.LoadRemoteSettingsFailed=\"LOAD_REMOTE_SETTINGS_FAILED\",e.SignOutRemoteCustomerRequested=\"SIGN_OUT_REMOTE_CUSTOMER_REQUESTED\",e.SignOutRemoteCustomerSucceeded=\"SIGN_OUT_REMOTE_CUSTOMER_SUCCEEDED\",e.SignOutRemoteCustomerFailed=\"SIGN_OUT_REMOTE_CUSTOMER_FAILED\",e.UpdateRemoteCheckout=\"UPDATE_REMOTE_CHECKOUT\"}(us||(us={}));var ms;class ys{constructor(e,t){this._remoteCheckoutRequestSender=e,this._checkoutActionCreator=t}initializeBilling(e,t,n){return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.InitializeRemoteBillingRequested,void 0,{methodId:e})),this._remoteCheckoutRequestSender.initializeBilling(e,t,n).then(({body:t={}})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.InitializeRemoteBillingSucceeded,t,{methodId:e})),i.complete()}).catch(t=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(us.InitializeRemoteBillingFailed,t,{methodId:e}))})})}initializeShipping(e,t,n){return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.InitializeRemoteShippingRequested,void 0,{methodId:e})),this._remoteCheckoutRequestSender.initializeShipping(e,t,n).then(({body:t={}})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.InitializeRemoteShippingSucceeded,t,{methodId:e})),i.complete()}).catch(t=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(us.InitializeRemoteShippingFailed,t,{methodId:e}))})})}initializePayment(e,t,n){return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.InitializeRemotePaymentRequested,void 0,{methodId:e})),this._remoteCheckoutRequestSender.initializePayment(e,t,n).then(({body:t={}})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.InitializeRemotePaymentSucceeded,t,{methodId:e})),i.complete()}).catch(t=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(us.InitializeRemotePaymentFailed,t,{methodId:e}))})})}loadSettings(e,t){return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(n=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.LoadRemoteSettingsRequested,void 0,{methodId:e})),this._remoteCheckoutRequestSender.loadSettings(e,t).then(({body:t})=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.LoadRemoteSettingsSucceeded,t,{methodId:e})),n.complete()}).catch(t=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(us.LoadRemoteSettingsFailed,t,{methodId:e}))})})}signOut(e,t){return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(n=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.SignOutRemoteCustomerRequested,void 0,{methodId:e})),this._remoteCheckoutRequestSender.signOut(e,t).then(()=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.SignOutRemoteCustomerSucceeded,void 0,{methodId:e})),n.complete()}).catch(t=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(us.SignOutRemoteCustomerFailed,t,{methodId:e}))})})}forgetCheckout(e,t){return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.ForgetCheckoutRemoteCustomerRequested,void 0,{methodId:e})),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{return n=this,i=void 0,o=function*(){return yield this._remoteCheckoutRequestSender.forgetCheckout(t),yield this._checkoutActionCreator.loadCurrentCheckout(),(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.ForgetCheckoutRemoteCustomerSucceeded,void 0,{methodId:e})},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(t=>Je(us.ForgetCheckoutRemoteCustomerFailed,t,{methodId:e})))}updateCheckout(e,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(us.UpdateRemoteCheckout,t,{methodId:e})}}class gs extends Ze{constructor(){super(\"You haven't complete our spam protection challenge. Please try again.\"),this.name=\"SpamProtectionChallengeNotCompletedError\",this.type=\"spam_protection_challenge_not_completed\"}}class vs extends Ze{constructor(){super(\"We were not able to complete your spam protection verification. Please try again.\"),this.name=\"SpamProtectionFailedError\",this.type=\"spam_protection_failed\"}}!function(e){e.InitializeFailed=\"SPAM_PROTECTION_INITIALIZE_FAILED\",e.InitializeSucceeded=\"SPAM_PROTECTION_INITIALIZE_SUCCEEDED\",e.InitializeRequested=\"SPAM_PROTECTION_INITIALIZE_REQUESTED\",e.VerifyCheckoutRequested=\"SPAM_PROTECTION_CHECKOUT_VERIFY_REQUESTED\",e.VerifyCheckoutSucceeded=\"SPAM_PROTECTION_CHECKOUT_VERIFY_SUCCEEDED\",e.VerifyCheckoutFailed=\"SPAM_PROTECTION_CHECKOUT_VERIFY_FAILED\",e.ExecuteRequested=\"SPAM_PROTECTION_EXECUTE_REQUESTED\",e.ExecuteSucceeded=\"SPAM_PROTECTION_EXECUTE_SUCCEEDED\",e.ExecuteFailed=\"SPAM_PROTECTION_EXECUTE_FAILED\"}(ms||(ms={}));var fs,Ss=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class _s{constructor(e,t){this._googleRecaptcha=e,this._requestSender=t}initialize(e){return t=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(ms.InitializeRequested,void 0)),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>Ss(this,void 0,void 0,function*(){const n=e?e.containerId:\"spamProtectionContainer\";if(document.getElementById(n)&&this._googleRecaptcha.reset(n),!e&&!document.getElementById(n)){const e=document.createElement(\"div\");e.setAttribute(\"id\",n),document.body.appendChild(e)}const i=t.getState().config.getStoreConfigOrThrow().checkoutSettings.googleRecaptchaSitekey;return yield this._googleRecaptcha.load(n,i),(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(ms.InitializeSucceeded)}))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(ms.InitializeFailed,e)))}verifyCheckoutSpamProtection(){return e=>(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{const t=e.getState().checkout.getCheckout();if(!t)throw new Qe(We.MissingCheckout);return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(ms.VerifyCheckoutRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_23__.from)(this.execute()(e)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(e=>Wa(e)&&e.payload?(0,rxjs__WEBPACK_IMPORTED_MODULE_23__.from)(this._requestSender.validate(t.id,e.payload.token)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(({body:t})=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)(e),(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(ms.VerifyCheckoutSucceeded,t))))):(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)(e)))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(ms.VerifyCheckoutFailed,e)))})}execute(){return e=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(ms.ExecuteRequested)),this.initialize()(e),this._googleRecaptcha.execute().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_27__.take)(1)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(({error:e,token:t})=>Ss(this,void 0,void 0,function*(){if(e instanceof gs)throw e;if(e||!t)throw new vs;return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(ms.ExecuteSucceeded,{token:t})})))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(ms.ExecuteFailed,e)))}}class ws{constructor(e=window){this._window=e}create(e){return new this._window.MutationObserver(e)}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(fs||(fs={}));class Cs extends Ze{constructor(e){super(function(e){switch(e){case fs.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case fs.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case fs.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case fs.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}class Is extends Ze{constructor(){super(\"Spam protection is not loaded. Please try again.\"),this.name=\"SpamProtectionNotLoadedError\",this.type=\"spam_protection_failed\"}}class bs{constructor(e,t){this.googleRecaptchaScriptLoader=e,this.mutationObserverFactory=t,this._memoized=(0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoize)((e,t,n)=>{const i=new rxjs__WEBPACK_IMPORTED_MODULE_28__.Subject;if(!n)throw new Error;return this._widgetId=e.render(n.id,{sitekey:t,size:\"invisible\",callback:()=>{i.next({token:e.getResponse(this._widgetId)}),e.reset(this._widgetId)},\"error-callback\":()=>{i.next({error:new vs})}}),i},{isEqual:(e,t)=>e===t})}load(e,t){return this.googleRecaptchaScriptLoader.load().then(n=>{n&&(this._event$=this._memoized(n,t,document.getElementById(e)),this._recaptcha=n)}).catch(e=>{throw e})}reset(e){var t;const n=document.getElementById(e);null==n||n.remove(),null===(t=this._recaptcha)||void 0===t||t.reset(this._widgetId)}execute(){return (0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{const e=this._event$,t=this._recaptcha;if(!e||!t)throw new Cs(fs.SpamProtectionNotInitialized);return (0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{const e=document.querySelector('iframe[src*=\"bframe\"]');return e?(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)(e):(0,rxjs__WEBPACK_IMPORTED_MODULE_17__.throwError)(new Is)}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_29__.retryWhen)(e=>e.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_30__.delay)(250),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)((e,t)=>t<28?(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)(e):(0,rxjs__WEBPACK_IMPORTED_MODULE_17__.throwError)(e)))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(n=>(this._watchRecaptchaChallengeWindow(e,n),t.execute(this._widgetId),e)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)({error:e})))})}_watchRecaptchaChallengeWindow(e,t){const n=t.parentElement;if(!n)throw new Is;const i=n.parentElement;if(!i)throw new Is;this.mutationObserverFactory.create(()=>{\"hidden\"===i.style.visibility&&e.next({error:new gs})}).observe(i,{attributes:!0,attributeFilter:[\"style\"]})}}class Ps{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(){return this._loadPromise||(this._loadPromise=this._loadScript()),this._loadPromise}_loadScript(){const e=\"initRecaptcha\",t=[`onload=${e}`,\"render=explicit\"].join(\"&\");return new Promise((n,i)=>{this._window[e]=()=>n(this._window.grecaptcha),this._scriptLoader.loadScript(`//www.google.com/recaptcha/api.js?${t}`).catch(e=>{this._loadPromise=void 0,i(e)})})}}function Os(e){return new bs(new Ps(e),new ws)}class Es{constructor(e){this._requestSender=e}validate(e,t,{timeout:n}={}){const i=`/api/storefront/checkouts/${e}/spam-protection`,r=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.post(i,{body:{token:t},headers:r,timeout:n}).catch(e=>{if(\"empty_cart\"===e.body.type)throw new nt;throw e})}}class As{constructor(e,t){this._store=e,this._customerActionCreator=t}signIn(e,t){return this._store.dispatch(this._customerActionCreator.signInCustomer(e,t))}signOut(e){return this._store.dispatch(this._customerActionCreator.signOutCustomer(e))}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve(this._store.getState())}initialize(){return Promise.resolve(this._store.getState())}deinitialize(){return Promise.resolve(this._store.getState())}}class ks extends Ze{constructor(e){super(e||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}function Ts(e){return`${window.location.origin}/checkout.php?action=set_external_checkout&provider=masterpass&gateway=stripe&origin=${e}`}const Ds={es:[\"es_es\",\"es_mx\",\"es_pe\",\"es_co\",\"es_ar\",\"es_cl\"],en:[\"en_us\",\"en_gb\",\"en_ca\",\"en_es\",\"en_fr\",\"en_ie\",\"en_sg\",\"en_au\",\"en_nz\",\"en_my\",\"en_hk\",\"en_th\",\"en_ae\",\"en_sa\",\"en_qa\",\"en_kw\",\"en_za\"],pt:[\"pt_br\"],zu:[\"zu_za\"],ar:[\"ar_sa\",\"ar_ae\",\"ar_qa\",\"ar_kw\"],zh:[\"zh_sg\",\"zh_hk\"],ms:[\"ms_my\"],uk:[\"uk_ua\"],sv:[\"sv_se\"],hr:[\"hr_hr\"],pl:[\"pl_pl\"],nl:[\"nl_be\"],it:[\"it_it\"],de:[\"de_de\"],fr:[\"fr_fr\",\"fr_ca\"]};function Ms(e){const[t,n]=e.replace(\"-\",\"_\").toLowerCase().split(\"_\"),i=`${t}_${n}`,r=Ds[t];return r?r.indexOf(i)>-1?i:r[0]:\"en_us\"}class zs{constructor(e,t,n,i,r){this._store=e,this._paymentMethodActionCreator=t,this._remoteCheckoutActionCreator=n,this._masterpassScriptLoader=i,this._locale=r}initialize(e){const{masterpass:t,methodId:n}=e;if(!t||!n)throw new Ft('Unable to proceed because \"options.masterpass\" argument is not provided.');return this._store.dispatch(this._paymentMethodActionCreator.loadPaymentMethod(n)).then(e=>{if(this._paymentMethod=e.paymentMethods.getPaymentMethod(n),!this._paymentMethod||!this._paymentMethod.initializationData.checkoutId)throw new Qe(We.MissingPaymentMethod);const i=e.cart.getCart();if(!i)throw new Qe(We.MissingCart);const{container:r}=t,o={checkoutId:this._paymentMethod.initializationData.checkoutId,allowedCardTypes:this._paymentMethod.initializationData.allowedCardTypes,amount:i.cartAmount.toString(),currency:i.currency.code,cartId:i.id,suppressShippingAddress:!1,callbackUrl:Ts(\"checkout\")},a={useMasterpassSrc:this._paymentMethod.initializationData.isMasterpassSrcEnabled,language:Ms(this._locale),testMode:this._paymentMethod.config.testMode,checkoutId:this._paymentMethod.initializationData.checkoutId};return this._masterpassScriptLoader.load(a).then(e=>{this._signInButton=this._createSignInButton(r),this._signInButton.addEventListener(\"click\",()=>{e.checkout(o)})})}).then(()=>this._store.getState())}deinitialize(){return this._paymentMethod=void 0,this._signInButton&&this._signInButton.parentNode&&(this._signInButton.parentNode.removeChild(this._signInButton),this._signInButton=void 0),Promise.resolve(this._store.getState())}signIn(){throw new ks('In order to sign in via Masterpass, the shopper must click on \"Masterpass\" button.')}signOut(e){const t=this._store.getState().payment.getPaymentId();return t?this._store.dispatch(this._remoteCheckoutActionCreator.signOut(t.providerId,e)):Promise.resolve(this._store.getState())}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve(this._store.getState())}_createSignInButton(e){const t=document.querySelector(`#${e}`);if(!this._paymentMethod||!this._paymentMethod.initializationData.checkoutId)throw new Qe(We.MissingPaymentMethod);if(!t)throw new Ft(\"Unable to create sign-in button without valid container ID.\");const n=document.createElement(\"input\");if(n.type=\"image\",this._paymentMethod.initializationData.isMasterpassSrcEnabled){const e=this._paymentMethod.config.testMode?\"sandbox.\":\"\",{checkoutId:t}=this._paymentMethod.initializationData,i=[`locale=${Ms(this._locale)}`,\"paymentmethod=master,visa,amex,discover\",`checkoutid=${t}`];n.src=[`https://${e}src.mastercard.com/assets/img/btn/src_chk_btn_126x030px.svg`,i.join(\"&\")].join(\"?\")}else n.src=\"https://static.masterpass.com/dyn/img/btn/global/mp_chk_btn_160x037px.svg\";return t.appendChild(n),n}}class Ns{constructor(e,t){this._store=e,this._remoteCheckoutActionCreator=t}signIn(){throw new ks('In order to sign in via Masterpass, the shopper must click on \"Masterpass\" button.')}signOut(e){const t=this._store.getState().payment.getPaymentId();return t?this._store.dispatch(this._remoteCheckoutActionCreator.signOut(t.providerId,e)):Promise.resolve(this._store.getState())}initialize(){return Promise.resolve(this._store.getState())}deinitialize(){return Promise.resolve(this._store.getState())}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve(this._store.getState())}}function xs(e){if(!/^(https?:)?\\/\\//.test(e))throw new Ft(\"The provided URL must be absolute.\");const t=document.createElement(\"a\");t.href=e;const n=t.port&&-1!==e.indexOf(`${t.hostname}:${t.port}`)?t.port:\"\";return{hash:t.hash,hostname:t.hostname,href:t.href,origin:`${t.protocol}//${t.hostname}${n?`:${n}`:\"\"}`,pathname:t.pathname,port:n,protocol:t.protocol,search:t.search}}class Fs extends Ze{constructor(e){super(e||\"Unable to proceed due to no extension configured for this region.\"),this.name=\"ExtensionNotFoundError\",this.type=\"extension_not_found\"}}var Rs,Ls;function Bs(e,t){return e.type===t}!function(e){e.LoadExtensionsRequested=\"LOAD_EXTENSIONS_REQUESTED\",e.LoadExtensionsSucceeded=\"LOAD_EXTENSIONS_SUCCEEDED\",e.LoadExtensionsFailed=\"LOAD_EXTENSIONS_FAILED\",e.RenderExtensionRequested=\"RENDER_EXTENSION_REQUESTED\",e.RenderExtensionSucceeded=\"RENDER_EXTENSION_SUCCEEDED\",e.RenderExtensionFailed=\"RENDER_EXTENSION_FAILED\"}(Rs||(Rs={}));class js{constructor(e,t,n){this._targetWindow=t,this._context=n,this._targetOrigin=\"*\"===e?\"*\":xs(e).origin}post(e,t){const n=this._targetWindow;if(window===n)return;if(!n)throw new Error(\"Unable to post message because target window is not set.\");const i=t&&(0,rxjs__WEBPACK_IMPORTED_MODULE_31__.fromEvent)(window,\"message\").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_32__.filter)(e=>e.origin===this._targetOrigin&&Bs(e.data,e.data.type)&&-1!==[t.successType,t.errorType].indexOf(e.data.type)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_33__.map)(e=>{if(t.errorType===e.data.type)throw e.data;return e.data}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_27__.take)(1)).toPromise();return n.postMessage(Object.assign(Object.assign({},e),{context:this._context}),this._targetOrigin),i}setTarget(e){this._targetWindow=e}setContext(e){this._context=e}}function Us(e){var t;const n=null===(t=document.querySelector(`[data-extension-id=\"${e.id}\"]`))||void 0===t?void 0:t.querySelector(\"iframe\");if(!(null==n?void 0:n.contentWindow))throw new Fs(`Unable to post due to no extension rendered for ID: ${e.id}.`);return new js(e.url,n.contentWindow)}!function(e){e.ExtensionReady=\"EXTENSION:READY\",e.ExtensionFailed=\"EXTENSION:FAILED\"}(Ls||(Ls={}));class qs extends Ze{constructor(e){super(e||\"Unable to proceed because the required element is unexpectedly detached from the page.\"),this.name=\"UnexpectedDetachmentError\",this.type=\"unexpected_detachment\"}}var Vs;class Gs{constructor(e){this._mutationObserver=e}ensurePresence(e,t){return n=this,i=void 0,o=function*(){const n=new Ji(t),i=this._mutationObserver.create(t=>{t.forEach(t=>{0!==Array.from(t.removedNodes).filter(t=>e.some(e=>t===e||t.contains(e))).length&&n.cancel(new qs)})});i.observe(document.body,{childList:!0,subtree:!0});try{const e=yield n.promise;return i.disconnect(),e}catch(e){throw i.disconnect(),e}},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}}function Hs(e,t){const{iframeResizer:n}=Ge(785);return n(e,t)}class $s extends Ze{constructor(e){super(e||\"Unable to load an extension\"),this.name=\"ExtensionNotLoadedError\",this.type=\"extension_not_loaded\"}}!function(e){e.Subscribe=\"EXTENSION_INTERNAL:SUBSCRIBE\",e.Unsubscribe=\"EXTENSION_INTERNAL:UNSUBSCRIBE\",e.ResizeIframe=\"EXTENSION_INTERNAL:RESIZE_IFRAME\"}(Vs||(Vs={}));class Ws{constructor(e){this._options=e}createFrame(e,t,n,i){const r=document.getElementById(t),{timeout:o=6e4}=this._options||{};if(!r)throw new $s(\"Unable to embed the iframe because the container element could not be found.\");const a=document.createElement(\"iframe\");return a.src=e,a.style.border=\"none\",a.style.display=\"none\",a.style.width=\"100%\",r.appendChild(a),this._toResizableFrame(a,o,n,i).catch(e=>{throw r.removeChild(a),e})}_toResizableFrame(e,t,n,i){return r=this,o=void 0,s=function*(){const r=new Gs(new ws),o=new Promise((r,o)=>{const a=window.setTimeout(()=>{try{i()}catch(e){e instanceof Error&&console.error(`Extension rendering timed out after ${t}ms, and the callback function could not be executed. Error: ${e.message}`)}o(new $s(\"Unable to load the extension because the content could not be loaded.\"))},t),s=t=>{if(t.origin===xs(e.src).origin&&Bs(t.data,Vs.ResizeIframe)){e.style.display=\"\";const t=Hs({autoResize:!1,scrolling:!1,sizeWidth:!1,heightCalculationMethod:\"bodyOffset\",initCallback:n},e);d(),r(t[t.length-1])}},d=()=>{window.removeEventListener(\"message\",s),window.clearTimeout(a)};window.addEventListener(\"message\",s)});return r.ensurePresence([e],o)},new((a=void 0)||(a=Promise))(function(e,t){function n(e){try{d(s.next(e))}catch(e){t(e)}}function i(e){try{d(s.throw(e))}catch(e){t(e)}}function d(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a(function(e){e(r)})).then(n,i)}d((s=s.apply(r,o||[])).next())});// removed by dead control flow\n{ var r, o, a, s; }}}class Ys{constructor(e,t,n){this._containerId=e,this._extension=t,this._config=n;const{cartId:i,parentOrigin:r}=this._config;this._url=new URL(this._extension.url),this._url.searchParams.set(\"extensionId\",this._extension.id),this._url.searchParams.set(\"cartId\",i),this._url.searchParams.set(\"parentOrigin\",r)}attach(){var e,t,n,i,r;return t=this,n=void 0,r=function*(){if(null===(e=document.querySelector(`[data-extension-id=\"${this._extension.id}\"]`))||void 0===e?void 0:e.querySelector(\"iframe\"))return;const t=new Ws,n=e=>{Us(this._extension).post({type:e})};this._iframe=yield t.createFrame(this._url.toString(),this._containerId,()=>{n(Ls.ExtensionReady)},()=>{n(Ls.ExtensionFailed)});const i=document.getElementById(this._containerId);null==i||i.setAttribute(\"data-extension-id\",this._extension.id)},new((i=void 0)||(i=Promise))(function(e,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((r=r.apply(t,n||[])).next())})}detach(){this._iframe&&this._iframe.parentElement&&this._iframe.parentElement.removeChild(this._iframe)}}class Ks{constructor(e){this._requestSender=e}loadExtensions(e){return()=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(t=>{t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Rs.LoadExtensionsRequested)),this._requestSender.loadExtensions(e).then(e=>{const n=e.body;t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Rs.LoadExtensionsSucceeded,n)),t.complete()}).catch(e=>{t.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Rs.LoadExtensionsFailed,e))})})}renderExtension(e,t,n){return i=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(r=>{return o=this,a=void 0,d=function*(){const o=i.getState(),{id:a}=o.cart.getCartOrThrow(),{links:{checkoutLink:s},checkoutSettings:{features:d}}=o.config.getStoreConfigOrThrow();if(!d[\"PROJECT-5029.checkout_extension\"])return r.complete();const c=o.extensions.getExtensionByRegion(t);try{if(!c)throw new Fs(`Unable to proceed due to no extension configured for the region: ${t}.`);if(r.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Rs.RenderExtensionRequested)),\"worker\"===c.type){const e=function(e){if(!window.Worker)throw new Error(\"Unable to load the extension's web worker: your browser does not support Web Workers.\");try{const t=URL.createObjectURL(new Blob([`importScripts=((i)=>(...a)=>i(...a.map((u)=>''+new URL(u,\"${e}\"))))(importScripts);importScripts(\"${e}\")`],{type:\"text/javascript\"}));return new Worker(t)}catch(e){throw new Error(\"Unable to load the extension's web worker\")}}(c.url);n.add(c.id,e)}else{const t=new Ys(e,c,{cartId:a,parentOrigin:xs(s).origin});yield t.attach()}r.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Rs.RenderExtensionSucceeded)),r.complete()}catch(e){r.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Rs.RenderExtensionFailed,e))}},new((s=void 0)||(s=Promise))(function(e,t){function n(e){try{r(d.next(e))}catch(e){t(e)}}function i(e){try{r(d.throw(e))}catch(e){t(e)}}function r(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s(function(e){e(r)})).then(n,i)}r((d=d.apply(o,a||[])).next())});// removed by dead control flow\n{ var o, a, s, d; }})}}class Js{constructor(e){this._requestSender=e}loadExtensions({timeout:e,params:t}={}){return this._requestSender.get(\"/api/storefront/checkout-extensions\",{timeout:e,headers:Object.assign({Accept:it.JsonV1},rt),params:t})}}var Zs,Qs;class Xs{constructor(e){this._worker=e,this._isListening=!1,this._listeners={}}listen(){this._isListening||(this._isListening=!0,this._worker.addEventListener(\"message\",this._handleMessage))}stopListen(){this._isListening&&(this._isListening=!1,this._worker.removeEventListener(\"message\",this._handleMessage))}addListener(e,t){let n=this._listeners[e];n||(this._listeners[e]=n=[]),-1===n.indexOf(t)&&n.push(t)}removeListener(e,t){const n=this._listeners[e];if(!n)return;const i=n.indexOf(t);i>=0&&n.splice(i,1)}trigger(e,t){const n=this._listeners[e.type];n&&n.forEach(n=>t?n(e,t):n(e))}_handleMessage(e){const t=e.data,{context:n}=t,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,[\"context\"]);this.trigger(i,n)}}!function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);o>3&&a&&Object.defineProperty(t,n,a)}([Cr],Xs.prototype,\"_handleMessage\",null);class ed{constructor(e,t){this._worker=e,this._context=t}post(e){if(!this._worker)throw new Error(\"WorkerPoster: Worker is not initialized or creation failed. Cannot post message.\");this._worker.postMessage(Object.assign(Object.assign({},e),{context:this._context}))}}class td extends Ze{constructor(e){super(e||\"Unable to proceed due to unsupported extension command.\"),this.name=\"UnsupportedExtensionCommandError\",this.type=\"unsupported_extension_command_error\"}}class nd extends Ze{constructor(e){super(e||\"Unable to proceed due to unsupported extension query.\"),this.name=\"UnsupportedExtensionQueryError\",this.type=\"unsupported_extension_query_error\"}}!function(e){e.ReloadCheckout=\"EXTENSION:RELOAD_CHECKOUT\",e.ShowLoadingIndicator=\"EXTENSION:SHOW_LOADING_INDICATOR\",e.SetIframeStyle=\"EXTENSION:SET_IFRAME_STYLE\",e.ReRenderShippingForm=\"EXTENSION:RE_RENDER_SHIPPING_FORM\",e.ReRenderShippingStep=\"EXTENSION:RE_RENDER_SHIPPING_STEP\"}(Zs||(Zs={})),function(e){e.GetConsignments=\"EXTENSION:GET_CONSIGNMENTS\"}(Qs||(Qs={}));class id{constructor(e={},t={},n={}){this._workers=e,this._commandListeners=t,this._queryListeners=n}add(e,t){this._workers[e]=t}listenForCommand(e,t,n){const i=this._getWorkerById(e);this._commandListeners[e]||(this._commandListeners[e]=new Xs(i));const r=this._commandListeners[e];r.listen();const o=this._validateCommand(t),a=(t,i)=>{(null==i?void 0:i.extensionId)===e&&n(t,i)};return r.addListener(o,a),()=>{r.removeListener(o,a)}}listenForQuery(e,t,n){const i=this._getWorkerById(e);this._queryListeners[e]||(this._queryListeners[e]=new Xs(i));const r=this._queryListeners[e];r.listen();const o=this._validateQuery(t),a=(t,i)=>{(null==i?void 0:i.extensionId)===e&&n(t,i)};return r.addListener(o,a),()=>{r.removeListener(o,a)}}stopListen(e){this._commandListeners[e]&&this._commandListeners[e].stopListen(),this._queryListeners[e]&&this._queryListeners[e].stopListen()}post(e,t){if(!this._workers[e])throw new Error(`Worker with extensionId ${e} not found`);new ed(this._workers[e],e).post(t)}clearCacheById(e){delete this._workers[e]}_getWorkerById(e){const t=this._workers[e];if(!t)throw new Fs(`Worker with extensionId ${e} not found`);return t}_validateCommand(e){if(Object.values(Zs).includes(e))return e;throw new td}_validateQuery(e){if(Object.values(Qs).includes(e))return e;throw new nd}}function rd(e){return xs(0===e.hostname.indexOf(\"www\")?e.href:e.href.replace(e.hostname,`www.${e.hostname}`))}var od;class ad{constructor(e){this._sourceOrigins=[xs(e).origin,rd(xs(e)).origin],this._isListening=!1,this._listeners={}}listen(){this._isListening||(this._isListening=!0,window.addEventListener(\"message\",this._handleMessage))}stopListen(){this._isListening&&(this._isListening=!1,window.removeEventListener(\"message\",this._handleMessage))}addListener(e,t){let n=this._listeners[e];n||(this._listeners[e]=n=[]),-1===n.indexOf(t)&&n.push(t)}removeListener(e,t){const n=this._listeners[e];if(!n)return;const i=n.indexOf(t);i>=0&&n.splice(i,1)}trigger(e,t){const n=this._listeners[e.type];n&&n.forEach(n=>t?n(e,t):n(e))}_handleMessage(e){if(-1===this._sourceOrigins.indexOf(e.origin)||!Bs(e.data,e.data.type))return;const t=e.data,{context:n}=t,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,[\"context\"]);this.trigger(i,n)}}!function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);o>3&&a&&Object.defineProperty(t,n,a)}([Cr],ad.prototype,\"_handleMessage\",null);class sd{constructor(e,t,n={},i={},r={}){this._store=e,this._workerExtensionMessenger=t,this._commandListeners=n,this._queryListeners=i,this._posters=r}clearCacheByRegion(e){const t=this._getExtensionByRegion(e);\"worker\"!==t.type?this.clearCacheById(t.id):this._workerExtensionMessenger.clearCacheById(t.id)}clearCacheById(e){const t=this._getExtensionById(e);\"worker\"!==t.type?(this._commandListeners[e]&&delete this._commandListeners[e],this._queryListeners[e]&&delete this._queryListeners[e],this._posters[e]&&delete this._posters[e]):this._workerExtensionMessenger.clearCacheById(t.id)}listenForCommand(e,t,n){const i=this._getExtensionById(e);if(\"worker\"===i.type)return this._workerExtensionMessenger.listenForCommand(e,t,n);this._commandListeners[e]||(this._commandListeners[e]=new ad(i.url));const r=this._commandListeners[e];r.listen();const o=this._validateCommand(t),a=(t,i)=>{(null==i?void 0:i.extensionId)===e&&n(t,i)};return r.addListener(o,a),()=>{r.removeListener(o,a)}}listenForQuery(e,t,n){const i=this._getExtensionById(e);if(\"worker\"===i.type)return this._workerExtensionMessenger.listenForQuery(e,t,n);this._queryListeners[e]||(this._queryListeners[e]=new ad(i.url));const r=this._queryListeners[e];r.listen();const o=this._validateQuery(t),a=(t,i)=>{(null==i?void 0:i.extensionId)===e&&n(t,i)};return r.addListener(o,a),()=>{r.removeListener(o,a)}}stopListen(e){\"worker\"!==this._getExtensionById(e).type?(this._commandListeners[e]&&this._commandListeners[e].stopListen(),this._queryListeners[e]&&this._queryListeners[e].stopListen()):this._workerExtensionMessenger.stopListen(e)}post(e,t){try{const n=this._getExtensionById(e);if(\"worker\"===n.type)return void this._workerExtensionMessenger.post(e,t);this._posters[e]||(this._posters[e]=Us(n)),this._posters[e].post(t)}catch(n){this.clearCacheById(e),console.log(`Unable to post event to extension(${e}) because extension iframe is not mounted.\\nThe event that could not be delivered:`,t)}}_getExtensionById(e){var t;this._getExtensions();const n=null===(t=this._extensions)||void 0===t?void 0:t.find(t=>t.id===e);if(!n)throw new Fs(`Unable to proceed due to no extension found for ID: ${e}.`);return n}_getExtensionByRegion(e){var t;this._getExtensions();const n=null===(t=this._extensions)||void 0===t?void 0:t.find(t=>t.region===e);if(!n)throw new Fs(`Unable to proceed due to no extension found for region: ${e}.`);return n}_getExtensions(){if(this._extensions)return;const{extensions:{getExtensions:e}}=this._store.getState();if(this._extensions=e(),!this._extensions)throw new Fs(\"Extension configurations not found.\")}_validateCommand(e){if(Object.values(Zs).includes(e))return e;throw new td}_validateQuery(e){if(Object.values(Qs).includes(e))return e;throw new nd}}class dd{constructor(e,t,n){this._store=e,this._extensionMessenger=t,this._subscribers=n,this._subscribed={},this._unsubscribers={},this._listeners={}}listen(){var e;const{data:{getExtensions:t}}=this._store.getState();null===(e=t())||void 0===e||e.forEach(e=>{if(this._listeners[e.id])return;const t=new ad(e.url);t.addListener(Vs.Subscribe,this._handleSubscribe.bind(this)),t.addListener(Vs.Unsubscribe,this._handleUnsubscribe.bind(this)),t.listen(),this._listeners[e.id]=t})}broadcast(e){var t;const{data:{getExtensions:n}}=this._store.getState();null===(t=n())||void 0===t||t.forEach(t=>{this._subscribed[t.id]&&this._extensionMessenger.post(t.id,e)})}_handleSubscribe({payload:{eventType:e,extensionId:t}}){this._subscribed[t]=!0,this._unsubscribers[e]||(this._unsubscribers[e]=this._subscribers[e](this._store,this))}_handleUnsubscribe({payload:{eventType:e,extensionId:t}}){var n,i;delete this._subscribed[t],Object.keys(this._subscribed).length||(null===(i=(n=this._unsubscribers)[e])||void 0===i||i.call(n),delete this._unsubscribers[e])}}!function(e){e.ConsignmentsChanged=\"EXTENSION:CONSIGNMENTS_CHANGED\"}(od||(od={}));const cd=(e,t)=>{var n;const{data:{getConsignments:i}}=e.getState();let r=null!==(n=i())&&void 0!==n?n:[];return e.subscribe(({data:{getConsignments:e}})=>{var n;const i=null!==(n=e())&&void 0!==n?n:[];i!==r&&(t.broadcast({type:od.ConsignmentsChanged,payload:{consignments:i,previousConsignments:r}}),r=i)},({data:{getConsignments:e}})=>e())};var ld,ud,hd,pd,md,yd,gd;class vd{constructor(e,t,n=window){this._scriptLoader=e,this._stylesheetLoader=t,this._window=n}load(e){var t,n,i,r,o,a;return i=this,r=void 0,a=function*(){if(yield Promise.all([this._stylesheetLoader.loadStylesheet(`https://checkoutshopper-${null!==(t=e.environment)&&void 0!==t?t:\"\"}.adyen.com/checkoutshopper/sdk/3.10.1/adyen.css`,{prepend:!1,attributes:{integrity:\"sha384-8ofgICZZ/k5cC5N7xegqFZOA73H9RQ7H13439JfAZW8Gj3qjuKL2isaTD3GMIhDE\",crossorigin:\"anonymous\"}}),this._scriptLoader.loadScript(`https://checkoutshopper-${null!==(n=e.environment)&&void 0!==n?n:\"\"}.adyen.com/checkoutshopper/sdk/3.10.1/adyen.js`,{async:!0,attributes:{integrity:\"sha384-wG2z9zSQo61EIvyXmiFCo+zB3y0ZB4hsrXVcANmpP8HLthjoQJQPBh7tZKJSV8jA\",crossorigin:\"anonymous\"}})]),!this._window.AdyenCheckout)throw new Xt;return new this._window.AdyenCheckout(e)},new((o=void 0)||(o=Promise))(function(e,t){function n(e){try{d(a.next(e))}catch(e){t(e)}}function s(e){try{d(a.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o(function(e){e(i)})).then(n,s)}d((a=a.apply(i,r||[])).next())})}}function fd(e){return\"object\"==typeof e&&\"string\"==typeof e.data.paymentMethod.encryptedSecurityCode||\"string\"==typeof e.data.paymentMethod.encryptedExpiryMonth}function Sd(e){return Boolean(e.instrumentId)}!function(e){e.ThreeDS2Fingerprint=\"threeDS2Fingerprint\",e.ThreeDS2=\"threeDS2\",e.Redirect=\"redirect\",e.QRCode=\"qrCode\",e.Voucher=\"voucher\",e.Sdk=\"sdk\"}(ld||(ld={})),function(e){e.ThreeDS2Fingerprint=\"threeDS2Fingerprint\",e.ThreeDS2Challenge=\"threeDS2Challenge\",e.Redirect=\"redirect\",e.QRCode=\"qrCode\",e.Voucher=\"voucher\"}(ud||(ud={})),function(e){e.SecuredFields=\"securedfields\"}(hd||(hd={})),function(e){e.ACH=\"ach\",e.AliPay=\"alipay\",e.Bancontact=\"bcmc\",e.CreditCard=\"scheme\",e.Klarna=\"klarna\",e.KlarnaPayNow=\"klarna_paynow\",e.KlarnaAccount=\"klarna_account\",e.IDEAL=\"ideal\",e.GiroPay=\"giropay\",e.GooglePay=\"paywithgoogle\",e.SEPA=\"sepadirectdebit\",e.Sofort=\"directEbanking\",e.Vipps=\"vipps\",e.WeChatPayQR=\"wechatpayQR\"}(pd||(pd={})),function(e){e.POST=\"POST\"}(md||(md={})),function(e){e.ChallengeShopper=\"ChallengeShopper\",e.Error=\"Error\",e.IdentifyShopper=\"IdentifyShopper\"}(yd||(yd={})),function(e){e.CardNumber=\"encryptedCardNumber\",e.SecurityCode=\"encryptedSecurityCode\",e.ExpiryDate=\"encryptedExpiryDate\"}(gd||(gd={}));class _d extends Bt{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}var wd=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Cd{constructor(e,t){this._paymentIntegrationService=e,this._scriptLoader=t}initialize(e){return wd(this,void 0,void 0,function*(){const{adyenv2:t}=e;if(!t)throw new rn('Unable to initialize payment because \"options.adyenv2\" argument is not provided.');this._paymentInitializeOptions=t;const n=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId),{originKey:i,clientKey:r,environment:o,paymentMethodsResponse:a}=n.initializationData||{},s={key:\"\",value:\"\"};return i?(s.key=\"originKey\",s.value=i):(s.key=\"clientKey\",s.value=r||\"\"),this._adyenClient=yield this._scriptLoader.load({environment:o,locale:this._paymentIntegrationService.getState().getLocale(),[s.key]:s.value,paymentMethodsResponse:a,translations:{es:{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-AR\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-ES\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-MX\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CL\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CO\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-PE\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"}}}),this._paymentComponent=yield this._mountPaymentComponent(n),n.method!==pd.CreditCard&&n.method!==pd.Bancontact||(this._cardVerificationComponent=yield this._mountCardVerificationComponent()),Promise.resolve()})}execute(e,t){return wd(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),r=n&&n.paymentData,o=r&&r.shouldSaveInstrument,a=r&&r.shouldSetAsDefaultInstrument;if(!n)return Promise.reject(new Yi([\"payment\"]));this._validateCardData(),yield this._paymentIntegrationService.submitOrder(i,t);const s=this._componentState;if(!s)throw new Vt(Tt.PaymentNotInitialized);if(r&&Sd(r)){let e={};if(fd(s)){const{encryptedCardNumber:t,encryptedSecurityCode:n,encryptedExpiryMonth:i,encryptedExpiryYear:r}=s.data.paymentMethod;e={credit_card_number_confirmation:t,expiry_month:i,expiry_year:r,verification_value:n}}if(fd(s)||-1!==[\"ideal\",\"sepadirectdebit\",\"directEbanking\",\"giropay\"].indexOf(s.data.paymentMethod.type))try{return void(yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:{formattedPayload:{bigpay_token:Object.assign(Object.assign({},e),{token:r.instrumentId}),origin:window.location.origin,browser_info:Do(),set_as_default_stored_instrument:a||null}}})))}catch(e){return void(yield this._processAdditionalAction(e,o,a))}}try{yield this._paymentIntegrationService.submitPayment({methodId:n.methodId,paymentData:{formattedPayload:{credit_card_token:{token:JSON.stringify(Object.assign(Object.assign({},s.data.paymentMethod),{origin:window.location.origin}))},browser_info:Do(),vault_payment_instrument:o||null,set_as_default_stored_instrument:a||null}}})}catch(e){yield this._processAdditionalAction(e,o,a)}})}finalize(){return Promise.reject(new _d)}deinitialize(){return this._componentState=void 0,this._paymentComponent&&(this._paymentComponent.unmount(),this._paymentComponent=void 0),this._cardVerificationComponent&&(this._cardVerificationComponent.unmount(),this._cardVerificationComponent=void 0),Promise.resolve()}_getAdyenClient(){if(!this._adyenClient)throw new Vt(Tt.PaymentNotInitialized);return this._adyenClient}_getPaymentInitializeOptions(){if(!this._paymentInitializeOptions)throw new rn('\"options.adyenv2\" argument was not provided during initialization.');return this._paymentInitializeOptions}_getThreeDS2ChallengeWidgetSize(){const{additionalActionOptions:e,threeDS2Options:t}=this._getPaymentInitializeOptions();return e.widgetSize||(null==t?void 0:t.widgetSize)||\"05\"}_handleAction(e){return new Promise((t,n)=>{const{threeDS2ContainerId:i,additionalActionOptions:r}=this._getPaymentInitializeOptions(),{onBeforeLoad:o,containerId:a,onLoad:s,onComplete:d}=r,c=JSON.parse(e.action),l=this._getAdyenClient().createFromAction(c,{onAdditionalDetails:e=>{const n={methodId:c.paymentMethodType,paymentData:{nonce:JSON.stringify(e.data)}};d&&d(),t(n)},size:this._getThreeDS2ChallengeWidgetSize(),onError:e=>n(e)});o&&o(c.type===ud.ThreeDS2Challenge||c.type===ud.QRCode),l.mount(`#${a||i}`),s&&s(()=>{n(new Mn),l.unmount()})})}_mapAdyenPlaceholderData(e,t){if(!e)return{};const{firstName:n,lastName:i,address1:r,address2:o,postalCode:a,city:s,stateOrProvinceCode:d,countryCode:c}=e;return{holderName:t?`${n} ${i}`:\"\",billingAddress:{street:r,houseNumberOrName:o,postalCode:a,city:s,stateOrProvince:d,country:c}}}_mountCardVerificationComponent(){const e=this._getPaymentInitializeOptions(),t=this._getAdyenClient();let n;return new Promise((i,r)=>{var o,a,s;if(e.cardVerificationContainerId){n=t.create(hd.SecuredFields,Object.assign(Object.assign({},e.options),{styles:Object.assign(Object.assign({},null===(o=e.options)||void 0===o?void 0:o.styles),{placeholder:Object.assign({color:\"transparent\",caretColor:\"#000\"},null===(s=null===(a=e.options)||void 0===a?void 0:a.styles)||void 0===s?void 0:s.placeholder)}),onChange:e=>this._updateComponentState(e),onError:t=>e.validateCardFields(t),onFieldValid:t=>e.validateCardFields(t)}));try{n.mount(`#${e.cardVerificationContainerId}`)}catch(e){r(new Vt(Tt.PaymentNotInitialized))}}i(n)})}_mountPaymentComponent(e){let t;const n=this._getPaymentInitializeOptions(),i=this._getAdyenClient();return new Promise((r,o)=>{switch(e.method){case pd.CreditCard:case pd.ACH:case pd.Bancontact:{const r=this._paymentIntegrationService.getState().getBillingAddress(),{prefillCardHolderName:a}=e.initializationData;t=i.create(e.method,Object.assign(Object.assign({},n.options),{onChange:e=>this._updateComponentState(e),data:this._mapAdyenPlaceholderData(r,a)}));try{t.mount(`#${n.containerId}`)}catch(e){o(new Vt(Tt.PaymentNotInitialized))}break}case pd.IDEAL:case pd.SEPA:if(n.hasVaultedInstruments)this._updateComponentState({data:{paymentMethod:{type:e.method}}});else{t=i.create(e.method,Object.assign(Object.assign({},n.options),{onChange:e=>this._updateComponentState(e)}));try{t.mount(`#${n.containerId}`)}catch(e){o(new Vt(Tt.PaymentNotInitialized))}}break;case pd.AliPay:case pd.GiroPay:case pd.Sofort:case pd.Klarna:case pd.KlarnaPayNow:case pd.KlarnaAccount:case pd.Vipps:case pd.WeChatPayQR:this._updateComponentState({data:{paymentMethod:{type:e.method}}})}r(t)})}_processAdditionalAction(e,t,n){return wd(this,void 0,void 0,function*(){if(!Xr(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"additional_action_required\"}))throw e;const i=yield this._handleAction(e.body.provider_data);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},i),{paymentData:Object.assign(Object.assign({},i.paymentData),{shouldSaveInstrument:t,shouldSetAsDefaultInstrument:n})}))}catch(e){return this._processAdditionalAction(e,t,n)}})}_updateComponentState(e){this._componentState=e}_validateCardData(){var e,t;const n=this._getPaymentInitializeOptions().hasVaultedInstruments?this._cardVerificationComponent:this._paymentComponent;if((null===(e=null==n?void 0:n.componentRef)||void 0===e?void 0:e.showValidation)&&n.state&&(n.componentRef.showValidation(),0===Object.keys(n.state).length||!n.state.isValid&&!n.state.issuer||\"sepadirectdebit\"===(null===(t=n.props)||void 0===t?void 0:t.type)&&n.state.data&&Object.values(n.state.data).some(e=>0===e.toString().trim().length)))throw new Ki(this._mapCardErrors(n.state.errors))}_mapCardErrors(e={}){const t={};return Object.keys(e).forEach(n=>{t[n]=[{message:e[n],type:n}]}),t}}const Id=nn(e=>new Cd(e,new vd((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getStylesheetLoader)())),[{gateway:\"adyenv2\"}]);class bd{constructor(e,t,n=window){this._scriptLoader=e,this._stylesheetLoader=t,this._window=n}load(e){var t,n,i,r,o,a;return i=this,r=void 0,a=function*(){if(yield Promise.all([this._stylesheetLoader.loadStylesheet(`https://checkoutshopper-${null!==(t=e.environment)&&void 0!==t?t:\"\"}.adyen.com/checkoutshopper/sdk/5.71.1/adyen.css`,{prepend:!1,attributes:{integrity:\"sha384-5MvB4RnzvviA3VBT4KYABZ4HXNZG5LRqREEgd41xt/pf/QvKmsj2O9GuNuywRXx9\",crossorigin:\"anonymous\"}}),this._scriptLoader.loadScript(`https://checkoutshopper-${null!==(n=e.environment)&&void 0!==n?n:\"\"}.adyen.com/checkoutshopper/sdk/5.71.1/adyen.js`,{async:!0,attributes:{integrity:\"sha384-yvY2yFNR4WqIjPqP9MzjI+gJimmaJnAvj4rLHKvgJbgFD5fMuf8zIJrFJOW8Lhhf\",crossorigin:\"anonymous\"}})]),!this._window.AdyenCheckout)throw new Xt;return yield this._window.AdyenCheckout(e)},new((o=void 0)||(o=Promise))(function(e,t){function n(e){try{d(a.next(e))}catch(e){t(e)}}function s(e){try{d(a.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o(function(e){e(i)})).then(n,s)}d((a=a.apply(i,r||[])).next())})}}function Pd(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}var Od=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Ed{constructor(e,t){this._paymentIntegrationService=e,this._scriptLoader=t}initialize(e){return Od(this,void 0,void 0,function*(){const{adyenv3:t}=e;if(!t)throw new rn('Unable to initialize payment because \"options.adyenv3\" argument is not provided.');this._paymentInitializeOptions=t;const n=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId),{environment:i,clientKey:r,paymentMethodsResponse:o,installmentOptions:a}=n.initializationData||{};return this._adyenClient=yield this._scriptLoader.load({paymentMethodsConfiguration:Object.assign({klarna:{useKlarnaWidget:!0},klarna_account:{useKlarnaWidget:!0},klarna_paynow:{useKlarnaWidget:!0}},a?{card:{installmentOptions:Object.assign({showInstallmentAmounts:!0},a)}}:{}),environment:i,locale:this._getLocale(),clientKey:r,paymentMethodsResponse:o,showPayButton:!1,translations:{es:{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-AR\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-ES\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-MX\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CL\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CO\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-PE\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"}}}),this._paymentComponent=yield this._mountPaymentComponent(n),n.method!==pd.CreditCard&&n.method!==pd.Bancontact||(this._cardVerificationComponent=yield this._mountCardVerificationComponent()),Promise.resolve()})}execute(e,t){var n;return Od(this,void 0,void 0,function*(){const{payment:i}=e,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!i)throw new Yi([\"payment\"]);const o=i.paymentData,{shouldSaveInstrument:a,shouldSetAsDefaultInstrument:s}=Pd(o)?o:{shouldSaveInstrument:!1,shouldSetAsDefaultInstrument:!1};this._validateCardData(),\"klarna\"!==i.methodId&&\"klarna_account\"!==i.methodId&&\"klarna_paynow\"!==i.methodId||null===(n=this._paymentComponent)||void 0===n||n.submit(),yield this._paymentIntegrationService.submitOrder(r,t);const d=this._componentState||{data:{paymentMethod:{type:i.methodId}}};if(o&&Sd(o)){let e={};if(fd(d)){const{encryptedCardNumber:t,encryptedSecurityCode:n,encryptedExpiryMonth:i,encryptedExpiryYear:r}=d.data.paymentMethod;e={credit_card_number_confirmation:t,expiry_month:i,expiry_year:r,verification_value:n}}try{return void(yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},i),{paymentData:{formattedPayload:{bigpay_token:Object.assign(Object.assign({},e),{token:o.instrumentId}),origin:window.location.origin,browser_info:Do(),set_as_default_stored_instrument:s||null}}})))}catch(e){return void(yield this._processAdditionalAction(e,a,s))}}let c=JSON.stringify(Object.assign(Object.assign({},d.data.paymentMethod),{type:i.methodId,origin:window.location.origin}));\"boletobancario\"===i.methodId&&function(e){var t,n;return\"string\"===(\"object\"==typeof e&&typeof e.data.socialSecurityNumber)&&\"string\"==typeof(null===(t=e.data.shopperName)||void 0===t?void 0:t.firstName)&&\"string\"==typeof(null===(n=e.data.shopperName)||void 0===n?void 0:n.lastName)}(d)&&(c=JSON.stringify(Object.assign(Object.assign({socialSecurityNumber:d.data.socialSecurityNumber},d.data.shopperName),{type:i.methodId,origin:window.location.origin})));try{yield this._paymentIntegrationService.submitPayment({methodId:i.methodId,paymentData:{formattedPayload:Object.assign(Object.assign({credit_card_token:{token:c}},fd(d)&&d.data.installments?{installments:{value:d.data.installments.value,plan:d.data.installments.plan||\"regular\"}}:{}),{browser_info:Do(),vault_payment_instrument:a||null,set_as_default_stored_instrument:s||null})}})}catch(e){yield this._processAdditionalAction(e,a,s)}})}finalize(){return Promise.reject(new _d)}deinitialize(){return this._componentState=void 0,this._paymentComponent&&(this._paymentComponent.unmount(),this._paymentComponent=void 0),this._cardVerificationComponent&&(this._cardVerificationComponent.unmount(),this._cardVerificationComponent=void 0),Promise.resolve()}_updateComponentState(e){this._componentState=e}_getLocale(){const e=this._paymentIntegrationService.getState().getLocale();return e&&\"es\"===e.substring(0,2)?\"es\":e}_getAdyenClient(){if(!this._adyenClient)throw new Vt(Tt.PaymentNotInitialized);return this._adyenClient}_getPaymentInitializeOptions(){if(!this._paymentInitializeOptions)throw new rn('\"options.adyenv3\" argument was not provided during initialization.');return this._paymentInitializeOptions}_handleAction(e){return new Promise((t,n)=>{const{additionalActionOptions:i}=this._getPaymentInitializeOptions(),{onBeforeLoad:r,containerId:o,onLoad:a,onComplete:s,widgetSize:d,onActionHandled:c}=i,l=JSON.parse(e.action),u=this._getAdyenClient().createFromAction(l,{onActionHandled:e=>{c&&\"function\"==typeof c&&\"3DS2Fingerprint\"!==e.componentType&&c()},onAdditionalDetails:e=>{const n={methodId:l.paymentMethodType,paymentData:{nonce:JSON.stringify(e.data)}};s&&\"function\"==typeof s&&s(),t(n)},challengeWindowSize:d||\"05\",onError:e=>n(e)});r&&\"function\"==typeof r&&r(l.type===ld.ThreeDS2||l.type===ld.QRCode||l.type===ld.Sdk),this._mountElement(u,o),a&&\"function\"==typeof a&&a(()=>{n(new Mn),u.unmount()})})}_mapAdyenPlaceholderData(e,t){if(!e)return{};const{firstName:n,lastName:i,address1:r,address2:o,postalCode:a,city:s,stateOrProvinceCode:d,countryCode:c}=e;return{holderName:t?`${n} ${i}`:\"\",firstName:t?n:\"\",lastName:t?i:\"\",billingAddress:{street:r,houseNumberOrName:o,postalCode:a,city:s,stateOrProvince:d,country:c}}}_mountCardVerificationComponent(){const e=this._getPaymentInitializeOptions(),t=this._getAdyenClient();let n;return new Promise((i,r)=>{var o,a,s;if(e.cardVerificationContainerId){n=t.create(hd.SecuredFields,Object.assign(Object.assign({},e.options),{styles:Object.assign(Object.assign({},null===(o=e.options)||void 0===o?void 0:o.styles),{placeholder:Object.assign({color:\"transparent\",caretColor:\"#000\"},null===(s=null===(a=e.options)||void 0===a?void 0:a.styles)||void 0===s?void 0:s.placeholder)}),onChange:e=>this._updateComponentState(e),onError:t=>e.validateCardFields(t),onFieldValid:t=>e.validateCardFields(t)}));try{this._mountElement(n,e.cardVerificationContainerId)}catch(e){r(new Vt(Tt.PaymentNotInitialized))}}i(n)})}_mountPaymentComponent(e){let t;const n=this._getPaymentInitializeOptions(),i=this._getAdyenClient();return new Promise((r,o)=>{const a=this._paymentIntegrationService.getState().getBillingAddress(),{prefillCardHolderName:s}=e.initializationData;t=i.create(e.method,Object.assign(Object.assign(Object.assign({},n.options),{showBrandsUnderCardNumber:!1,billingAddressRequired:!1,showEmailAddress:!1,onChange:e=>this._updateComponentState(e),onSubmit:e=>this._updateComponentState(e)}),a?{data:this._mapAdyenPlaceholderData(a,s)}:{}));try{this._mountElement(t,n.containerId)}catch(e){o(new Vt(Tt.PaymentNotInitialized))}r(t)})}_processAdditionalAction(e,t,n){return Od(this,void 0,void 0,function*(){if(!Xr(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"additional_action_required\"}))throw e;const i=yield this._handleAction(e.body.provider_data);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},i),{paymentData:Object.assign(Object.assign({},i.paymentData),{shouldSaveInstrument:t,shouldSetAsDefaultInstrument:n})}))}catch(e){return this._processAdditionalAction(e,t,n)}})}_validateCardData(){var e;const t=this._getPaymentInitializeOptions().hasVaultedInstruments?this._cardVerificationComponent:this._paymentComponent;if((null===(e=null==t?void 0:t.componentRef)||void 0===e?void 0:e.showValidation)&&t.state&&(t.componentRef.showValidation(),0===Object.keys(t.state).length||!t.state.isValid))throw new Ki(this._mapCardErrors(t.state.errors))}_mapCardErrors(e={}){const t={};return Object.keys(e).forEach(n=>{t[n]=[{message:e[n],type:n}]}),t}_mountElement(e,t){document.getElementById(t)&&e.mount(`#${t}`)}}const Ad=nn(e=>new Ed(e,new bd((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getStylesheetLoader)())),[{gateway:\"adyenv3\"}]);var kd,Td=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Dd{constructor(e,t){this.paymentIntegrationService=e,this.affirmScriptLoader=t}initialize(e){return Td(this,void 0,void 0,function*(){yield this.paymentIntegrationService.loadPaymentMethod(e.methodId);const t=this.paymentIntegrationService.getState(),{clientToken:n,config:{testMode:i}}=t.getPaymentMethodOrThrow(e.methodId);if(!n)throw new jt(kt.MissingPaymentMethod);this.affirm=yield this.affirmScriptLoader.load(n,i)})}execute(e,t){var n;return Td(this,void 0,void 0,function*(){const i=null===(n=e.payment)||void 0===n?void 0:n.methodId,{useStoreCredit:r}=e;if(!this.affirm)throw new Vt(Tt.PaymentNotInitialized);if(!i)throw new Yi([\"payment.methodId\"]);yield this.paymentIntegrationService.submitOrder({useStoreCredit:r},t);const o={methodId:i,paymentData:{nonce:(yield this.initializeAffirmCheckout()).checkout_token}};yield this.paymentIntegrationService.submitPayment(o)})}deinitialize(){return this.affirm&&(this.affirm=void 0),Promise.resolve()}finalize(){return Promise.reject(new _d)}initializeAffirmCheckout(){var e;return null===(e=this.affirm)||void 0===e||e.checkout(this.getCheckoutInformation()),new Promise((e,t)=>{var n,i;null===(n=this.affirm)||void 0===n||n.checkout.open({onFail:e=>{\"canceled\"===e.reason?t(new Mn):t(new Bi)},onSuccess:t=>{e(t)}}),null===(i=this.affirm)||void 0===i||i.ui.error.on(\"close\",()=>{t(new Mn)})})}getCheckoutInformation(){const e=this.paymentIntegrationService.getState(),t=e.getStoreConfig(),n=e.getConsignments(),i=e.getOrder(),r=e.getCart();if(!t)throw new jt(kt.MissingCheckoutConfig);if(!i)throw new jt(kt.MissingCheckout);const o=new qa(i.currency.decimalPlaces),a=this.getBillingAddress(),s=this.getShippingAddress(),d=Er(r,t)&&s?s:a;return{merchant:{user_confirmation_url:t.links.checkoutLink,user_cancel_url:t.links.checkoutLink,user_confirmation_url_action:\"POST\"},shipping:d,billing:a,items:this.getItems(o,i),metadata:{shipping_type:this.getShippingType(n),mode:\"modal\",platform_type:\"BigCommerce\",platform_version:\"\",platform_affirm:\"\"},discounts:this.getDiscounts(o,i),order_id:i.orderId?i.orderId.toString():\"\",shipping_amount:o.toInteger(i.shippingCostTotal),tax_amount:o.toInteger(i.taxTotal),total:o.toInteger(i.orderAmount)}}getShippingType(e){if(!e)return\"\";const t=e[0];return(null==t?void 0:t.selectedShippingOption)?t.selectedShippingOption.type:\"\"}getBillingAddress(){const e=this.paymentIntegrationService.getState().getBillingAddress();if(!e)throw new jt(kt.MissingBillingAddress);return{name:{first:e.firstName,last:e.lastName,full:`${e.firstName} ${e.lastName}`},address:{line1:e.address1,line2:e.address2,city:e.city,state:e.stateOrProvinceCode,zipcode:e.postalCode,country:e.countryCode},phone_number:e.phone,email:e.email}}getShippingAddress(){const e=this.paymentIntegrationService.getState().getShippingAddress();if(e)return{name:{first:e.firstName,last:e.lastName,full:`${e.firstName} ${e.lastName}`},address:{line1:e.address1,line2:e.address2,city:e.city,state:e.stateOrProvinceCode,zipcode:e.postalCode,country:e.countryCode},phone_number:e.phone}}getItems(e,t){const n=[];return t.lineItems.physicalItems.forEach(t=>{n.push({display_name:t.name,sku:t.sku,unit_price:e.toInteger(t.salePrice),qty:t.quantity,item_image_url:t.imageUrl,item_url:t.url,categories:this.getCategories(t.categories)})}),t.lineItems.digitalItems.forEach(t=>{n.push({display_name:t.name,sku:t.sku,unit_price:e.toInteger(t.salePrice),qty:t.quantity,item_image_url:t.imageUrl,item_url:t.url,categories:this.getCategories(t.categories)})}),t.lineItems.giftCertificates.forEach(t=>{n.push({display_name:t.name,sku:\"\",unit_price:e.toInteger(t.amount),qty:1,item_image_url:\"\",item_url:\"\"})}),t.lineItems.customItems&&t.lineItems.customItems.forEach(t=>{n.push({display_name:t.name,sku:t.sku,unit_price:e.toInteger(t.listPrice),qty:t.quantity,item_image_url:\"\",item_url:\"\"})}),n}getDiscounts(e,t){const n={};return t.coupons.forEach(t=>{t.discountedAmount>0&&(n[t.code]={discount_amount:e.toInteger(t.discountedAmount),discount_display_name:t.displayName})}),t.discountAmount>0&&(n.DISCOUNTED_AMOUNT={discount_amount:e.toInteger(t.discountAmount),discount_display_name:\"discount\"}),n}getCategories(e){return e?e.map(e=>e.map(e=>e.name)):[[]]}}!function(e){e.PROD=\"//cdn1.affirm.com/js/v2/affirm.js\",e.SANDBOX=\"//cdn1-sandbox.affirm.com/js/v2/affirm.js\"}(kd||(kd={}));class Md{constructor(e=window){this.affirmWindow=e}load(e=\"\",t){const n=t?kd.SANDBOX:kd.PROD;if(function(e,t,n,i,r,o,a){const s=e[n]||{},d=document.createElement(o),c=document.getElementsByTagName(o)[0],l=function(e,t,n){return function(){e[t]._.push([n,arguments])}};s[i]=l(s,i,\"set\");const u=s[i];s[r]={},s[r]._=[],u._=[],s._=[],s[r][a]=l(s,r,a),s.jsReady=function(){s._.push([a,arguments])};let h=0;for(const e=\"set add save post open empty reset on off trigger ready setProduct\".split(\" \");h<e.length;h++)u[e[h]]=l(s,i,e[h]);let p=0;for(const e=[\"get\",\"token\",\"url\",\"items\"];p<e.length;p++)u[e[p]]=function(){};d.async=!0,d.src=t[o],c.parentNode&&c.parentNode.insertBefore(d,c),delete t[o],u(t),e[n]=s}(window,{public_api_key:e,script:n},\"affirm\",\"checkout\",\"ui\",\"script\",\"ready\"),!this.affirmWindow.affirm)throw new Xt;return Promise.resolve(this.affirmWindow.affirm)}}const zd=nn(e=>new Dd(e,new Md),[{id:\"affirm\"}]);class Nd extends Bt{constructor(e){super(e||\"The current order could not be finalized successfully\"),this.name=\"OrderFinalizationNotCompletedError\",this.type=\"order_finalization_not_completed\"}}var xd=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Fd{constructor(e,t){this._paymentIntegrationService=e,this._afterpayScriptLoader=t}initialize(e){var t;return xd(this,void 0,void 0,function*(){const n=this._paymentIntegrationService.getState(),i=n.getPaymentMethod(e.methodId,e.gatewayId),r=(null===(t=n.getCart())||void 0===t?void 0:t.currency.code)||\"\",o=this._mapCurrencyToISO2(r);if(!i)throw new jt(kt.MissingPaymentMethod);this._afterpaySdk=yield this._afterpayScriptLoader.load(i,o)})}deinitialize(){return this._afterpaySdk&&(this._afterpaySdk=void 0),Promise.resolve()}execute(e,t){var n;return xd(this,void 0,void 0,function*(){if(!e.payment)throw new Yi([\"payment.gatewayId\",\"payment.methodId\"]);const{gatewayId:i,methodId:r}=e.payment;if(!i||!r)throw new Yi([\"payment.gatewayId\",\"payment.methodId\"]);const{useStoreCredit:o}=e;void 0!==o&&(yield this._paymentIntegrationService.applyStoreCredit(o)),yield this._loadPaymentMethod(i,r,t);const a=this._paymentIntegrationService.getState();yield this._paymentIntegrationService.validateCheckout(a.getCheckout(),t);const s=(null===(n=a.getCart())||void 0===n?void 0:n.currency.code)||\"\",d=this._mapCurrencyToISO2(s);return this._redirectToAfterpay(d,a.getPaymentMethod(r,i)),new Promise(()=>{})})}finalize(e){var t,n,i;return xd(this,void 0,void 0,function*(){const r=this._paymentIntegrationService.getState(),o=r.getPaymentId(),a=r.getContextConfig();if(!o)throw new jt(kt.MissingCheckout);if(!(null==a?void 0:a.payment.token))throw new jt(kt.MissingCheckoutConfig);const s={methodId:o.providerId,paymentData:{nonce:a.payment.token}};yield this._paymentIntegrationService.submitOrder({},e);try{yield this._paymentIntegrationService.submitPayment(s)}catch(e){if(yield this._paymentIntegrationService.forgetCheckout(o.providerId),yield this._paymentIntegrationService.loadPaymentMethods(),Xr(e))throw new Nd(null===(i=null===(n=null===(t=e.body)||void 0===t?void 0:t.errors)||void 0===n?void 0:n[0])||void 0===i?void 0:i.message)}})}_redirectToAfterpay(e,t){if(!this._afterpaySdk||!(null==t?void 0:t.clientToken))throw new Vt(Tt.PaymentNotInitialized);this._afterpaySdk.initialize({countryCode:e}),this._afterpaySdk.redirect({token:t.clientToken})}_mapCurrencyToISO2(e){return{AUD:\"AU\",NZD:\"NZ\",CAD:\"CA\",USD:\"US\"}[e]||\"AU\"}_loadPaymentMethod(e,t,n){var i;return xd(this,void 0,void 0,function*(){try{return yield this._paymentIntegrationService.loadPaymentMethod(e,Object.assign(Object.assign({},n),{params:Object.assign(Object.assign({},null==n?void 0:n.params),{method:t})}))}catch(e){if(e instanceof qn&&422===(null===(i=e.body)||void 0===i?void 0:i.status))throw new rn(\"Afterpay can't process your payment for this order, please try another payment method\");throw e}})}}var Rd,Ld;!function(e){e.PROD=\"//portal.afterpay.com/afterpay-async.js\",e.SANDBOX=\"//portal-sandbox.afterpay.com/afterpay-async.js\"}(Rd||(Rd={})),function(e){e.PROD=\"//portal.afterpay.com/afterpay-async.js\",e.SANDBOX=\"//portal.sandbox.afterpay.com/afterpay-async.js\"}(Ld||(Ld={}));class Bd{constructor(e){this._scriptLoader=e}load(e,t){return n=this,i=void 0,o=function*(){const n=e.config.testMode||!1,i=this._getScriptURI(t,n);return this._scriptLoader.loadScript(i).then(()=>{if(!function(e){return\"AfterPay\"in e}(window))throw new Xt;return window.AfterPay})},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}_getScriptURI(e,t){return\"US\"===e?t?Ld.SANDBOX:Ld.PROD:t?Rd.SANDBOX:Rd.PROD}}const jd=nn(e=>new Fd(e,new Bd((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.createScriptLoader)())),[{gateway:\"afterpay\"},{id:\"afterpay\"}]);var Ud=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class qd{constructor(e,t){this.paymentIntegrationService=e,this.amazonPayV2PaymentProcessor=t}initialize(e){return Ud(this,void 0,void 0,function*(){const{methodId:t,amazonpay:n}=e;if(!t)throw new rn('Unable to proceed because \"methodId\" argument is not provided.');const i=this.paymentIntegrationService.getState(),{features:r}=i.getStoreConfigOrThrow().checkoutSettings,o=i.getPaymentMethodOrThrow(t),a=o.initializationData||{},{paymentToken:s=\"\",region:d=\"\",isButtonMicroTextDisabled:c}=a;if(yield this.amazonPayV2PaymentProcessor.initialize(o),this._isReadyToPay(s))(null==n?void 0:n.editButtonId)&&this._bindEditButton(n.editButtonId,s,\"changePayment\",this._isModalFlow(d));else{const{id:e}=this._createContainer();if(this._amazonPayButton=this.amazonPayV2PaymentProcessor.renderAmazonPayButton({checkoutState:i,containerId:e,decoupleCheckoutInitiation:this._isOneTimeTransaction(r,d.toUpperCase()),methodId:t,placement:$t.Checkout,isButtonMicroTextDisabled:c}),!this._amazonPayButton)throw new rn(\"Unable to render the Amazon Pay button to an invalid HTML container element.\")}})}execute(e,t){return Ud(this,void 0,void 0,function*(){const{payment:n}=e;if(!n)throw new Yi([\"payment\"]);const{methodId:i}=n,r=this.paymentIntegrationService.getState(),{features:o}=r.getStoreConfigOrThrow().checkoutSettings,a=r.getPaymentMethodOrThrow(i).initializationData||{},{paymentToken:s=\"\",region:d=\"\"}=a;if(this._isReadyToPay(s)||this._isOneTimeTransaction(o,d.toUpperCase())){const n={methodId:i,paymentData:{nonce:s||\"apb\"}};yield this.paymentIntegrationService.submitOrder(e,t);try{return void(yield this.paymentIntegrationService.submitPayment(n))}catch(e){if(!(Xr(e)&&(c=e.body,\"object\"==typeof c&&null!==c&&\"status\"in c&&\"additional_action_required\"in c&&\"additional_action_required\"===c.status&&\"data\"in c.additional_action_required&&\"redirect_url\"in c.additional_action_required.data&&\"string\"==typeof c.additional_action_required.data.redirect_url)))throw e;const{additional_action_required:t}=e.body,{redirect_url:n}=t.data;if(s)return new Promise(()=>window.location.assign(n));this.amazonPayV2PaymentProcessor.prepareCheckout(JSON.parse(n))}}var c;return this._getAmazonPayButton().click(),this._isModalFlow(d)?new Promise((e,t)=>{const n=()=>{window.removeEventListener(\"focus\",n),t(new Mn(\"Shopper needs to login to Amazonpay to continue\"))};window.addEventListener(\"focus\",n)}):new Promise(lodash__WEBPACK_IMPORTED_MODULE_5__.noop)})}finalize(){return Promise.reject(new _d)}deinitialize(){return Ud(this,void 0,void 0,function*(){yield this.amazonPayV2PaymentProcessor.deinitialize(),this._amazonPayButton=void 0})}_bindEditButton(e,t,n,i){const r=document.getElementById(e);if(r&&r.parentNode){if(!i){const e=r.cloneNode(!0);r.parentNode.replaceChild(e,r),e.addEventListener(\"click\",()=>{this._showLoadingSpinner()})}this.amazonPayV2PaymentProcessor.bindButton(e,t,n)}}_isModalFlow(e){return\"us\"===e}_showLoadingSpinner(){return Ud(this,void 0,void 0,function*(){yield this.paymentIntegrationService.widgetInteraction(()=>new Promise(lodash__WEBPACK_IMPORTED_MODULE_5__.noop))})}_createContainer(){let e=document.getElementById(\"AmazonPayButton\");return e||(e=document.createElement(\"div\"),e.id=\"AmazonPayButton\",e.style.display=\"none\",document.body.appendChild(e))}_getAmazonPayButton(){return qt(this._amazonPayButton,()=>new Vt(Tt.PaymentNotInitialized))}_isOneTimeTransaction(e,t){return this.amazonPayV2PaymentProcessor.isPh4Enabled(e,t)&&e[\"INT-6399.amazon_pay_apb\"]}_isReadyToPay(e){return!!e}}const Vd=nn(e=>new qd(e,tn()),[{id:\"amazonpay\"}]);var Gd,Hd=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};!function(e){e.Shipping=\"Shipping\",e.Subtotal=\"Subtotal\",e.StoreCredit=\"Store Credit\"}(Gd||(Gd={}));class $d{constructor(e,t,n,i,r){this._requestSender=e,this._paymentIntegrationService=t,this._sessionFactory=n,this._braintreeSdk=i,this._applePayScriptLoader=r,this._shippingLabel=Gd.Shipping,this._subTotalLabel=Gd.Subtotal,this._storeCreditLabel=Gd.StoreCredit}initialize(e){var t,n,i,r;return Hd(this,void 0,void 0,function*(){if(!(null==e?void 0:e.methodId))throw new rn('Unable to submit payment because \"options.methodId\" argument is not provided.');const{methodId:o}=e;yield this._applePayScriptLoader.loadSdk(),this._shippingLabel=(null===(t=e.applepay)||void 0===t?void 0:t.shippingLabel)||Gd.Shipping,this._subTotalLabel=(null===(n=e.applepay)||void 0===n?void 0:n.subtotalLabel)||Gd.Subtotal,this._storeCreditLabel=(null===(i=e.applepay)||void 0===i?void 0:i.storeCreditLabel)||Gd.StoreCredit;const a=(yield this._paymentIntegrationService.loadPaymentMethod(o)).getPaymentMethodOrThrow(o);(null===(r=a.initializationData)||void 0===r?void 0:r.gateway)===kn.BRAINTREE&&(yield this._initializeBraintreeSdk())})}execute(e,t){return Hd(this,void 0,void 0,function*(){const{payment:n}=e,i=this._paymentIntegrationService.getState();if(!n)throw new Yi([\"payment\"]);const{methodId:r}=n,o=i.getPaymentMethodOrThrow(r),a=this._getBaseRequest(i,o),s=this._sessionFactory.create(a);return yield this._paymentIntegrationService.submitOrder({useStoreCredit:e.useStoreCredit},t),s.begin(),new Promise((e,t)=>{this._handleApplePayEvents(s,o,{resolve:e,reject:t})})})}finalize(){return Promise.reject(new _d)}deinitialize(){return Promise.resolve()}_getBaseRequest(e,t){const n=e.getCheckoutOrThrow(),i=e.getCartOrThrow(),r=e.getStoreConfigOrThrow(),{storeProfile:{storeCountryCode:o,storeName:a}}=r,{currency:{code:s,decimalPlaces:d}}=i,{initializationData:{merchantCapabilities:c,supportedNetworks:l}}=t,{grandTotal:u,isStoreCreditApplied:h,outstandingBalance:p}=n,m=[{label:this._subTotalLabel,amount:`${n.subtotal.toFixed(d)}`}];if(n.taxes.forEach(e=>m.push({label:e.name,amount:`${e.amount.toFixed(d)}`})),m.push({label:this._shippingLabel,amount:`${n.shippingCostTotal.toFixed(d)}`}),h){const{storeCredit:t}=e.getCustomerOrThrow();m.push({label:this._storeCreditLabel,amount:`-${Math.min(u,t).toFixed(d)}`})}return{countryCode:o,currencyCode:s,merchantCapabilities:c,supportedNetworks:l,lineItems:m,total:{label:a,amount:`${p.toFixed(d)}`,type:\"final\"}}}_handleApplePayEvents(e,t,n){e.onvalidatemerchant=n=>Hd(this,void 0,void 0,function*(){try{const{body:i}=yield this._onValidateMerchant(t,n);e.completeMerchantValidation(i)}catch(e){throw new Error(\"Merchant validation failed\")}}),e.oncancel=()=>Hd(this,void 0,void 0,function*(){return n.reject(new Mn(\"Continue with applepay\"))}),e.onpaymentauthorized=i=>this._onPaymentAuthorized(i,e,t,n)}_onValidateMerchant(e,t){return Hd(this,void 0,void 0,function*(){const n=[`validationUrl=${t.validationURL}`,`merchantIdentifier=${e.initializationData.merchantId}`,`displayName=${e.initializationData.storeName}`,`domainName=${window.location.hostname}`].join(\"&\");return this._requestSender.post(`${e.initializationData.paymentsUrl}/api/public/v1/payments/applepay/validate_merchant`,{credentials:!1,headers:{Accept:\"application/json\",\"Content-Type\":\"application/x-www-form-urlencoded\",\"X-XSRF-TOKEN\":null},body:n})})}_onPaymentAuthorized(e,t,n,i){var r;return Hd(this,void 0,void 0,function*(){const{token:o}=e.payment;let a;(null===(r=n.initializationData)||void 0===r?void 0:r.gateway)===kn.BRAINTREE&&(a=yield this._getBraintreeDeviceData());const s={methodId:n.id,paymentData:{deviceSessionId:a,formattedPayload:{apple_pay_token:{payment_data:o.paymentData,payment_method:o.paymentMethod,transaction_id:o.transactionIdentifier}}}};try{return yield this._paymentIntegrationService.submitPayment(s),t.completePayment(ApplePaySession.STATUS_SUCCESS),i.resolve()}catch(e){return t.completePayment(ApplePaySession.STATUS_FAILURE),i.reject(new Vt(Tt.PaymentNotInitialized))}})}_getBraintreeDeviceData(){return Hd(this,void 0,void 0,function*(){try{const{deviceData:e}=yield this._braintreeSdk.getDataCollectorOrThrow();return e}catch(e){}})}_initializeBraintreeSdk(){return Hd(this,void 0,void 0,function*(){const e=this._paymentIntegrationService.getState();let t=e.getPaymentMethod(kn.BRAINTREE_FASTLANE)||e.getPaymentMethod(kn.BRAINTREE);t||(yield this._paymentIntegrationService.loadPaymentMethod(kn.BRAINTREE),t=e.getPaymentMethod(kn.BRAINTREE)),t&&t.clientToken&&t.initializationData&&this._braintreeSdk.initialize(t.clientToken)})}}const Wd=nn(e=>{const{getHost:t}=e.getState(),i=new pn(e);return new $d((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()}),e,new Rn,new En(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),window,i)),new Ln(new _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.ScriptLoader))},[{id:\"applepay\"}]),Yd={\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"};function Kd(e){return\"object\"==typeof e&&null!==e&&\"bigpayToken\"in e&&\"defaultInstrument\"in e&&\"provider\"in e&&\"trustedShippingAddress\"in e&&\"method\"in e&&\"type\"in e}var Jd=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Zd{constructor(e,t,n){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=n}initialize(e){var t,n;return Jd(this,void 0,void 0,function*(){const{methodId:i,bigcommerce_payments:r}=e||{};if(this.bigcommerce_payments=r,!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!r)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(i);const o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i);this.loadingIndicatorContainer=r.container.split(\"#\")[1],(null===(t=o.initializationData)||void 0===t?void 0:t.orderId)?this.orderId=null===(n=o.initializationData)||void 0===n?void 0:n.orderId:(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i),r.onInit&&\"function\"==typeof r.onInit&&r.onInit(()=>this.renderButton(i,r)),(void 0===r.shouldRenderPayPalButtonOnInitialization||r.shouldRenderPayPalButtonOnInitialization)&&this.renderButton(i,r))})}execute(e,t){return Jd(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),{onError:r}=this.bigcommerce_payments||{},o=this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features,a=o&&o[\"PAYPAL-3438.handling_instrument_declined_error_ppc\"];if(!n)throw new Yi([\"payment\"]);const{methodId:s,paymentData:d}=n;if(this.isPayPalVaultedInstrumentPaymentData(d)&&!this.orderId&&(this.orderId=yield this.createOrder()),!this.orderId)throw new Bi;const c=this.isPayPalVaultedInstrumentPaymentData(d)?this.prepareVaultedInstrumentPaymentPayload(s,this.orderId,d):this.preparePaymentPayload(s,this.orderId,d);try{yield this.paymentIntegrationService.submitOrder(i,t),yield this.paymentIntegrationService.submitPayment(c)}catch(e){return this.isProviderError(e)&&a&&(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n.methodId),yield new Promise((e,t)=>{var i;this.bigcommerce_payments&&(null===(i=this.paypalButton)||void 0===i||i.close(),this.renderButton(n.methodId,this.bigcommerce_payments),this.handleError(new Error(\"INSTRUMENT_DECLINED\"),r)),t()})),this.handleError(e,r),Promise.reject()}})}finalize(){return Promise.reject(new _d)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}prepareVaultedInstrumentPaymentPayload(e,t,n){const{instrumentId:i,shouldSetAsDefaultInstrument:r}=n,o=!this.isTrustedVaultingFlow(n);return o?{methodId:e,paymentData:{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:r,formattedPayload:{paypal_account:{order_id:t}}}}:{methodId:e,paymentData:{instrumentId:i,shouldSetAsDefaultInstrument:r,formattedPayload:{paypal_account:{order_id:t},bigpay_token:{token:i}}}}}preparePaymentPayload(e,t,n){const{shouldSaveInstrument:i=!1,shouldSetAsDefaultInstrument:r=!1}=Pd(n)?n:{};return{methodId:e,paymentData:{shouldSaveInstrument:i,shouldSetAsDefaultInstrument:r,formattedPayload:{paypal_account:{order_id:t}}}}}renderButton(e,t){const n=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:r}=i.initializationData||{},{checkoutPaymentButtonStyles:o}=r||{},{container:a,onError:s,onRenderButton:d,onValidate:c,submitForm:l}=t,u={fundingSource:n.FUNDING.PAYPAL,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(o),createOrder:()=>this.createOrder(),onClick:(e,t)=>this.handleClick(t,c),onApprove:e=>this.handleApprove(e,l),onError:e=>this.handleError(e,s),onCancel:()=>this.toggleLoadingIndicator(!1)};this.paypalButton=n.Buttons(u),this.paypalButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.paypalButton.render(a))}handleClick(e,t){return Jd(this,void 0,void 0,function*(){const{resolve:n,reject:i}=e;yield t(()=>(this.toggleLoadingIndicator(!0),n()),i)})}handleApprove({orderID:e},t){this.orderId=e,t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createOrder(){return Jd(this,void 0,void 0,function*(){const e=this.getFieldsValues();return this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_paymentscheckout\",{shouldSaveInstrument:(null==e?void 0:e.shouldSaveInstrument)||!1})})}getFieldsValues(){const{getFieldsValues:e}=this.bigcommerce_payments||{};return\"function\"==typeof e?e():void 0}isTrustedVaultingFlow(e){if(e&&Sd(e)){const t=this.paymentIntegrationService.getState().getInstruments(),n=null==t?void 0:t.find(t=>Kd(t)&&t.bigpayToken===e.instrumentId);return!(Kd(n)&&!n.trustedShippingAddress)}return!1}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isPayPalVaultedInstrumentPaymentData(e){return!!e&&Sd(e)&&Pd(e)}isProviderError(e){var t,n,i;return!!function(e){return\"object\"==typeof e&&null!==e&&\"errors\"in e}(e)&&\"INSTRUMENT_DECLINED\"===(null===(i=null===(n=((null===(t=null==e?void 0:e.errors)||void 0===t?void 0:t.filter(e=>e.provider_error))||[])[0])||void 0===n?void 0:n.provider_error)||void 0===i?void 0:i.code)}}const Qd=nn(e=>new Zd(e,si(e),new Ba({containerStyles:Yd})),[{id:\"bigcommerce_payments\"}]);function Xd(e){return!!e&&(\"authenticationState\"in e||\"addresses\"in e||\"instruments\"in e)}var ec=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class tc{constructor(e,t,n,i){this.paymentIntegrationService=e,this.bigCommercePaymentsRequestSender=t,this.bigCommercePaymentsSdk=n,this.bigCommercePaymentsFastlaneUtils=i}initialize(e){var t,n;return ec(this,void 0,void 0,function*(){const{methodId:i,bigcommerce_payments_fastlane:r}=e;if(!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(this.methodId=i,!r)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_fastlane\" argument is not provided.');if(this.bigcommerce_payments_fastlane=r,!r.onInit||\"function\"!=typeof r.onInit)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_fastlane.onInit\" argument is not provided or it is not a function.');if(!r.onChange||\"function\"!=typeof r.onChange)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_fastlane.onChange\" argument is not provided or it is not a function.');yield this.paymentIntegrationService.loadPaymentMethod(i);const o=this.paymentIntegrationService.getState(),a=o.getCartOrThrow(),s=o.getPaymentMethodOrThrow(i),{isDeveloperModeApplicable:d,isFastlaneStylingEnabled:c}=s.initializationData||{};this.threeDSVerificationMethod=null===(t=s.initializationData)||void 0===t?void 0:t.threeDSVerificationMethod,this.paypalFastlaneSdk=yield this.bigCommercePaymentsSdk.getPayPalFastlaneSdk(s,a.currency.code,a.id);const l=Ai(c?null===(n=null==s?void 0:s.initializationData)||void 0===n?void 0:n.fastlaneStyles:{},null==r?void 0:r.styles);yield this.bigCommercePaymentsFastlaneUtils.initializePayPalFastlane(this.paypalFastlaneSdk,!!d,l),this.shouldRunAuthenticationFlow()&&(yield this.runPayPalAuthenticationFlowOrThrow(i)),yield this.initializePayPalPaymentComponent(),r.onInit(e=>this.renderPayPalPaymentComponent(e)),r.onChange(()=>this.handlePayPalStoredInstrumentChange(i))})}execute(e,t){return ec(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);const{paymentData:r,methodId:o}=n,a=r&&Sd(r);try{yield this.paymentIntegrationService.submitOrder(i,t);const e=a?yield this.prepareVaultedInstrumentPaymentPayload(o,r):yield this.preparePaymentPayload(o,r);yield this.paymentIntegrationService.submitPayment(e),this.bigCommercePaymentsFastlaneUtils.removeStorageSessionId()}catch(e){if(function(e){return\"object\"==typeof e&&null!==e&&\"message\"in e&&\"response\"in e&&\"name\"in e.response}(e)&&\"INVALID_REQUEST\"===e.response.name){const e={translationKey:\"payment.errors.invalid_request_error\"};return this.handleError(e),Promise.reject()}if(e instanceof Error&&\"FastlaneError\"!==e.name)throw e;return Promise.reject()}})}finalize(){return Promise.reject(new _d)}deinitialize(){return ec(this,void 0,void 0,function*(){return Promise.resolve()})}shouldRunAuthenticationFlow(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),n=e.getCustomerOrThrow(),i=e.getPaymentProviderCustomer(),r=Xd(i)?i:{},o=this.bigCommercePaymentsFastlaneUtils.getStorageSessionId();return!(!n.isGuest||(null==r?void 0:r.authenticationState)===Si.CANCELED||(null==r?void 0:r.authenticationState)||o!==t.id)}runPayPalAuthenticationFlowOrThrow(e){return ec(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),n=t.getCartOrThrow(),i=t.getCustomer(),r=t.getBillingAddress(),o=(null==i?void 0:i.email)||(null==r?void 0:r.email)||\"\",{customerContextId:a}=yield this.bigCommercePaymentsFastlaneUtils.lookupCustomerOrThrow(o),s=yield this.bigCommercePaymentsFastlaneUtils.triggerAuthenticationFlowOrThrow(a),{authenticationState:d,addresses:c,instruments:l}=this.bigCommercePaymentsFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,s);yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:d,addresses:c,instruments:l}),s.authenticationState===Si.CANCELED?this.bigCommercePaymentsFastlaneUtils.removeStorageSessionId():this.bigCommercePaymentsFastlaneUtils.updateStorageSessionId(n.id)}catch(e){}})}initializePayPalPaymentComponent(){return ec(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),t=e.phone,n=`${e.firstName} ${e.lastName}`.trim(),i=this.bigCommercePaymentsFastlaneUtils.getPayPalFastlaneOrThrow(),r={fields:Object.assign({cardholderName:{prefill:n,enabled:!0}},t&&{phoneNumber:{prefill:t}})};this.paypalComponentMethods=yield i.FastlaneCardComponent(r)})}renderPayPalPaymentComponent(e){const t=this.getPayPalComponentMethodsOrThrow();if(!e)throw new rn('Unable to render card component because \"container\" argument is not provided.');t.render(e)}getPayPalComponentMethodsOrThrow(){if(!this.paypalComponentMethods)throw new Xt;return this.paypalComponentMethods}prepareVaultedInstrumentPaymentPayload(e,t){return ec(this,void 0,void 0,function*(){const{instrumentId:n}=t,i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),r=this.isBigcommercePaymentsFastlaneThreeDSAvailable()&&i.config.is3dsEnabled;r||(yield this.createOrder(n));const o=r?yield this.get3DSNonce(n):n;return{methodId:e,paymentData:{formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:o}}}}})}preparePaymentPayload(e,t){return ec(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState(),i=n.getBillingAddressOrThrow(),r=n.getPaymentMethodOrThrow(e),o=`${i.firstName} ${i.lastName}`.trim(),{getPaymentToken:a}=this.getPayPalComponentMethodsOrThrow(),{id:s}=yield a({name:{fullName:o},billingAddress:this.bigCommercePaymentsFastlaneUtils.mapBcToPayPalAddress(i)}),d=this.isBigcommercePaymentsFastlaneThreeDSAvailable()&&r.config.is3dsEnabled;d||(yield this.createOrder(s));const{shouldSaveInstrument:c=!1,shouldSetAsDefaultInstrument:l=!1}=Pd(t)?t:{},u=d?yield this.get3DSNonce(s):s;return{methodId:e,paymentData:Object.assign(Object.assign({},t),{shouldSaveInstrument:c,shouldSetAsDefaultInstrument:l,formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:u}}})}})}createOrder(e){return ec(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getCartOrThrow().id;if(this.methodId){const{orderId:n}=yield this.bigCommercePaymentsRequestSender.createOrder(this.methodId,{cartId:t,fastlaneToken:e});this.orderId=n}})}get3DSNonce(e){var t;return ec(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState(),i=n.getCartOrThrow(),r=n.getOrderOrThrow(),o=n.getStoreConfigOrThrow().links.checkoutLink,a=null===(t=this.paypalFastlaneSdk)||void 0===t?void 0:t.ThreeDomainSecureClient;if(!a)throw new Xt;const s={amount:r.orderAmount.toFixed(2),currency:i.currency.code,nonce:e,threeDSRequested:\"SCA_ALWAYS\"===this.threeDSVerificationMethod,transactionContext:{experience_context:{locale:\"en-US\",return_url:o,cancel_url:o}}};if(yield a.isEligible(s)){const{liabilityShift:t,authenticationState:n,nonce:i}=yield a.show();if(t===Gn.No||t===Gn.Unknown)throw new Bi;if(yield this.createOrder(e),n===yi.Succeeded)return i;if(n===yi.Errored)throw new Bi;if(n===yi.Cancelled)throw console.error(\"3DS check was canceled\"),new Bi}return e})}handlePayPalStoredInstrumentChange(e){return ec(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsFastlaneUtils.getPayPalFastlaneOrThrow(),{selectionChanged:n,selectedCard:i}=yield t.profile.showCardSelector();if(n){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomer(),n=Xd(t)?t:{},r=this.bigCommercePaymentsFastlaneUtils.mapPayPalToBcInstrument(e,i)[0];return yield this.paymentIntegrationService.updatePaymentProviderCustomer(Object.assign(Object.assign({},n),{instruments:[r]})),r}})}isBigcommercePaymentsFastlaneThreeDSAvailable(){return cn(this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features,\"PROJECT-7080.bcp_fastlane_three_ds\")}handleError(e){var t;(null===(t=this.bigcommerce_payments_fastlane)||void 0===t?void 0:t.onError)&&\"function\"==typeof this.bigcommerce_payments_fastlane.onError&&this.bigcommerce_payments_fastlane.onError(e)}}const nc=nn(e=>{const{getHost:t}=e.getState();return new tc(e,new ri((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()})),Ci(),Oi())},[{id:\"bigcommerce_payments_fastlane\"}]),ic=function({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t};var rc=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class oc{constructor(e,t,n,i){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=n,this.paypalSdkHelper=i}initialize(e){return rc(this,void 0,void 0,function*(){const{methodId:t,bigcommerce_payments_paylater:n}=e||{};if(!t)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_paylater\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(t);const i=this.paymentIntegrationService.getState(),r=i.getPaymentMethodOrThrow(t),{paypalBNPLConfiguration:o=[],orderId:a}=r.initializationData||{},{bannerContainerId:s,container:d}=n;if(void 0!==s){if(!document.getElementById(s))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=o&&o.find(({id:e})=>\"checkout\"===e);if(!(null==e?void 0:e.status))return;const t=yield this.paypalSdkHelper.getPayPalMessages(r,i.getCartOrThrow().currency.code);return this.renderMessages(t,s,e)}a?this.orderId=a:(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(t),this.loadingIndicatorContainer=null==d?void 0:d.split(\"#\")[1],this.renderButton(t,n))})}execute(e,t){return rc(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);if(!this.orderId)throw new Bi;yield this.paymentIntegrationService.submitOrder(i,t),yield this.bigCommercePaymentsIntegrationService.submitPayment(n.methodId,this.orderId)})}finalize(){return Promise.reject(new _d)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.bigCommercePaymentsButtons)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){if(!(null==t?void 0:t.container))throw new rn('Unable to initialize payment because \"container\" argument is not provided.');const n=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:r}=i.initializationData||{},{checkoutPaymentButtonStyles:o}=r||{},{container:a,onError:s,onRenderButton:d,onValidate:c,submitForm:l}=t,u=[n.FUNDING.PAYLATER,n.FUNDING.CREDIT];let h=!1;u.forEach(e=>{if(h)return;const t={fundingSource:e,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(o),createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_paylater\"),onClick:(e,t)=>this.handleClick(t,c),onApprove:e=>this.handleApprove(e,l),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.bigCommercePaymentsButtons=n.Buttons(t),this.bigCommercePaymentsButtons.isEligible()||e!==n.FUNDING.PAYLATER){if(!this.bigCommercePaymentsButtons.isEligible()&&e===n.FUNDING.CREDIT)throw new on(`BigCommercePayments ${e} is not available for your region. Please use BigCommercePayments Checkout instead.`);d&&\"function\"==typeof d&&d(),this.bigCommercePaymentsButtons.render(a),h=!0}})}handleClick(e,t){return rc(this,void 0,void 0,function*(){const{resolve:n,reject:i}=e;t&&\"function\"==typeof t&&(yield t(()=>(this.toggleLoadingIndicator(!0),n()),i))})}handleApprove({orderID:e},t){this.orderId=e,t&&\"function\"==typeof t&&t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}renderMessages(e,t,n){const i={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:ic(n)};e.Messages(i).render(`#${t}`)}}const ac=nn(e=>new oc(e,si(e),new Ba({containerStyles:Yd}),Ci()),[{id:\"bigcommerce_payments_paylater\"}]);class sc extends qn{constructor(e){super(e,{message:\"The request has timed out or aborted.\"}),this.name=\"TimeoutError\",this.type=\"timeout\"}}var dc=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class cc{constructor(e,t,n,i=3e3,r=3e5){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=n,this.pollingInterval=i,this.maxPollingIntervalTime=r,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}initialize(e){return dc(this,void 0,void 0,function*(){const{gatewayId:t,methodId:n,bigcommerce_payments_ratepay:i}=e;if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!i)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_ratepay\" argument is not provided.');const{legalTextContainer:r,container:o,loadingContainerId:a}=i;if(!o)throw new rn('Unable to initialize payment because \"options.container\" argument is not provided.');if(!r)throw new rn('Unable to initialize payment because \"options.legalTextContainer\" argument is not provided.');if(!a)throw new rn('Unable to initialize payment because \"options.loadingContainerId\" argument is not provided.');this.loadingIndicatorContainer=a;const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n,t),{merchantId:d}=s.initializationData||{};if(!d)throw new rn(\"Unable to initialize payment because merchantId argument is not provided.\");this.bigcommerce_payments_ratepay=i,yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n),this.createFraudNetScript(d,n,t),this.loadFraudnetConfig(),this.renderLegalText(r,o)})}execute(e,t){return dc(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),{getFieldsValues:r}=this.bigcommerce_payments_ratepay||{};if(!n)throw new Yi([\"payment\"]);if(!r||\"function\"!=typeof r)throw new rn('Unable to initialize payment because \"options.getFieldsValues\" argument is not provided.');this.toggleLoadingIndicator(!0);try{const e=yield this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apmscheckout\",{metadataId:this.guid}),{ratepayBirthDate:o,ratepayPhoneNumber:a,ratepayPhoneCountryCode:s}=r(),d={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:n.methodId,rate_pay:{birth_date:this.normalizeDate(o),phone:{national_number:a,country_code:s.split(\"+\")[1]}},paypal_account:{order_id:e}}};return yield this.paymentIntegrationService.submitOrder(i,t),yield this.paymentIntegrationService.submitPayment({methodId:n.methodId,paymentData:d}),yield new Promise((e,t)=>{this.initializePollingMechanism(n.methodId,e,t,n.gatewayId)})}catch(e){return this.handleError(e),new Promise((e,t)=>t())}})}finalize(){return Promise.reject(new _d)}deinitialize(){const{legalTextContainer:e}=this.bigcommerce_payments_ratepay||{},t=document.querySelectorAll('[data-id=\"fraudnetScript\"]')[0],n=document.querySelectorAll('[data-id=\"fraudnetConfig\"]')[0];if(this.deinitializePollingMechanism(),t.remove(),n.remove(),e){const t=document.getElementById(e);null==t||t.remove()}return Promise.resolve()}normalizeDate(e){const t=this.formatDate(e.getDate()),n=this.formatDate(e.getMonth()+1);return`${e.getFullYear()}-${n}-${t}`}formatDate(e){return`${e<10?0:\"\"}${e}`}renderLegalText(e,t){const n=e,i=t.split(\"#\")[1],r=document.getElementById(i),o=null==r?void 0:r.parentNode,a=document.createElement(\"div\");a.style.marginBottom=\"20px\",a.setAttribute(\"id\",n),null==o||o.prepend(a);const s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),d=s.Legal({fundingSource:s.Legal.FUNDING.PAY_UPON_INVOICE});if(!document.getElementById(n))throw new rn('Unable to initialize payment because \"legalTextContainerElement\" argument is not found.');d.render(`#${n}`)}handleError(e){const{onError:t}=this.bigcommerce_payments_ratepay||{};this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createFraudNetScript(e,t,n){const i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t,n),{testMode:r}=i.config,o=document.createElement(\"script\");o.setAttribute(\"type\",\"application/json\"),o.setAttribute(\"fncls\",\"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99\"),o.setAttribute(\"data-id\",\"fraudnetScript\"),this.guid=this.generateGUID();const a={f:this.guid,s:`${e}_checkout-page`,sandbox:r};o.innerHTML=JSON.stringify(a),document.body.appendChild(o)}generateGUID(){let e=\"\";for(let t=0;t<32;t+=1)e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[Math.floor(62*Math.random())];return e}loadFraudnetConfig(){const e=document.createElement(\"script\");e.setAttribute(\"data-id\",\"fraudnetConfig\"),e.src=\"https://c.paypal.com/da/r/fb.js\",document.body.appendChild(e)}reinitializeStrategy(e){return dc(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}initializePollingMechanism(e,t,n,i){return dc(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const n=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(n),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const r=yield this.bigCommercePaymentsIntegrationService.getOrderStatus(\"bigcommerce_payments_apms\",{params:{useMetadata:!0}}),o=r===Jn.PollingStop,a=r===Jn.PollingError;if(o)return this.deinitializePollingMechanism(),t();if(a)return n();if(!o&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,n,i);yield this.reinitializeStrategy({methodId:e,gatewayId:i,bigcommerce_payments_ratepay:this.bigcommerce_payments_ratepay}),this.handleError(new sc)}catch(e){this.handleError(e),n()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const lc=nn(e=>new cc(e,si(e),new Ba({containerStyles:Object.assign(Object.assign({},Yd),{position:\"fixed\"})})),[{gateway:\"bigcommerce_payments_apms\",id:\"ratepay\"}]);var uc;!function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\",e.CardExpiryVerification=\"cardExpiryVerification\"}(uc||(uc={}));const hc=uc;function pc(e){return hc.CardNumber in e&&hc.CardName in e&&hc.CardExpiry in e}function mc(e){return hc.CardNumberVerification in e&&hc.CardCodeVerification in e&&hc.CardExpiryVerification in e}var yc=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class gc{constructor(e,t,n,i){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.bigCommercePaymentsSdk=n,this.bigCommercePaymentsFastlaneUtils=i}initialize(e){return yc(this,void 0,void 0,function*(){const{methodId:t,bigcommerce_payments_creditcards:n}=e,i=n,{form:r,onCreditCardFieldsRenderingError:o}=i||{};if(!t)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!r)throw new rn('Unable to proceed because \"options.bigcommerce_payments_creditcards.form\" argument is not provided.');this.hostedFormOptions=r,this.isCreditCardForm=pc(r.fields),this.isCreditCardVaultedForm=mc(r.fields)&&!this.hasUndefinedValues(),yield this.paymentIntegrationService.loadPaymentMethod(t),yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(t,void 0,!0,!0),(this.isCreditCardForm||this.isCreditCardVaultedForm)&&(yield this.initializeFields(r,o)),this.shouldInitializePayPalFastlane(t)&&(yield this.initializePayPalFastlaneOrThrow(t))})}execute(e,t){return yc(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),{methodId:r,paymentData:o}=n||{};if(!n||!r)throw new Yi([\"payment\"]);if(this.executionPaymentData=o,this.isCreditCardForm||this.isCreditCardVaultedForm)yield this.validateHostedFormOrThrow(),yield this.submitHostedForm();else{const{orderId:e}=yield this.bigCommercePaymentsIntegrationService.createOrderCardFields(\"bigcommerce_payments_creditcardscheckout\",this.getInstrumentParams());this.returnedOrderId=e}const a=this.preparePaymentPayload(r,o,this.returnedOrderId,this.returnedVaultedToken);yield this.paymentIntegrationService.submitOrder(i,t),yield this.paymentIntegrationService.submitPayment(a)})}finalize(){return Promise.reject(new _d)}deinitialize(){var e,t,n,i;return yc(this,void 0,void 0,function*(){return yield null===(e=this.cvvField)||void 0===e?void 0:e.close(),yield null===(t=this.expiryField)||void 0===t?void 0:t.close(),yield null===(n=this.numberField)||void 0===n?void 0:n.close(),yield null===(i=this.nameField)||void 0===i?void 0:i.close(),Promise.resolve()})}preparePaymentPayload(e,t,n,i){const{shouldSaveInstrument:r=!1,shouldSetAsDefaultInstrument:o=!1}=Pd(t)?t:{},a=t&&Sd(t)?t.instrumentId:void 0,s=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)({verification_nonce:i,token:a},lodash__WEBPACK_IMPORTED_MODULE_5__.isNil);return{methodId:e,paymentData:{shouldSaveInstrument:r,shouldSetAsDefaultInstrument:o,instrumentId:a,formattedPayload:Object.assign(Object.assign({},i||a?{bigpay_token:s}:{}),n?{card_with_order:{order_id:n}}:{})}}}initializeFields(e,t){return yc(this,void 0,void 0,function*(){const{fields:n,styles:i}=e,r=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),o=this.getExecuteCallback(n),a=Object.assign({style:this.getInputStyles(i),onApprove:({orderID:e,vaultSetupToken:t,liabilityShift:n})=>{if(n===Gn.No||n===Gn.Unknown)throw new Error;return this.handleApprove({orderID:e,vaultSetupToken:t})},onError:()=>{throw new Li},inputEvents:{onChange:t=>this.onChangeHandler(e,t),onFocus:t=>this.onFocusHandler(e,t),onBlur:t=>this.onBlurHandler(e,t),onInputSubmitRequest:t=>this.onInputSubmitRequest(e,t)}},o);if(this.cardFields=yield r.CardFields(a),!this.cardFields.isEligible())throw new Vt(Tt.PaymentNotInitialized);try{this.stylizeInputContainers(n),pc(n)&&(yield this.renderFields(n)),mc(n)&&(yield this.renderVaultedFields(n))}catch(e){\"function\"==typeof t&&t(e)}})}getExecuteCallback(e){return mc(e)?this.createVaultSetupTokenCallback():this.createOrderCallback()}createVaultSetupTokenCallback(){return{createVaultSetupToken:()=>yc(this,void 0,void 0,function*(){const{setupToken:e}=(yield this.bigCommercePaymentsIntegrationService.createOrderCardFields(\"bigcommerce_payments_creditcardscheckout\",Object.assign(Object.assign({},this.getInstrumentParams()),{setupToken:!0})))||{};return e})}}createOrderCallback(){return{createOrder:()=>yc(this,void 0,void 0,function*(){const{orderId:e}=(yield this.bigCommercePaymentsIntegrationService.createOrderCardFields(\"bigcommerce_payments_creditcardscheckout\",this.getInstrumentParams()))||{};return e})}}handleApprove({orderID:e,vaultSetupToken:t}){e&&(this.returnedOrderId=e),t&&(this.returnedVaultedToken=t)}renderFields(e){var t,n,i,r;return yc(this,void 0,void 0,function*(){const o=this.getCardFieldsOrThrow();(null===(t=e.cardCode)||void 0===t?void 0:t.containerId)&&(this.cvvField=o.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCode.containerId}`)),(null===(n=e.cardExpiry)||void 0===n?void 0:n.containerId)&&(this.expiryField=o.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiry.containerId}`)),(null===(i=e.cardName)||void 0===i?void 0:i.containerId)&&(this.nameField=o.NameField({placeholder:\"\"}),yield this.nameField.render(`#${e.cardName.containerId}`)),(null===(r=e.cardNumber)||void 0===r?void 0:r.containerId)&&(this.numberField=o.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumber.containerId}`))})}renderVaultedFields(e){var t,n,i;return yc(this,void 0,void 0,function*(){const r=this.getCardFieldsOrThrow();(null===(t=e.cardCodeVerification)||void 0===t?void 0:t.containerId)&&(this.cvvField=r.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCodeVerification.containerId}`)),(null===(n=e.cardExpiryVerification)||void 0===n?void 0:n.containerId)&&(this.expiryField=r.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiryVerification.containerId}`)),(null===(i=e.cardNumberVerification)||void 0===i?void 0:i.containerId)&&(this.numberField=r.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumberVerification.containerId}`))})}getInstrumentParams(){if(!this.executionPaymentData)return{};if(Pd(this.executionPaymentData)){const{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}=this.executionPaymentData;return{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}}if(Sd(this.executionPaymentData)){const{instrumentId:e}=this.executionPaymentData;return{instrumentId:e}}return{}}getFieldTypeByEmittedField({emittedBy:e}){return{fieldType:this.mapFieldType(e)}}submitHostedForm(){return yc(this,void 0,void 0,function*(){const e=this.getCardFieldsOrThrow(),t=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),n={billingAddress:{company:t.company,addressLine1:t.address1,addressLine2:t.address2,adminArea1:t.stateOrProvinceCode,adminArea2:t.city,postalCode:t.postalCode,countryCode:t.countryCode}};try{this.isCreditCardVaultedForm?yield e.submit():yield e.submit(n)}catch(e){throw new Li(\"Failed authentication. Please try to authorize again.\")}})}validateHostedFormOrThrow(){var e,t;return yc(this,void 0,void 0,function*(){const n=this.getCardFieldsOrThrow(),i=yield n.getState().then(e=>e),r=this.getValidityData(i);if(!r.isValid)throw null===(t=null===(e=this.hostedFormOptions)||void 0===e?void 0:e.onValidate)||void 0===t||t.call(e,r),new Ki(this.mapValidationErrors(r.errors))})}getValidityData({fields:e}){const t=Object.assign({},e);delete t.cardNameField;const n=Object.keys(t);return{isValid:n.every(e=>{var n;return null===(n=t[e])||void 0===n?void 0:n.isValid}),errors:n.reduce((e,n)=>{var i;const r=this.mapFieldType(n);return Object.assign(Object.assign({},e),{[r]:(null===(i=t[n])||void 0===i?void 0:i.isValid)?void 0:[this.getInvalidErrorByFieldType(r)]})},{})}}getInvalidErrorByFieldType(e){switch(e){case hc.CardCode:case hc.CardCodeVerification:return{fieldType:e,message:\"Invalid card code\",type:\"invalid_card_code\"};case hc.CardNumber:case hc.CardNumberVerification:return{fieldType:e,message:\"Invalid card number\",type:\"invalid_card_number\"};case hc.CardExpiry:case hc.CardExpiryVerification:return{fieldType:e,message:\"Invalid card expiry\",type:\"invalid_card_expiry\"};default:return{fieldType:e,message:\"Invalid field\",type:\"invalid\"}}}mapValidationErrors(e={}){const t={};return Object.keys(e).forEach(n=>{var i,r;t[n]=[{message:(null===(r=null===(i=e[n])||void 0===i?void 0:i[0])||void 0===r?void 0:r.message)||\"\",type:n}]}),t}mapFieldType(e){switch(e){case\"name\":return hc.CardName;case\"cardNumberField\":case\"number\":return this.isCreditCardForm?hc.CardNumber:hc.CardNumberVerification;case\"cardExpiryField\":case\"expiry\":return this.isCreditCardForm?hc.CardExpiry:hc.CardExpiryVerification;case\"cardCvvField\":case\"cvv\":return this.isCreditCardForm?hc.CardCode:hc.CardCodeVerification;default:throw new Error(\"Unexpected field type\")}}getCardFieldsOrThrow(){if(!this.cardFields)throw new Vt(Tt.PaymentNotInitialized);return this.cardFields}getInputStyles(e){var t,n,i;const r={\"font-size\":(null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.fontSize)||\"1rem\",\"font-family\":(null===(n=null==e?void 0:e.default)||void 0===n?void 0:n.fontFamily)||\"Montserrat, Arial, Helvetica, sans-serif\",\"font-weight\":(null===(i=null==e?void 0:e.default)||void 0===i?void 0:i.fontWeight)||\"400\",outline:\"none\",padding:\"9px 13px\"},o=Object.assign(Object.assign({},r),{color:\"#333333\"});return{input:o,\".invalid\":Object.assign(Object.assign({},r),{color:\"red\"}),\".valid\":o,\":focus\":o}}stylizeInputContainers(e){Object.values(e||{}).forEach(e=>{const t=document.getElementById(`${(null==e?void 0:e.containerId)||\"\"}`);t&&(t.style.padding=\"0px\",t.style.boxShadow=\"none\",t.style.border=\"none\",t.style.background=\"transparent\",t.style.marginBottom=\"10px\",t.style.marginLeft=\"-5px\")})}hasUndefinedValues(){return!this.hostedFormOptions||Object.values(this.hostedFormOptions.fields).some(e=>void 0===e)}onChangeHandler(e,t){var n;null===(n=null==e?void 0:e.onValidate)||void 0===n||n.call(e,this.getValidityData(t))}onFocusHandler(e,t){var n;null===(n=null==e?void 0:e.onFocus)||void 0===n||n.call(e,this.getFieldTypeByEmittedField(t))}onBlurHandler(e,t){var n;null===(n=null==e?void 0:e.onBlur)||void 0===n||n.call(e,this.getFieldTypeByEmittedField(t))}onInputSubmitRequest(e,t){var n;null===(n=null==e?void 0:e.onEnter)||void 0===n||n.call(e,this.getFieldTypeByEmittedField(t))}shouldInitializePayPalFastlane(e){var t,n;const i=this.paymentIntegrationService.getState(),r=i.getPaymentMethodOrThrow(e),o=i.getPaymentProviderCustomer(),a=(s=o)&&(\"authenticationState\"in s||\"addresses\"in s||\"instruments\"in s)?o:{};var s;return(null===(t=null==r?void 0:r.initializationData)||void 0===t?void 0:t.isAcceleratedCheckoutEnabled)&&(null===(n=null==r?void 0:r.initializationData)||void 0===n?void 0:n.isBigCommercePaymentsAnalyticsV2Enabled)&&!(null==a?void 0:a.authenticationState)}initializePayPalFastlaneOrThrow(e){return yc(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),n=t.getCartOrThrow(),i=t.getPaymentMethodOrThrow(e),{initializationData:r}=i;if(!(null==r?void 0:r.connectClientToken))return;const o=yield this.bigCommercePaymentsSdk.getPayPalFastlaneSdk(i,n.currency.code,n.id);yield this.bigCommercePaymentsFastlaneUtils.initializePayPalFastlane(o,!!(null==r?void 0:r.isDeveloperModeApplicable))}catch(e){}})}}const vc=nn(e=>new gc(e,si(e),Ci(),Oi()),[{id:\"bigcommerce_payments_creditcards\"}]);var fc=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Sc{constructor(e,t,n,i,r=3e3,o=3e5){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.bigCommercePaymentsSdkHelper=n,this.loadingIndicator=i,this.pollingInterval=r,this.maxPollingIntervalTime=o,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,this.isPollingEnabled=!1}initialize(e){return fc(this,void 0,void 0,function*(){const{gatewayId:t,methodId:n,bigcommerce_payments_apms:i}=e;if(this.bigCommercePaymentsAlternativeMethods=i,!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!i)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_apms\" argument is not provided.');const r=this.paymentIntegrationService.getState(),o=r.getPaymentMethodOrThrow(n,t),{orderId:a,shouldRenderFields:s}=o.initializationData||{},d=r.getStoreConfigOrThrow().checkoutSettings.features;this.isPollingEnabled=cn(d,\"PAYPAL-5624.bcp_ideal_polling\"),a?this.orderId=a:(this.paypalApms=yield this.bigCommercePaymentsSdkHelper.getPayPalApmsSdk(o,r.getCartOrThrow().currency.code),this.loadingIndicatorContainer=i.container.split(\"#\")[1],this.renderButton(n,t,i),s&&this.renderFields(n,i))})}execute(e,t){return fc(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);const{methodId:r,gatewayId:o}=n;if(!this.orderId)throw new Bi;this.isPollingEnabled&&\"ideal\"===r&&(yield new Promise((e,t)=>{this.initializePollingMechanism(r,e,t,o)})),this.isNonInstantPaymentMethod(r)||(yield this.paymentIntegrationService.submitOrder(i,t)),yield this.bigCommercePaymentsIntegrationService.submitPayment(r,this.orderId,o)})}finalize(){return Promise.reject(new _d)}deinitialize(){var e;return this.orderId=void 0,this.isPollingEnabled&&this.resetPollingMechanism(),null===(e=this.bigCommercePaymentsButton)||void 0===e||e.close(),Promise.resolve()}initializePollingMechanism(e,t,n,i){return fc(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const n=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(n),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const r=yield this.bigCommercePaymentsIntegrationService.getOrderStatus(i),o=r===Jn.Approved,a=r===Jn.PollingError;if(o)return this.deInitializePollingMechanism(),t();if(a)return n();if(!o&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,n,i);yield this.reinitializeStrategy({methodId:e,gatewayId:i,bigCommercePaymentsAlternativeMethods:this.bigCommercePaymentsAlternativeMethods}),this.handleError(new sc)}catch(e){n()}})}deInitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deInitializePollingMechanism()}reinitializeStrategy(e){return fc(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}handleError(e){const{onError:t}=this.bigCommercePaymentsAlternativeMethods||{};this.isPollingEnabled&&this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderButton(e,t,n){const i=this.getPaypalAmpsSdkOrThrow(),r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t),{buttonStyle:o}=r.initializationData||{},{container:a,onError:s,onRenderButton:d,submitForm:c}=n,l={fundingSource:e,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(o),onInit:(e,t)=>n.onInitButton(t),createOrder:()=>this.onCreateOrder(e,t,n),onApprove:e=>this.handleApprove(e,c),onCancel:()=>{this.toggleLoadingIndicator(!1),this.deInitializePollingMechanism()},onError:e=>{this.deInitializePollingMechanism(),this.handleFailure(e,s)},onClick:(e,t)=>fc(this,void 0,void 0,function*(){return n.onValidate(t.resolve,t.reject)})};this.bigCommercePaymentsButton=i.Buttons(l),this.bigCommercePaymentsButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.bigCommercePaymentsButton.render(a))}onCreateOrder(e,t,n){return fc(this,void 0,void 0,function*(){const{onValidate:i}=n;yield i(()=>(this.toggleLoadingIndicator(!0),()=>Promise.resolve()),lodash__WEBPACK_IMPORTED_MODULE_5__.noop);const r=yield this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apms\");if(this.isNonInstantPaymentMethod(e)){const n={useStoreCredit:!1},i={params:{methodId:e,gatewayId:t}};yield this.paymentIntegrationService.submitOrder(n,i),yield this.bigCommercePaymentsIntegrationService.submitPayment(e,r,t)}return r})}handleApprove({orderID:e},t){this.orderId=e,t()}handleFailure(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderFields(e,t){const n=this.getPaypalAmpsSdkOrThrow(),i=this.paymentIntegrationService.getState(),{firstName:r,lastName:o,email:a}=i.getBillingAddressOrThrow(),{apmFieldsContainer:s,apmFieldsStyles:d}=t;if(!s)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_apms\" argument should contain \"apmFieldsContainer\".');const c=document.querySelector(s);c&&(c.innerHTML=\"\");const l={fundingSource:e,style:d||{},fields:{name:{value:`${r} ${o}`},email:{value:a}}};n.PaymentFields(l).render(s)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isNonInstantPaymentMethod(e){return e.toUpperCase()in Kn}getPaypalAmpsSdkOrThrow(){if(!this.paypalApms)throw new Xt;return this.paypalApms}}const _c=nn(e=>new Sc(e,si(e),Ci(),new Ba({containerStyles:Yd})),[{gateway:\"bigcommerce_payments_apms\"}]);var wc=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Cc{constructor(e,t,n){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=n}initialize(e){var t,n;return wc(this,void 0,void 0,function*(){const{methodId:i,bigcommerce_payments_venmo:r}=e||{};if(!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!r)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_venmo\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(i);const o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i);(null===(t=o.initializationData)||void 0===t?void 0:t.orderId)?this.orderId=null===(n=o.initializationData)||void 0===n?void 0:n.orderId:(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i),this.loadingIndicatorContainer=r.container.split(\"#\")[1],this.renderButton(i,r))})}execute(e,t){return wc(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);if(!this.orderId)throw new Bi;yield this.paymentIntegrationService.submitOrder(i,t),yield this.bigCommercePaymentsIntegrationService.submitPayment(n.methodId,this.orderId)})}finalize(){return Promise.reject(new _d)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){const n=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:r}=i.initializationData||{},{checkoutPaymentButtonStyles:o}=r||{},{container:a,onError:s,onRenderButton:d,onValidate:c,submitForm:l}=t,u={fundingSource:n.FUNDING.VENMO,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(o),createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_venmo_checkout\"),onClick:(e,t)=>this.handleClick(t,c),onApprove:e=>this.handleApprove(e,l),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=n.Buttons(u),!this.paypalButton.isEligible())throw new on(\"Venmo is not available for your region. Please another payment method instead.\");d&&\"function\"==typeof d&&d(),this.paypalButton.render(a)}handleClick(e,t){return wc(this,void 0,void 0,function*(){const{resolve:n,reject:i}=e;yield t(()=>(this.toggleLoadingIndicator(!0),n()),i)})}handleApprove({orderID:e},t){this.orderId=e,t(),this.toggleLoadingIndicator(!1)}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const Ic=nn(e=>new Cc(e,si(e),new Ba({styles:{backgroundColor:\"black\"}})),[{id:\"bigcommerce_payments_venmo\"}]);class bc{initialize(e){this._blueSnapSdk=e}initialize3ds(e,t){return n=this,i=void 0,o=function*(){const n=this._getBlueSnapSdk();return new Promise((i,r)=>{n.threeDsPaymentsSetup(e,e=>\"1\"===e.code?i(e.threeDSecure.threeDSecureReferenceId):r(new Li)),n.threeDsPaymentsSubmitData(t)})},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}_getBlueSnapSdk(){return qt(this._blueSnapSdk,()=>new Vt(Tt.PaymentNotInitialized))}}function Pc(e){return hc.CardNumber in e}function Oc(e){return hc.CardCodeVerification in e||hc.CardNumberVerification in e}var Ec,Ac,kc,Tc,Dc,Mc=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class zc{constructor(e,t,n,i){this._scriptLoader=e,this._paymentIntegrationService=t,this._blueSnapDirectHostedForm=n,this._blueSnapDirect3ds=i}initialize(e){return Mc(this,void 0,void 0,function*(){const{methodId:t,gatewayId:n,creditCard:i}=e;if(!n||!i)throw new rn;const r=yield this._paymentIntegrationService.loadPaymentMethod(n,{params:{method:t,bigpayToken:i.bigpayToken}}),{config:{testMode:o,is3dsEnabled:a},clientToken:s}=r.getPaymentMethodOrThrow(t,n);this._blueSnapSdk=yield this._scriptLoader.load(o),this._paymentFieldsToken=s,this._shouldUseHostedFields=Pc(i.form.fields)||Oc(i.form.fields)&&!!i.form.fields.cardNumberVerification,this._shouldUseHostedFields&&(this._blueSnapDirectHostedForm.initialize(this._blueSnapSdk,i.form.fields),yield this._blueSnapDirectHostedForm.attach(this._getPaymentFieldsToken(),i,a))})}execute(e){return Mc(this,void 0,void 0,function*(){if(!e.payment)throw new Yi([\"payment\"]);if(!this._blueSnapSdk)throw new Yi([\"payment\"]);const{paymentData:t}=e.payment,{shouldSaveInstrument:n,shouldSetAsDefaultInstrument:i}=Pd(t)?t:{shouldSaveInstrument:!1,shouldSetAsDefaultInstrument:!1},r=this._getPaymentFieldsToken();let o;const{is3dsEnabled:a}=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.payment.methodId,e.payment.gatewayId).config,s=this._shouldUseHostedFields?yield this._blueSnapDirectHostedForm.validate().submit(a?this._getBlueSnapDirectThreeDSecureData():void 0,!(Pd(t)&&Sd(t))):void 0;if(yield this._paymentIntegrationService.submitOrder(),Pd(t)&&Sd(t)&&this._paymentFieldsToken&&t.instrumentId){if(a){this._blueSnapDirect3ds.initialize(this._blueSnapSdk);const{last4:e,brand:n}=this._paymentIntegrationService.getState().getCardInstrumentOrThrow(t.instrumentId),i=Object.assign({last4Digits:e,ccType:n.toUpperCase()},this._getBlueSnapDirectThreeDSecureData());o=yield this._blueSnapDirect3ds.initialize3ds(this._paymentFieldsToken,i)}yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},e.payment),{paymentData:Object.assign(Object.assign(Object.assign({instrumentId:t.instrumentId},this._shouldUseHostedFields?{nonce:r}:{}),o?{deviceSessionId:o}:{}),{shouldSetAsDefaultInstrument:!!i})}))}else yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},e.payment),{paymentData:{formattedPayload:{credit_card_token:{token:JSON.stringify({pfToken:r,cardHolderName:s&&s.cardHolderName})},vault_payment_instrument:n,set_as_default_stored_instrument:i}}}))})}finalize(){return Promise.reject(new _d)}deinitialize(){return this._shouldUseHostedFields&&this._blueSnapDirectHostedForm.detach(),Promise.resolve()}_getBlueSnapDirectThreeDSecureData(){var e;const{getBillingAddress:t,getShippingAddress:n,getCustomer:i,getCheckoutOrThrow:r,getCartOrThrow:o}=this._paymentIntegrationService.getState(),a=t(),s=n(),d=(null===(e=i())||void 0===e?void 0:e.email)||(null==a?void 0:a.email),c=(null==a?void 0:a.phone)||(null==s?void 0:s.phone);return Object.assign(Object.assign(Object.assign(Object.assign({amount:r().outstandingBalance,currency:o().currency.code},d&&{email:d}),c&&{phone:c}),a&&{billingFirstName:a.firstName,billingLastName:a.lastName,billingCountry:a.countryCode,billingCity:a.city,billingAddress:`${a.address1} ${a.address2}`.trim(),billingZip:a.postalCode}),s&&{shippingFirstName:s.firstName,shippingLastName:s.lastName,shippingCountry:s.countryCode,shippingCity:s.city,shippingAddress:`${s.address1} ${s.address2}`.trim(),shippingZip:s.postalCode})}_getPaymentFieldsToken(){return qt(this._paymentFieldsToken,()=>new jt(kt.MissingPaymentToken))}}!function(e){e.AMEX=\"american-express\",e.CHINA_UNION_PAY=\"unionpay\",e.DINERS=\"diners-club\",e.DISCOVER=\"discover\",e.JCB=\"jcb\",e.MASTERCARD=\"mastercard\",e.UNKNOWN=\"unknown\",e.VISA=\"visa\"}(Ec||(Ec={})),function(e){e.ON_BLUR=\"onBlur\",e.ON_SUBMIT=\"onSubmit\"}(Ac||(Ac={})),function(e){e.EMPTY=\"empty\",e.INVALID=\"invalid\",e.THREE_DS_NOT_ENABLED=\"3D Secure is not enabled\"}(kc||(kc={})),function(e){e.CC_NOT_SUPORTED=\"22013\",e.ERROR_403=\"403\",e.ERROR_404=\"404\",e.ERROR_500=\"500\",e.INVALID_OR_EMPTY=\"10\",e.SESSION_EXPIRED=\"400\",e.THREE_DS_AUTH_FAILED=\"14101\",e.THREE_DS_CLIENT_ERROR=\"14103\",e.THREE_DS_MISSING_FIELDS=\"14102\",e.THREE_DS_NOT_ENABLED=\"14100\",e.TOKEN_EXPIRED=\"14040\",e.TOKEN_NOT_ASSOCIATED=\"14042\",e.TOKEN_NOT_FOUND=\"14041\"}(Tc||(Tc={})),function(e){e.CardCode=\"cvv\",e.CardExpiry=\"exp\",e.CardName=\"noc\",e.CardNumber=\"ccn\"}(Dc||(Dc={}));const Nc={[Dc.CardNumber]:hc.CardNumber,[Dc.CardExpiry]:hc.CardExpiry,[Dc.CardName]:hc.CardName,[Dc.CardCode]:hc.CardCode},xc={empty:{[hc.CardNumber]:{fieldType:\"cardNumber\",message:\"Credit card number is required\",type:\"required\"},[hc.CardNumberVerification]:{fieldType:\"cardNumber\",message:\"Credit card number is required\",type:\"required\"},[hc.CardExpiry]:{fieldType:\"cardExpiry\",message:\"Expiration date is required\",type:\"required\"},[hc.CardCode]:{fieldType:\"cardCode\",message:\"CVV is required\",type:\"required\"},[hc.CardName]:{fieldType:\"cardName\",message:\"Full name is required\",type:\"required\"}},invalid:{[hc.CardNumber]:{fieldType:\"cardNumber\",message:\"Credit card number must be valid\",type:\"invalid_card_number\"},[hc.CardNumberVerification]:{fieldType:\"cardNumber\",message:\"Credit card number must be valid\",type:\"invalid_card_number\"},[hc.CardExpiry]:{fieldType:\"cardExpiry\",message:\"Expiration date must be a valid future date in MM / YY format\",type:\"invalid_card_expiry\"},[hc.CardCode]:{fieldType:\"cardCode\",message:\"CVV must be valid\",type:\"invalid_card_code\"},[hc.CardName]:{fieldType:\"cardName\",message:\"Full name is required\",type:\"required\"}}};class Fc{constructor(e,t){this._nameOnCardInput=e,this._hostedInputValidator=t}initialize(e,t){this._blueSnapSdk=e,t&&(Pc(t)?this._hostedInputValidator.initialize():Oc(t)&&t.cardNumberVerification&&this._hostedInputValidator.initializeValidationFields())}attach(e,t,n){var i,r,o,a,s=t.form,{fields:d}=s,c=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(s,[\"fields\"]);return void 0===n&&(n=!1),i=this,r=void 0,a=function*(){const t=this._getBlueSnapSdk();if(!Pc(d)&&!Oc(d))throw new rn(\"Field options must be of type HostedCardFieldOptionsMap\");return this._onValidate=c.onValidate,Pc(d)&&this._setCustomBlueSnapAttributes(d),Oc(d)&&this._setCustomStoredCardsBlueSnapAttributes(d),new Promise(i=>{const r=this._getHostedPaymentFieldsOptions(e,d,c,i,n);t.hostedPaymentFieldsCreate(r),Pc(d)&&this._nameOnCardInput.attach(r,d.cardName.accessibilityLabel,d.cardName.placeholder)})},new((o=void 0)||(o=Promise))(function(e,t){function n(e){try{d(a.next(e))}catch(e){t(e)}}function s(e){try{d(a.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o(function(e){e(i)})).then(n,s)}d((a=a.apply(i,r||[])).next())})}validate(){var e;const t=this._hostedInputValidator.validate();if(null===(e=this._onValidate)||void 0===e||e.call(this,t),!t.isValid){const e=Object.entries(t.errors).reduce((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:n.map(({message:e,type:t})=>({message:e,type:t}))}),{});throw new Ki(e)}return this}submit(e,t=!1){return new Promise((n,i)=>this._getBlueSnapSdk().hostedPaymentFieldsSubmitData(e=>this._isBlueSnapDirectCallbackError(e)?i(new Li(e.statusCode===Tc.THREE_DS_AUTH_FAILED?e.error[0].errorDescription:`Submission failed with status: ${e.statusCode} and errors: ${JSON.stringify(e.error)}`)):n(Object.assign(Object.assign({},e.cardData),t?{cardHolderName:this._nameOnCardInput.getValue()}:{})),e))}detach(){this._nameOnCardInput.detach()}_isBlueSnapDirectCallbackError(e){return\"error\"in e}_getHostedPaymentFieldsOptions(e,t,{onFocus:n,onBlur:i,onValidate:r,onCardTypeChange:o,onEnter:a,styles:s},d,c){var l;return Object.assign(Object.assign(Object.assign({token:e,onFieldEventHandler:{setupComplete:()=>d(),onFocus:this._usetUiEventCallback(n),onBlur:this._usetUiEventCallback(i),onError:this._handleError(r),onType:(e,t)=>null==o?void 0:o({cardType:Ec[t]}),onEnter:this._usetUiEventCallback(a),onValid:e=>null==r?void 0:r(this._hostedInputValidator.validate({tagId:e}))}},Pc(t)&&{ccnPlaceHolder:t.cardNumber.placeholder||\"\",cvvPlaceHolder:(null===(l=t.cardCode)||void 0===l?void 0:l.placeholder)||\"\",expPlaceHolder:t.cardExpiry.placeholder||\"MM / YY\"}),s&&{style:this._mapStyles(s)}),{\"3DS\":c})}_mapStyles({default:e,error:t,focus:n}){return Object.entries(Object.assign(Object.assign(Object.assign({},e&&{input:e}),t&&{\".invalid\":t}),n&&{\":focus\":n})).reduce((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:Object.entries(n).reduce((e,[t,n])=>Object.assign(Object.assign({},e),{[(0,lodash__WEBPACK_IMPORTED_MODULE_5__.kebabCase)(t)]:n}),{})}),{})}_handleError(e){return(t,n,i,r)=>{if(n===Tc.INVALID_OR_EMPTY&&t&&function(e){return void 0!==e&&[kc.EMPTY,kc.INVALID].includes(e)}(i))return null==e?void 0:e(this._hostedInputValidator.validate({tagId:t,errorDescription:i}));throw new Li(`An unexpected error has occurred: ${JSON.stringify({tagId:t,errorCode:n,errorDescription:i,eventOrigin:r})}`)}}_usetUiEventCallback(e){return t=>{e&&e({fieldType:Nc[t]})}}_getBlueSnapSdk(){return qt(this._blueSnapSdk,()=>new Vt(Tt.PaymentNotInitialized))}_setCustomBlueSnapAttributes(e){const{cardNumber:t,cardExpiry:n,cardCode:i,cardName:r}=e,o=document.getElementById(t.containerId),a=document.getElementById(n.containerId),s=i&&document.getElementById(i.containerId),d=document.getElementById(r.containerId);if(!(o&&a&&s&&d))throw new rn(\"Unable to create hosted payment fields to invalid HTML container elements.\");o.dataset.bluesnap=Dc.CardNumber,a.dataset.bluesnap=Dc.CardExpiry,s.dataset.bluesnap=Dc.CardCode,d.dataset.bluesnap=Dc.CardName}_setCustomStoredCardsBlueSnapAttributes(e){const{cardNumberVerification:t,cardCodeVerification:n}=e,i=t&&document.getElementById(t.containerId),r=n&&document.getElementById(n.containerId);(i||r)&&(i&&(i.dataset.bluesnap=Dc.CardNumber),r&&(r.dataset.bluesnap=Dc.CardCode))}}class Rc{constructor(){this._errors={}}initialize(){this._errors={cardNumber:[xc.empty.cardNumber],cardExpiry:[xc.empty.cardExpiry],cardCode:[xc.empty.cardCode],cardName:[xc.empty.cardName]}}initializeValidationFields(){this._errors={cardNumberVerification:[xc.empty.cardNumber]}}validate(e){return e&&this._updateErrors(e.tagId,e.errorDescription),{isValid:Object.values(this._errors).every(e=>0===e.length),errors:this._errors}}_updateErrors(e,t){const n=this._errors.cardNumberVerification?hc.CardNumberVerification:Nc[e];this._errors[n]=t?[xc[t][n]]:[]}}class Lc{attach({style:e,onFieldEventHandler:{onFocus:t,onBlur:n,onValid:i,onError:r,onEnter:o}={}},a,s){var d;this._style=e,this._create(),this._getInput().addEventListener(\"focus\",this._handleFocus(t)),this._getInput().addEventListener(\"blur\",this._handleBlur(n,i,r)),this._getInput().addEventListener(\"enter\",this._handleEnter(o)),a&&this._getInput().setAttribute(\"aria-label\",a),s&&(this._getInput().placeholder=s),null===(d=document.querySelector('[data-bluesnap=\"noc\"]'))||void 0===d||d.appendChild(this._getInput())}getValue(){return this._getInput().value}detach(){this._input&&(this._input.remove(),this._input=void 0)}_handleFocus(e){return()=>{var t;this._applyStyles(null===(t=this._style)||void 0===t?void 0:t[\":focus\"]),null==e||e(Dc.CardName)}}_handleBlur(e,t,n){return({target:i})=>{var r,o;null==e||e(Dc.CardName),i instanceof HTMLInputElement&&(/\\w{1,200}/.test(i.value)?(this._applyStyles(null===(r=this._style)||void 0===r?void 0:r.input),null==t||t(Dc.CardName)):(this._applyStyles(null===(o=this._style)||void 0===o?void 0:o[\".invalid\"]),null==n||n(Dc.CardName,Tc.INVALID_OR_EMPTY,kc.EMPTY,Ac.ON_BLUR)))}}_handleEnter(e){return()=>null==e?void 0:e(Dc.CardName)}_applyStyles(e={}){const t={color:e.color,fontFamily:e[\"font-family\"],fontSize:e[\"font-size\"],fontWeight:e[\"font-weight\"]},n=Object.keys(t);n.every(e=>[\"color\",\"fontFamily\",\"fontSize\",\"fontWeight\"].includes(e))&&n.forEach(e=>{t[e]&&(this._getInput().style[e]=t[e]||\"\")})}_configureInput(){this._getInput().autocomplete=\"cc-name\",this._getInput().id=Dc.CardName,this._getInput().inputMode=\"text\",this._getInput().maxLength=200,this._getInput().style.backgroundColor=\"transparent\",this._getInput().style.border=\"0\",this._getInput().style.height=\"100%\",this._getInput().style.margin=\"0\",this._getInput().style.outline=\"none\",this._getInput().style.padding=\"0\",this._getInput().style.width=\"100%\",this._getInput().type=\"text\"}_getInput(){return qt(this._input,()=>new Vt(Tt.PaymentNotInitialized))}_create(){var e;this._input=document.createElement(\"input\"),this._configureInput(),this._applyStyles(null===(e=this._style)||void 0===e?void 0:e.input)}}var Bc;!function(e){e.PRODUCTION=\"https://pay.bluesnap.com/web-sdk/5/bluesnap.js\",e.SANDBOX=\"https://sandpay.bluesnap.com/web-sdk/5/bluesnap.js\"}(Bc||(Bc={}));class jc{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(e=!1){return t=this,n=void 0,r=function*(){if(this._window.bluesnap)return this._window.bluesnap;if(yield this._scriptLoader.loadScript(e?Bc.SANDBOX:Bc.PRODUCTION),!this._window.bluesnap)throw new Xt;return this._window.bluesnap},new((i=void 0)||(i=Promise))(function(e,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((r=r.apply(t,n||[])).next())});// removed by dead control flow\n{ var t, n, i, r; }}}const Uc=nn(e=>new zc(new jc((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)()),e,new Fc(new Lc,new Rc),new bc),[{id:\"credit_card\",gateway:\"bluesnapdirect\"}]);class qc{constructor(e){this._paymentIntegrationService=e}execute(e){return t=this,n=void 0,r=function*(){const t=this._formatePaymentPayload(e);yield this._paymentIntegrationService.submitOrder();try{yield this._paymentIntegrationService.submitPayment(t)}catch(e){if(this._isBlueSnapDirectRedirectResponse(e)){const t=e.body.provider_data&&JSON.parse(e.body.provider_data);let n=e.body.additional_action_required.data.redirect_url;if(function(e){if(\"object\"!=typeof e||null===e)return!1;const t=e;return!!t.merchantid&&\"string\"==typeof t.merchantid}(t)){const e=new URLSearchParams(t).toString();n=`${n}&${e}`}return new Promise(()=>window.location.replace(n))}return Promise.reject(e)}},new((i=void 0)||(i=Promise))(function(e,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((r=r.apply(t,n||[])).next())});// removed by dead control flow\n{ var t, n, i, r; }}initialize(){return Promise.resolve()}finalize(){return Promise.reject(new _d)}deinitialize(){return Promise.resolve()}_formatePaymentPayload({payment:e}){if(!e)throw new Yi([\"payment\"]);return e.paymentData&&Sd(e.paymentData)&&Pd(e.paymentData)?Object.assign(Object.assign({},e),{paymentData:{instrumentId:e.paymentData.instrumentId,shouldSetAsDefaultInstrument:!!e.paymentData.shouldSetAsDefaultInstrument}}):(t=e.paymentData,Boolean(\"object\"==typeof t&&null!==t&&\"accountNumber\"in t&&\"accountType\"in t&&\"shopperPermission\"in t&&\"routingNumber\"in t)?Object.assign(Object.assign({},e),{paymentData:{formattedPayload:{ecp:Object.assign({account_number:e.paymentData.accountNumber,account_type:e.paymentData.accountType,shopper_permission:e.paymentData.shopperPermission,routing_number:e.paymentData.routingNumber},e.paymentData.companyName?{company_name:e.paymentData.companyName}:{}),vault_payment_instrument:e.paymentData.shouldSaveInstrument,set_as_default_stored_instrument:e.paymentData.shouldSetAsDefaultInstrument}}}):(n=e.paymentData,Boolean(\"object\"==typeof n&&null!==n&&\"iban\"in n&&\"firstName\"in n&&\"lastName\"in n&&\"shopperPermission\"in n)?Object.assign(Object.assign({},e),{paymentData:{formattedPayload:{sepa_direct_debit:{iban:e.paymentData.iban,first_name:e.paymentData.firstName,last_name:e.paymentData.lastName,shopper_permission:e.paymentData.shopperPermission},vault_payment_instrument:e.paymentData.shouldSaveInstrument,set_as_default_stored_instrument:e.paymentData.shouldSetAsDefaultInstrument}}}):function(e){return Boolean(\"object\"==typeof e&&null!==e&&\"bic\"in e)}(e.paymentData)?Object.assign(Object.assign({},e),{paymentData:{formattedPayload:{ideal:{bic:e.paymentData.bic}}}}):function(e){return Boolean(\"object\"==typeof e&&null!==e&&\"iban\"in e&&!(\"firstName\"in e)&&!(\"lastName\"in e)&&!(\"shopperPermission\"in e))}(e.paymentData)?Object.assign(Object.assign({},e),{paymentData:{formattedPayload:{pay_by_bank:{iban:e.paymentData.iban}}}}):{methodId:e.methodId}));// removed by dead control flow\n{ var t, n; }}_isBlueSnapDirectRedirectResponse(e){var t;if(\"object\"!=typeof e||null===e)return!1;const n=e;if(!n.body)return!1;const i=n.body;return\"additional_action_required\"===i.status&&!!(null===(t=i.additional_action_required)||void 0===t?void 0:t.data.redirect_url)}}const Vc=nn(e=>new qc(e),[{gateway:\"bluesnapdirect\"}]);var Gc;!function(e){e.ACKNOWLEDGE=\"ACKNOWLEDGE\",e.FINALIZE=\"FINALIZE\",e.INITIALIZE=\"INITIALIZE\"}(Gc||(Gc={}));const Hc=Gc;var $c=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Wc{constructor(e){this._paymentIntegrationService=e}execute(e,t){return $c(this,void 0,void 0,function*(){const{payment:n}=e;if(!n)throw new Yi([\"payment\"]);if(!this._initializeOptions)throw new Vt(Tt.PaymentNotInitialized);const{onLoad:i,style:r}=this._initializeOptions,o=this._createIframe(\"bluesnapv2_hosted_payment_page\",r),a=new Ji(new Promise(lodash__WEBPACK_IMPORTED_MODULE_5__.noop));i(o,()=>a.cancel(new Mn)),yield this._paymentIntegrationService.submitOrder(e,t),yield this._paymentIntegrationService.initializeOffsitePayment({methodId:n.methodId,gatewayId:n.gatewayId,shouldSaveInstrument:!1,target:o.name,promise:a.promise})})}finalize(e){return $c(this,void 0,void 0,function*(){const t=this._paymentIntegrationService.getState(),n=t.getOrder(),i=t.getPaymentStatus();if(!n||i!==Hc.ACKNOWLEDGE&&i!==Hc.FINALIZE)return Promise.reject(new _d);yield this._paymentIntegrationService.finalizeOrder(e)})}initialize(e){return $c(this,void 0,void 0,function*(){this._initializeOptions=e&&e.bluesnapv2,yield Promise.resolve()})}deinitialize(){return Promise.resolve()}_createIframe(e,t){const n=document.createElement(\"iframe\");if(n.setAttribute(\"sandbox\",\"allow-top-navigation allow-scripts allow-forms allow-same-origin\"),n.name=e,t){const{border:e,height:i,width:r}=t;n.style.border=null!=e?e:\"\",n.style.height=null!=i?i:\"\",n.style.width=null!=r?r:\"\"}return n}}const Yc=nn(e=>new Wc(e),[{gateway:\"bluesnapv2\"}]);class Kc{constructor(e){this.storage=e}saveExtraItemsData(e,t){const n=[...t.physicalItems,...t.digitalItems].reduce((e,t)=>(e[t.productId]={brand:t.brand?t.brand:\"\",category:t.categoryNames?t.categoryNames.join(\", \"):\"\"},e),{});try{return this.storage.setItem(this.getStorageKey(e),JSON.stringify(n)),n}catch(e){return{}}}readExtraItemsData(e){try{const t=this.storage.getItem(this.getStorageKey(e));if(!t)return null;const n=JSON.parse(t);return function(e){if(!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isObject)(e))return!1;const t=Object.values(e).some(e=>!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isObject)(e)||!(\"brand\"in e)||!(\"category\"in e));return Boolean(!t)}(n)?n:null}catch(e){return null}}clearExtraItemData(e){try{this.storage.removeItem(this.getStorageKey(e))}catch(e){}}getStorageKey(e){return e?`ORDER_ITEMS_${e}`:\"\"}}function Jc(e){return Boolean(e.hasOwnProperty(\"analytics\"))}function Zc(e){return\"object\"==typeof e&&null!==e&&\"shouldCreateAccount\"in e}class Qc extends Bt{constructor(e){super(),this.errorCode=e,this.name=\"BoltPaymentsFieldError\",this.type=\"bolt_payments_field_error\",this.body={errors:[Qc.getError(e)]}}static getError(e){switch(e){case\"1000\":case\"2000\":case\"3000\":return{code:\"invalid_number\"};case\"1001\":case\"2001\":case\"3001\":return{code:\"invalid_expiry_date\"};case\"1002\":case\"2002\":return{code:\"invalid_cvc\"};case\"1003\":return{code:\"invalid_zip\"};case\"2003\":return{code:\"incorrect_zip\"};default:return{code:\"general_error\"}}}}var Xc=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class el{constructor(e,t,n){this.paymentIntegrationService=e,this.boltScriptLoader=t,this.analyticsExtraItemsManager=n,this.useBoltClient=!1,this.useBoltEmbedded=!1}initialize(e){return Xc(this,void 0,void 0,function*(){const{bolt:t,methodId:n}=e,{containerId:i,onPaymentSelect:r,useBigCommerceCheckout:o}=t||{};if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)return void(this.boltClient=yield this.boltScriptLoader.loadBoltClient());const a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId),{initializationData:s,config:d}=a,{publishableKey:c,developerConfig:l,embeddedOneClickEnabled:u}=s||{},{testMode:h}=d;if(!c)throw new jt(kt.MissingPaymentMethod);if(this.boltClient=yield this.boltScriptLoader.loadBoltClient(c,h,l),this.useBoltClient=!u,this.useBoltEmbedded=!!u,this.useBoltEmbedded){if(!i)throw new rn('Unable to initialize payment because \"options.bolt.containerId\" argument is not provided.');if(!r)throw new rn('Unable to initialize payment because \"options.bolt.onPaymentSelect\" argument is not provided.');this.boltEmbedded=yield this.boltScriptLoader.loadBoltEmbedded(c,h,l),this.mountBoltEmbeddedField(i),r(yield this.hasBoltAccount())}})}deinitialize(){var e;return null===(e=this.embeddedField)||void 0===e||e.unmount(),this.boltClient=void 0,this.boltEmbedded=void 0,Promise.resolve()}finalize(){return Promise.reject(new _d)}execute(e,t){return Xc(this,void 0,void 0,function*(){this.setExtraItemsForAnalytics();const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),{methodId:r,paymentData:o}=n||{};let a;if(!e.payment)throw new Yi([\"payment\"]);if(!r)throw new jt(kt.MissingPaymentMethod);if(!o||!function(e){return Boolean((0,lodash__WEBPACK_IMPORTED_MODULE_5__.isObject)(e)&&(\"shouldSaveInstrument\"in e||\"nonce\"in e||Zc(e)))}(o))throw new jt(kt.MissingPayment);yield this.paymentIntegrationService.submitOrder(i,t),a=this.useBoltClient?yield this.getBoltClientPaymentPayload(r,o,t):this.useBoltEmbedded?yield this.getBoltEmbeddedPaymentPayload(r,o):yield this.getBoltFullCheckoutPaymentPayload(r,o),yield this.paymentIntegrationService.submitPayment(a)})}getBoltClientPaymentPayload(e,t,n){return Xc(this,void 0,void 0,function*(){yield this.paymentIntegrationService.loadPaymentMethod(e,n);const i=this.paymentIntegrationService.getState(),r=i.getPaymentMethodOrThrow(e).clientToken,{isStoreCreditApplied:o}=i.getCheckoutOrThrow(),{shouldSaveInstrument:a}=t,s=this.getBoltClientOrThrow();if(yield this.paymentIntegrationService.applyStoreCredit(o),!r)throw new jt(kt.MissingPaymentMethod);const d=yield new Promise((e,t)=>{const n={success:(n,i)=>{n.reference?e(n):t(new Li(\"Unable to proceed because transaction reference is unavailable. Please try again later.\")),i()},close:()=>{t(new Mn)}};s.configure({orderToken:r},{},n).open()});return{methodId:e,paymentData:{nonce:d.reference,shouldSaveInstrument:a}}})}getBoltEmbeddedPaymentPayload(e,t){var n;return Xc(this,void 0,void 0,function*(){if(!Zc(t))throw new jt(kt.MissingPayment);const i=this.validateTokenizeResultOrThrow(yield null===(n=this.embeddedField)||void 0===n?void 0:n.tokenize());return{methodId:e,paymentData:{formattedPayload:{credit_card_token:{token:i.token,last_four_digits:i.last4,iin:i.bin,expiration_month:+i.expiration.split(\"-\")[1],expiration_year:+i.expiration.split(\"-\")[0]},provider_data:{create_account:!!t.shouldCreateAccount,embedded_checkout:!0}}}}})}getBoltFullCheckoutPaymentPayload(e,t){return Xc(this,void 0,void 0,function*(){yield this.setBoltOrderId();const n=this.getBoltClientOrThrow(),i=yield n.getTransactionReference();if(!i)throw new Bi;return{methodId:e,paymentData:Object.assign(Object.assign({},t),{nonce:i})}})}getBoltClientOrThrow(){if(!this.boltClient)throw new Vt(Tt.PaymentNotInitialized);return this.boltClient}getBoltEmbeddedOrThrow(){if(!this.boltEmbedded)throw new Vt(Tt.PaymentNotInitialized);return this.boltEmbedded}hasBoltAccount(){return Xc(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState(),t=e.getCustomer(),n=e.getBillingAddress(),i=(null==t?void 0:t.email)||(null==n?void 0:n.email)||\"\",r=this.getBoltClientOrThrow();try{return yield r.hasBoltAccount(i)}catch(e){throw new Bi}})}setBoltOrderId(){return Xc(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getOrderOrThrow(),t=this.getBoltClientOrThrow();try{yield t.setOrderId(e.orderId)}catch(e){throw new Bi}})}mountBoltEmbeddedField(e){const t=this.getBoltEmbeddedOrThrow().create(\"payment_field\",{styles:{backgroundColor:\"#fff\"},renderSeparateFields:!0});t.mount(`#${e}`),this.embeddedField=t}validateTokenizeResultOrThrow(e){if(!e)throw new Bi;if(e instanceof Error)throw new Qc(e.message);const{token:t,last4:n,bin:i,expiration:r}=e,o=+n,a=+i,s=+`${r}`.split(\"-\")[1],d=+`${r}`.split(\"-\")[0];if(!t||Number.isNaN(o)||Number.isNaN(a)||Number.isNaN(s)||Number.isNaN(d))throw new Yi;return e}setExtraItemsForAnalytics(){const e=this.paymentIntegrationService.getState(),t=e.getStoreConfigOrThrow(),n=e.getCartOrThrow();if(t.checkoutSettings.isAnalyticsEnabled&&Jc(window)){const{id:e,lineItems:t}=n;this.analyticsExtraItemsManager.saveExtraItemsData(e,t)}}}const tl=nn(e=>new el(e,new $i((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)()),new Kc(local_storage_fallback__WEBPACK_IMPORTED_MODULE_9__[\"default\"])),[{id:\"bolt\"}]);function nl(e){return!!e&&\"accountNumber\"in e&&\"routingNumber\"in e&&\"ownershipType\"in e&&\"accountType\"in e}var il=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class rl{constructor(e,t){this.paymentIntegrationService=e,this.braintreeSdk=t}initialize(e){return il(this,void 0,void 0,function*(){const{methodId:t,braintreeach:n}=e||{};if(!t)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');this.getMandateText=null==n?void 0:n.getMandateText,yield this.paymentIntegrationService.loadPaymentMethod(t);const i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{clientToken:r,initializationData:o}=i;if(!r||!o)throw new jt(kt.MissingPaymentMethod);this.braintreeSdk.initialize(r);try{this.usBankAccount=yield this.braintreeSdk.getUsBankAccount()}catch(e){this.handleBraintreeError(e)}})}execute(e,t){return il(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);const r=Sd(n.paymentData||{}),o=r?yield this.tokenizePaymentForVaultedInstrument(n):yield this.tokenizePayment(n),a=r?yield this.preparePaymentDataForVaultedInstrument(o,n):yield this.preparePaymentData(o,n);yield this.paymentIntegrationService.submitOrder(i,t),yield this.paymentIntegrationService.submitPayment(a)})}finalize(){return Promise.reject(new _d)}deinitialize(){return il(this,void 0,void 0,function*(){return yield this.braintreeSdk.deinitialize(),Promise.resolve()})}tokenizePayment({paymentData:e}){return il(this,void 0,void 0,function*(){const t=this.getUsBankAccountOrThrow();if(!nl(e))throw new Yi([\"payment.paymentData\"]);const n=Sd(e)?\"The data are used for stored instrument verification\":\"function\"==typeof this.getMandateText&&this.getMandateText();if(!n)throw new rn(\"Unable to proceed because getMandateText is not provided or returned undefined value.\");try{const{nonce:i}=yield t.tokenize({bankDetails:this.getBankDetails(e),mandateText:n});return i}catch(e){this.handleBraintreeError(e)}})}tokenizePaymentForVaultedInstrument(e){return il(this,void 0,void 0,function*(){const{methodId:t,paymentData:n={}}=e,i=this.paymentIntegrationService.getState(),{config:r}=i.getPaymentMethodOrThrow(t);if(!r.isVaultingEnabled)throw new rn(\"Vaulting is disabled but a vaulted instrument was being used for this transaction\");return nl(n)?this.tokenizePayment(e):null})}preparePaymentData(e,t){return il(this,void 0,void 0,function*(){const{methodId:n,paymentData:i={}}=t;if(!nl(i))throw new Yi([\"payment.paymentData\"]);const{deviceData:r}=yield this.braintreeSdk.getDataCollectorOrThrow(),{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:a,routingNumber:s,accountNumber:d}=i;return{methodId:n,paymentData:{deviceSessionId:r,shouldSetAsDefaultInstrument:a,shouldSaveInstrument:o,formattedPayload:{tokenized_bank_account:{issuer:s,masked_account_number:d.substr(-4),token:e}}}}})}preparePaymentDataForVaultedInstrument(e,t){return il(this,void 0,void 0,function*(){const{methodId:n,paymentData:i={}}=t;if(!Sd(i)||!Pd(i))throw new Yi([\"payment.paymentData\"]);const{deviceData:r}=yield this.braintreeSdk.getDataCollectorOrThrow(),{instrumentId:o,shouldSetAsDefaultInstrument:a}=i;return{methodId:n,paymentData:Object.assign({deviceSessionId:r,instrumentId:o,shouldSetAsDefaultInstrument:a},e&&{nonce:e})}})}getBankDetails(e){const t=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),n=e.ownershipType.toLowerCase(),i=e.accountType.toLowerCase();return Object.assign(Object.assign({accountNumber:e.accountNumber,routingNumber:e.routingNumber,ownershipType:n},\"personal\"===n?{firstName:e.firstName,lastName:e.lastName}:{businessName:e.businessName}),{accountType:i,billingAddress:{streetAddress:t.address1,extendedAddress:t.address2,locality:t.city,region:t.stateOrProvinceCode,postalCode:t.postalCode}})}getUsBankAccountOrThrow(){if(!this.usBankAccount)throw new Vt(Tt.PaymentNotInitialized);return this.usBankAccount}handleBraintreeError(e){if(!Cn(e))throw e;throw new Li(e.message)}}const ol=nn(e=>new rl(e,(e=>{const t=new pn(e),n=new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),window,t);return new En(n)})(e)),[{id:\"braintreeach\"}]);class al{constructor(e){this.paymentIntegrationService=e,this.braintreeHostWindow=window}render(e,t,n){const i=t&&document.getElementById(t);if(this.braintreeHostWindow.paypal&&i){const r=this.paymentIntegrationService.getState(),o=r.getCartOrThrow(),a=r.getBillingAddressOrThrow(),s=r.getPaymentMethodOrThrow(e);if(!s.initializationData)return;const{paypalBNPLConfiguration:d=[]}=s.initializationData,c=n===ir.PAYMENT?\"checkout\":n,l=d&&d.find(({id:e})=>e===c);if(!l||!l.status)return;n===ir.CART&&(i.removeAttribute(\"data-pp-style-logo-type\"),i.removeAttribute(\"data-pp-style-logo-position\"),i.removeAttribute(\"data-pp-style-text-color\"),i.removeAttribute(\"data-pp-style-text-size\")),this.braintreeHostWindow.paypal.Messages({amount:o.cartAmount,buyerCountry:a.countryCode,placement:n,style:this.getPaypalMessagesStylesFromBNPLConfig(l)}).render(`#${t}`)}}getPaypalMessagesStylesFromBNPLConfig({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t}}class sl{constructor(e){const{element:t,closeElement:n,mainElement:i}=this._createElements(e);this._element=t,this._closeElement=n,this._mainElement=i}show(e){this._mainElement.parentElement||(this._registerClick(e),document.body.appendChild(this._mainElement),setTimeout(()=>this._element.style.opacity=\"1\"))}remove(){this._mainElement.parentElement&&(this._unregisterClick&&this._unregisterClick(),this._removeAfterTransition(),setTimeout(()=>this._element.style.opacity=\"0\"))}_createElements(e){const t=document.createElement(\"div\"),{background:n=\"rgba(0, 0, 0, 0.8)\",id:i=\"checkoutOverlay\",transitionDuration:r=400,hasCloseButton:o=!1,innerHtml:a=null}=e||{};let s,d,c,l,u=t;if(i&&(t.id=i),a){const e=document.createElement(\"div\");l=`${i}--overlayText`,e.className=l,e.appendChild(a),t.appendChild(e)}return o&&(c=`${i}--close`,s=document.createElement(\"div\"),s.className=c,d=`${i}--layout`,u=document.createElement(\"div\"),u.className=d,u.appendChild(t),u.appendChild(s)),u.appendChild(function(e){const{id:t,background:n,transitionDuration:i,classLayout:r,classOverlayText:o,classClose:a}=e,s=document.createElement(\"style\"),d=r?`, .${r}`:\"\";return s.id=`${t}--styles`,s.type=\"text/css\",s.innerText=`\\n        #${t}${d} {\\n            display: block;\\n            height: 100%;\\n            width: 100%;\\n            left: 0;\\n            top: 0;\\n            position: fixed;\\n            z-index: 2147483647;\\n        }\\n        #${t} {\\n            transition: opacity ${i}ms ease-out;\\n            background: ${n};\\n            opacity: 0;\\n        }\\n    `,o&&(s.innerText+=`\\n             #${t} {\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n             }\\n             #${t} .${o} {\\n                color: white;\\n                max-width: 330px;\\n                font-size: 1.2em;\\n                text-align: center;\\n             }\\n        `),a&&(s.innerText+=`\\n            #${t} {\\n                opacity: 1;\\n            }\\n            .${r} .${a} {\\n                position: fixed;\\n                right: 16px;\\n                top: 16px;\\n                width: 16px;\\n                height: 16px;\\n                opacity: 0.6;\\n                cursor: pointer;\\n                z-index: 3147483647;\\n            }\\n            .${r} .${a}::after, .${r} .${a}::before {\\n                position: absolute;\\n                left: 8px;\\n                content: '';\\n                height: 16px;\\n                width: 2px;\\n                background-color: #fff;\\n            }\\n            .${r} .${a}::after {\\n                transform: rotate(-45deg);\\n            }\\n            .${r} .${a}::before {\\n                transform: rotate(45deg);\\n            }\\n        `),s}({id:i,background:n,transitionDuration:r,classLayout:d,classOverlayText:l,classClose:c})),{element:t,closeElement:s,mainElement:u}}_addEventListener(e,t){e&&t&&e.addEventListener(\"click\",t)}_removeEventListener(e,t){e&&t&&e.removeEventListener(\"click\",t)}_registerClick(e){if(this._unregisterClick&&this._unregisterClick(),e){const{onClick:t,onClickClose:n}=e;this._addEventListener(this._element,t),this._addEventListener(this._closeElement,n),this._unregisterClick=()=>{this._removeEventListener(this._element,t),this._removeEventListener(this._closeElement,n),this._unregisterClick=void 0}}}_removeAfterTransition(){const e=t=>{\"opacity\"===t.propertyName&&(this._mainElement.parentElement&&this._mainElement.remove(),this._element.removeEventListener(\"transitionend\",e))};this._element.addEventListener(\"transitionend\",e)}}const dl={\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"};function cl(e){return\"object\"==typeof e&&null!==e&&\"name\"in e&&\"BraintreeError\"===e.name}function ll(e){return{recipientName:`${e.firstName} ${e.lastName}`,line1:e.address1,line2:e.address2,city:e.city,state:e.stateOrProvinceCode,postalCode:e.postalCode,countryCode:e.countryCode,phone:e.phone}}var ul=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class hl{constructor(e,t,n,i){this.paymentIntegrationService=e,this.braintreeIntegrationService=t,this.braintreeMessages=n,this.loadingIndicator=i,this.braintreeHostWindow=window}initialize(e){return ul(this,void 0,void 0,function*(){const{braintree:t,methodId:n}=e;if(this.braintree=t,this.paymentMethod&&this.paymentMethod.nonce||(this.paymentMethod=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n)),this.paymentMethod.clientToken&&(null==t?void 0:t.bannerContainerId))return yield this.loadPaypal(),this.loadPaypalCheckoutInstance();if(this.paymentMethod.clientToken)return this.loadPaypal();const i=yield this.paymentIntegrationService.loadPaymentMethod(n);if(this.paymentMethod=i.getPaymentMethodOrThrow(n),null==t?void 0:t.bannerContainerId)return this.loadPaypalCheckoutInstance();if(!this.paymentMethod.clientToken)throw new jt(kt.MissingPaymentMethod);return this.loadPaypal()})}execute(e,t){var n;return ul(this,void 0,void 0,function*(){const{payment:i}=e,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),{onError:o}=this.braintree||{},a=this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features,s=a&&a[\"PAYPAL-3521.handling_declined_error_braintree\"];if(!i)throw new Yi([\"payment\"]);try{const e=yield this.preparePaymentData(i,r.useStoreCredit);yield this.paymentIntegrationService.submitOrder(r,t),yield this.paymentIntegrationService.submitPayment(e)}catch(e){this.isProviderError(e)&&s&&(yield this.loadPaypal(),null===(n=this.paypalButtonRender)||void 0===n||n.close(),yield this.loadPaypalCheckoutInstance(),yield new Promise((e,t)=>{o&&\"function\"==typeof o&&o(new Error(\"INSTRUMENT_DECLINED\")),t()})),this.handleError(e)}})}finalize(){return Promise.reject(new _d)}deinitialize(){var e;return this.braintreeTokenizePayload=void 0,null===(e=this.paypalButtonRender)||void 0===e||e.close(),this.braintreeIntegrationService.teardown()}preparePaymentData(e,t){var n;return ul(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),r=i.getOutstandingBalance(t),o=i.getStoreConfig();if(!r)throw new jt(kt.MissingCheckout);if(!o)throw new jt(kt.MissingCheckoutConfig);if(!this.paymentMethod)throw new Vt(Tt.PaymentNotInitialized);const{currency:a,storeProfile:{storeLanguage:s}}=o,{nonce:d,config:{isVaultingEnabled:c}}=this.paymentMethod,{methodId:l,paymentData:u={}}=e,h=(null===(n=this.braintreeTokenizePayload)||void 0===n?void 0:n.nonce)||d;if(h){const t=yield this.paymentIntegrationService.loadPaymentMethod(l);return this.paymentMethod=t.getPaymentMethod(l),Object.assign(Object.assign({},e),{paymentData:this.formattedPayload(h)})}if(Sd(u)||(p=u,Boolean(p.instrumentId)&&!Object.prototype.hasOwnProperty.call(p,\"ccNumber\")&&!Object.prototype.hasOwnProperty.call(p,\"ccCvv\"))){if(!c)throw new rn(\"Vaulting is disabled but a vaulted instrument was being used for this transaction\");return Promise.resolve(e)}var p;if(!Pd(u))throw new jt(kt.MissingPayment);const{shouldSaveInstrument:m,shouldSetAsDefaultInstrument:y}=u;if(m&&!c)throw new rn(\"Vaulting is disabled but shouldSaveInstrument is set to true\");const g=i.getShippingAddress(),v=g?ll(g):void 0;return Promise.all([this.braintreeIntegrationService.paypal({amount:r,locale:s,currency:a.code,offerCredit:\"braintreepaypalcredit\"===this.paymentMethod.id,shippingAddressOverride:v,shouldSaveInstrument:m||!1,shippingAddressEditable:!1}),this.braintreeIntegrationService.getSessionId()]).then(([{nonce:t,details:n}={},i])=>Object.assign(Object.assign({},e),{paymentData:this.formattedPayload(t,n&&n.email,i,m,y)}))})}formattedPayload(e,t,n,i,r){return{formattedPayload:{vault_payment_instrument:i||null,set_as_default_stored_instrument:r||null,device_info:n||null,paypal_account:{token:e,email:t||null}}}}loadPaypalCheckoutInstance(){return ul(this,void 0,void 0,function*(){const{clientToken:e,initializationData:t,id:n}=this.paymentMethod||{};if(!e)throw new jt(kt.MissingPaymentMethod);try{this.braintreeIntegrationService.initialize(e);const i={currency:this.paymentIntegrationService.getState().getCartOrThrow().currency.code,intent:null==t?void 0:t.intent,isCreditEnabled:null==t?void 0:t.isCreditEnabled},r=\"braintreepaypalcredit\"===n||!(null==t?void 0:t.isCreditEnabled);yield this.braintreeIntegrationService.getPaypalCheckout(i,e=>{var t;r&&n&&(null===(t=this.braintree)||void 0===t?void 0:t.bannerContainerId)&&this.renderPayPalMessages(n,this.braintree.bannerContainerId),this.renderPayPalButton(e)},this.handleError)}catch(e){this.handleError(e)}})}renderPayPalMessages(e,t){this.braintreeMessages.render(e,t,ir.PAYMENT)}renderPayPalButton(e){const{onPaymentError:t,submitForm:n,onRenderButton:i,containerId:r,onError:o}=this.braintree||{};if(!r)return;if(!this.paymentMethod)throw new Vt(Tt.PaymentNotInitialized);this.loadingIndicatorContainer=r.split(\"#\")[1];const{id:a,config:{testMode:s}}=this.paymentMethod,{paypal:d}=this.braintreeHostWindow,c=null==d?void 0:d.FUNDING.PAYPAL;d&&c?(this.paypalButtonRender=d.Buttons({env:s?\"sandbox\":\"production\",commit:!1,fundingSource:c,onClick:()=>{this.toggleLoadingIndicator(!0)},createOrder:()=>this.setupPayment(e,a,t),onApprove:t=>ul(this,void 0,void 0,function*(){this.braintreeTokenizePayload=yield this.tokenizePaymentOrThrow(t,e),n&&\"function\"==typeof n&&n()}),onCancel:()=>{this.toggleLoadingIndicator(!1)},onError:e=>{this.toggleLoadingIndicator(!1),null==o||o(e)}}),i&&\"function\"==typeof i&&i(),this.paypalButtonRender.isEligible()&&this.paypalButtonRender.render(`${r}`)):this.removeElement(r.split(\"#\")[1])}setupPayment(e,t,n){return ul(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState();try{const n=i.getCustomer(),r=i.getPaymentMethodOrThrow(t),o=i.getCheckoutOrThrow().outstandingBalance,a=i.getStoreConfigOrThrow().currency.code,s=i.getShippingAddress()||(null==n?void 0:n.addresses[0]),d=s?ll(s):void 0;return yield e.createPayment({flow:\"checkout\",enableShippingAddress:!0,shippingAddressEditable:!1,shippingAddressOverride:d,amount:o,currency:a,offerCredit:!1,intent:r.initializationData.intent})}catch(e){throw n&&(cl(e)||e instanceof Bt)&&n(e),e}})}tokenizePaymentOrThrow(e,t,n){return ul(this,void 0,void 0,function*(){try{return yield t.tokenizePayment(e)}catch(e){throw n&&(cl(e)||e instanceof Bt)&&n(e),e}})}loadPaypal(){return ul(this,void 0,void 0,function*(){const{clientToken:e,initializationData:t}=this.paymentMethod||{};if(!e||!t)throw new jt(kt.MissingPaymentMethod);try{this.braintreeIntegrationService.initialize(e),yield this.braintreeIntegrationService.getPaypal()}catch(e){this.handleError(e)}return Promise.resolve()})}handleError(e){if(!cl(e))throw e;if(\"PAYPAL_POPUP_CLOSED\"===e.code)throw new Mn(e.message);throw new Li(e.message)}isProviderError(e){var t,n,i;return!!function(e){return\"object\"==typeof e&&null!==e&&\"errors\"in e}(e)&&\"2046\"===(null===(i=null===(n=((null===(t=null==e?void 0:e.errors)||void 0===t?void 0:t.filter(e=>e.provider_error))||[])[0])||void 0===n?void 0:n.provider_error)||void 0===i?void 0:i.code)}removeElement(e){const t=e&&document.getElementById(e);t&&t.remove()}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const pl=nn(e=>{const t=window,n=new sl,i=new pn(e),r=new or(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),t,i),t,n),o=new al(e);return new hl(e,r,o,new Ba({containerStyles:dl}))},[{id:\"braintreepaypal\"},{id:\"braintreepaypalcredit\"}]);class ml{constructor(e){this.requestSender=e}getOrderStatus(e=\"braintreelocalmethods\",t){return n=this,i=void 0,o=function*(){const n=`/api/storefront/initialization/${e}`,i=Object.assign({\"X-API-INTERNAL\":Xn,\"Content-Type\":ti.Json},ni);return(yield this.requestSender.get(n,Object.assign({headers:i},t))).body},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}}var yl=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class gl{constructor(e,t,n,i,r=3e3,o=3e5){this.paymentIntegrationService=e,this.braintreeSdk=t,this.braintreeRequestSender=n,this.loadingIndicator=i,this.pollingInterval=r,this.maxPollingIntervalTime=o,this.isLPMsUpdateExperimentEnabled=!1,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,this.isPollingEnabled=!1}initialize(e){return yl(this,void 0,void 0,function*(){const{gatewayId:t,methodId:n,braintreelocalmethods:i}=e;if(this.gatewayId=t,!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!i)throw new rn('Unable to initialize payment because \"options.braintreelocalmethods\" argument is not provided.');this.braintreelocalmethods=i,this.loadingIndicatorContainer=i.container.split(\"#\")[1],yield this.paymentIntegrationService.loadPaymentMethod(t);const r=this.paymentIntegrationService.getState(),o=r.getPaymentMethodOrThrow(t),{clientToken:a,config:s,initializationData:d}=o,c=r.getStoreConfigOrThrow().checkoutSettings.features;if(this.isPollingEnabled=cn(c,\"PAYPAL-5258.braintree_local_methods_polling\"),this.isLPMsUpdateExperimentEnabled=cn(c,\"PAYPAL-4853.add_new_payment_flow_for_braintree_lpms\"),!a||!d||!s.merchantId)throw new jt(kt.MissingPaymentMethod);try{this.braintreeSdk.initialize(a),this.isNonInstantPaymentMethod(n)||(this.braintreeLocalPayment=yield this.braintreeSdk.getBraintreeLocalPayment(s.merchantId))}catch(e){this.handleError(e)}})}finalize(){return Promise.reject(new _d)}deinitialize(){return yl(this,void 0,void 0,function*(){return this.toggleLoadingIndicator(!1),Promise.resolve()})}execute(e,t){return yl(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);const{methodId:r}=n;this.toggleLoadingIndicator(!0),this.isNonInstantPaymentMethod(r)?yield this.executeWithNotInstantLPM(r):yield this.executeWithInstantLPM(r,i,t)})}executeWithNotInstantLPM(e){return yl(this,void 0,void 0,function*(){try{const t=yield this.getLPMsBasicPaymentData();yield this.paymentIntegrationService.submitOrder(),yield this.paymentIntegrationService.submitPayment({methodId:e,paymentData:Object.assign(Object.assign({},t),{formattedPayload:{method:e}})})}catch(e){if(this.isBraintreeRedirectError(e)){const t=e.body.additional_action_required.data.redirect_url;return new Promise((e,n)=>{window.location.replace(t),this.toggleLoadingIndicator(!1),n()})}return this.handleError(e),Promise.reject(e)}})}executeWithInstantLPM(e,t,n){return yl(this,void 0,void 0,function*(){if(!this.braintreeLocalPayment)throw new Bi;yield new Promise((i,r)=>{var o;null===(o=this.braintreeLocalPayment)||void 0===o||o.startPayment(this.getInstantLPMConfig(e,t,n),this.getInstantLPMCallback(i,r,e,t,n))})})}getLPMsBasicPaymentData(){return yl(this,void 0,void 0,function*(){const{deviceData:e}=yield this.braintreeSdk.getDataCollectorOrThrow();return{deviceSessionId:e}})}getInstantLPMConfig(e,t,n){const i=this.paymentIntegrationService.getState(),r=i.getCartOrThrow(),o=i.getBillingAddressOrThrow(),{firstName:a,lastName:s,countryCode:d}=o,{currency:c,email:l,lineItems:u}=r,h=u.physicalItems.length>0,p=i.getCheckoutOrThrow().outstandingBalance,m=i.getStoreConfigOrThrow().links.checkoutLink;return{paymentType:e,amount:p,fallback:{url:m,buttonText:\"Complete Payment\"},currencyCode:c.code,shippingAddressRequired:h,email:l,givenName:a,surname:s,address:{countryCode:d},onPaymentStart:(i,r)=>yl(this,void 0,void 0,function*(){if(!this.isLPMsUpdateExperimentEnabled)return this.orderId=i.paymentId,void r();const o=yield this.getLPMsBasicPaymentData(),a=Object.assign(Object.assign({},o),{formattedPayload:{method:e,[`${e}_account`]:{order_id:i.paymentId}}});try{yield this.paymentIntegrationService.submitOrder(t,n),yield this.paymentIntegrationService.submitPayment({methodId:e,paymentData:a})}catch(t){if(this.isBraintreeOrderSavedResponse(t)&&t.body.additional_action_required.data.order_id_saved_successfully)return r(),this.isPollingEnabled?new Promise((t,n)=>{this.initializePollingMechanism(e,t,n,this.gatewayId)}):void 0;throw t}})}}getInstantLPMCallback(e,t,n,i,r){const o=this.paymentIntegrationService.getState().getCartOrThrow();return(a,s)=>yl(this,void 0,void 0,function*(){if(a)return\"LOCAL_PAYMENT_WINDOW_CLOSED\"===a.code?(this.toggleLoadingIndicator(!1),this.resetPollingMechanism(),t()):(this.isPollingEnabled&&this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t(new Bi));const d=yield this.getLPMsBasicPaymentData(),c=Object.assign(Object.assign({},d),{formattedPayload:{method:n,[`${n}_account`]:Object.assign({email:o.email,token:s.nonce},this.isLPMsUpdateExperimentEnabled?{}:{order_id:this.orderId})}});try{return this.isLPMsUpdateExperimentEnabled||(yield this.paymentIntegrationService.submitOrder(i,r)),yield this.paymentIntegrationService.submitPayment({methodId:n,paymentData:c}),e(void 0)}catch(e){return this.handleError(e),t(e)}})}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}handleError(e){const{onError:t}=this.braintreelocalmethods||{};this.isPollingEnabled&&this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}isNonInstantPaymentMethod(e){return e.toUpperCase()in vn}isBraintreeRedirectError(e){var t;if(\"object\"!=typeof e||null===e)return!1;const{body:n}=e;return!!n&&!!(null===(t=n.additional_action_required)||void 0===t?void 0:t.data.redirect_url)}isBraintreeOrderSavedResponse(e){var t;if(\"object\"!=typeof e||null===e)return!1;const{body:n}=e;return!!n&&(null===(t=n.additional_action_required)||void 0===t?void 0:t.data.hasOwnProperty(\"order_id_saved_successfully\"))}initializePollingMechanism(e,t,n,i){return yl(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const n=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(n),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const r=yield this.braintreeRequestSender.getOrderStatus(i,{params:{useMetadata:!1}}),o=r.status===gn.Pending,a=r.status===gn.Completed,s=r.status===gn.Failed;if(a)return this.deinitializePollingMechanism(),t();if(s)return n();if(!a&&o&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,n,i);yield this.reinitializeStrategy({methodId:e,gatewayId:i,braintreelocalmethods:this.braintreelocalmethods}),this.handleError(new sc)}catch(e){n()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}reinitializeStrategy(e){return yl(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}}const vl=nn(e=>{const t=window,i=new pn(e),r=new En(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),t,i)),o=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),s=new ml(o);return new gl(e,r,s,new Ba({styles:{backgroundColor:\"black\"}}))},[{gateway:\"braintreelocalmethods\"}]);function fl(e){return!!e&&(\"authenticationState\"in e||\"addresses\"in e||\"instruments\"in e)}var Sl=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class _l{constructor(e,t,n){this.paymentIntegrationService=e,this.braintreeFastlaneUtils=t,this.braintreeSdk=n}initialize(e){var t;return Sl(this,void 0,void 0,function*(){const{methodId:n,braintreefastlane:i}=e;if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new rn('Unable to initialize payment because \"options.braintreefastlane\" argument is not provided.');if(!i.onInit||\"function\"!=typeof i.onInit)throw new rn('Unable to initialize payment because \"options.braintreefastlane.onInit\" argument is not provided or it is not a function.');if(!i.onChange||\"function\"!=typeof i.onChange)throw new rn('Unable to initialize payment because \"options.braintreefastlane.onChange\" argument is not provided or it is not a function.');yield this.paymentIntegrationService.loadPaymentMethod(n);const r=this.paymentIntegrationService.getState(),o=r.getPaymentMethodOrThrow(n),{initializationData:a,clientToken:s}=o||{},{isFastlaneStylingEnabled:d}=a||{},c=cn(r.getStoreConfigOrThrow().checkoutSettings.features,\"PROJECT-7080.braintree_fastlane_three_ds\");this.is3DSEnabled=o.config.is3dsEnabled,s&&c&&this.braintreeSdk.initialize(s);const l=pr(d?null===(t=o.initializationData)||void 0===t?void 0:t.fastlaneStyles:void 0,i.styles);yield this.braintreeFastlaneUtils.initializeBraintreeFastlaneOrThrow(n,l),this.shouldRunAuthenticationFlow()&&(yield this.braintreeFastlaneUtils.runPayPalAuthenticationFlowOrThrow()),yield this.initializeCardComponent(),this.onError=i.onError,i.onInit(e=>this.renderBraintreeCardComponent(e)),i.onChange(()=>this.handleBraintreeStoredInstrumentChange(n))})}execute(e,t){return Sl(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);yield this.paymentIntegrationService.submitOrder(i,t);const r=yield this.preparePaymentPayload(n.methodId);yield this.paymentIntegrationService.submitPayment(r),this.braintreeFastlaneUtils.removeSessionIdFromCookies()})}finalize(){return Promise.reject(new _d)}deinitialize(){return Sl(this,void 0,void 0,function*(){return this.braintreeCardComponent=void 0,Promise.resolve()})}initializeCardComponent(){return Sl(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState(),{phone:t,firstName:n,lastName:i}=e.getBillingAddressOrThrow(),r=`${n} ${i}`,o={styles:{},fields:Object.assign({cardholderName:{prefill:r,enabled:!0}},t&&{phoneNumber:{prefill:t}})},a=this.braintreeFastlaneUtils.getBraintreeFastlaneComponentOrThrow();this.braintreeCardComponent=yield a(o)})}renderBraintreeCardComponent(e){const t=this.getBraintreeCardComponentOrThrow();if(!e)throw new rn('Unable to initialize payment because \"container\" argument is not provided.');t.render(e)}preparePaymentPayload(e){var t,n;return Sl(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),r=i.getBillingAddressOrThrow(),o=`${r.firstName} ${r.lastName}`,a=this.getPayPalInstruments()[0],s=yield this.braintreeFastlaneUtils.getDeviceSessionId(),d=cn(i.getStoreConfigOrThrow().checkoutSettings.features,\"PROJECT-7080.braintree_fastlane_three_ds\");if(a){const t=this.is3DSEnabled&&d?yield this.get3DS(a.bigpayToken,(null==a?void 0:a.iin)||\"\"):void 0;return{methodId:e,paymentData:{deviceSessionId:s,formattedPayload:{paypal_fastlane_token:{token:t||a.bigpayToken}}}}}const{getPaymentToken:c}=this.getBraintreeCardComponentOrThrow(),l=yield c({name:{fullName:o},billingAddress:this.mapToPayPalAddress(r)}),u=(null===(n=null===(t=l.paymentSource.card)||void 0===t?void 0:t.binDetails)||void 0===n?void 0:n.bin)||\"\",h=this.is3DSEnabled&&d?yield this.get3DS(l.id,u):void 0;return{methodId:e,paymentData:{deviceSessionId:s,nonce:h||l.id}}})}get3DS(e,t){return Sl(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState(),i=yield this.braintreeSdk.getBraintreeThreeDS(),r=n.getOrderOrThrow();return new Promise((n,o)=>{i.verifyCard({amount:null==r?void 0:r.orderAmount,nonce:e,bin:t,onLookupComplete:(e,t)=>{i.on(\"customer-canceled\",()=>{\"function\"==typeof this.onError&&this.onError(new Mn),o(new Mn)}),t()}},(e,t)=>(e&&\"THREEDS_VERIFY_CARD_CANCELED_BY_MERCHANT\"===e.code&&(\"function\"==typeof this.onError&&this.onError(new Mn),o(new Mn)),n(t.nonce)))})})}mapToPayPalAddress(e){return{streetAddress:(null==e?void 0:e.address1)||\"\",locality:(null==e?void 0:e.city)||\"\",region:(null==e?void 0:e.stateOrProvinceCode)||(null==e?void 0:e.stateOrProvince)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCodeAlpha2:(null==e?void 0:e.countryCode)||\"\"}}shouldRunAuthenticationFlow(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),n=e.getCustomerOrThrow(),i=e.getPaymentProviderCustomer(),r=fl(i)?i:{},o=this.braintreeFastlaneUtils.getSessionIdFromCookies();return!(!n.isGuest||(null==r?void 0:r.authenticationState)===fn.CANCELED||(null==r?void 0:r.authenticationState)||o!==t.id)}getBraintreeCardComponentOrThrow(){if(!this.braintreeCardComponent)throw new Xt;return this.braintreeCardComponent}getPayPalInstruments(){const e=this.paymentIntegrationService.getState().getPaymentProviderCustomerOrThrow();return(fl(e)?e:{}).instruments||[]}handleBraintreeStoredInstrumentChange(e){return Sl(this,void 0,void 0,function*(){const t=this.braintreeFastlaneUtils.getBraintreeFastlaneOrThrow(),{selectionChanged:n,selectedCard:i}=yield t.profile.showCardSelector();if(n){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomer(),n=fl(t)?t:{},r=this.braintreeFastlaneUtils.mapPayPalToBcInstrument(e,[i]);if(r&&r.length>0)return yield this.paymentIntegrationService.updatePaymentProviderCustomer(Object.assign(Object.assign({},n),{instruments:[...r]})),r[0]}})}}const wl=nn(e=>{const t=window,n=new pn(e),i=new or(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),t,n),t),r=new vr(e,i),o=new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),t,n),s=new En(o);return new _l(e,r,s)},[{id:\"braintreeacceleratedcheckout\"}]);var Cl=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Il{constructor(e,t){this.paymentIntegrationService=e,this.braintreeIntegrationService=t}initialize(e){return Cl(this,void 0,void 0,function*(){const{methodId:t}=e;yield this.paymentIntegrationService.loadPaymentMethod(t);const n=this.paymentIntegrationService.getState();this.venmoOptions=e.braintreevenmo;const i=n.getPaymentMethodOrThrow(t);yield this.initializeBraintreeVenmo(i)})}execute(e){return Cl(this,void 0,void 0,function*(){const{payment:t}=e,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!t)throw new Yi([\"payment\"]);try{const e=yield this.preparePaymentData(t);yield this.paymentIntegrationService.submitOrder(n),yield this.paymentIntegrationService.submitPayment(e)}catch(e){this.handleError(e)}})}finalize(){return Promise.reject(new _d)}deinitialize(){return Cl(this,void 0,void 0,function*(){return yield this.braintreeIntegrationService.teardown(),Promise.resolve()})}handleError(e){if(!Cn(e))throw e;if(\"PAYPAL_POPUP_CLOSED\"===e.code)throw new Mn(e.message);throw new Li(e.message)}initializeBraintreeVenmo(e){var t;return Cl(this,void 0,void 0,function*(){const{clientToken:n}=e;if(!n)throw new jt(kt.MissingPaymentMethod);const i=cn(this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features,\"PAYPAL-5406.braintree_venmo_web_fallback_support\");try{this.braintreeIntegrationService.initialize(n),this.braintreeVenmoCheckout=yield this.braintreeIntegrationService.getVenmoCheckout(Object.assign(Object.assign({},void 0!==(null===(t=this.venmoOptions)||void 0===t?void 0:t.allowDesktop)?{allowDesktop:this.venmoOptions.allowDesktop}:{}),i?{mobileWebFallBack:i}:{}))}catch(e){this.handleError(e)}})}preparePaymentData(e){return Cl(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),{nonce:n}=t.getPaymentMethodOrThrow(e.methodId);if(n)return Object.assign(Object.assign({},e),{paymentData:this.formattedPayload(n)});const i=yield this.braintreeVenmoTokenize(),r=yield this.braintreeIntegrationService.getSessionId();return Object.assign(Object.assign({},e),{paymentData:this.formattedPayload(i.nonce,i.details.email,r)})})}formattedPayload(e,t,n){return{formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:n||null,paypal_account:{token:e,email:t||null}}}}braintreeVenmoTokenize(){return new Promise((e,t)=>{var n;null===(n=this.braintreeVenmoCheckout)||void 0===n||n.tokenize((n,i)=>{if(n)return t(n);e(i)})})}}const bl=nn(e=>{const t=window,n=(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),i=new pn(e),r=new Dn(n,t,i),o=new or(r,t);return new Il(e,o)},[{id:\"braintreevenmo\"}]);var Pl=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Ol{constructor(e,t,n){this.paymentIntegrationService=e,this.braintreeIntegrationService=t,this.braintreeHostedForm=n}initialize(e){return Pl(this,void 0,void 0,function*(){const{methodId:t,gatewayId:n,braintree:i}=e;yield this.paymentIntegrationService.loadPaymentMethod(t);const r=this.paymentIntegrationService.getState();this.paymentMethod=r.getPaymentMethodOrThrow(t);const{clientToken:o}=this.paymentMethod;if(!o)throw new jt(kt.MissingPaymentMethod);this.threeDSecure=null==i?void 0:i.threeDSecure;try{this.braintreeIntegrationService.initialize(o,this.threeDSecure),this.isHostedPaymentFormEnabled(t,n)&&(null==i?void 0:i.form)&&(yield this.braintreeHostedForm.initialize(i.form,i.unsupportedCardBrands,o),this.isHostedFormInitialized=this.braintreeHostedForm.isInitialized()),this.is3dsEnabled=this.paymentMethod.config.is3dsEnabled,this.deviceSessionId=yield this.braintreeIntegrationService.getSessionId(),this.shouldInitializeBraintreeFastlane()&&(yield this.initializeBraintreeFastlaneOrThrow(t))}catch(e){return this.handleError(e)}})}execute(e){return Pl(this,void 0,void 0,function*(){const{payment:t}=e,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!t)throw new Yi([\"payment\"]);this.isHostedFormInitialized&&this.braintreeHostedForm.validate(),yield this.paymentIntegrationService.submitOrder(n);const i=this.paymentIntegrationService.getState(),r=i.getBillingAddressOrThrow(),o=i.getOrderOrThrow().orderAmount;try{const e=this.isHostedFormInitialized?yield this.prepareHostedPaymentData(t,r,o):yield this.preparePaymentData(t,r,o);yield this.paymentIntegrationService.submitPayment(Object.assign(Object.assign({},t),{paymentData:e}))}catch(e){return this.processAdditionalAction(e,t,o)}})}finalize(){return Promise.reject(new _d)}deinitialize(){return Pl(this,void 0,void 0,function*(){return this.isHostedFormInitialized=!1,yield Promise.all([this.braintreeIntegrationService.teardown(),this.braintreeHostedForm.deinitialize()]),Promise.resolve()})}handleError(e){if(cl(e))throw new Li(e.message);throw e}preparePaymentData(e,t,n){return Pl(this,void 0,void 0,function*(){const{paymentData:i}=e,r={deviceSessionId:this.deviceSessionId};if(this.isSubmittingWithStoredCard(e))return Object.assign(Object.assign({},r),i);const{shouldSaveInstrument:o=!1,shouldSetAsDefaultInstrument:a=!1}=Pd(i)?i:{},{nonce:s}=this.shouldPerform3DSVerification(e)?yield this.braintreeIntegrationService.verifyCard(e,t,n):yield this.braintreeIntegrationService.tokenizeCard(e,t);return Object.assign(Object.assign({},r),{nonce:s,shouldSaveInstrument:o,shouldSetAsDefaultInstrument:a})})}prepareHostedPaymentData(e,t,n){return Pl(this,void 0,void 0,function*(){const{paymentData:i}=e,r={deviceSessionId:this.deviceSessionId};if(this.isSubmittingWithStoredCard(e)){const{nonce:e}=yield this.braintreeHostedForm.tokenizeForStoredCardVerification();return Object.assign(Object.assign(Object.assign({},r),i),{nonce:e})}const{shouldSaveInstrument:o=!1,shouldSetAsDefaultInstrument:a=!1}=Pd(i)?i:{},{nonce:s}=this.shouldPerform3DSVerification(e)?yield this.verifyCardWithHostedForm(t,n):yield this.braintreeHostedForm.tokenize(t);return Object.assign(Object.assign({},r),{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:a,nonce:s})})}verifyCardWithHostedForm(e,t){return Pl(this,void 0,void 0,function*(){const n=yield this.braintreeHostedForm.tokenize(e);return this.braintreeIntegrationService.challenge3DSVerification(n,t)})}processAdditionalAction(e,t,n){return Pl(this,void 0,void 0,function*(){if(!Xr(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"three_d_secure_required\"}))return this.handleError(e);try{const{payer_auth_request:i}=function(e){return\"object\"==typeof e&&null!==e&&\"name\"in e&&\"body\"in e&&\"status\"in e.body&&\"three_ds_result\"in e.body&&\"payer_auth_request\"in e.body.three_ds_result&&\"errors\"in e.body}(e)&&e.body.three_ds_result||{},{paymentData:r}=t,o=this.paymentIntegrationService.getState();if(!r||!Sd(r))throw new Yi([\"instrumentId\"]);const a=o.getCardInstrumentOrThrow(r.instrumentId),{nonce:s}=yield this.braintreeIntegrationService.challenge3DSVerification({nonce:i||\"\",bin:a.iin},n);yield this.paymentIntegrationService.submitPayment(Object.assign(Object.assign({},t),{paymentData:{deviceSessionId:this.deviceSessionId,nonce:s}}))}catch(e){return this.handleError(e)}})}isHostedPaymentFormEnabled(e,t){return!!e&&!0===this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}isSubmittingWithStoredCard(e){return!(!e.paymentData||!Sd(e.paymentData))}shouldPerform3DSVerification(e){return!(!this.is3dsEnabled||this.isSubmittingWithStoredCard(e))}shouldInitializeBraintreeFastlane(){var e;const t=this.paymentIntegrationService.getState().getPaymentProviderCustomerOrThrow(),n=fl(t)?t:{};return(null===(e=this.paymentMethod)||void 0===e?void 0:e.initializationData.isAcceleratedCheckoutEnabled)&&!(null==n?void 0:n.authenticationState)}initializeBraintreeFastlaneOrThrow(e){return Pl(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),n=t.getCartOrThrow(),i=t.getPaymentMethodOrThrow(e),{clientToken:r,config:o}=i;if(!r)throw new jt(kt.MissingPaymentMethod);this.braintreeIntegrationService.initialize(r,this.threeDSecure),yield this.braintreeIntegrationService.getBraintreeFastlane(n.id,o.testMode)})}}function El(e){return\"cardNumber\"in e}function Al(e){if(!Cn(e))return!1;const{details:t}=e;return void 0===t||\"object\"==typeof t&&null!==t&&void 0===t.invalidFieldKeys||(n=t,Array.isArray(n)&&n.every(e=>\"string\"==typeof e));// removed by dead control flow\n{ var n; }}var kl,Tl=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};!function(e){e[e.CreditCard=0]=\"CreditCard\",e[e.StoredCardVerification=1]=\"StoredCardVerification\"}(kl||(kl={}));class Dl{constructor(e,t){this.braintreeScriptLoader=e,this.braintreeSDKVersionManager=t,this.isInitializedHostedForm=!1,this.handleBlur=e=>{var t,n;null===(n=null===(t=this.formOptions)||void 0===t?void 0:t.onBlur)||void 0===n||n.call(t,{fieldType:this.mapFieldType(e.emittedBy),errors:this.mapErrors(e.fields)})},this.handleFocus=e=>{var t,n;null===(n=null===(t=this.formOptions)||void 0===t?void 0:t.onFocus)||void 0===n||n.call(t,{fieldType:this.mapFieldType(e.emittedBy)})},this.handleCardTypeChange=e=>{var t,n;const i=1===e.cards.length?e.cards[0].type.replace(/^master-card$/,\"mastercard\"):void 0;null===(n=null===(t=this.formOptions)||void 0===t?void 0:t.onCardTypeChange)||void 0===n||n.call(t,{cardType:i})},this.handleInputSubmitRequest=e=>{var t,n;null===(n=null===(t=this.formOptions)||void 0===t?void 0:t.onEnter)||void 0===n||n.call(t,{fieldType:this.mapFieldType(e.emittedBy)})},this.handleValidityChange=e=>{var t,n;null===(n=null===(t=this.formOptions)||void 0===t?void 0:t.onValidate)||void 0===n||n.call(t,{isValid:this.isValidForm(e),errors:this.mapValidationErrors(e.fields)})}}initialize(e,t,n){var i,r,o,a,s;return Tl(this,void 0,void 0,function*(){this.clientToken=n,this.formOptions=e,this.type=El(e.fields)?kl.CreditCard:kl.StoredCardVerification;const d=this.mapFieldOptions(e.fields,t);(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEmpty)(d)?this.isInitializedHostedForm=!1:(this.cardFields=yield this.createHostedFields({fields:d,styles:e.styles&&this.mapStyleOptions(e.styles)}),null===(i=this.cardFields)||void 0===i||i.on(\"blur\",this.handleBlur),null===(r=this.cardFields)||void 0===r||r.on(\"focus\",this.handleFocus),null===(o=this.cardFields)||void 0===o||o.on(\"cardTypeChange\",this.handleCardTypeChange),null===(a=this.cardFields)||void 0===a||a.on(\"validityChange\",this.handleValidityChange),null===(s=this.cardFields)||void 0===s||s.on(\"inputSubmitRequest\",this.handleInputSubmitRequest),this.isInitializedHostedForm=!0)})}isInitialized(){return!!this.isInitializedHostedForm}deinitialize(){var e;return Tl(this,void 0,void 0,function*(){this.isInitializedHostedForm&&(this.isInitializedHostedForm=!1,yield null===(e=this.cardFields)||void 0===e?void 0:e.teardown())})}validate(){if(!this.cardFields)throw new Vt(Tt.PaymentNotInitialized);const e=this.cardFields.getState();if(!this.isValidForm(e)){this.handleValidityChange(e);const t=this.mapValidationErrors(e.fields);throw new Ki(t)}}tokenize(e){var t,n,i,r,o;return Tl(this,void 0,void 0,function*(){if(!this.cardFields)throw new Vt(Tt.PaymentNotInitialized);try{const r=yield this.cardFields.tokenize((0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)({billingAddress:e&&this.mapBillingAddress(e)},lodash__WEBPACK_IMPORTED_MODULE_5__.isNil));return null===(n=null===(t=this.formOptions)||void 0===t?void 0:t.onValidate)||void 0===n||n.call(t,{isValid:!0,errors:{}}),{nonce:r.nonce,bin:null===(i=r.details)||void 0===i?void 0:i.bin}}catch(e){if(Al(e)){const t=this.mapTokenizeError(e);if(t)throw null===(o=null===(r=this.formOptions)||void 0===r?void 0:r.onValidate)||void 0===o||o.call(r,{isValid:!1,errors:t}),new Ki(t)}throw e}})}tokenizeForStoredCardVerification(){var e,t,n,i,r;return Tl(this,void 0,void 0,function*(){if(!this.cardFields)throw new Vt(Tt.PaymentNotInitialized);try{const i=yield this.cardFields.tokenize();return null===(t=null===(e=this.formOptions)||void 0===e?void 0:e.onValidate)||void 0===t||t.call(e,{isValid:!0,errors:{}}),{nonce:i.nonce,bin:null===(n=i.details)||void 0===n?void 0:n.bin}}catch(e){if(Al(e)){const t=this.mapTokenizeError(e,!0);if(t)throw null===(r=null===(i=this.formOptions)||void 0===i?void 0:i.onValidate)||void 0===r||r.call(i,{isValid:!1,errors:t}),new Ki(t)}throw e}})}createHostedFields(e){return Tl(this,void 0,void 0,function*(){const t=yield this.getClient(),n=yield this.braintreeScriptLoader.loadHostedFields(),i=this.braintreeSDKVersionManager.getSDKVersion()===ln?Object.assign(Object.assign({},e),{preventCursorJumps:!0}):e;return n.create(Object.assign(Object.assign({},i),{client:t}))})}getClient(){return Tl(this,void 0,void 0,function*(){if(!this.clientToken)throw new Vt(Tt.PaymentNotInitialized);if(!this.client){const e=yield this.braintreeScriptLoader.loadClient();this.client=e.create({authorization:this.clientToken})}return this.client})}mapBillingAddress(e){return{countryName:e.country,postalCode:e.postalCode,streetAddress:e.address2?`${e.address1} ${e.address2}`:e.address1}}mapFieldOptions(e,t){if(El(e)){const n={};return null==t||t.forEach(e=>{(e=>Object.values(wn).includes(e))(e)&&(n[e]=!1)}),(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)({number:Object.assign({container:`#${e.cardNumber.containerId}`,placeholder:e.cardNumber.placeholder,internalLabel:e.cardNumber.accessibilityLabel},Object.keys(n).length>0?{supportedCardBrands:n}:{}),expirationDate:{container:`#${e.cardExpiry.containerId}`,placeholder:e.cardExpiry.placeholder,internalLabel:e.cardExpiry.accessibilityLabel},cvv:e.cardCode&&{container:`#${e.cardCode.containerId}`,placeholder:e.cardCode.placeholder,internalLabel:e.cardCode.accessibilityLabel},cardholderName:{container:`#${e.cardName.containerId}`,placeholder:e.cardName.placeholder,internalLabel:e.cardName.accessibilityLabel}},lodash__WEBPACK_IMPORTED_MODULE_5__.isNil)}return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)({number:e.cardNumberVerification&&{container:`#${e.cardNumberVerification.containerId}`,placeholder:e.cardNumberVerification.placeholder},cvv:e.cardCodeVerification&&{container:`#${e.cardCodeVerification.containerId}`,placeholder:e.cardCodeVerification.placeholder}},lodash__WEBPACK_IMPORTED_MODULE_5__.isNil)}mapStyleOptions(e){const t=(e={})=>(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)({color:e.color,\"font-family\":e.fontFamily,\"font-size\":e.fontSize,\"font-weight\":e.fontWeight},lodash__WEBPACK_IMPORTED_MODULE_5__.isNil);return{input:t(e.default),\".invalid\":t(e.error),\":focus\":t(e.focus)}}mapFieldType(e){switch(e){case\"number\":return this.type===kl.StoredCardVerification?Pn.CardNumberVerification:Pn.CardNumber;case\"expirationDate\":return Pn.CardExpiry;case\"cvv\":return this.type===kl.StoredCardVerification?Pn.CardCodeVerification:Pn.CardCode;case\"cardholderName\":return Pn.CardName;default:throw new Error(\"Unexpected field type\")}}mapErrors(e){const t={};if(e)for(const[n,i]of Object.entries(e))if(i&&this.isValidParam(n)){const{isValid:e,isEmpty:r,isPotentiallyValid:o}=i;t[n]={isValid:e,isEmpty:r,isPotentiallyValid:o}}return t}mapValidationErrors(e){return Object.keys(e).reduce((t,n)=>{var i;return Object.assign(Object.assign({},t),{[this.mapFieldType(n)]:(null===(i=e[n])||void 0===i?void 0:i.isValid)?void 0:[this.createInvalidError(this.mapFieldType(n))]})},{})}mapTokenizeError(e,t=!1){var n,i;if(\"HOSTED_FIELDS_FIELDS_EMPTY\"===e.code){const e=[this.createRequiredError(this.mapFieldType(\"cvv\"))];return t?{[this.mapFieldType(\"cvv\")]:e}:{[this.mapFieldType(\"cvv\")]:e,[this.mapFieldType(\"expirationDate\")]:[this.createRequiredError(this.mapFieldType(\"expirationDate\"))],[this.mapFieldType(\"number\")]:[this.createRequiredError(this.mapFieldType(\"number\"))],[this.mapFieldType(\"cardholderName\")]:[this.createRequiredError(this.mapFieldType(\"cardholderName\"))]}}return null===(i=null===(n=e.details)||void 0===n?void 0:n.invalidFieldKeys)||void 0===i?void 0:i.reduce((e,t)=>{const n=this.mapFieldType(t);return Object.assign(Object.assign({},e),{[n]:[this.createInvalidError(n)]})},{})}createRequiredError(e){var t;return{fieldType:e,message:null!==(t={[Pn.CardCode]:\"CVV is required\",[Pn.CardCodeVerification]:\"CVV is required\",[Pn.CardNumber]:\"Credit card number is required\",[Pn.CardNumberVerification]:\"Credit card number is required\",[Pn.CardExpiry]:\"Expiration date is required\",[Pn.CardName]:\"Full name is required\"}[e])&&void 0!==t?t:\"Field is required\",type:\"required\"}}createInvalidError(e){var t,n,i,r;const o={[Pn.CardCode]:{message:\"Invalid card code\",type:\"invalid_card_code\"},[Pn.CardCodeVerification]:{message:\"Invalid card code\",type:\"invalid_card_code\"},[Pn.CardNumber]:{message:\"Invalid card number\",type:\"invalid_card_number\"},[Pn.CardNumberVerification]:{message:\"Invalid card number\",type:\"invalid_card_number\"},[Pn.CardExpiry]:{message:\"Invalid card expiry\",type:\"invalid_card_expiry\"},[Pn.CardName]:{message:\"Invalid card name\",type:\"invalid_card_name\"}};return{fieldType:e,message:null!==(n=null===(t=o[e])||void 0===t?void 0:t.message)&&void 0!==n?n:\"Invalid field\",type:null!==(r=null===(i=o[e])||void 0===i?void 0:i.type)&&void 0!==r?r:\"invalid\"}}isValidForm(e){return Object.keys(e.fields).every(t=>{var n;return null===(n=e.fields[t])||void 0===n?void 0:n.isValid})}isValidParam(e){return[\"number\",\"cvv\",\"expirationDate\",\"postalCode\",\"cardholderName\",\"cardType\"].includes(e)}}const Ml=nn(e=>{const t=window,n=new pn(e),i=new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),t,n),r=new or(i,t),o=new Dl(i,n);return new Ol(e,r,o)},[{id:\"braintree\"}]);var zl,Nl=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})},xl=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class Fl{constructor(e){this._paymentIntegrationService=e}execute(e,t){var n,i;return this._isHostedPaymentFormEnabled(null===(n=e.payment)||void 0===n?void 0:n.methodId,null===(i=e.payment)||void 0===i?void 0:i.gatewayId)&&this._shouldRenderHostedForm?this._executeWithHostedForm(e,t):this._executeWithoutHostedForm(e,t)}initialize(e){if(!this._isHostedPaymentFormEnabled(null==e?void 0:e.methodId,null==e?void 0:e.gatewayId)||!this._isHostedFieldAvailable(e))return this._shouldRenderHostedForm=!1,Promise.resolve();const t=e&&e.creditCard&&e.creditCard.form,n=this._paymentIntegrationService.getState(),{paymentSettings:{bigpayBaseUrl:i=\"\"}={}}=n.getStoreConfigOrThrow();if(!t)throw new rn;const r=this._paymentIntegrationService.createHostedForm(i,t);return r.attach().then(()=>(this._shouldRenderHostedForm=!0,this._hostedForm=r,Promise.resolve()))}deinitialize(){return this._hostedForm&&this._hostedForm.detach(),Promise.resolve()}finalize(){return Promise.reject(new _d)}_executeWithoutHostedForm(e,t){return Nl(this,void 0,void 0,function*(){const{payment:n}=e,i=xl(e,[\"payment\"]),r=n&&n.paymentData;if(!n||!r)throw new Yi([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:r}))})}_executeWithHostedForm(e,t){return Nl(this,void 0,void 0,function*(){const{payment:n}=e,i=xl(e,[\"payment\"]),r=this._hostedForm;if(!r)throw new Vt(Tt.PaymentNotInitialized);if(!n||!n.methodId)throw new Yi([\"payment.methodId\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield r.validate().then(()=>r.submit(n))})}_isHostedPaymentFormEnabled(e,t){return!!e&&!0===this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}_isHostedFieldAvailable(e){return!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.values)(e&&e.creditCard&&e.creditCard.form.fields).every(lodash__WEBPACK_IMPORTED_MODULE_5__.isNil)}}!function(e){e.OffsiteRedirect=\"offsite_redirect\"}(zl||(zl={}));class Rl extends Fl{constructor(e){super(e),this.paymentIntegrationService=e}finalize(e){const t=this.paymentIntegrationService.getState();return t.getOrder()&&t.getPaymentStatus()===Hc.FINALIZE&&this.paymentIntegrationService.finalizeOrder(e),Promise.reject(new _d)}_executeWithHostedForm(e,t){return n=this,i=void 0,o=function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),r=this._hostedForm;if(!r)throw new Vt(Tt.PaymentNotInitialized);if(!n||!n.methodId)throw new Yi([\"payment.methodId\"]);try{yield r.validate(),yield this.paymentIntegrationService.submitOrder(i,t),yield r.submit(n)}catch(e){return this._processResponse(e)}this.paymentIntegrationService.loadCurrentOrder()},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}_processResponse(e){if(!Xr(e))return Promise.reject(e);const t=e.body.additional_action_required;return t&&t.type===zl.OffsiteRedirect?this._performRedirect(t):Promise.reject(e)}_performRedirect(e){return new Promise(()=>{window.location.replace(e.data.redirect_url)})}}class Ll extends Rl{_executeWithoutHostedForm(e,t){return n=this,i=void 0,o=function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),r=n&&n.paymentData;if(!n||!r)throw new Yi([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:Object.assign(Object.assign({},r),{formattedPayload:this._createFormattedPayload(n.methodId,r)})}))}catch(e){return this._processResponse(e)}},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}_createFormattedPayload(e,t){if(\"fawry\"===e&&\"customerMobile\"in t&&\"customerEmail\"in t){const e=t;return{customerMobile:e.customerMobile,customerEmail:e.customerEmail}}}}const Bl=nn(e=>new Ll(e),[{gateway:\"checkoutcom\",id:\"fawry\"}]);function jl(e){return Xr(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"three_d_secure_required\"})}var Ul=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})},ql=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class Vl extends Fl{constructor(e,t){super(e),this.paymentIntegrationService=e,this.formPoster=t}finalize(e){const t=this.paymentIntegrationService.getState();return t.getOrder()&&t.getPaymentStatus()===Hc.FINALIZE&&this.paymentIntegrationService.finalizeOrder(e),Promise.reject(new _d)}_executeWithoutHostedForm(e,t){return Ul(this,void 0,void 0,function*(){const{payment:n}=e,i=ql(e,[\"payment\"]),r=n&&n.paymentData;if(!n||!r)throw new Yi([\"payment.paymentData\"]);yield this.paymentIntegrationService.submitOrder(i,t);try{yield this.paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:r}))}catch(e){return jl(e)?this._handleThreeDSecure(e):Promise.reject(e)}})}_executeWithHostedForm(e,t){return Ul(this,void 0,void 0,function*(){const{payment:n}=e,i=ql(e,[\"payment\"]),r=this._hostedForm;if(!r)throw new Vt(Tt.PaymentNotInitialized);if(!n||!n.methodId)throw new Yi([\"payment.methodId\"]);try{yield r.validate(),yield this.paymentIntegrationService.submitOrder(i,t),yield r.submit(n)}catch(e){return jl(e)?this._handleThreeDSecure(e):Promise.reject(e)}this.paymentIntegrationService.loadCurrentOrder()})}_handleThreeDSecure(e){const{acs_url:t,payer_auth_request:n,callback_url:i,merchant_data:r}=e.body.three_ds_result;return new Promise(()=>this.formPoster.postForm(t,{PaReq:n||null,TermUrl:i||null,MD:r||null}))}}const Gl=nn(e=>new Vl(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()),[{gateway:\"checkoutcom\",id:\"credit_card\"},{gateway:\"checkoutcom\",id:\"card\"}]);class Hl extends Rl{_executeWithoutHostedForm(e,t){return n=this,i=void 0,o=function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),r=null==n?void 0:n.paymentData;if(!n||!r)throw new Yi([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:Object.assign(Object.assign({},r),{formattedPayload:this._createFormattedPayload(n.methodId,r)})}))}catch(e){return this._processResponse(e)}},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}_createFormattedPayload(e,t){const n={iban:\"\",bic:\"\"},{iban:i,bic:r}=\"iban\"in t&&\"bic\"in t?t:n;return\"sepa\"===e&&document&&(n.iban=i,n.bic=r),n}}const $l=nn(e=>new Hl(e),[{gateway:\"checkoutcom\",id:\"sepa\"}]);class Wl extends Rl{_executeWithoutHostedForm(e,t){return n=this,i=void 0,o=function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),r=null==n?void 0:n.paymentData;if(!n||!r)throw new Yi([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:Object.assign(Object.assign({},r),{formattedPayload:this._createFormattedPayload(n.methodId,r)})}))}catch(e){return this._processResponse(e)}},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}_createFormattedPayload(e,t){if(\"ideal\"===e&&\"bic\"in t)return{bic:t.bic}}}const Yl=nn(e=>new Wl(e),[{gateway:\"checkoutcom\",id:\"ideal\"}]);const Kl=[\"boleto\",\"oxxo\",\"qpay\",\"ideal\"];class Jl extends Rl{_executeWithoutHostedForm(e,t){return n=this,i=void 0,o=function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),r=null==n?void 0:n.paymentData;if(!n||!r)throw new Yi([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:Object.assign(Object.assign({},r),{formattedPayload:this._createFormattedPayload(n.methodId,r)})}))}catch(e){return this._processResponse(e)}},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}_createFormattedPayload(e,t){const n={ccDocument:\"\"},i=\"ccDocument\"in t?t.ccDocument:\"\";return-1!==Kl.indexOf(e)&&i&&(n.ccDocument=i),n}}const Zl=nn(e=>new Jl(e),[{gateway:\"checkoutcom\"}]);var Ql=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Xl{constructor(e,t){this._paymentIntegrationService=e,this._clearpayScriptLoader=t}initialize(e){return Ql(this,void 0,void 0,function*(){const{getPaymentMethodOrThrow:t}=this._paymentIntegrationService.getState(),n=t(e.methodId,e.gatewayId);this._clearpaySdk=yield this._clearpayScriptLoader.load(n)})}deinitialize(){return this._clearpaySdk=void 0,Promise.resolve()}execute(e,t){return Ql(this,void 0,void 0,function*(){const{gatewayId:n,methodId:i}=e.payment||{};if(!n||!i)throw new Yi([\"payment.gatewayId\",\"payment.methodId\"]);const r=this._paymentIntegrationService.getState(),{isStoreCreditApplied:o}=r.getCheckoutOrThrow();yield this._paymentIntegrationService.applyStoreCredit(o),yield this._paymentIntegrationService.validateCheckout(r.getCheckout(),t);const{countryCode:a}=r.getBillingAddressOrThrow();if(!this._isCountrySupported(a))throw new rn(\"Unable to proceed because billing country is not supported.\");return yield this._loadPaymentMethod(n,i,t),yield this._redirectToClearpay(a,this._paymentIntegrationService.getState().getPaymentMethod(i,n)),new Promise(lodash__WEBPACK_IMPORTED_MODULE_5__.noop)})}finalize(e){var t,n,i;return Ql(this,void 0,void 0,function*(){const r=this._paymentIntegrationService.getState(),o=r.getPaymentId(),a=r.getContextConfig();if(!o)throw new jt(kt.MissingCheckout);if(!a||!a.payment.token)throw new jt(kt.MissingCheckoutConfig);const s={methodId:o.providerId,paymentData:{nonce:a.payment.token}};yield this._paymentIntegrationService.submitOrder({},e);try{yield this._paymentIntegrationService.submitPayment(s)}catch(e){if(yield this._paymentIntegrationService.forgetCheckout(o.providerId),yield this._paymentIntegrationService.loadPaymentMethods(),Xr(e))throw new Nd(null===(i=null===(n=null===(t=e.body)||void 0===t?void 0:t.errors)||void 0===n?void 0:n[0])||void 0===i?void 0:i.message)}})}_redirectToClearpay(e,t){return Ql(this,void 0,void 0,function*(){if(!this._clearpaySdk||!t||!t.clientToken)throw new Vt(Tt.PaymentNotInitialized);return this._clearpaySdk.initialize({countryCode:e}),this._clearpaySdk.redirect({token:t.clientToken}),Promise.resolve()})}_isCountrySupported(e){return\"GB\"===e}_loadPaymentMethod(e,t,n){var i;return Ql(this,void 0,void 0,function*(){try{return yield this._paymentIntegrationService.loadPaymentMethod(e,Object.assign(Object.assign({},n),{params:Object.assign(Object.assign({},null==n?void 0:n.params),{method:t})}))}catch(e){if(e instanceof qn&&422===(null===(i=e.body)||void 0===i?void 0:i.status))throw new rn(\"Clearpay can't process your payment for this order, please try another payment method\");throw e}})}}class eu{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(e){return t=this,n=void 0,r=function*(){if(yield this._scriptLoader.loadScript(this._getScriptUrl(e.config.testMode)),!this._window.AfterPay)throw new Xt;return this._window.AfterPay},new((i=void 0)||(i=Promise))(function(e,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((r=r.apply(t,n||[])).next())});// removed by dead control flow\n{ var t, n, i, r; }}_getScriptUrl(e){return e?\"//portal.sandbox.clearpay.co.uk/afterpay-async.js\":\"//portal.clearpay.co.uk/afterpay-async.js\"}}const tu=nn(e=>new Xl(e,new eu((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),[{gateway:\"clearpay\"},{id:\"clearpay\"}]),nu=nn(e=>new Fl(e),[{default:!0}]);var iu=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class ru{constructor(e,t){this._paymentIntegrationService=e,this._cardinalClient=t}prepare(e){return iu(this,void 0,void 0,function*(){yield this._cardinalClient.load(e.id,e.config.testMode),yield this._cardinalClient.configure(yield this._getClientToken(e))})}start(e,t,n,i){return iu(this,void 0,void 0,function*(){const{getCardInstrument:r,getPaymentMethodOrThrow:o}=this._paymentIntegrationService.getState(),{payment:{methodId:a=\"\",paymentData:s={}}={}}=t,d=Sd(s)&&r(s.instrumentId),c=d?d.iin:i&&i.getBin();c&&(yield this._cardinalClient.runBinProcess(c));try{return yield e((0,lodash__WEBPACK_IMPORTED_MODULE_5__.merge)(t,{payment:{paymentData:{threeDSecure:{token:o(a).clientToken}}}}),n)}catch(e){if(!Xr(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"three_d_secure_required\"}))throw e;const n=yield this._cardinalClient.getThreeDSecureData(e.body.three_ds_result,this._getOrderData());if(!i)return void(yield this._paymentIntegrationService.submitPayment((0,lodash__WEBPACK_IMPORTED_MODULE_5__.merge)(t.payment,{paymentData:{threeDSecure:n}})));yield i.submit((0,lodash__WEBPACK_IMPORTED_MODULE_5__.merge)(t.payment,{paymentData:{threeDSecure:n}}))}})}_getClientToken(e){return iu(this,void 0,void 0,function*(){return e.clientToken?e.clientToken:(yield this._paymentIntegrationService.loadPaymentMethod(e.id),this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.id).clientToken||\"\")})}_getOrderData(){const e=this._paymentIntegrationService.getState(),t=e.getBillingAddressOrThrow(),n=e.getShippingAddress(),i=e.getCheckoutOrThrow(),r=e.getOrderOrThrow();return{billingAddress:t,shippingAddress:n,currencyCode:i.cart.currency.code,id:r.orderId.toString(),amount:i.cart.cartAmount}}}const ou=[100004,1010,1011,1020];var au,su,du,cu,lu,uu,hu;!function(e){e.SetupCompleted=\"payments.setupComplete\",e.Validated=\"payments.validated\"}(au||(au={})),function(e){e.Init=\"init\",e.Complete=\"complete\",e.Confirm=\"confirm\"}(su||(su={})),function(e){e.Success=\"SUCCESS\",e.NoAction=\"NOACTION\",e.Failure=\"FAILURE\",e.Error=\"ERROR\"}(du||(du={})),function(e){e.CCA=\"CCA\",e.Paypal=\"Paypal\",e.Wallet=\"Wallet\",e.VisaCheckout=\"VisaCheckout\",e.ApplePay=\"ApplePay\",e.DiscoverWallet=\"DiscoverWallet\"}(cu||(cu={})),function(e){e.BinProcess=\"bin.process\"}(lu||(lu={})),function(e){e.CCA=\"cca\"}(uu||(uu={})),function(e){e.Yes=\"Y\",e.No=\"N\"}(hu||(hu={}));class pu{constructor(e){this._scriptLoader=e,this._provider=\"\",this._testMode=!1,this._configurationToken=\"\"}load(e,t=!1){return this._provider=e,this._testMode=t,this._sdk||(this._sdk=this._scriptLoader.load(e,t)),this._sdk.then(lodash__WEBPACK_IMPORTED_MODULE_5__.noop)}configure(e){if(this._configurationToken){if(this._configurationToken===e)return Promise.resolve();this._sdk=this._scriptLoader.load(`${this._provider}.${Date.now()}`,this._testMode)}return this._getClientSDK().then(t=>new Promise((n,i)=>{t.on(au.SetupCompleted,()=>{t.off(au.SetupCompleted),t.off(au.Validated),this._configurationToken=e,n()}),t.on(au.Validated,e=>{t.off(au.SetupCompleted),t.off(au.Validated),e.ActionCode===du.Error&&((0,lodash__WEBPACK_IMPORTED_MODULE_5__.includes)(ou,e.ErrorNumber)&&i(new jt(kt.MissingPaymentMethod)),i(new Li(e.ErrorDescription)))}),t.setup(su.Init,{jwt:e})}))}runBinProcess(e){return this._getClientSDK().then(t=>t.trigger(lu.BinProcess,e).catch(lodash__WEBPACK_IMPORTED_MODULE_5__.noop)).then(e=>{if(!e||!e.Status)throw new Vt(Tt.PaymentNotInitialized)})}getThreeDSecureData(e,t){return this._getClientSDK().then(n=>new Promise((i,r)=>{n.on(au.Validated,(e,t)=>{if(n.off(au.Validated),!t)return r(new Li(e.ErrorDescription?e.ErrorDescription:\"An error was encountered while processing the transaction.\"));if(!e.ActionCode)return i({token:t});switch(e.ActionCode){case du.Success:return i({token:t});case du.NoAction:return e.ErrorNumber>0?r(new Li(e.ErrorDescription)):e.Payment&&e.Payment.ExtendedData&&e.Payment.ExtendedData.SignatureVerification===hu.Yes?i({token:t}):r(new Li(\"Transaction signature could not be validated.\"));case du.Failure:return r(new Li(\"User failed authentication or an error was encountered while processing the transaction.\"));case du.Error:return r(new Li(e.ErrorDescription))}});const o={AcsUrl:e.acs_url,Payload:e.merchant_data},a=this._mapToPartialOrder(t,e.payer_auth_request);n.continue(uu.CCA,o,a)}))}_mapToPartialOrder(e,t){const n={BillingAddress:this._mapToCardinalAddress(e.billingAddress)};return e.paymentData&&(n.Account=this._mapToCardinalAccount(e.paymentData)),e.billingAddress.email&&(n.Email1=e.billingAddress.email),e.shippingAddress&&(n.ShippingAddress=this._mapToCardinalAddress(e.shippingAddress)),{Consumer:n,OrderDetails:{OrderNumber:e.id,Amount:e.amount,CurrencyCode:e.currencyCode,OrderChannel:\"S\",TransactionId:t}}}_mapToCardinalAccount(e){return{AccountNumber:Number(e.ccNumber),ExpirationMonth:Number(e.ccExpiry.month),ExpirationYear:Number(e.ccExpiry.year),NameOnAccount:e.ccName,CardCode:Number(e.ccCvv)}}_mapToCardinalAddress(e){const t={FirstName:e.firstName,LastName:e.lastName,Address1:e.address1,City:e.city,State:e.stateOrProvince,PostalCode:e.postalCode,CountryCode:e.countryCode};return e.address2&&(t.Address2=e.address2),e.phone&&(t.Phone1=e.phone),t}_getClientSDK(){if(!this._sdk)throw new Vt(Tt.PaymentNotInitialized);return this._sdk}}class mu{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(e,t){const n=t?\"https://songbirdstag.cardinalcommerce.com/edge/v1/songbird.js\":\"https://songbird.cardinalcommerce.com/edge/v1/songbird.js\";return this._scriptLoader.loadScript(`${n}?v=${e}`).then(()=>{if(!this._window.Cardinal)throw new Xt;return this._window.Cardinal})}}var yu=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class gu extends Fl{constructor(e,t){super(e),this._threeDSecureFlow=t}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return yu(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const{getPaymentMethodOrThrow:n}=this._paymentIntegrationService.getState(),i=n(e.methodId);i.config.is3dsEnabled&&(yield this._threeDSecureFlow.prepare(i))})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return yu(this,void 0,void 0,function*(){const{payment:{methodId:i=\"\"}={}}=e,{getPaymentMethodOrThrow:r}=this._paymentIntegrationService.getState();return r(i).config.is3dsEnabled?this._threeDSecureFlow.start(n.execute.bind(this),e,t,this._hostedForm):n.execute.call(this,e,t)})}}const vu=nn(e=>new gu(e,new ru(e,new pu(new mu((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())))),[{id:\"cybersource\"}]);var fu=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Su{constructor(e,t){this._paymentIntegrationService=e,this._cardinalClient=t}prepare(e){return fu(this,void 0,void 0,function*(){yield this._cardinalClient.load(e.id,e.config.testMode)})}start(e,t,n,i){var r,o,a,s;return fu(this,void 0,void 0,function*(){const{getCardInstrument:d}=this._paymentIntegrationService.getState(),{payment:c={methodId:\"\"}}=t,{paymentData:l={}}=c;try{return yield e(t,n)}catch(e){if(Xr(e)&&\"additional_action_required\"===(null===(r=e.body)||void 0===r?void 0:r.status)){const t=null===(a=null===(o=e.body.additional_action_required)||void 0===o?void 0:o.data)||void 0===a?void 0:a.token,n=null===(s=e.body.three_ds_result)||void 0===s?void 0:s.payer_auth_request;yield this._cardinalClient.configure(t);const r=this._getBin(l,d,i);r&&(yield this._cardinalClient.runBinProcess(r));try{return yield this._submitPayment(c,{xid:n},i)}catch(e){if(Xr(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"three_d_secure_required\"})){const t=e.body.three_ds_result,n=null==t?void 0:t.payer_auth_request;return yield this._cardinalClient.getThreeDSecureData(t,this._getOrderData()),this._submitPayment(c,{token:n},i)}throw e}}throw e}})}_getOrderData(){const e=this._paymentIntegrationService.getState(),t=e.getBillingAddressOrThrow(),n=e.getShippingAddress(),{cart:{currency:{code:i},cartAmount:r}}=e.getCheckoutOrThrow();return{billingAddress:t,shippingAddress:n,currencyCode:i,id:e.getOrderOrThrow().orderId.toString(),amount:r}}_submitPayment(e,t,n){return fu(this,void 0,void 0,function*(){const i=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.merge)({},e,{paymentData:{threeDSecure:t}});n||(yield this._paymentIntegrationService.submitPayment(i)),yield null==n?void 0:n.submit(i)})}_getBin(e,t,n){const i=Sd(e)&&t(e.instrumentId),r=function(e){const t=e;return!Sd(t)&&\"string\"==typeof t.ccName&&\"string\"==typeof t.ccNumber&&\"object\"==typeof t.ccExpiry&&\"string\"==typeof t.ccExpiry.month&&\"string\"==typeof t.ccExpiry.year}(e)&&e.ccNumber,o=n?n.getBin():r;return(i?i.iin:o)||\"\"}}var _u=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class wu extends Fl{constructor(e,t){super(e),this._threeDSecureFlow=t}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return _u(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const{getPaymentMethodOrThrow:n}=this._paymentIntegrationService.getState(),i=n(e.methodId);i.config.is3dsEnabled&&(yield this._threeDSecureFlow.prepare(i))})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return _u(this,void 0,void 0,function*(){const{payment:{methodId:i=\"\"}={}}=e,{getPaymentMethodOrThrow:r}=this._paymentIntegrationService.getState();return r(i).config.is3dsEnabled?this._threeDSecureFlow.start(n.execute.bind(this),e,t,this._hostedForm):n.execute.call(this,e,t)})}}const Cu=nn(e=>new wu(e,new Su(e,new pu(new mu((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())))),[{id:\"cybersourcev2\"}]);class Iu{constructor(e,t){this._formPoster=e,this._paymentIntegrationService=t}execute(e,t){return n=this,i=void 0,o=function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),r=n&&n.paymentData;if(!n||!r)throw new Yi([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:r}))}catch(e){if(!Xr(e)||\"object\"!=typeof(o=e.body)||null===o||!(\"additional_action_required\"in o)||!this._isAdditionalActionRequired(e.body))return Promise.reject(e);const{body:{additional_action_required:{data:{redirect_url:t}}}}=e;return new Promise(()=>{this.redirectUrl(t)})}var o},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}finalize(){return Promise.reject(new _d)}initialize(){return Promise.resolve()}deinitialize(){return Promise.resolve()}redirectUrl(e){return this._formPoster.postForm(e,{})}_isAdditionalActionRequired(e){const{additional_action_required:t,status:n}=e;return\"additional_action_required\"===n&&t&&\"offsite_redirect\"===t.type}}const bu=nn(e=>new Iu((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)(),e),[{id:\"laybuy\"}]);function Pu(e){return\"object\"==typeof e&&null!==e&&\"errors\"in e&&Array.isArray(e.errors)&&\"code\"in e.errors[0]&&\"string\"==typeof e.errors[0].code&&\"provider_data\"in e&&\"object\"==typeof e.provider_data}var Ou=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Eu extends jr{constructor(e,t){super(\"adyen\",e),this._scriptLoader=t,this._service=e}initialize(e,t,n){const i=Object.create(null,{initialize:{get:()=>super.initialize},getPaymentMethod:{get:()=>super.getPaymentMethod}});return Ou(this,void 0,void 0,function*(){yield i.initialize.call(this,e,t,n);const r=i.getPaymentMethod.call(this),o=this._service.getState().getStoreConfig();if(!o)throw new jt(kt.MissingCheckoutConfig);return this._adyenClient=yield this._scriptLoader.load({environment:r.config.testMode?\"test\":\"live\",locale:o.storeProfile.storeLanguage}),Promise.resolve()})}getNonce(e){const t=Object.create(null,{getNonce:{get:()=>super.getNonce},getPaymentMethod:{get:()=>super.getPaymentMethod}});return Ou(this,void 0,void 0,function*(){const n=yield t.getNonce.call(this,e),i=t.getPaymentMethod.call(this);return JSON.stringify({type:i.method,googlePayToken:n,browser_info:Do()})})}processAdditionalAction(e){return Ou(this,void 0,void 0,function*(){if(!Xr(e)||!Pu(e.body))throw e;const t=yield this._handleAction(e.body.provider_data);try{return yield this._service.submitPayment(t)}catch(e){return this.processAdditionalAction(e)}})}_handleAction(e){return new Promise((t,n)=>{const i=JSON.parse(e.action);this._getAdyenClient().createFromAction(i,{onAdditionalDetails:e=>{const n={methodId:i.paymentMethodType,paymentData:{nonce:JSON.stringify(e.data)}};t(n)},size:\"05\",onError:e=>n(e)}).mount(\"body\"),n(new Mn)})}_getAdyenClient(){if(!this._adyenClient)throw new Vt(Tt.PaymentNotInitialized);return this._adyenClient}}var Au=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class ku{constructor(e,t){this._paymentIntegrationService=e,this._googlePayPaymentProcessor=t,this._loadingIndicator=new Ba({containerStyles:Ra})}initialize(e){var t;return Au(this,void 0,void 0,function*(){if(!(null==e?void 0:e.methodId)||!qr(e.methodId))throw new rn('Unable to proceed because \"methodId\" is not a valid key.');this._methodId=e.methodId;const n=e[this._getMethodId()];if(!(null==n?void 0:n.walletButton))throw new rn(\"Unable to proceed without valid options.\");const{walletButton:i,loadingContainerId:r}=n,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(n,[\"walletButton\",\"loadingContainerId\"]);this._loadingIndicatorContainer=r,yield this._paymentIntegrationService.loadPaymentMethod(this._getMethodId());const a=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(this._getMethodId());yield this._googlePayPaymentProcessor.initialize(()=>a,this._getGooglePayClientOptions(null===(t=a.initializationData)||void 0===t?void 0:t.storeCountry)),this._addPaymentButton(i,o)})}execute({payment:e}){return Au(this,void 0,void 0,function*(){if(!(null==e?void 0:e.methodId))throw new Yi([\"payment\"]);yield this._paymentIntegrationService.submitOrder();const t=yield this._googlePayPaymentProcessor.getNonce(e.methodId),n=yield this._googlePayPaymentProcessor.extraPaymentData();try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},e),{paymentData:Object.assign({nonce:t},n)}))}catch(t){yield this._googlePayPaymentProcessor.processAdditionalAction(t,e.methodId)}})}finalize(){return Promise.reject(new _d)}deinitialize(){var e;return this._clickListener&&(null===(e=this._paymentButton)||void 0===e||e.removeEventListener(\"click\",this._clickListener)),this._paymentButton=void 0,this._clickListener=void 0,this._methodId=void 0,Promise.resolve()}_addPaymentButton(e,t){if(this._paymentButton)return;const n=document.getElementById(e);if(!n)throw new rn(\"Unable to proceed without a walletButton.\");this._paymentButton=n,this._clickListener=this._handleClick(t),this._paymentButton.addEventListener(\"click\",this._clickListener)}_handleClick({onPaymentSelect:e,onError:t}){return n=>Au(this,void 0,void 0,function*(){n.preventDefault();try{yield this._googlePayPaymentProcessor.initializeWidget(),yield this._interactWithPaymentSheet()}catch(e){let n=e;if(this._toggleLoadingIndicator(!1),Ur(e)){if(\"CANCELED\"===e.statusCode)throw new Mn;n=new Li(JSON.stringify(e))}throw null==t||t(new Li(\"An error occurred while requesting your Google Pay payment details.\")),n}null==e||e()})}_interactWithPaymentSheet(){return Au(this,void 0,void 0,function*(){const e=yield this._googlePayPaymentProcessor.showPaymentSheet();this._toggleLoadingIndicator(!0);const t=this._googlePayPaymentProcessor.mapToBillingAddressRequestBody(e);t&&(yield this._paymentIntegrationService.updateBillingAddress(t)),yield this._googlePayPaymentProcessor.setExternalCheckoutXhr(this._getMethodId(),e),yield this._paymentIntegrationService.loadCheckout(),yield this._paymentIntegrationService.loadPaymentMethod(this._getMethodId()),this._toggleLoadingIndicator(!1)})}_getMethodId(){return qt(this._methodId,()=>new Vt(Tt.PaymentNotInitialized))}_getIsSignedInOrThrow(){return Au(this,void 0,void 0,function*(){try{return!!(yield this._googlePayPaymentProcessor.getNonce(this._getMethodId()))}catch(e){if(e instanceof jt&&e.subtype===kt.MissingPaymentToken)return!1;throw e}})}_handleOfferTrigger(e){return Au(this,void 0,void 0,function*(){let t=!1,n=\"Sign in to Google Pay first to apply or remove promo codes.\";try{t=yield this._getIsSignedInOrThrow()}catch(e){e instanceof jt&&(n=e.message)}if(t){const{newOfferInfo:t,error:n}=yield this._googlePayPaymentProcessor.handleCoupons(e);return{newOfferInfo:t,error:n}}return{error:{reason:xr.OFFER_INVALID,message:n,intent:Fr.OFFER}}})}_getGooglePayClientOptions(e){return{paymentDataCallbacks:{onPaymentDataChanged:({callbackTrigger:t,offerData:n})=>Au(this,void 0,void 0,function*(){const i=this._paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features[\"PI-2875.googlepay_coupons_handling\"]||!1;if(t!==Fr.INITIALIZE&&(!i||t!==Fr.OFFER))return;const{offerChangeTriggers:r}=this._googlePayPaymentProcessor.getCallbackTriggers(),{newOfferInfo:o,error:a}=r.includes(t)?yield this._handleOfferTrigger(n):{},s=a;yield this._paymentIntegrationService.loadCheckout();const{getCheckoutOrThrow:d,getCartOrThrow:c}=this._paymentIntegrationService.getState(),{code:l,decimalPlaces:u}=c().currency,h=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.round)(d().outstandingBalance,u).toFixed(u);return Object.assign(Object.assign({newTransactionInfo:Object.assign(Object.assign({},e&&{countryCode:e}),{currencyCode:l,totalPriceStatus:Mr.FINAL,totalPrice:h})},o&&{newOfferInfo:o}),s&&{error:s})})}}}_toggleLoadingIndicator(e){e&&this._loadingIndicatorContainer?this._loadingIndicator.show(this._loadingIndicatorContainer):this._loadingIndicator.hide()}}const Tu=nn(e=>new ku(e,new $r(Yr(),new Eu(e,new vd((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getStylesheetLoader)())),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepayadyenv2\"}]);var Du=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Mu extends jr{constructor(e,t){super(\"adyen\",e),this._scriptLoader=t,this._service=e}initialize(e,t,n){const i=Object.create(null,{initialize:{get:()=>super.initialize},getPaymentMethod:{get:()=>super.getPaymentMethod}});return Du(this,void 0,void 0,function*(){yield i.initialize.call(this,e,t,n);const r=i.getPaymentMethod.call(this),o=this._service.getState().getStoreConfig();if(!o)throw new jt(kt.MissingCheckoutConfig);return this._adyenClient=yield this._scriptLoader.load({environment:r.config.testMode?\"test\":\"live\",locale:o.storeProfile.storeLanguage}),Promise.resolve()})}processAdditionalAction(e){return Du(this,void 0,void 0,function*(){if(!Xr(e)||!Pu(e.body))throw e;const t=yield this._handleAction(e.body.provider_data);try{return yield this._service.submitPayment(t)}catch(e){return this.processAdditionalAction(e)}})}getNonce(e){const t=Object.create(null,{getNonce:{get:()=>super.getNonce},getPaymentMethod:{get:()=>super.getPaymentMethod}});return Du(this,void 0,void 0,function*(){const n=yield t.getNonce.call(this,e),i=t.getPaymentMethod.call(this);return JSON.stringify({type:i.method,googlePayToken:n,browser_info:Do()})})}_handleAction(e){return new Promise((t,n)=>{const i=JSON.parse(e.action);this._getAdyenClient().createFromAction(i,{onAdditionalDetails:e=>{const n={methodId:i.paymentMethodType,paymentData:{nonce:JSON.stringify(e.data)}};t(n)},size:\"05\",onError:e=>n(e)}).mount(\"body\"),n(new Mn)})}_getAdyenClient(){if(!this._adyenClient)throw new Vt(Tt.PaymentNotInitialized);return this._adyenClient}}const zu=nn(e=>new ku(e,new $r(Yr(),new Mu(e,new bd((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getStylesheetLoader)())),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepayadyenv3\"}]),Nu=nn(e=>new ku(e,new $r(Yr(),new Zr(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepayauthorizenet\"}]),xu=nn(e=>{const t=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)();return new ku(e,new $r(Yr(),new no(e,t),t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()))},[{id:\"googlepaycheckoutcom\"}]),Fu=nn(e=>new ku(e,new $r(Yr(),new ro(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaycybersourcev2\"},{id:\"googlepaybnz\"}]),Ru=nn(e=>new ku(e,new $r(Yr(),new so(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepayorbital\"}]),Lu=nn(e=>new ku(e,new $r(Yr(),new ho(e,new mo((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaystripe\"},{id:\"googlepaystripeupe\"},{id:\"googlepaystripeocs\"}]),Bu=nn(e=>new ku(e,new $r(Yr(),new vo(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepayworldpayaccess\"}]),ju=nn(e=>{const t=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),i=window,r=new pn(e),o=new En(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),i,r));return new ku(e,new $r(Yr(),new _o(e,o),t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()))},[{id:\"googlepaybraintree\"}]);var Uu,qu;!function(e){e.Approved=\"APPROVED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\"}(Uu||(Uu={})),function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(qu||(qu={}));var Vu=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Gu extends ku{constructor(e,t,n,i){super(e,t),this._payPalCommerceSdk=n,this._requestSender=i}execute({payment:e}){return Vu(this,void 0,void 0,function*(){if(!(null==e?void 0:e.methodId))throw new Yi([\"payment\"]);const t=this._paymentIntegrationService.getState(),n=t.getCartOrThrow().id,{initializationData:i}=t.getPaymentMethodOrThrow(this._getMethodId()),{orderId:r}=yield this.getOrderId(n),{card_information:o}=i||{},a=yield this._googlePayPaymentProcessor.getNonce(e.methodId),s={tokenizationData:{type:\"PAYMENT_GATEWAY\",token:atob(a)},info:{cardNetwork:(null==o?void 0:o.type)||\"\",cardDetails:(null==o?void 0:o.number)||\"\"},type:\"CARD\"};yield this.confirmOrder(r,s),yield this._paymentIntegrationService.submitOrder();try{const t={formattedPayload:{method_id:e.methodId,paypal_account:{order_id:r}}};yield this._paymentIntegrationService.submitPayment({methodId:e.methodId,paymentData:t})}catch(e){yield this._googlePayPaymentProcessor.processAdditionalAction(e)}})}confirmOrder(e,t){return Vu(this,void 0,void 0,function*(){const n=this._paymentIntegrationService.getState(),i=n.getPaymentMethodOrThrow(this._getMethodId());if(!i.initializationData)throw new jt(kt.MissingPaymentMethod);const r=n.getCartOrThrow().currency.code,o=yield this._payPalCommerceSdk.getPayPalGooglePaySdk(i,r,!0),{status:a}=yield o.Googlepay().confirmOrder({orderId:e,paymentMethodData:t});if(a===Uu.PayerActionRequired)return yield o.Googlepay().initiatePayerAction({orderId:e}),Promise.resolve();if(a!==Uu.Approved)throw new rn(\"Payment is not approved.\");return Promise.resolve()})}getOrderId(e){return Vu(this,void 0,void 0,function*(){const t={cartId:e,shouldSaveInstrument:!1},{body:n}=yield this._requestSender.post(\"/api/storefront/payments/googlepaypaypalcommercecheckout\",{headers:Object.assign({\"X-API-INTERNAL\":Xn,\"Content-Type\":ti.Json},ni),body:t});return n})}}const Hu=nn(e=>{const t=new Io((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)());return new Gu(e,new $r(Yr(),new Oo(e,t),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()),t,(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)())},[{id:\"googlepaypaypalcommerce\"}]);var $u,Wu;!function(e){e.Approved=\"APPROVED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\"}($u||($u={})),function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(Wu||(Wu={}));var Yu=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Ku extends ku{constructor(e,t,n,i){super(e,t),this._payPalSdkHelper=n,this._requestSender=i}execute({payment:e}){return Yu(this,void 0,void 0,function*(){if(!(null==e?void 0:e.methodId))throw new Yi([\"payment\"]);const t=this._paymentIntegrationService.getState(),n=t.getCartOrThrow().id,{initializationData:i}=t.getPaymentMethodOrThrow(this._getMethodId()),{orderId:r}=yield this.getOrderId(n),{card_information:o}=i||{},a=yield this._googlePayPaymentProcessor.getNonce(e.methodId),s={tokenizationData:{type:\"PAYMENT_GATEWAY\",token:atob(a)},info:{cardNetwork:(null==o?void 0:o.type)||\"\",cardDetails:(null==o?void 0:o.number)||\"\"},type:\"CARD\"};yield this.confirmOrder(r,s),yield this._paymentIntegrationService.submitOrder();try{const t={formattedPayload:{method_id:e.methodId,paypal_account:{order_id:r}}};yield this._paymentIntegrationService.submitPayment({methodId:e.methodId,paymentData:t})}catch(e){yield this._googlePayPaymentProcessor.processAdditionalAction(e)}})}confirmOrder(e,t){return Yu(this,void 0,void 0,function*(){const n=this._paymentIntegrationService.getState(),i=n.getPaymentMethodOrThrow(this._getMethodId());if(!i.initializationData)throw new jt(kt.MissingPaymentMethod);const r=n.getCartOrThrow().currency.code,o=yield this._payPalSdkHelper.getPayPalGooglePaySdk(i,r,!0),{status:a}=yield o.Googlepay().confirmOrder({orderId:e,paymentMethodData:t});if(a===$u.PayerActionRequired)return yield o.Googlepay().initiatePayerAction({orderId:e}),Promise.resolve();if(a!==$u.Approved)throw new rn(\"Payment is not approved.\");return Promise.resolve()})}getOrderId(e){return Yu(this,void 0,void 0,function*(){const t={cartId:e,shouldSaveInstrument:!1},{body:n}=yield this._requestSender.post(\"/api/storefront/payments/googlepay_bigcommerce_paymentscheckout\",{headers:Object.assign({\"X-API-INTERNAL\":Xn,\"Content-Type\":ti.Json},ni),body:t});return n})}}const Ju=nn(e=>{const t=new wi((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)());return new Ku(e,new $r(Yr(),new ko(e,t),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()),t,(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)())},[{id:\"googlepay_bigcommerce_payments\"}]),Zu=nn(e=>new ku(e,new $r(Yr(),new zo(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaytdonlinemart\"}]);class Qu extends Bt{constructor(e,t,n){super(n||\"Payment cannot be processed for this order, please select another payment method\"),this.type=\"custom_provider_execute_error\",this.name=t,this.subtype=e}}class Xu{constructor(e,t){this.paymentIntegrationService=e,this.formPoster=t}execute(e,t){var n,i,r,o,a;return i=this,r=void 0,a=function*(){const{payment:i}=e,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!(null==i?void 0:i.methodId))throw new Yi([\"payment.methodId\"]);yield this.paymentIntegrationService.loadPaymentMethod(i.methodId,t);const o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i.methodId);if(!(null===(n=o.initializationData)||void 0===n?void 0:n.processable))throw new Qu(\"payment.humm_not_processable_error\",\"hummNotProcessableError\");yield this.paymentIntegrationService.submitOrder(r,t);try{yield this.paymentIntegrationService.submitPayment({methodId:i.methodId})}catch(e){return this.isOffsiteRedirectResponse(e)?this.handleOffsiteRedirectResponse(e):Promise.reject(e)}},new((o=void 0)||(o=Promise))(function(e,t){function n(e){try{d(a.next(e))}catch(e){t(e)}}function s(e){try{d(a.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o(function(e){e(i)})).then(n,s)}d((a=a.apply(i,r||[])).next())})}finalize(){return Promise.reject(new _d)}initialize(){return Promise.resolve()}deinitialize(){return Promise.resolve()}handleOffsiteRedirectResponse(e){const t=e.body.additional_action_required.data.redirect_url,n=e.body.provider_data;return new Promise(e=>{this.formPoster.postForm(t,JSON.parse(n),e)})}isOffsiteRedirectResponse(e){if(\"object\"!=typeof e||null===e)return!1;const t=e;if(!t.body)return!1;const n=t.body;return\"additional_action_required\"===n.status&&!!n.additional_action_required&&\"offsite_redirect\"===n.additional_action_required.type&&\"string\"==typeof n.provider_data}}const eh=nn(e=>new Xu(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()),[{id:\"humm\"}]),th=[\"AT\",\"BE\",\"CA\",\"CH\",\"CZ\",\"DE\",\"DK\",\"ES\",\"FI\",\"FR\",\"GB\",\"GR\",\"IE\",\"IT\",\"NL\",\"NO\",\"NZ\",\"PL\",\"PT\",\"SE\"],nh=[\"AU\"];var ih=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class rh{constructor(e,t){this.paymentIntegrationService=e,this.klarnaScriptLoader=t}initialize(e){return ih(this,void 0,void 0,function*(){this.klarnaCredit=yield this.klarnaScriptLoader.load(),this.unsubscribe=this.paymentIntegrationService.subscribe(t=>{t.isPaymentMethodInitialized({methodId:e.methodId,gatewayId:e.gatewayId})&&this.loadWidget(e)},e=>{const t=e.getCheckout();return t&&t.outstandingBalance},e=>{const t=e.getCheckout();return t&&t.coupons}),yield this.loadWidget(e)})}deinitialize(){return this.unsubscribe&&this.unsubscribe(),Promise.resolve()}execute(e,t){return ih(this,void 0,void 0,function*(){if(!e.payment)throw new rn('Unable to proceed because \"payload.payment\" argument is not provided.');const n=e.payment,{paymentData:i}=n,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(n,[\"paymentData\"]),{authorization_token:o}=yield this.authorize();yield this.paymentIntegrationService.initializePayment(r.methodId,{authorizationToken:o}),yield this.paymentIntegrationService.submitOrder(Object.assign(Object.assign({},e),{payment:r,useStoreCredit:e.useStoreCredit}),t)})}finalize(){return Promise.reject(new _d)}loadWidget(e){return ih(this,void 0,void 0,function*(){if(!e.klarna)throw new rn('Unable to load widget because \"options.klarna\" argument is not provided.');const{methodId:t,klarna:{container:n,onLoad:i}}=e;return yield this.paymentIntegrationService.loadPaymentMethod(t),new Promise(e=>{const r=this.paymentIntegrationService.getState().getPaymentMethod(t);if(!r)throw new jt(kt.MissingPaymentMethod);if(!this.klarnaCredit||!r.clientToken)throw new Vt(Tt.PaymentNotInitialized);this.klarnaCredit.init({client_token:r.clientToken}),this.klarnaCredit.load({container:n},t=>{i&&i(t),e(t)})})})}getUpdateSessionData(e,t){if(!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.includes)([...th,...nh],e.countryCode))return{};const n={billing_address:this.mapToKlarnaAddress(e,e.email)};return t&&(n.shipping_address=this.mapToKlarnaAddress(t,e.email)),n}needsStateCode(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.includes)(nh,e)}mapToKlarnaAddress(e,t){const n={street_address:e.address1,city:e.city,country:e.countryCode,given_name:e.firstName,family_name:e.lastName,postal_code:e.postalCode,region:this.needsStateCode(e.countryCode)?e.stateOrProvinceCode:e.stateOrProvince,email:t};return e.address2&&(n.street_address2=e.address2),e.phone&&(n.phone=e.phone),n}authorize(){return new Promise((e,t)=>{const n=this.paymentIntegrationService.getState(),i=n.getBillingAddress(),r=n.getShippingAddress();if(!i)throw new jt(kt.MissingBillingAddress);if(!this.klarnaCredit)throw new Vt(Tt.PaymentNotInitialized);const o=this.getUpdateSessionData(i,r);this.klarnaCredit.authorize(o,n=>n.approved?e(n):n.show_form?t(new Mn):void t(new Bi))})}}class oh{constructor(e,t=window){this.scriptLoader=e,this.klarnaWindow=t}load(){var e,t,n,i,r,o;return n=this,i=void 0,o=function*(){if((null===(e=this.klarnaWindow.Klarna)||void 0===e?void 0:e.Credit)||(yield this.scriptLoader.loadScript(\"//credit.klarnacdn.net/lib/v1/api.js\")),!(null===(t=this.klarnaWindow.Klarna)||void 0===t?void 0:t.Credit))throw new Xt;return this.klarnaWindow.Klarna.Credit},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())})}}const ah=nn(e=>new rh(e,new oh((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),[{id:\"klarna\"}]);var sh=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class dh{constructor(e,t,n){this.paymentIntegrationService=e,this.klarnav2ScriptLoader=t,this.klarnav2TokenUpdater=n}initialize(e){return sh(this,void 0,void 0,function*(){this.klarnaPayments=yield this.klarnav2ScriptLoader.load(),this.unsubscribe=this.paymentIntegrationService.subscribe(t=>{t.isPaymentMethodInitialized({methodId:e.methodId,gatewayId:e.gatewayId})&&this.loadPaymentsWidget(e)},e=>{const t=e.getCheckout();return t&&t.outstandingBalance},e=>{const t=e.getCheckout();return t&&t.coupons}),yield this.loadPaymentsWidget(e)})}deinitialize(){return this.unsubscribe&&this.unsubscribe(),Promise.resolve()}execute(e,t){return sh(this,void 0,void 0,function*(){if(!e.payment)throw new rn('Unable to proceed because \"payload.payment\" argument is not provided.');const n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e.payment,[]),{gatewayId:i,methodId:r}=n;if(!i)throw new rn('Unable to proceed because \"payload.payment.gatewayId\" argument is not provided.');const o=this.paymentIntegrationService.getState(),{id:a}=o.getCartOrThrow(),{clientToken:s}=o.getPaymentMethodOrThrow(r);yield this.klarnav2TokenUpdater.klarnaOrderInitialization(a,s);const d=this.isKlarnaSingleRadioButtonEnabled()?i:r,{authorization_token:c}=yield this.authorizeOrThrow(d,r);yield this.paymentIntegrationService.initializePayment(i,{authorizationToken:c}),yield this.paymentIntegrationService.submitOrder(Object.assign(Object.assign({},e),{payment:n,useStoreCredit:e.useStoreCredit}),t)})}finalize(){return Promise.reject(new _d)}loadPaymentsWidget(e){return sh(this,void 0,void 0,function*(){if(!e.klarnav2)throw new rn('Unable to load widget because \"options.klarnav2\" argument is not provided.');const{methodId:t,gatewayId:n,klarnav2:{container:i,onLoad:r}}=e;if(!n)throw new rn('Unable to proceed because \"payload.payment.gatewayId\" argument is not provided.');const o=this.paymentIntegrationService.getState(),a={params:o.getCartOrThrow().id};return yield this.klarnav2TokenUpdater.updateClientToken(n,{params:a}).catch(()=>{throw new jt(kt.MissingPaymentMethod)}),new Promise(e=>{const n=o.getPaymentMethodOrThrow(t);if(!this.klarnaPayments||!n.clientToken)throw new Vt(Tt.PaymentNotInitialized);this.klarnaPayments.init({client_token:n.clientToken}),this.klarnaPayments.load({container:i,payment_method_category:this.isKlarnaSingleRadioButtonEnabled()?n.gateway:t},t=>{r&&r(t),e(t)})})})}getUpdateSessionData(e,t,n){if(!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.includes)([...th,...nh],t.countryCode))return{};const i={billing_address:this.mapToKlarnaAddress(e,t,t.email)};return n&&(i.shipping_address=this.mapToKlarnaAddress(e,n,t.email)),i}needsStateCode(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.includes)(nh,e)}mapToKlarnaAddress(e,t,n){const i=this.paymentIntegrationService.getState(),{checkoutSettings:r}=i.getStoreConfigOrThrow(),o=i.getPaymentMethodOrThrow(e),{enableBillie:a}=o.initializationData||{},s={street_address:t.address1,city:t.city,country:t.countryCode,given_name:t.firstName,family_name:t.lastName,postal_code:t.postalCode,region:this.needsStateCode(t.countryCode)?t.stateOrProvinceCode:t.stateOrProvince,email:n};return t.address2&&(s.street_address2=t.address2),t.phone&&(s.phone=t.phone),t.company&&a&&cn(r.features,\"PI-3915.b2b_payment_session_for_klarna\")&&(s.organization_name=t.company),s}authorizeOrThrow(e,t){return sh(this,void 0,void 0,function*(){yield this.paymentIntegrationService.loadCheckout();const n=this.paymentIntegrationService.getState(),i=n.getBillingAddressOrThrow(),r=n.getShippingAddress(),o=this.getUpdateSessionData(t,i,r);return new Promise((t,n)=>{if(!this.klarnaPayments)return n(new Vt(Tt.PaymentNotInitialized));this.klarnaPayments.authorize({payment_method_category:e},o,e=>e.approved?t(e):e.show_form?n(new Mn):void n(new Bi))})})}isKlarnaSingleRadioButtonEnabled(){const{features:e}=this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings;return e[\"PI-4025.klarna_single_radio_button\"]}}class ch{constructor(e,t=window){this.scriptLoader=e,this.klarnaWindow=t}load(){var e,t,n,i,r,o;return n=this,i=void 0,o=function*(){if((null===(e=this.klarnaWindow.Klarna)||void 0===e?void 0:e.Payments)||(yield this.scriptLoader.loadScript(\"https://x.klarnacdn.net/kp/lib/v1/api.js\")),!(null===(t=this.klarnaWindow.Klarna)||void 0===t?void 0:t.Payments))throw new Xt;return this.klarnaWindow.Klarna.Payments},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())})}}class lh{constructor(e){this.requestSender=e}updateClientToken(e,{timeout:t,params:n}={}){const i=`/api/storefront/payments/${e}`;return this.requestSender.get(i,{timeout:t,headers:Object.assign({Accept:ti.JsonV1,\"X-API-INTERNAL\":Xn},ni),params:n})}klarnaOrderInitialization(e,t){return n=this,i=void 0,o=function*(){const n={headers:Object.assign({Accept:ti.JsonV1,\"X-API-INTERNAL\":Xn},ni),body:{cartId:e,clientToken:t}};yield this.requestSender.put(\"/api/storefront/initialization/klarna\",n)},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}}const uh=nn(e=>{const{getHost:t}=e.getState(),i=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()});return new dh(e,new ch((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)()),new lh(i))},[{gateway:\"klarna\"}]);class hh{constructor(e){this._paymentIntegrationService=e}execute(e,t){return n=this,i=void 0,o=function*(){return yield this._paymentIntegrationService.submitOrder(e,t),Promise.resolve()},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}finalize(){return Promise.reject(new _d)}initialize(){return Promise.resolve()}deinitialize(){return Promise.resolve()}}const ph=nn(e=>new hh(e),[{id:\"testgateway\"}]);var mh,yh=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};!function(e){e.CREDIT_CARD=\"credit_card\"}(mh||(mh={}));const gh=[\"klarnapaylater\",\"klarnasliceit\"];class vh{constructor(e,t){this.mollieScriptLoader=e,this.paymentIntegrationService=t}initialize(e){return yh(this,void 0,void 0,function*(){const{mollie:t,methodId:n,gatewayId:i}=e;if(!t)throw new rn('Unable to initialize payment because \"options.mollie\" argument is not provided.');if(!n||!i)throw new rn('Unable to initialize payment because \"methodId\" and/or \"gatewayId\" argument is not provided.');const r=document.querySelectorAll(\".mollie-components-controller\");(0,lodash__WEBPACK_IMPORTED_MODULE_5__.each)(r,e=>e.remove());const o=this.paymentIntegrationService.getState(),a=o.getStoreConfigOrThrow();this.initializeOptions=t;const s=o.getPaymentMethodOrThrow(n,i),{config:{merchantId:d,testMode:c}}=s;if(this.locale=o.getLocale(),!d)throw new jt(kt.MissingPaymentMethod);return this.isCreditCard(n)&&t.form&&this.shouldShowTSVHostedForm(n,i)?this.hostedForm=yield this.mountCardVerificationfields(t.form):this.isCreditCard(n)&&(this.mollieClient=yield this.loadMollieJs(d,a.storeProfile.storeLanguage,c),this.mountElements()),this.unsubscribe=()=>{if(this.paymentIntegrationService.getState().isPaymentMethodInitialized({methodId:e.methodId,gatewayId:e.gatewayId})){const e=document.getElementById(`${i}-${n}-paragraph`);e&&e.remove(),t.disableButton(!1),this.loadPaymentMethodsAllowed(t,n,i)}},this.unsubscribe(),this.loadPaymentMethodsAllowed(t,n,i),Promise.resolve()})}execute(e,t){return yh(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),r=null==n?void 0:n.paymentData;if(!n||!n.gatewayId||!r)throw new Yi([\"payment\",\"gatewayId\",\"paymentData\"]);try{return yield this.paymentIntegrationService.submitOrder(i,t),Sd(r)?yield this.executeWithVaulted(n):this.isCreditCard(n.methodId)?yield this.executeWithCC(n):yield this.executeWithAPM(n)}catch(e){yield this.processAdditionalAction(e)}})}finalize(){return Promise.resolve()}deinitialize(e){if(this.unsubscribe&&this.unsubscribe(),this.hostedForm&&this.hostedForm.detach(),e&&e.methodId&&e.gatewayId&&!this.hostedForm){const t=document.getElementById(`${e.gatewayId}-${e.methodId}`);t&&t.remove()}else e&&e.methodId&&this.isCreditCard(e.methodId)&&this.cardHolderElement&&this.cardNumberElement&&this.verificationCodeElement&&this.expiryDateElement&&(this.cardHolderElement.unmount(),this.cardHolderElement=void 0,this.cardNumberElement.unmount(),this.cardNumberElement=void 0,this.verificationCodeElement.unmount(),this.verificationCodeElement=void 0,this.expiryDateElement.unmount(),this.expiryDateElement=void 0);return this.mollieClient=void 0,Promise.resolve()}executeWithCC(e){return yh(this,void 0,void 0,function*(){const t=e.paymentData,{shouldSaveInstrument:n=!1,shouldSetAsDefaultInstrument:i=!1}=Pd(t)?t:{},{token:r,error:o}=yield this.getMollieClient().createToken();if(o)return Promise.reject(o);const a={credit_card_token:{token:r},vault_payment_instrument:n,set_as_default_stored_instrument:i,browser_info:Do(),shopper_locale:this.getShopperLocale()};yield this.paymentIntegrationService.submitPayment(Object.assign(Object.assign({},e),{paymentData:{formattedPayload:a}}))})}executeWithVaulted(e){return yh(this,void 0,void 0,function*(){if(this.isHostedPaymentFormEnabled(e.methodId,e.gatewayId)){const t=this.hostedForm;if(!t)throw new Vt(Tt.PaymentNotInitialized);yield t.validate(),yield t.submit(e),yield this.paymentIntegrationService.loadCurrentOrder()}else yield this.paymentIntegrationService.submitPayment(e)})}executeWithAPM(e){return yh(this,void 0,void 0,function*(){const t=e.paymentData,n=t&&\"issuer\"in t?t.issuer:\"\";yield this.paymentIntegrationService.submitPayment(Object.assign(Object.assign({},e),{paymentData:Object.assign(Object.assign({},t),{formattedPayload:{issuer:n,shopper_locale:this.getShopperLocale()}})}))})}isCreditCard(e){return e===mh.CREDIT_CARD}shouldShowTSVHostedForm(e,t){return this.isHostedPaymentFormEnabled(e,t)&&this.isHostedFieldAvailable()}mountCardVerificationfields(e){return new Promise((t,n)=>yh(this,void 0,void 0,function*(){try{const n=this.paymentIntegrationService.getState().getStoreConfig(),i=null==n?void 0:n.paymentSettings.bigpayBaseUrl;if(!i)throw new jt(kt.MissingCheckoutConfig);const r=this.paymentIntegrationService.createHostedForm(i,e);yield r.attach(),t(r)}catch(e){n(e)}}))}isHostedPaymentFormEnabled(e,t){const{getPaymentMethodOrThrow:n}=this.paymentIntegrationService.getState();return!0===n(e,t).config.isHostedFormEnabled}isHostedFieldAvailable(){var e;return!!(null===(e=this.getInitializeOptions().form)||void 0===e?void 0:e.fields)}processAdditionalAction(e){if(!Xr(e))return Promise.reject(e);if((0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"additional_action_required\"})){const{additional_action_required:{data:{redirect_url:t}}}=e.body;return new Promise(()=>window.location.replace(t))}return Promise.reject(e)}getInitializeOptions(){if(!this.initializeOptions)throw new Vt(Tt.PaymentNotInitialized);return this.initializeOptions}loadMollieJs(e,t,n=!1){return this.mollieClient?Promise.resolve(this.mollieClient):this.mollieScriptLoader.load(e,t,n)}getMollieClient(){if(!this.mollieClient)throw new Vt(Tt.PaymentNotInitialized);return this.mollieClient}getShopperLocale(){if(!this.locale)throw new Vt(Tt.PaymentNotInitialized);return this.locale}mountElements(){const{containerId:e,cardNumberId:t,cardCvcId:n,cardExpiryId:i,cardHolderId:r,styles:o}=this.getInitializeOptions();let a;e&&(a=document.getElementById(e)),setTimeout(()=>{if(!e||\"none\"!==(null==a?void 0:a.style.display)){const e=this.getMollieClient();this.cardHolderElement=e.createComponent(\"cardHolder\",{styles:o}),this.cardHolderElement.mount(`#${r}`),this.cardNumberElement=e.createComponent(\"cardNumber\",{styles:o}),this.cardNumberElement.mount(`#${t}`),this.verificationCodeElement=e.createComponent(\"verificationCode\",{styles:o}),this.verificationCodeElement.mount(`#${n}`),this.expiryDateElement=e.createComponent(\"expiryDate\",{styles:o}),this.expiryDateElement.mount(`#${i}`)}},0)}loadPaymentMethodsAllowed(e,t,n){var i;if(gh.includes(t)){const r=null===(i=this.paymentIntegrationService.getState().getCartOrThrow().lineItems)||void 0===i?void 0:i.digitalItems;if(r&&r.length>0){const{containerId:i}=this.getInitializeOptions();if(i){const r=document.getElementById(i);if(r){const i=document.createElement(\"p\");i.setAttribute(\"id\",`${n}-${t}-paragraph`),e.unsupportedMethodMessage&&(i.innerText=e.unsupportedMethodMessage,r.appendChild(i),e.disableButton(!0))}}}}}}class fh{constructor(e,t=window){this.scriptLoader=e,this.mollieHostWindow=t}load(e,t,n){return i=this,r=void 0,a=function*(){if(yield this.scriptLoader.loadScript(\"https://js.mollie.com/v1/mollie.js\"),!function(e){return\"Mollie\"in e}(this.mollieHostWindow))throw new Xt;return this.mollieHostWindow.Mollie(e,{locale:t,testmode:n})},new((o=void 0)||(o=Promise))(function(e,t){function n(e){try{d(a.next(e))}catch(e){t(e)}}function s(e){try{d(a.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o(function(e){e(i)})).then(n,s)}d((a=a.apply(i,r||[])).next())});// removed by dead control flow\n{ var i, r, o, a; }}}const Sh=nn(e=>new vh(new fh((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)()),e),[{gateway:\"mollie\"},{gateway:\"mollie\",id:\"applepay\"}]);var _h=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};const wh=\"moneris-payment-iframe\";class Ch{constructor(e){this.paymentIntegrationService=e}initialize(e){return _h(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),{moneris:n,methodId:i}=e;if(!i)throw new rn('Unable to initialize payment because \"methodId\" argument is not provided.');if(!n)throw new rn('Unable to initialize payment because \"options.moneris\" argument is not provided.');this.initializeOptions=n;const{config:r,initializationData:o}=t.getPaymentMethodOrThrow(i);if(!(null==o?void 0:o.profileId))throw new jt(kt.MissingPaymentMethod);return n.form&&this.shouldShowTSVHostedForm(i)&&(this.hostedForm=yield this.mountCardVerificationfields(n.form)),this.iframe||(this.iframe=this.createIframe(n.containerId,o,!!r.testMode)),Promise.resolve()})}execute(e,t){return _h(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);const{isStoreCreditApplied:r}=this.paymentIntegrationService.getState().getCheckoutOrThrow();if(r&&(yield this.paymentIntegrationService.applyStoreCredit(r)),yield this.paymentIntegrationService.submitOrder(i,t),!n.paymentData||!Sd(n.paymentData))return this.executeWithCC(n);yield this.executeWithVaulted(n)})}finalize(){return Promise.reject(new _d)}deinitialize(){return this.hostedForm&&this.hostedForm.detach(),this.windowEventListener&&(window.removeEventListener(\"message\",this.windowEventListener),this.windowEventListener=void 0),this.iframe&&this.iframe.parentNode&&(this.iframe.parentNode.removeChild(this.iframe),this.iframe=void 0),Promise.resolve()}executeWithCC(e){return _h(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId).config.testMode,n=e.paymentData||{},i=Pd(n)?n:{shouldSaveInstrument:!1,shouldSetAsDefaultInstrument:!1},{shouldSaveInstrument:r,shouldSetAsDefaultInstrument:o}=i,a=yield new Promise((e,n)=>{if(!this.iframe)throw new Vt(Tt.PaymentNotInitialized);const i=this.iframe.contentWindow;if(null===i)throw new Vt(Tt.PaymentNotInitialized);i.postMessage(\"tokenize\",this.monerisURL(!!t)),this.windowEventListener=i=>{if(\"string\"==typeof i.data&&i.origin===`https://${t?\"esqa\":\"www3\"}.moneris.com`)try{e(this.handleMonerisResponse(i))}catch(e){n(e)}},window.addEventListener(\"message\",this.windowEventListener)});void 0!==a&&(yield this.paymentIntegrationService.submitPayment({methodId:e.methodId,paymentData:{nonce:a,shouldSaveInstrument:r,shouldSetAsDefaultInstrument:o}}))})}executeWithVaulted(e){return _h(this,void 0,void 0,function*(){if(this.hostedForm){const t=this.hostedForm;return yield t.validate(),yield t.submit(e),this.paymentIntegrationService.loadCurrentOrder()}return this.paymentIntegrationService.submitPayment(e)})}shouldShowTSVHostedForm(e){return this.isHostedPaymentFormEnabled(e)&&this.isHostedFieldAvailable()}isHostedPaymentFormEnabled(e){const t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e);return Boolean(t.config.isHostedFormEnabled)}isHostedFieldAvailable(){var e;const t=this.getInitializeOptions(),n=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(null===(e=t.form)||void 0===e?void 0:e.fields,lodash__WEBPACK_IMPORTED_MODULE_5__.isEmpty);return!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEmpty)(n)}getInitializeOptions(){if(!this.initializeOptions)throw new Vt(Tt.PaymentNotInitialized);return this.initializeOptions}mountCardVerificationfields(e){var t;return _h(this,void 0,void 0,function*(){const n=null===(t=this.paymentIntegrationService.getState().getStoreConfig())||void 0===t?void 0:t.paymentSettings.bigpayBaseUrl;if(!n)throw new jt(kt.MissingCheckoutConfig);const i=this.paymentIntegrationService.createHostedForm(n,e);return yield i.attach(),i})}createIframe(e,t,n,i){const r=document.getElementById(e);if(!r)throw new rn(\"Unable to create iframe without valid container ID.\");const o=document.createElement(\"iframe\"),a={id:t.profileId,pmmsg:!0,display_labels:1,enable_exp:1,enable_cvd:1,css_body:(null==i?void 0:i.cssBody)||\"font-family: Arial, Helvetica,sans-serif;background: transparent;\",css_textbox:(null==i?void 0:i.cssTextbox)||\"border-radius:4px;border: 2px solid rgb(00,00,00);width: 100%;font-weight: 600;padding: 8px 8px;outline: 0;\",css_textbox_pan:(null==i?void 0:i.cssTextboxCardNumber)||\"width: 240px;\",css_textbox_exp:(null==i?void 0:i.cssTextboxExpiryDate)||\"margin-bottom: 0;width: calc(30% - 12px);\",css_textbox_cvd:(null==i?void 0:i.cssTextboxCVV)||\"margin-bottom: 0;width: calc(30% - 12px);\",css_input_label:(null==i?void 0:i.cssInputLabel)||\"font-size: 10px;position: relative;top: 8px;left: 6px;background: rgb(255,255,255);padding: 3px 2px;color: rgb(66,66,66);font-weight: 600;z-index: 2;\",pan_label:t.creditCardLabel||\"Credit Card Number\",exp_label:t.expiryDateLabel||\"Expiration\",cvd_label:t.cvdLabel||\"CVD\"},s=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.map)(a,(e,t)=>`${t}=${e}`).join(\"&\");return o.width=\"100%\",o.height=\"100%\",o.name=wh,o.id=wh,o.style.border=\"none\",o.src=`${this.monerisURL(n)}?${s}`,o.allow=\"payment\",r.appendChild(o),o}handleMonerisResponse(e){const t=JSON.parse(e.data);if(\"001\"!==t.responseCode[0])throw new Error(t.errorMessage);return t.dataKey}monerisURL(e){return`https://${e?\"esqa\":\"www3\"}.moneris.com/HPPtoken/index.php`}}const Ih=nn(e=>new Ch(e),[{id:\"moneris\"}]);class bh{constructor(e){this._paymentIntegrationService=e}execute(e,t){return n=this,i=void 0,o=function*(){yield this._paymentIntegrationService.submitOrder((0,lodash__WEBPACK_IMPORTED_MODULE_5__.omit)(e,\"payment\"),t)},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}finalize(){return Promise.reject(new _d)}initialize(){return Promise.resolve()}deinitialize(){return Promise.resolve()}}const Ph=nn(e=>new bh(e),[{id:\"nopaymentdatarequired\"}]);class Oh{constructor(e){this._paymentIntegrationService=e}execute(e,t){return n=this,i=void 0,o=function*(){return yield this._paymentIntegrationService.submitOrder(Object.assign(Object.assign({},e),{payment:e.payment?{methodId:e.payment.methodId}:void 0}),t),Promise.resolve()},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}finalize(){return Promise.reject(new _d)}initialize(){return Promise.resolve()}deinitialize(){return Promise.resolve()}}const Eh=nn(e=>new Oh(e),[{type:\"PAYMENT_TYPE_OFFLINE\"}]);var Ah=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class kh{constructor(e){this._paymentIntegrationService=e}execute(e,t){return Ah(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),r=this._shouldSubmitFullPayload(n)?e:i,o=n&&n.paymentData,a=o&&Sd(o)&&o.instrumentId||void 0,s=o&&Pd(o)&&o.shouldSaveInstrument||void 0,d=o&&Pd(o)&&o.shouldSetAsDefaultInstrument||void 0;if(!n)throw new Yi([\"payment\"]);const{methodId:c,gatewayId:l}=n;yield this._paymentIntegrationService.submitOrder(r,t),yield this._paymentIntegrationService.initializeOffsitePayment({methodId:c,gatewayId:l,instrumentId:a,shouldSaveInstrument:s,shouldSetAsDefaultInstrument:d})})}finalize(e){return Ah(this,void 0,void 0,function*(){const t=this._paymentIntegrationService.getState(),n=t.getOrder(),i=t.getPaymentStatus();if(!n||i!==Hc.ACKNOWLEDGE&&i!==Hc.FINALIZE)return Promise.reject(new _d);yield this._paymentIntegrationService.finalizeOrder(e)})}initialize(){return Promise.resolve()}deinitialize(){return Promise.resolve()}_shouldSubmitFullPayload(e){return!!e&&(\"adyen\"===e.gatewayId||\"barclaycard\"===e.gatewayId)}}const Th=nn(e=>new kh(e),[{type:\"PAYMENT_TYPE_HOSTED\"}]),Dh={\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"},Mh=function({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t};var zh=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Nh{constructor(e,t,n,i){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=n,this.loadingIndicator=i}initialize(e){var t;return zh(this,void 0,void 0,function*(){const{methodId:n,paypalcommerce:i}=e||{};if(this.paypalcommerce=i,!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new rn('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(n);const r=this.paymentIntegrationService.getState(),o=r.getPaymentMethodOrThrow(n),{container:a,bannerContainerId:s}=i,{orderId:d,paypalBNPLConfiguration:c=[],isPayPalCreditAvailable:l}=o.initializationData||{};if(void 0!==s){if(!document.getElementById(s))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=null==c?void 0:c.find(({id:e})=>\"checkout\"===e);if(l||!(null==e?void 0:e.status))return;const t=yield this.paypalCommerceSdk.getPayPalMessages(o,r.getCartOrThrow().currency.code);return t&&\"function\"==typeof(null==t?void 0:t.Messages)?this.renderMessages(t,s,e):void console.error(\"[BC PayPalCommerce PayLater]: banner could not be rendered, due to issues with loading PayPal SDK\")}d?this.orderId=null===(t=o.initializationData)||void 0===t?void 0:t.orderId:(this.loadingIndicatorContainer=null==a?void 0:a.split(\"#\")[1],yield this.paypalCommerceIntegrationService.loadPayPalSdk(n),i.onInit&&\"function\"==typeof i.onInit&&i.onInit(()=>this.renderButton(n,i)),(void 0===i.shouldRenderPayPalButtonOnInitialization||i.shouldRenderPayPalButtonOnInitialization)&&this.renderButton(n,i))})}execute(e,t){var n,i;return zh(this,void 0,void 0,function*(){const{payment:r}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),{onError:a}=this.paypalcommerce||{},s=this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features,d=s&&s[\"PAYPAL-3438.handling_instrument_declined_error_ppc\"];if(!r)throw new Yi([\"payment\"]);const{methodId:c,paymentData:l}=r;if(this.isPayPalVaultedInstrumentPaymentData(l)&&!this.orderId&&(this.orderId=yield this.createOrder()),!this.orderId)throw new Bi;const u=this.isPayPalVaultedInstrumentPaymentData(l)?this.prepareVaultedInstrumentPaymentPayload(c,this.orderId,l):this.preparePaymentPayload(c,this.orderId,l);try{yield this.paymentIntegrationService.submitOrder(o,t),yield this.paymentIntegrationService.submitPayment(u)}catch(e){if(function(e){var t;return Xr(e)&&\"offsite_redirect\"===(null===(t=e.body.additional_action_required)||void 0===t?void 0:t.type)}(e)){const t=null===(i=null===(n=e.body.additional_action_required)||void 0===n?void 0:n.data)||void 0===i?void 0:i.redirect_url;return new Promise(()=>window.location.replace(t))}return this.isProviderError(e)&&d&&(yield this.paypalCommerceIntegrationService.loadPayPalSdk(r.methodId),yield new Promise((e,t)=>{var n;this.paypalcommerce&&(null===(n=this.paypalButton)||void 0===n||n.close(),this.renderButton(r.methodId,this.paypalcommerce),this.handleError(new Error(\"INSTRUMENT_DECLINED\"),a)),t()})),this.handleError(e,a),Promise.reject()}})}finalize(){return Promise.reject(new _d)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}prepareVaultedInstrumentPaymentPayload(e,t,n){const{instrumentId:i,shouldSetAsDefaultInstrument:r}=n,o=!this.isTrustedVaultingFlow(n);return o?{methodId:e,paymentData:{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:r,formattedPayload:{paypal_account:{order_id:t}}}}:{methodId:e,paymentData:{instrumentId:i,shouldSetAsDefaultInstrument:r,formattedPayload:{paypal_account:{order_id:t},bigpay_token:{token:i}}}}}preparePaymentPayload(e,t,n){const{shouldSaveInstrument:i=!1,shouldSetAsDefaultInstrument:r=!1}=Pd(n)?n:{};return{methodId:e,paymentData:{shouldSaveInstrument:i,shouldSetAsDefaultInstrument:r,formattedPayload:{paypal_account:{order_id:t}}}}}renderButton(e,t){const n=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:r}=i.initializationData||{},{checkoutPaymentButtonStyles:o}=r||{},{container:a,onError:s,onRenderButton:d,onValidate:c,submitForm:l}=t;if(!a)throw new rn('Unable to initialize payment because \"container\" argument is not provided.');const u={fundingSource:n.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(o),createOrder:()=>this.createOrder(),onClick:(e,t)=>this.handleClick(t,c),onApprove:e=>this.handleApprove(e,l),onError:e=>this.handleError(e,s),onCancel:()=>this.toggleLoadingIndicator(!1)};this.paypalButton=n.Buttons(u),this.paypalButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.paypalButton.render(a))}handleClick(e,t){return zh(this,void 0,void 0,function*(){const{resolve:n,reject:i}=e;yield null==t?void 0:t(()=>(this.toggleLoadingIndicator(!0),n()),i)})}handleApprove({orderID:e},t){this.orderId=e,null==t||t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createOrder(){return zh(this,void 0,void 0,function*(){const e=this.getFieldsValues();return this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecheckout\",{shouldSaveInstrument:(null==e?void 0:e.shouldSaveInstrument)||!1})})}getFieldsValues(){const{getFieldsValues:e}=this.paypalcommerce||{};return\"function\"==typeof e?e():void 0}isTrustedVaultingFlow(e){if(e&&Sd(e)){const t=this.paymentIntegrationService.getState().getInstruments(),n=null==t?void 0:t.find(t=>Kd(t)&&t.bigpayToken===e.instrumentId);return!(Kd(n)&&!n.trustedShippingAddress)}return!1}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isPayPalVaultedInstrumentPaymentData(e){return!!e&&Sd(e)&&Pd(e)}renderMessages(e,t,n){const i={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:Mh(n)};e.Messages(i).render(`#${t}`)}isProviderError(e){var t,n,i;return!!function(e){return\"object\"==typeof e&&null!==e&&\"errors\"in e}(e)&&\"INSTRUMENT_DECLINED\"===(null===(i=null===(n=((null===(t=null==e?void 0:e.errors)||void 0===t?void 0:t.filter(e=>e.provider_error))||[])[0])||void 0===n?void 0:n.provider_error)||void 0===i?void 0:i.code)}}const xh=nn(e=>new Nh(e,Yo(e),new Io((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)()),new Ba({containerStyles:Dh})),[{id:\"paypalcommerce\"}]);var Fh=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Rh{constructor(e,t,n,i){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=n,this.paypalCommerceSdk=i}initialize(e){return Fh(this,void 0,void 0,function*(){const{methodId:t,paypalcommerce:n,paypalcommercecredit:i}=e||{},r=i||n;if(!t)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!r)throw new rn('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(t);const o=this.paymentIntegrationService.getState(),a=o.getPaymentMethodOrThrow(t),{paypalBNPLConfiguration:s=[],orderId:d}=a.initializationData||{},{bannerContainerId:c,container:l}=r;if(void 0!==c){if(!document.getElementById(c))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=s&&s.find(({id:e})=>\"checkout\"===e);if(!(null==e?void 0:e.status))return;const t=yield this.paypalCommerceSdk.getPayPalMessages(a,o.getCartOrThrow().currency.code);return this.renderMessages(t,c,e)}d?this.orderId=d:(yield this.paypalCommerceIntegrationService.loadPayPalSdk(t),this.loadingIndicatorContainer=null==l?void 0:l.split(\"#\")[1],this.renderButton(t,r))})}execute(e,t){return Fh(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);if(!this.orderId)throw new Bi;yield this.paymentIntegrationService.submitOrder(i,t),yield this.paypalCommerceIntegrationService.submitPayment(n.methodId,this.orderId)})}finalize(){return Promise.reject(new _d)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){if(!(null==t?void 0:t.container))throw new rn('Unable to initialize payment because \"container\" argument is not provided.');const n=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:r}=i.initializationData||{},{checkoutPaymentButtonStyles:o}=r||{},{container:a,onError:s,onRenderButton:d,onValidate:c,submitForm:l}=t,u=[n.FUNDING.PAYLATER,n.FUNDING.CREDIT];let h=!1;u.forEach(e=>{if(h)return;const t={fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(o),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecreditcheckout\"),onClick:(e,t)=>this.handleClick(t,c),onApprove:e=>this.handleApprove(e,l),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=n.Buttons(t),this.paypalButton.isEligible()||e!==n.FUNDING.PAYLATER){if(!this.paypalButton.isEligible()&&e===n.FUNDING.CREDIT)throw new on(`PayPal ${e} is not available for your region. Please use PayPal Checkout instead.`);d&&\"function\"==typeof d&&d(),this.paypalButton.render(a),h=!0}})}handleClick(e,t){return Fh(this,void 0,void 0,function*(){const{resolve:n,reject:i}=e;t&&\"function\"==typeof t&&(yield t(()=>(this.toggleLoadingIndicator(!0),n()),i))})}handleApprove({orderID:e},t){this.orderId=e,t&&\"function\"==typeof t&&t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}renderMessages(e,t,n){const i={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:Mh(n)};e.Messages(i).render(`#${t}`)}}const Lh=nn(e=>new Rh(e,Yo(e),new Ba({containerStyles:Dh}),ra()),[{id:\"paypalcommercecredit\"}]);var Bh=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class jh{constructor(e,t,n){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=n}initialize(e){var t,n;return Bh(this,void 0,void 0,function*(){const{methodId:i,paypalcommerce:r,paypalcommercevenmo:o}=e||{},a=o||r;if(!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!a)throw new rn('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(i);const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i);(null===(t=s.initializationData)||void 0===t?void 0:t.orderId)?this.orderId=null===(n=s.initializationData)||void 0===n?void 0:n.orderId:(yield this.paypalCommerceIntegrationService.loadPayPalSdk(i),this.loadingIndicatorContainer=a.container.split(\"#\")[1],this.renderButton(i,a))})}execute(e,t){return Bh(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);if(!this.orderId)throw new Bi;yield this.paymentIntegrationService.submitOrder(i,t),yield this.paypalCommerceIntegrationService.submitPayment(n.methodId,this.orderId)})}finalize(){return Promise.reject(new _d)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){const n=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:r}=i.initializationData||{},{checkoutPaymentButtonStyles:o}=r||{},{container:a,onError:s,onRenderButton:d,onValidate:c,submitForm:l}=t,u={fundingSource:n.FUNDING.VENMO,style:this.paypalCommerceIntegrationService.getValidButtonStyle(o),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmocheckout\"),onClick:(e,t)=>this.handleClick(t,c),onApprove:e=>this.handleApprove(e,l),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=n.Buttons(u),!this.paypalButton.isEligible())throw new on(\"PayPal Venmo is not available for your region. Please use PayPal Checkout instead.\");d&&\"function\"==typeof d&&d(),this.paypalButton.render(a)}handleClick(e,t){return Bh(this,void 0,void 0,function*(){const{resolve:n,reject:i}=e;yield t(()=>(this.toggleLoadingIndicator(!0),n()),i)})}handleApprove({orderID:e},t){this.orderId=e,t(),this.toggleLoadingIndicator(!1)}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const Uh=nn(e=>new jh(e,Yo(e),new Ba({styles:{backgroundColor:\"black\"}})),[{id:\"paypalcommercevenmo\"}]);var qh=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Vh{constructor(e,t,n,i,r=3e3,o=3e5){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=n,this.loadingIndicator=i,this.pollingInterval=r,this.maxPollingIntervalTime=o,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,this.isPollingEnabled=!1}initialize(e){return qh(this,void 0,void 0,function*(){const{gatewayId:t,methodId:n,paypalcommerce:i,paypalcommercealternativemethods:r}=e,o=r||i;if(this.paypalcommercealternativemethods=r,!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!o)throw new rn('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument is not provided.');const a=this.paymentIntegrationService.getState(),s=a.getPaymentMethodOrThrow(n,t),{orderId:d,shouldRenderFields:c}=s.initializationData||{},l=a.getStoreConfigOrThrow().checkoutSettings.features;this.isPollingEnabled=cn(l,\"PAYPAL-5192.paypal_commerce_ideal_polling\"),d?this.orderId=d:(this.paypalApms=yield this.paypalCommerceSdk.getPayPalApmsSdk(s,a.getCartOrThrow().currency.code),this.loadingIndicatorContainer=o.container.split(\"#\")[1],this.renderButton(n,t,o),c&&this.renderFields(n,o))})}execute(e,t){return qh(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);const{methodId:r,gatewayId:o}=n;if(!this.orderId)throw new Bi;this.isPollingEnabled&&\"ideal\"===r&&(yield new Promise((e,t)=>{this.initializePollingMechanism(r,e,t,o)})),this.isNonInstantPaymentMethod(r)||(yield this.paymentIntegrationService.submitOrder(i,t)),yield this.paypalCommerceIntegrationService.submitPayment(r,this.orderId,o)})}finalize(){return Promise.reject(new _d)}deinitialize(){var e;return this.orderId=void 0,this.isPollingEnabled&&this.resetPollingMechanism(),null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}initializePollingMechanism(e,t,n,i){return qh(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const n=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(n),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const r=yield this.paypalCommerceIntegrationService.getOrderStatus(i),o=r===Uo.Approved,a=r===Uo.PollingError;if(o)return this.deinitializePollingMechanism(),t();if(a)return n();if(!o&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,n,i);yield this.reinitializeStrategy({methodId:e,gatewayId:i,paypalcommercealternativemethods:this.paypalcommercealternativemethods}),this.handleError(new sc)}catch(e){n()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}reinitializeStrategy(e){return qh(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}handleError(e){const{onError:t}=this.paypalcommercealternativemethods||{};this.isPollingEnabled&&this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderButton(e,t,n){const i=this.getPaypalAmpsSdkOrThrow(),r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t),{buttonStyle:o}=r.initializationData||{},{container:a,onError:s,onRenderButton:d,submitForm:c}=n,l={fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(o),onInit:(e,t)=>n.onInitButton(t),createOrder:()=>this.onCreateOrder(e,t,n),onApprove:e=>this.handleApprove(e,c),onCancel:()=>{this.toggleLoadingIndicator(!1),this.deinitializePollingMechanism()},onError:e=>{this.deinitializePollingMechanism(),this.handleFailure(e,s)},onClick:(e,t)=>qh(this,void 0,void 0,function*(){return n.onValidate(t.resolve,t.reject)})};this.paypalButton=i.Buttons(l),this.paypalButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.paypalButton.render(a))}onCreateOrder(e,t,n){return qh(this,void 0,void 0,function*(){const{onValidate:i}=n;yield i(()=>(this.toggleLoadingIndicator(!0),()=>Promise.resolve()),lodash__WEBPACK_IMPORTED_MODULE_5__.noop);const r=yield this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethodscheckout\");if(this.isNonInstantPaymentMethod(e)){const n={useStoreCredit:!1},i={params:{methodId:e,gatewayId:t}};yield this.paymentIntegrationService.submitOrder(n,i),yield this.paypalCommerceIntegrationService.submitPayment(e,r,t)}return r})}handleApprove({orderID:e},t){this.orderId=e,t()}handleFailure(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderFields(e,t){const n=this.getPaypalAmpsSdkOrThrow(),i=this.paymentIntegrationService.getState(),{firstName:r,lastName:o,email:a}=i.getBillingAddressOrThrow(),{apmFieldsContainer:s,apmFieldsStyles:d}=t;if(!s)throw new rn('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument should contain \"apmFieldsContainer\".');const c=document.querySelector(s);c&&(c.innerHTML=\"\");const l={fundingSource:e,style:d||{},fields:{name:{value:`${r} ${o}`},email:{value:a}}};n.PaymentFields(l).render(s)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isNonInstantPaymentMethod(e){return e.toUpperCase()in jo}getPaypalAmpsSdkOrThrow(){if(!this.paypalApms)throw new Xt;return this.paypalApms}}const Gh=nn(e=>new Vh(e,Yo(e),ra(),new Ba({containerStyles:Dh})),[{gateway:\"paypalcommercealternativemethods\"}]);function Hh(e){return!!e&&(\"authenticationState\"in e||\"addresses\"in e||\"instruments\"in e)}var $h=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Wh{constructor(e,t,n,i){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=n,this.paypalCommerceFastlaneUtils=i}initialize(e){return $h(this,void 0,void 0,function*(){const{methodId:t,paypalcommercecreditcards:n,paypalcommerce:i}=e,r=n||i,{form:o,onCreditCardFieldsRenderingError:a}=r||{};if(!t)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new rn('Unable to proceed because \"options.paypalcommercecreditcards.form\" argument is not provided.');this.hostedFormOptions=o,this.isCreditCardForm=pc(o.fields),this.isCreditCardVaultedForm=mc(o.fields)&&!this.hasUndefinedValues(),yield this.paymentIntegrationService.loadPaymentMethod(t),yield this.paypalCommerceIntegrationService.loadPayPalSdk(t,void 0,!0,!0),(this.isCreditCardForm||this.isCreditCardVaultedForm)&&(yield this.initializeFields(o,a)),this.shouldInitializePayPalFastlane(t)&&(yield this.initializePayPalFastlaneOrThrow(t))})}execute(e,t){return $h(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),{methodId:r,paymentData:o}=n||{};if(!n||!r)throw new Yi([\"payment\"]);if(this.executionPaymentData=o,this.isCreditCardForm||this.isCreditCardVaultedForm)yield this.validateHostedFormOrThrow(),yield this.submitHostedForm();else{const{orderId:e}=yield this.paypalCommerceIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",this.getInstrumentParams());this.returnedOrderId=e}const a=this.preparePaymentPayload(r,o,this.returnedOrderId,this.returnedVaultedToken);yield this.paymentIntegrationService.submitOrder(i,t),yield this.paymentIntegrationService.submitPayment(a)})}finalize(){return Promise.reject(new _d)}deinitialize(){var e,t,n,i;return $h(this,void 0,void 0,function*(){return yield null===(e=this.cvvField)||void 0===e?void 0:e.close(),yield null===(t=this.expiryField)||void 0===t?void 0:t.close(),yield null===(n=this.numberField)||void 0===n?void 0:n.close(),yield null===(i=this.nameField)||void 0===i?void 0:i.close(),Promise.resolve()})}preparePaymentPayload(e,t,n,i){const{shouldSaveInstrument:r=!1,shouldSetAsDefaultInstrument:o=!1}=Pd(t)?t:{},a=t&&Sd(t)?t.instrumentId:void 0,s=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)({verification_nonce:i,token:a},lodash__WEBPACK_IMPORTED_MODULE_5__.isNil);return{methodId:e,paymentData:{shouldSaveInstrument:r,shouldSetAsDefaultInstrument:o,instrumentId:a,formattedPayload:Object.assign(Object.assign({},i||a?{bigpay_token:s}:{}),n?{card_with_order:{order_id:n}}:{})}}}initializeFields(e,t){return $h(this,void 0,void 0,function*(){const{fields:n,styles:i}=e,r=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),o=this.getExecuteCallback(n),a=Object.assign({style:this.getInputStyles(i),onApprove:({orderID:e,vaultSetupToken:t,liabilityShift:n})=>{if(n===xo.No||n===xo.Unknown)throw new Error;return this.handleApprove({orderID:e,vaultSetupToken:t})},onError:()=>{throw new Li},inputEvents:{onChange:t=>this.onChangeHandler(e,t),onFocus:t=>this.onFocusHandler(e,t),onBlur:t=>this.onBlurHandler(e,t),onInputSubmitRequest:t=>this.onInputSubmitRequest(e,t)}},o);if(this.cardFields=yield r.CardFields(a),!this.cardFields.isEligible())throw new Vt(Tt.PaymentNotInitialized);try{this.stylizeInputContainers(n),pc(n)&&(yield this.renderFields(n)),mc(n)&&(yield this.renderVaultedFields(n))}catch(e){\"function\"==typeof t&&t(e)}})}getExecuteCallback(e){return mc(e)?this.createVaultSetupTokenCallback():this.createOrderCallback()}createVaultSetupTokenCallback(){return{createVaultSetupToken:()=>$h(this,void 0,void 0,function*(){const{setupToken:e}=(yield this.paypalCommerceIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",Object.assign(Object.assign({},this.getInstrumentParams()),{setupToken:!0})))||{};return e})}}createOrderCallback(){return{createOrder:()=>$h(this,void 0,void 0,function*(){const{orderId:e}=(yield this.paypalCommerceIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",this.getInstrumentParams()))||{};return e})}}handleApprove({orderID:e,vaultSetupToken:t}){e&&(this.returnedOrderId=e),t&&(this.returnedVaultedToken=t)}renderFields(e){var t,n,i,r;return $h(this,void 0,void 0,function*(){const o=this.getCardFieldsOrThrow();(null===(t=e.cardCode)||void 0===t?void 0:t.containerId)&&(this.cvvField=o.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCode.containerId}`)),(null===(n=e.cardExpiry)||void 0===n?void 0:n.containerId)&&(this.expiryField=o.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiry.containerId}`)),(null===(i=e.cardName)||void 0===i?void 0:i.containerId)&&(this.nameField=o.NameField({placeholder:\"\"}),yield this.nameField.render(`#${e.cardName.containerId}`)),(null===(r=e.cardNumber)||void 0===r?void 0:r.containerId)&&(this.numberField=o.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumber.containerId}`))})}renderVaultedFields(e){var t,n,i;return $h(this,void 0,void 0,function*(){const r=this.getCardFieldsOrThrow();(null===(t=e.cardCodeVerification)||void 0===t?void 0:t.containerId)&&(this.cvvField=r.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCodeVerification.containerId}`)),(null===(n=e.cardExpiryVerification)||void 0===n?void 0:n.containerId)&&(this.expiryField=r.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiryVerification.containerId}`)),(null===(i=e.cardNumberVerification)||void 0===i?void 0:i.containerId)&&(this.numberField=r.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumberVerification.containerId}`))})}getInstrumentParams(){if(!this.executionPaymentData)return{};if(Pd(this.executionPaymentData)){const{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}=this.executionPaymentData;return{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}}if(Sd(this.executionPaymentData)){const{instrumentId:e}=this.executionPaymentData;return{instrumentId:e}}return{}}getFieldTypeByEmittedField({emittedBy:e}){return{fieldType:this.mapFieldType(e)}}submitHostedForm(){return $h(this,void 0,void 0,function*(){const e=this.getCardFieldsOrThrow(),t=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),n={billingAddress:{company:t.company,addressLine1:t.address1,addressLine2:t.address2,adminArea1:t.stateOrProvinceCode,adminArea2:t.city,postalCode:t.postalCode,countryCode:t.countryCode}};try{this.isCreditCardVaultedForm?yield e.submit():yield e.submit(n)}catch(e){throw new Li(\"Failed authentication. Please try to authorize again.\")}})}validateHostedFormOrThrow(){var e,t;return $h(this,void 0,void 0,function*(){const n=this.getCardFieldsOrThrow(),i=yield n.getState().then(e=>e),r=this.getValidityData(i);if(!r.isValid)throw null===(t=null===(e=this.hostedFormOptions)||void 0===e?void 0:e.onValidate)||void 0===t||t.call(e,r),new Ki(this.mapValidationErrors(r.errors))})}getValidityData({fields:e}){const t=Object.assign({},e);delete t.cardNameField;const n=Object.keys(t);return{isValid:n.every(e=>{var n;return null===(n=t[e])||void 0===n?void 0:n.isValid}),errors:n.reduce((e,n)=>{var i;const r=this.mapFieldType(n);return Object.assign(Object.assign({},e),{[r]:(null===(i=t[n])||void 0===i?void 0:i.isValid)?void 0:[this.getInvalidErrorByFieldType(r)]})},{})}}getInvalidErrorByFieldType(e){switch(e){case hc.CardCode:case hc.CardCodeVerification:return{fieldType:e,message:\"Invalid card code\",type:\"invalid_card_code\"};case hc.CardNumber:case hc.CardNumberVerification:return{fieldType:e,message:\"Invalid card number\",type:\"invalid_card_number\"};case hc.CardExpiry:case hc.CardExpiryVerification:return{fieldType:e,message:\"Invalid card expiry\",type:\"invalid_card_expiry\"};default:return{fieldType:e,message:\"Invalid field\",type:\"invalid\"}}}mapValidationErrors(e={}){const t={};return Object.keys(e).forEach(n=>{var i,r;t[n]=[{message:(null===(r=null===(i=e[n])||void 0===i?void 0:i[0])||void 0===r?void 0:r.message)||\"\",type:n}]}),t}mapFieldType(e){switch(e){case\"name\":return hc.CardName;case\"cardNumberField\":case\"number\":return this.isCreditCardForm?hc.CardNumber:hc.CardNumberVerification;case\"cardExpiryField\":case\"expiry\":return this.isCreditCardForm?hc.CardExpiry:hc.CardExpiryVerification;case\"cardCvvField\":case\"cvv\":return this.isCreditCardForm?hc.CardCode:hc.CardCodeVerification;default:throw new Error(\"Unexpected field type\")}}getCardFieldsOrThrow(){if(!this.cardFields)throw new Vt(Tt.PaymentNotInitialized);return this.cardFields}getInputStyles(e){var t,n,i;const r={\"font-size\":(null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.fontSize)||\"1rem\",\"font-family\":(null===(n=null==e?void 0:e.default)||void 0===n?void 0:n.fontFamily)||\"Montserrat, Arial, Helvetica, sans-serif\",\"font-weight\":(null===(i=null==e?void 0:e.default)||void 0===i?void 0:i.fontWeight)||\"400\",outline:\"none\",padding:\"9px 13px\"},o=Object.assign(Object.assign({},r),{color:\"#333333\"});return{input:o,\".invalid\":Object.assign(Object.assign({},r),{color:\"red\"}),\".valid\":o,\":focus\":o}}stylizeInputContainers(e){Object.values(e||{}).forEach(e=>{const t=document.getElementById(`${(null==e?void 0:e.containerId)||\"\"}`);t&&(t.style.padding=\"0px\",t.style.boxShadow=\"none\",t.style.border=\"none\",t.style.background=\"transparent\",t.style.marginBottom=\"10px\",t.style.marginLeft=\"-5px\")})}hasUndefinedValues(){return!this.hostedFormOptions||Object.values(this.hostedFormOptions.fields).some(e=>void 0===e)}onChangeHandler(e,t){var n;null===(n=null==e?void 0:e.onValidate)||void 0===n||n.call(e,this.getValidityData(t))}onFocusHandler(e,t){var n;null===(n=null==e?void 0:e.onFocus)||void 0===n||n.call(e,this.getFieldTypeByEmittedField(t))}onBlurHandler(e,t){var n;null===(n=null==e?void 0:e.onBlur)||void 0===n||n.call(e,this.getFieldTypeByEmittedField(t))}onInputSubmitRequest(e,t){var n;null===(n=null==e?void 0:e.onEnter)||void 0===n||n.call(e,this.getFieldTypeByEmittedField(t))}shouldInitializePayPalFastlane(e){var t,n;const i=this.paymentIntegrationService.getState(),r=i.getPaymentMethodOrThrow(e),o=i.getPaymentProviderCustomer(),a=Hh(o)?o:{};return(null===(t=null==r?void 0:r.initializationData)||void 0===t?void 0:t.isAcceleratedCheckoutEnabled)&&(null===(n=null==r?void 0:r.initializationData)||void 0===n?void 0:n.isPayPalCommerceAnalyticsV2Enabled)&&!(null==a?void 0:a.authenticationState)}initializePayPalFastlaneOrThrow(e){return $h(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),n=t.getCartOrThrow(),i=t.getPaymentMethodOrThrow(e),{initializationData:r}=i;if(!(null==r?void 0:r.connectClientToken))return;const o=yield this.paypalCommerceSdk.getPayPalFastlaneSdk(i,n.currency.code,n.id);yield this.paypalCommerceFastlaneUtils.initializePayPalFastlane(o,!!(null==r?void 0:r.isDeveloperModeApplicable))}catch(e){}})}}const Yh=nn(e=>new Wh(e,Yo(e),ra(),ma()),[{id:\"paypalcommercecreditcards\"}]);var Kh=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Jh{constructor(e,t,n,i=3e3,r=3e5){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=n,this.pollingInterval=i,this.maxPollingIntervalTime=r,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}initialize(e){return Kh(this,void 0,void 0,function*(){const{gatewayId:t,methodId:n,paypalcommerceratepay:i}=e;if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!i)throw new rn('Unable to initialize payment because \"options.paypalcommerceratepay\" argument is not provided.');const{legalTextContainer:r,container:o,loadingContainerId:a}=i;if(!o)throw new rn('Unable to initialize payment because \"options.container\" argument is not provided.');if(!r)throw new rn('Unable to initialize payment because \"options.legalTextContainer\" argument is not provided.');if(!a)throw new rn('Unable to initialize payment because \"options.loadingContainerId\" argument is not provided.');this.loadingIndicatorContainer=a;const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n,t),{merchantId:d}=s.initializationData||{};if(!d)throw new rn(\"Unable to initialize payment because merchantId argument is not provided.\");this.paypalcommerceratepay=i,yield this.paypalCommerceIntegrationService.loadPayPalSdk(n),this.createFraudNetScript(d,n,t),this.loadFraudnetConfig(),this.renderLegalText(r,o)})}execute(e,t){return Kh(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),{getFieldsValues:r}=this.paypalcommerceratepay||{};if(!n)throw new Yi([\"payment\"]);if(!r||\"function\"!=typeof r)throw new rn('Unable to initialize payment because \"options.getFieldsValues\" argument is not provided.');this.toggleLoadingIndicator(!0);try{const e=yield this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethodscheckout\",{metadataId:this.guid}),{ratepayBirthDate:o,ratepayPhoneNumber:a,ratepayPhoneCountryCode:s}=r(),d={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:n.methodId,rate_pay:{birth_date:this.normalizeDate(o),phone:{national_number:a,country_code:s.split(\"+\")[1]}},paypal_account:{order_id:e}}};return yield this.paymentIntegrationService.submitOrder(i,t),yield this.paymentIntegrationService.submitPayment({methodId:n.methodId,paymentData:d}),yield new Promise((e,t)=>{this.initializePollingMechanism(n.methodId,e,t,n.gatewayId)})}catch(e){return this.handleError(e),new Promise((e,t)=>t())}})}finalize(){return Promise.reject(new _d)}deinitialize(){const{legalTextContainer:e}=this.paypalcommerceratepay||{},t=document.querySelectorAll('[data-id=\"fraudnetScript\"]')[0],n=document.querySelectorAll('[data-id=\"fraudnetConfig\"]')[0];if(this.deinitializePollingMechanism(),t.remove(),n.remove(),e){const t=document.getElementById(e);null==t||t.remove()}return Promise.resolve()}normalizeDate(e){const t=this.formatDate(e.getDate()),n=this.formatDate(e.getMonth()+1);return`${e.getFullYear()}-${n}-${t}`}formatDate(e){return`${e<10?0:\"\"}${e}`}renderLegalText(e,t){const n=e,i=t.split(\"#\")[1],r=document.getElementById(i),o=null==r?void 0:r.parentNode,a=document.createElement(\"div\");a.style.marginBottom=\"20px\",a.setAttribute(\"id\",n),null==o||o.prepend(a);const s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=s.Legal({fundingSource:s.Legal.FUNDING.PAY_UPON_INVOICE});if(!document.getElementById(n))throw new rn('Unable to initialize payment because \"legalTextContainerElement\" argument is not found.');d.render(`#${n}`)}handleError(e){const{onError:t}=this.paypalcommerceratepay||{};this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createFraudNetScript(e,t,n){const i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t,n),{testMode:r}=i.config,o=document.createElement(\"script\");o.setAttribute(\"type\",\"application/json\"),o.setAttribute(\"fncls\",\"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99\"),o.setAttribute(\"data-id\",\"fraudnetScript\"),this.guid=this.generateGUID();const a={f:this.guid,s:`${e}_checkout-page`,sandbox:r};o.innerHTML=JSON.stringify(a),document.body.appendChild(o)}generateGUID(){let e=\"\";for(let t=0;t<32;t+=1)e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[Math.floor(62*Math.random())];return e}loadFraudnetConfig(){const e=document.createElement(\"script\");e.setAttribute(\"data-id\",\"fraudnetConfig\"),e.src=\"https://c.paypal.com/da/r/fb.js\",document.body.appendChild(e)}reinitializeStrategy(e){return Kh(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}initializePollingMechanism(e,t,n,i){return Kh(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const n=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(n),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const r=yield this.paypalCommerceIntegrationService.getOrderStatus(\"paypalcommercealternativemethods\",{params:{useMetadata:!0}}),o=r===Uo.PollingStop,a=r===Uo.PollingError;if(o)return this.deinitializePollingMechanism(),t();if(a)return n();if(!o&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,n,i);yield this.reinitializeStrategy({methodId:e,gatewayId:i,paypalcommerceratepay:this.paypalcommerceratepay}),this.handleError(new sc)}catch(e){this.handleError(e),n()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const Zh=nn(e=>new Jh(e,Yo(e),new Ba({containerStyles:Object.assign(Object.assign({},Dh),{position:\"fixed\"})})),[{gateway:\"paypalcommercealternativemethods\",id:\"ratepay\"}]);function Qh(e){return!!e&&(\"authenticationState\"in e||\"addresses\"in e||\"instruments\"in e)}var Xh=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class ep{constructor(e,t,n,i){this.paymentIntegrationService=e,this.paypalCommerceRequestSender=t,this.paypalCommerceSdk=n,this.paypalCommerceFastlaneUtils=i}initialize(e){var t,n;return Xh(this,void 0,void 0,function*(){const{methodId:i,paypalcommercefastlane:r}=e;if(this.methodId=i,this.paypalcommercefastlane=r,!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!r)throw new rn('Unable to initialize payment because \"options.paypalcommercefastlane\" argument is not provided.');if(!r.onInit||\"function\"!=typeof r.onInit)throw new rn('Unable to initialize payment because \"options.paypalcommercefastlane.onInit\" argument is not provided or it is not a function.');if(!r.onChange||\"function\"!=typeof r.onChange)throw new rn('Unable to initialize payment because \"options.paypalcommercefastlane.onChange\" argument is not provided or it is not a function.');yield this.paymentIntegrationService.loadPaymentMethod(i);const o=this.paymentIntegrationService.getState(),a=o.getCartOrThrow(),s=o.getPaymentMethodOrThrow(i),{isDeveloperModeApplicable:d,isFastlaneStylingEnabled:c}=s.initializationData||{};this.threeDSVerificationMethod=null===(t=s.initializationData)||void 0===t?void 0:t.threeDSVerificationMethod,this.paypalFastlaneSdk=yield this.paypalCommerceSdk.getPayPalFastlaneSdk(s,a.currency.code,a.id);const l=ga(c?null===(n=null==s?void 0:s.initializationData)||void 0===n?void 0:n.fastlaneStyles:{},null==r?void 0:r.styles);yield this.paypalCommerceFastlaneUtils.initializePayPalFastlane(this.paypalFastlaneSdk,!!d,l),this.shouldRunAuthenticationFlow()&&(yield this.runPayPalAuthenticationFlowOrThrow(i)),yield this.initializePayPalPaymentComponent(),r.onInit(e=>this.renderPayPalPaymentComponent(e)),r.onChange(()=>this.handlePayPalStoredInstrumentChange(i))})}execute(e,t){return Xh(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);const{paymentData:r,methodId:o}=n,a=r&&Sd(r);try{yield this.paymentIntegrationService.submitOrder(i,t);const e=a?yield this.prepareVaultedInstrumentPaymentPayload(o,r):yield this.preparePaymentPayload(o,r);yield this.paymentIntegrationService.submitPayment(e),this.paypalCommerceFastlaneUtils.removeStorageSessionId()}catch(e){if(function(e){return\"object\"==typeof e&&null!==e&&\"message\"in e&&\"response\"in e&&\"body\"in e.response&&\"name\"in e.response.body}(e)&&\"INVALID_REQUEST\"===e.response.body.name){const e={translationKey:\"payment.errors.invalid_request_error\"};return this.handleError(e),Promise.reject()}if(e instanceof Error&&\"FastlaneError\"!==e.name)throw e;return Promise.reject()}})}finalize(){return Promise.reject(new _d)}deinitialize(){return Xh(this,void 0,void 0,function*(){return Promise.resolve()})}shouldRunAuthenticationFlow(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),n=e.getCustomerOrThrow(),i=e.getPaymentProviderCustomer(),r=Qh(i)?i:{},o=this.paypalCommerceFastlaneUtils.getStorageSessionId();return!(!n.isGuest||(null==r?void 0:r.authenticationState)===ua.CANCELED||(null==r?void 0:r.authenticationState)||o!==t.id)}runPayPalAuthenticationFlowOrThrow(e){return Xh(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),n=t.getCartOrThrow(),i=t.getCustomer(),r=t.getBillingAddress(),o=(null==i?void 0:i.email)||(null==r?void 0:r.email)||\"\",{customerContextId:a}=yield this.paypalCommerceFastlaneUtils.lookupCustomerOrThrow(o),s=yield this.paypalCommerceFastlaneUtils.triggerAuthenticationFlowOrThrow(a),{authenticationState:d,addresses:c,instruments:l}=this.paypalCommerceFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,s);yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:d,addresses:c,instruments:l}),s.authenticationState===ua.CANCELED?this.paypalCommerceFastlaneUtils.removeStorageSessionId():this.paypalCommerceFastlaneUtils.updateStorageSessionId(n.id)}catch(e){}})}initializePayPalPaymentComponent(){return Xh(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),t=e.phone,n=`${e.firstName} ${e.lastName}`.trim(),i=this.paypalCommerceFastlaneUtils.getPayPalFastlaneOrThrow(),r={fields:Object.assign({cardholderName:{prefill:n,enabled:!0}},t&&{phoneNumber:{prefill:t}})};this.paypalComponentMethods=yield i.FastlaneCardComponent(r)})}renderPayPalPaymentComponent(e){const t=this.getPayPalComponentMethodsOrThrow();if(!e)throw new rn('Unable to render card component because \"container\" argument is not provided.');t.render(e)}getPayPalComponentMethodsOrThrow(){if(!this.paypalComponentMethods)throw new Xt;return this.paypalComponentMethods}prepareVaultedInstrumentPaymentPayload(e,t){return Xh(this,void 0,void 0,function*(){const{instrumentId:n}=t,i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),r=this.isPaypalCommerceFastlaneThreeDSAvailable()&&i.config.is3dsEnabled;r||(yield this.createOrder(n));const o=r?yield this.get3DSNonce(n):n;return{methodId:e,paymentData:{formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:o}}}}})}preparePaymentPayload(e,t){return Xh(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState(),i=n.getBillingAddressOrThrow(),r=n.getPaymentMethodOrThrow(e),o=`${i.firstName} ${i.lastName}`.trim(),{getPaymentToken:a}=this.getPayPalComponentMethodsOrThrow(),{id:s}=yield a({name:{fullName:o},billingAddress:this.paypalCommerceFastlaneUtils.mapBcToPayPalAddress(i)}),d=this.isPaypalCommerceFastlaneThreeDSAvailable()&&r.config.is3dsEnabled;d||(yield this.createOrder(s));const c=d?yield this.get3DSNonce(s):s,{shouldSaveInstrument:l=!1,shouldSetAsDefaultInstrument:u=!1}=Pd(t)?t:{};return{methodId:e,paymentData:Object.assign(Object.assign({},t),{shouldSaveInstrument:l,shouldSetAsDefaultInstrument:u,formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:c}}})}})}createOrder(e){return Xh(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getCartOrThrow().id;if(this.methodId){const{orderId:n}=yield this.paypalCommerceRequestSender.createOrder(this.methodId,{cartId:t,fastlaneToken:e});this.orderId=n}})}get3DSNonce(e){var t;return Xh(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState(),i=n.getCartOrThrow(),r=n.getOrderOrThrow(),o=n.getStoreConfigOrThrow().links.checkoutLink,a=null===(t=this.paypalFastlaneSdk)||void 0===t?void 0:t.ThreeDomainSecureClient;if(!a)throw new Xt;const s={amount:r.orderAmount.toFixed(2),currency:i.currency.code,nonce:e,threeDSRequested:\"SCA_ALWAYS\"===this.threeDSVerificationMethod,transactionContext:{experience_context:{locale:\"en-US\",return_url:o,cancel_url:o}}};if(yield a.isEligible(s)){const{liabilityShift:t,authenticationState:n,nonce:i}=yield a.show();if(t===xo.No||t===xo.Unknown)throw new Bi;if(yield this.createOrder(e),n===aa.Succeeded)return i;if(n===aa.Errored)throw new Bi;if(n===aa.Cancelled)throw console.error(\"3DS check was canceled\"),new Bi}return e})}handlePayPalStoredInstrumentChange(e){return Xh(this,void 0,void 0,function*(){const t=this.paypalCommerceFastlaneUtils.getPayPalFastlaneOrThrow(),{selectionChanged:n,selectedCard:i}=yield t.profile.showCardSelector();if(n){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomer(),n=Qh(t)?t:{},r=this.paypalCommerceFastlaneUtils.mapPayPalToBcInstrument(e,i)[0];return yield this.paymentIntegrationService.updatePaymentProviderCustomer(Object.assign(Object.assign({},n),{instruments:[r]})),r}})}isPaypalCommerceFastlaneThreeDSAvailable(){return cn(this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features,\"PROJECT-7080.paypalcommerce_fastlane_three_ds\")}handleError(e){var t;(null===(t=this.paypalcommercefastlane)||void 0===t?void 0:t.onError)&&\"function\"==typeof this.paypalcommercefastlane.onError&&this.paypalcommercefastlane.onError(e)}}const tp=nn(e=>{const{getHost:t}=e.getState();return new ep(e,new Ho((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()})),ra(),ma())},[{id:\"paypalcommerceacceleratedcheckout\"}]);var np=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class ip extends Fl{constructor(e,t){super(e),this.paymentIntegrationService=e,this.threeDSecureFlow=t}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return np(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId);n.config.is3dsEnabled&&(yield this.threeDSecureFlow.prepare(n))})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return np(this,void 0,void 0,function*(){const{payment:{methodId:i=\"\"}={}}=e,r=this.paymentIntegrationService.getState();return r.getPaymentStatus()===Hc.ACKNOWLEDGE?(yield this.paymentIntegrationService.submitOrder(Object.assign(Object.assign({},e),{payment:{methodId:i}}),t),Promise.resolve()):r.getPaymentMethodOrThrow(i).config.is3dsEnabled?this.threeDSecureFlow.start(n.execute.bind(this),e,t,this._hostedForm):n.execute.call(this,e,t)})}}const rp=nn(e=>new ip(e,new ru(e,new pu(new mu((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())))),[{id:\"paypal\"}]);class op extends Fl{constructor(e,t){super(e),this.paymentIntegrationService=e,this._formPoster=t}execute(e,t){const{payment:n}=e;if(!n)throw new Vt(Tt.PaymentNotInitialized);const{paymentData:i}=n;if(!i)throw new jt(kt.MissingPayment);if(this._isThreeDSTwoExperimentOn()){const t=Object.assign(Object.assign({},i),{browser_info:Do()});e.payment&&(e.payment.paymentData=t)}return super.execute(e,t).catch(e=>Xr(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"three_d_secure_required\"})?new Promise(()=>{let t;t=this._isThreeDSTwoExperimentOn()&&!e.body.three_ds_result.merchant_data?{creq:e.body.three_ds_result.payer_auth_request}:{PaReq:e.body.three_ds_result.payer_auth_request,TermUrl:e.body.three_ds_result.callback_url,MD:e.body.three_ds_result.merchant_data},this._formPoster.postForm(e.body.three_ds_result.acs_url,t,void 0,\"_top\")}):Promise.reject(e))}finalize(e){const t=this.paymentIntegrationService.getState();return t.getOrder()&&t.getPaymentStatus()===Hc.FINALIZE&&this.paymentIntegrationService.finalizeOrder(e),super.finalize()}_isThreeDSTwoExperimentOn(){return!0===this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features[\"INT-4994.Opayo_3DS2\"]}}const ap=nn(e=>new op(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()),[{id:\"sagepay\"}]);class sp extends Iu{redirectUrl(e){window.location.replace(e)}}const dp=nn(e=>new sp((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)(),e),[{id:\"sezzle\"}]);var cp;!function(e){e.CHARGE=\"CHARGE\",e.STORE=\"STORE\"}(cp||(cp={}));var lp=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class up{constructor(e,t){this._scriptLoader=e,this._paymentIntegrationService=t}initialize({testMode:e,applicationId:t,locationId:n}){return lp(this,void 0,void 0,function*(){const i=yield this._scriptLoader.load(e);this._payments=i.payments(t,n)})}deinitialize(){return lp(this,void 0,void 0,function*(){this._formValidationSubscription&&this._formValidationSubscription.unsubscribe(),this._card&&(yield this._card.destroy()),this._formValidationSubscription=void 0,this._card=void 0,this._payments=void 0})}initializeCard({containerId:e,style:t,onValidationChange:n}){return lp(this,void 0,void 0,function*(){const{postalCode:i}=this._paymentIntegrationService.getState().getBillingAddress()||{};this._card=yield this._getPayments().card(),yield this._card.attach(`#${e}`);try{yield this._card.configure({postalCode:i,style:t})}catch(e){}n&&(this._formValidationSubscription=this._subscribeToFormValidation(this._card,n))})}tokenize(){return lp(this,void 0,void 0,function*(){const e=yield this._getCard().tokenize();if(\"OK\"!==e.status||!e.token){let t=`Tokenization failed with status: ${e.status}`;throw e.errors&&(t+=` and errors: ${JSON.stringify(e.errors)}`),new Qu(\"payment.errors.card_error\",\"SquareV2TokenizationError\",t)}return e.token})}verifyBuyer(e,t){return lp(this,void 0,void 0,function*(){return t===cp.CHARGE?this._chargeVerifyBuyer(e):this._storeVerifyBuyer(e)})}_getPayments(){return qt(this._payments,()=>new Vt(Tt.PaymentNotInitialized))}_subscribeToFormValidation(e,t){const n=[\"cardNumber\",\"cvv\"],i=new Set(n),r=[\"focusClassAdded\",\"focusClassRemoved\",\"errorClassAdded\",\"errorClassRemoved\",\"cardBrandChanged\",\"postalCodeChanged\"].map(t=>(0,rxjs__WEBPACK_IMPORTED_MODULE_31__.fromEvent)(e,t));return (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.merge)(...r).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_33__.map)(e=>{const{detail:{field:t,currentState:{isCompletelyValid:r}}}=e;return n.includes(t)&&i[r?\"delete\":\"add\"](t),0===i.size}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_34__.distinctUntilChanged)()).subscribe(t)}_getCard(){return qt(this._card,()=>new Vt(Tt.PaymentNotInitialized))}_mapToSquareBillingContact({firstName:e,lastName:t,address1:n,address2:i,city:r,stateOrProvinceCode:o,postalCode:a,countryCode:s,email:d,phone:c}){return{givenName:e,familyName:t,addressLines:[n,i],city:r,state:o,postalCode:a,countryCode:s,email:d,phone:c}}_chargeVerifyBuyer(e){return lp(this,void 0,void 0,function*(){const{getCheckoutOrThrow:t,getBillingAddressOrThrow:n}=this._paymentIntegrationService.getState(),{outstandingBalance:i,cart:r}=t(),o={amount:i.toString(),billingContact:this._mapToSquareBillingContact(n()),currencyCode:r.currency.code,intent:cp.CHARGE},a=yield this._getPayments().verifyBuyer(e,o);return a?a.token:\"\"})}_storeVerifyBuyer(e){return lp(this,void 0,void 0,function*(){const{getBillingAddressOrThrow:t}=this._paymentIntegrationService.getState(),n={billingContact:this._mapToSquareBillingContact(t()),intent:cp.STORE},i=yield this._getPayments().verifyBuyer(e,n);return i?i.token:\"\"})}}var hp=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class pp{constructor(e,t){this._paymentIntegrationService=e,this._squareV2PaymentProcessor=t}initialize(e){var t;return hp(this,void 0,void 0,function*(){if(!(null===(t=null==e?void 0:e.squarev2)||void 0===t?void 0:t.containerId))throw new rn('Unable to proceed because \"containerId\" argument is not provided.');const{methodId:n,squarev2:i}=e,{config:{testMode:r},initializationData:o}=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(n),{applicationId:a,locationId:s}=o||{};if(!a)throw new Bi;yield this._squareV2PaymentProcessor.initialize({applicationId:a,locationId:s,testMode:r}),yield this._squareV2PaymentProcessor.initializeCard(i)})}execute({payment:e}){return hp(this,void 0,void 0,function*(){if(!e)throw new Yi([\"payment\"]);const{methodId:t,paymentData:n}=e,{shouldSaveInstrument:i,shouldSetAsDefaultInstrument:r}=Pd(n)?n:{shouldSaveInstrument:!1,shouldSetAsDefaultInstrument:!1};yield this._paymentIntegrationService.submitOrder();const o=n&&Sd(n)?yield this._getVaultedInstrumentPayload(t,n):yield this._getCardPayload(t,i);yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},e),{paymentData:{formattedPayload:Object.assign(Object.assign({},o),{vault_payment_instrument:i||!1,set_as_default_stored_instrument:r||!1})}}))})}finalize(){return Promise.reject(new _d)}deinitialize(){return this._squareV2PaymentProcessor.deinitialize()}shouldVerify(){const{features:e}=this._paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings;return e[\"PROJECT-3828.add_3ds_support_on_squarev2\"]}_getCardPayload(e,t){return hp(this,void 0,void 0,function*(){const{getPaymentMethodOrThrow:n}=this._paymentIntegrationService.getState(),{initializationData:i}=n(e),r=yield this._squareV2PaymentProcessor.tokenize();if(i&&\"isSquareV2ApiV2Enabled\"in i?!i.isSquareV2ApiV2Enabled:!this.shouldVerify())return{credit_card_token:{token:r}};let o={nonce:r,token:yield this._squareV2PaymentProcessor.verifyBuyer(r,cp.CHARGE)};if(t){const e=yield this._squareV2PaymentProcessor.tokenize();o=Object.assign(Object.assign({},o),{store_card_nonce:e,store_card_token:yield this._squareV2PaymentProcessor.verifyBuyer(e,cp.STORE)})}return{credit_card_token:{token:JSON.stringify(o)}}})}_getVaultedInstrumentPayload(e,t){return hp(this,void 0,void 0,function*(){const{getPaymentMethodOrThrow:n}=this._paymentIntegrationService.getState(),{initializationData:i}=n(e),{instrumentId:r}=t,o=(i&&\"isSquareV2ApiV2Enabled\"in i?i.isSquareV2ApiV2Enabled:this.shouldVerify())?yield this._squareV2PaymentProcessor.verifyBuyer(yield this._getSquareCardIdOrThrow(e,r),cp.CHARGE):void 0;return{bigpay_token:Object.assign({token:r},o&&{three_d_secure:{token:o}})}})}_getSquareCardIdOrThrow(e,t){return hp(this,void 0,void 0,function*(){const n=yield this._paymentIntegrationService.loadPaymentMethod(e,{params:{method:e,bigpayToken:t}}),{initializationData:i}=n.getPaymentMethodOrThrow(e),{cardId:r}=i||{};if(!r)throw new Yi([\"cardId\"]);return r})}}var mp;!function(e){e.LIVE=\"https://web.squarecdn.com/v1/square.js\",e.SANDBOX=\"https://sandbox.web.squarecdn.com/v1/square.js\"}(mp||(mp={}));class yp{constructor(e){this._scriptLoader=e}load(e=!1){return t=this,n=void 0,r=function*(){return yield this._scriptLoader.loadScript(e?mp.SANDBOX:mp.LIVE),function(e){if(!function(e){return\"Square\"in e}(e))throw new Xt}(window),window.Square},new((i=void 0)||(i=Promise))(function(e,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((r=r.apply(t,n||[])).next())});// removed by dead control flow\n{ var t, n, i, r; }}}const gp=nn(e=>new pp(e,new up(new yp((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)()),e)),[{id:\"squarev2\"}]);function vp(e){return null!==e&&\"object\"==typeof e&&\"cardNumberElementOptions\"in e&&\"cardCvcElementOptions\"in e&&\"cardExpiryElementOptions\"in e&&void 0!==e.cardNumberElementOptions&&void 0!==e.cardCvcElementOptions&&void 0!==e.cardExpiryElementOptions}var fp,Sp,_p,wp;!function(e){e.Solid=\"solid\",e.Default=\"default\"}(fp||(fp={})),function(e){e.Alipay=\"alipay\",e.CardCvc=\"cardCvc\",e.CardExpiry=\"cardExpiry\",e.CardNumber=\"cardNumber\",e.CreditCard=\"card\",e.IDEAL=\"idealBank\",e.Sepa=\"iban\"}(Sp||(Sp={})),function(e){e.Alipay=\"alipay\",e.CreditCard=\"card\",e.IDEAL=\"ideal\",e.Sepa=\"sepa_debit\"}(_p||(_p={})),function(e){e.AuthFailure=\"auth_failure\"}(wp||(wp={}));class Cp extends Bt{constructor(e){super(e===wp.AuthFailure?\"User did not authenticate\":\"There was an error while processing your payment. Please try again or contact us.\"),this.type=\"stripev3_error\",this.subtype=e}}var Ip=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};const bp=[Sp.Alipay,Sp.IDEAL];class Pp{constructor(e,t){this.paymentIntegrationService=e,this.scriptLoader=t}initialize(e){return Ip(this,void 0,void 0,function*(){const{stripev3:t,methodId:n,gatewayId:i}=e;if(!i)throw new rn('Unable to initialize payment because \"gatewayId\" argument is not provided.');this.initializeOptions=t,this.isDeinitialize=!1;const r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n),{initializationData:{stripePublishableKey:o,stripeConnectedAccount:a,useIndividualCardFields:s,allowRedisplayForStoredInstruments:d}}=r;this._allowRedisplayForStoredInstruments=d;const c=this.getInitializeOptions().form;this.useIndividualCardFields=s,this.stripeV3Client=yield this.loadStripeJs(o,a),this.isCreditCard(n)&&this.shouldShowTSVHostedForm(n,i)&&c?this.hostedForm=yield this.mountCardVerificationFields(c):this.stripeElement=yield this.mountCardFields(n)})}execute(e,t){var n,i;return Ip(this,void 0,void 0,function*(){const{payment:r}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);let a,s;if(!r||!r.paymentData)throw new Yi([\"payment.paymentData\"]);const{paymentData:d,gatewayId:c,methodId:l}=r,{shouldSaveInstrument:u,shouldSetAsDefaultInstrument:h}=Pd(d)?d:{shouldSaveInstrument:!1,shouldSetAsDefaultInstrument:!1},p=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.includes)(bp,l),{isStoreCreditApplied:m}=this.paymentIntegrationService.getState().getCheckoutOrThrow();m&&(yield this.paymentIntegrationService.applyStoreCredit(m));try{p&&(yield this.paymentIntegrationService.submitOrder(o,t)),c&&(yield this.paymentIntegrationService.loadPaymentMethod(c,{params:{method:l}}));const e=this.paymentIntegrationService.getState();if(Sd(d)){yield this.paymentIntegrationService.submitOrder(o,t);const{instrumentId:n}=d,i=e.getPaymentMethodOrThrow(r.methodId).clientToken;if(!i)throw new jt(kt.MissingPaymentMethod);return yield this.executeWithVaulted(r,n,h,i)}const m=e.getPaymentMethodOrThrow(l),y=yield this.confirmStripePayment(m),{clientToken:g,method:v}=m,{id:f}=null!==(i=null!==(n=y.paymentIntent)&&void 0!==n?n:y.paymentMethod)&&void 0!==i?i:{id:\"\"};s=y.error,a={credit_card_token:{token:f},vault_payment_instrument:u,confirm:!1,set_as_default_stored_instrument:h},v===Sp.CreditCard&&(a.client_token=g),p||(yield this.paymentIntegrationService.submitOrder(o,t));const S=this.buildPaymentPayload(l,a,h);yield this.paymentIntegrationService.submitPayment(S)}catch(e){yield this.processAdditionalAction(this.handleEmptyPaymentIntentError(e,s),l,u,h)}})}finalize(){return Promise.reject(new _d)}deinitialize(){return this.hostedForm&&this.hostedForm.detach(),this.isDeinitialize=!0,this.unmountElement(),Promise.resolve()}buildPaymentPayload(e,t,n){return{methodId:e,paymentData:n?{formattedPayload:Object.assign(Object.assign({},t),{set_as_default_stored_instrument:n})}:{formattedPayload:t}}}isCancellationError(e){var t,n;return e&&-1!==(null===(n=null===(t=e.payment_intent.last_payment_error)||void 0===t?void 0:t.message)||void 0===n?void 0:n.indexOf(\"canceled\"))}isAuthError(e){return\"payment_intent_authentication_failure\"===(null==e?void 0:e.code)}isCreditCard(e){return e===_p.CreditCard}isHostedFieldAvailable(){var e;const t=this.getInitializeOptions(),n=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(null===(e=t.form)||void 0===e?void 0:e.fields,lodash__WEBPACK_IMPORTED_MODULE_5__.isEmpty);return!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEmpty)(n)}isHostedPaymentFormEnabled(e,t){const{getPaymentMethodOrThrow:n}=this.paymentIntegrationService.getState(),i=n(e,t);return Boolean(i.config.isHostedFormEnabled)}confirmStripePayment(e){return Ip(this,void 0,void 0,function*(){const{clientToken:t,method:n,returnUrl:i}=e;if(!t)throw new jt(kt.MissingPaymentMethod);switch(n){case Sp.Alipay:return this.getStripeJs().confirmAlipayPayment(t,{return_url:i},{handleActions:!1});case Sp.IDEAL:{const e=this.mapStripePaymentData(_p.IDEAL,i);return this.getStripeJs().confirmIdealPayment(t,e,{handleActions:!1})}case Sp.Sepa:{const e=this.mapStripePaymentData(_p.Sepa);return this.getStripeJs().confirmSepaDebitPayment(t,e)}default:{const e=this.useIndividualCardFields?this.getStripeCardElements()[0]:this.getStripeElement(),t=this.mapStripeBillingDetails(this.paymentIntegrationService.getState().getBillingAddress(),this.paymentIntegrationService.getState().getCustomer()),n=this._allowRedisplayForStoredInstruments;return this.getStripeJs().createPaymentMethod(Object.assign({type:_p.CreditCard,card:e,billing_details:t},n?{allow_redisplay:\"always\"}:{}))}}})}executeWithVaulted(e,t,n,i){var r;return Ip(this,void 0,void 0,function*(){const o={bigpay_token:{token:t},confirm:!0,client_token:i,set_as_default_stored_instrument:n};if(this.isHostedPaymentFormEnabled(e.methodId,e.gatewayId)&&this.hostedForm){const t=this.hostedForm;return e.paymentData&&Sd(e.paymentData)&&(e.paymentData=Object.assign(Object.assign({},e.paymentData),{instrumentId:JSON.stringify({token:(null===(r=e.paymentData)||void 0===r?void 0:r.instrumentId)||\"\",client_token:i})})),yield t.validate(),yield t.submit(e),this.paymentIntegrationService.loadCurrentOrder()}const a=this.buildPaymentPayload(e.methodId,o,n);return this.paymentIntegrationService.submitPayment(a)})}getInitializeOptions(){if(!this.initializeOptions)throw new Vt(Tt.PaymentNotInitialized);return this.initializeOptions}getStripeCardElements(){if(!this.stripeCardElements)throw new Vt(Tt.PaymentNotInitialized);return this.stripeCardElements}getStripeElement(){if(!this.stripeElement)throw new Vt(Tt.PaymentNotInitialized);return this.stripeElement}getStripeJs(){if(!this.stripeV3Client)throw new Vt(Tt.PaymentNotInitialized);return this.stripeV3Client}handleEmptyPaymentIntentError(e,t){return Xr(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"required_field\"})&&t?new Error(t.message):e}loadStripeJs(e,t){return Ip(this,void 0,void 0,function*(){return this.stripeV3Client?Promise.resolve(this.stripeV3Client):this.scriptLoader.load(e,t,this.paymentIntegrationService.getState().getLocale())})}mapStripeAddress(e){if(e){const{city:t,countryCode:n,address1:i,address2:r,postalCode:o,stateOrProvinceCode:a}=e;return{city:t,country:n,line1:i,line2:r,postal_code:o,state:a}}return{line1:\"\"}}mapStripeBillingDetails(e,t){const{firstName:n,lastName:i}=e||t||{firstName:\"Guest\",lastName:\"\"},r=`${n} ${i}`.trim(),{options:o}=this.getInitializeOptions();if(this.useIndividualCardFields&&vp(o)){const{zipCodeElementOptions:t}=o;if(t){const n=document.getElementById(t.containerId)?document.getElementById(t.containerId).value:\"\";n&&e&&(e=Object.assign(Object.assign({},e),{postalCode:n}))}}const a={address:this.mapStripeAddress(e)};if(t&&t.addresses[0]&&function(e){return\"object\"==typeof e&&null!==e&&\"id\"in e&&void 0!==e.id}(t.addresses[0])){const e=t.addresses[0],{email:n}=t,{phone:i}=e;return i?Object.assign(Object.assign({},a),{email:n,name:r,phone:i}):Object.assign(Object.assign({},a),{email:n,name:r})}if(e){const{email:t,phone:n}=e;return n?Object.assign(Object.assign({},a),{email:t,name:r,phone:n}):Object.assign(Object.assign({},a),{email:t,name:r})}return Object.assign(Object.assign({},a),{name:r})}mapStripePaymentData(e,t){const n=this.paymentIntegrationService.getState().getCustomer(),i=this.paymentIntegrationService.getState().getBillingAddress(),r={payment_method:{[e]:this.getStripeElement(),billing_details:this.mapStripeBillingDetails(i,n)}};return e===_p.IDEAL?Object.assign(Object.assign({},r),{return_url:t}):r}mountCardFields(e){const{options:t,containerId:n}=this.getInitializeOptions();let i;return new Promise((r,o)=>{switch(this.stripeElements||(this.stripeElements=this.getStripeJs().elements()),e){case Sp.CreditCard:if(this.useIndividualCardFields&&vp(t)){const{cardNumberElementOptions:e,cardExpiryElementOptions:n,cardCvcElementOptions:r}=t,a=this.stripeElements.getElement(Sp.CardNumber)||this.stripeElements.create(Sp.CardNumber,e),s=this.stripeElements.getElement(Sp.CardExpiry)||this.stripeElements.create(Sp.CardExpiry,n),d=this.stripeElements.getElement(Sp.CardCvc)||this.stripeElements.create(Sp.CardCvc,r);this.stripeCardElements=[a,s,d],i=this.stripeCardElements[0];try{a.mount(`#${e.containerId}`),s.mount(`#${n.containerId}`),d.mount(`#${r.containerId}`)}catch(e){this.isDeinitialize||o(new rn(\"Unable to mount Stripe component without valid container ID.\"))}}else{i=this.stripeElements.getElement(e)||this.stripeElements.create(e,t);try{i.mount(`#${n}`)}catch(e){this.isDeinitialize||o(new rn(\"Unable to mount Stripe component without valid container ID.\"))}}break;case Sp.IDEAL:case Sp.Sepa:i=this.stripeElements.getElement(e)||this.stripeElements.create(e,t);try{i.mount(`#${n}`)}catch(e){this.isDeinitialize||o(new rn(\"Unable to mount Stripe component without valid container ID.\"))}case Sp.Alipay:}r(i)})}mountCardVerificationFields(e){return Ip(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getStoreConfig();if(!t)throw new jt(kt.MissingCheckoutConfig);const n=t.paymentSettings.bigpayBaseUrl,i=this.paymentIntegrationService.createHostedForm(n,e);return yield i.attach(),i})}processAdditionalAction(e,t,n=!1,i=!1){return Ip(this,void 0,void 0,function*(){if(!Xr(e))throw e;const r=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"additional_action_required\"}),o=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"three_d_secure_required\"});if(r){const t=e.body.additional_action_required;if(t&&\"redirect_to_url\"===t.type)return new Promise(()=>{t.data.redirect_url&&window.location.replace(t.data.redirect_url)})}if(o){const r=e.body.three_ds_result.token,o=!1;let a,s=!1;try{a=yield this.getStripeJs().confirmCardPayment(r)}catch(e){s=!0}if(null==a?void 0:a.error){if(this.isCancellationError(a.error))throw new Mn;if(this.isAuthError(a.error))throw new Cp(wp.AuthFailure);throw new Error(a.error.message)}const d={credit_card_token:{token:this.getPaymentToken(null==a?void 0:a.paymentIntent,r,s)},vault_payment_instrument:n,confirm:o},c=this.buildPaymentPayload(t,d,i);try{return yield this.paymentIntegrationService.submitPayment(c)}catch(e){throw this.handleEmptyPaymentIntentError(e,null==a?void 0:a.error)}}throw e})}getPaymentToken(e,t,n){return!e||n?t:e.id}shouldShowTSVHostedForm(e,t){return this.isHostedFieldAvailable()&&this.isHostedPaymentFormEnabled(e,t)}unmountElement(){this.stripeElement&&(this.stripeElement.unmount(),this.stripeElement=void 0)}}class Op{constructor(e,t=window){this.scriptLoader=e,this.stripeWindow=t}load(e,t,n){return this.scriptLoader.loadScript(\"https://js.stripe.com/v3/\").then(()=>{if(!this.stripeWindow.Stripe)throw new Xt;return this.stripeWindow.Stripe(e,{stripeAccount:t,locale:n,betas:[\"payment_intent_beta_3\",\"alipay_pm_beta_1\"],apiVersion:\"2020-03-02;alipay_beta=v1\"})})}}const Ep=nn(e=>new Pp(e,new Op((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),[{gateway:\"stripev3\"}]),Ap={ar:[\"ar\"],bg:[\"bg\"],cs:[\"cs\"],da:[\"da\"],de:[\"de\"],el:[\"el\"],en:[\"en\",\"en-GB\"],es:[\"es\",\"es-419\"],et:[\"et\"],fi:[\"fi\"],fil:[\"fil\"],fr:[\"fr\",\"fr-CA\"],he:[\"he\"],hr:[\"hr\"],hu:[\"hu\"],id:[\"id\"],it:[\"it\"],ja:[\"ja\"],ko:[\"ko\"],lt:[\"lt\"],lv:[\"lv\"],ms:[\"ms\"],mt:[\"mt\"],nb:[\"nb\"],nl:[\"nl\"],pl:[\"pl\"],pt:[\"pt\",\"pt-BR\"],ro:[\"ro\"],ru:[\"ru\"],sk:[\"sk\"],sl:[\"sl\"],sv:[\"sv\"],th:[\"th\"],tr:[\"tr\"],vi:[\"vi\"],zh:[\"zh\",\"zh-HK\",\"zh-TW\"]};function kp(e){const[t,n]=e.replace(/_/g,\"-\").toLowerCase().split(\"-\"),i=Ap[t];if(!i)return\"auto\";const r=n?`${t}-${n.toUpperCase()}`:t;return i.indexOf(r)>-1?r:i[0]}var Tp=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Dp{constructor(e,t,n){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=n}initialize(e){return Tp(this,void 0,void 0,function*(){const{stripeupe:t,methodId:n,gatewayId:i}=e;if(!(null==t?void 0:t.containerId))throw new Vt(Tt.PaymentNotInitialized);if(!i)throw new rn('Unable to initialize payment because \"gatewayId\" argument is not provided.');return this._loadStripeElement(t,i,n).catch(e=>{var n;return null===(n=t.onError)||void 0===n?void 0:n.call(t,e)}),this.stripeIntegrationService.initCheckoutEventsSubscription(i,n,t,this._stripeElements),Promise.resolve()})}execute(e,t){return Tp(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n||!n.paymentData)throw new Yi([\"payment.paymentData\"]);if(!this._stripeUPEClient)throw new Vt(Tt.PaymentNotInitialized);const{paymentData:r,methodId:o,gatewayId:a}=n,{shouldSaveInstrument:s=!1,shouldSetAsDefaultInstrument:d=!1}=Pd(r)?r:{},c=this.paymentIntegrationService.getState(),{isStoreCreditApplied:l}=c.getCheckoutOrThrow(),u=c.getPaymentProviderCustomerOrThrow(),h=(Da(u)?u:{}).stripeLinkAuthenticationState;if(l&&(yield this.paymentIntegrationService.applyStoreCredit(l)),a){yield this.stripeIntegrationService.updateStripePaymentIntent(a,o);const{email:e}=c.getCustomerOrThrow();if(void 0!==h&&!e){const e=c.getBillingAddressOrThrow();yield this.paymentIntegrationService.updateBillingAddress(e)}}if(yield this.paymentIntegrationService.submitOrder(i,t),Sd(r)){const{instrumentId:e}=r;return void(yield this._executeWithVaulted(n.methodId,e,d))}yield this._executeWithStripeConfirmation(n.methodId,!h&&s,d)})}finalize(){return Promise.reject(new _d)}deinitialize(){var e,t;return null===(t=null===(e=this._stripeElements)||void 0===e?void 0:e.getElement(ba.PAYMENT))||void 0===t||t.unmount(),this.stripeIntegrationService.deinitialize(),this._stripeElements=void 0,this._stripeUPEClient=void 0,Promise.resolve()}_executeWithStripeConfirmation(e,t,n){return Tp(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),{clientToken:r}=i.getPaymentMethodOrThrow(e),o=this._getPaymentPayload(e,r||\"\",t,n);try{yield this.paymentIntegrationService.submitPayment(o)}catch(i){yield this._processAdditionalActionWithStripeConfirmation(i,e,t,n)}})}_executeWithVaulted(e,t,n){var i;return Tp(this,void 0,void 0,function*(){const r=this.paymentIntegrationService.getState(),o=r.getPaymentMethodOrThrow(e),a=null===(i=r.getCart())||void 0===i?void 0:i.id;try{const i={methodId:e,paymentData:{formattedPayload:{cart_id:a,bigpay_token:{token:t},confirm:!1,client_token:o.clientToken,set_as_default_stored_instrument:n}}};return yield this.paymentIntegrationService.submitPayment(i)}catch(t){return this._processVaultedAdditionalAction(t,e,n)}})}_loadStripeElement(e,t,n){return Tp(this,void 0,void 0,function*(){const{containerId:i,style:r,render:o,initStripeElementUpdateTrigger:a}=e,s=yield this.paymentIntegrationService.loadPaymentMethod(t,{params:{method:n}}),d=s.getPaymentMethodOrThrow(n),{checkoutSettings:c}=s.getStoreConfigOrThrow();if(!Ta(d))throw new jt(kt.MissingPaymentMethod);const{clientToken:l,initializationData:u}=d,{shopperLanguage:h,allowRedisplayForStoredInstruments:p=!1}=u;if(this._allowRedisplayForStoredInstruments=p,!l)throw new jt(kt.MissingPaymentMethod);let m;if(this._stripeUPEClient=yield this._loadStripeJs(u),this._isStripeElementUpdateEnabled=!!c.features[\"PI-1679.trigger_update_stripe_payment_element\"]&&\"function\"==typeof a,r){const e=r;m={variables:this.stripeIntegrationService.mapAppearanceVariables(r),rules:{\".Input\":this.stripeIntegrationService.mapInputAppearanceRules(e)}}}this._stripeElements=yield this.scriptLoader.getElements(this._stripeUPEClient,{clientSecret:l,locale:kp(h),appearance:m});const{getBillingAddress:y,getShippingAddress:g}=s,{postalCode:v}=g()||y()||{},f=this._stripeElements.getElement(ba.PAYMENT)||this._stripeElements.create(ba.PAYMENT,Object.assign({fields:{billingDetails:{email:Ia.NEVER,address:{country:Ia.NEVER,city:Ia.NEVER,postalCode:v?Ia.NEVER:Ia.AUTO}}},wallets:{applePay:Ia.NEVER,googlePay:Ia.NEVER}},this._getStripeElementTerms()));this.stripeIntegrationService.mountElement(f,i),f.on(Oa.READY,()=>{o()}),f.on(Oa.CHANGE,e=>{(null==e?void 0:e.value)&&\"type\"in e.value&&this._updateStripeLinkStateByElementType(e.value.type)}),this._isStripeElementUpdateEnabled&&(null==a||a(this._updateStripeElement.bind(this)))})}_processAdditionalActionWithStripeConfirmation(e,t,n=!1,i=!1){return Tp(this,void 0,void 0,function*(){if(!Xr(e)||!this.stripeIntegrationService.isAdditionalActionError(e.body.errors))throw e;if(!this._stripeUPEClient||!this._stripeElements)throw new Vt(Tt.PaymentNotInitialized);const{data:r}=e.body.additional_action_required,{token:o}=r,{paymentIntent:a}=yield this._confirmStripePaymentOrThrow(t,r),s=this._getPaymentPayload(t,(null==a?void 0:a.id)||o,n,i);try{yield this.paymentIntegrationService.submitPayment(s)}catch(e){this.stripeIntegrationService.throwPaymentConfirmationProceedMessage()}})}_confirmStripePaymentOrThrow(e,t){var n,i;return Tp(this,void 0,void 0,function*(){const{token:r,redirect_url:o}=t,a=this.stripeIntegrationService.mapStripePaymentData(this._stripeElements,o,!!this._allowRedisplayForStoredInstruments);let s;try{const t=(yield this.stripeIntegrationService.isPaymentCompleted(e,this._stripeUPEClient))?yield null===(i=this._stripeUPEClient)||void 0===i?void 0:i.retrievePaymentIntent(r||\"\"):yield null===(n=this._stripeUPEClient)||void 0===n?void 0:n.confirmPayment(a);if(s=null==t?void 0:t.error,s||!(null==t?void 0:t.paymentIntent))throw new Li;return t}catch(e){this.stripeIntegrationService.throwStripeError(s)}})}_processVaultedAdditionalAction(e,t,n=!1){var i;return Tp(this,void 0,void 0,function*(){if(!t||!Xr(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"three_d_secure_required\"}))throw e;if(!this._stripeUPEClient||!this._stripeElements)throw new Vt(Tt.PaymentNotInitialized);const r=e.body.three_ds_result.token;let o,a=!1;try{o=yield this._stripeUPEClient.confirmCardPayment(r)}catch(e){try{o=yield this._stripeUPEClient.retrievePaymentIntent(r)}catch(e){a=!0}}if((null==o?void 0:o.error)&&this.stripeIntegrationService.throwStripeError(o.error),!(null==o?void 0:o.paymentIntent)&&!a)throw new qn;const s=this._getPaymentPayload(t,a?r:null===(i=null==o?void 0:o.paymentIntent)||void 0===i?void 0:i.id,!1,n);return this.paymentIntegrationService.submitPayment(s)})}_loadStripeJs(e){return Tp(this,void 0,void 0,function*(){return this._stripeUPEClient?this._stripeUPEClient:this.scriptLoader.getStripeClient(e,Ma,za)})}_getPaymentPayload(e,t,n=!1,i=!1){var r;return{methodId:e,paymentData:{formattedPayload:{cart_id:(null===(r=this.paymentIntegrationService.getState().getCart())||void 0===r?void 0:r.id)||\"\",credit_card_token:{token:t},confirm:!1,vault_payment_instrument:n,set_as_default_stored_instrument:i}}}}_updateStripeElement({shouldShowTerms:e}){var t;const n=null===(t=this._stripeElements)||void 0===t?void 0:t.getElement(ba.PAYMENT);null==n||n.update(Object.assign({},this._getStripeElementTerms(e)))}_getStripeElementTerms(e){let t=Ia.AUTO;return this._isStripeElementUpdateEnabled&&(t=e?Ia.AUTO:Ia.NEVER),{terms:{card:t}}}_updateStripeLinkStateByElementType(e){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomerOrThrow(),n=e===Ca.Link;!Da(t)&&n&&this.paymentIntegrationService.updatePaymentProviderCustomer({stripeLinkAuthenticationState:n})}}const Mp=nn(e=>{const t=new ka((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)());return new Dp(e,t,new Ua(e,t))},[{gateway:\"stripeupe\"},{gateway:\"stripeupe\",id:\"klarna\"}]);var zp=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Np{constructor(e,t,n){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=n}initialize(e){var t;return zp(this,void 0,void 0,function*(){const{stripeocs:n,methodId:i,gatewayId:r}=e;if(!(null==n?void 0:n.containerId))throw new Vt(Tt.PaymentNotInitialized);if(!r)throw new rn('Unable to initialize payment because \"gatewayId\" argument is not provided.');try{yield this._initializeStripeElement(n,r,i)}catch(e){e instanceof Error&&(null===(t=n.onError)||void 0===t||t.call(n,e))}this.stripeIntegrationService.initCheckoutEventsSubscription(r,i,n,this.stripeElements)})}execute(e,t){return zp(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),{methodId:r,gatewayId:o}=n||{};if(!this.stripeClient)throw new Vt(Tt.PaymentNotInitialized);if(!o||!r)throw new rn('Unable to initialize payment because \"gatewayId\" or \"methodId\" argument is not provided.');const a=this.paymentIntegrationService.getState(),{isStoreCreditApplied:s}=a.getCheckoutOrThrow();s&&(yield this.paymentIntegrationService.applyStoreCredit(s)),yield this.stripeIntegrationService.updateStripePaymentIntent(o,r),yield this.paymentIntegrationService.submitOrder(i,t);const{clientToken:d}=a.getPaymentMethodOrThrow(r),c=this._getPaymentPayload(r,d||\"\");try{yield this.paymentIntegrationService.submitPayment(c)}catch(e){yield this._processAdditionalAction(e,r)}})}finalize(){return Promise.reject(new _d)}deinitialize(){var e;const t=null===(e=this.stripeElements)||void 0===e?void 0:e.getElement(ba.PAYMENT);return null==t||t.unmount(),null==t||t.destroy(),this.stripeIntegrationService.deinitialize(),this.stripeElements=void 0,this.stripeClient=void 0,Promise.resolve()}_initializeStripeElement(e,t,n){return zp(this,void 0,void 0,function*(){let i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n);if((null==i?void 0:i.clientToken)||(i=(yield this.paymentIntegrationService.loadPaymentMethod(t,{params:{method:n}})).getPaymentMethodOrThrow(n)),!Ta(i))throw new jt(kt.MissingPaymentMethod);const{clientToken:r,initializationData:o}=i,{shopperLanguage:a,customerSessionToken:s,enableLink:d}=o;if(!r)throw new jt(kt.MissingPaymentMethod);this.stripeClient=yield this._loadStripeJs(o);const{appearance:c,containerId:l,fonts:u,layout:h,render:p,paymentMethodSelect:m,handleClosePaymentMethod:y,togglePreloader:g}=e;this.stripeElements=yield this.scriptLoader.getElements(this.stripeClient,{clientSecret:r,customerSessionClientSecret:s,locale:kp(a),appearance:c,fonts:u});const{getBillingAddress:v,getShippingAddress:f}=this.paymentIntegrationService.getState(),S=v(),{postalCode:_}=f()||S||{},w=this.stripeElements.getElement(ba.PAYMENT)||this.stripeElements.create(ba.PAYMENT,{fields:{billingDetails:{email:Ia.NEVER,address:{country:Ia.NEVER,city:Ia.NEVER,postalCode:_?Ia.NEVER:Ia.AUTO}}},wallets:{applePay:Ia.NEVER,googlePay:Ia.NEVER,link:d?Ia.AUTO:Ia.NEVER},layout:h,savePaymentMethod:{maxVisiblePaymentMethods:20},defaultValues:{billingDetails:{email:(null==S?void 0:S.email)||\"\"}}});this.stripeIntegrationService.mountElement(w,l),w.on(Oa.LOADER_START,()=>{null==g||g(!1)}),w.on(Oa.READY,()=>{p()}),w.on(Oa.CHANGE,e=>{this._onStripeElementChange(e,t,n,m)}),null==y||y(this._collapseStripeElement.bind(this))})}_loadStripeJs(e){return zp(this,void 0,void 0,function*(){return this.stripeClient?this.stripeClient:this.scriptLoader.getStripeClient(e)})}_collapseStripeElement(){var e;const t=null===(e=this.stripeElements)||void 0===e?void 0:e.getElement(ba.PAYMENT);null==t||t.collapse()}_getPaymentPayload(e,t,n){var i;const r=(null===(i=this.paymentIntegrationService.getState().getCart())||void 0===i?void 0:i.id)||\"\",{card:o,us_bank_account:a}=n||{},s=this._shouldSaveInstrument(o)||this._shouldSaveInstrument(a),d=this._getTokenizedOptions(t,n);return{methodId:e,paymentData:{formattedPayload:Object.assign({cart_id:r,confirm:!1,method:this.selectedMethodId,vault_payment_instrument:s},d)}}}_processAdditionalAction(e,t){return zp(this,void 0,void 0,function*(){if(!Xr(e)||!this.stripeIntegrationService.isAdditionalActionError(e.body.errors))throw e;if(!this.stripeClient||!this.stripeElements)throw new Vt(Tt.PaymentNotInitialized);const{data:n}=e.body.additional_action_required,{token:i}=n,{paymentIntent:r}=yield this._confirmStripePaymentOrThrow(t,n),{client_secret:o,payment_method_options:a}=r||{},s=this._getPaymentPayload(t,o||i,a);try{return yield this.paymentIntegrationService.submitPayment(s)}catch(e){this.stripeIntegrationService.throwPaymentConfirmationProceedMessage()}})}_confirmStripePaymentOrThrow(e,t){var n,i;return zp(this,void 0,void 0,function*(){const{token:r,redirect_url:o}=t,a=this.stripeIntegrationService.mapStripePaymentData(this.stripeElements,o);let s;try{const t=(yield this.stripeIntegrationService.isPaymentCompleted(e,this.stripeClient))?yield null===(i=this.stripeClient)||void 0===i?void 0:i.retrievePaymentIntent(r||\"\"):yield null===(n=this.stripeClient)||void 0===n?void 0:n.confirmPayment(a);if(s=null==t?void 0:t.error,s||!(null==t?void 0:t.paymentIntent))throw new Li;return t}catch(e){return this.stripeIntegrationService.throwStripeError(s)}})}_onStripeElementChange(e,t,n,i){(e=>\"object\"==typeof e&&null!==e&&\"value\"in e&&\"collapsed\"in e)(e)&&!e.collapsed&&(this.selectedMethodId=e.value.type,null==i||i(`${t}-${n}`))}_shouldSaveInstrument(e){const t=null==e?void 0:e.setup_future_usage;return t===Ea.ON_SESSION||t===Ea.OFF_SESSION}_getTokenizedOptions(e,t){return this._shouldSaveInstrument(null==t?void 0:t.us_bank_account)?{tokenized_ach:{token:e}}:{credit_card_token:{token:e}}}}const xp=nn(e=>{const t=new ka((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)());return new Np(e,t,new Ua(e,t))},[{gateway:\"stripeocs\",id:\"optimized_checkout\"}]);var Fp;!function(e){e.CARD_NUMBER=\"card-number\",e.CVV=\"cvv\",e.EXPIRY=\"expiry\"}(Fp||(Fp={}));var Rp=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Lp{constructor(e,t,n){this.paymentIntegrationService=e,this.tdOnlineMartScriptLoader=t,this.formPoster=n,this.tdInputs=[{id:\"ccNumber\",fieldType:Fp.CARD_NUMBER},{id:\"ccCvv\",fieldType:Fp.CVV},{id:\"ccExpiry\",fieldType:Fp.EXPIRY}]}initialize(e){return Rp(this,void 0,void 0,function*(){const{methodId:t}=e;if(!t)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');this.tdOnlineMartClient=yield this.loadTDOnlineMartJs(),this.mountHostedFields(t)})}execute(e,t){return Rp(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);if(!n.methodId)throw new jt(kt.MissingPaymentMethod);const r=yield this.getPaymentPayloadOrThrow(n);yield this.paymentIntegrationService.submitOrder(i,t);try{yield this.paymentIntegrationService.submitPayment(r)}catch(e){yield this.processWithAdditionalAction(e)}})}finalize(){return Promise.reject(new _d)}deinitialize(){return this.tdOnlineMartClient=void 0,this.tdInputs.forEach(({inputElement:e})=>{null==e||e.unmount()}),Promise.resolve()}getPaymentPayloadOrThrow(e){return Rp(this,void 0,void 0,function*(){const{methodId:t,paymentData:n}=e,{shouldSaveInstrument:i=!1,shouldSetAsDefaultInstrument:r=!1}=Pd(n)?n:{},o={browser_info:Do(),shouldSaveInstrument:i,shouldSetAsDefaultInstrument:r};if(Pd(n)&&Sd(n)&&n.instrumentId){const e=!!this.paymentIntegrationService.getState().getCartOrThrow().lineItems.digitalItems.length,i=!this.isTrustedVaultingInstrument(n.instrumentId)||e;return{methodId:t,paymentData:Object.assign(Object.assign(Object.assign({},o),{instrumentId:n.instrumentId}),i?{nonce:n.instrumentId}:{})}}let a;try{a=yield this.getTokenOrThrow()}catch(e){this.throwTokenizationError(e)}return{methodId:t,paymentData:Object.assign(Object.assign({},o),{nonce:a})}})}mountHostedFields(e){const t=this.getHostedFieldsOptions(),n=this.getTDOnlineMartClientOrThrow();this.tdInputs.forEach(i=>{const r=`${e}-${i.id}`;document.getElementById(r)&&(i.inputElement=n.create(i.fieldType,t),i.inputElement.mount(`#${r}`))})}loadTDOnlineMartJs(){return Rp(this,void 0,void 0,function*(){return this.tdOnlineMartClient?this.tdOnlineMartClient:this.tdOnlineMartScriptLoader.load()})}getTokenOrThrow(){return new Promise((e,t)=>{this.getTDOnlineMartClientOrThrow().createToken(n=>{const{error:i,token:r}=n;if(i||!r)return t(i);e(r)})})}getTDOnlineMartClientOrThrow(){if(!this.tdOnlineMartClient)throw new Vt(Tt.PaymentNotInitialized);return this.tdOnlineMartClient}processWithAdditionalAction(e){return Rp(this,void 0,void 0,function*(){if(!function(e){return Xr(e)&&(t=e.body,(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isObject)(t)&&\"object\"==typeof t&&\"errors\"in t&&\"three_ds_result\"in t&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isArray)(t.errors)&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(t.errors,{code:\"three_d_secure_required\"}));// removed by dead control flow\n{ var t; }}(e))throw e;const{three_ds_result:t}=e.body,{acs_url:n,payer_auth_request:i,merchant_data:r}=t||{};if(!n||!i||!r)throw new Yi([\"formUrl\",\"threeDSSessionData\",\"creq\"]);return new Promise(e=>{this.formPoster.postForm(n,{threeDSSessionData:i,creq:r},e,\"_top\")})})}throwTokenizationError(e){if(!function(e){return\"object\"==typeof e&&null!==e&&\"field\"in e&&\"type\"in e&&\"message\"in e}(e))throw new jt(kt.MissingPaymentToken);throw new Error(e.message)}getHostedFieldsOptions(){return{style:{error:{color:\"#d14343\"}},classes:{error:\"form-input--error\"}}}isTrustedVaultingInstrument(e){const t=this.paymentIntegrationService.getState().getInstruments(),n=null==t?void 0:t.find(t=>Kd(t)&&t.bigpayToken===e);return!(Kd(n)&&!n.trustedShippingAddress)}}class Bp{constructor(e,t=window){this.scriptLoader=e,this.tdOnlineMartWindow=t}load(){return e=this,t=void 0,i=function*(){if(this.tdOnlineMartWindow.customcheckout||(yield this.scriptLoader.loadScript(\"https://libs.na.bambora.com/customcheckout/1/customcheckout.js\")),!this.tdOnlineMartWindow.customcheckout)throw new Xt;return this.tdOnlineMartWindow.customcheckout()},new((n=void 0)||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())});// removed by dead control flow\n{ var e, t, n, i; }}}const jp=nn(e=>new Lp(e,new Bp((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)()),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()),[{id:\"tdonlinemart\"}]);var Up=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};const qp=\"Payment cannot continue\";let Vp;class Gp extends Fl{initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return Up(this,void 0,void 0,function*(){if(this._initializeOptions=e&&e.worldpay,!this._initializeOptions)throw new Vt(Tt.PaymentNotInitialized);return t.initialize.call(this,e)})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return Up(this,void 0,void 0,function*(){const{payment:i}=e;if(Vp=this._submitAdditionalAction(),!i)throw new Yi([\"payment\"]);try{return yield n.execute.call(this,e,t)}catch(e){return this._processAdditionalAction(e,i)}})}_processAdditionalAction(e,t){return Up(this,void 0,void 0,function*(){return Xr(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"additional_action_required\"})?new Promise((n,i)=>{const r=e=>Up(this,void 0,void 0,function*(){if(\"string\"!=typeof e.data||!this._isValidJsonWithSessionId(e.data))return i(new Error(qp));window.removeEventListener(\"message\",r),o.remove();const a=JSON.parse(e.data),s=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.merge)({},t,{paymentData:{threeDSecure:{token:a.SessionId}}});try{n(yield Vp(s))}catch(e){if(!Xr(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"three_d_secure_required\"}))return i(e);if(!this._initializeOptions)return i(new Vt(Tt.PaymentNotInitialized));const{onLoad:t}=this._initializeOptions,n=this._createIframe(e.body.three_ds_result);try{t(n,()=>i(new Error(\"Payment was cancelled\")))}catch(e){i(new Error(qp))}}});let o;window.addEventListener(\"message\",r);try{o=this._createHiddenIframe(e.body)}catch(e){throw window.removeEventListener(\"message\",r),new Error(qp)}}):Promise.reject(e)})}_createHiddenIframe(e){const t=document.createElement(\"iframe\");if(document.body.appendChild(t),!t.contentWindow)throw new Error;t.id=\"worldpay_hosted_hidden_payment_page\",t.height=\"0px\",t.width=\"0px\";const n=document.createElement(\"form\"),i=\"collectionForm\";n.id=i,n.name=\"devicedata\",n.method=\"post\";const r=e.additional_action_required.data.redirect_url;n.action=r;const o=document.createElement(\"input\");o.name=\"Bin\",o.type=\"hidden\",o.value=e.provider_data.source_id,n.appendChild(o);const a=document.createElement(\"input\");a.name=\"JWT\",a.type=\"hidden\",a.value=e.provider_data.data,n.appendChild(a);const s=document.createElement(\"button\");s.type=\"submit\",s.id=\"btnsubmit\",n.appendChild(s),navigator.userAgent.match(\"Firefox\")?t.srcdoc=n.outerHTML:t.contentWindow.document.body.appendChild(n);const d=document.createElement(\"script\");return d.innerHTML=`\\n            document.getElementById('${i}').submit();\\n        `,t.contentWindow.document.body.appendChild(d),t}_createIframe(e){const t=document.createElement(\"form\");t.id=\"challengeForm\",t.method=\"POST\",t.action=e.acs_url;const n=document.createElement(\"input\");n.name=\"JWT\",n.type=\"hidden\",n.value=e.payer_auth_request,t.appendChild(n);const i=document.createElement(\"input\");i.name=\"MD\",i.type=\"hidden\",i.value=`merchantSessionId=${e.merchant_data}`,t.appendChild(i);const r=document.createElement(\"script\");r.type=\"text/javascript\",r.innerHTML=\"window.onload = function() { document.getElementById('challengeForm').submit(); }\";const o=document.createElement(\"iframe\");return o.name=\"worldpay_hosted_payment_page\",o.height=\"400\",o.width=\"100%\",o.srcdoc=`${t.outerHTML} ${r.outerHTML}`,o}_submitAdditionalAction(){if(this._shouldRenderHostedForm){if(!this._hostedForm)throw new Vt(Tt.PaymentNotInitialized);const e=this._hostedForm;return t=>Up(this,void 0,void 0,function*(){yield e.submit(t)})}return e=>Up(this,void 0,void 0,function*(){yield this._paymentIntegrationService.submitPayment(e)})}_isValidJsonWithSessionId(e){try{return!!JSON.parse(e).SessionId}catch(e){return!1}}}const Hp=nn(e=>new Gp(e),[{id:\"worldpayaccess\"}]);class $p{constructor(e){this._requestSender=e}saveExternalId(e,t){return n=this,i=void 0,o=function*(){const n=`/api/storefront/payment/${e}/save-external-id`,i={headers:Object.assign({Accept:ti.JsonV1,\"X-API-INTERNAL\":Xn},ni),body:{externalId:t,provider:e}};yield this._requestSender.post(n,i)},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}}class Wp{constructor(e,t){this.paymentIntegrationService=e,this.storefrontPaymentRequestSender=t}initialize(){return Promise.resolve()}execute(e,t){return n=this,i=void 0,o=function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Yi([\"payment\"]);const{methodId:r}=n,{getPaymentMethodOrThrow:o}=yield this.paymentIntegrationService.loadPaymentMethod(r,t),{clientToken:a,initializationData:s}=o(r),d=null==s?void 0:s.redirectUrl;if(!a||!d)throw new jt(kt.MissingPaymentMethod);const{id:c}=JSON.parse(a);if(!c)throw new jt(kt.MissingPaymentToken);const{isStoreCreditApplied:l}=this.paymentIntegrationService.getState().getCheckoutOrThrow();yield this.paymentIntegrationService.applyStoreCredit(l),yield this.paymentIntegrationService.initializePayment(r,{useStoreCredit:l}),yield this.paymentIntegrationService.submitOrder(i,t),yield this._prepareForReferredRegistration(r,c);try{yield this.paymentIntegrationService.submitPayment({methodId:r,paymentData:{nonce:c}})}catch(e){if(Xr(e)&&\"additional_action_required\"===e.body.status)return new Promise(()=>window.location.replace(d));throw e}},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}finalize(){return Promise.reject(new _d)}deinitialize(){return Promise.resolve()}_prepareForReferredRegistration(e,t){return this.storefrontPaymentRequestSender.saveExternalId(e,t)}}const Yp=nn(e=>{const{getHost:t}=e.getState(),i=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()}),r=new $p(i);return new Wp(e,r)},[{id:\"zip\"},{id:\"quadpay\"}]);var Kp,Jp;!function(e){e.LoadCountriesRequested=\"LOAD_COUNTRIES_REQUESTED\",e.LoadCountriesSucceeded=\"LOAD_COUNTRIES_SUCCEEDED\",e.LoadCountriesFailed=\"LOAD_COUNTRIES_FAILED\"}(Kp||(Kp={}));class Zp{constructor(e){this._countryRequestSender=e}loadCountries(e){return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(t=>{t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Kp.LoadCountriesRequested)),this._countryRequestSender.loadCountries(e).then(e=>{t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Kp.LoadCountriesSucceeded,e.body.data)),t.complete()}).catch(e=>{t.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Kp.LoadCountriesFailed,e))})})}}class Qp{constructor(e,t){this._requestSender=e,this._config=t}loadCountries({timeout:e}={}){const t=Object.assign({\"Accept-Language\":this._config.locale},rt);return this._requestSender.get(\"/internalapi/v1/store/countries\",{headers:t,timeout:e})}}class Xp extends Ze{constructor(e){super(e||\"Your checkout could not be processed because some details have changed. Please review your order and try again.\"),this.name=\"CartConsistencyError\",this.type=\"cart_consistency\"}}class em extends Ze{constructor(e){super(e||\"The tax provider is unavailable.\"),this.name=\"OrderTaxProviderUnavailableError\",this.type=\"tax_provider_unavailable\"}}class tm extends Ze{constructor(e){super(e),this.name=\"MissingShippingMethodError\",this.type=\"missing_shipping_method\"}}class nm extends Ze{constructor(e){super(e),this.name=\"InvalidShippingAddressError\",this.type=\"invalid_shipping_address\"}}class im{constructor(e){this._requestSender=e}loadOrder(e,{timeout:t}={}){const n=`/api/storefront/orders/${e}`,i=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.get(n,{params:{include:Dt([\"payments\",\"lineItems.physicalItems.socialMedia\",\"lineItems.physicalItems.options\",\"lineItems.physicalItems.categories\",\"lineItems.digitalItems.socialMedia\",\"lineItems.digitalItems.options\",\"lineItems.digitalItems.categories\"])},headers:i,timeout:t})}submitOrder(e,{headers:t,timeout:n}={}){return this._requestSender.post(\"/internalapi/v1/checkout/order\",{body:e,headers:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(Object.assign({\"X-Checkout-Variant\":t&&t.checkoutVariant},rt),lodash__WEBPACK_IMPORTED_MODULE_5__.isNil),timeout:n}).catch(e=>{if(\"tax_provider_unavailable\"===e.body.type)throw new em;if(\"cart_has_changed\"===e.body.type)throw new Xp;if(\"missing_shipping_method\"===e.body.type)throw new tm(e.body.detail);if(\"invalid_shipping_address\"===e.body.type)throw new nm(e.body.detail);if(\"empty_cart\"===e.body.type)throw new nt;throw e})}finalizeOrder(e,{timeout:t}={}){const n=`/internalapi/v1/checkout/order/${e}`;return this._requestSender.post(n,{timeout:t,headers:rt})}}class rm extends Ze{constructor(){super(\"You haven't complete our spam check. Please try again.\"),this.name=\"SpamProtectionNotCompletedError\",this.type=\"spam_protection_not_completed\"}}!function(e){e.LoadOrderRequested=\"LOAD_ORDER_REQUESTED\",e.LoadOrderSucceeded=\"LOAD_ORDER_SUCCEEDED\",e.LoadOrderFailed=\"LOAD_ORDER_FAILED\",e.LoadOrderPaymentsRequested=\"LOAD_ORDER_PAYMENTS_REQUESTED\",e.LoadOrderPaymentsSucceeded=\"LOAD_ORDER_PAYMENTS_SUCCEEDED\",e.LoadOrderPaymentsFailed=\"LOAD_ORDER_PAYMENTS_FAILED\",e.SubmitOrderRequested=\"SUBMIT_ORDER_REQUESTED\",e.SubmitOrderSucceeded=\"SUBMIT_ORDER_SUCCEEDED\",e.SubmitOrderFailed=\"SUBMIT_ORDER_FAILED\",e.FinalizeOrderRequested=\"FINALIZE_ORDER_REQUESTED\",e.FinalizeOrderSucceeded=\"FINALIZE_ORDER_SUCCEEDED\",e.FinalizeOrderFailed=\"FINALIZE_ORDER_FAILED\"}(Jp||(Jp={}));var om,am;class sm{constructor(e,t){this._orderRequestSender=e,this._checkoutValidator=t}loadOrder(e,t){return new rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable(n=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Jp.LoadOrderRequested)),this._orderRequestSender.loadOrder(e,t).then(e=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Jp.LoadOrderSucceeded,e.body)),n.complete()}).catch(e=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Jp.LoadOrderFailed,e))})})}loadOrderPayments(e,t){return new rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable(n=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Jp.LoadOrderPaymentsRequested)),this._orderRequestSender.loadOrder(e,t).then(e=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Jp.LoadOrderPaymentsSucceeded,e.body)),n.complete()}).catch(e=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Jp.LoadOrderPaymentsFailed,e))})})}loadCurrentOrder(e){return t=>(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{const n=this._getCurrentOrderId(t.getState());if(!n)throw new Qe(We.MissingOrderId);return this.loadOrder(n,e)})}submitOrder(e,t){return n=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Jp.SubmitOrderRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{const i=n.getState(),r=i.config.getExternalSource(),o=i.config.getVariantIdentificationToken(),a=i.checkout.getCheckout();if(!a)throw new Qe(We.MissingCheckout);if(a.shouldExecuteSpamCheck)throw new rm;return (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.from)(this._checkoutValidator.validate(a,t).then(()=>this._orderRequestSender.submitOrder(this._mapToOrderRequestBody(null!=e?e:{},a.id,a.customerMessage,r),Object.assign(Object.assign({},t),{headers:{checkoutVariant:o}})))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(e=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)(this.loadOrder(e.body.data.order.orderId,t),(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Jp.SubmitOrderSucceeded,e.body.data,Object.assign(Object.assign({},e.body.meta),{token:e.headers.token}))))))}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Jp.SubmitOrderFailed,e))))}finalizeOrder(e,t){return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Jp.FinalizeOrderRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_23__.from)(this._orderRequestSender.finalizeOrder(e,t)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(n=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)(this.loadOrder(e,t),(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Jp.FinalizeOrderSucceeded,n.body.data)))))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Jp.FinalizeOrderFailed,e)))}_getCurrentOrderId(e){const t=e.order.getOrder(),n=e.checkout.getCheckout();return t&&t.orderId||n&&n.orderId}_mapToOrderRequestBody(e,t,n,i){const{payment:r}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);return r?Object.assign(Object.assign({},o),{cartId:t,customerMessage:n,externalSource:i,payment:{paymentData:r.paymentData,name:r.methodId,gateway:r.gatewayId}}):Object.assign(Object.assign({},o),{cartId:t,customerMessage:n,externalSource:i})}}function dm(e){const t=(0,_bigcommerce_bigpay_client__WEBPACK_IMPORTED_MODULE_10__.createClient)();return e.subscribe(e=>{const n=e.config.getStoreConfig();n&&t.setHost(n.paymentSettings.bigpayBaseUrl)},e=>e.config.getStoreConfig()),t}function cm(e,t=$e,n={useFallback:!1}){const{useFallback:i}=n,r=new Lt(i);for(const[,n]of Object.entries(t))if(xt(n))for(const t of n.resolveIds)r.register(t,()=>n(e));return r}class lm extends Ze{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}!function(e){e.ExecuteFailed=\"PAYMENT_STRATEGY_EXECUTE_FAILED\",e.ExecuteRequested=\"PAYMENT_STRATEGY_EXECUTE_REQUESTED\",e.ExecuteSucceeded=\"PAYMENT_STRATEGY_EXECUTE_SUCCEEDED\",e.FinalizeFailed=\"PAYMENT_STRATEGY_FINALIZE_FAILED\",e.FinalizeRequested=\"PAYMENT_STRATEGY_FINALIZE_REQUESTED\",e.FinalizeSucceeded=\"PAYMENT_STRATEGY_FINALIZE_SUCCEEDED\",e.InitializeFailed=\"PAYMENT_STRATEGY_INITIALIZE_FAILED\",e.InitializeRequested=\"PAYMENT_STRATEGY_INITIALIZE_REQUESTED\",e.InitializeSucceeded=\"PAYMENT_STRATEGY_INITIALIZE_SUCCEEDED\",e.DeinitializeFailed=\"PAYMENT_STRATEGY_DEINITIALIZE_FAILED\",e.DeinitializeRequested=\"PAYMENT_STRATEGY_DEINITIALIZE_REQUESTED\",e.DeinitializeSucceeded=\"PAYMENT_STRATEGY_DEINITIALIZE_SUCCEEDED\",e.WidgetInteractionStarted=\"PAYMENT_STRATEGY_WIDGET_INTERACTION_STARTED\",e.WidgetInteractionFinished=\"PAYMENT_STRATEGY_WIDGET_INTERACTION_FINISHED\",e.WidgetInteractionFailed=\"PAYMENT_STRATEGY_WIDGET_INTERACTION_FAILED\"}(om||(om={})),function(e){e.ADYENV2=\"adyenv2\",e.ADYENV2_GOOGLEPAY=\"googlepayadyenv2\",e.ADYENV3=\"adyenv3\",e.ADYENV3_GOOGLEPAY=\"googlepayadyenv3\",e.AFFIRM=\"affirm\",e.AFTERPAY=\"afterpay\",e.AUTHORIZENET_GOOGLE_PAY=\"googlepayauthorizenet\",e.AMAZONPAY=\"amazonpay\",e.APPLEPAY=\"applepay\",e.BARCLAYS=\"barclays\",e.BLUESNAPV2=\"bluesnapv2\",e.BOLT=\"bolt\",e.CBA_MPGS=\"cba_mpgs\",e.CHECKOUTCOM=\"checkoutcom\",e.CHECKOUTCOM_APM=\"checkoutcomapm\",e.CHECKOUTCOM_FAWRY=\"checkoutcomfawry\",e.CHECKOUTCOM_SEPA=\"checkoutcomsepa\",e.CHECKOUTCOM_IDEAL=\"checkoutcomideal\",e.CREDIT_CARD=\"creditcard\",e.CHECKOUTCOM_GOOGLE_PAY=\"googlepaycheckoutcom\",e.CLEARPAY=\"clearpay\",e.CONVERGE=\"converge\",e.CYBERSOURCE=\"cybersource\",e.CYBERSOURCEV2=\"cybersourcev2\",e.BNZ=\"bnz\",e.BNZ_GOOGLEPAY=\"googlepaybnz\",e.CYBERSOURCEV2_GOOGLE_PAY=\"googlepaycybersourcev2\",e.HUMM=\"humm\",e.KLARNA=\"klarna\",e.KLARNAV2=\"klarnav2\",e.LAYBUY=\"laybuy\",e.LEGACY=\"legacy\",e.MOLLIE=\"mollie\",e.MONERIS=\"moneris\",e.NO_PAYMENT_DATA_REQUIRED=\"nopaymentdatarequired\",e.OFFLINE=\"offline\",e.OFFSITE=\"offsite\",e.ORBITAL_GOOGLE_PAY=\"googlepayorbital\",e.PAYPAL_EXPRESS=\"paypalexpress\",e.PAYPAL_EXPRESS_CREDIT=\"paypalexpresscredit\",e.PAYPAL_COMMERCE=\"paypalcommerce\",e.PAYPAL_COMMERCE_CREDIT=\"paypalcommercecredit\",e.PAYPAL_COMMERCE_CREDIT_CARD=\"paypalcommercecreditcards\",e.PAYPAL_COMMERCE_ALTERNATIVE_METHODS=\"paypalcommercealternativemethods\",e.PAYPAL_COMMERCE_VENMO=\"paypalcommercevenmo\",e.PPSDK=\"PAYMENT_TYPE_SDK\",e.QUADPAY=\"quadpay\",e.SAGE_PAY=\"sagepay\",e.SQUARE=\"squarev2\",e.STRIPEV3=\"stripev3\",e.STRIPE_UPE=\"stripeupe\",e.STRIPE_UPE_GOOGLE_PAY=\"googlepaystripeupe\",e.BRAINTREE=\"braintree\",e.BRAINTREE_PAYPAL=\"braintreepaypal\",e.BRAINTREE_VENMO=\"braintreevenmo\",e.BRAINTREE_PAYPAL_CREDIT=\"braintreepaypalcredit\",e.BRAINTREE_VISA_CHECKOUT=\"braintreevisacheckout\",e.BRAINTREE_GOOGLE_PAY=\"googlepaybraintree\",e.WE_PAY=\"wepay\",e.WORLDPAYACCESS=\"worldpayaccess\",e.WORLDPAYACCESS_GOOGLE_PAY=\"googlepayworldpayaccess\",e.MASTERPASS=\"masterpass\",e.STRIPE_GOOGLE_PAY=\"googlepaystripe\",e.SEZZLE=\"sezzle\",e.ZIP=\"zip\"}(am||(am={}));const um=am;class hm{widgetInteraction(e,t){const n={methodId:t&&t.methodId};return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(om.WidgetInteractionStarted,void 0,n)),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>e().then(()=>(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(om.WidgetInteractionFinished,void 0,n)))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(om.WidgetInteractionFailed,e,n)))}}class pm{constructor(e,t,n,i){this._strategyRegistry=e,this._strategyRegistryV2=t,this._orderActionCreator=n,this._spamProtectionActionCreator=i,this._paymentStrategyWidgetActionCreator=new hm}execute(e,t){const{payment:n={},useStoreCredit:i}=e,r={methodId:n.methodId};return o=>{const{checkout:a}=o.getState(),{shouldExecuteSpamCheck:s}=a.getCheckoutOrThrow();return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)(s?this._spamProtectionActionCreator.verifyCheckoutSpamProtection()(o):(0,rxjs__WEBPACK_IMPORTED_MODULE_22__.empty)(),(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(om.ExecuteRequested,void 0,r)),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{const a=o.getState();let s;if(a.payment.isPaymentDataRequired(i)){const e=a.paymentMethods.getPaymentMethod(n.methodId,n.gatewayId);if(!e)throw new Qe(We.MissingPaymentMethod);s=this._getStrategy(e)}else s=this._strategyRegistryV2.get({id:um.NO_PAYMENT_DATA_REQUIRED});return s.execute(e,Object.assign(Object.assign({},t),{methodId:n.methodId,gatewayId:n.gatewayId})).then(()=>(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(om.ExecuteSucceeded,void 0,r))})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(om.ExecuteFailed,e,r)))}}finalize(e){return t=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(om.FinalizeRequested)),this._loadOrderPaymentsIfNeeded(t,e),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{return n=this,i=void 0,o=function*(){const n=t.getState(),{providerId:i=\"\",gatewayId:r=\"\"}=n.payment.getPaymentId()||{},o=n.paymentMethods.getPaymentMethod(i,r);if(!o)throw new lm;const a=this._getStrategy(o);return yield a.finalize(Object.assign(Object.assign({},e),{methodId:o.id,gatewayId:o.gateway})),(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(om.FinalizeSucceeded,void 0,{methodId:o.id})},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>{const n=t.getState().payment.getPaymentId();return Je(om.FinalizeFailed,e,{methodId:n&&n.providerId})}))}initialize(e){const{methodId:t,gatewayId:n}=e;return i=>(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{const r=i.getState(),o=r.paymentMethods.getPaymentMethod(t,n);if(!o)throw new Qe(We.MissingPaymentMethod);if(t&&r.paymentStrategies.isInitialized({methodId:t,gatewayId:n}))return (0,rxjs__WEBPACK_IMPORTED_MODULE_22__.empty)();const a=this._getStrategy(o).initialize(Object.assign(Object.assign({},e),{methodId:t,gatewayId:n}));return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(om.InitializeRequested,void 0,{methodId:t,gatewayId:n})),a.then(()=>(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(om.InitializeSucceeded,void 0,{methodId:t,gatewayId:n})))}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(om.InitializeFailed,e,{methodId:t,gatewayId:n})))}deinitialize(e){const{methodId:t,gatewayId:n}=e;return i=>(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{const r=i.getState(),o=r.paymentMethods.getPaymentMethod(t,n);if(!o)throw new Qe(We.MissingPaymentMethod);if(t&&!r.paymentStrategies.isInitialized({methodId:t,gatewayId:n}))return (0,rxjs__WEBPACK_IMPORTED_MODULE_22__.empty)();const a=this._getStrategy(o).deinitialize(Object.assign(Object.assign({},e),{methodId:t,gatewayId:n}));return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(om.DeinitializeRequested,void 0,{methodId:t,gatewayId:n})),a.then(()=>(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(om.DeinitializeSucceeded,void 0,{methodId:t,gatewayId:n})))}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(om.DeinitializeFailed,e,{methodId:t,gatewayId:n})))}widgetInteraction(e,t){return this._paymentStrategyWidgetActionCreator.widgetInteraction(e,t)}_getStrategy(e){let t;try{t=this._strategyRegistry.getByMethod(e)}catch(n){t=this._strategyRegistryV2.get({id:e.id,gateway:e.gateway,type:e.type})}return t}_loadOrderPaymentsIfNeeded(e,t){const n=e.getState().checkout.getCheckout();return n&&n.orderId?this._orderActionCreator.loadOrderPayments(n.orderId,t):(0,rxjs__WEBPACK_IMPORTED_MODULE_22__.empty)()}}class mm{isEqual(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEqual)(this._normalize(e),this._normalize(t))}_normalize(e){return{cartAmount:e.cartAmount,currency:e.currency,id:e.id,lineItems:{digitalItems:e.lineItems.digitalItems.slice().sort((e,t)=>`${e.productId}${e.variantId}`.localeCompare(`${t.productId}${t.variantId}`)).map(e=>({extendedSalePrice:e.extendedSalePrice,productId:e.productId,quantity:e.quantity,variantId:e.variantId})),giftCertificates:e.lineItems.giftCertificates.slice().sort((e,t)=>`${e.id}`.localeCompare(`${t.id}`)).map(e=>({amount:e.amount,recipient:e.recipient})),physicalItems:e.lineItems.physicalItems.slice().sort((e,t)=>`${e.productId}${e.variantId}`.localeCompare(`${t.productId}${t.variantId}`)).map(e=>({extendedSalePrice:e.extendedSalePrice,productId:e.productId,quantity:e.quantity,variantId:e.variantId,giftWrapping:e.giftWrapping}))}}}}class ym extends Ze{constructor(e,t){super(\"An update to your shopping cart has been detected and your available shipping costs have been updated.\"),this.name=\"CartChangedError\",this.type=\"cart_changed\",this.data={previous:e,updated:t}}}class gm{constructor(e){this._checkoutRequestSender=e}validate(e,t){if(!e)throw new Qe(We.MissingCheckout);return this._checkoutRequestSender.loadCheckout(e.id,t).then(t=>{const n=new mm;if(!(e.outstandingBalance===t.body.outstandingBalance&&this._compareCoupons(e.coupons,t.body.coupons)&&this._compareGiftCertificates(e.giftCertificates,t.body.giftCertificates)&&n.isEqual(e.cart,t.body.cart)))throw new ym(this._getComparableCheckout(e),this._getComparableCheckout(t.body))})}_compareCoupons(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEqual)((0,lodash__WEBPACK_IMPORTED_MODULE_5__.map)(e,\"code\"),(0,lodash__WEBPACK_IMPORTED_MODULE_5__.map)(t,\"code\"))}_compareGiftCertificates(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEqual)((0,lodash__WEBPACK_IMPORTED_MODULE_5__.map)(e,\"code\"),(0,lodash__WEBPACK_IMPORTED_MODULE_5__.map)(t,\"code\"))}_getComparableCheckout(e){const{cart:t,coupons:n,giftCertificates:i,outstandingBalance:r}=e;return{cart:{cartAmount:t.cartAmount,currency:t.currency,lineItems:t.lineItems},coupons:n,giftCertificates:i,outstandingBalance:r}}}class vm{constructor(e){this._namespace=e}getItem(e){const t=local_storage_fallback__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getItem(this.withNamespace(e));if(null===t)return null;try{return JSON.parse(t)}catch(t){return this.removeItem(this.withNamespace(e)),null}}getItemOnce(e){const t=this.getItem(e);return this.removeItem(e),t}setItem(e,t){return local_storage_fallback__WEBPACK_IMPORTED_MODULE_9__[\"default\"].setItem(this.withNamespace(e),JSON.stringify(t))}removeItem(e){return local_storage_fallback__WEBPACK_IMPORTED_MODULE_9__[\"default\"].removeItem(this.withNamespace(e))}withNamespace(e){return`${this._namespace}.${e}`}}class fm extends Ze{constructor(){super(\"Please complete our human verification challenge and try again.\"),this.name=\"CardingProtectionChallengeNotCompletedError\",this.type=\"carding_protection_challenge_not_completed\"}}class Sm extends Ze{constructor(){super(\"We were not able to verify that you are not a robot. Please try again.\"),this.name=\"CardingProtectionFailedError\",this.type=\"carding_protection_failed\"}}var _m,wm,Cm=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Im{constructor(e){this._googleRecaptcha=e}handle(e,t){return Cm(this,void 0,void 0,function*(){return\"string\"==typeof e?this.handleWithRecaptchaSitekey(e,t):this.handleWithPaymentHumanVerificationRequestError(e)})}handleWithPaymentHumanVerificationRequestError(e){return Cm(this,void 0,void 0,function*(){if(!this._isPaymentHumanVerificationRequest(e))throw e;return yield this._initialize(e.body.additional_action_required.data.key),this._performRecaptcha()})}handleWithRecaptchaSitekey(e,t){return Cm(this,void 0,void 0,function*(){if(\"recaptcha_v2\"!==e)throw Error(\"Human verification method is not supported.\");if(!t)throw Error(\"Recaptcha site key is missing.\");return yield this._initialize(t),this._performRecaptcha()})}_performRecaptcha(){return this._googleRecaptcha.execute().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_27__.take)(1)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(({error:e,token:t})=>Cm(this,void 0,void 0,function*(){if(e instanceof gs)throw new fm;if(e||!t)throw new Sm;return{type:\"recaptcha_v2_verification\",data:{human_verification_token:t}}}))).toPromise()}_initialize(e){const t=\"cardingProtectionContainer\";let n=document.getElementById(t);return n&&n.parentNode&&n.parentNode.removeChild(n),n=document.createElement(\"div\"),n.setAttribute(\"id\",t),document.body.appendChild(n),this._googleRecaptcha.load(t,e)}_isPaymentHumanVerificationRequest(e){const{additional_action_required:t,status:n}=e.body||{};return\"additional_action_required\"===n&&t&&\"recaptcha_v2_verification\"===t.type}}function bm(e,t){const{body:n}=e,{errors:i=[]}=n;return new _t(e,{message:Pm(i)||t,errors:i})}function Pm(e){if(Array.isArray(e))return e.reduce((e,t)=>t&&t.message?[...e,t.message]:e,[]).join(\" \")}class Om extends Ze{constructor(e){super(e||\"Unable to proceed due to invalid configuration provided for the hosted payment form.\"),this.name=\"InvalidHostedFormConfigError\",this.type=\"invalid_hosted_form_config\"}}class Em extends Ze{constructor(e){super(e||\"Unable to proceed due to an unknown error with the hosted payment form.\"),this.name=\"InvalidHostedFormError\",this.type=\"invalid_hosted_form\"}}class Am extends Ze{constructor(e){super([\"Unable to proceed due to invalid user input values\",...(0,lodash__WEBPACK_IMPORTED_MODULE_5__.flatMap)((0,lodash__WEBPACK_IMPORTED_MODULE_5__.values)(e),e=>(0,lodash__WEBPACK_IMPORTED_MODULE_5__.map)(e,({message:e})=>e))].join(\". \")),this.errors=e,this.name=\"InvalidHostedFormValueError\",this.type=\"invalid_hosted_form_value\"}}!function(e){e.AttachRequested=\"HOSTED_FIELD:ATTACH_REQUESTED\",e.SubmitRequested=\"HOSTED_FIELD:SUBMITTED_REQUESTED\",e.ValidateRequested=\"HOSTED_FIELD:VALIDATE_REQUESTED\",e.StoredCardRequested=\"HOSTED_FIELD:STORED_CARD_REQUESTED\"}(_m||(_m={})),function(e){e.AttachSucceeded=\"HOSTED_INPUT:ATTACH_SUCCEEDED\",e.AttachFailed=\"HOSTED_INPUT:ATTACH_FAILED\",e.BinChanged=\"HOSTED_INPUT:BIN_CHANGED\",e.Blurred=\"HOSTED_INPUT:BLURRED\",e.Changed=\"HOSTED_INPUT:CHANGED\",e.CardTypeChanged=\"HOSTED_INPUT:CARD_TYPE_CHANGED\",e.Entered=\"HOSTED_INPUT:ENTERED\",e.Focused=\"HOSTED_INPUT:FOCUSED\",e.SubmitSucceeded=\"HOSTED_INPUT:SUBMIT_SUCCEEDED\",e.SubmitFailed=\"HOSTED_INPUT:SUBMIT_FAILED\",e.Validated=\"HOSTED_INPUT:VALIDATED\",e.StoredCardSucceeded=\"HOSTED_INPUT:STORED_CARD_SUCCEEDED\",e.StoredCardFailed=\"HOSTED_INPUT:STORED_CARD_FAILED\"}(wm||(wm={}));var km=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Tm{constructor(e,t,n,i,r,o,a,s,d,c){this._type=e,this._containerId=t,this._placeholder=n,this._accessibilityLabel=i,this._styles=r,this._eventPoster=o,this._eventListener=a,this._detachmentObserver=s,this._checkoutId=d,this._cardInstrument=c,this._iframe=document.createElement(\"iframe\");const l=this._checkoutId?`/checkout/payment/hosted-field?version=1.803.0&checkoutId=${this._checkoutId}`:\"/checkout/payment/hosted-field?version=1.803.0\";this._iframe.src=l,this._iframe.style.border=\"none\",this._iframe.style.height=\"100%\",this._iframe.style.overflow=\"hidden\",this._iframe.style.width=\"100%\"}getType(){return this._type}attach(){return km(this,void 0,void 0,function*(){const e=document.getElementById(this._containerId);if(!e)throw new Om(\"Unable to proceed because the provided container ID is not valid.\");e.appendChild(this._iframe),this._eventListener.listen();const t=(0,rxjs__WEBPACK_IMPORTED_MODULE_31__.fromEvent)(this._iframe,\"load\").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(({target:e})=>km(this,void 0,void 0,function*(){const t=e&&e.contentWindow;if(!t)throw new Error(\"The content window of the iframe cannot be accessed.\");this._eventPoster.setTarget(t),yield this._eventPoster.post({type:_m.AttachRequested,payload:{accessibilityLabel:this._accessibilityLabel,cardInstrument:this._cardInstrument,fontUrls:this._getFontUrls(),placeholder:this._placeholder,styles:this._styles,origin:document.location.origin,type:this._type}},{successType:wm.AttachSucceeded,errorType:wm.AttachFailed})})),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_27__.take)(1)).toPromise();yield this._detachmentObserver.ensurePresence([this._iframe],t)})}detach(){this._iframe.parentElement&&(this._iframe.parentElement.removeChild(this._iframe),this._eventListener.stopListen())}submitForm(e,t){return km(this,void 0,void 0,function*(){try{const n=this._eventPoster.post({type:_m.SubmitRequested,payload:{fields:e,data:t}},{successType:wm.SubmitSucceeded,errorType:wm.SubmitFailed});return yield this._detachmentObserver.ensurePresence([this._iframe],n)}catch(e){if(this._isSubmitErrorEvent(e)){if(\"hosted_form_error\"===e.payload.error.code)throw new Em(e.payload.error.message);if(e.payload.response)throw bm(e.payload.response);throw new Error(e.payload.error.message)}throw e}})}submitStoredCardForm(e,t){return km(this,void 0,void 0,function*(){const n=this._eventPoster.post({type:_m.StoredCardRequested,payload:{fields:e,data:t}},{successType:wm.StoredCardSucceeded,errorType:wm.StoredCardFailed});return this._detachmentObserver.ensurePresence([this._iframe],n)})}validateForm(){return km(this,void 0,void 0,function*(){const e=this._eventPoster.post({type:_m.ValidateRequested},{successType:wm.Validated}),{payload:t}=yield this._detachmentObserver.ensurePresence([this._iframe],e);if(!t.isValid)throw new Am(t.errors)})}_getFontUrls(){const e=\"fonts.googleapis.com\",t=document.querySelectorAll(`link[href*='${e}'][rel='stylesheet']`);return Array.prototype.slice.call(t).filter(t=>xs(t.href).hostname===e).filter(e=>(0,lodash__WEBPACK_IMPORTED_MODULE_5__.values)(this._styles).map(e=>e&&e.fontFamily).filter(e=>\"string\"==typeof e).some(t=>t.split(/,\\s/).some(t=>-1!==e.href.indexOf(t.replace(\" \",\"+\"))))).map(e=>e.href)}_isSubmitErrorEvent(e){return e.type===wm.SubmitFailed}}var Dm,Mm=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class zm{constructor(e,t,n,i,r){this._fields=e,this._eventListener=t,this._payloadTransformer=n,this._eventCallbacks=i,this._paymentHumanVerificationHandler=r,this._handleEnter=({payload:e})=>Mm(this,void 0,void 0,function*(){try{yield this.validate()}catch(e){if(e instanceof Error&&\"InvalidHostedFormValueError\"!==e.name)throw e}const{onEnter:t=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}=this._eventCallbacks;t(e)});const{onBlur:o=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,onCardTypeChange:a=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,onFocus:s=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,onValidate:d=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}=this._eventCallbacks;this._eventListener.addListener(wm.Blurred,({payload:e})=>o(e)),this._eventListener.addListener(wm.CardTypeChanged,({payload:e})=>a(e)),this._eventListener.addListener(wm.Focused,({payload:e})=>s(e)),this._eventListener.addListener(wm.Validated,({payload:e})=>d(e)),this._eventListener.addListener(wm.Entered,this._handleEnter),this._eventListener.addListener(wm.CardTypeChanged,({payload:e})=>this._cardType=e.cardType),this._eventListener.addListener(wm.BinChanged,({payload:e})=>this._bin=e.bin)}getBin(){return this._bin}getCardType(){return this._cardType}attach(){return Mm(this,void 0,void 0,function*(){this._eventListener.listen();const e=this._getFirstField(),t=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.without)(this._fields,e);yield e.attach(),yield Promise.all(t.map(e=>e.attach()))})}detach(){this._eventListener.stopListen(),this._fields.forEach(e=>{e.detach()})}submit(e,t){return Mm(this,void 0,void 0,function*(){try{return yield this._getFirstField().submitForm(this._fields.map(e=>e.getType()),this._payloadTransformer.transform(e,t))}catch(t){const n=yield this._paymentHumanVerificationHandler.handle(t);return yield this._getFirstField().submitForm(this._fields.map(e=>e.getType()),this._payloadTransformer.transform(e,n))}})}submitStoredCard(e){return Mm(this,void 0,void 0,function*(){return this._getFirstField().submitStoredCardForm(e.fields,e.data)})}validate(){return Mm(this,void 0,void 0,function*(){return this._getFirstField().validateForm()})}_getFirstField(){const e=this._fields[0];if(!e)throw new Om(\"Unable to proceed because the payment form has no field defined.\");return e}}function Nm(e){return Boolean(e.instrumentId)}class xm{constructor(e){this._store=e}transform(e,t){const n=this._store.getState(),i=n.checkout.getCheckout(),r=n.config.getConfig(),o=n.instruments.getInstrumentsMeta(),a=n.order.getOrder(),s=n.order.getOrderMeta(),d=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omit)(e.paymentData,\"ccExpiry\",\"ccName\",\"ccNumber\",\"ccCvv\"),c=n.paymentMethods.getPaymentMethod(e.methodId,e.gatewayId),l=n.paymentMethods.getPaymentMethodsMeta(),u=o&&d&&Nm(d)?`${n.payment.getPaymentToken()}, ${o.vaultAccessToken}`:n.payment.getPaymentToken();if(!u)throw new Qe(We.MissingPaymentToken);return{additionalAction:t,authToken:u,checkout:i,config:r,order:a,orderMeta:s,payment:d,paymentMethod:c,paymentMethodMeta:l}}}class Fm{constructor(e){this._store=e}create(e,t,n){const i=Object.keys(t.fields).reduce((i,r)=>{const o=t.fields[r];return o?[...i,new Tm(r,o.containerId,o.placeholder||\"\",o.accessibilityLabel||\"\",t.styles||{},new js(e),new ad(e),new Gs(new ws),n,\"instrumentId\"in o?this._getCardInstrument(o.instrumentId):void 0)]:i},[]);return new zm(i,new ad(e),new xm(this._store),(0,lodash__WEBPACK_IMPORTED_MODULE_5__.pick)(t,\"onBlur\",\"onEnter\",\"onFocus\",\"onCardTypeChange\",\"onValidate\"),new Im(Os((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.createScriptLoader)())))}_getCardInstrument(e){const{instruments:{getCardInstrument:t}}=this._store.getState(),n=t(e);if(!n)throw new Qe(We.MissingPaymentInstrument);return n}}class Rm{constructor(e){this._requestSender=e}createBuyNowCart(e,{timeout:t}={}){const n=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.post(\"/api/storefront/carts\",{body:e,headers:n,timeout:t})}}!function(e){e.SubmitPaymentRequested=\"SUBMIT_PAYMENT_REQUESTED\",e.SubmitPaymentSucceeded=\"SUBMIT_PAYMENT_SUCCEEDED\",e.SubmitPaymentFailed=\"SUBMIT_PAYMENT_FAILED\",e.InitializeOffsitePaymentRequested=\"INITIALIZE_OFFSITE_PAYMENT_REQUESTED\",e.InitializeOffsitePaymentSucceeded=\"INITIALIZE_OFFSITE_PAYMENT_SUCCEEDED\",e.InitializeOffsitePaymentFailed=\"INITIALIZE_OFFSITE_PAYMENT_FAILED\"}(Dm||(Dm={}));class Lm{constructor(e,t,n,i){this._paymentRequestSender=e,this._orderActionCreator=t,this._paymentRequestTransformer=n,this._paymentHumanVerificationHandler=i,this.initializeOffsitePayment=({methodId:e,gatewayId:t,instrumentId:n,target:i,promise:r,shouldSaveInstrument:o,shouldSetAsDefaultInstrument:a})=>s=>{let d;n?d={formattedPayload:{bigpay_token:n}}:o&&(d={formattedPayload:{vault_payment_instrument:o,set_as_default_stored_instrument:a||null}});const c=this._paymentRequestTransformer.transform({gatewayId:t,methodId:e,paymentData:d},s.getState());return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Dm.InitializeOffsitePaymentRequested)),Promise.race([this._paymentRequestSender.initializeOffsitePayment(c,i),r].filter(Boolean)).then(()=>(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Dm.InitializeOffsitePaymentSucceeded))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Dm.InitializeOffsitePaymentFailed,e)))}}submitPayment(e){return t=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Dm.SubmitPaymentRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{return n=this,i=void 0,o=function*(){try{return yield this._paymentRequestSender.submitPayment(this._paymentRequestTransformer.transform(e,t.getState()))}catch(n){const i=yield this._paymentHumanVerificationHandler.handle(n);return yield this._paymentRequestSender.submitPayment(this._paymentRequestTransformer.transform(Object.assign(Object.assign({},e),{additionalAction:i}),t.getState()))}},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.switchMap)(({body:e})=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)(this._orderActionCreator.loadCurrentOrder()(t),(0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Dm.SubmitPaymentSucceeded,e)))))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Dm.SubmitPaymentFailed,e)))}}class Bm{constructor(e){this._client=e}submitPayment(e){return new Promise((t,n)=>{this._client.submitPayment(e,(e,i)=>{e?n(this._transformResponse(e)):t(this._transformResponse(i))})})}initializeOffsitePayment(e,t){return new Promise(()=>{this._client.initializeOffsitePayment(e,null,t)})}_transformResponse(e){return{headers:e.headers,body:e.data,status:e.status,statusText:e.statusText}}}function jm(e,t){let n;return function(e){return void 0!==e.id}(e)?n=e.id:t&&t.length&&(n=t[0].id),{id:n,firstName:e.firstName,lastName:e.lastName,company:e.company,addressLine1:e.address1,addressLine2:e.address2,city:e.city,province:e.stateOrProvince,provinceCode:e.stateOrProvinceCode,postCode:e.postalCode,country:e.country,countryCode:e.countryCode,phone:e.phone,customFields:e.customFields}}const Um=[\"per_item_discount\",\"percentage_discount\",\"per_total_discount\",\"shipping_discount\",\"free_shipping\"];function qm(e){return{code:e.code,discount:e.displayName,discountType:Um.indexOf(e.couponType)}}function Vm(e){return{code:e.code,discountedAmount:e.used,remainingBalance:e.remaining,giftCertificate:{balance:e.balance,code:e.code,purchaseDate:e.purchaseDate}}}function Gm(e){const t=[];return(e||[]).forEach(e=>{(e.banners||[]).forEach(e=>{t.push({placeholders:[],discountType:null,message:\"\",messageHtml:e.text})})}),t}function Hm(e,t,n=\"id\"){return Object.keys(e).reduce((i,r)=>[...i,...e[r].map(e=>\"giftCertificates\"===r?function(e,t){const n=new qa(t);return{id:e.id,imageUrl:\"\",name:e.name,amount:e.amount,amountAfterDiscount:e.amount,discount:0,integerAmount:n.toInteger(e.amount),integerAmountAfterDiscount:n.toInteger(e.amount),integerUnitPrice:n.toInteger(e.amount),integerUnitPriceAfterDiscount:n.toInteger(e.amount),integerDiscount:0,quantity:1,sender:e.sender,recipient:e.recipient,type:\"ItemGiftCertificateEntity\",attributes:[],variantId:null}}(e,t):function(e,t,n,i=\"id\"){const r=new qa(n);return{id:e[i],imageUrl:e.imageUrl,amount:e.extendedListPrice,amountAfterDiscount:e.extendedSalePrice,discount:e.discountAmount,integerAmount:r.toInteger(e.extendedListPrice),integerAmountAfterDiscount:r.toInteger(e.extendedSalePrice),integerDiscount:r.toInteger(e.discountAmount),integerUnitPrice:r.toInteger(e.listPrice),integerUnitPriceAfterDiscount:r.toInteger(e.salePrice),downloadsPageUrl:e.downloadPageUrl,name:e.name,quantity:e.quantity,brand:e.brand,sku:e.sku,categoryNames:e.categoryNames,variantId:e.variantId,productId:e.productId,attributes:(e.options||[]).map(e=>({name:e.name,value:e.value})),addedByPromotion:e.addedByPromotion,type:t}}(e,function(e){switch(e){case\"physicalItems\":return\"ItemPhysicalEntity\";case\"digitalItems\":return\"ItemDigitalEntity\";case\"giftCertificates\":return\"ItemGiftCertificateEntity\";default:return\"\"}}(r),t,n))],[])}function $m(e){const t=e.cart.currency.decimalPlaces,n=new qa(t);return{id:e.cart.id,items:Hm(e.cart.lineItems,t),currency:e.cart.currency.code,coupon:{discountedAmount:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.reduce)(e.cart.coupons,(e,t)=>e+t.discountedAmount,0),coupons:e.cart.coupons.map(qm)},discount:{amount:e.cart.discountAmount,integerAmount:n.toInteger(e.cart.discountAmount)},discountNotifications:Gm(e.promotions),giftCertificate:{totalDiscountedAmount:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.reduce)(e.giftCertificates,(e,t)=>e+t.used,0),appliedGiftCertificates:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.keyBy)(e.giftCertificates.map(Vm),\"code\")},shipping:{amount:e.shippingCostTotal,integerAmount:n.toInteger(e.shippingCostTotal),amountBeforeDiscount:e.shippingCostBeforeDiscount,integerAmountBeforeDiscount:n.toInteger(e.shippingCostBeforeDiscount),required:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.cart.lineItems.physicalItems,e=>e.isShippingRequired)},subtotal:{amount:e.subtotal,integerAmount:n.toInteger(e.subtotal)},storeCredit:{amount:e.customer?e.customer.storeCredit:0},taxSubtotal:{amount:e.taxTotal,integerAmount:n.toInteger(e.taxTotal)},taxes:e.taxes,taxTotal:{amount:e.taxTotal,integerAmount:n.toInteger(e.taxTotal)},handling:{amount:e.handlingCostTotal,integerAmount:n.toInteger(e.handlingCostTotal)},grandTotal:{amount:e.grandTotal,integerAmount:n.toInteger(e.grandTotal)}}}var Wm;!function(e){e.APPLEPAY=\"applepay\",e.AMAZON_PAY_V2=\"amazonpay\",e.BRAINTREE_PAYPAL=\"braintreepaypal\",e.BRAINTREE_VENMO=\"braintreevenmo\",e.BRAINTREE_PAYPAL_CREDIT=\"braintreepaypalcredit\",e.GOOGLEPAY_ADYENV2=\"googlepayadyenv2\",e.GOOGLEPAY_ADYENV3=\"googlepayadyenv3\",e.GOOGLEPAY_AUTHORIZENET=\"googlepayauthorizenet\",e.GOOGLEPAY_BNZ=\"googlepaybnz\",e.GOOGLEPAY_BRAINTREE=\"googlepaybraintree\",e.GOOGLEPAY_CHECKOUTCOM=\"googlepaycheckoutcom\",e.GOOGLEPAY_CYBERSOURCEV2=\"googlepaycybersourcev2\",e.GOOGLEPAY_ORBITAL=\"googlepayorbital\",e.GOOGLEPAY_STRIPE=\"googlepaystripe\",e.GOOGLEPAY_STRIPEUPE=\"googlepaystripeupe\",e.GOOGLEPAY_WORLDPAYACCESS=\"googlepayworldpayaccess\",e.MASTERPASS=\"masterpass\",e.PAYPALEXPRESS=\"paypalexpress\"}(Wm||(Wm={}));const Ym=Wm;function Km(e,t){const n=e.firstName||t.firstName||\"\",i=e.lastName||t.lastName||\"\";return{addresses:(e.addresses||[]).map(e=>jm(e)),customerId:e.id,isGuest:e.isGuest,storeCredit:e.storeCredit,email:e.email||t.email||\"\",firstName:n,lastName:i,name:e.fullName||[n,i].join(\" \"),customerGroupName:e.customerGroup&&e.customerGroup.name}}class Jm{format(e){const[t=\"\",n=\"\"]=e.split(new RegExp(\"\\\\s*/\\\\s*\")),i=t.slice(0,2),r=4===n.length?n.slice(-2):n?n.slice(0,2):t.slice(2);return e.length<2?t:e.length>3&&!r?i:`${i} / ${r}`}toObject(e){const[t=\"\",n=\"\"]=e.split(new RegExp(\"\\\\s*/\\\\s*\"));return/^\\d+$/.test(t)&&/^\\d+$/.test(n)?{month:1===t.length?`0${t}`:t.slice(0,2),year:2===n.length?`20${n}`:n.slice(0,4)}:{month:\"\",year:\"\"}}}class Zm{format(e){const{card:t}=(0,card_validator__WEBPACK_IMPORTED_MODULE_11__.number)(e);if(!t)return e;const n=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.max)((0,card_validator__WEBPACK_IMPORTED_MODULE_11__.creditCardType)(e).map(e=>(0,lodash__WEBPACK_IMPORTED_MODULE_5__.max)(e.lengths))),i=this.unformat(e).slice(0,n);return t.gaps.filter(e=>i.length>e).reduce((e,t,n)=>[e.slice(0,t+n),e.slice(t+n)].join(\" \"),i)}unformat(e){const{card:t}=(0,card_validator__WEBPACK_IMPORTED_MODULE_11__.number)(e);return t?e.replace(new RegExp(\" \",\"g\"),\"\"):e}}function Qm(e,t={}){const n=e.currency.decimalPlaces,i=new qa(n);return{id:e.orderId,items:Hm(e.lineItems,e.currency.decimalPlaces,\"productId\"),orderId:e.orderId,currency:e.currency.code,customerCanBeCreated:e.customerCanBeCreated,payment:ty(e.payments,t.payment),subtotal:{amount:e.baseAmount,integerAmount:i.toInteger(e.baseAmount)},coupon:{discountedAmount:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.reduce)(e.coupons,(e,t)=>e+t.discountedAmount,0),coupons:e.coupons.map(qm)},discount:{amount:e.discountAmount,integerAmount:i.toInteger(e.discountAmount)},token:t.orderToken,callbackUrl:t.callbackUrl,discountNotifications:[],giftCertificate:ey(e.payments),socialData:iy(e),status:e.status,hasDigitalItems:e.hasDigitalItems,isDownloadable:e.isDownloadable,isComplete:e.isComplete,shipping:{amount:e.shippingCostTotal,integerAmount:i.toInteger(e.shippingCostTotal),amountBeforeDiscount:e.shippingCostBeforeDiscount,integerAmountBeforeDiscount:i.toInteger(e.shippingCostBeforeDiscount)},storeCredit:{amount:Xm(e.payments)},taxes:e.taxes,taxTotal:{amount:e.taxTotal,integerAmount:i.toInteger(e.taxTotal)},handling:{amount:e.handlingCostTotal,integerAmount:i.toInteger(e.handlingCostTotal)},grandTotal:{amount:e.orderAmount,integerAmount:e.orderAmountAsInteger}}}function Xm(e){const t=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(e,{providerId:\"storecredit\"});return t?t.amount:0}function ey(e){const t=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.filter)(e,{providerId:\"giftcertificate\"});return{totalDiscountedAmount:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.reduce)(t,(e,t)=>t.amount+e,0),appliedGiftCertificates:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.keyBy)(t.map(e=>({code:e.detail.code,discountedAmount:e.amount,remainingBalance:e.detail.remaining,giftCertificate:{balance:e.amount+e.detail.remaining,code:e.detail.code,purchaseDate:\"\"}})),\"code\")}}function ty(e,t={}){const n=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(e,ny);return n?{id:n.providerId,status:(i=n.detail.step,`PAYMENT_STATUS_${i}`),helpText:n.detail.instructions,returnUrl:t.returnUrl}:{};// removed by dead control flow\n{ var i; }}function ny(e){return\"giftcertificate\"!==e.providerId&&\"storecredit\"!==e.providerId}function iy(e){const t={};return[...e.lineItems.physicalItems,...e.lineItems.digitalItems].forEach(e=>{var n;t[e.id]=(n=e,[\"fb\",\"tw\",\"gp\"].reduce((e,t)=>{const i=n.socialMedia&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(n.socialMedia,e=>e.code===t);return i?(e[t]={name:n.name,description:n.name,image:n.imageUrl,url:i.link,shareText:i.text,sharingLink:i.link,channelName:i.channel,channelCode:i.code},e):e},{}))}),t}function ry(e,t){return{description:e.description,module:e.type,price:e.cost,id:e.id,selected:t,isRecommended:e.isRecommended,imageUrl:e.imageUrl,transitTime:e.transitTime}}class oy{constructor(){this._cardExpiryFormatter=new Jm,this._cardNumberFormatter=new Zm}transform(e,t){const n=t.billingAddress.getBillingAddress(),i=t.checkout.getCheckout(),r=t.customer.getCustomer(),o=t.order.getOrder(),a=t.paymentMethods.getPaymentMethod(e.methodId,e.gatewayId),s=this._mapShippingAddress(t,a),d=t.consignments.getConsignments(),c=t.consignments.getShippingOption(),l=t.config.getStoreConfig(),u=t.config.getContextConfig(),h=t.instruments.getInstrumentsMeta(),p=t.paymentMethods.getPaymentMethodsMeta(),m=t.order.getOrderMeta(),y=r&&n&&Km(r,n),g=h&&e.paymentData&&(Nm(e.paymentData)||function(e){const t=e.formattedPayload;return!!t&&(\"string\"==typeof t.bigpay_token||Boolean(t.bigpay_token&&t.bigpay_token.token))}(e.paymentData))?`${t.payment.getPaymentToken()}, ${h.vaultAccessToken}`:t.payment.getPaymentToken();if(!g)throw new Qe(We.MissingPaymentToken);return{additionalAction:e.additionalAction,authToken:g,customer:y,billingAddress:n&&jm(n),shippingAddress:s&&jm(s,d),shippingOption:c&&ry(c,!0),cart:i&&$m(i),order:o&&Qm(o,m),orderMeta:m,payment:e.paymentData,paymentMethod:a&&this._transformPaymentMethod(a),quoteMeta:{request:Object.assign(Object.assign({},p),{geoCountryCode:u&&u.geoCountryCode})},source:\"bigcommerce-checkout-js-sdk\",store:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.pick)(l&&l.storeProfile,[\"storeHash\",\"storeId\",\"storeLanguage\",\"storeName\"])}}transformWithHostedFormData(e,t,n){const{additionalAction:i,authToken:r,checkout:o,config:a,order:s,orderMeta:d,payment:c={},paymentMethod:l,paymentMethodMeta:u}=t,h=o&&o.consignments[0],p=h&&h.shippingAddress,m=h&&h.selectedShippingOption;return{additionalAction:i,authToken:r,paymentMethod:l&&this._transformPaymentMethod(l),customer:s&&s.billingAddress&&o&&Km(o.customer,s.billingAddress),billingAddress:s&&s.billingAddress&&jm(s.billingAddress),shippingAddress:p&&o&&jm(p,o.consignments),shippingOption:m&&ry(m,!0),cart:o&&$m(o),order:s&&Qm(s,d),orderMeta:d,payment:this._transformHostedInputValues(e,c,n),quoteMeta:{request:Object.assign(Object.assign({},u),{geoCountryCode:a&&a.context.geoCountryCode})},source:\"bigcommerce-checkout-js-sdk\",store:a&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.pick)(a.storeConfig.storeProfile,[\"storeHash\",\"storeId\",\"storeLanguage\",\"storeName\"])}}_transformPaymentMethod(e){return\"multi-option\"!==e.method||e.gateway?e.initializationData&&e.initializationData.gateway?Object.assign(Object.assign({},e),{id:e.initializationData.gateway}):e.id===Ym.BRAINTREE_VENMO?Object.assign(Object.assign({},e),{id:Ym.BRAINTREE_PAYPAL}):e:Object.assign(Object.assign({},e),{gateway:e.id})}_transformHostedInputValues(e,t,n){return\"instrumentId\"in t?Object.assign(Object.assign({},t),{ccCvv:e.cardCodeVerification,ccNumber:e.cardNumberVerification&&this._cardNumberFormatter.unformat(e.cardNumberVerification),hostedFormNonce:n}):Object.assign(Object.assign({},t),{ccCvv:e.cardCode,ccExpiry:this._cardExpiryFormatter.toObject(e.cardExpiry||\"\"),ccName:e.cardName||\"\",ccNumber:this._cardNumberFormatter.unformat(e.cardNumber||\"\"),hostedFormNonce:n})}_mapShippingAddress(e,t){var n,i,r,o;if(t){const a=null===(i=null===(n=t.initializationData)||void 0===n?void 0:n.bopis)||void 0===i?void 0:i.enabled,s=null===(o=null===(r=t.initializationData)||void 0===r?void 0:r.bopis)||void 0===o?void 0:o.requiredAddress,d=e.consignments.getConsignments(),c=null==d?void 0:d.every(e=>e.selectedPickupOption);if(a&&c&&\"none\"===s)return}return e.shippingAddress.getShippingAddress()}}var ay,sy;!function(e){e.UpdatePaymentProviderCustomer=\"UPDATE_PAYMENT_PROVIDER_CUSTOMER\"}(ay||(ay={}));class dy{updatePaymentProviderCustomer(e){return (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(ay.UpdatePaymentProviderCustomer,e))}}!function(e){e.CreateConsignmentsRequested=\"CREATE_CONSIGNMENTS_REQUESTED\",e.CreateConsignmentsSucceeded=\"CREATE_CONSIGNMENTS_SUCCEEDED\",e.CreateConsignmentsFailed=\"CREATE_CONSIGNMENTS_FAILED\",e.UpdateConsignmentRequested=\"UPDATE_CONSIGNMENT_REQUESTED\",e.UpdateConsignmentSucceeded=\"UPDATE_CONSIGNMENT_SUCCEEDED\",e.UpdateConsignmentFailed=\"UPDATE_CONSIGNMENT_FAILED\",e.DeleteConsignmentRequested=\"DELETE_CONSIGNMENT_REQUESTED\",e.DeleteConsignmentSucceeded=\"DELETE_CONSIGNMENT_SUCCEEDED\",e.DeleteConsignmentFailed=\"DELETE_CONSIGNMENT_FAILED\",e.UpdateShippingOptionRequested=\"UPDATE_SHIPPING_OPTION_REQUESTED\",e.UpdateShippingOptionSucceeded=\"UPDATE_SHIPPING_OPTION_SUCCEEDED\",e.UpdateShippingOptionFailed=\"UPDATE_SHIPPING_OPTION_FAILED\",e.LoadShippingOptionsRequested=\"LOAD_SHIPPING_OPTIONS_REQUESTED\",e.LoadShippingOptionsSucceeded=\"LOAD_SHIPPING_OPTIONS_SUCCEEDED\",e.LoadShippingOptionsFailed=\"LOAD_SHIPPING_OPTIONS_FAILED\"}(sy||(sy={}));class cy{constructor(e,t){this._consignmentRequestSender=e,this._checkoutRequestSender=t}unassignItemsByAddress(e,t){return n=>{const i=n.getState();if(!i.checkout.getCheckout())throw new Qe(We.MissingCheckout);const r=this._consignmentHasAddress(e)?e.address:e.shippingAddress,o=i.consignments.getConsignmentByAddress(r);if(!o)throw new Ft(\"No consignment found for the specified address\");const a=this._removeLineItems(e.lineItems,o,i.cart.getCart());return a.length?this.updateConsignment({id:o.id,address:r,lineItems:a},t)(n):this.deleteConsignment(o.id,t)(n)}}assignItemsByAddress(e,t){return n=>{const i=n.getState(),r=this._consignmentHasAddress(e)?e.address:e.shippingAddress,o=i.consignments.getConsignmentByAddress(r);return this._createOrUpdateConsignment({id:o&&o.id,address:r,lineItems:this._addLineItems(e.lineItems,o,i.cart.getCart())},t)(n)}}selectShippingOption(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{const r=n.getState(),o=r.checkout.getCheckout(),a=r.consignments.getConsignments();if(!o)throw new Qe(We.MissingCheckout);if(!a||!a.length)throw new Qe(We.MissingConsignments);const s={id:a[0].id,shippingOptionId:e},d={id:a[0].id};i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(sy.UpdateShippingOptionRequested,void 0,d)),this._consignmentRequestSender.updateConsignment(o.id,s,t).then(({body:e})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(sy.UpdateShippingOptionSucceeded,e,d)),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(sy.UpdateShippingOptionFailed,e,d))})})}loadShippingOptions(e){return t=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(n=>{const i=t.getState().checkout.getCheckout();if(!i)throw new Qe(We.MissingCheckout);n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(sy.LoadShippingOptionsRequested)),this._checkoutRequestSender.loadCheckout(i.id,Object.assign(Object.assign({},e),{params:{include:[Et.AvailableShippingOptions]}})).then(({body:e})=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(sy.LoadShippingOptionsSucceeded,e)),n.complete()}).catch(e=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(sy.LoadShippingOptionsFailed,e))})})}updateAddress(e,t){return n=>{const i=this._getUpdateAddressRequestBody(e,n),r=n.getState().consignments.getConsignments();return r&&r.length&&(i.id=r[0].id),this._createOrUpdateConsignment(i,t)(n)}}createConsignments(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{const r=n.getState().checkout.getCheckout();if(!r||!r.id)throw new Qe(We.MissingCheckout);i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(sy.CreateConsignmentsRequested)),this._consignmentRequestSender.createConsignments(r.id,e,t).then(({body:e})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(sy.CreateConsignmentsSucceeded,e)),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(sy.CreateConsignmentsFailed,e))})})}updateConsignment(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{const r=n.getState().checkout.getCheckout();if(!r||!r.id)throw new Qe(We.MissingCheckout);const o={id:e.id};i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(sy.UpdateConsignmentRequested,void 0,o)),this._consignmentRequestSender.updateConsignment(r.id,e,t).then(({body:e})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(sy.UpdateConsignmentSucceeded,e,o)),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(sy.UpdateConsignmentFailed,e,o))})})}deleteConsignment(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{const r=n.getState().checkout.getCheckout(),o={id:e};if(!r||!r.id)throw new Qe(We.MissingCheckout);i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(sy.DeleteConsignmentRequested,void 0,o)),this._consignmentRequestSender.deleteConsignment(r.id,e,t).then(({body:e})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(sy.DeleteConsignmentSucceeded,e,o)),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(sy.DeleteConsignmentFailed,e,o))})})}updateShippingOption(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{var r;const o=n.getState().checkout.getCheckout(),a=n.getState().consignments.getConsignmentById(e.id);if((null===(r=null==a?void 0:a.selectedShippingOption)||void 0===r?void 0:r.id)===e.shippingOptionId)return void i.complete();if(!o||!o.id)throw new Qe(We.MissingCheckout);const s={id:e.id};i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(sy.UpdateShippingOptionRequested,void 0,s)),this._consignmentRequestSender.updateConsignment(o.id,e,t).then(({body:e})=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(sy.UpdateShippingOptionSucceeded,e,s)),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(sy.UpdateShippingOptionFailed,e,s))})})}_createOrUpdateConsignment(e,t){return n=>{const i=n.getState().checkout.getCheckout();if(!i||!i.id)throw new Qe(We.MissingCheckout);return this._isUpdateConsignmentRequest(e)?this.updateConsignment(e,t)(n):this.createConsignments([e],t)(n)}}_getUpdateAddressRequestBody(e,t){const n=t.getState().cart.getCart();if(!n)throw new Qe(We.MissingCart);const{physicalItems:i,customItems:r=[]}=n.lineItems;return{address:e,lineItems:[...i,...r].map(e=>({itemId:e.id,quantity:e.quantity}))}}_removeLineItems(e,t,n){if(!n)throw new Qe(We.MissingCart);return this._hydrateLineItems(t.lineItemIds,n).map(t=>{const n=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(e,e=>e.itemId===t.itemId);return Object.assign(Object.assign({},t),{quantity:n?t.quantity-n.quantity:t.quantity})}).filter(e=>e.quantity>0)}_addLineItems(e,t,n){if(!t)return e;if(!n)throw new Qe(We.MissingCart);return e.concat(this._hydrateLineItems(t.lineItemIds,n)).filter(e=>e.quantity>0)}_hydrateLineItems(e,t){return e.map(e=>{const n=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(t.lineItems.physicalItems,t=>t.id===e);return{itemId:e,quantity:n?n.quantity:0}})}_isUpdateConsignmentRequest(e){return!!e.id}_consignmentHasAddress(e){return\"object\"==typeof e&&\"address\"in e}}const ly=[\"consignments.availableShippingOptions\",\"cart.lineItems.physicalItems.options\",\"cart.lineItems.digitalItems.options\",\"customer\",\"promotions.banners\"];class uy{constructor(e){this._requestSender=e}createConsignments(e,t,{timeout:n,params:{include:i}={}}={}){const r=`/api/storefront/checkouts/${e}/consignments`,o=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.post(r,{body:t,params:{include:es(ly,i)},headers:o,timeout:n}).catch(e=>{if(\"empty_cart\"===e.body.type)throw new nt;throw e})}updateConsignment(e,t,{timeout:n,params:{include:i}={}}={}){const{id:r}=t,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,[\"id\"]),a=`/api/storefront/checkouts/${e}/consignments/${r}`,s=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.put(a,{body:o,params:{include:es(ly,i)},headers:s,timeout:n}).catch(e=>{if(\"empty_cart\"===e.body.type)throw new nt;throw e})}deleteConsignment(e,t,{timeout:n}={}){const i=`/api/storefront/checkouts/${e}/consignments/${t}`,r=Object.assign({Accept:it.JsonV1},rt),o=Dt(ly);return this._requestSender.delete(i,{params:{include:o},headers:r,timeout:n}).catch(e=>{if(\"empty_cart\"===e.body.type)throw new nt;throw e})}}var hy,py;!function(e){e.LoadShippingCountriesRequested=\"LOAD_SHIPPING_COUNTRIES_REQUESTED\",e.LoadShippingCountriesSucceeded=\"LOAD_SHIPPING_COUNTRIES_SUCCEEDED\",e.LoadShippingCountriesFailed=\"LOAD_SHIPPING_COUNTRIES_FAILED\"}(hy||(hy={}));class my{constructor(e,t){this._shippingCountryRequestSender=e,this._store=t}loadCountries(e){const{checkout:t}=this._store.getState(),n=t.getCheckout(),i=n?n.channelId:null;return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(t=>{t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(hy.LoadShippingCountriesRequested)),this._shippingCountryRequestSender.loadCountries(i,e).then(e=>{t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(hy.LoadShippingCountriesSucceeded,e.body.data)),t.complete()}).catch(e=>{t.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(hy.LoadShippingCountriesFailed,e))})})}}class yy{constructor(e,t){this._requestSender=e,this._config=t}loadCountries(e,{timeout:t}={}){const n=\"/internalapi/v1/shipping/countries\"+(e?`?channel_id=${e}`:\"\"),i=Object.assign({\"Accept-Language\":this._config.locale},rt);return this._requestSender.get(n,{headers:i,timeout:t})}}!function(e){e.ApplyStoreCreditRequested=\"APPLY_STORE_CREDIT_REQUESTED\",e.ApplyStoreCreditSucceeded=\"APPLY_STORE_CREDIT_SUCCEEDED\",e.ApplyStoreCreditFailed=\"APPLY_STORE_CREDIT_FAILED\"}(py||(py={}));var gy;class vy{constructor(e){this._storeCreditRequestSender=e}applyStoreCredit(e,t){return n=>(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(py.ApplyStoreCreditRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{return i=this,r=void 0,a=function*(){const i=n.getState().checkout.getCheckout();if(!i)throw new Qe(We.MissingCheckout);const{body:r}=yield e?this._storeCreditRequestSender.applyStoreCredit(i.id,t):this._storeCreditRequestSender.removeStoreCredit(i.id,t);return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(py.ApplyStoreCreditSucceeded,r)},new((o=void 0)||(o=Promise))(function(e,t){function n(e){try{d(a.next(e))}catch(e){t(e)}}function s(e){try{d(a.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o(function(e){e(i)})).then(n,s)}d((a=a.apply(i,r||[])).next())});// removed by dead control flow\n{ var i, r, o, a; }})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(py.ApplyStoreCreditFailed,e)))}}class fy{constructor(e){this._requestSender=e}applyStoreCredit(e,{timeout:t}={}){const n=`/api/storefront/checkouts/${e}/store-credit`,i=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.post(n,{headers:i,timeout:t,params:{include:Dt(Ot)}})}removeStoreCredit(e,{timeout:t}={}){const n=`/api/storefront/checkouts/${e}/store-credit`,i=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.delete(n,{headers:i,timeout:t,params:{include:Dt(Ot)}})}}!function(e){e.UpdateSubscriptionsRequested=\"UPDATE_SUBSCRIPTIONS_REQUESTED\",e.UpdateSubscriptionsSucceeded=\"UPDATE_SUBSCRIPTIONS_SUCCEEDED\",e.UpdateSubscriptionsFailed=\"UPDATE_SUBSCRIPTIONS_FAILED\"}(gy||(gy={}));class Sy extends _t{constructor(e){super(e),this.name=\"UpdateSubscriptionsError\",this.type=\"update_subscriptions\"}}class _y{constructor(e){this._subscriptionsRequestSender=e}updateSubscriptions(e,t){return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(gy.UpdateSubscriptionsRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{return n=this,i=void 0,o=function*(){const{body:n}=yield this._subscriptionsRequestSender.updateSubscriptions(e,t);return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(gy.UpdateSubscriptionsSucceeded,n)},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(gy.UpdateSubscriptionsFailed,new Sy(e))))}}class wy{constructor(e){this._requestSender=e}updateSubscriptions(e,{timeout:t}={}){const n=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.post(\"/api/storefront/subscriptions\",{body:e,headers:n,timeout:t})}}function Cy(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.isPlainObject)(e)}const Iy=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.memoize)(e=>Array.isArray(e)?e.map(e=>by(e)):Cy(e)?Object.keys(e).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:by(e[n])}),{}):e);Iy.cache=new WeakMap;const by=e=>\"object\"==typeof e&&null!==e?Iy(e):e;function Py(e){return(...t)=>by(e(...t))}function Oy({billingAddress:{getBillingAddress:e,getBillingAddressOrThrow:t},cart:{getCart:n,getCartOrThrow:i},checkout:{getCheckout:r,getCheckoutOrThrow:o,getOutstandingBalance:a},config:{getContextConfig:s,getHost:d,getLocale:c,getStoreConfig:l,getStoreConfigOrThrow:u,getConfig:h},consignments:{getConsignments:p,getConsignmentsOrThrow:m},countries:{getCountries:y},customer:{getCustomer:g,getCustomerOrThrow:v},instruments:{getCardInstrument:f,getCardInstrumentOrThrow:S,getInstruments:_,getInstrumentsMeta:w},order:{getOrder:C,getOrderOrThrow:I,getOrderMeta:b},payment:{getPaymentToken:P,getPaymentTokenOrThrow:O,getPaymentId:E,getPaymentIdOrThrow:A,getPaymentStatus:k,getPaymentStatusOrThrow:T,getPaymentRedirectUrl:D,getPaymentRedirectUrlOrThrow:M,isPaymentDataRequired:z},paymentMethods:{getPaymentMethod:N,getPaymentMethodOrThrow:x,getPaymentMethodsMeta:F},paymentProviderCustomer:{getPaymentProviderCustomer:R,getPaymentProviderCustomerOrThrow:L},paymentStrategies:{isInitialized:B},shippingAddress:{getShippingAddress:j,getShippingAddressOrThrow:U,getShippingAddresses:q,getShippingAddressesOrThrow:V},shippingCountries:{getShippingCountries:G}}){return{getHost:Py(d),getLocale:Py(c),getBillingAddress:Py(e),getBillingAddressOrThrow:Py(t),getCart:Py(n),getCartOrThrow:Py(i),getCheckout:Py(r),getCheckoutOrThrow:Py(o),getCountries:Py(y),getStoreConfig:Py(l),getStoreConfigOrThrow:Py(u),getConfig:Py(h),getConsignments:Py(p),getConsignmentsOrThrow:Py(m),getContextConfig:Py(s),getCustomer:Py(g),getCustomerOrThrow:Py(v),getCardInstrument:Py(f),getInstruments:Py(_),getCardInstrumentOrThrow:Py(S),getOrder:Py(C),getOrderOrThrow:Py(I),getOrderMeta:Py(b),getInstrumentsMeta:Py(w),getPaymentToken:P,getPaymentTokenOrThrow:O,getPaymentId:E,getPaymentIdOrThrow:A,getPaymentStatus:k,getPaymentStatusOrThrow:T,getPaymentRedirectUrl:D,getPaymentRedirectUrlOrThrow:M,getPaymentMethod:Py(N),getPaymentMethodOrThrow:Py(x),getPaymentMethodsMeta:Py(F),getPaymentProviderCustomer:Py(R),getPaymentProviderCustomerOrThrow:Py(L),getShippingAddress:Py(j),getShippingAddressOrThrow:Py(U),getShippingAddresses:Py(q),getShippingAddressesOrThrow:Py(V),getShippingCountries:Py(G),getOutstandingBalance:Py(a),isPaymentDataRequired:z,isPaymentMethodInitialized:B}}var Ey=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Ay{constructor(e,t,n,i,r,o,a,s,d,c,l,u,h,p,m,y,g,v,f,S){this._store=e,this._storeProjectionFactory=t,this._checkoutActionCreator=n,this._checkoutValidator=i,this._hostedFormFactory=r,this._orderActionCreator=o,this._billingAddressActionCreator=a,this._consignmentActionCreator=s,this._paymentMethodActionCreator=d,this._paymentActionCreator=c,this._paymentHumanVerificationHandler=l,this._customerActionCreator=u,this._cartRequestSender=h,this._storeCreditActionCreator=p,this._couponActionCreator=m,this._spamProtectionActionCreator=y,this._paymentProviderCustomerActionCreator=g,this._shippingCountryActionCreator=v,this._remoteCheckoutActionCreator=f,this._paymentStrategyWidgetActionCreator=S,this._storeProjection=this._storeProjectionFactory.create(this._store)}createHostedForm(e,t){const n=this._storeProjection.getState().getCheckoutOrThrow().id;return this._hostedFormFactory.create(e,t,n)}subscribe(e,...t){return this._storeProjection.subscribe(e,...t)}getState(){return this._storeProjection.getState()}initializeOffsitePayment(e){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._paymentActionCreator.initializeOffsitePayment(e)),this._storeProjection.getState()})}loadCheckout(e){return Ey(this,void 0,void 0,function*(){return e?yield this._store.dispatch(this._checkoutActionCreator.loadCheckout(e)):yield this._store.dispatch(this._checkoutActionCreator.loadCurrentCheckout()),this._storeProjection.getState()})}loadDefaultCheckout(){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._checkoutActionCreator.loadDefaultCheckout()),this._storeProjection.getState()})}loadPaymentMethod(e,t){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._paymentMethodActionCreator.loadPaymentMethod(e,t)),this._storeProjection.getState()})}loadPaymentMethods(e){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._paymentMethodActionCreator.loadPaymentMethods(e)),this._storeProjection.getState()})}submitOrder(e,t){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._orderActionCreator.submitOrder(e,t)),this._storeProjection.getState()})}submitPayment(e){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._paymentActionCreator.submitPayment(e)),this._storeProjection.getState()})}finalizeOrder(e){return Ey(this,void 0,void 0,function*(){const{order:{getOrderOrThrow:t}}=this._store.getState();return yield this._store.dispatch(this._orderActionCreator.finalizeOrder(t().orderId,e)),this._storeProjection.getState()})}updateBillingAddress(e){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._billingAddressActionCreator.updateAddress(e)),this._storeProjection.getState()})}updateShippingAddress(e){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._consignmentActionCreator.updateAddress(e)),this._storeProjection.getState()})}selectShippingOption(e,t){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._consignmentActionCreator.selectShippingOption(e,t)),this._storeProjection.getState()})}signInCustomer(e,t){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._customerActionCreator.signInCustomer(e,t)),this._storeProjection.getState()})}signOutCustomer(e){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._customerActionCreator.signOutCustomer(e)),this._storeProjection.getState()})}createBuyNowCart(e,t){return Ey(this,void 0,void 0,function*(){const{body:n}=yield this._cartRequestSender.createBuyNowCart(e,t);return n})}applyStoreCredit(e,t){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._storeCreditActionCreator.applyStoreCredit(e,t)),this._storeProjection.getState()})}applyCoupon(e,t){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._couponActionCreator.applyCoupon(e,t)),this._storeProjection.getState()})}removeCoupon(e,t){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._couponActionCreator.removeCoupon(e,t)),this._storeProjection.getState()})}verifyCheckoutSpamProtection(){return Ey(this,void 0,void 0,function*(){const{checkout:e}=this._store.getState(),{shouldExecuteSpamCheck:t}=e.getCheckoutOrThrow();return t&&(yield this._store.dispatch(this._spamProtectionActionCreator.verifyCheckoutSpamProtection())),this._storeProjection.getState()})}loadCurrentOrder(e){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._orderActionCreator.loadCurrentOrder(e)),this._storeProjection.getState()})}updatePaymentProviderCustomer(e){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._paymentProviderCustomerActionCreator.updatePaymentProviderCustomer(e)),this._storeProjection.getState()})}loadShippingCountries(e){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._shippingCountryActionCreator.loadCountries(e)),this._storeProjection.getState()})}deleteConsignment(e,t){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._consignmentActionCreator.deleteConsignment(e,t)),this._storeProjection.getState()})}initializePayment(e,t,n){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._remoteCheckoutActionCreator.initializePayment(e,t,n)),this._storeProjection.getState()})}forgetCheckout(e,t){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._remoteCheckoutActionCreator.forgetCheckout(e,t)),this._storeProjection.getState()})}remoteCheckoutSignOut(e,t){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._remoteCheckoutActionCreator.signOut(e,t)),this._storeProjection.getState()})}validateCheckout(e,t){return Ey(this,void 0,void 0,function*(){yield this._checkoutValidator.validate(e,t)})}handlePaymentHumanVerification(e,t){return Ey(this,void 0,void 0,function*(){return\"string\"==typeof e?this._paymentHumanVerificationHandler.handle(e,null!=t?t:\"\"):this._paymentHumanVerificationHandler.handle(e)})}widgetInteraction(e){return Ey(this,void 0,void 0,function*(){return yield this._store.dispatch(this._paymentStrategyWidgetActionCreator.widgetInteraction(e),{queueId:\"widgetInteraction\"}),this._storeProjection.getState()})}}class ky{constructor(e){this._transformSelectors=e}create(e){return ct(e,this._transformSelectors)}}function Ty(e){const{config:{getHost:t,getLocale:i}}=e.getState(),r=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()}),a=new ky(Oy),s=new is(new ts(r),new ft(new It(r)),new os(new as(r))),d=new gm(new ts(r)),c=new Fm(e),l=new sm(new im(r),new gm(new ts(r))),u=new tt(new at(r),new _y(new wy(r))),h=new cy(new uy(r),new ts(r)),p=new ds(new cs(r)),m=new Lm(new Bm(dm(e)),l,new oy,new Im(Os((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.createScriptLoader)()))),y=new Im(Os((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.createScriptLoader)())),g=new Za(new Qa(r),s,new _s(Os((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.createScriptLoader)()),new Es(r))),v=new vy(new fy(r)),f=new Pt(new Mt(r)),S=Os((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.createScriptLoader)()),_=new Es(r),w=new _s(S,_),C=new Rm(r),I=new dy,b=new my(new yy(r,{locale:i()}),e),P=new ys(new ps(r),s),O=new hm;return new Ay(e,a,s,d,c,l,u,h,p,m,y,g,C,v,f,w,I,b,P,O)}const Dy=e=>{const{type:t,initializationStrategy:n}=e;return t===um.PPSDK&&\"string\"==typeof(null==n?void 0:n.type)};class My extends Rt{getByMethod(e){if(!e)return this.get();const t=this._getToken(e),n=[e.gateway,e.id].filter(e=>null!=e).join(\"-\");return this.get(t,n)}_getToken(e){if(Dy(e))return um.PPSDK;if(\"klarna\"===e.gateway)return um.KLARNAV2;const t=e.gateway||e.id;if(this._hasFactoryForMethod(t))return t;if(\"PAYMENT_TYPE_OFFLINE\"===e.type)return um.OFFLINE;throw new Ft(`'${t}' is not registered.`)}_hasFactoryForMethod(e){return this._hasFactory(e)}}class zy extends Ft{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}var Ny=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class xy{constructor(e,t,n,i){this._store=e,this._orderActionCreator=t,this._paymentActionCreator=n,this._hostedFormFactory=i}execute(e,t){var n,i;return this._isHostedPaymentFormEnabled(null===(n=e.payment)||void 0===n?void 0:n.methodId,null===(i=e.payment)||void 0===i?void 0:i.gatewayId)&&this._shouldRenderHostedForm?this._executeWithHostedForm(e,t):this._executeWithoutHostedForm(e,t)}finalize(e){return Promise.reject(new lm)}initialize(e){if(!this._isHostedPaymentFormEnabled(null==e?void 0:e.methodId,null==e?void 0:e.gatewayId)||!this._isHostedFieldAvailable(e))return this._shouldRenderHostedForm=!1,Promise.resolve(this._store.getState());const t=e&&e.creditCard&&e.creditCard.form,{config:n}=this._store.getState(),{paymentSettings:{bigpayBaseUrl:i=\"\"}={}}=n.getStoreConfig()||{};if(!t)throw new Ft;const r=this._hostedFormFactory.create(i,t);return r.attach().then(()=>(this._shouldRenderHostedForm=!0,this._hostedForm=r,this._store.getState()))}deinitialize(e){return this._hostedForm&&this._hostedForm.detach(),Promise.resolve(this._store.getState())}_executeWithoutHostedForm(e,t){const{payment:n}=e,i=Ny(e,[\"payment\"]),r=n&&n.paymentData;if(!n||!r)throw new zy([\"payment.paymentData\"]);return this._store.dispatch(this._orderActionCreator.submitOrder(i,t)).then(()=>this._store.dispatch(this._paymentActionCreator.submitPayment(Object.assign(Object.assign({},n),{paymentData:r}))))}_executeWithHostedForm(e,t){const{payment:n}=e,i=Ny(e,[\"payment\"]),r=this._hostedForm;if(!r)throw new Cs(fs.PaymentNotInitialized);if(!n||!n.methodId)throw new zy([\"payment.methodId\"]);return r.validate().then(()=>this._store.dispatch(this._orderActionCreator.submitOrder(i,t))).then(()=>r.submit(n)).then(()=>this._store.dispatch(this._orderActionCreator.loadCurrentOrder()))}_isHostedPaymentFormEnabled(e,t){if(!e)return!1;const{paymentMethods:{getPaymentMethodOrThrow:n}}=this._store.getState();return!0===n(e,t).config.isHostedFormEnabled}_isHostedFieldAvailable(e){return!(0,lodash__WEBPACK_IMPORTED_MODULE_5__.values)(e&&e.creditCard&&e.creditCard.form.fields).every(lodash__WEBPACK_IMPORTED_MODULE_5__.isNil)}}var Fy=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Ry extends xy{constructor(e,t,n,i,r){super(e,t,n,i),this._threeDSecureFlow=r}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return Fy(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const{paymentMethods:{getPaymentMethodOrThrow:n}}=this._store.getState(),i=n(e.methodId);return i.config.is3dsEnabled&&(yield this._threeDSecureFlow.prepare(i)),this._store.getState()})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return Fy(this,void 0,void 0,function*(){const{payment:{methodId:i=\"\"}={}}=e,{paymentMethods:{getPaymentMethodOrThrow:r}}=this._store.getState();return r(i).config.is3dsEnabled?this._threeDSecureFlow.start(n.execute.bind(this),e,t,this._hostedForm):n.execute.call(this,e,t)})}}var Ly=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class By extends xy{constructor(e,t,n,i,r){super(e,t,n,i),this._threeDSecureFlow=r}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return Ly(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const{paymentMethods:{getPaymentMethodOrThrow:n}}=this._store.getState(),i=n(e.methodId);return i.config.is3dsEnabled&&(yield this._threeDSecureFlow.prepare(i)),this._store.getState()})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return Ly(this,void 0,void 0,function*(){if(!e.payment)throw new zy([\"payment.methodId\"]);const{methodId:i}=e.payment;if(!i)throw new zy([\"payment.methodId\"]);const{paymentMethods:{getPaymentMethodOrThrow:r}}=this._store.getState();return r(i).config.is3dsEnabled?this._threeDSecureFlow.start(n.execute.bind(this),e,t,this._hostedForm):n.execute.call(this,e,t)})}}class jy{constructor(e,t,n,i,r,o,a,s){this._store=e,this._checkoutActionCreator=t,this._paymentMethodActionCreator=n,this._paymentStrategyActionCreator=i,this._paymentActionCreator=r,this._orderActionCreator=o,this._braintreeVisaCheckoutPaymentProcessor=a,this._visaCheckoutScriptLoader=s}initialize(e){const{braintreevisacheckout:t,methodId:n}=e;if(!t)throw new Ft('Unable to initialize payment because \"options.braintreevisacheckout\" argument is not provided.');return this._store.dispatch(this._paymentMethodActionCreator.loadPaymentMethod(n)).then(e=>{this._paymentMethod=e.paymentMethods.getPaymentMethod(n);const i=e.checkout.getCheckout(),r=e.config.getStoreConfig();if(!i)throw new Qe(We.MissingCheckout);if(!r)throw new Qe(We.MissingCheckoutConfig);const{clientToken:o,config:a}=this._paymentMethod||{};if(!o)throw new Qe(We.MissingPaymentMethod);const{onError:s=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,onPaymentSelect:d=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}=t,c={locale:r.storeProfile.storeLanguage,collectShipping:!1,subtotal:i.subtotal,currencyCode:r.currency.code};return Promise.all([this._visaCheckoutScriptLoader.load(null==a?void 0:a.testMode),this._braintreeVisaCheckoutPaymentProcessor.initialize(o,c)]).then(([e,t])=>{e.init(t),e.on(\"payment.success\",e=>this._paymentInstrumentSelected(e).then(()=>d()).catch(e=>s(e))),e.on(\"payment.error\",(e,t)=>s(t))})}).then(()=>this._store.getState())}execute(e,t){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new Ft('Unable to submit payment because \"payload.payment\" argument is not provided.');if(!this._paymentMethod||!this._paymentMethod.initializationData||!this._paymentMethod.initializationData.nonce)throw new Qe(We.MissingPaymentMethod);const{nonce:r}=this._paymentMethod.initializationData;return this._store.dispatch(this._orderActionCreator.submitOrder(i,t)).then(()=>this._store.dispatch(this._paymentActionCreator.submitPayment(Object.assign(Object.assign({},n),{paymentData:{nonce:r}})))).catch(e=>this._handleError(e))}finalize(){return Promise.reject(new lm)}deinitialize(){return this._braintreeVisaCheckoutPaymentProcessor.deinitialize().then(()=>this._store.getState())}_paymentInstrumentSelected(e){const t=this._store.getState();if(!this._paymentMethod)throw new Error(\"Payment method not initialized\");const{id:n}=this._paymentMethod;return this._store.dispatch(this._paymentStrategyActionCreator.widgetInteraction(()=>this._braintreeVisaCheckoutPaymentProcessor.handleSuccess(e,t.shippingAddress.getShippingAddress(),t.billingAddress.getBillingAddress()).then(()=>Promise.all([this._store.dispatch(this._checkoutActionCreator.loadCurrentCheckout()),this._store.dispatch(this._paymentMethodActionCreator.loadPaymentMethod(n))])),{methodId:n}),{queueId:\"widgetInteraction\"})}_handleError(e){if(\"BraintreeError\"===e.name)throw new Li(e.message);throw e}}var Uy=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class qy{constructor(e){this._braintreeScriptLoader=e,this._dataCollectors={},this._window=window}initialize(e){this._clientToken=e}getClient(){if(!this._clientToken)throw new Cs(fs.PaymentNotInitialized);return this._client||(this._client=this._braintreeScriptLoader.loadClient().then(e=>e.create({authorization:this._clientToken}))),this._client}getPaypalCheckout(e,t,n){return Uy(this,void 0,void 0,function*(){const i=yield this.getClient(),r=yield this._braintreeScriptLoader.loadPaypalCheckout(),o={client:i};return this._paypalCheckout=r.create(o,(i,r)=>{if(i)return n(i);this._window.paypal?t(r):r.loadPayPalSDK(this._getPayPalSDKConfig(e),()=>t(r))}),this._paypalCheckout})}get3DS(){return this._3ds||(this._3ds=Promise.all([this.getClient(),this._braintreeScriptLoader.load3DS()]).then(([e,t])=>t.create({client:e,version:2}))),this._3ds}getDataCollector(e){const t=e&&e.paypal?\"paypal\":\"default\";let n=this._dataCollectors[t];return n||(n=Promise.all([this.getClient(),this._braintreeScriptLoader.loadDataCollector()]).then(([t,n])=>n.create(Object.assign({client:t,kount:!0},e))).catch(e=>{if(e&&\"DATA_COLLECTOR_KOUNT_NOT_ENABLED\"===e.code)return{deviceData:void 0,teardown:()=>Promise.resolve()};throw e}),this._dataCollectors[t]=n),n}getVisaCheckout(){return this._visaCheckout||(this._visaCheckout=Promise.all([this.getClient(),this._braintreeScriptLoader.loadVisaCheckout()]).then(([e,t])=>t.create({client:e}))),this._visaCheckout}createHostedFields(e){return Uy(this,void 0,void 0,function*(){const[t,n]=yield Promise.all([this.getClient(),this._braintreeScriptLoader.loadHostedFields()]);return n.create(Object.assign(Object.assign({},e),{client:t}))})}teardown(){return Promise.all([this._teardown(this._3ds),this._teardown(this._dataCollectors.default),this._teardown(this._dataCollectors.paypal),this._teardown(this._paypalCheckout),this._teardown(this._venmoCheckout),this._teardown(this._visaCheckout)]).then(()=>{this._3ds=void 0,this._dataCollectors={},this._paypalCheckout=void 0,this._venmoCheckout=void 0,this._visaCheckout=void 0})}_teardown(e){return e?e.then(e=>e.teardown()).catch(e=>{if(\"METHOD_CALLED_AFTER_TEARDOWN\"!==e.code)throw e}):Promise.resolve()}_getPayPalSDKConfig(e){return Object.assign(Object.assign({currency:e.currency},e.isCreditEnabled&&{\"enable-funding\":\"paylater\"}),{components:Zi.toString(),intent:e.intent,commit:!1})}}class Vy{constructor(e,t){this._braintreeSDKCreator=e,this._requestSender=t}initialize(e,t){return this._braintreeSDKCreator.initialize(e),this._braintreeSDKCreator.getVisaCheckout().then(e=>e.createInitOptions({settings:{locale:t.locale,shipping:{collectShipping:t.collectShipping}},paymentRequest:{currencyCode:t.currencyCode,subtotal:String(t.subtotal)}}))}deinitialize(){return this._braintreeSDKCreator.teardown()}handleSuccess(e,t,n){return this._braintreeSDKCreator.getVisaCheckout().then(i=>Promise.all([i.tokenize(e),this._braintreeSDKCreator.getDataCollector()]).then(([e,i])=>{const{shippingAddress:r=this._toVisaCheckoutAddress(t),billingAddress:o=this._toVisaCheckoutAddress(n)}=e;return this._postForm(Object.assign(Object.assign({},e),{shippingAddress:r,billingAddress:o}),i)}))}_postForm(e,t){const{userData:n,billingAddress:i,shippingAddress:r,details:o}=e,{userEmail:a}=n,{deviceData:s}=t;return this._requestSender.post(\"/checkout.php\",{headers:Object.assign({Accept:\"text/html\",\"Content-Type\":\"application/x-www-form-urlencoded\"},rt),body:{payment_type:e.type,nonce:e.nonce,provider:\"braintreevisacheckout\",action:\"set_external_checkout\",device_data:s,card_information:this._getCardInformation(o),billing_address:this._getAddress(a,i),shipping_address:this._getAddress(a,r)}})}_toVisaCheckoutAddress(e){return e?{firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phone,streetAddress:e.address1,extendedAddress:e.address2,locality:e.city,region:e.stateOrProvinceCode,countryCode:e.countryCode,postalCode:e.postalCode}:{}}_getAddress(e,t={}){return{email:e,first_name:t.firstName,last_name:t.lastName,phone_number:t.phoneNumber,address_line_1:t.streetAddress,address_line_2:t.extendedAddress,city:t.locality,state:t.region,country_code:t.countryCode,postal_code:t.postalCode}}_getCardInformation(e){return{type:e.cardType,number:e.lastTwo}}}class Gy{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(e){return this._scriptLoader.loadScript(`//${e?\"sandbox-\":\"\"}assets.secure.checkout.visa.com/checkout-widget/resources/js/integration/v1/sdk.js`).then(()=>{if(!this._window.V)throw new ls;return this._window.V})}}var Hy=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class $y{constructor(e,t,n){this._store=e,this._paymentActionCreator=t,this._cardinalClient=n}prepare(e){return Hy(this,void 0,void 0,function*(){yield this._cardinalClient.load(e.id,e.config.testMode)})}start(e,t,n,i){var r,o,a;return Hy(this,void 0,void 0,function*(){const{instruments:{getCardInstrument:s}}=this._store.getState(),{payment:d={methodId:\"\"}}=t,{paymentData:c={}}=d;try{return yield e(t,n)}catch(e){if(e instanceof _t&&\"additional_action_required\"===e.body.status){const t=null===(o=null===(r=e.body.additional_action_required)||void 0===r?void 0:r.data)||void 0===o?void 0:o.token,n=null===(a=e.body.three_ds_result)||void 0===a?void 0:a.payer_auth_request;yield this._cardinalClient.configure(t);const l=this._getBin(c,s,i);l&&(yield this._cardinalClient.runBinProcess(l));try{return yield this._submitPayment(d,{xid:n},i)}catch(e){if(e instanceof _t&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"three_d_secure_required\"})){const t=e.body.three_ds_result,n=null==t?void 0:t.payer_auth_request;return yield this._cardinalClient.getThreeDSecureData(t,this._getOrderData()),yield this._submitPayment(d,{token:n},i)}throw e}}throw e}})}_getOrderData(){const e=this._store.getState(),t=e.billingAddress.getBillingAddressOrThrow(),n=e.shippingAddress.getShippingAddress(),{cart:{currency:{code:i},cartAmount:r}}=e.checkout.getCheckoutOrThrow();return{billingAddress:t,shippingAddress:n,currencyCode:i,id:e.order.getOrderOrThrow().orderId.toString(),amount:r}}_submitPayment(e,t,n){return Hy(this,void 0,void 0,function*(){const i=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.merge)({},e,{paymentData:{threeDSecure:t}});return n?(yield n.submit(i),this._store.getState()):this._store.dispatch(this._paymentActionCreator.submitPayment(i))})}_getBin(e,t,n){const i=Nm(e)&&t(e.instrumentId),r=function(e){const t=e;return!Nm(t)&&\"string\"==typeof t.ccName&&\"string\"==typeof t.ccNumber&&\"object\"==typeof t.ccExpiry&&\"string\"==typeof t.ccExpiry.month&&\"string\"==typeof t.ccExpiry.year}(e)&&e.ccNumber;return(i?i.iin:n?n.getBin():r)||\"\"}}const Wy=[100004,1010,1011,1020];var Yy,Ky,Jy,Zy,Qy,Xy,eg;!function(e){e.Init=\"init\",e.Complete=\"complete\",e.Confirm=\"confirm\"}(Yy||(Yy={})),function(e){e.SetupCompleted=\"payments.setupComplete\",e.Validated=\"payments.validated\"}(Ky||(Ky={})),function(e){e.Success=\"SUCCESS\",e.NoAction=\"NOACTION\",e.Failure=\"FAILURE\",e.Error=\"ERROR\"}(Jy||(Jy={})),function(e){e.CCA=\"CCA\",e.Paypal=\"Paypal\",e.Wallet=\"Wallet\",e.VisaCheckout=\"VisaCheckout\",e.ApplePay=\"ApplePay\",e.DiscoverWallet=\"DiscoverWallet\"}(Zy||(Zy={})),(Qy||(Qy={})).BinProcess=\"bin.process\",(Xy||(Xy={})).CCA=\"cca\",function(e){e.Yes=\"Y\",e.No=\"N\"}(eg||(eg={}));class tg{constructor(e){this._scriptLoader=e,this._provider=\"\",this._testMode=!1,this._configurationToken=\"\"}load(e,t=!1){return this._provider=e,this._testMode=t,this._sdk||(this._sdk=this._scriptLoader.load(e,t)),this._sdk.then(()=>{})}configure(e){if(this._configurationToken){if(this._configurationToken===e)return Promise.resolve();this._sdk=this._scriptLoader.load(`${this._provider}.${Date.now()}`,this._testMode)}return this._getClientSDK().then(t=>new Promise((n,i)=>{t.on(Ky.SetupCompleted,()=>{t.off(Ky.SetupCompleted),t.off(Ky.Validated),this._configurationToken=e,n()}),t.on(Ky.Validated,e=>{t.off(Ky.SetupCompleted),t.off(Ky.Validated),e.ActionCode===Jy.Error&&((0,lodash__WEBPACK_IMPORTED_MODULE_5__.includes)(Wy,e.ErrorNumber)&&i(new Qe(We.MissingPaymentMethod)),i(new Li(e.ErrorDescription)))}),t.setup(Yy.Init,{jwt:e})}))}runBinProcess(e){return this._getClientSDK().then(t=>t.trigger(Qy.BinProcess,e).catch(()=>{})).then(e=>{if(!e||!e.Status)throw new Cs(fs.PaymentNotInitialized)})}getThreeDSecureData(e,t){return this._getClientSDK().then(n=>new Promise((i,r)=>{n.on(Ky.Validated,(e,t)=>{if(n.off(Ky.Validated),!t)return r(new Li(e.ErrorDescription?e.ErrorDescription:\"An error was encountered while processing the transaction.\"));if(!e.ActionCode)return i({token:t});switch(e.ActionCode){case Jy.Success:return i({token:t});case Jy.NoAction:return e.ErrorNumber>0?r(new Li(e.ErrorDescription)):e.Payment&&e.Payment.ExtendedData&&e.Payment.ExtendedData.SignatureVerification===eg.Yes?i({token:t}):r(new Li(\"Transaction signature could not be validated.\"));case Jy.Failure:return r(new Li(\"User failed authentication or an error was encountered while processing the transaction.\"));case Jy.Error:return r(new Li(e.ErrorDescription))}});const o={AcsUrl:e.acs_url,Payload:e.merchant_data},a=this._mapToPartialOrder(t,e.payer_auth_request);n.continue(Xy.CCA,o,a)}))}_mapToPartialOrder(e,t){const n={BillingAddress:this._mapToCardinalAddress(e.billingAddress)};return e.paymentData&&(n.Account=this._mapToCardinalAccount(e.paymentData)),e.billingAddress.email&&(n.Email1=e.billingAddress.email),e.shippingAddress&&(n.ShippingAddress=this._mapToCardinalAddress(e.shippingAddress)),{Consumer:n,OrderDetails:{OrderNumber:e.id,Amount:e.amount,CurrencyCode:e.currencyCode,OrderChannel:\"S\",TransactionId:t}}}_mapToCardinalAccount(e){return{AccountNumber:Number(e.ccNumber),ExpirationMonth:Number(e.ccExpiry.month),ExpirationYear:Number(e.ccExpiry.year),NameOnAccount:e.ccName,CardCode:Number(e.ccCvv)}}_mapToCardinalAddress(e){const t={FirstName:e.firstName,LastName:e.lastName,Address1:e.address1,City:e.city,State:e.stateOrProvince,PostalCode:e.postalCode,CountryCode:e.countryCode};return e.address2&&(t.Address2=e.address2),e.phone&&(t.Phone1=e.phone),t}_getClientSDK(){if(!this._sdk)throw new Cs(fs.PaymentNotInitialized);return this._sdk}}class ng{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(e,t){const n=t?\"https://songbirdstag.cardinalcommerce.com/edge/v1/songbird.js\":\"https://songbird.cardinalcommerce.com/edge/v1/songbird.js\";return this._scriptLoader.loadScript(`${n}?v=${e}`).then(()=>{if(!this._window.Cardinal)throw new ls;return this._window.Cardinal})}}class ig extends Ze{constructor(e){super(e||\"The selected payment method was declined. Please select another payment method.\"),this.name=\"PaymentMethodDeclinedError\",this.type=\"payment_declined\"}}const rg=\"ACKNOWLEDGE\",og=\"FINALIZE\";var ag=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class sg extends xy{constructor(e,t,n,i,r,o,a){super(e,t,n,i),this._paymentMethodActionCreator=r,this._CBAMGPSScriptLoader=o,this._locale=a,this._sessionId=\"\"}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return ag(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const{methodId:n}=e,i=(yield this._store.dispatch(this._paymentMethodActionCreator.loadPaymentMethod(n))).paymentMethods.getPaymentMethodOrThrow(n),{clientToken:r,initializationData:{isTestModeFlagEnabled:o=!1,merchantId:a},config:{is3dsEnabled:s}}=i;if(s){if(this._threeDSjs=yield this._CBAMGPSScriptLoader.load(o),!this._threeDSjs)throw new Cs(fs.PaymentNotInitialized);if(!r||!a)throw new Qe(We.MissingPaymentMethod);this._sessionId=r,yield this._threeDSjs.configure({merchantId:a,sessionId:this._sessionId,callback:()=>{var e;if(null===(e=this._threeDSjs)||void 0===e?void 0:e.isConfigured())return this._store.getState();throw new Li(\"Failed to configure 3DS API.\")},configuration:{userLanguage:this._locale,wsVersion:62}})}return Promise.resolve(this._store.getState())})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return ag(this,void 0,void 0,function*(){const{payment:i}=e,r=i&&i.paymentData;if(!i||!r)throw new zy([\"payment.paymentData\"]);const{paymentMethods:{getPaymentMethodOrThrow:o}}=this._store.getState(),a=o(i.methodId),{is3dsEnabled:s}=a.config;if(s){const t=Object.assign(Object.assign({},r),{threeDSecure:{token:this._sessionId}});e.payment&&(e.payment.paymentData=t)}return n.execute.call(this,e,t).catch(e=>{if(!(s&&e instanceof _t&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"three_d_secure_required\"})))return Promise.reject(e);const t=this._store.getState(),n=t.order.getOrder(),{storeProfile:{storeId:i}}=t.config.getStoreConfigOrThrow();if(!n||!this._sessionId)throw new Qe(We.MissingCheckout);const r=`${i}_${n.orderId}`,{three_ds_result:{token:o}}=e.body;return o?this._initiateAuthentication(r,o):Promise.reject(e)})})}finalize(e){const t=this._store.getState(),n=t.order.getOrder();return n&&t.payment.getPaymentStatus()===og?this._store.dispatch(this._orderActionCreator.finalizeOrder(n.orderId,e)):Promise.reject(new lm)}deinitialize(){return this._threeDSjs=void 0,this._sessionId=\"\",super.deinitialize()}_initiateAuthentication(e,t){return ag(this,void 0,void 0,function*(){const n=yield new Promise((n,i)=>{if(!this._threeDSjs)throw new Cs(fs.PaymentNotInitialized);this._threeDSjs.initiateAuthentication(e,t,e=>{const t=e.error;return t?i(new ig(t.msg)):this._threeDSjs&&\"PROCEED\"===e.gatewayRecommendation?n(e.restApiResponse):i(new ig)})});if(n.transaction&&\"AUTHENTICATION_AVAILABLE\"===n.transaction.authenticationStatus)return this._authenticatePayer(e,t);throw new ig})}_authenticatePayer(e,t,n=1){return ag(this,void 0,void 0,function*(){return new Promise((i,r)=>{if(!this._threeDSjs)return r(new Cs(fs.PaymentNotInitialized));this._threeDSjs.authenticatePayer(e,t,i=>ag(this,void 0,void 0,function*(){const o=i.error;return o?o.cause&&\"SERVER_BUSY\"===o.cause&&n<5?(yield new Promise(e=>setTimeout(e,3e3)),this._authenticatePayer(e,t,++n)):r(new ig):new Promise(lodash__WEBPACK_IMPORTED_MODULE_5__.noop)}),{fullScreenRedirect:!0})})})}}class dg{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(e){return t=this,n=void 0,r=function*(){if(yield this._scriptLoader.loadScript(`//${e?\"test\":\"ap\"}-gateway.mastercard.com/static/threeDS/1.3.0/three-ds.min.js`),!this._window.ThreeDS)throw new ls;return this._window.ThreeDS},new((i=void 0)||(i=Promise))(function(e,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((r=r.apply(t,n||[])).next())});// removed by dead control flow\n{ var t, n, i, r; }}}class cg extends xy{constructor(e,t,n,i,r){super(e,t,n,i),this._formPoster=r}execute(e,t){return super.execute(e,t).catch(e=>e instanceof _t&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e.body.errors,{code:\"three_d_secure_required\"})?new Promise(()=>{this._formPoster.postForm(e.body.three_ds_result.acs_url,{PaReq:e.body.three_ds_result.payer_auth_request,TermUrl:e.body.three_ds_result.callback_url,MD:e.body.three_ds_result.merchant_data})}):Promise.reject(e))}finalize(e){const t=this._store.getState(),n=t.order.getOrder();return n&&t.payment.getPaymentStatus()===og?this._store.dispatch(this._orderActionCreator.finalizeOrder(n.orderId,e)):Promise.reject(new lm)}}class lg{constructor(e,t,n,i,r){this._store=e,this._orderActionCreator=t,this._paymentActionCreator=n,this._masterpassScriptLoader=i,this._locale=r}initialize(e){const{methodId:t}=e;if(this._paymentMethod=this._store.getState().paymentMethods.getPaymentMethod(t),!this._paymentMethod)throw new Qe(We.MissingPaymentMethod);const n={useMasterpassSrc:this._paymentMethod.initializationData.isMasterpassSrcEnabled,language:Ms(this._locale),testMode:this._paymentMethod.config.testMode,checkoutId:this._paymentMethod.initializationData.checkoutId};return this._masterpassScriptLoader.load(n).then(t=>{if(this._masterpassClient=t,!e.masterpass)throw new Ft('Unable to initialize payment because \"options.masterpass\" argument is not provided.');const n=e.masterpass.walletButton&&document.getElementById(e.masterpass.walletButton);return n&&(this._walletButton=n,this._walletButton.addEventListener(\"click\",this._handleWalletButtonClick)),this._store.getState()})}deinitialize(){return this._paymentMethod=void 0,this._walletButton&&this._walletButton.removeEventListener(\"click\",this._handleWalletButtonClick),this._walletButton=void 0,this._masterpassClient=void 0,Promise.resolve(this._store.getState())}execute(e,t){const{payment:n}=e,i={useStoreCredit:e.useStoreCredit};if(!n)throw new Ft('Unable to submit payment because \"payload.payment\" argument is not provided.');if(!this._paymentMethod||!this._paymentMethod.initializationData||!this._paymentMethod.initializationData.gateway)throw new Qe(We.MissingPaymentMethod);const r=this._paymentMethod.initializationData.paymentData;if(!r)throw new Ft('Unable to proceed because \"paymentMethod.initializationData.paymentData\" argument is not provided.');return this._store.dispatch(this._orderActionCreator.submitOrder(i,t)).then(()=>this._store.dispatch(this._paymentActionCreator.submitPayment(Object.assign(Object.assign({},n),{paymentData:r}))))}finalize(){return Promise.reject(new lm)}_createMasterpassPayload(){const e=this._store.getState(),t=e.checkout.getCheckout(),n=e.config.getStoreConfig();if(!t)throw new Qe(We.MissingCheckout);if(!n)throw new Qe(We.MissingCheckoutConfig);if(!this._paymentMethod||!this._paymentMethod.initializationData)throw new Qe(We.MissingPaymentMethod);return{checkoutId:this._paymentMethod.initializationData.checkoutId,allowedCardTypes:this._paymentMethod.initializationData.allowedCardTypes,amount:t.subtotal.toFixed(2),currency:n.currency.code,cartId:t.cart.id,callbackUrl:Ts(\"checkout\")}}_handleWalletButtonClick(e){if(e.preventDefault(),!this._masterpassClient)return;const t=this._createMasterpassPayload();this._masterpassClient.checkout(t)}}!function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);o>3&&a&&Object.defineProperty(t,n,a)}([Cr],lg.prototype,\"_handleWalletButtonClick\",null);class ug{constructor(e,t,n,i=window){this._store=e,this._orderActionCreator=t,this._scriptLoader=n,this._window=i,this._useRedirectFlow=!1}initialize(e){const t=this._store.getState();return this._paymentMethod=t.paymentMethods.getPaymentMethod(e.methodId),this._useRedirectFlow=!0===(e.paypalexpress&&e.paypalexpress.useRedirectFlow),this._isInContextEnabled()?this._scriptLoader.loadPaypal().then(e=>{if(this._paypalSdk=e,!this._paymentMethod||!this._paymentMethod.config.merchantId)throw new Qe(We.MissingPaymentMethod);this._paypalSdk.checkout.setup(this._paymentMethod.config.merchantId,{button:\"paypal-button\",environment:this._paymentMethod.config.testMode?\"sandbox\":\"production\"})}).then(()=>this._store.getState()):Promise.resolve(this._store.getState())}deinitialize(){return this._isInContextEnabled()&&this._paypalSdk&&(this._paypalSdk.checkout.closeFlow(),this._paypalSdk=void 0),Promise.resolve(this._store.getState())}execute(e,t){const n=this._paypalSdk;if(this._isAcknowledgedOrFinalized())return this._store.dispatch(this._orderActionCreator.submitOrder(e,t));if(!this._isInContextEnabled()||this._useRedirectFlow)return this._store.dispatch(this._orderActionCreator.submitOrder(e,t)).then(e=>{const t=e.payment.getPaymentRedirectUrl();return t&&this._window.top&&(this._window.top.location.href=t),new Promise(lodash__WEBPACK_IMPORTED_MODULE_5__.noop)});if(!n)throw new Cs(fs.PaymentNotInitialized);return n.checkout.initXO(),this._store.dispatch(this._orderActionCreator.submitOrder(e,t)).then(e=>{const t=e.payment.getPaymentRedirectUrl();return t&&n.checkout.startFlow(t),new Promise(lodash__WEBPACK_IMPORTED_MODULE_5__.noop)}).catch(e=>(n.checkout.closeFlow(),Promise.reject(e)))}finalize(e){const t=this._store.getState().order.getOrder();return t&&this._isAcknowledgedOrFinalized()?this._store.dispatch(this._orderActionCreator.finalizeOrder(t.orderId,e)):Promise.reject(new lm)}_isAcknowledgedOrFinalized(){const e=this._store.getState();return e.payment.getPaymentStatus()===rg||e.payment.getPaymentStatus()===og}_isInContextEnabled(){return!(!this._paymentMethod||!this._paymentMethod.config.merchantId)}}class hg{constructor(e){this._scriptLoader=e,this._window=window}loadPaypal(e=\"\"){return t=this,n=void 0,r=function*(){const t=\"//www.paypalobjects.com/api/checkout.min.js\",n={async:!0,attributes:{\"data-merchant-id\":e}};if(e?yield this._scriptLoader.loadScript(t,n):yield this._scriptLoader.loadScript(t),!this._window.paypal)throw new ls;return this._window.paypal},new((i=void 0)||(i=Promise))(function(e,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((r=r.apply(t,n||[])).next())});// removed by dead control flow\n{ var t, n, i, r; }}}class pg extends Ze{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}const mg=\"redirecting\";class yg{constructor(){this._isRedirecting=this.currentUrlHasRedirectingParam()}isRedirecting(){return this._isRedirecting}setRedirecting(e){e?this.setRedirectingParamOnUrl():this.removeRedirectingParamFromUrl(),this._isRedirecting=e}currentUrlHasRedirectingParam(){return mg in this.getCurrentUrl().query}getCurrentUrl(){return (0,query_string__WEBPACK_IMPORTED_MODULE_12__.parseUrl)(window.location.href)}replaceCurrentUrl(e){window.history.replaceState(null,\"\",e)}setRedirectingParamOnUrl(){if(this.currentUrlHasRedirectingParam())return;const e=this.getCurrentUrl(),t=Object.assign(Object.assign({},e),{query:Object.assign(Object.assign({},e.query),{[mg]:\"true\"})});this.replaceCurrentUrl((0,query_string__WEBPACK_IMPORTED_MODULE_12__.stringifyUrl)(t))}removeRedirectingParamFromUrl(){this.currentUrlHasRedirectingParam()&&this.replaceCurrentUrl((0,query_string__WEBPACK_IMPORTED_MODULE_12__.exclude)(window.location.href,[mg]))}}const gg=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.overSome)([e=>\"continue\"===(0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e,\"type\")&&\"redirect\"===(0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e,\"code\")&&(e=>{const t=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e,\"form_fields\");return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.isString)((0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e,\"url\"))&&((0,lodash__WEBPACK_IMPORTED_MODULE_5__.isUndefined)(t)||(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isObject)(t))})((0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e,\"parameters\")),e=>\"continue\"===(0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e,\"type\")&&\"resubmit_with_human_verification\"===(0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e,\"code\")&&(e=>{const t=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e,\"available_methods\");return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.isArray)(t)})((0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e,\"parameters\"))]);class vg{constructor(e,t){this._formPoster=e,this._humanVerificationHandler=t}handle(e,t){switch(e.code){case\"redirect\":return(({url:e,form_fields:t},n)=>{const i=new yg;return i.isRedirecting()?(i.setRedirecting(!1),Promise.reject(new pg)):(i.setRedirecting(!0),t?n.postForm(e,t):window.location.assign(e),new Promise(lodash__WEBPACK_IMPORTED_MODULE_5__.noop))})(e.parameters,this._formPoster);case\"resubmit_with_human_verification\":return(({available_methods:e},t,n)=>{return i=void 0,r=void 0,a=function*(){if(!n)throw new Error(\"PPSDK human verification callback function is missing.\");if(!t)throw new Error(\"PPSDK human verification handler is missing.\");if(0===e.length)throw Error(\"Human verification method is missing.\");const{id:i,parameters:r}=e[0],o=yield t.handle(i,r.key);return n(o)},new((o=void 0)||(o=Promise))(function(e,t){function n(e){try{d(a.next(e))}catch(e){t(e)}}function s(e){try{d(a.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o(function(e){e(i)})).then(n,s)}d((a=a.apply(i,r||[])).next())});// removed by dead control flow\n{ var i, r, o, a; }})(e.parameters,this._humanVerificationHandler,null==t?void 0:t.humanVerification)}}}class fg{constructor(e){this._continueHandler=e}handle(e,t){const{body:n}=e;return(e=>\"success\"===(0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e,\"type\"))(n)?Promise.resolve():(e=>gg(e))(n)?this._continueHandler.handle(n,null==t?void 0:t.continue):(e=>\"failure\"===(0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e.body,\"type\")&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isString)((0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e.body,\"code\")))(e)?(e=>{return Promise.reject(new _t((t=e,Object.assign(Object.assign({},t),{body:{errors:[{code:t.body.code}]}}))));// removed by dead control flow\n{ var t; }})(e):((e=>{(0,lodash__WEBPACK_IMPORTED_MODULE_5__.get)(e.body,\"type\")})(e),(e=>Promise.reject(new _t(e)))(e))}}const Sg=\"completed-payments\";class _g{constructor(e){this._browserStorage=e}isCompleted(e){return this.getCompletedPayments().indexOf(e)>=0}setCompleted(e){const t=this.getCompletedPayments();t.push(e),this.setCompletedPayments(t)}getCompletedPayments(){return this._browserStorage.getItem(Sg)||[]}setCompletedPayments(e){this._browserStorage.setItem(Sg,e)}}var wg,Cg=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Ig{constructor(e,t,n,i,r){this._store=e,this._orderActionCreator=t,this._subStrategyRegistry=n,this._paymentResumer=i,this._completedPayments=new _g(r)}execute(e,t){var n;return Cg(this,void 0,void 0,function*(){const{bigpayBaseUrl:i}=this._store.getState().config.getStoreConfigOrThrow().paymentSettings;if(!(null==t?void 0:t.methodId))throw new Ft('Unable to submit payment because \"options.methodId\" argument is not provided.');const{methodId:r}=t,{payment:o}=e,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]),{_subStrategy:s}=this;if(!s)throw new Cs(fs.PaymentNotInitialized);yield this._store.dispatch(this._orderActionCreator.submitOrder(a,t));const d=null===(n=this._store.getState().order.getOrderMeta())||void 0===n?void 0:n.token;if(!d)throw new Qe(We.MissingOrder);return yield s.execute({methodId:r,payment:o,bigpayBaseUrl:i,token:d}),this._store.getState()})}finalize(e){return Cg(this,void 0,void 0,function*(){const t=this._store.getState().order.getOrderOrThrow();if(t.isComplete)return this._store.getState();const{bigpayBaseUrl:n}=this._store.getState().config.getStoreConfigOrThrow().paymentSettings;if(!(null==e?void 0:e.methodId))throw new Ft('Unable to submit payment because \"options.methodId\" argument is not provided.');const i=this._store.getState().order.getPaymentId(e.methodId);if(!i||!t||this._completedPayments.isCompleted(i))throw new lm;const{orderId:r}=t;return yield this._paymentResumer.resume({paymentId:i,bigpayBaseUrl:n,orderId:r}).catch(e=>{throw this._completedPayments.setCompleted(i),e}),this._store.getState()})}initialize(e){return Cg(this,void 0,void 0,function*(){if(!(null==e?void 0:e.methodId))throw new Ft('Unable to submit payment because \"options.methodId\" argument is not provided.');const t=((e,t)=>{const n=e.getState().paymentMethods.getPaymentMethod(t);if(n&&Dy(n))return n})(this._store,e.methodId);if(!t)throw new Cs(fs.PaymentNotInitialized);if(this._subStrategy=this._subStrategyRegistry.getByMethod(t),!this._subStrategy)throw new Cs(fs.PaymentNotInitialized);return yield this._subStrategy.initialize(e),this._store.getState()})}deinitialize(e){var t;return Cg(this,void 0,void 0,function*(){return null===(t=this._subStrategy)||void 0===t||t.deinitialize(),this._store.getState()})}}!function(e){e.CARD=\"card_ui\",e.NONE=\"none\",e.UNSUPPORTED=\"unsupported\"}(wg||(wg={}));const bg=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.cond)([[e=>\"card_ui\"===e.type,(0,lodash__WEBPACK_IMPORTED_MODULE_5__.constant)(wg.CARD)],[e=>\"none\"===e.type,(0,lodash__WEBPACK_IMPORTED_MODULE_5__.constant)(wg.NONE)],[lodash__WEBPACK_IMPORTED_MODULE_5__.stubTrue,(0,lodash__WEBPACK_IMPORTED_MODULE_5__.constant)(wg.UNSUPPORTED)]]);class Pg extends Rt{getByMethod(e){const t=bg(e.initializationStrategy);return this.get(t)}}var Og=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Eg{constructor(e,t,n,i){this._store=e,this._orderActionCreator=t,this._hostedFormFactory=n,this._ppsdkStepHandler=i}execute(e){return Og(this,void 0,void 0,function*(){const t=this._hostedForm;if(!t)throw new Cs(fs.PaymentNotInitialized);const{additionalAction:n,payment:i}=e;if(!i||!i.methodId)throw new zy([\"payment.methodId\"]);yield t.validate();const{payload:r}=yield t.submit(i,n),{response:o}=r;yield this._ppsdkStepHandler.handle(o,{continue:{humanVerification:t=>Og(this,void 0,void 0,function*(){return this.execute(Object.assign({additionalAction:t},e))})}}),yield this._store.dispatch(this._orderActionCreator.loadCurrentOrder())})}initialize(e){return Og(this,void 0,void 0,function*(){const t=e&&e.creditCard&&e.creditCard.form,{config:n,checkout:i}=this._store.getState(),{paymentSettings:{bigpayBaseUrl:r=\"\"}={}}=n.getStoreConfig()||{},o=i.getCheckoutOrThrow().id;if(!t)throw new Ft;const a=t&&this._hostedFormFactory.create(r,t,o);yield a.attach(),this._hostedForm=a})}deinitialize(){this._hostedForm&&this._hostedForm.detach()}}class Ag{constructor(e,t){this._requestSender=e,this._stepHandler=t}execute({methodId:e,bigpayBaseUrl:t,token:n}){const i={credentials:!1,body:{payment_method_id:e},headers:{authorization:n,\"X-XSRF-TOKEN\":null}};return this._requestSender.post(`${t}/payments`,i).then(e=>this._stepHandler.handle(e))}initialize(){return Promise.resolve()}deinitialize(){}}var kg,Tg=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Dg{constructor(e,t){this._requestSender=e,this._stepHandler=t}resume({paymentId:e,bigpayBaseUrl:t,orderId:n}){return Tg(this,void 0,void 0,function*(){const i={credentials:!1,headers:{authorization:yield this._getToken(n).catch(()=>{throw new lm}),\"X-XSRF-TOKEN\":null}};return this._requestSender.get(`${t}/payments/${e}`,i).then(e=>this._stepHandler.handle(e))})}_getToken(e){return Tg(this,void 0,void 0,function*(){const t={params:{order_id:e}};return this._requestSender.get(\"/api/storefront/payments/auth-token\",t).then(({body:e})=>e.auth_token)})}}class Mg extends xy{constructor(e,t,n,i,r){super(e,t,n,i),this._wepayRiskClient=r}initialize(e){return this._wepayRiskClient.initialize(),super.initialize(e)}execute(e,t){const n=this._wepayRiskClient.getRiskToken(),i=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.merge)({},e,{payment:{paymentData:{deviceSessionId:n}}});return super.execute(i,t)}}class zg{constructor(e){this._scriptLoader=e}initialize(){return this._scriptLoader.loadScript(\"//static.wepay.com/min/js/risk.1.latest.js\").then(()=>this._riskClient=window.WePay.risk).then(()=>this)}getRiskToken(){if(!this._riskClient)throw new Cs(fs.PaymentNotInitialized);return this._riskClient.generate_risk_token(),this._riskClient.get_risk_token()}}!function(e){e.LoadInstrumentsRequested=\"LOAD_INSTRUMENTS_REQUESTED\",e.LoadInstrumentsSucceeded=\"LOAD_INSTRUMENTS_SUCCEEDED\",e.LoadInstrumentsFailed=\"LOAD_INSTRUMENTS_FAILED\",e.DeleteInstrumentRequested=\"DELETE_INSTRUMENT_REQUESTED\",e.DeleteInstrumentSucceeded=\"DELETE_INSTRUMENT_SUCCEEDED\",e.DeleteInstrumentFailed=\"DELETE_INSTRUMENT_FAILED\"}(kg||(kg={}));class Ng{constructor(e){this._instrumentRequestSender=e}loadInstruments(){return e=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(t=>{t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(kg.LoadInstrumentsRequested));const n=this._getSessionContext(e),i=this._getCurrentAccessToken(e),r=this._getShippingAddress(e);return this._getValidAccessToken(i).then(e=>this._instrumentRequestSender.loadInstruments(Object.assign(Object.assign({},n),{authToken:e.vaultAccessToken}),r).then(({body:n})=>{t.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(kg.LoadInstrumentsSucceeded,n,e)),t.complete()})).catch(e=>{t.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(kg.LoadInstrumentsFailed,e))})})}deleteInstrument(e){return t=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(n=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(kg.DeleteInstrumentRequested,void 0,{instrumentId:e}));const i=this._getSessionContext(t),r=this._getCurrentAccessToken(t);return this._getValidAccessToken(r).then(t=>this._instrumentRequestSender.deleteInstrument(Object.assign(Object.assign({},i),{authToken:t.vaultAccessToken}),e).then(({body:i})=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(kg.DeleteInstrumentSucceeded,i,Object.assign({instrumentId:e},t))),n.complete()})).catch(t=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(kg.DeleteInstrumentFailed,t,{instrumentId:e}))})})}_isValidVaultAccessToken(e){if(!e||!e.vaultAccessToken)return!1;return function(e){const t=new Date(e.getTime());return t.setMinutes(e.getMinutes()+2),t}(new Date(e.vaultAccessExpiry)).valueOf()>Date.now()}_getCurrentAccessToken(e){const{instruments:t}=e.getState(),n=t.getInstrumentsMeta();if(n)return{vaultAccessToken:n.vaultAccessToken,vaultAccessExpiry:n.vaultAccessExpiry}}_getValidAccessToken(e){return e&&this._isValidVaultAccessToken(e)?Promise.resolve(e):this._instrumentRequestSender.getVaultAccessToken().then(({body:e})=>e)}_getShippingAddress(e){const t=e.getState(),n=t.shippingAddress.getShippingAddresses();return n.length>1?n:t.shippingAddress.getShippingAddress()}_getSessionContext(e){const t=e.getState(),n=t.config.getStoreConfig(),i=t.cart.getCart();if(!n)throw new Qe(We.MissingCheckoutConfig);if(!i)throw new Qe(We.MissingCart);const{customerId:r}=i,{storeId:o}=n.storeProfile,{code:a}=n.shopperCurrency.isTransactional?n.shopperCurrency:n.currency;return{customerId:r,storeId:o,currencyCode:a}}}var xg,Fg,Rg=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class Lg{transformResponse(e){const t=this._transformResponse(e),{body:n}=t,i=Rg(t,[\"body\"]);return Object.assign(Object.assign({},i),{body:{vaultedInstruments:this._transformVaultedInstruments(n.vaulted_instruments)}})}transformErrorResponse(e){return this._transformResponse(e)}transformVaultAccessResponse(e){return Object.assign(Object.assign({},e),{body:{vaultAccessToken:e.body.data.token,vaultAccessExpiry:e.body.data.expires_at}})}_transformVaultedInstruments(e=[]){return e.map(e=>this._isPayPalInstrument(e)?function(e){return{bigpayToken:e.bigpay_token,defaultInstrument:e.default_instrument,provider:e.provider,externalId:e.external_id,trustedShippingAddress:e.trusted_shipping_address,method:\"paypal\",type:\"account\"}}(e):this._isBankInstrument(e)?function(e){return{bigpayToken:e.bigpay_token,defaultInstrument:e.default_instrument,provider:e.provider,trustedShippingAddress:e.trusted_shipping_address,accountNumber:e.account_number,issuer:e.issuer,iban:e.iban,method:e.method,type:\"bank\"}}(e):function(e){return{bigpayToken:e.bigpay_token,defaultInstrument:e.default_instrument,provider:e.provider,iin:e.iin,last4:e.last_4,expiryMonth:e.expiry_month,expiryYear:e.expiry_year,brand:e.brand,trustedShippingAddress:e.trusted_shipping_address,untrustedShippingCardVerificationMode:e.untrusted_shipping_address_card_verification_mode,method:e.method,type:\"card\"}}(e))}_isPayPalInstrument(e){return\"paypal\"===e.method_type}_isBankInstrument(e){return\"bank\"===e.method_type}_transformResponse(e){const{data:t}=e,n=Rg(e,[\"data\"]);return Object.assign(Object.assign({},n),{body:t})}}class Bg{constructor(e,t){this._client=e,this._requestSender=t,this._transformer=new Lg}getVaultAccessToken({timeout:e}={}){return this._requestSender.get(\"/internalapi/v1/checkout/payments/vault-access-token\",{timeout:e}).then(e=>Object.assign(Object.assign({},e),{body:{vaultAccessToken:e.body.data.token,vaultAccessExpiry:e.body.data.expires_at}}))}loadInstruments(e,t){return t?this._loadInstrumentsWithAddress(e,t):this._loadInstruments(e)}deleteInstrument(e,t){const n=Object.assign(Object.assign({},e),{instrumentId:t});return new Promise((e,t)=>{this._client.deleteShopperInstrument(n,(n,i)=>n?t(this._transformer.transformErrorResponse(n)):e(this._transformer.transformResponse(i)))})}_loadInstruments(e){return new Promise((t,n)=>{this._client.loadInstruments(e,(e,i)=>e?n(this._transformer.transformErrorResponse(e)):t(this._transformer.transformResponse(i)))})}_loadInstrumentsWithAddress(e,t){const n=Object.assign(Object.assign({},e),{shippingAddress:Array.isArray(t)?t.map(e=>jm(e)):jm(t)});return new Promise((e,t)=>{this._client.loadInstrumentsWithAddress(n,(n,i)=>n?t(this._transformer.transformErrorResponse(n)):e(this._transformer.transformResponse(i)))})}}!function(e){e.LoadPickupOptionsRequested=\"LOAD_PICKUP_OPTIONS_REQUESTED\",e.LoadPickupOptionsSucceeded=\"LOAD_PICKUP_OPTIONS_SUCCEEDED\",e.LoadPickupOptionsFailed=\"LOAD_PICKUP_OPTIONS_FAILED\"}(xg||(xg={}));class jg{constructor(e){this._pickupOptionRequestSender=e}loadPickupOptions(e){return t=>new rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable(n=>{const i=this._hydrateApiQuery(t,e);n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(xg.LoadPickupOptionsRequested)),this._pickupOptionRequestSender.fetchPickupOptions(i).then(t=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(xg.LoadPickupOptionsSucceeded,t.body.results,e)),n.complete()}).catch(e=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(xg.LoadPickupOptionsFailed,e))})})}_hydrateApiQuery(e,t){const n=e.getState(),i=n.cart.getCartOrThrow();if(!i)throw new Qe(We.MissingCart);const r=n.consignments.getConsignmentById(t.consignmentId);if(!r)throw new Qe(We.MissingConsignments);const o=r.lineItemIds,a=i.lineItems.physicalItems.filter(e=>(0,lodash__WEBPACK_IMPORTED_MODULE_5__.includes)(o,e.id)).map(e=>({variantId:e.variantId,quantity:e.quantity}));return{searchArea:t.searchArea,items:a}}}class Ug{constructor(e){this._requestSender=e}fetchPickupOptions(e){return this._requestSender.post(\"/api/storefront/pickup-options\",{headers:Object.assign({Accept:it.Json},rt),body:e})}}!function(e){e.UpdateAddressFailed=\"SHIPPING_STRATEGY_UPDATE_ADDRESS_FAILED\",e.UpdateAddressRequested=\"SHIPPING_STRATEGY_UPDATE_ADDRESS_REQUESTED\",e.UpdateAddressSucceeded=\"SHIPPING_STRATEGY_UPDATE_ADDRESS_SUCCEEDED\",e.SelectOptionFailed=\"SHIPPING_STRATEGY_SELECT_OPTION_FAILED\",e.SelectOptionRequested=\"SHIPPING_STRATEGY_SELECT_OPTION_REQUESTED\",e.SelectOptionSucceeded=\"SHIPPING_STRATEGY_SELECT_OPTION_SUCCEEDED\",e.InitializeFailed=\"SHIPPING_STRATEGY_INITIALIZE_FAILED\",e.InitializeRequested=\"SHIPPING_STRATEGY_INITIALIZE_REQUESTED\",e.InitializeSucceeded=\"SHIPPING_STRATEGY_INITIALIZE_SUCCEEDED\",e.DeinitializeFailed=\"SHIPPING_STRATEGY_DEINITIALIZE_FAILED\",e.DeinitializeRequested=\"SHIPPING_STRATEGY_DEINITIALIZE_REQUESTED\",e.DeinitializeSucceeded=\"SHIPPING_STRATEGY_DEINITIALIZE_SUCCEEDED\",e.WidgetInteractionStarted=\"SHIPPING_STRATEGY_WIDGET_INTERACTION_STARTED\",e.WidgetInteractionFinished=\"SHIPPING_STRATEGY_WIDGET_INTERACTION_FINISHED\",e.WidgetInteractionFailed=\"SHIPPING_STRATEGY_WIDGET_INTERACTION_FAILED\"}(Fg||(Fg={}));class qg{constructor(e){this._strategyRegistry=e}updateAddress(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{const r=n.getState().payment.getPaymentId(),o=t&&t.methodId||r&&r.providerId;i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fg.UpdateAddressRequested,void 0,{methodId:o})),this._strategyRegistry.get(o).updateAddress(e,Object.assign(Object.assign({},t),{methodId:o})).then(()=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fg.UpdateAddressSucceeded,void 0,{methodId:o})),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Fg.UpdateAddressFailed,e,{methodId:o}))})})}selectOption(e,t){return n=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(i=>{const r=n.getState().payment.getPaymentId(),o=t&&t.methodId||r&&r.providerId;i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fg.SelectOptionRequested,void 0,{methodId:o})),this._strategyRegistry.get(o).selectOption(e,Object.assign(Object.assign({},t),{methodId:o})).then(()=>{i.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fg.SelectOptionSucceeded,void 0,{methodId:o})),i.complete()}).catch(e=>{i.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Fg.SelectOptionFailed,e,{methodId:o}))})})}initialize(e){return t=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(n=>{const i=t.getState(),r=i.payment.getPaymentId(),o=e&&e.methodId||r&&r.providerId,a=Object.assign(Object.assign({},e),{methodId:o});if(o&&i.shippingStrategies.isInitialized(o))return n.complete();n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fg.InitializeRequested,void 0,{methodId:o})),this._strategyRegistry.get(o).initialize(a).then(()=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fg.InitializeSucceeded,void 0,{methodId:o})),n.complete()}).catch(e=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Fg.InitializeFailed,e,{methodId:o}))})})}deinitialize(e){return t=>rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(n=>{const i=t.getState(),r=i.payment.getPaymentId(),o=e&&e.methodId||r&&r.providerId;if(o&&!i.shippingStrategies.isInitialized(o))return n.complete();n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fg.DeinitializeRequested,void 0,{methodId:o})),this._strategyRegistry.get(o).deinitialize(Object.assign(Object.assign({},e),{methodId:o})).then(()=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fg.DeinitializeSucceeded,void 0,{methodId:o})),n.complete()}).catch(e=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Fg.DeinitializeFailed,e,{methodId:o}))})})}widgetInteraction(e,t){return rxjs__WEBPACK_IMPORTED_MODULE_21__.Observable.create(n=>{const i={methodId:t&&t.methodId};n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fg.WidgetInteractionStarted,void 0,i)),e().then(()=>{n.next((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fg.WidgetInteractionFinished,void 0,i)),n.complete()}).catch(e=>{n.error((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createErrorAction)(Fg.WidgetInteractionFailed,e,i))})})}}var Vg=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Gg{constructor(e,t=window){this._scriptLoader=e,this._window=t}getStripeClient(e,t,n){return Vg(this,void 0,void 0,function*(){let i=this._window.bcStripeClient;return i||(i=(yield this.load())(e,{stripeAccount:t,locale:n,betas:[\"payment_element_beta_2\",\"alipay_pm_beta_1\",\"link_default_integration_beta_1\",\"shipping_address_element_beta_1\",\"address_element_beta_1\"],apiVersion:\"2020-03-02;alipay_beta=v1;link_beta=v1\"}),Object.assign(this._window,{bcStripeClient:i})),i})}getElements(e,t){let n=this._window.bcStripeElements;return n?(n.fetchUpdates(),n.update(t)):(n=e.elements(t),Object.assign(this._window,{bcStripeElements:n})),n}load(){return Vg(this,void 0,void 0,function*(){if(yield this._scriptLoader.loadScript(\"https://js.stripe.com/v3/\"),!this._window.Stripe)throw new ls;return this._window.Stripe})}}var Hg,$g=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Wg{constructor(e,t,n,i,r){this._store=e,this._consignmentActionCreator=t,this._paymentMethodActionCreator=n,this._amazonPayV2PaymentProcessor=i,this._shippingStrategyActionCreator=r}updateAddress(e,t){const n=this._store.getState().shippingAddress.getShippingAddress();if(!n)throw new Qe(We.MissingShippingAddress);const i=Object.assign(Object.assign({},n),{customFields:e.customFields});return this._store.dispatch(this._consignmentActionCreator.updateAddress(i,t))}selectOption(e,t){return this._store.dispatch(this._consignmentActionCreator.selectShippingOption(e,t))}initialize(e){return $g(this,void 0,void 0,function*(){const{amazonpay:t,methodId:n}=e;if(!t||!n)throw new Ft('Unable to proceed because \"options.amazonpay\" argument is not provided.');const i=(yield this._store.dispatch(this._paymentMethodActionCreator.loadPaymentMethod(n))).paymentMethods.getPaymentMethodOrThrow(n);yield this._amazonPayV2PaymentProcessor.initialize(i);const{paymentToken:r,region:o}=i.initializationData,a=t.editAddressButtonId;if(r&&a){const e=this._shouldShowLoadingSpinner(o);this._bindEditButton(a,r,\"changeAddress\",e)}return this._store.getState()})}deinitialize(){return $g(this,void 0,void 0,function*(){return yield this._amazonPayV2PaymentProcessor.deinitialize(),Promise.resolve(this._store.getState())})}_bindEditButton(e,t,n,i){const r=document.getElementById(e);if(r&&r.parentNode){if(i){const e=r.cloneNode(!0);r.parentNode.replaceChild(e,r),e.addEventListener(\"click\",()=>this._showLoadingSpinner())}this._amazonPayV2PaymentProcessor.bindButton(e,t,n)}}_showLoadingSpinner(){return this._store.dispatch(this._shippingStrategyActionCreator.widgetInteraction(()=>new Promise(rxjs__WEBPACK_IMPORTED_MODULE_25__.noop)),{queueId:\"widgetInteraction\"})}_shouldShowLoadingSpinner(e){return\"us\"!==e}}!function(e){e.CVV=\"cvv\",e.PAN=\"pan\"}(Hg||(Hg={}));var Yg=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Kg{constructor(e,t,n,i,r,o){this._store=e,this._billingAddressActionCreator=t,this._consignmentActionCreator=n,this._paymentMethodActionCreator=i,this._paymentProviderCustomerActionCreator=r,this._braintreeIntegrationService=o}updateAddress(e,t){return this._store.dispatch(this._consignmentActionCreator.updateAddress(e,t))}selectOption(e,t){return this._store.dispatch(this._consignmentActionCreator.selectShippingOption(e,t))}deinitialize(){return Promise.resolve(this._store.getState())}initialize(e){var t;return Yg(this,void 0,void 0,function*(){const{methodId:n,braintreefastlane:i}=e||{},{onPayPalFastlaneAddressChange:r}=i||{};if(!n)throw new Ft('Unable to proceed because \"methodId\" argument is not provided.');const o=this._store.getState();if(!o.customer.getCustomerOrThrow().isGuest)return Promise.resolve(this._store.getState());try{if(this._shouldRunAuthenticationFlow()){const e=o.paymentMethods.getPaymentMethod(n),{clientToken:r,isFastlaneStylingEnabled:a}=(null==e?void 0:e.initializationData)||{};r||(yield this._store.dispatch(this._paymentMethodActionCreator.loadPaymentMethod(n)));const s=pr(a?null===(t=null==e?void 0:e.initializationData)||void 0===t?void 0:t.fastlaneStyles:void 0,null==i?void 0:i.styles);yield this._runAuthenticationFlowOrThrow(n,s)}\"function\"==typeof r&&(yield this._shouldUseBraintreeFastlaneShippingComponent(n))&&r(()=>this._handleBraintreeFastlaneShippingAddressChange())}catch(e){}return Promise.resolve(this._store.getState())})}_shouldRunAuthenticationFlow(){var e;const t=this._store.getState(),n=null===(e=t.cart.getCart())||void 0===e?void 0:e.id,i=Ii.get(\"bc-fastlane-sessionId\")||\"\",r=t.paymentProviderCustomer.getPaymentProviderCustomer(),o=fl(r)?r:{};return(null==o?void 0:o.authenticationState)!==fn.CANCELED&&!(null==o?void 0:o.authenticationState)&&i===n}_runAuthenticationFlowOrThrow(e,t){var n,i;return Yg(this,void 0,void 0,function*(){const r=this._store.getState(),o=r.cart.getCartOrThrow(),a=r.countries.getCountries()||[],s=r.paymentMethods.getPaymentMethodOrThrow(e),{clientToken:d,config:c}=s;if(!d)throw new Qe(We.MissingPaymentMethod);this._braintreeIntegrationService.initialize(d);const l=yield this._braintreeIntegrationService.getBraintreeFastlane(null==o?void 0:o.id,null==c?void 0:c.testMode,t),u=(null===(n=r.customer.getCustomer())||void 0===n?void 0:n.email)||(null===(i=r.billingAddress.getBillingAddress())||void 0===i?void 0:i.email);if(!u)return;const{lookupCustomerByEmail:h,triggerAuthenticationFlow:p}=l.identity,{customerContextId:m}=yield h(u);if(!m)return;const{authenticationState:y,profileData:g}=yield p(m);if(y===fn.CANCELED)return yield this._store.dispatch(this._paymentProviderCustomerActionCreator.updatePaymentProviderCustomer({authenticationState:y,addresses:[],instruments:[]})),void Ii.remove(\"bc-fastlane-sessionId\");const v=this._getPayPalBillingAddress(g),f=g.shippingAddress,S=g.shippingAddress.phoneNumber,_=this._mapPayPalToBcAddress(f,a,S),w=this._mapPayPalToBcAddress(v,a,S);if(w&&_){const t=this._mergeShippingAndBillingAddresses(_,w),n=this._mapPayPalToBcInstrument(e,g.card),i=n?[n]:[];yield this._store.dispatch(this._paymentProviderCustomerActionCreator.updatePaymentProviderCustomer({authenticationState:y,addresses:t,instruments:i})),w&&(yield this._store.dispatch(this._billingAddressActionCreator.updateAddress(Object.assign(Object.assign({},w),{id:String(w.id)})))),_&&o.lineItems.physicalItems.length>0&&(yield this._store.dispatch(this._consignmentActionCreator.updateAddress(_)))}})}_getPayPalBillingAddress(e){const{name:t,card:n}=e,i=n.paymentSource.card.billingAddress;return Object.assign(Object.assign({},i),{firstName:i.firstName||(null==t?void 0:t.firstName),lastName:i.lastName||(null==t?void 0:t.lastName)})}_getCountryNameByCountryCode(e,t){const n=t.find(t=>t.code===e);return(null==n?void 0:n.name)||\"\"}_mapPayPalToBcAddress(e,t,n,i){return{id:Number(Date.now()),type:\"paypal-address\",firstName:e.firstName||\"\",lastName:e.lastName||\"\",company:e.company||\"\",address1:e.streetAddress,address2:e.extendedAddress||\"\",city:e.locality,stateOrProvince:e.region,stateOrProvinceCode:e.region,country:this._getCountryNameByCountryCode(e.countryCodeAlpha2,t),countryCode:e.countryCodeAlpha2,postalCode:e.postalCode,phone:n||\"\",customFields:i||[]}}_normalizeAddress(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.omit)(e,[\"id\"])}_mergeShippingAndBillingAddresses(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEqual)(this._normalizeAddress(e),this._normalizeAddress(t))?[e]:[e,t]}_mapPayPalToBcInstrument(e,t){if(!t)return;const{id:n,paymentSource:i}=t,{brand:r,expiry:o,lastDigits:a}=i.card,[s,d]=o.split(\"-\");return{bigpayToken:n,brand:r,defaultInstrument:!1,expiryMonth:d,expiryYear:s,iin:\"\",last4:a,method:e,provider:e,trustedShippingAddress:!1,untrustedShippingCardVerificationMode:Hg.CVV,type:\"card\"}}_handleBraintreeFastlaneShippingAddressChange(){var e;return Yg(this,void 0,void 0,function*(){const t=this._store.getState().countries.getCountries()||[],n=yield this._braintreeIntegrationService.getBraintreeFastlane(),{selectionChanged:i,selectedAddress:r}=yield n.profile.showShippingAddressSelector();if(i){const n=this._store.getState(),i=n.shippingAddress.getShippingAddressesOrThrow(),o=n.paymentProviderCustomer.getPaymentProviderCustomer(),a=fl(o)?o:{},s=this._mapPayPalToBcAddress(r,t,r.phoneNumber,null===(e=i[0])||void 0===e?void 0:e.customFields);if(s){const e=this._filterAddresses([s,...a.addresses||[]]);return yield this._store.dispatch(this._paymentProviderCustomerActionCreator.updatePaymentProviderCustomer(Object.assign(Object.assign({},a),{addresses:e}))),yield this._store.dispatch(this._consignmentActionCreator.updateAddress(s)),s}}})}_filterAddresses(e){return e.reduce((e,t)=>t?e.some(e=>this._isEqualAddresses(e,t))?e:[...e,t]:e,[])}_isEqualAddresses(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEqual)(this._normalizeAddress(e),this._normalizeAddress(t))}_shouldUseBraintreeFastlaneShippingComponent(e){var t;return Yg(this,void 0,void 0,function*(){const n=this._store.getState().paymentProviderCustomer.getPaymentProviderCustomer(),i=fl(n)?n:{};if(i&&i!==fn.CANCELED){const n=yield this._getBraintreePaymentMethodOrThrow(e);return!!(null===(t=null==n?void 0:n.initializationData)||void 0===t?void 0:t.isFastlaneEnabled)}return!1})}_getBraintreePaymentMethodOrThrow(e){return Yg(this,void 0,void 0,function*(){const t=this._store.getState().paymentMethods.getPaymentMethod(e);return t||(yield this._store.dispatch(this._paymentMethodActionCreator.loadPaymentMethod(e))).paymentMethods.getPaymentMethodOrThrow(e)})}}class Jg{constructor(e,t){this._store=e,this._consignmentActionCreator=t}updateAddress(e,t){return this._store.dispatch(this._consignmentActionCreator.updateAddress(e,t))}selectOption(e,t){return this._store.dispatch(this._consignmentActionCreator.selectShippingOption(e,t))}initialize(){return Promise.resolve(this._store.getState())}deinitialize(){return Promise.resolve(this._store.getState())}}var Zg,Qg,Xg,ev,tv,nv,iv=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class rv{constructor(e,t,n,i,r,o,a){this._store=e,this._billingAddressActionCreator=t,this._consignmentActionCreator=n,this._paymentMethodActionCreator=i,this._paymentProviderCustomerActionCreator=r,this._paypalCommerceSdk=o,this._paypalCommerceFastlaneUtils=a}updateAddress(e,t){return this._store.dispatch(this._consignmentActionCreator.updateAddress(e,t))}selectOption(e,t){return this._store.dispatch(this._consignmentActionCreator.selectShippingOption(e,t))}deinitialize(){return Promise.resolve(this._store.getState())}initialize(e){return iv(this,void 0,void 0,function*(){const{methodId:t,paypalcommercefastlane:n}=e||{},{onPayPalFastlaneAddressChange:i,styles:r}=n||{};if(!t)throw new Ft('Unable to proceed because \"methodId\" argument is not provided.');const o=this._store.getState().customer.getCustomerOrThrow();if(!(null==o?void 0:o.isGuest))return Promise.resolve(this._store.getState());try{this._shouldAuthenticateUserWithFastlane()&&(yield this._initializePayPalSdk(t,r),yield this._authenticateUserWithFastlaneOtp(t)),\"function\"==typeof i&&this._shouldUsePayPalFastlaneShippingComponent()&&(yield this._initializePayPalSdk(t,r),i(()=>this._handlePayPalShippingAddressChange()))}catch(e){}return Promise.resolve(this._store.getState())})}_getPayPalPaymentMethodOrThrow(e){return iv(this,void 0,void 0,function*(){const t=this._store.getState().paymentMethods.getPaymentMethod(e);return t||(yield this._store.dispatch(this._paymentMethodActionCreator.loadPaymentMethod(e))).paymentMethods.getPaymentMethodOrThrow(e)})}_getPayPalCustomerAuthenticationState(){const e=this._store.getState().paymentProviderCustomer.getPaymentProviderCustomerOrThrow();return(Hh(e)?e:{}).authenticationState}_shouldAuthenticateUserWithFastlane(){const e=this._store.getState().cart.getCartOrThrow(),t=this._paypalCommerceFastlaneUtils.getStorageSessionId();return!this._getPayPalCustomerAuthenticationState()&&t===e.id}_shouldUsePayPalFastlaneShippingComponent(){const e=this._getPayPalCustomerAuthenticationState();return!!e&&e!==ua.CANCELED}_initializePayPalSdk(e,t){var n;return iv(this,void 0,void 0,function*(){const i=this._store.getState().cart.getCartOrThrow(),r=yield this._getPayPalPaymentMethodOrThrow(e),{isDeveloperModeApplicable:o,isFastlaneStylingEnabled:a}=(null==r?void 0:r.initializationData)||{},s=!!o,d=ga(a?null===(n=null==r?void 0:r.initializationData)||void 0===n?void 0:n.fastlaneStyles:{},t),c=yield this._paypalCommerceSdk.getPayPalFastlaneSdk(r,i.currency.code,i.id);yield this._paypalCommerceFastlaneUtils.initializePayPalFastlane(c,s,d)})}_authenticateUserWithFastlaneOtp(e){var t,n;return iv(this,void 0,void 0,function*(){const i=this._store.getState(),r=i.cart.getCartOrThrow(),o=null===(t=i.customer.getCustomer())||void 0===t?void 0:t.email,a=null===(n=i.billingAddress.getBillingAddress())||void 0===n?void 0:n.email,s=o||a||\"\",{customerContextId:d}=yield this._paypalCommerceFastlaneUtils.lookupCustomerOrThrow(s),c=yield this._paypalCommerceFastlaneUtils.triggerAuthenticationFlowOrThrow(d),{authenticationState:l,addresses:u,billingAddress:h,shippingAddress:p,instruments:m}=this._paypalCommerceFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,c);yield this._store.dispatch(this._paymentProviderCustomerActionCreator.updatePaymentProviderCustomer({authenticationState:l,addresses:u,instruments:m})),c.authenticationState===ua.CANCELED?this._paypalCommerceFastlaneUtils.removeStorageSessionId():this._paypalCommerceFastlaneUtils.updateStorageSessionId(r.id),h&&(yield this._store.dispatch(this._billingAddressActionCreator.updateAddress(Object.assign(Object.assign({},h),{id:String(h.id)})))),p&&r.lineItems.physicalItems.length>0&&(yield this._store.dispatch(this._consignmentActionCreator.updateAddress(p)))})}_handlePayPalShippingAddressChange(){var e;return iv(this,void 0,void 0,function*(){const t=this._paypalCommerceFastlaneUtils.getPayPalFastlaneOrThrow(),{selectionChanged:n,selectedAddress:i}=yield t.profile.showShippingAddressSelector();if(n){const t=this._store.getState(),n=t.shippingAddress.getShippingAddressesOrThrow(),r=t.paymentProviderCustomer.getPaymentProviderCustomer(),o=Qh(r)?r:{},a=this._paypalCommerceFastlaneUtils.mapPayPalToBcAddress(i.address,i.name,i.phoneNumber,null===(e=n[0])||void 0===e?void 0:e.customFields),s=this._paypalCommerceFastlaneUtils.filterAddresses([a,...o.addresses||[]]);return yield this._store.dispatch(this._paymentProviderCustomerActionCreator.updatePaymentProviderCustomer(Object.assign(Object.assign({},o),{addresses:s}))),yield this._store.dispatch(this._consignmentActionCreator.updateAddress(a)),a}})}}!function(e){e.SHIPPING=\"shipping\",e.BILLING=\"billing\"}(Zg||(Zg={})),function(e){e.SPLIT=\"split\",e.FULL=\"full\",e.ORGANIZATION=\"organization\"}(Qg||(Qg={})),function(e){e.CreditCard=\"card\",e.SOFORT=\"sofort\",e.EPS=\"eps\",e.GRABPAY=\"grabpay\",e.BANCONTACT=\"bancontact\",e.IDEAL=\"ideal\",e.GIROPAY=\"giropay\",e.ALIPAY=\"alipay\",e.KLARNA=\"klarna\"}(Xg||(Xg={})),function(e){e.NEVER=\"never\",e.AUTO=\"auto\",e.ALWAYS=\"always\",e.PAYMENT=\"payment\",e.IF_REQUIRED=\"if_required\"}(ev||(ev={})),function(e){e.PAYMENT=\"payment\",e.AUTHENTICATION=\"linkAuthentication\",e.SHIPPING=\"address\"}(tv||(tv={})),function(e){e.REQUIRES_PAYMENT_METHOD=\"requires_payment_method\",e.REQUIRES_CONFIRMATION=\"requires_confirmation\",e.REQUIRES_ACTION=\"requires_action\",e.PROCESSING=\"processing\",e.SUCCEEDED=\"succeeded\",e.CANCELED=\"canceled\"}(nv||(nv={}));var ov;class av{constructor(e,t,n,i){this._store=e,this._stripeUPEScriptLoader=t,this._consignmentActionCreator=n,this._paymentMethodActionCreator=i}updateAddress(e,t){return this._store.dispatch(this._consignmentActionCreator.updateAddress(e,t))}selectOption(e,t){return this._store.dispatch(this._consignmentActionCreator.selectShippingOption(e,t))}initialize(e){return t=this,n=void 0,r=function*(){if(!e.stripeupe)throw new Ft('Unable to proceed because \"options\" argument is not provided.');const{container:t,gatewayId:n,methodId:i,onChangeShipping:r,getStyles:o,availableCountries:a,getStripeState:s}=e.stripeupe;Object.entries(e.stripeupe).forEach(([e,t])=>{if(!t)throw new Ft(`Unable to proceed because \"${e}\" argument is not provided.`)});const d=(yield this._store.dispatch(this._paymentMethodActionCreator.loadPaymentMethod(n,{params:{method:i}}))).paymentMethods.getPaymentMethodOrThrow(i,n),{initializationData:{stripePublishableKey:c,stripeConnectedAccount:l}}=d;if(!d||!d.initializationData.stripePublishableKey||!d.clientToken)throw new Qe(We.MissingPaymentMethod);let u;this._stripeUPEClient=yield this._stripeUPEScriptLoader.getStripeClient(c,l);const h=o&&o(),{form:{getShippingAddressFields:p},shippingAddress:{getShippingAddress:m}}=this._store.getState(),y=p([],\"\");u=h?{variables:{colorPrimary:h.fieldInnerShadow,colorBackground:h.fieldBackground,colorText:h.labelText,colorDanger:h.fieldErrorText,colorTextSecondary:h.labelText,colorTextPlaceholder:h.fieldPlaceholderText,spacingUnit:\"4px\",borderRadius:\"4px\"},rules:{\".Input\":{borderColor:h.fieldBorder,color:h.fieldText,boxShadow:h.fieldInnerShadow}}}:{variables:{spacingUnit:\"4px\",borderRadius:\"4px\"}},this._stripeElements=this._stripeUPEScriptLoader.getElements(this._stripeUPEClient,{clientSecret:d.clientToken,appearance:u});const g=m(),v=y.find(e=>\"phone\"===e.name);let f={mode:Zg.SHIPPING,allowedCountries:[a],fields:{phone:\"always\"},validation:{phone:{required:v&&v.required?\"always\":\"never\"}},display:{name:Qg.SPLIT}};if(g){const{stateOrProvinceCode:e,countryCode:t,lastName:n,firstName:i,phone:r,address1:o,address2:a,city:d,postalCode:c}=g,l=e&&t?s(t,e):e;f=Object.assign(Object.assign({},f),{defaultValues:{firstName:i,lastName:n,phone:r,address:{line1:o,line2:a,city:d,state:l,postal_code:c,country:t}}})}let S=this._stripeElements.getElement(tv.SHIPPING);return S&&S.destroy(),S=this._stripeElements.create(tv.SHIPPING,f),S.on(\"change\",e=>{if(!(\"isNewAddress\"in e))throw new Qe(We.MissingShippingAddress);(e.complete||e.isNewAddress)&&(this.sendData&&clearTimeout(this.sendData),this.sendData=setTimeout(()=>{r(Object.assign(Object.assign({},e),{phoneFieldRequired:!!v&&v.required}))},1e3))}),S.mount(`#${t}`),Promise.resolve(this._store.getState())},new((i=void 0)||(i=Promise))(function(e,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((r=r.apply(t,n||[])).next())});// removed by dead control flow\n{ var t, n, i, r; }}deinitialize(){return Promise.resolve(this._store.getState())}}!function(e){e.SendSignInEmailRequested=\"SEND_SIGNIN_EMAIL_REQUESTED\",e.SendSignInEmailSucceeded=\"SEND_SIGNIN_EMAIL_SUCCEEDED\",e.SendSignInEmailFailed=\"SEND_SIGNIN_EMAIL_FAILED\"}(ov||(ov={}));class sv{constructor(e){this._requestSender=e}sendSignInEmail(e,t){return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(ov.SendSignInEmailRequested)),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>{return n=this,i=void 0,o=function*(){const{body:n}=yield this._requestSender.sendSignInEmail(e,t);return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(ov.SendSignInEmailSucceeded,n)},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(ov.SendSignInEmailFailed,e)))}}class dv{constructor(e){this._requestSender=e}sendSignInEmail({email:e,redirectUrl:t},{timeout:n}={}){const i=Object.assign({Accept:it.JsonV1},rt);return this._requestSender.post(\"/login.php?action=passwordless_login\",{body:{email:e,redirect_url:t||xs(window.top?window.top.location.href:\"\").pathname},headers:i,timeout:n})}}class cv{constructor(e){this._messageCustomizer=e}transform(e){var t;return e.message=(t=this._messageCustomizer(e))?t.split(/(?:\\r\\n|\\n|\\r)/).map(e=>e.replace(/^\\s+/gm,\"\")).join(\" \").trim():\"\",e}}let lv=class{constructor(e,t,n,i,r,o,a,s,d,c,l,u,h,p,m,y,g,v,f,S,_,w,C,I,b,P,O,E){this._store=e,this._storeProjection=t,this._extensionMessenger=n,this._extensionEventBroadcaster=i,this._billingAddressActionCreator=r,this._checkoutActionCreator=o,this._configActionCreator=a,this._customerActionCreator=s,this._consignmentActionCreator=d,this._countryActionCreator=c,this._couponActionCreator=l,this._customerStrategyActionCreator=u,this._errorActionCreator=h,this._giftCertificateActionCreator=p,this._instrumentActionCreator=m,this._orderActionCreator=y,this._paymentMethodActionCreator=g,this._paymentStrategyActionCreator=v,this._pickupOptionActionCreator=f,this._shippingCountryActionCreator=S,this._shippingStrategyActionCreator=_,this._signInEmailActionCreator=w,this._spamProtectionActionCreator=C,this._storeCreditActionCreator=I,this._subscriptionsActionCreator=b,this._formFieldsActionCreator=P,this._extensionActionCreator=O,this._workerExtensionMessenger=E,this._errorTransformer=function(e=\"development\"===ut()){return new cv(t=>{if(!e||!function(e){return!(!e.subtype&&!e.type)}(t))return t.message;switch(t.subtype||t.type){case We.MissingConsignments:return`\\n                ${t.message}\\n                The data could be unavailable because no shipping address has been provided.\\n                To fix this, create a consignment or update the shipping address before performing\\n                the same action again.\\n            `;case We.MissingCart:case We.MissingCheckout:return`\\n                ${t.message}\\n                The data could be unavailable because it has not loaded from the server yet.\\n                To fix this issue, you can try calling \\`CheckoutService#loadCheckout\\`\\n                before performing the same action again.\\n            `;case We.MissingCheckoutConfig:return`\\n                ${t.message}\\n                The data could be unavailable because it has not loaded from the server yet.\\n                To fix this issue, you need to make sure \\`CheckoutService\\` is initialized\\n                properly by calling \\`CheckoutService#loadCheckout\\` before performing any\\n                other actions.\\n            `;case We.MissingOrder:return`\\n                ${t.message}\\n                The data could be unavailable because it has not loaded from the server yet.\\n                To fix this issue, you can try calling \\`CheckoutService#loadOrder\\`\\n                before performing the same action again.\\n            `;case We.MissingOrderId:return`\\n                ${t.message}\\n                The data could be unavailable because no order has been created yet. You have\\n                to first create the order before you can perform the action.\\n            `;case We.MissingPaymentMethod:return`\\n                ${t.message}\\n                The data could be unavailable because it has not loaded from the server, or\\n                configured by the merchant yet. To fix the former issue, you can try calling\\n                \\`CheckoutService#loadPaymentMethods\\` before performing the same action again.\\n            `;case fs.CustomerNotInitialized:return\"\\n                In order to initialize the customer step of checkout, you need to call\\n                `CheckoutService#initializeCustomer`. Afterwards, you should be able to\\n                submit customer details.\\n            \";case fs.PaymentNotInitialized:return`\\n                ${t.message}\\n                In order to initialize the payment step of checkout, you need to call\\n                \\`CheckoutService#initializePayment\\`. Afterwards, you should be able to\\n                submit payment details.\\n            `;case fs.ShippingNotInitialized:return`\\n                ${t.message}\\n                In order to initialize the shipping step of checkout, you need to call\\n                \\`CheckoutService#initializeShipping\\`. Afterwards, you should be able to\\n                submit shipping details.\\n            `;default:return t.message}})}()}getState(){return this._storeProjection.getState()}notifyState(){this._storeProjection.notifyState()}subscribe(e,...t){return this._storeProjection.subscribe(e,...t)}loadCheckout(e,t){return this._dispatch(e?this._checkoutActionCreator.loadCheckout(e,t):this._checkoutActionCreator.loadDefaultCheckout(t))}updateCheckout(e,t){const n=this._checkoutActionCreator.updateCheckout(e,t);return this._dispatch(n)}loadOrder(e,t){const n=this._orderActionCreator.loadOrder(e,t),i=this._formFieldsActionCreator.loadFormFields(t),r=this._configActionCreator.loadConfig(t);return Promise.all([this._dispatch(n),this._dispatch(r,{queueId:\"config\"}),this._dispatch(i,{queueId:\"formFields\"})]).then(()=>this.getState())}submitOrder(e,t){const n=this._paymentStrategyActionCreator.execute(e,t);return this._dispatch(n,{queueId:\"paymentStrategy\"})}finalizeOrderIfNeeded(e){const t=this._paymentStrategyActionCreator.finalize(e);return this._dispatch(t,{queueId:\"paymentStrategy\"})}loadPaymentMethods(e){const t=this._paymentMethodActionCreator.loadPaymentMethods(e);return this._dispatch(t,{queueId:\"paymentMethods\"})}loadPaymentMethodByIds(e,t){const n=this._paymentMethodActionCreator.loadPaymentMethodsById(e,t);return this._dispatch(n,{queueId:\"paymentMethods\"})}loadPaymentMethod(e,t){const n=this._paymentMethodActionCreator.loadPaymentMethod(e,t);return this._dispatch(n,{queueId:\"paymentMethods\"})}initializePayment(e){const t=this._paymentStrategyActionCreator.initialize(e);return this._dispatch(t,{queueId:\"paymentStrategy\"})}deinitializePayment(e){const t=this._paymentStrategyActionCreator.deinitialize(e);return this._dispatch(t,{queueId:\"paymentStrategy\"})}loadBillingCountries(e){const t=this._countryActionCreator.loadCountries(e);return this._dispatch(t,{queueId:\"billingCountries\"})}loadShippingCountries(e){const t=this._shippingCountryActionCreator.loadCountries(e);return this._dispatch(t,{queueId:\"shippingCountries\"})}loadPickupOptions(e){const t=this._pickupOptionActionCreator.loadPickupOptions(e);return this._dispatch(t,{queueId:\"pickupOptions\"})}loadBillingAddressFields(e){return this.loadBillingCountries(e)}loadShippingAddressFields(e){return this.loadShippingCountries(e)}initializeCustomer(e){const t=this._customerStrategyActionCreator.initialize(e);return this._dispatch(t,{queueId:\"customerStrategy\"})}deinitializeCustomer(e){const t=this._customerStrategyActionCreator.deinitialize(e);return this._dispatch(t,{queueId:\"customerStrategy\"})}sendSignInEmail(e,t){const n=this._signInEmailActionCreator.sendSignInEmail(e,t);return this._dispatch(n,{queueId:\"signInEmail\"})}createCustomerAccount(e,t){const n=this._customerActionCreator.createCustomer(e,t);return this._dispatch(n)}createCustomerAddress(e,t){const n=this._customerActionCreator.createAddress(e,t);return this._dispatch(n)}updateSubscriptions(e,t){const n=this._subscriptionsActionCreator.updateSubscriptions(e,t);return this._dispatch(n,{queueId:\"subscriptions\"})}continueAsGuest(e,t){const n=this._billingAddressActionCreator.continueAsGuest(e,t);return this._dispatch(n)}signInCustomer(e,t){const n=this._customerStrategyActionCreator.signIn(e,t);return this._dispatch(n,{queueId:\"customerStrategy\"})}signOutCustomer(e){const t=this._customerStrategyActionCreator.signOut(e);return this._dispatch(t,{queueId:\"customerStrategy\"})}executePaymentMethodCheckout(e){const t=this._customerStrategyActionCreator.executePaymentMethodCheckout(e);return this._dispatch(t,{queueId:\"customerStrategy\"})}loadShippingOptions(e){const t=this._consignmentActionCreator.loadShippingOptions(e);return this._dispatch(t)}initializeShipping(e){const t=this._shippingStrategyActionCreator.initialize(e);return this._dispatch(t,{queueId:\"shippingStrategy\"})}deinitializeShipping(e){const t=this._shippingStrategyActionCreator.deinitialize(e);return this._dispatch(t,{queueId:\"shippingStrategy\"})}selectShippingOption(e,t){const n=this._shippingStrategyActionCreator.selectOption(e,t);return this._dispatch(n,{queueId:\"shippingStrategy\"})}updateShippingAddress(e,t){const n=this._shippingStrategyActionCreator.updateAddress(e,t);return this._dispatch(n,{queueId:\"shippingStrategy\"})}createConsignments(e,t){const n=this._consignmentActionCreator.createConsignments(e,t);return this._dispatch(n,{queueId:\"shippingStrategy\"})}deleteConsignment(e,t){const n=this._consignmentActionCreator.deleteConsignment(e,t);return this._dispatch(n,{queueId:\"shippingStrategy\"})}updateConsignment(e,t){const n=this._consignmentActionCreator.updateConsignment(e,t);return this._dispatch(n,{queueId:\"shippingStrategy\"})}assignItemsToAddress(e,t){const n=this._consignmentActionCreator.assignItemsByAddress(e,t);return this._dispatch(n,{queueId:\"shippingStrategy\"})}unassignItemsToAddress(e,t){const n=this._consignmentActionCreator.unassignItemsByAddress(e,t);return this._dispatch(n,{queueId:\"shippingStrategy\"})}selectConsignmentShippingOption(e,t,n){const i=this._consignmentActionCreator.updateShippingOption({id:e,shippingOptionId:t},n);return this._dispatch(i,{queueId:\"shippingStrategy\"})}updateBillingAddress(e,t={}){const n=this._billingAddressActionCreator.updateAddress(e,t);return this._dispatch(n)}applyStoreCredit(e,t){const n=this._storeCreditActionCreator.applyStoreCredit(e,t);return this._dispatch(n)}applyCoupon(e,t){const n=this._couponActionCreator.applyCoupon(e,t);return this._dispatch(n)}removeCoupon(e,t){const n=this._couponActionCreator.removeCoupon(e,t);return this._dispatch(n)}applyGiftCertificate(e,t){const n=this._giftCertificateActionCreator.applyGiftCertificate(e,t);return this._dispatch(n)}removeGiftCertificate(e,t){const n=this._giftCertificateActionCreator.removeGiftCertificate(e,t);return this._dispatch(n)}loadInstruments(){const e=this._instrumentActionCreator.loadInstruments();return this._dispatch(e)}deleteInstrument(e){const t=this._instrumentActionCreator.deleteInstrument(e);return this._dispatch(t).then(()=>this.loadInstruments())}clearError(e){const t=this._errorActionCreator.clearError(e);return this._dispatch(t)}initializeSpamProtection(e){const t=this._spamProtectionActionCreator.initialize(e);return this._dispatch(t,{queueId:\"spamProtection\"})}executeSpamCheck(){const e=this._spamProtectionActionCreator.verifyCheckoutSpamProtection();return this._dispatch(e,{queueId:\"spamProtection\"})}loadExtensions(e){const t=this._extensionActionCreator.loadExtensions(e);return this._dispatch(t,{queueId:\"extensions\"})}renderExtension(e,t){return n=this,i=void 0,o=function*(){const n=this._extensionActionCreator.renderExtension(e,t,this._workerExtensionMessenger),i=yield this._dispatch(n,{queueId:\"extensions\"});return this._extensionEventBroadcaster.listen(),i},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}clearExtensionCache(e){this._extensionMessenger.clearCacheByRegion(e)}postMessageToExtension(e,t){this._extensionMessenger.post(e,t)}handleExtensionCommand(e,t,n){return this._extensionMessenger.listenForCommand(e,t,n)}handleExtensionQuery(e,t,n){return this._extensionMessenger.listenForQuery(e,t,n)}_dispatch(e,t){return this._store.dispatch(e,t).then(()=>this.getState()).catch(e=>{throw this._errorTransformer.transform(e)})}};lv=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Cr],lv);const uv=lv;function hv(e){return(...t)=>{const n=t.pop();return e(...t,(...e)=>{const t=n(...e);return\"function\"==typeof t?(0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoize)(t):t})}}const pv=hv(reselect__WEBPACK_IMPORTED_MODULE_35__.createSelector),mv=hv((0,reselect__WEBPACK_IMPORTED_MODULE_35__.createSelectorCreator)(reselect__WEBPACK_IMPORTED_MODULE_36__.defaultMemoize,(e,t)=>shallowequal__WEBPACK_IMPORTED_MODULE_13___default()(e,t)));class yv extends _t{constructor(e,t){super(e,{message:t||\"An unexpected error has occurred. The checkout process cannot continue as a result.\"}),this.name=\"UnrecoverableError\",this.type=\"unrecoverable\"}}function gv(e){return e.reduce((e,t)=>t?[...e,t]:e,[]).join(\" \")}class vv extends _t{constructor(e){super(e,{message:\"The request has timed out or aborted.\"}),this.name=\"TimeoutError\",this.type=\"timeout\"}}class fv{constructor(){this._factoryMethods={},this.register(\"default\",(e,t)=>new _t(e,{message:t})),this.register(\"internal\",(e,t)=>function(e,t){const{body:n}=e,{errors:i=[]}=n;return new _t(e,{message:gv(i)||n.detail||n.title||t,errors:i.length?i.map(e=>({code:n.type,message:e})):[{code:n.type,message:n.detail||n.title}]})}(e,t)),this.register(\"storefront\",(e,t)=>function(e,t){const{body:n}=e;return new _t(e,{message:t||n.detail||n.title,errors:[{code:n.code||n.type,message:n.detail||n.title}]})}(e,t)),this.register(\"payment\",(e,t)=>bm(e,t)),this.register(\"timeout\",e=>new vv(e))}register(e,t){this._factoryMethods[e]=t}createError(e,t){return(this._factoryMethods[this._getType(e)]||this._factoryMethods.default)(e,t)}_getType(e){if(0===e.status)return\"timeout\";if(this._isStorefrontErrorResponseBody(e.body))return\"storefront\";if(this._isInternalErrorResponseBody(e.body)){const t=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.last)(e.body.type.split(\"/\"));return t&&this._factoryMethods[t]?t:\"internal\"}const t=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.last)(e.body&&e.body.errors);return t&&t.code&&this._factoryMethods[t.code]?t.code:\"payment\"}_isStorefrontErrorResponseBody(e){const t=e;return!this._isInternalErrorResponseBody(e)&&\"string\"==typeof t.title&&\"string\"==typeof t.type&&\"number\"==typeof t.status&&\"string\"==typeof t.detail}_isInternalErrorResponseBody(e){const t=e;return\"object\"==typeof t.errors&&\"string\"==typeof t.title&&\"string\"==typeof t.type&&\"number\"==typeof t.status}}function Sv(e,t){return Array.isArray(e)?e.map(e=>Sv(e,t)):(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isPlainObject)(e)?(0,lodash__WEBPACK_IMPORTED_MODULE_5__.transform)((0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(e,t),(e,n,i)=>{e[i]=Sv(n,t)},{}):e}function _v(e,t){return function(e){return e.type===dt.ClearError}(t)?Sv(e,e=>e===t.payload):e}function wv(e,t,n){return e===t||(e&&t&&\"object\"==typeof e&&\"object\"==typeof t?Array.isArray(e)&&Array.isArray(t)?function(e,t,n){if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(!wv(e[i],t[i],n))return!1;return!0}(e,t,n):!Array.isArray(e)&&!Array.isArray(t)&&(e instanceof Date&&t instanceof Date?function(e,t){return e.getTime()===t.getTime()}(e,t):!(e instanceof Date||t instanceof Date)&&(e instanceof RegExp&&t instanceof RegExp?function(e,t){return e.toString()===t.toString()}(e,t):!(e instanceof RegExp||t instanceof RegExp)&&function(e,t,n){const i=n&&n.keyFilter,r=i?Object.keys(e).filter(i):Object.keys(e),o=i?Object.keys(t).filter(i):Object.keys(t);if(r.length!==o.length)return!1;for(let i=0,o=r.length;i<o;i++){const o=r[i];if(!Object.prototype.hasOwnProperty.call(t,o))return!1;if(!wv(e[o],t[o],n))return!1}return!0}(e,t,n))):e===t)}function Cv(e,t){return void 0===t||wv(e,t)?e:t}function Iv(e,t,n){return e&&Object.prototype.hasOwnProperty.call(e,t)&&wv(e[t],n)?e:Object.assign(Object.assign({},e),{[t]:n})}const bv={errors:{},statuses:{}};function Pv(e=bv,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:Ov,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(Ev,_v),statuses:Av})(e,t)}function Ov(e,t){switch(t.type){case Ye.UpdateBillingAddressSucceeded:case Ye.ContinueAsGuestSucceeded:case Ja.LoadCheckoutSucceeded:return Cv(e,t.payload&&t.payload.billingAddress);default:return e}}function Ev(e=bv.errors,t){switch(t.type){case Ja.LoadCheckoutRequested:case Ja.LoadCheckoutSucceeded:return Iv(e,\"loadError\",void 0);case Ja.LoadCheckoutFailed:return Iv(e,\"loadError\",t.payload);case Ye.UpdateBillingAddressRequested:case Ye.UpdateBillingAddressSucceeded:return Iv(e,\"updateError\",void 0);case Ye.UpdateBillingAddressFailed:return Iv(e,\"updateError\",t.payload);case gy.UpdateSubscriptionsRequested:case gy.UpdateSubscriptionsSucceeded:case Ye.ContinueAsGuestRequested:case Ye.ContinueAsGuestSucceeded:return Iv(e,\"continueAsGuestError\",void 0);case gy.UpdateSubscriptionsFailed:case Ye.ContinueAsGuestFailed:return Iv(e,\"continueAsGuestError\",t.payload);default:return e}}function Av(e=bv.statuses,t){switch(t.type){case Ja.LoadCheckoutRequested:return Iv(e,\"isLoading\",!0);case Ja.LoadCheckoutSucceeded:case Ja.LoadCheckoutFailed:return Iv(e,\"isLoading\",!1);case Ye.UpdateBillingAddressRequested:return Iv(e,\"isUpdating\",!0);case Ye.UpdateBillingAddressFailed:case Ye.UpdateBillingAddressSucceeded:return Iv(e,\"isUpdating\",!1);case Ye.ContinueAsGuestRequested:case gy.UpdateSubscriptionsRequested:return Iv(e,\"isContinuingAsGuest\",!0);case gy.UpdateSubscriptionsSucceeded:case gy.UpdateSubscriptionsFailed:case Ye.ContinueAsGuestFailed:case Ye.ContinueAsGuestSucceeded:return Iv(e,\"isContinuingAsGuest\",!1);default:return e}}const kv=function e(t,n,i){const{matchObject:r=(e,t)=>void 0!==e.id&&e.id===t.id}=i||{};if(!t)return n;if(!n||t===n)return t;let o=0,a=0;const s=(e,t,n)=>(o+=e===t?1:0,a+=e===n?1:0,e),d=n.map((n,i)=>{const o=t&&t[i];return Cy(o)&&Cy(n)?r(o,n)?s(Tv(o,n),o,n):s(Cv(o,n),o,n):(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isArray)(o)&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isArray)(n)?s(e(o,n),o,n):s(Cv(o,n),o,n)});return o===n.length&&t&&t.length===n.length?t:a===n.length?n:d},Tv=function e(t,n){return t?n&&t!==n?Object.keys(n).reduce((t,i)=>{const r=t[i],o=n[i];return Cy(r)&&Cy(o)?Iv(t,i,e(r,o)):(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isArray)(r)&&(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isArray)(o)?Iv(t,i,kv(r,o)):Iv(t,i,o)},t):t:n},Dv={errors:{},statuses:{}};function Mv(e=Dv,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:zv,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(xv,_v),statuses:Nv})(e,t)}function zv(e,t){switch(t.type){case Ye.UpdateBillingAddressSucceeded:case Ja.LoadCheckoutSucceeded:case sy.CreateConsignmentsSucceeded:case sy.DeleteConsignmentSucceeded:case sy.UpdateConsignmentSucceeded:case sy.UpdateShippingOptionSucceeded:case sy.LoadShippingOptionsSucceeded:case bt.ApplyCouponSucceeded:case bt.RemoveCouponSucceeded:case At.ApplyGiftCertificateSucceeded:case At.RemoveGiftCertificateSucceeded:return Tv(e,t.payload&&t.payload.cart);default:return e}}function Nv(e=Dv.statuses,t){switch(t.type){case Ja.LoadCheckoutRequested:return Iv(e,\"isLoading\",!0);case Ja.LoadCheckoutFailed:case Ja.LoadCheckoutSucceeded:return Iv(e,\"isLoading\",!1);default:return e}}function xv(e=Dv.errors,t){switch(t.type){case Ja.LoadCheckoutRequested:case Ja.LoadCheckoutSucceeded:return Iv(e,\"loadError\",void 0);case Ja.LoadCheckoutFailed:return Iv(e,\"loadError\",t.payload);default:return e}}var Fv;!function(e){e.InitializeButtonFailed=\"INITIALIZE_BUTTON_FAILED\",e.InitializeButtonRequested=\"INITIALIZE_BUTTON_REQUESTED\",e.InitializeButtonSucceeded=\"INITIALIZE_BUTTON_SUCCEEDED\",e.DeinitializeButtonFailed=\"DEINITIALIZE_BUTTON_FAILED\",e.DeinitializeButtonRequested=\"DEINITIALIZE_BUTTON_REQUESTED\",e.DeinitializeButtonSucceeded=\"DEINITIALIZE_BUTTON_SUCCEEDED\"}(Fv||(Fv={}));const Rv={data:{},errors:{},statuses:{}},Lv={initializedContainers:{}},Bv={},jv={};function Uv(e=Rv,t){return t.meta&&t.meta.methodId?(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({[t.meta.methodId]:qv}),errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({[t.meta.methodId]:Vv}),statuses:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({[t.meta.methodId]:Gv})})(e,t):e}function qv(e=Lv,t){switch(t.type){case Fv.InitializeButtonSucceeded:return t.meta&&t.meta.containerId?Tv(e,{initializedContainers:{[t.meta.containerId]:!0}}):e;case Fv.DeinitializeButtonSucceeded:return Iv(e,\"initializedContainers\",{})}return e}function Vv(e=Bv,t){switch(t.type){case Fv.InitializeButtonRequested:case Fv.InitializeButtonSucceeded:return Iv(e,\"initializeError\",void 0);case Fv.InitializeButtonFailed:return Iv(e,\"initializeError\",t.payload);case Fv.DeinitializeButtonRequested:case Fv.DeinitializeButtonSucceeded:return Iv(e,\"deinitializeError\",void 0);case Fv.DeinitializeButtonFailed:return Iv(e,\"deinitializeError\",t.payload);default:return e}}function Gv(e=jv,t){switch(t.type){case Fv.InitializeButtonRequested:return Iv(e,\"isInitializing\",!0);case Fv.InitializeButtonFailed:case Fv.InitializeButtonSucceeded:return Iv(e,\"isInitializing\",!1);case Fv.DeinitializeButtonRequested:return Iv(e,\"isDeinitializing\",!0);case Fv.DeinitializeButtonFailed:case Fv.DeinitializeButtonSucceeded:return Iv(e,\"isDeinitializing\",!1);default:return e}}const Hv={meta:{},errors:{},statuses:{}};function $v(e=Hv,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:Wv,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(Yv,_v),statuses:Kv})(e,t)}function Wv(e,t){return t.type===vt.LoadConfigSucceeded?Tv(e,t.payload):e}function Yv(e=Hv.errors,t){switch(t.type){case vt.LoadConfigSucceeded:return Iv(e,\"loadError\",void 0);case vt.LoadConfigFailed:return Iv(e,\"loadError\",t.payload);default:return e}}function Kv(e=Hv.statuses,t){switch(t.type){case vt.LoadConfigRequested:return Iv(e,\"isLoading\",!0);case vt.LoadConfigSucceeded:case vt.LoadConfigFailed:return Iv(e,\"isLoading\",!1);default:return e}}const Jv={errors:{},statuses:{}};function Zv(e=Jv,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:Qv,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(Xv,_v),statuses:ef})(e,t)}function Qv(e,t){switch(t.type){case Ja.LoadCheckoutSucceeded:case bt.ApplyCouponSucceeded:case sy.UpdateShippingOptionSucceeded:case bt.RemoveCouponSucceeded:case Jp.LoadOrderSucceeded:return kv(e,t.payload&&t.payload.coupons);default:return e}}function Xv(e={},t){switch(t.type){case bt.ApplyCouponRequested:case bt.ApplyCouponSucceeded:return Iv(e,\"applyCouponError\",void 0);case bt.ApplyCouponFailed:return Iv(e,\"applyCouponError\",t.payload);case bt.RemoveCouponRequested:case bt.RemoveCouponSucceeded:return Iv(e,\"removeCouponError\",void 0);case bt.RemoveCouponFailed:return Iv(e,\"removeCouponError\",t.payload);default:return e}}function ef(e={},t){switch(t.type){case bt.ApplyCouponRequested:return Iv(e,\"isApplyingCoupon\",!0);case bt.ApplyCouponSucceeded:case bt.ApplyCouponFailed:return Iv(e,\"isApplyingCoupon\",!1);case bt.RemoveCouponRequested:return Iv(e,\"isRemovingCoupon\",!0);case bt.RemoveCouponSucceeded:case bt.RemoveCouponFailed:return Iv(e,\"isRemovingCoupon\",!1);default:return e}}const tf={errors:{},statuses:{}};function nf(e=tf,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:rf,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(of,_v),statuses:af})(e,t)}function rf(e,t){switch(t.type){case Ja.LoadCheckoutSucceeded:case sy.CreateConsignmentsSucceeded:case sy.UpdateConsignmentSucceeded:case sy.DeleteConsignmentSucceeded:case sy.UpdateShippingOptionSucceeded:case bt.ApplyCouponSucceeded:case bt.RemoveCouponSucceeded:case At.ApplyGiftCertificateSucceeded:case At.RemoveGiftCertificateSucceeded:return kv(e,t.payload&&t.payload.giftCertificates);default:return e}}function of(e=tf.errors,t){switch(t.type){case At.ApplyGiftCertificateRequested:case At.ApplyGiftCertificateSucceeded:return Iv(e,\"applyGiftCertificateError\",void 0);case At.ApplyGiftCertificateFailed:return Iv(e,\"applyGiftCertificateError\",t.payload);case At.RemoveGiftCertificateRequested:case At.RemoveGiftCertificateSucceeded:return Iv(e,\"removeGiftCertificateError\",void 0);case At.RemoveGiftCertificateFailed:return Iv(e,\"removeGiftCertificateError\",t.payload);default:return e}}function af(e=tf.statuses,t){switch(t.type){case At.ApplyGiftCertificateRequested:return Iv(e,\"isApplyingGiftCertificate\",!0);case At.ApplyGiftCertificateSucceeded:case At.ApplyGiftCertificateFailed:return Iv(e,\"isApplyingGiftCertificate\",!1);case At.RemoveGiftCertificateRequested:return Iv(e,\"isRemovingGiftCertificate\",!0);case At.RemoveGiftCertificateSucceeded:case At.RemoveGiftCertificateFailed:return Iv(e,\"isRemovingGiftCertificate\",!1);default:return e}}const sf={errors:{},statuses:{}};function df(e=sf,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:cf,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(lf,_v),statuses:uf})(e,t)}function cf(e,t){switch(t.type){case Ye.ContinueAsGuestSucceeded:case Ja.LoadCheckoutSucceeded:return Tv(e,t.payload&&t.payload.customer);case Ya.CreateCustomerAddressSucceeded:return Tv(e,t.payload);default:return e}}function lf(e=sf.errors,t){switch(t.type){case Ya.CreateCustomerRequested:case Ya.CreateCustomerSucceeded:return Iv(e,\"createError\",void 0);case Ya.CreateCustomerFailed:return Iv(e,\"createError\",t.payload);case Ya.CreateCustomerAddressRequested:case Ya.CreateCustomerAddressSucceeded:return Iv(e,\"createAddressError\",void 0);case Ya.CreateCustomerAddressFailed:return Iv(e,\"createAddressError\",t.payload);default:return e}}function uf(e=sf.statuses,t){switch(t.type){case Ya.CreateCustomerRequested:return Iv(e,\"isCreating\",!0);case Ya.CreateCustomerFailed:case Ya.CreateCustomerSucceeded:return Iv(e,\"isCreating\",!1);case Ya.CreateCustomerAddressRequested:return Iv(e,\"isCreatingAddress\",!0);case Ya.CreateCustomerAddressFailed:case Ya.CreateCustomerAddressSucceeded:return Iv(e,\"isCreatingAddress\",!1);default:return e}}const hf={data:{},errors:{},statuses:{}};function pf(e=hf,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:mf,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(yf,_v),statuses:gf})(e,t)}function mf(e=hf.data,t){switch(t.type){case Ka.InitializeSucceeded:return Tv(e,{[t.meta&&t.meta.methodId]:{isInitialized:!0}});case Ka.DeinitializeSucceeded:return Tv(e,{[t.meta&&t.meta.methodId]:{isInitialized:!1}})}return e}function yf(e=hf.errors,t){switch(t.type){case Ka.InitializeRequested:case Ka.InitializeSucceeded:return Tv(e,{initializeErrors:Object.assign({},e.initializeErrors),initializeMethodId:e.initializeMethodId?e.initializeMethodId:void 0});case Ka.InitializeFailed:return Tv(e,{initializeErrors:Object.assign(Object.assign({},e.initializeErrors),{[t.meta&&t.meta.methodId]:t.payload}),initializeMethodId:t.meta&&t.meta.methodId});case Ka.DeinitializeRequested:case Ka.DeinitializeSucceeded:return Tv(e,{deinitializeError:void 0,deinitializeMethodId:void 0});case Ka.DeinitializeFailed:return Tv(e,{deinitializeError:t.payload,deinitializeMethodId:t.meta&&t.meta.methodId});case Ka.SignInRequested:case Ka.SignInSucceeded:return Tv(e,{signInError:void 0,signInMethodId:void 0});case Ka.SignInFailed:return Tv(e,{signInError:t.payload,signInMethodId:t.meta&&t.meta.methodId});case Ka.SignOutRequested:case Ka.SignOutSucceeded:return Tv(e,{signOutError:void 0,signOutMethodId:void 0});case Ka.SignOutFailed:return Tv(e,{signOutError:t.payload,signOutMethodId:t.meta&&t.meta.methodId});case Ka.ExecutePaymentMethodCheckoutRequested:case Ka.ExecutePaymentMethodCheckoutSucceeded:return Tv(e,{executePaymentMethodCheckoutError:void 0,executePaymentMethodCheckoutMethodId:void 0});case Ka.ExecutePaymentMethodCheckoutFailed:return Tv(e,{executePaymentMethodCheckoutError:t.payload,executePaymentMethodCheckoutMethodId:t.meta&&t.meta.methodId});case Ka.WidgetInteractionStarted:case Ka.WidgetInteractionFinished:return Tv(e,{widgetInteractionError:void 0,widgetInteractionMethodId:void 0});case Ka.WidgetInteractionFailed:return Tv(e,{widgetInteractionError:t.payload,widgetInteractionMethodId:t.meta.methodId});default:return e}}function gf(e=hf.statuses,t){switch(t.type){case Ka.InitializeRequested:return Tv(e,{isInitializing:!0,initializeMethodId:t.meta&&t.meta.methodId});case Ka.InitializeFailed:case Ka.InitializeSucceeded:return Tv(e,{isInitializing:!1,initializeMethodId:void 0});case Ka.DeinitializeRequested:return Tv(e,{isDeinitializing:!0,deinitializeMethodId:t.meta&&t.meta.methodId});case Ka.DeinitializeFailed:case Ka.DeinitializeSucceeded:return Tv(e,{isDeinitializing:!1,deinitializeMethodId:void 0});case Ka.SignInRequested:return Tv(e,{isSigningIn:!0,signInMethodId:t.meta&&t.meta.methodId});case Ka.SignInFailed:case Ka.SignInSucceeded:return Tv(e,{isSigningIn:!1,signInMethodId:void 0});case Ka.SignOutRequested:return Tv(e,{isSigningOut:!0,signOutMethodId:t.meta&&t.meta.methodId});case Ka.SignOutFailed:case Ka.SignOutSucceeded:return Tv(e,{isSigningOut:!1,signOutMethodId:void 0});case Ka.ExecutePaymentMethodCheckoutRequested:return Tv(e,{isExecutingPaymentMethodCheckout:!0,executePaymentMethodCheckoutMethodId:t.meta&&t.meta.methodId});case Ka.ExecutePaymentMethodCheckoutFailed:case Ka.ExecutePaymentMethodCheckoutSucceeded:return Tv(e,{isExecutingPaymentMethodCheckout:!1,executePaymentMethodCheckoutMethodId:void 0});case Ka.WidgetInteractionStarted:return Tv(e,{isWidgetInteracting:!0,widgetInteractionMethodId:t.meta.methodId});case Ka.WidgetInteractionFinished:case Ka.WidgetInteractionFailed:return Tv(e,{isWidgetInteracting:!1,widgetInteractionMethodId:void 0});default:return e}}const vf={errors:{},statuses:{}};function ff(e=vf,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:Sf,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(_f,_v),statuses:wf})(e,t)}function Sf(e,t){return t.type===Rs.LoadExtensionsSucceeded?kv(e,t.payload):e}function _f(e=vf.errors,t){switch(t.type){case Rs.LoadExtensionsRequested:case Rs.LoadExtensionsSucceeded:return Iv(e,\"loadError\",void 0);case Rs.RenderExtensionRequested:case Rs.RenderExtensionSucceeded:return Iv(e,\"renderError\",void 0);case Rs.LoadExtensionsFailed:return Iv(e,\"loadError\",t.payload);case Rs.RenderExtensionFailed:return Iv(e,\"renderError\",t.payload);default:return e}}function wf(e=vf.statuses,t){switch(t.type){case Rs.LoadExtensionsRequested:return Iv(e,\"isLoading\",!0);case Rs.LoadExtensionsSucceeded:case Rs.LoadExtensionsFailed:return Iv(e,\"isLoading\",!1);default:return e}}const Cf={errors:{},statuses:{}};function If(e=Cf,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:bf,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(Pf,_v),statuses:Of})(e,t)}function bf(e,t){return t.type===ns.LoadFormFieldsSucceeded?Tv(e,t.payload):e}function Pf(e=Cf.errors,t){switch(t.type){case ns.LoadFormFieldsSucceeded:return Iv(e,\"loadError\",void 0);case ns.LoadFormFieldsFailed:return Iv(e,\"loadError\",t.payload);default:return e}}function Of(e=Cf.statuses,t){switch(t.type){case ns.LoadFormFieldsRequested:return Iv(e,\"isLoading\",!0);case ns.LoadFormFieldsSucceeded:case ns.LoadFormFieldsFailed:return Iv(e,\"isLoading\",!1);default:return e}}const Ef={errors:{},statuses:{}};function Af(e=Ef,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:kf,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(Tf,_v),statuses:Df})(e,t)}function kf(e,t){return t.type===Kp.LoadCountriesSucceeded?kv(e,t.payload):e}function Tf(e=Ef.errors,t){switch(t.type){case Kp.LoadCountriesRequested:case Kp.LoadCountriesSucceeded:return Iv(e,\"loadError\",void 0);case Kp.LoadCountriesFailed:return Iv(e,\"loadError\",t.payload);default:return e}}function Df(e=Ef.statuses,t){switch(t.type){case Kp.LoadCountriesRequested:return Iv(e,\"isLoading\",!0);case Kp.LoadCountriesSucceeded:case Kp.LoadCountriesFailed:return Iv(e,\"isLoading\",!1);default:return e}}const Mf={errors:{},meta:{},statuses:{}};function zf(e=Mf,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:Nf,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(Ff,_v),meta:xf,statuses:Rf})(e,t)}function Nf(e,t){switch(t.type){case Jp.LoadOrderSucceeded:case Jp.LoadOrderPaymentsSucceeded:return Tv(e,(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omit)(t.payload,[\"billingAddress\",\"coupons\"]));default:return e}}function xf(e,t){switch(t.type){case Jp.FinalizeOrderSucceeded:case Jp.SubmitOrderSucceeded:return Tv(e,Object.assign(Object.assign({},t.meta),{callbackUrl:t.payload&&t.payload.order.callbackUrl,orderToken:t.payload&&t.payload.order.token,payment:t.payload&&t.payload.order&&t.payload.order.payment}));default:return e}}function Ff(e=Mf.errors,t){switch(t.type){case Jp.LoadOrderRequested:case Jp.LoadOrderSucceeded:case Jp.LoadOrderPaymentsSucceeded:case Jp.LoadOrderPaymentsRequested:return Iv(e,\"loadError\",void 0);case Jp.LoadOrderFailed:case Jp.LoadOrderPaymentsFailed:return Iv(e,\"loadError\",t.payload);default:return e}}function Rf(e=Mf.statuses,t){switch(t.type){case Jp.LoadOrderRequested:case Jp.LoadOrderPaymentsRequested:return Iv(e,\"isLoading\",!0);case Jp.LoadOrderSucceeded:case Jp.LoadOrderFailed:case Jp.LoadOrderPaymentsSucceeded:case Jp.LoadOrderPaymentsFailed:return Iv(e,\"isLoading\",!1);default:return e}}const Lf={};function Bf(e=Lf,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:jf})(e,t)}function jf(e,t){switch(t.type){case Jp.LoadOrderPaymentsSucceeded:case Jp.LoadOrderSucceeded:return Cv(e,t.payload&&t.payload.billingAddress);default:return e}}function Uf(e={},t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:qf})(e,t)}function qf(e,t){return t.type===Dm.SubmitPaymentSucceeded?t.payload:e}const Vf={errors:{},statuses:{}};function Gf(e=Vf,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:Hf,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(Wf,_v),meta:$f,statuses:Yf})(e,t)}function Hf(e,t){switch(t.type){case rs.LoadPaymentMethodSucceeded:return function(e,t,n){if(!t)return e;const i=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.pick)(t,\"id\"),r=\"object\"==typeof n?(0,lodash__WEBPACK_IMPORTED_MODULE_5__.pickBy)(n):n||i,o=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.findIndex)(e,r),a=[...e];if(-1===o)a.push(t);else{const n=e[o];a[o]=Cy(n)&&Cy(t)?Tv(n,t):t}return a}(e||[],t.payload,t.payload&&{id:t.payload.id,gateway:t.payload.gateway});case rs.LoadPaymentMethodsSucceeded:return kv(e,t.payload,{matchObject:(e,t)=>e.id===t.id&&e.gateway===t.gateway});default:return e}}function $f(e,t){return t.type===rs.LoadPaymentMethodsSucceeded?Tv(e,t.meta):e}function Wf(e=Vf.errors,t){switch(t.type){case rs.LoadPaymentMethodsRequested:case rs.LoadPaymentMethodsSucceeded:return Iv(e,\"loadError\",void 0);case rs.LoadPaymentMethodsFailed:return Iv(e,\"loadError\",t.payload);case rs.LoadPaymentMethodRequested:case rs.LoadPaymentMethodSucceeded:return Tv(e,{loadMethodId:void 0,loadMethodError:void 0});case rs.LoadPaymentMethodFailed:return Tv(e,{loadMethodId:t.meta.methodId,loadMethodError:t.payload});default:return e}}function Yf(e=Vf.statuses,t){switch(t.type){case rs.LoadPaymentMethodsRequested:return Iv(e,\"isLoading\",!0);case rs.LoadPaymentMethodsSucceeded:case rs.LoadPaymentMethodsFailed:return Iv(e,\"isLoading\",!1);case rs.LoadPaymentMethodRequested:return Tv(e,{isLoadingMethod:!0,loadMethodId:t.meta.methodId});case rs.LoadPaymentMethodSucceeded:case rs.LoadPaymentMethodFailed:return Tv(e,{isLoadingMethod:!1,loadMethodId:void 0});default:return e}}const Kf={data:{},errors:{},statuses:{}};function Jf(e=Kf,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:Zf,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(Qf,_v),statuses:Xf})(e,t)}function Zf(e=Kf.data,t){switch(t.type){case om.InitializeSucceeded:if(t.meta){const{methodId:n,gatewayId:i}=t.meta,r=i?`${n}.${i}`:n;return Tv(e,{[r]:{isInitialized:!0}})}break;case om.DeinitializeSucceeded:if(t.meta){const{methodId:n,gatewayId:i}=t.meta,r=i?`${n}.${i}`:n;return Tv(e,{[r]:{isInitialized:!1}})}}return e}function Qf(e=Kf.errors,t){switch(t.type){case om.InitializeRequested:case om.InitializeSucceeded:return Tv(e,{initializeError:void 0,initializeMethodId:void 0});case om.InitializeFailed:{let n=t.meta&&t.meta.methodId;if(t.meta){const{methodId:e,gatewayId:i}=t.meta;n=i?`${e}.${i}`:e}return Tv(e,{initializeError:t.payload,initializeMethodId:n})}case om.DeinitializeRequested:case om.DeinitializeSucceeded:return Tv(e,{deinitializeError:void 0,deinitializeMethodId:void 0});case om.DeinitializeFailed:{let n=t.meta&&t.meta.methodId;if(t.meta){const{methodId:e,gatewayId:i}=t.meta;n=i?`${e}.${i}`:e}return Tv(e,{deinitializeError:t.payload,deinitializeMethodId:n})}case om.ExecuteRequested:case om.ExecuteSucceeded:return Tv(e,{executeError:void 0,executeMethodId:void 0});case om.ExecuteFailed:return Tv(e,{executeError:t.payload,executeMethodId:t.meta&&t.meta.methodId});case om.FinalizeRequested:case om.FinalizeSucceeded:return Tv(e,{finalizeError:void 0,finalizeMethodId:void 0});case om.FinalizeFailed:return Tv(e,{finalizeError:t.payload,finalizeMethodId:t.meta&&t.meta.methodId});case om.WidgetInteractionStarted:case om.WidgetInteractionFinished:return Tv(e,{widgetInteractionError:void 0,widgetInteractionMethodId:void 0});case om.WidgetInteractionFailed:return Tv(e,{widgetInteractionError:t.payload,widgetInteractionMethodId:t.meta.methodId});default:return e}}function Xf(e=Kf.statuses,t){switch(t.type){case om.InitializeRequested:{let n=t.meta&&t.meta.methodId;if(t.meta){const{methodId:e,gatewayId:i}=t.meta;n=i?`${e}.${i}`:e}return Tv(e,{isInitializing:!0,initializeMethodId:n})}case om.InitializeFailed:case om.InitializeSucceeded:return Tv(e,{isInitializing:!1,initializeMethodId:void 0});case om.DeinitializeRequested:{let n=t.meta&&t.meta.methodId;if(t.meta){const{methodId:e,gatewayId:i}=t.meta;n=i?`${e}.${i}`:e}return Tv(e,{isDeinitializing:!0,deinitializeMethodId:n})}case om.DeinitializeFailed:case om.DeinitializeSucceeded:return Tv(e,{isDeinitializing:!1,deinitializeMethodId:void 0});case om.ExecuteRequested:return Tv(e,{isExecuting:!0,executeMethodId:t.meta&&t.meta.methodId});case om.ExecuteFailed:case om.ExecuteSucceeded:return Tv(e,{isExecuting:!1,executeMethodId:void 0});case om.FinalizeRequested:return Tv(e,{isFinalizing:!0,finalizeMethodId:t.meta&&t.meta.methodId});case om.FinalizeFailed:case om.FinalizeSucceeded:return Tv(e,{isFinalizing:!1,finalizeMethodId:void 0});case om.WidgetInteractionStarted:return Tv(e,{isWidgetInteracting:!0,widgetInteractionMethodId:t.meta.methodId});case om.WidgetInteractionFinished:case om.WidgetInteractionFailed:return Tv(e,{isWidgetInteracting:!1,widgetInteractionMethodId:void 0});default:return e}}const eS={data:{}};function tS(e=eS,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:nS})(e,t)}function nS(e=eS.data,t){return t.type===ay.UpdatePaymentProviderCustomer?Tv(e,t.payload):e}const iS={data:[],errors:{},statuses:{}};function rS(e=iS,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:oS,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(sS,_v),meta:aS,statuses:dS})(e,t)}function oS(e=iS.data,t){return t.type===kg.LoadInstrumentsSucceeded?kv(e,t.payload&&t.payload.vaultedInstruments||[]):e}function aS(e,t){switch(t.type){case kg.LoadInstrumentsSucceeded:case kg.DeleteInstrumentSucceeded:return Tv(e,t.meta);default:return e}}function sS(e=iS.errors,t){switch(t.type){case kg.LoadInstrumentsRequested:case kg.LoadInstrumentsSucceeded:return Iv(e,\"loadError\",void 0);case kg.DeleteInstrumentRequested:case kg.DeleteInstrumentSucceeded:return Tv(e,{deleteError:void 0,failedInstrument:void 0});case kg.LoadInstrumentsFailed:return Iv(e,\"loadError\",t.payload);case kg.DeleteInstrumentFailed:return Tv(e,{deleteError:t.payload,failedInstrument:t.meta.instrumentId});default:return e}}function dS(e=iS.statuses,t){switch(t.type){case kg.LoadInstrumentsRequested:return Iv(e,\"isLoading\",!0);case kg.DeleteInstrumentRequested:return Tv(e,{isDeleting:!0,deletingInstrument:t.meta.instrumentId});case kg.LoadInstrumentsSucceeded:case kg.LoadInstrumentsFailed:return Iv(e,\"isLoading\",!1);case kg.DeleteInstrumentSucceeded:case kg.DeleteInstrumentFailed:return Tv(e,{isDeleting:!1,deletingInstrument:void 0});default:return e}}const cS={data:{}};function lS(e=cS,t){return t.meta&&t.meta.methodId?(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({[t.meta.methodId]:uS})})(e,t):e}function uS(e,t){switch(t.type){case us.InitializeRemoteBillingSucceeded:return Iv(e,\"billing\",t.payload&&t.payload.billing);case us.InitializeRemoteShippingSucceeded:return Iv(e,\"shipping\",t.payload&&t.payload.shipping);case us.LoadRemoteSettingsSucceeded:return Iv(e,\"settings\",t.payload);case us.UpdateRemoteCheckout:return Tv(e,t.payload);default:return e}}const hS={errors:{updateShippingOptionError:{},updateError:{},deleteError:{}},statuses:{isUpdating:{},isUpdatingShippingOption:{},isDeleting:{}}};function pS(e=hS,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:mS,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(yS,_v),statuses:gS})(e,t)}function mS(e,t){switch(t.type){case Ja.LoadCheckoutSucceeded:case sy.LoadShippingOptionsSucceeded:case sy.CreateConsignmentsSucceeded:case sy.UpdateConsignmentSucceeded:case sy.DeleteConsignmentSucceeded:case sy.UpdateShippingOptionSucceeded:case bt.ApplyCouponSucceeded:case bt.RemoveCouponSucceeded:return kv(e,t.payload&&t.payload.consignments);case Ya.SignOutCustomerSucceeded:return kv(e,[]);default:return e}}function yS(e=hS.errors,t){switch(t.type){case Ja.LoadCheckoutRequested:case Ja.LoadCheckoutSucceeded:case sy.LoadShippingOptionsSucceeded:case sy.LoadShippingOptionsRequested:return Iv(e,\"loadError\",void 0);case Ja.LoadCheckoutFailed:case sy.LoadShippingOptionsFailed:return Iv(e,\"loadError\",t.payload);case sy.CreateConsignmentsRequested:case sy.CreateConsignmentsSucceeded:return Iv(e,\"createError\",void 0);case sy.CreateConsignmentsFailed:return Iv(e,\"createError\",t.payload);case sy.UpdateConsignmentSucceeded:case sy.UpdateConsignmentRequested:return t.meta?Tv(e,{updateError:{[t.meta.id]:void 0}}):e;case sy.UpdateConsignmentFailed:return t.meta?Tv(e,{updateError:{[t.meta.id]:t.payload}}):e;case sy.DeleteConsignmentSucceeded:case sy.DeleteConsignmentRequested:return t.meta?Tv(e,{deleteError:{[t.meta.id]:void 0}}):e;case sy.DeleteConsignmentFailed:return t.meta?Tv(e,{deleteError:{[t.meta.id]:t.payload}}):e;case sy.UpdateShippingOptionRequested:case sy.UpdateShippingOptionSucceeded:return t.meta?Tv(e,{updateShippingOptionError:{[t.meta.id]:void 0}}):e;case sy.UpdateShippingOptionFailed:return t.meta?Tv(e,{updateShippingOptionError:{[t.meta.id]:t.payload}}):e;default:return e}}function gS(e=hS.statuses,t){switch(t.type){case Ja.LoadCheckoutRequested:return Iv(e,\"isLoading\",!0);case sy.LoadShippingOptionsRequested:return Iv(e,\"isLoadingShippingOptions\",!0);case Ja.LoadCheckoutSucceeded:case Ja.LoadCheckoutFailed:return Iv(e,\"isLoading\",!1);case sy.LoadShippingOptionsSucceeded:case sy.LoadShippingOptionsFailed:return Iv(e,\"isLoadingShippingOptions\",!1);case sy.CreateConsignmentsRequested:return Iv(e,\"isCreating\",!0);case sy.CreateConsignmentsSucceeded:case sy.CreateConsignmentsFailed:return Iv(e,\"isCreating\",!1);case sy.UpdateConsignmentRequested:return t.meta?Tv(e,{isUpdating:{[t.meta.id]:!0}}):e;case sy.UpdateConsignmentSucceeded:case sy.UpdateConsignmentFailed:return t.meta?Tv(e,{isUpdating:{[t.meta.id]:!1}}):e;case sy.DeleteConsignmentRequested:return t.meta?Tv(e,{isDeleting:{[t.meta.id]:!0}}):e;case sy.DeleteConsignmentSucceeded:case sy.DeleteConsignmentFailed:return t.meta?Tv(e,{isDeleting:{[t.meta.id]:!1}}):e;case sy.UpdateShippingOptionRequested:return t.meta?Tv(e,{isUpdatingShippingOption:{[t.meta.id]:!0}}):e;case sy.UpdateShippingOptionSucceeded:case sy.UpdateShippingOptionFailed:return t.meta?Tv(e,{isUpdatingShippingOption:{[t.meta.id]:!1}}):e;default:return e}}function vS(e,t){const n={};return Object.keys(e).forEach(i=>{const r=e[i],o=t?`${t}.${i}`:i;\"object\"==typeof r?Object.assign(n,vS(r,o)):n[o]=r}),n}function fS(e){return Object.keys(e).sort().reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{})}const SS={errors:{},statuses:{}};function _S(e=SS,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:wS,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(CS,_v),statuses:IS})(e,t)}function wS(e,t){if(t.type!==xg.LoadPickupOptionsSucceeded)return e;if(t.meta){const n=fS(vS({consignmentId:t.meta.consignmentId,searchArea:t.meta.searchArea}));return Iv(e,btoa(`${JSON.stringify(n)}`),t.payload)}}function CS(e=SS.errors,t){switch(t.type){case xg.LoadPickupOptionsRequested:case xg.LoadPickupOptionsSucceeded:return Iv(e,\"loadError\",void 0);case xg.LoadPickupOptionsFailed:return Iv(e,\"loadError\",t.payload);default:return e}}function IS(e=SS.statuses,t){switch(t.type){case xg.LoadPickupOptionsRequested:return Iv(e,\"isLoading\",!0);case xg.LoadPickupOptionsSucceeded:case xg.LoadPickupOptionsFailed:return Iv(e,\"isLoading\",!1);default:return e}}const bS={errors:{},statuses:{}};function PS(e=bS,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:OS,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(ES,_v),statuses:AS})(e,t)}function OS(e,t){return t.type===hy.LoadShippingCountriesSucceeded?kv(e,t.payload):e}function ES(e=bS.errors,t){switch(t.type){case hy.LoadShippingCountriesRequested:case hy.LoadShippingCountriesSucceeded:return Iv(e,\"loadError\",void 0);case hy.LoadShippingCountriesFailed:return Iv(e,\"loadError\",t.payload);default:return e}}function AS(e=bS.statuses,t){switch(t.type){case hy.LoadShippingCountriesRequested:return Iv(e,\"isLoading\",!0);case hy.LoadShippingCountriesSucceeded:case hy.LoadShippingCountriesFailed:return Iv(e,\"isLoading\",!1);default:return e}}const kS={data:{},errors:{},statuses:{}};function TS(e=kS,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:DS,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(MS,_v),statuses:zS})(e,t)}function DS(e=kS.data,t){switch(t.type){case Fg.InitializeSucceeded:return Tv(e,{[t.meta&&t.meta.methodId]:{isInitialized:!0}});case Fg.DeinitializeSucceeded:return Tv(e,{[t.meta&&t.meta.methodId]:{isInitialized:!1}})}return e}function MS(e=kS.errors,t){switch(t.type){case Fg.InitializeRequested:case Fg.InitializeSucceeded:return Tv(e,{initializeError:void 0,initializeMethodId:void 0});case Fg.InitializeFailed:return Tv(e,{initializeError:t.payload,initializeMethodId:t.meta&&t.meta.methodId});case Fg.DeinitializeRequested:case Fg.DeinitializeSucceeded:return Tv(e,{deinitializeError:void 0,deinitializeMethodId:void 0});case Fg.DeinitializeFailed:return Tv(e,{deinitializeError:t.payload,deinitializeMethodId:t.meta&&t.meta.methodId});case Fg.UpdateAddressRequested:case Fg.UpdateAddressSucceeded:return Tv(e,{updateAddressError:void 0,updateAddressMethodId:void 0});case Fg.UpdateAddressFailed:return Tv(e,{updateAddressError:t.payload,updateAddressMethodId:t.meta&&t.meta.methodId});case Fg.SelectOptionRequested:case Fg.SelectOptionSucceeded:return Tv(e,{selectOptionError:void 0,selectOptionMethodId:void 0});case Fg.SelectOptionFailed:return Tv(e,{selectOptionError:t.payload,selectOptionMethodId:t.meta&&t.meta.methodId});case Fg.WidgetInteractionStarted:case Fg.WidgetInteractionFinished:return Tv(e,{widgetInteractionError:void 0,widgetInteractionMethodId:void 0});case Fg.WidgetInteractionFailed:return Tv(e,{widgetInteractionError:t.payload,widgetInteractionMethodId:t.meta&&t.meta.methodId});default:return e}}function zS(e=kS.statuses,t){switch(t.type){case Fg.InitializeRequested:return Tv(e,{isInitializing:!0,initializeMethodId:t.meta&&t.meta.methodId});case Fg.InitializeFailed:case Fg.InitializeSucceeded:return Tv(e,{isInitializing:!1,initializeMethodId:void 0});case Fg.DeinitializeRequested:return Tv(e,{isDeinitializing:!0,deinitializeMethodId:t.meta&&t.meta.methodId});case Fg.DeinitializeFailed:case Fg.DeinitializeSucceeded:return Tv(e,{isDeinitializing:!1,deinitializeMethodId:void 0});case Fg.UpdateAddressRequested:return Tv(e,{isUpdatingAddress:!0,updateAddressMethodId:t.meta&&t.meta.methodId});case Fg.UpdateAddressFailed:case Fg.UpdateAddressSucceeded:return Tv(e,{isUpdatingAddress:!1,updateAddressMethodId:void 0});case Fg.SelectOptionRequested:return Tv(e,{isSelectingOption:!0,selectOptionMethodId:t.meta&&t.meta.methodId});case Fg.SelectOptionFailed:case Fg.SelectOptionSucceeded:return Tv(e,{isSelectingOption:!1,selectOptionMethodId:void 0});case Fg.WidgetInteractionStarted:return Tv(e,{isWidgetInteracting:!0,widgetInteractionMethodId:t.meta&&t.meta.methodId});case Fg.WidgetInteractionFinished:case Fg.WidgetInteractionFailed:return Tv(e,{isWidgetInteracting:!1,widgetInteractionMethodId:void 0});default:return e}}const NS={errors:{},statuses:{}};function xS(e=NS,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:FS,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(RS,_v),statuses:LS})(e,t)}function FS(e,t){return t.type===ov.SendSignInEmailSucceeded?Tv(e,t.payload):e}function RS(e=NS.errors,t){switch(t.type){case ov.SendSignInEmailRequested:case ov.SendSignInEmailSucceeded:return Iv(e,\"sendError\",void 0);case ov.SendSignInEmailFailed:return Iv(e,\"sendError\",t.payload);default:return e}}function LS(e=NS.statuses,t){switch(t.type){case ov.SendSignInEmailRequested:return Iv(e,\"isSending\",!0);case ov.SendSignInEmailFailed:case ov.SendSignInEmailSucceeded:return Iv(e,\"isSending\",!1);default:return e}}const BS={errors:{},statuses:{}};function jS(e=BS,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(US,_v),statuses:qS})(e,t)}function US(e=BS.errors,t){switch(t.type){case py.ApplyStoreCreditRequested:case py.ApplyStoreCreditSucceeded:return Iv(e,\"applyError\",void 0);case py.ApplyStoreCreditFailed:return Iv(e,\"applyError\",t.payload);default:return e}}function qS(e=BS.statuses,t){switch(t.type){case py.ApplyStoreCreditRequested:return Iv(e,\"isApplying\",!0);case py.ApplyStoreCreditSucceeded:case py.ApplyStoreCreditFailed:return Iv(e,\"isApplying\",!1);default:return e}}const VS={errors:{},statuses:{}};function GS(e=VS,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(HS,_v),statuses:$S})(e,t)}function HS(e=VS.errors,t){switch(t.type){case gy.UpdateSubscriptionsRequested:case gy.UpdateSubscriptionsSucceeded:return Iv(e,\"updateError\",void 0);case gy.UpdateSubscriptionsFailed:return Iv(e,\"updateError\",t.payload);default:return e}}function $S(e=VS.statuses,t){switch(t.type){case gy.UpdateSubscriptionsRequested:return Iv(e,\"isUpdating\",!0);case gy.UpdateSubscriptionsFailed:case gy.UpdateSubscriptionsSucceeded:return Iv(e,\"isUpdating\",!1);default:return e}}const WS={errors:{},statuses:{}};function YS(e=WS,t){return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({data:KS,errors:(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.composeReducers)(JS,_v),statuses:ZS})(e,t)}function KS(e,t){switch(t.type){case Ja.LoadCheckoutSucceeded:case Ja.UpdateCheckoutSucceeded:case py.ApplyStoreCreditSucceeded:case Ye.UpdateBillingAddressSucceeded:case bt.ApplyCouponSucceeded:case bt.RemoveCouponSucceeded:case sy.CreateConsignmentsSucceeded:case sy.UpdateConsignmentSucceeded:case sy.DeleteConsignmentSucceeded:case sy.UpdateShippingOptionSucceeded:case sy.LoadShippingOptionsSucceeded:case At.ApplyGiftCertificateSucceeded:case At.RemoveGiftCertificateSucceeded:case ms.VerifyCheckoutSucceeded:return Tv(e,(0,lodash__WEBPACK_IMPORTED_MODULE_5__.omit)(t.payload,[\"billingAddress\",\"cart\",\"consignments\",\"customer\",\"coupons\",\"giftCertificates\"]));case Jp.SubmitOrderSucceeded:return Iv(e,\"orderId\",t.payload&&t.payload.order.orderId);default:return e}}function JS(e=WS.errors,t){switch(t.type){case Ja.LoadCheckoutRequested:case Ja.LoadCheckoutSucceeded:return Iv(e,\"loadError\",void 0);case Ja.LoadCheckoutFailed:return Iv(e,\"loadError\",t.payload);case Ja.UpdateCheckoutRequested:case Ja.UpdateCheckoutSucceeded:return Iv(e,\"updateError\",void 0);case Ja.UpdateCheckoutFailed:return Iv(e,\"updateError\",t.payload);default:return e}}function ZS(e=WS.statuses,t){switch(t.type){case Ja.LoadCheckoutRequested:return Iv(e,\"isLoading\",!0);case Ja.LoadCheckoutFailed:case Ja.LoadCheckoutSucceeded:return Iv(e,\"isLoading\",!1);case Ja.UpdateCheckoutRequested:return Iv(e,\"isUpdating\",!0);case Ja.UpdateCheckoutFailed:case Ja.UpdateCheckoutSucceeded:return Iv(e,\"isUpdating\",!1);case ms.ExecuteRequested:return Iv(e,\"isExecutingSpamCheck\",!0);case ms.ExecuteFailed:case ms.ExecuteSucceeded:return Iv(e,\"isExecutingSpamCheck\",!1);default:return e}}function QS(e,t){if(null==e)throw t?t():new Error(\"An unexpected error has occurred.\");return e}function XS(e){return function(e){const t=Object.create(e);return function(e,t){let n=Object.getPrototypeOf(e);for(;n;)t(n),n=Object.getPrototypeOf(n)}(e,n=>{Object.getOwnPropertyNames(n).forEach(n=>{\"constructor\"!==n&&\"function\"==typeof t[n]&&\"_\"!==n.charAt(0)&&(t[n]=((e,t)=>(...n)=>(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.deepFreeze)(e[t].call(e,...n)))(e,n))})}),t}(e)}const e_={\"mollie.credit_card\":{provider:\"mollie\",method:\"credit_card\"},\"adyenv2.scheme\":{provider:\"adyenv2\",method:\"scheme\"},\"adyenv3.scheme\":{provider:\"adyenv3\",method:\"scheme\"},\"adyenv2.bcmc\":{provider:\"adyenv2\",method:\"bcmc\"},\"adyenv2.ideal\":{provider:\"adyenv2\",method:\"ideal\"},\"adyenv2.sepadirectdebit\":{provider:\"adyenv2\",method:\"sepadirectdebit\"},\"adyenv2.directEbanking\":{provider:\"adyenv2\",method:\"directEbanking\"},\"adyenv2.giropay\":{provider:\"adyenv2\",method:\"giropay\"},barclays:{provider:\"barclays\",method:\"credit_card\"},braintree:{provider:\"braintree\",method:\"credit_card\"},braintreepaypal:{provider:\"braintree\",method:\"paypal\"},braintreeach:{provider:\"braintree\",method:\"ach\"},authorizenet:{provider:\"authorizenet\",method:\"credit_card\"},elavon:{provider:\"elavon\",method:\"credit_card\"},checkoutcom:{provider:\"checkoutcom\",method:\"credit_card\"},\"checkoutcom.credit_card\":{provider:\"checkoutcom\",method:\"credit_card\"},\"checkoutcom.card\":{provider:\"checkoutcom\",method:\"card\"},sagepay:{provider:\"sagepay\",method:\"credit_card\"},stripe:{provider:\"stripe\",method:\"credit_card\"},\"stripev3.card\":{provider:\"stripev3\",method:\"card\"},\"stripeupe.card\":{provider:\"stripeupe\",method:\"card\"},cybersource:{provider:\"cybersource\",method:\"credit_card\"},cybersourcev2:{provider:\"cybersourcev2\",method:\"credit_card\"},bnz:{provider:\"bnz\",method:\"credit_card\"},converge:{provider:\"converge\",method:\"credit_card\"},bluesnapv2:{provider:\"bluesnapv2\",method:\"credit_card\"},\"bluesnapdirect.credit_card\":{provider:\"bluesnapdirect\",method:\"credit_card\"},\"bluesnapdirect.ecp\":{provider:\"bluesnapdirect\",method:\"ecp\"},\"bluesnapdirect.sepa_direct_debit\":{provider:\"bluesnapdirect\",method:\"sepa_direct_debit\"},orbital:{provider:\"orbital\",method:\"credit_card\"},paymetric:{provider:\"paymetric\",method:\"credit_card\"},bolt:{provider:\"bolt\",method:\"credit_card\"},\"barclaycard.credit_card\":{provider:\"barclaycard\",method:\"credit_card\"},moneris:{provider:\"moneris\",method:\"credit_card\"},cba_mpgs:{provider:\"cba_mpgs\",method:\"credit_card\"},worldpayaccess:{provider:\"worldpayaccess\",method:\"credit_card\"},squarev2:{provider:\"squarev2\",method:\"credit_card\"},paypalcommercecreditcards:{provider:\"paypalcommerce\",method:\"credit_card\"},paypalcommerce:{provider:\"paypalcommerce\",method:\"paypal\"},bigcommerce_payments_creditcards:{provider:\"bigcommerce_payments\",method:\"credit_card\"},bigcommerce_payments:{provider:\"bigcommerce_payments\",method:\"paypal\"},tdonlinemart:{provider:\"tdonlinemart\",method:\"credit_card\"}};function t_(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.pickBy)({firstName:e.firstName,lastName:e.lastName,company:e.company,address1:e.address1,address2:e.address2,city:e.city,stateOrProvince:e.stateOrProvince,countryCode:e.countryCode,postalCode:e.postalCode,phone:e.phone,customFields:e.customFields},lodash__WEBPACK_IMPORTED_MODULE_5__.identity)}const n_={errors:{},statuses:{}};function i_(){const e=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e,e=>()=>QS(e(),()=>new Qe(We.MissingBillingAddress))),n=pv(e=>e.errors.updateError,e=>()=>e),i=pv(e=>e.errors.continueAsGuestError,e=>()=>e),r=pv(e=>e.errors.loadError,e=>()=>e),o=pv(e=>!!e.statuses.isUpdating,e=>()=>e),a=pv(e=>!!e.statuses.isContinuingAsGuest,e=>()=>e),s=pv(e=>!!e.statuses.isLoading,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((d=bv)=>({getBillingAddress:e(d),getBillingAddressOrThrow:t(d),getUpdateError:n(d),getContinueAsGuestError:i(d),getLoadError:r(d),isUpdating:o(d),isContinuingAsGuest:a(d),isLoading:s(d)}))}(),t=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e,e=>()=>QS(e(),()=>new Qe(We.MissingCart))),n=pv(e=>e.errors.loadError,e=>()=>e),i=pv(e=>!!e.statuses.isLoading,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((r=Dv)=>({getCart:e(r),getCartOrThrow:t(r),getLoadError:n(r),isLoading:i(r)}))}(),n=function(){const e=pv(e=>e,e=>()=>e),t=pv(e=>e.statuses,e=>(0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoize)(t=>{if(t){const n=e[t];return!0===(n&&n.isInitializing)}return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e,{isInitializing:!0})})),n=pv(e=>e.data,e=>(0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoize)((t,n)=>{const i=e[t];return!!i&&(n?!0===i.initializedContainers[n]:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(i.initializedContainers,e=>!0===e))})),i=pv(e=>e.statuses,e=>(0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoize)(t=>{if(t){const n=e[t];return!0===(n&&n.isDeinitializing)}return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.some)(e,{isDeinitializing:!0})})),r=pv(e=>e.errors,e=>(0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoize)(t=>{const n=t?e[t]:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)((0,lodash__WEBPACK_IMPORTED_MODULE_5__.values)(e),e=>!(!e||!e.initializeError));return n&&n.initializeError})),o=pv(e=>e.errors,e=>(0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoize)(t=>{const n=t?e[t]:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)((0,lodash__WEBPACK_IMPORTED_MODULE_5__.values)(e),e=>!(!e||!e.deinitializeError));return n&&n.deinitializeError}));return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((a=Rv)=>({getState:e(a),isInitializing:t(a),isInitialized:n(a),isDeinitializing:i(a),getInitializeError:r(a),getDeinitializeError:o(a)}))}(),i=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e=>e.data,e=>t=>{if(!e)return;const{flashMessages:n}=e.context;return n?void 0!==t?n.filter(({type:e})=>t===e):n:void 0}),n=pv(e=>e.data,(e,{formState:t})=>t&&t.data,(e,t)=>()=>e&&t?Object.assign(Object.assign({},e.storeConfig),{formFields:t}):void 0),i=pv(n,e=>()=>QS(e(),()=>new Qe(We.MissingCheckoutConfig))),r=pv(e=>e.data&&e.data.context,e=>()=>e),o=pv(e=>e.meta&&e.meta.externalSource,e=>()=>e),a=pv(e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.host},e=>()=>e),s=pv(e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.locale},e=>()=>e),d=pv(e=>e.meta&&e.meta.variantIdentificationToken,e=>()=>e),c=pv(e=>e.errors.loadError,e=>()=>e),l=pv(e=>!!e.statuses.isLoading,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((u=Hv,h)=>({getConfig:e(u),getFlashMessages:t(u),getStoreConfig:n(u,{formState:h}),getStoreConfigOrThrow:i(u,{formState:h}),getContextConfig:r(u),getExternalSource:o(u),getHost:a(u),getLocale:s(u),getVariantIdentificationToken:d(u),getLoadError:c(u),isLoading:l(u)}))}(),r=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e=>e.errors.loadError,e=>()=>e),n=pv(e=>!!e.statuses.isLoading,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((i=Ef)=>({getCountries:e(i),getLoadError:t(i),isLoading:n(i)}))}(),o=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e=>e.errors.removeCouponError,e=>()=>e),n=pv(e=>e.errors.applyCouponError,e=>()=>e),i=pv(e=>!!e.statuses.isApplyingCoupon,e=>()=>e),r=pv(e=>!!e.statuses.isRemovingCoupon,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((o=Jv)=>({getCoupons:e(o),getRemoveError:t(o),getApplyError:n(o),isApplying:i(o),isRemoving:r(o)}))}(),a=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e,e=>()=>QS(e(),()=>new Qe(We.MissingCustomer))),n=pv(e=>e.errors.createError,e=>()=>e),i=pv(e=>!!e.statuses.isCreating,e=>()=>e),r=pv(e=>e.errors.createAddressError,e=>()=>e),o=pv(e=>!!e.statuses.isCreatingAddress,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((a=sf)=>({getCustomer:e(a),getCustomerOrThrow:t(a),getCreateAccountError:n(a),isCreatingCustomerAccount:i(a),getCreateAddressError:r(a),isCreatingCustomerAddress:o(a)}))}(),s=function(){const e=pv(e=>e.errors.signInMethodId,e=>e.errors.signInError,(e,t)=>n=>{if(!n||e===n)return t}),t=pv(e=>e.errors.signOutMethodId,e=>e.errors.signOutError,(e,t)=>n=>{if(!n||e===n)return t}),n=pv(e=>e.errors.executePaymentMethodCheckoutMethodId,e=>e.errors.executePaymentMethodCheckoutError,(e,t)=>n=>{if(!n||e===n)return t}),i=pv(e=>e.errors.initializeMethodId,e=>e.errors.initializeErrors,(e,t)=>n=>{if(e&&t)return n?t[n]:t[e]}),r=pv(e=>e.errors.widgetInteractionMethodId,e=>e.errors.widgetInteractionError,(e,t)=>n=>{if(!n||e===n)return t}),o=pv(e=>e.statuses.signInMethodId,e=>e.statuses.isSigningIn,(e,t)=>n=>!(n&&e!==n||!t)),a=pv(e=>e.statuses.signOutMethodId,e=>e.statuses.isSigningOut,(e,t)=>n=>!(n&&e!==n||!t)),s=pv(e=>e.statuses.executePaymentMethodCheckoutMethodId,e=>e.statuses.isExecutingPaymentMethodCheckout,(e,t)=>n=>!(n&&e!==n||!t)),d=pv(e=>e.statuses.initializeMethodId,e=>e.statuses.isInitializing,(e,t)=>n=>!(n&&e!==n||!t)),c=pv(e=>e.data,e=>t=>!(!e[t]||!e[t].isInitialized)),l=pv(e=>e.statuses.widgetInteractionMethodId,e=>e.statuses.isWidgetInteracting,(e,t)=>n=>!(n&&e!==n||!t));return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((u=hf)=>({getSignInError:e(u),getSignOutError:t(u),getExecutePaymentMethodCheckoutError:n(u),getInitializeError:i(u),getWidgetInteractionError:r(u),isSigningIn:o(u),isSigningOut:a(u),isExecutingPaymentMethodCheckout:s(u),isInitializing:d(u),isInitialized:c(u),isWidgetInteracting:l(u)}))}(),d=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e=>e.errors.removeGiftCertificateError,e=>()=>e),n=pv(e=>e.errors.applyGiftCertificateError,e=>()=>e),i=pv(e=>!!e.statuses.isApplyingGiftCertificate,e=>()=>e),r=pv(e=>!!e.statuses.isRemovingGiftCertificate,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((o=tf)=>({getGiftCertificates:e(o),getRemoveError:t(o),getApplyError:n(o),isApplying:i(o),isRemoving:r(o)}))}(),c=function(){const e=pv(e=>e.data,e=>t=>{if(!e)return;const n=t.gateway?`${t.gateway}.${t.id}`:t.id,i=e_[n];return i?(0,lodash__WEBPACK_IMPORTED_MODULE_5__.filter)(e,i):[]}),t=pv(e=>e.data,(e=[])=>t=>{const n=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.values)(e_);return e.find(e=>e.bigpayToken===t&&\"card\"===e.type&&n.some(t=>(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isMatch)(e,t)))}),n=pv(t,e=>t=>QS(e(t),()=>new Qe(We.MissingPaymentInstrument))),i=pv(e=>e.data,e=>()=>{if(e)return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.flatMap)(e_,t=>(0,lodash__WEBPACK_IMPORTED_MODULE_5__.filter)(e,e=>(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isMatch)(e,t)))}),r=pv(e=>e.meta,e=>()=>e),o=pv(e=>e.errors.loadError,e=>()=>e),a=pv(e=>e.errors.failedInstrument,e=>e.errors.deleteError,(e,t)=>n=>{if(!n||e===n)return t}),s=pv(e=>e.statuses.isLoading,e=>()=>!!e),d=pv(e=>e.statuses.deletingInstrument,e=>e.statuses.isDeleting,(e,t)=>n=>!(n&&e!==n||!t));return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((c=iS)=>({getCardInstrument:t(c),getCardInstrumentOrThrow:n(c),getInstruments:i(c),getInstrumentsByPaymentMethod:e(c),getInstrumentsMeta:r(c),getLoadError:o(c),getDeleteError:a(c),isLoading:s(c),isDeleting:d(c)}))}(),l=function(){const e=pv(e=>e.data,e=>(t=[],n)=>{const i=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(t,{code:n});return(e?e.shippingAddress:[]).map(e=>o(e,t,i))}),t=pv(e=>e.data,e=>(t=[],n)=>{const i=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(t,{code:n});return(e?e.billingAddress:[]).map(e=>o(e,t,i))}),n=pv(e=>e.data,e=>()=>e?e.customerAccount:[]),i=pv(e=>e.errors.loadError,e=>()=>e),r=pv(e=>!!e.statuses.isLoading,e=>()=>e);function o(e,t,n){return\"countryCode\"===e.name?function(e,t=[],n){if(!t.length)return e;const{code:i=\"\"}=n||{},r=t.map(({code:e,name:t})=>({value:e,label:t}));return Object.assign(Object.assign({},e),{options:{items:r},default:i,type:\"array\",fieldType:\"dropdown\",itemtype:\"string\"})}(e,t,n):\"stateOrProvince\"===e.name?function(e,t){const{subdivisions:n=[],requiresState:i}=t||{};if(!n.length)return Object.assign(Object.assign({},e),{required:null!=i&&i});const r=n.map(({code:e,name:t})=>({value:e,label:t}));return Object.assign(Object.assign({},e),{name:\"stateOrProvinceCode\",options:{items:r},required:null==i||i,type:\"array\",fieldType:\"dropdown\",itemtype:\"string\"})}(e,n):\"postalCode\"===e.name?function(e,t){const{hasPostalCodes:n=[]}=t||{};return void 0===n?e:Object.assign(Object.assign({},e),{required:Boolean(n)})}(e,n):e}return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((o=Cf)=>({getShippingAddressFields:e(o),getBillingAddressFields:t(o),getCustomerAccountFields:n(o),getLoadError:i(o),isLoading:r(o)}))}(),u=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e=>e.meta,e=>()=>e),n=pv(e=>e.data,e=>(t,n)=>(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(e,n?{id:t,gateway:n}:{id:t})),i=pv(n,e=>(t,n)=>QS(e(t,n),()=>new Qe(We.MissingPaymentMethod))),r=pv(e=>e.errors.loadError,e=>()=>e),o=pv(e=>e.errors.loadMethodId,e=>e.errors.loadMethodError,(e,t)=>n=>{if(!n||e===n)return t}),a=pv(e=>e.statuses.isLoading,e=>()=>!!e),s=pv(e=>e.statuses.loadMethodId,e=>e.statuses.isLoadingMethod,(e,t)=>n=>!(n&&e!==n||!t));return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((d=Vf)=>({getPaymentMethods:e(d),getPaymentMethodsMeta:t(d),getPaymentMethod:n(d),getPaymentMethodOrThrow:i(d),getLoadError:r(d),getLoadMethodError:o(d),isLoading:a(d),isLoadingMethod:s(d)}))}(),h=function(){const e=pv(e=>e.errors.initializeMethodId,e=>e.errors.initializeError,(e,t)=>n=>{if(!n||e===n)return t}),t=pv(e=>e.errors.executeMethodId,e=>e.errors.executeError,(e,t)=>n=>{if(!n||e===n)return t}),n=pv(e=>e.errors.finalizeMethodId,e=>e.errors.finalizeError,(e,t)=>n=>{if(!n||e===n)return t}),i=pv(e=>e.errors.widgetInteractionMethodId,e=>e.errors.widgetInteractionError,(e,t)=>n=>{if(!n||e===n)return t}),r=pv(e=>e.statuses.initializeMethodId,e=>e.statuses.isInitializing,(e,t)=>n=>!(n&&e!==n||!t)),o=pv(e=>e.data,e=>t=>{const n=t.gatewayId?`${t.methodId}.${t.gatewayId}`:t.methodId;return!(!e[n]||!e[n].isInitialized)}),a=pv(e=>e.statuses.executeMethodId,e=>e.statuses.isExecuting,(e,t)=>n=>!(n&&e!==n||!t)),s=pv(e=>e.statuses.finalizeMethodId,e=>e.statuses.isFinalizing,(e,t)=>n=>!(n&&e!==n||!t)),d=pv(e=>e.statuses.widgetInteractionMethodId,e=>e.statuses.isWidgetInteracting,(e,t)=>n=>!(n&&e!==n||!t));return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((c=Kf)=>({getInitializeError:e(c),getExecuteError:t(c),getFinalizeError:n(c),getWidgetInteractingError:i(c),isInitializing:r(c),isInitialized:o(c),isExecuting:a(c),isFinalizing:s(c),isWidgetInteracting:d(c)}))}(),p=function(){const e=pv(e=>e.data,e=>(t,n)=>{if(!e)return;const i=fS(vS({consignmentId:t,searchArea:n})),r=btoa(`${JSON.stringify(i)}`);return e[r]}),t=pv(e=>e.errors.loadError,e=>()=>e),n=pv(e=>!!e.statuses.isLoading,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((i=SS)=>({getPickupOptions:e(i),getLoadError:t(i),isLoading:n(i)}))}(),m=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e,e=>()=>QS(e(),()=>new Qe(We.MissingPaymentProviderCustomer)));return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((n=eS)=>({getPaymentProviderCustomer:e(n),getPaymentProviderCustomerOrThrow:t(n)}))}(),y=function(){const e=pv(e=>e.data,e=>t=>e[t]);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((t=cS)=>({getCheckout:e(t)}))}(),g=function(){const e=pv(e=>e.data,e=>()=>{const t=null==e?void 0:e.find(e=>!e.selectedPickupOption);return null==t?void 0:t.shippingAddress}),t=pv(e,e=>()=>QS(e(),()=>new Qe(We.MissingShippingAddress))),n=pv(e=>e.data,e=>()=>{const t=null==e?void 0:e.filter(e=>!e.selectedPickupOption);return t?t.map(e=>e.shippingAddress):[]}),i=pv(n,e=>()=>QS(e(),()=>new Qe(We.MissingShippingAddress)));return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((r=hS)=>({getShippingAddress:e(r),getShippingAddressOrThrow:t(r),getShippingAddresses:n(r),getShippingAddressesOrThrow:i(r)}))}(),v=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e=>e.errors.loadError,e=>()=>e),n=pv(e=>e.statuses.isLoading,e=>()=>!!e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((i=bS)=>({getShippingCountries:e(i),getLoadError:t(i),isLoading:n(i)}))}(),_=function(){const e=pv(e=>e.errors.updateAddressMethodId,e=>e.errors.updateAddressError,(e,t)=>n=>{if(!n||e===n)return t}),t=pv(e=>e.errors.selectOptionMethodId,e=>e.errors.selectOptionError,(e,t)=>n=>{if(!n||e===n)return t}),n=pv(e=>e.errors.initializeMethodId,e=>e.errors.initializeError,(e,t)=>n=>{if(!n||e===n)return t}),i=pv(e=>e.errors.widgetInteractionMethodId,e=>e.errors.widgetInteractionError,(e,t)=>n=>{if(!n||e===n)return t}),r=pv(e=>e.statuses.updateAddressMethodId,e=>e.statuses.isUpdatingAddress,(e,t)=>n=>!(n&&e!==n||!t)),o=pv(e=>e.statuses.selectOptionMethodId,e=>e.statuses.isSelectingOption,(e,t)=>n=>!(n&&e!==n||!t)),a=pv(e=>e.statuses.initializeMethodId,e=>e.statuses.isInitializing,(e,t)=>n=>!(n&&e!==n||!t)),s=pv(e=>e.data,e=>t=>!(!e[t]||!e[t].isInitialized)),d=pv(e=>e.statuses.widgetInteractionMethodId,e=>e.statuses.isWidgetInteracting,(e,t)=>n=>!(n&&e!==n||!t));return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((c=kS)=>({getUpdateAddressError:e(c),getSelectOptionError:t(c),getInitializeError:n(c),getWidgetInteractionError:i(c),isUpdatingAddress:r(c),isSelectingOption:o(c),isInitializing:a(c),isInitialized:s(c),isWidgetInteracting:d(c)}))}(),C=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e,e=>()=>QS(e(),()=>new Qe(We.MissingConsignments))),n=pv(e=>e.data,e=>t=>{if(e&&e.length)return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(e,{id:t})}),i=pv(e=>e.data,e=>t=>{if(e&&e.length)return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(e,e=>{return n=e.shippingAddress,i=t,(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEqual)(t_(n),t_(i));// removed by dead control flow\n{ var n, i; }})}),r=pv(e=>e.data,e=>()=>{if(e&&e.length)return e[0].selectedShippingOption}),o=pv(e=>e.errors.loadError,e=>()=>e),a=pv(e=>e.errors.createError,e=>()=>e),s=pv(e=>e.errors.loadShippingOptionsError,e=>()=>e),d=pv(e,(e,{cart:t})=>t.getCart,(e,t)=>()=>{const n=t();if(!n)return[];const i=(e()||[]).reduce((e,t)=>e.concat(t.lineItemIds),[]);return(n.lineItems.physicalItems||[]).filter(e=>i.indexOf(e.id)<0)}),c=pv(e=>e.errors.updateError,e=>t=>t?e[t]:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(e)),l=pv(e=>e.errors.deleteError,e=>t=>t?e[t]:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(e)),u=pv(i,c,a,(e,t,n)=>i=>{const r=e(i);return r?t(r.id):n()}),h=pv(e=>e.errors.updateShippingOptionError,e=>t=>t?e[t]:(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(e)),p=pv(e=>e.statuses.isLoading,e=>()=>!0===e),m=pv(e=>e.statuses.isLoadingShippingOptions,e=>()=>!0===e),y=pv(e=>e.statuses.isCreating,e=>()=>!0===e),g=pv(e=>e.statuses.isUpdating,e=>t=>t?!0===e[t]:!0===(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(e)),v=pv(e=>e.statuses.isDeleting,e=>t=>t?!0===e[t]:!0===(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(e)),f=pv(i,g,y,(e,t,n)=>i=>{const r=e(i);return r?t(r.id):n()}),_=pv(e=>e.statuses.isUpdatingShippingOption,e=>t=>t?!0===e[t]:!0===(0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(e));return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((S=hS,w)=>({getConsignments:e(S),getConsignmentsOrThrow:t(S),getConsignmentById:n(S),getConsignmentByAddress:i(S),getShippingOption:r(S),getLoadError:o(S),getCreateError:a(S),getLoadShippingOptionsError:s(S),getUnassignedItems:d(S,{cart:w}),getUpdateError:c(S),getDeleteError:l(S),getItemAssignmentError:u(S),getUpdateShippingOptionError:h(S),isLoading:p(S),isLoadingShippingOptions:m(S),isCreating:y(S),isUpdating:g(S),isDeleting:v(S),isAssigningItems:f(S),isUpdatingShippingOption:_(S)}))}(),I=function(){const e=pv(e=>e.data,(e,{billingAddress:t})=>t.getBillingAddress,(e,{cart:t})=>t.getCart,(e,{customer:t})=>t.getCustomer,(e,{consignments:t})=>t.getConsignments,(e,{coupons:t})=>t.getCoupons,(e,{giftCertificates:t})=>t.getGiftCertificates,(e,t,n,i,r,o,a)=>()=>{const s=t(),d=n(),c=i(),l=r()||[],u=o()||[],h=a()||[];if(e&&d&&c)return Object.assign(Object.assign({},e),{billingAddress:s,cart:d,customer:c,consignments:l,coupons:u,giftCertificates:h})}),t=pv(e,e=>()=>QS(e(),()=>new Qe(We.MissingCheckout))),n=pv(e,e=>t=>{const n=e();if(!n)return;const i=n.grandTotal||0,r=n.customer.storeCredit||0;return t?Math.max(i-r,0):n.outstandingBalance}),i=pv(e=>e.errors.loadError,e=>()=>e),r=pv(e=>e.errors.updateError,e=>()=>e),o=pv(e=>e.statuses.isExecutingSpamCheck,e=>()=>!0===e),a=pv(e=>e.statuses.isLoading,e=>()=>!0===e),s=pv(e=>e.statuses.isUpdating,e=>()=>!0===e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((d=WS,c,l,u,h,p,m)=>({getCheckout:e(d,{billingAddress:c,cart:l,consignments:u,coupons:h,customer:p,giftCertificates:m}),getCheckoutOrThrow:t(d,{billingAddress:c,cart:l,consignments:u,coupons:h,customer:p,giftCertificates:m}),getOutstandingBalance:n(d,{billingAddress:c,cart:l,consignments:u,coupons:h,customer:p,giftCertificates:m}),getLoadError:i(d),getUpdateError:r(d),isExecutingSpamCheck:o(d),isLoading:a(d),isUpdating:s(d)}))}(),b=function(){const e=pv(e=>e.data,(e,{billingAddress:t})=>t.getOrderBillingAddress(),(e,{coupons:t})=>t.getCoupons(),(e,t,n=[])=>()=>{if(e&&t)return Object.assign(Object.assign({},e),{billingAddress:t,coupons:n})}),t=pv(e,e=>()=>QS(e(),()=>new Qe(We.MissingOrder))),n=pv(e=>e.meta,e=>()=>e),i=pv(e=>e.errors.loadError,e=>()=>e),r=pv(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.payments},(e=[])=>t=>{const n=e.find(({providerId:e})=>e===t);return null==n?void 0:n.paymentId}),o=pv(e=>!!e.statuses.isLoading,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((a=Mf,s,d)=>({getOrder:e(a,{billingAddress:s,coupons:d}),getOrderOrThrow:t(a,{billingAddress:s,coupons:d}),getOrderMeta:n(a),getLoadError:i(a),getPaymentId:r(a),isLoading:o(a)}))}(),P=function(){const e=pv(e=>e.data,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((t=Lf)=>({getOrderBillingAddress:e(t)}))}(),O=function(){const e=pv(({order:e})=>e.getOrderMeta,e=>()=>{const t=e();return t&&t.payment}),t=pv(({order:e})=>e.getOrder,e=>()=>{const t=e();return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(t&&t.payments,({providerId:e})=>\"giftcertificate\"!==e&&\"storecredit\"!==e)}),n=pv(({checkout:e})=>e.getCheckout,e=>()=>{const t=e();return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.find)(t&&t.payments,({providerType:e})=>\"PAYMENT_TYPE_HOSTED\"===e)}),i=pv(e,n,t,(e,t,n)=>()=>{const i=e();if(i&&i.id)return{providerId:i.id,gatewayId:i.gateway};const r=t()||n();return r&&r.providerId?{providerId:r.providerId,gatewayId:r.gatewayId}:void 0}),r=pv(i,e=>()=>QS(e(),()=>new Qe(We.MissingPaymentId))),o=pv(e,n,t,(e,t,n)=>()=>{const i=e();if(i&&i.status)return i.status.replace(\"PAYMENT_STATUS_\",\"\");const r=t()||n();return r?r.detail.step:void 0}),a=pv(o,e=>()=>QS(e(),()=>new Qe(We.MissingPaymentStatus))),s=pv(({order:e})=>e.getOrderMeta,e=>()=>{const t=e();return t&&t.token}),d=pv(s,e=>()=>QS(e(),()=>new Qe(We.MissingPaymentToken))),c=pv(e,e=>()=>{const t=e();return t&&t.redirectUrl}),l=pv(c,e=>()=>QS(e(),()=>new Qe(We.MissingPaymentRedirectUrl))),u=pv(({checkout:e})=>e.getOutstandingBalance,e=>(t=!1)=>{const n=e(t);return!!n&&n>0}),h=pv(o,e=>t=>!(!t||!t.nonce)||e()===rg||e()===og);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((e,t)=>({getPaymentId:i({checkout:e,order:t}),getPaymentIdOrThrow:r({checkout:e,order:t}),getPaymentStatus:o({checkout:e,order:t}),getPaymentStatusOrThrow:a({checkout:e,order:t}),getPaymentToken:s({checkout:e,order:t}),getPaymentTokenOrThrow:d({checkout:e,order:t}),getPaymentRedirectUrl:c({checkout:e,order:t}),getPaymentRedirectUrlOrThrow:l({checkout:e,order:t}),isPaymentDataRequired:u({checkout:e,order:t}),isPaymentDataSubmitted:h({checkout:e,order:t})}))}(),E=function(){const e=pv(e=>e.errors.applyError,e=>()=>e),t=pv(e=>!!e.statuses.isApplying,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((n=n_)=>({getApplyError:e(n),isApplying:t(n)}))}(),T=function(){const e=pv(e=>e.errors.updateError,e=>()=>e),t=pv(e=>!!e.statuses.isUpdating,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((n=VS)=>({getUpdateError:e(n),isUpdating:t(n)}))}(),D=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e=>e.errors.sendError,e=>()=>e),n=pv(e=>!!e.statuses.isSending,e=>()=>e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((i=NS)=>({getEmail:e(i),getSendError:t(i),isSending:n(i)}))}(),M=function(){const e=pv(e=>e.data,e=>()=>e),t=pv(e=>e.data,e=>t=>null==e?void 0:e.find(e=>e.region===t)),n=pv(e=>e.errors.loadError,e=>()=>e),i=pv(e=>e.statuses.isLoading,e=>()=>!!e);return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)((r=vf)=>({getExtensions:e(r),getExtensionByRegion:t(r),getLoadError:n(r),isLoading:i(r)}))}();return(f,S={})=>{const w=e(f.billingAddress),A=t(f.cart),k=n(f.checkoutButton),z=r(f.countries),N=o(f.coupons),x=a(f.customer),F=s(f.customerStrategies),R=M(f.extensions),L=l(f.formFields),B=d(f.giftCertificates),j=c(f.instruments),U=P(f.orderBillingAddress),q=u(f.paymentMethods),V=m(f.paymentProviderCustomer),G=h(f.paymentStrategies),H=p(f.pickupOptions),$=y(f.remoteCheckout),W=g(f.consignments),Y=v(f.shippingCountries),K=_(f.shippingStrategies),J=T(f.subscriptions),Z=E(f.storeCredit),Q=D(f.signInEmail),X=C(f.consignments,A),ee=I(f.checkout,w,A,X,N,x,B),te=b(f.order,U,N),ne=O(ee,te),ie={billingAddress:w,cart:A,checkout:ee,checkoutButton:k,config:i(f.config,f.formFields),consignments:X,countries:z,coupons:N,customer:x,customerStrategies:F,extensions:R,form:L,giftCertificates:B,instruments:j,order:te,orderBillingAddress:U,payment:ne,paymentMethods:q,paymentProviderCustomer:V,paymentStrategies:G,pickupOptions:H,remoteCheckout:$,shippingAddress:W,shippingCountries:Y,shippingStrategies:K,signInEmail:Q,subscriptions:J,storeCredit:Z};return S.shouldWarnMutation?function(e){return Object.keys(e).reduce((t,n)=>(t[n]=XS(e[n]),t),{})}(ie):ie}}function r_(e={},t){const n=(r=function(){const e=new fv;return[\"catalog_only\",\"empty_cart\",\"invalid_order_id\",\"invalid_order_token\",\"missing_order_token\",\"missing_provider_token\",\"missing_shipping_method\",\"order_completion_error\",\"order_could_not_be_finalized_error\",\"order_create_failed\",\"provider_fatal_error\",\"provider_setup_error\",\"stock_too_low\"].forEach(t=>{e.register(t,(e,t)=>new yv(e,t))}),e.register(\"invalid_payment_provider\",e=>new Bi(e)),e.register(\"payment_config_not_found\",e=>new Bi(e)),e}(),e=>(0,rxjs__WEBPACK_IMPORTED_MODULE_23__.from)(e).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>{if(e instanceof Error||e.payload instanceof Error)throw e;if((t=e.payload)&&\"object\"==typeof t&&[\"body\",\"headers\",\"status\",\"statusText\"].every(e=>Object.prototype.hasOwnProperty.call(t,e))){const t=e.payload.body&&e.payload.body.detail;throw Object.assign(Object.assign({},e),{payload:r.createError(e.payload,t)})}var t;throw e}))),i=i_();var r;return (0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createDataStore)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.combineReducers)({billingAddress:Pv,cart:Mv,checkout:YS,checkoutButton:Uv,config:$v,consignments:pS,countries:Af,coupons:Zv,customer:df,customerStrategies:pf,extensions:ff,formFields:If,giftCertificates:nf,instruments:rS,orderBillingAddress:Bf,order:zf,payment:Uf,paymentMethods:Gf,paymentStrategies:Jf,pickupOptions:_S,paymentProviderCustomer:tS,remoteCheckout:lS,shippingCountries:PS,shippingStrategies:TS,signInEmail:xS,subscriptions:GS,storeCredit:jS}),e,Object.assign({actionTransformer:n,stateTransformer:e=>i(e)},t))}function o_(e){\"https:\"!==document.location.protocol&&yt().warn(\"The BigCommerce Checkout SDK should not be used on a non-HTTPS page\"),\"production\"!==ut()&&yt().warn(\"Note that the development build is not optimized. To create a production build, set process​.env.NODE_ENV to `production`.\");const t={meta:{externalSource:e&&e.externalSource,host:null==e?void 0:e.host,locale:null==e?void 0:e.locale,variantIdentificationToken:window.checkoutVariantIdentificationToken},errors:{},statuses:{}},{locale:i=\"\",shouldWarnMutation:r=!0}=e||{},s=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:e&&e.host}),d=r_({config:t},{shouldWarnMutation:r}),c=dm(d),l=new im(s),u=new ts(s),h=new ft(new It(s)),p=Os((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.createScriptLoader)()),m=new Es(s),y=new _s(p,m),g=new sm(l,new gm(u)),v=new _y(new wy(s)),f=new os(new as(s)),S=new is(u,h,f),_=Ty(d),w=cm(_,$e,{useFallback:!0}),C=function(e,t=He){const n=new Lt;for(const[,i]of Object.entries(t))if(xt(i))for(const t of i.resolveIds)n.register(t,()=>i(e));return n}(_),I=new Ks(new Js(s)),b=new id,P=new sd(d,b),O=ct(d,function(){const e=function(){const e=pv(({checkout:e})=>e.getCheckout,e=>Py(e)),t=pv(({order:e})=>e.getOrder,e=>Py(e)),n=pv(({config:e})=>e.getStoreConfig,e=>Py(e)),i=pv(({shippingAddress:e})=>e.getShippingAddress,({config:e})=>e.getContextConfig,(e,t)=>Py(()=>{const n=e(),i=t();if(!n){if(!i||!i.geoCountryCode)return;return{firstName:\"\",lastName:\"\",company:\"\",address1:\"\",address2:\"\",city:\"\",stateOrProvince:\"\",stateOrProvinceCode:\"\",postalCode:\"\",country:\"\",phone:\"\",customFields:[],countryCode:i.geoCountryCode}}return n})),r=pv(({consignments:e})=>e.getConsignments,e=>Py(()=>{const t=e(),n=null==t?void 0:t.find(e=>!e.selectedPickupOption);return null==n?void 0:n.availableShippingOptions})),o=pv(({consignments:e})=>e.getConsignments,e=>Py(e)),a=pv(({consignments:e})=>e.getConsignments,e=>Py(()=>{const t=e(),n=null==t?void 0:t.find(e=>!e.selectedPickupOption);return null==n?void 0:n.selectedShippingOption})),s=pv(({shippingCountries:e})=>e.getShippingCountries,e=>Py(e)),d=pv(({billingAddress:e})=>e.getBillingAddress,({config:e})=>e.getContextConfig,(e,t)=>Py(()=>{const n=e(),i=t();return(!n||(0,lodash__WEBPACK_IMPORTED_MODULE_5__.values)((0,lodash__WEBPACK_IMPORTED_MODULE_5__.omit)(n,\"shouldSaveAddress\",\"email\",\"id\")).every(e=>!e||!e.length))&&i&&i.geoCountryCode?{id:n?n.id:\"\",firstName:\"\",lastName:\"\",company:\"\",address1:\"\",address2:\"\",city:\"\",email:n?n.email:\"\",stateOrProvince:\"\",stateOrProvinceCode:\"\",postalCode:\"\",country:\"\",phone:\"\",customFields:[],countryCode:i.geoCountryCode}:n})),c=pv(({countries:e})=>e.getCountries,e=>Py(e)),l=pv(({paymentMethods:e})=>e.getPaymentMethods,e=>Py(e)),u=pv(({paymentMethods:e})=>e.getPaymentMethod,e=>Py(e)),h=pv(({payment:e})=>e.getPaymentId,({paymentMethods:e})=>e.getPaymentMethod,(e,t)=>Py(()=>{const n=e();return n&&t(n.providerId,n.gatewayId)})),p=pv(({cart:e})=>e.getCart,e=>Py(e)),m=pv(({coupons:e})=>e.getCoupons,e=>Py(e)),y=pv(({giftCertificates:e})=>e.getGiftCertificates,e=>Py(e)),g=pv(({customer:e})=>e.getCustomer,e=>Py(e)),v=pv(({signInEmail:e})=>e.getEmail,e=>Py(e)),f=pv(({payment:e})=>e.isPaymentDataRequired,e=>Py(e)),S=pv(({payment:e})=>e.isPaymentDataSubmitted,({paymentMethods:e})=>e.getPaymentMethod,(e,t)=>Py((n,i)=>e(t(n,i)))),_=pv(({instruments:e})=>e.getInstruments,({instruments:e})=>e.getInstrumentsByPaymentMethod,(e,t)=>Py(function(n){return n?t(n):e()})),w=pv(({form:e})=>e.getCustomerAccountFields,e=>Py(e)),C=pv(({form:e})=>e.getBillingAddressFields,({countries:e})=>e.getCountries,(e,t)=>Py(n=>e(t(),n))),I=pv(({form:e})=>e.getShippingAddressFields,({shippingCountries:e})=>e.getShippingCountries,(e,t)=>Py(n=>e(t(),n))),b=pv(({config:e})=>e.getFlashMessages,e=>Py(e)),P=pv(({pickupOptions:e})=>e.getPickupOptions,e=>Py(e)),O=pv(({config:e})=>e.getStoreConfig,e=>Py(()=>{const t=e();if(t)return t.checkoutSettings.checkoutUserExperienceSettings})),E=pv(({extensions:e})=>e.getExtensions,e=>Py(e)),A=pv(({paymentProviderCustomer:e})=>e.getPaymentProviderCustomer,e=>Py(e)),k=pv(({extensions:e})=>e.getExtensionByRegion,e=>Py(e));return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)(T=>({getCheckout:e(T),getOrder:t(T),getConfig:n(T),getExtensions:E(T),getExtensionByRegion:k(T),getFlashMessages:b(T),getShippingAddress:i(T),getShippingOptions:r(T),getConsignments:o(T),getSelectedShippingOption:a(T),getShippingCountries:s(T),getBillingAddress:d(T),getBillingCountries:c(T),getPaymentMethods:l(T),getPaymentMethod:u(T),getSelectedPaymentMethod:h(T),getCart:p(T),getCoupons:m(T),getGiftCertificates:y(T),getCustomer:g(T),isPaymentDataRequired:f(T),isPaymentDataSubmitted:S(T),getSignInEmail:v(T),getInstruments:_(T),getCustomerAccountFields:w(T),getBillingAddressFields:C(T),getShippingAddressFields:I(T),getPickupOptions:P(T),getUserExperienceSettings:O(T),getPaymentProviderCustomer:A(T)}))}(),t=function(){const e=mv(e=>e,e=>()=>{for(const t of Object.keys(e)){const n=e[t]();if(n)return n}}),t=pv(({shippingStrategies:e})=>e.getSelectOptionError,({consignments:e})=>e.getUpdateShippingOptionError,(e,t)=>n=>e()||t(n));return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)(n=>{const i={getLoadCheckoutError:n.checkout.getLoadError,getUpdateCheckoutError:n.checkout.getUpdateError,getSubmitOrderError:n.paymentStrategies.getExecuteError,getFinalizeOrderError:n.paymentStrategies.getFinalizeError,getLoadOrderError:n.order.getLoadError,getLoadCartError:n.cart.getLoadError,getLoadBillingCountriesError:n.countries.getLoadError,getLoadShippingCountriesError:n.shippingCountries.getLoadError,getLoadPaymentMethodsError:n.paymentMethods.getLoadError,getLoadPaymentMethodError:n.paymentMethods.getLoadMethodError,getInitializePaymentError:n.paymentStrategies.getInitializeError,getSignInError:n.customerStrategies.getSignInError,getSignOutError:n.customerStrategies.getSignOutError,getInitializeCustomerError:n.customerStrategies.getInitializeError,getLoadShippingOptionsError:n.consignments.getLoadShippingOptionsError,getSelectShippingOptionError:t(n),getContinueAsGuestError:n.billingAddress.getContinueAsGuestError,getUpdateBillingAddressError:n.billingAddress.getUpdateError,getUpdateSubscriptionsError:n.subscriptions.getUpdateError,getUpdateShippingAddressError:n.shippingStrategies.getUpdateAddressError,getDeleteConsignmentError:n.consignments.getDeleteError,getUpdateConsignmentError:n.consignments.getUpdateError,getCreateConsignmentsError:n.consignments.getCreateError,getInitializeShippingError:n.shippingStrategies.getInitializeError,getApplyStoreCreditError:n.storeCredit.getApplyError,getApplyCouponError:n.coupons.getApplyError,getRemoveCouponError:n.coupons.getRemoveError,getApplyGiftCertificateError:n.giftCertificates.getApplyError,getRemoveGiftCertificateError:n.giftCertificates.getRemoveError,getLoadInstrumentsError:n.instruments.getLoadError,getDeleteInstrumentError:n.instruments.getDeleteError,getLoadConfigError:n.config.getLoadError,getSignInEmailError:n.signInEmail.getSendError,getCreateCustomerAccountError:n.customer.getCreateAccountError,getCreateCustomerAddressError:n.customer.getCreateAddressError,getPickupOptionsError:n.pickupOptions.getLoadError,getLoadExtensionsError:n.extensions.getLoadError};return Object.assign({getError:e(i)},i)})}(),n=function(){const e=mv(e=>e,e=>()=>Object.keys(e).some(t=>e[t]())),t=pv(({shippingStrategies:e})=>e.isSelectingOption,({consignments:e})=>e.isUpdatingShippingOption,(e,t)=>n=>e()||t(n)),n=pv(({customerStrategies:e})=>e.isInitializing,({customerStrategies:e})=>e.isSigningIn,({customerStrategies:e})=>e.isSigningOut,({customerStrategies:e})=>e.isExecutingPaymentMethodCheckout,({customerStrategies:e})=>e.isWidgetInteracting,(e,t,n,i,r)=>o=>e(o)||t(o)||n(o)||i(o)||r(o)),i=pv(({shippingStrategies:e})=>e.isInitializing,({shippingStrategies:e})=>e.isUpdatingAddress,({shippingStrategies:e})=>e.isSelectingOption,({shippingStrategies:e})=>e.isWidgetInteracting,(e,t,n,i)=>r=>e(r)||t(r)||n(r)||i(r)),r=pv(({paymentStrategies:e})=>e.isInitializing,({paymentStrategies:e})=>e.isExecuting,({paymentStrategies:e})=>e.isFinalizing,({paymentStrategies:e})=>e.isWidgetInteracting,(e,t,n,i)=>r=>e(r)||t(r)||n(r)||i(r)),o=pv(({paymentStrategies:e})=>e.isExecuting,({checkout:e})=>e.isExecutingSpamCheck,(e,t)=>n=>e(n)||t());return (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoizeOne)(a=>{const s={isLoadingCheckout:a.checkout.isLoading,isUpdatingCheckout:a.checkout.isUpdating,isExecutingSpamCheck:a.checkout.isExecutingSpamCheck,isSubmittingOrder:o(a),isFinalizingOrder:a.paymentStrategies.isFinalizing,isLoadingOrder:a.order.isLoading,isLoadingCart:a.cart.isLoading,isLoadingBillingCountries:a.countries.isLoading,isLoadingShippingCountries:a.shippingCountries.isLoading,isLoadingPaymentMethods:a.paymentMethods.isLoading,isLoadingPaymentMethod:a.paymentMethods.isLoadingMethod,isInitializingPayment:a.paymentStrategies.isInitializing,isSigningIn:a.customerStrategies.isSigningIn,isSigningOut:a.customerStrategies.isSigningOut,isExecutingPaymentMethodCheckout:a.customerStrategies.isExecutingPaymentMethodCheckout,isInitializingCustomer:a.customerStrategies.isInitializing,isInitializedCustomer:a.customerStrategies.isInitialized,isLoadingShippingOptions:a.consignments.isLoadingShippingOptions,isSelectingShippingOption:t(a),isUpdatingBillingAddress:a.billingAddress.isUpdating,isUpdatingSubscriptions:a.subscriptions.isUpdating,isCreatingCustomerAccount:a.customer.isCreatingCustomerAccount,isCreatingCustomerAddress:a.customer.isCreatingCustomerAddress,isContinuingAsGuest:a.billingAddress.isContinuingAsGuest,isUpdatingShippingAddress:a.shippingStrategies.isUpdatingAddress,isUpdatingConsignment:a.consignments.isUpdating,isDeletingConsignment:a.consignments.isDeleting,isCreatingConsignments:a.consignments.isCreating,isInitializingShipping:a.shippingStrategies.isInitializing,isApplyingStoreCredit:a.storeCredit.isApplying,isApplyingCoupon:a.coupons.isApplying,isRemovingCoupon:a.coupons.isRemoving,isApplyingGiftCertificate:a.giftCertificates.isApplying,isRemovingGiftCertificate:a.giftCertificates.isRemoving,isLoadingInstruments:a.instruments.isLoading,isDeletingInstrument:a.instruments.isDeleting,isLoadingConfig:a.config.isLoading,isSendingSignInEmail:a.signInEmail.isSending,isCustomerStepPending:n(a),isShippingStepPending:i(a),isPaymentStepPending:r(a),isLoadingPickupOptions:a.pickupOptions.isLoading};return Object.assign({isPending:e(s)},s)})}();return i=>({data:e(i),errors:t(i),statuses:n(i)})}());return new uv(d,O,P,function(e,t){const n={[od.ConsignmentsChanged]:cd};return new dd(e,t,n)}(O,P),new tt(new at(s),v),S,h,new Za(new Qa(s),S,y),new cy(new uy(s),u),new Zp(new Qp(s,{locale:i})),new Pt(new Mt(s)),new Xa(function(e,t,n){const i=new Rt,r=(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),o=new ts(t),s=new is(o,new ft(new It(t)),new os(new as(t))),d=new ds(new cs(t)),c=new ps(t),l=new ys(c,s),u=new _s(Os(r),new Es(t)),h=new Za(new Qa(t),s,u);return i.register(\"squarev2\",()=>new Ns(e,new ys(c,s))),i.register(\"masterpass\",()=>new zs(e,d,l,new hs(r),n)),i.register(\"default\",()=>new As(e,h)),i}(d,s,i),C),new lt,new zt(new Nt(s)),new Ng(new Bg(c,s)),g,new ds(new cs(s)),new pm(function(e,t,n,i,r){const s=new My({defaultToken:um.CREDIT_CARD}),d=(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),c=new oy,l=new Bm(t),u=Ty(e),h=cm(u),p=new ts(n),m=new gm(p),y=new _s(i,new Es(n)),g=new sm(new im(n),m),v=new Im(Os((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.createScriptLoader)())),f=new Lm(l,g,c,v),S=new ds(new cs(n)),_=new ft(new It(n)),w=new os(new as(n)),C=new is(p,_,w),I=new pm(s,h,g,y),b=(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)(),P=((e,t)=>new fg(new vg(e,t)))(b,v),O=new Fm(e);return s.register(um.BARCLAYS,()=>new Ry(e,g,f,O,new $y(e,f,new tg(new ng(d))))),s.register(um.BRAINTREE_VISA_CHECKOUT,()=>new jy(e,C,S,I,f,g,function(e,t,n){const i=new pn(n),r=new Dn(e,window,i),o=new qy(r);return new Vy(o,t)}(d,n,u),new Gy(d))),s.register(um.CBA_MPGS,()=>new sg(e,g,f,O,S,new dg(d),r)),s.register(um.CONVERGE,()=>new cg(e,g,f,O,b)),s.register(um.BNZ,()=>new By(e,g,f,O,new $y(e,f,new tg(new ng(d))))),s.register(um.MASTERPASS,()=>new lg(e,g,f,new hs(d),r)),s.register(um.PAYPAL_EXPRESS,()=>new ug(e,g,new hg(d))),s.register(um.PAYPAL_EXPRESS_CREDIT,()=>new ug(e,g,new hg(d))),s.register(um.PPSDK,()=>new Ig(e,g,((e,t,n,i,r)=>{const o=new Pg;return o.register(wg.CARD,()=>new Eg(e,t,r,i)),o.register(wg.NONE,()=>new Ag(n,i)),o.register(wg.UNSUPPORTED,()=>{}),o})(e,g,n,P,O),new Dg(n,P),new vm(\"PPSDK\"))),s.register(um.WE_PAY,()=>new Mg(e,g,f,O,new zg(d))),s}(d,c,s,p,i),w,g,y),new jg(new Ug(s)),new my(new yy(s,{locale:i}),d),new qg(function(e,t){const n=new Rt,i=Ty(e),r=new ts(t),o=new uy(t),s=new cy(o,r),d=new ds(new cs(t)),c=(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),l=new _y(new wy(t)),u=new tt(new at(t),l),h=window,p=new pn(i);return n.register(\"amazonpay\",()=>new Wg(e,s,new ds(new cs(t)),tn(),new qg(n))),n.register(\"stripeupe\",()=>new av(e,new Gg(c),s,d)),n.register(\"braintreeacceleratedcheckout\",()=>new Kg(e,u,s,d,new dy,new or(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),h,p),h))),n.register(\"paypalcommerceacceleratedcheckout\",()=>new rv(e,u,s,d,new dy,ra(),ma())),n.register(\"default\",()=>new Jg(e,s)),n}(d,s)),new sv(new dv(s)),y,new vy(new fy(s)),v,f,I,b)}const a_=e=>{const t=(0,lodash__WEBPACK_IMPORTED_MODULE_5__.uniqueId)(e);return document.getElementById(t)?a_(e):t};function s_(e){return Object.prototype.hasOwnProperty.call(e,\"cacheKey\")}class d_{constructor(e){this._lastId=0,this._map={maps:[]},this._usedMaps=[],this._options=Object.assign({maxSize:0,isEqual:(shallowequal__WEBPACK_IMPORTED_MODULE_13___default()),onExpire:lodash__WEBPACK_IMPORTED_MODULE_5__.noop},e)}getKey(...e){const t=this._resolveMap(...e),{index:n,parentMap:i}=t;let{map:r}=t;return r&&r.cacheKey?r.usedCount++:r=this._generateMap(i,e.slice(n)),this._removeLeastUsedMap(r),r.cacheKey}getUsedCount(...e){const{map:t}=this._resolveMap(...e);return t?t.usedCount:0}_resolveMap(...e){let t=0,n=this._map;for(;n.maps.length;){let i=!1;for(let r=0;r<n.maps.length;r++){const o=n.maps[r];if(this._options.isEqual(o.value,e[t])){if(n.maps.unshift(...n.maps.splice(r,1)),(0===e.length||t===e.length-1)&&s_(o))return{index:t,map:o,parentMap:n};i=!0,n=o,t++;break}}if(!i)break}return{index:t,parentMap:n}}_generateMap(e,t){let n,i=0,r=e;do{n={maps:[],parentMap:r,usedCount:1,value:t[i]},r.maps.unshift(n),r=n,i++}while(i<t.length);const o=n;return o.cacheKey=\"\"+ ++this._lastId,o}_removeLeastUsedMap(e){if(!this._options.maxSize)return;const t=this._usedMaps.indexOf(e);if(this._usedMaps.splice(-1===t?0:t,-1===t?0:1,e),this._usedMaps.length<=this._options.maxSize)return;const n=this._usedMaps.pop();n&&(this._removeMap(n),this._options.onExpire(n.cacheKey))}_removeMap(e){e.parentMap&&(e.parentMap.maps.splice(e.parentMap.maps.indexOf(e),1),function(e){return Object.prototype.hasOwnProperty.call(e,\"parentMap\")}(e.parentMap)||this._removeMap(e.parentMap))}}function c_(e){const t=class extends e{};return Object.getOwnPropertyNames(e.prototype).forEach(n=>{const i=Object.getOwnPropertyDescriptor(e.prototype,n);i&&\"constructor\"!==n&&Object.defineProperty(t.prototype,n,function(e,t,n){if(\"function\"!=typeof n.value)return n;let i=new d_,r=n.value,o=(0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoize)(r);return Cr(e,t,{get(){const e=(...e)=>{const t=o.call(this,...e);if(1===i.getUsedCount(...e))return t;const n=r.call(this,...e);return wv(n,t,{keyFilter:e=>!function(e){return 0===`${e}`.indexOf(\"$$\")||0===`${e}`.indexOf(\"_\")}(e)})?t:(o.cache.set(i.getKey(...e),n),n)};return Object.defineProperty(this,t,Object.assign(Object.assign({},n),{value:e})),e},set(e){i=new d_,r=e,o=(0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_6__.memoize)(r)}})}(e.prototype,n,i))}),t}let l_=class{constructor(e){this._checkoutButton=e.checkoutButton}getInitializeButtonError(e){return this._checkoutButton.getInitializeError(e)}getDeinitializeButtonError(e){return this._checkoutButton.getDeinitializeError(e)}};l_=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([c_],l_);const u_=l_;let h_=class{constructor(e){this._checkoutButton=e.checkoutButton}isInitializingButton(e){return this._checkoutButton.isInitializing(e)}isDeinitializingButton(e){return this._checkoutButton.isDeinitializing(e)}};h_=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([c_],h_);const p_=h_;function m_(e){return{errors:new u_(e),statuses:new p_(e)}}let y_=class{constructor(e,t){this._store=e,this._buttonStrategyActionCreator=t,this._state=m_(this._store.getState()),this._store.subscribe(e=>{this._state=m_(e)})}getState(){return this._state}subscribe(e,...t){return this._store.subscribe(()=>e(this.getState()),e=>e.checkoutButton.getState(),...t.map(e=>t=>e(m_(t))))}initializeButton(e){const t=(n=e.containerId,/^\\w[\\w\\-\\:\\.]*$/.test(n)?[e.containerId]:function(e,t){const n=document.querySelectorAll(e);if(!n.length)throw new Ft(`Unable to find any element with the specified selector: ${e}`);return Array.prototype.slice.call(n).map(e=>(e.id||(e.id=a_(t)),e.id))}(e.containerId,`${e.methodId}-container`));var n;return Promise.all(t.map(t=>{const n=this._buttonStrategyActionCreator.initialize(Object.assign(Object.assign({},e),{containerId:t})),i=`checkoutButtonStrategy:${e.methodId}:${t}`;return this._store.dispatch(n,{queueId:i})})).then(()=>this.getState())}deinitializeButton(e){const t=this._buttonStrategyActionCreator.deinitialize(e),n=`checkoutButtonStrategy:${e.methodId}`;return this._store.dispatch(t,{queueId:n}).then(()=>this.getState())}};y_=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Cr],y_);const g_=y_;class v_{constructor(e,t,n){this._registry=e,this._registryV2=t,this._paymentMethodActionCreator=n}initialize(e){return t=>{const n={methodId:e.methodId,containerId:e.containerId};if(t.getState().checkoutButton.isInitialized(e.methodId,e.containerId))return (0,rxjs__WEBPACK_IMPORTED_MODULE_22__.empty)();const i=e.currencyCode?{params:{currencyCode:e.currencyCode}}:{},r=Object.assign(Object.assign({},i),{timeout:e.timeout,useCache:!0});return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fv.InitializeButtonRequested,void 0,n)),this._paymentMethodActionCreator.loadPaymentMethod(e.methodId,r)(t),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>this._getStrategy(e.methodId).initialize(e).then(()=>(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fv.InitializeButtonSucceeded,void 0,n)))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Fv.InitializeButtonFailed,e,n)))}}deinitialize(e){return t=>{const n={methodId:e.methodId};return t.getState().checkoutButton.isInitialized(e.methodId)?(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)((0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fv.DeinitializeButtonRequested,void 0,n)),(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.defer)(()=>this._getStrategy(e.methodId).deinitialize().then(()=>(0,_bigcommerce_data_store__WEBPACK_IMPORTED_MODULE_4__.createAction)(Fv.DeinitializeButtonSucceeded,void 0,n)))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(e=>Je(Fv.DeinitializeButtonFailed,e,n))):(0,rxjs__WEBPACK_IMPORTED_MODULE_22__.empty)()}}_getStrategy(e){let t;try{t=this._registryV2.get({id:e})}catch(n){t=this._registry.get(e)}return t}}var f_,S_,__,w_,C_;class I_{constructor(e,t,n,i){this._store=e,this._checkoutActionCreator=t,this._masterpassScriptLoader=n,this._locale=i}initialize(e){const{containerId:t,methodId:n}=e;if(!t||!n)throw new Ft('Unable to proceed because \"containerId\" argument is not provided.');return this._methodId=n,this._store.dispatch(this._checkoutActionCreator.loadDefaultCheckout()).then(e=>{const t=e.paymentMethods.getPaymentMethod(n);if(!t||!t.initializationData.checkoutId)throw new Qe(We.MissingPaymentMethod);const i={useMasterpassSrc:t.initializationData.isMasterpassSrcEnabled,language:Ms(this._locale),testMode:t.config.testMode,checkoutId:t.initializationData.checkoutId};return this._masterpassScriptLoader.load(i)}).then(e=>{this._masterpassClient=e,this._signInButton=this._createSignInButton(t)})}deinitialize(){return this._signInButton&&this._signInButton.parentNode&&(this._signInButton.removeEventListener(\"click\",this._handleWalletButtonClick),this._signInButton.parentNode.removeChild(this._signInButton),this._signInButton=void 0),Promise.resolve()}_createSignInButton(e){const t=document.getElementById(e),n=this._store.getState(),i=this._methodId?n.paymentMethods.getPaymentMethod(this._methodId):null,r=n.config.getStoreConfig();if(!t)throw new Error(\"Need a container to place the button\");if(!i)throw new Qe(We.MissingPaymentMethod);if(!r)throw new Ft(\"Unable to retrieve store configuration\");const o=document.createElement(\"input\");if(o.type=\"image\",i.initializationData.isMasterpassSrcEnabled){const e=i.config.testMode?\"sandbox.\":\"\",{checkoutId:t}=i.initializationData,n=[`locale=${Ms(this._locale)}`,\"paymentmethod=master,visa,amex,discover\",`checkoutid=${t}`];o.src=[`https://${e}src.mastercard.com/assets/img/btn/src_chk_btn_126x030px.svg`,n.join(\"&\")].join(\"?\")}else o.src=\"https://static.masterpass.com/dyn/img/btn/global/mp_chk_btn_160x037px.svg\";return t.appendChild(o),o.addEventListener(\"click\",this._handleWalletButtonClick),o}_createMasterpassPayload(){const e=this._store.getState(),t=e.checkout.getCheckout(),n=this._methodId?e.paymentMethods.getPaymentMethod(this._methodId):null;if(!t)throw new Qe(We.MissingCheckout);if(!n)throw new Qe(We.MissingPaymentMethod);return{checkoutId:n.initializationData.checkoutId,allowedCardTypes:n.initializationData.allowedCardTypes,amount:t.cart.cartAmount.toString(),currency:t.cart.currency.code,cartId:t.cart.id,callbackUrl:Ts(\"cart\")}}_handleWalletButtonClick(){if(!this._masterpassClient)throw new Cs(fs.CheckoutButtonNotInitialized);this._masterpassClient.checkout(this._createMasterpassPayload())}}(function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);o>3&&a&&Object.defineProperty(t,n,a)})([Cr],I_.prototype,\"_handleWalletButtonClick\",null),function(e){e.HORIZONTAL=\"horizontal\",e.VERTICAL=\"vertical\"}(f_||(f_={})),function(e){e.SMALL=\"small\",e.MEDIUM=\"medium\",e.LARGE=\"large\",e.RESPONSIVE=\"responsive\"}(S_||(S_={})),function(e){e.GOLD=\"gold\",e.BLUE=\"blue\",e.SIlVER=\"silver\",e.BLACK=\"black\",e.WHITE=\"white\"}(__||(__={})),function(e){e.CHECKOUT=\"checkout\",e.PAY=\"pay\",e.BUYNOW=\"buynow\",e.PAYPAL=\"paypal\",e.CREDIT=\"credit\"}(w_||(w_={})),function(e){e.PILL=\"pill\",e.RECT=\"rect\"}(C_||(C_={}));class b_{constructor(e,t,n,i,r=\"\"){this._store=e,this._checkoutActionCreator=t,this._paypalScriptLoader=n,this._formPoster=i,this._host=r}initialize(e){const t=e.paypal,n=this._store.getState(),i=this._paymentMethod=n.paymentMethods.getPaymentMethod(e.methodId);if(!t)throw new Ft;if(!i)throw new Qe(We.MissingPaymentMethod);return this._paypalScriptLoader.loadPaypal(i.config.merchantId).then(n=>{var r,o;if(!i||!i.config.merchantId)throw new Qe(We.MissingPaymentMethod);const a=i.config.merchantId,s=i.config.testMode?\"sandbox\":\"production\",d={[s]:t.clientId},c=n.FUNDING.CREDIT||\"credit\",l=t.allowCredit?[c]:[],u=t.allowCredit?[]:[c];return n.Button.render({env:s,client:d,commit:t.shouldProcessPayment,funding:{allowed:l,disallowed:u},style:Object.assign(Object.assign({shape:C_.RECT},(0,lodash__WEBPACK_IMPORTED_MODULE_5__.pick)(t.style,\"layout\",\"color\",\"label\",\"shape\",\"tagline\",\"fundingicons\")),{size:\"paypalexpress\"===i.id&&\"small\"===(null===(r=t.style)||void 0===r?void 0:r.size)?S_.RESPONSIVE:null===(o=t.style)||void 0===o?void 0:o.size}),payment:(e,n)=>this._setupPayment(a,n,t.onPaymentError),onAuthorize:(e,n)=>this._tokenizePayment(e,n,t.shouldProcessPayment,t.onAuthorizeError)},e.containerId)})}deinitialize(){return this._paymentMethod=void 0,Promise.resolve()}_setupPayment(e,t,n){if(!t)throw new Cs(fs.CheckoutButtonNotInitialized);return this._store.dispatch(this._checkoutActionCreator.loadDefaultCheckout()).then(n=>{const i=n.cart.getCart(),r=i?i.id:\"\";return t.request.post(`${this._host}/api/storefront/payment/paypalexpress`,{merchantId:e,cartId:r},{headers:Object.assign({\"X-API-INTERNAL\":Ct},rt)})}).then(e=>e.id).catch(e=>{throw n&&n(e),e})}_tokenizePayment(e,t,n,i){if(!this._paymentMethod)throw new Cs(fs.CheckoutButtonNotInitialized);if(!t)throw new Cs(fs.CheckoutButtonNotInitialized);if(!e.paymentID||!e.payerID)throw new Qe(We.MissingPayment);const r=this._paymentMethod.id;return t.payment.get(e.paymentID).then(t=>{this._formPoster.postForm(\"/checkout.php\",{payment_type:\"paypal\",provider:r,action:n?\"process_payment\":\"set_external_checkout\",paymentId:e.paymentID,payerId:e.payerID,payerInfo:JSON.stringify(t.payer.payer_info)})})}}class P_ extends Bt{constructor(e){super(e||\"An unexpected error has occurred during config creation process. Please try again later.\"),this.name=\"AmazonPayV2ConfigCreationError\",this.type=\"amazon_pay_v2_config_creation_error\"}}function O_(e){return e instanceof Object&&\"buyNowInitializeOptions\"in e}var E_=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class A_{constructor(e,t,n){this.paymentIntegrationService=e,this.amazonPayV2PaymentProcessor=t,this.amazonPayV2ConfigRequestSender=n}initialize(e){var t;return E_(this,void 0,void 0,function*(){const{methodId:n,containerId:i,amazonpay:r}=e,{buttonColor:o}=r||{};if(!n||!i)throw new rn('Unable to proceed because \"methodId\" or \"containerId\" argument is not provided.');const{getPaymentMethodOrThrow:a}=this.paymentIntegrationService.getState(),s=a(n),{initializationData:d}=s;yield this.amazonPayV2PaymentProcessor.initialize(s),r||(yield this.paymentIntegrationService.loadDefaultCheckout());const c=O_(r)?void 0:r;O_(r)&&\"function\"==typeof(null===(t=r.buyNowInitializeOptions)||void 0===t?void 0:t.getBuyNowCartRequestBody)&&(this._buyNowInitializeOptions=r.buyNowInitializeOptions,this.amazonPayV2PaymentProcessor.updateBuyNowFlowFlag(!0)),this.amazonPayV2PaymentProcessor.renderAmazonPayButton({checkoutState:this.paymentIntegrationService.getState(),containerId:i,methodId:n,options:c,placement:$t.Cart,buttonColor:o,isButtonMicroTextDisabled:null==d?void 0:d.isButtonMicroTextDisabled}),this._buyNowInitializeOptions&&this.amazonPayV2PaymentProcessor.prepareCheckoutWithCreationRequestConfig(this._getCheckoutCreationRequestConfig.bind(this))})}deinitialize(){return this.amazonPayV2PaymentProcessor.deinitialize()}_createBuyNowCartOrThrow(){var e,t;return E_(this,void 0,void 0,function*(){const n=null===(t=null===(e=this._buyNowInitializeOptions)||void 0===e?void 0:e.getBuyNowCartRequestBody)||void 0===t?void 0:t.call(e);if(!n)throw new jt(kt.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(n)}catch(e){throw new jn}})}_createCheckoutConfig(e){return E_(this,void 0,void 0,function*(){try{const t=(yield this.amazonPayV2ConfigRequestSender.createCheckoutConfig(e)).body,{payload:n,public_key:i}=t,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,[\"payload\",\"public_key\"]);return Object.assign({payloadJSON:n,publicKeyId:i},r)}catch(e){throw new P_}})}_getCheckoutCreationRequestConfig(){return E_(this,void 0,void 0,function*(){const e=yield this._createBuyNowCartOrThrow(),t={amount:String(e.baseAmount),currencyCode:e.currency.code};return{createCheckoutSessionConfig:yield this._createCheckoutConfig(e.id),estimatedOrderAmount:t,productType:0===Ut(e)?Yt.PayOnly:Yt.PayAndShip}})}}class k_{constructor(e){this._requestSender=e}createCheckoutConfig(e){const t={cartId:e},n=Object.assign({\"X-API-INTERNAL\":Xn,\"Content-Type\":ti.Json},ni);return this._requestSender.post(\"/api/storefront/payment/amazonpay\",{headers:n,body:t})}}const T_=nn(e=>{const t=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),i=new k_(t),r=tn();return new A_(e,r,i)},[{id:\"amazonpay\"}]);var D_,M_,z_=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};!function(e){e.Subtotal=\"Subtotal\",e.Shipping=\"Shipping\"}(D_||(D_={})),function(e){e.Black=\"black\",e.White=\"white\",e.WhiteBorder=\"white-border\"}(M_||(M_={}));class N_{constructor(e,t,n,i,r){this._requestSender=e,this._paymentIntegrationService=t,this._sessionFactory=n,this._braintreeSdk=i,this._applePayScriptLoader=r,this._onAuthorizeCallback=lodash__WEBPACK_IMPORTED_MODULE_5__.noop,this._subTotalLabel=D_.Subtotal,this._shippingLabel=D_.Shipping}initialize(e){var t,n;return z_(this,void 0,void 0,function*(){const{methodId:i,containerId:r,applepay:o}=e;if(!i||!o)throw new jt(kt.MissingPaymentMethod);yield this._applePayScriptLoader.loadSdk();const{onPaymentAuthorize:a,buyNowInitializeOptions:s,requiresShipping:d}=o;this._requiresShipping=d,this._buyNowInitializeOptions=s,this._onAuthorizeCallback=a,s||(yield this._paymentIntegrationService.loadDefaultCheckout()),yield this._paymentIntegrationService.loadPaymentMethod(i);const c=this._paymentIntegrationService.getState();return this._paymentMethod=c.getPaymentMethodOrThrow(i),c.getCart()&&(yield this._paymentIntegrationService.verifyCheckoutSpamProtection()),(null===(t=this._paymentMethod.initializationData)||void 0===t?void 0:t.gateway)===kn.BRAINTREE&&(yield this._initializeBraintreeSdk()),this._applePayButton=this._createButton(r,null===(n=this._paymentMethod.initializationData)||void 0===n?void 0:n.styleOption),this._applePayButton.addEventListener(\"click\",this._handleWalletButtonClick.bind(this)),Promise.resolve()})}deinitialize(){return Promise.resolve()}_createButton(e,t){const n=document.getElementById(e);if(!n)throw new rn(\"Unable to create wallet button without valid container ID.\");const i=this._createApplePayButtonElement(t);return n.appendChild(i),i}_createApplePayButtonElement(e){const t=document.createElement(\"apple-pay-button\");return t.setAttribute(\"buttonstyle\",(e=>{switch(e){case M_.White:return\"white\";case M_.WhiteBorder:return\"white-outline\";case M_.Black:default:return\"black\"}})(e)),t.setAttribute(\"type\",\"plain\"),t.setAttribute(\"style\",\"--apple-pay-button-width: 100%; --apple-pay-button-height: 40px; --apple-pay-button-border-radius: 4px;\"),t}_handleWalletButtonClick(e){var t;return z_(this,void 0,void 0,function*(){if(e.preventDefault(),!this._paymentMethod||!this._paymentMethod.initializationData)throw new jt(kt.MissingPaymentMethod);if(this._buyNowInitializeOptions&&\"function\"==typeof this._buyNowInitializeOptions.getBuyNowCartRequestBody){const{countryCode:e,currencyCode:n,merchantCapabilities:i,supportedNetworks:r,storeName:o}=this._paymentMethod.initializationData,a=this._getRequestWithEmptyTotal(e,n,r,i);this._requiresShipping&&(null===(t=a.requiredShippingContactFields)||void 0===t||t.push(\"postalAddress\"));const s=this._sessionFactory.create(a);this._handleApplePayEvents(s,this._paymentMethod,o),s.begin()}else{const e=this._paymentIntegrationService.getState(),t=e.getCartOrThrow(),n=e.getStoreConfigOrThrow(),i=e.getCheckoutOrThrow(),r=this._getBaseRequest(t,i,n,this._paymentMethod),o=this._sessionFactory.create(r);this._handleApplePayEvents(o,this._paymentMethod,n.storeProfile.storeName),o.begin()}})}_getRequestWithEmptyTotal(e,t,n,i){return{countryCode:e,currencyCode:t,supportedNetworks:n,merchantCapabilities:i,total:{label:\"\",amount:\"0\",type:\"pending\"},requiredBillingContactFields:[\"postalAddress\"],requiredShippingContactFields:[\"email\",\"phone\"]}}_getBaseRequest(e,t,n,i){var r;const{storeProfile:{storeCountryCode:o,storeName:a}}=n,{currency:{code:s,decimalPlaces:d}}=e,{initializationData:{merchantCapabilities:c,supportedNetworks:l}}=i,u=e.lineItems.physicalItems.length>0,h={requiredBillingContactFields:[\"postalAddress\"],requiredShippingContactFields:[\"email\",\"phone\"],countryCode:o,currencyCode:s,merchantCapabilities:c,supportedNetworks:l,lineItems:[],total:u?{label:a,amount:`${t.grandTotal.toFixed(d)}`,type:\"pending\"}:{label:a,amount:`${t.grandTotal.toFixed(d)}`,type:\"final\"}};if(u)null===(r=h.requiredShippingContactFields)||void 0===r||r.push(\"postalAddress\");else{const e=[{label:this._subTotalLabel,amount:`${t.subtotal.toFixed(d)}`}];t.taxes.forEach(t=>e.push({label:t.name,amount:`${t.amount.toFixed(d)}`})),h.lineItems=e}return h}_handleApplePayEvents(e,t,n){e.onvalidatemerchant=n=>z_(this,void 0,void 0,function*(){try{const{body:i}=yield this._onValidateMerchant(t,n);e.completeMerchantValidation(i)}catch(e){throw new Error(\"Merchant validation failed\")}}),this._buyNowInitializeOptions&&!this._requiresShipping&&(e.onpaymentmethodselected=()=>z_(this,void 0,void 0,function*(){yield this._createBuyNowCart(),this._handlePaymentMethodSelected(e)})),e.onshippingcontactselected=t=>z_(this,void 0,void 0,function*(){this._buyNowInitializeOptions&&this._requiresShipping&&(yield this._createBuyNowCart()),yield this._handleShippingContactSelected(e,n,t)}),e.onshippingmethodselected=t=>z_(this,void 0,void 0,function*(){yield this._handleShippingMethodSelected(e,n,t)}),e.oncancel=()=>z_(this,void 0,void 0,function*(){try{const e=`/remote-checkout/${t.id}/signout`;return yield this._requestSender.get(e),yield this._paymentIntegrationService.loadCheckout()}catch(e){throw new Mn}}),e.onpaymentauthorized=n=>z_(this,void 0,void 0,function*(){return this._onPaymentAuthorized(n,e,t)})}_createBuyNowCart(){var e,t;return z_(this,void 0,void 0,function*(){try{const n=null===(t=null===(e=this._buyNowInitializeOptions)||void 0===e?void 0:e.getBuyNowCartRequestBody)||void 0===t?void 0:t.call(e);if(!n)throw new jt(kt.MissingCart);const i=yield this._paymentIntegrationService.createBuyNowCart(n);yield this._paymentIntegrationService.loadCheckout(i.id);const r=this._paymentIntegrationService.getState(),{shouldExecuteSpamCheck:o}=r.getCheckoutOrThrow();o&&(yield this._paymentIntegrationService.verifyCheckoutSpamProtection())}catch(e){throw new jn}})}_handlePaymentMethodSelected(e){const t=this._paymentIntegrationService.getState(),n=t.getCartOrThrow(),i=t.getStoreConfigOrThrow(),r=t.getCheckoutOrThrow();if(!this._paymentMethod||!this._paymentMethod.initializationData)throw new jt(kt.MissingPaymentMethod);const o=this._getBaseRequest(n,r,i,this._paymentMethod);delete o.total.type,e.completePaymentMethodSelection({newTotal:o.total,newLineItems:o.lineItems})}_handleShippingContactSelected(e,t,n){var i;return z_(this,void 0,void 0,function*(){const r=this._transformContactToAddress(n.shippingContact);try{yield this._paymentIntegrationService.updateShippingAddress(r)}catch(t){throw e.abort(),new Error(\"Shipping address update failed\")}let o=this._paymentIntegrationService.getState();const{currency:{decimalPlaces:a}}=o.getCartOrThrow();let s=o.getCheckoutOrThrow();const d=null===(i=s.consignments[0].selectedShippingOption)||void 0===i?void 0:i.id,c=s.consignments[0].availableShippingOptions,l=null==c?void 0:c.find(({id:e})=>e===d),u=null==c?void 0:c.filter(e=>e.id!==d),h=l?[{label:l.description,amount:`${l.cost.toFixed(a)}`,detail:l.additionalDescription,identifier:l.id}]:[];if(u&&[...u.filter(e=>e.isRecommended),...u.filter(e=>!e.isRecommended)].forEach(e=>h.push({label:e.description,amount:`${e.cost.toFixed(a)}`,detail:e.additionalDescription,identifier:e.id})),!(c instanceof Array))throw new Error(\"Shipping options not available.\");if(0===c.length)return void e.completeShippingContactSelection(ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS,[],{type:\"pending\",label:t,amount:`${s.grandTotal.toFixed(a)}`},[]);const p=c.find(e=>e.isRecommended),m=p?p.id:c[0].id,y=l?l.id:m;try{yield this._updateShippingOption(y)}catch(e){throw new Error(\"Shipping options update failed\")}o=this._paymentIntegrationService.getState(),s=o.getCheckoutOrThrow(),e.completeShippingContactSelection({newShippingMethods:h,newTotal:{type:\"final\",label:t,amount:`${s.grandTotal.toFixed(a)}`},newLineItems:this._getUpdatedLineItems(s,a)})})}_handleShippingMethodSelected(e,t,n){return z_(this,void 0,void 0,function*(){const{shippingMethod:{identifier:i}}=n;try{yield this._updateShippingOption(i)}catch(t){throw e.abort(),new Error(\"Shipping option selection update failed.\")}const r=this._paymentIntegrationService.getState(),{currency:{decimalPlaces:o}}=r.getCartOrThrow(),a=r.getCheckoutOrThrow();e.completeShippingMethodSelection({newTotal:{type:\"final\",label:t,amount:`${a.grandTotal.toFixed(o)}`},newLineItems:this._getUpdatedLineItems(a,o)})})}_getUpdatedLineItems(e,t){const n=[{label:this._subTotalLabel,amount:`${e.subtotal.toFixed(t)}`}];return e.taxes.forEach(e=>n.push({label:e.name,amount:`${e.amount.toFixed(t)}`})),n.push({label:this._shippingLabel,amount:`${e.shippingCostTotal.toFixed(t)}`}),n}_updateShippingOption(e){return z_(this,void 0,void 0,function*(){return this._paymentIntegrationService.selectShippingOption(e)})}_onValidateMerchant(e,t){return z_(this,void 0,void 0,function*(){const n=[`validationUrl=${t.validationURL}`,`merchantIdentifier=${e.initializationData.merchantId}`,`displayName=${e.initializationData.storeName}`,`domainName=${window.location.hostname}`].join(\"&\");return this._requestSender.post(`${e.initializationData.paymentsUrl}/api/public/v1/payments/applepay/validate_merchant`,{credentials:!1,headers:{Accept:\"application/json\",\"Content-Type\":\"application/x-www-form-urlencoded\",\"X-XSRF-TOKEN\":null},body:n})})}_onPaymentAuthorized(e,t,n){var i;return z_(this,void 0,void 0,function*(){const{token:r,billingContact:o,shippingContact:a}=e.payment,s=this._paymentIntegrationService.getState().getCartOrThrow().lineItems.physicalItems.length>0;let d;(null===(i=n.initializationData)||void 0===i?void 0:i.gateway)===kn.BRAINTREE&&(d=yield this._getBraintreeDeviceData());const c={methodId:n.id,paymentData:{deviceSessionId:d,formattedPayload:{apple_pay_token:{payment_data:r.paymentData,payment_method:r.paymentMethod,transaction_id:r.transactionIdentifier}}}},l=this._transformContactToAddress(o),u=this._transformContactToAddress(a),h=null==a?void 0:a.emailAddress,p=(null==a?void 0:a.phoneNumber)||\"\";try{return yield this._paymentIntegrationService.updateBillingAddress(Object.assign(Object.assign({},l),{email:h,phone:p})),s&&(yield this._paymentIntegrationService.updateShippingAddress(u)),yield this._paymentIntegrationService.submitOrder({useStoreCredit:!1}),yield this._paymentIntegrationService.submitPayment(c),t.completePayment(ApplePaySession.STATUS_SUCCESS),this._onAuthorizeCallback()}catch(e){throw t.completePayment(ApplePaySession.STATUS_FAILURE),new Error(\"Payment cannot complete\")}})}_transformContactToAddress(e){return{firstName:(null==e?void 0:e.givenName)||\"\",lastName:(null==e?void 0:e.familyName)||\"\",city:(null==e?void 0:e.locality)||\"\",company:\"\",address1:(null==e?void 0:e.addressLines)&&e.addressLines[0]||\"\",address2:(null==e?void 0:e.addressLines)&&e.addressLines[1]||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",phone:(null==e?void 0:e.phoneNumber)||\"\",stateOrProvince:(null==e?void 0:e.administrativeArea)||\"\",stateOrProvinceCode:(null==e?void 0:e.administrativeArea)||\"\",customFields:[]}}_getBraintreeDeviceData(){return z_(this,void 0,void 0,function*(){try{const{deviceData:e}=yield this._braintreeSdk.getDataCollectorOrThrow();return e}catch(e){}})}_initializeBraintreeSdk(){return z_(this,void 0,void 0,function*(){yield this._paymentIntegrationService.loadPaymentMethod(kn.BRAINTREE);const e=this._paymentIntegrationService.getState().getPaymentMethod(kn.BRAINTREE);e&&e.clientToken&&e.initializationData&&this._braintreeSdk.initialize(e.clientToken)})}}const x_=nn(e=>{const{getHost:t}=e.getState(),i=new pn(e);return new N_((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()}),e,new Rn,new En(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),window,i)),new Ln(new _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.ScriptLoader))},[{id:\"applepay\"}]);var F_=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class R_{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){var t;return F_(this,void 0,void 0,function*(){const{bigcommerce_payments:n,containerId:i,methodId:r}=e,o=Boolean(null==n?void 0:n.buyNowInitializeOptions);if(!r)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!n)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments\" argument is not provided.');if(o&&!n.currencyCode)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments.currencyCode\" argument is not provided.');if(o&&\"function\"!=typeof(null===(t=n.buyNowInitializeOptions)||void 0===t?void 0:t.getBuyNowCartRequestBody))throw new rn('Unable to initialize payment because \"options.bigcommerce_payments.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');o||(yield this.paymentIntegrationService.loadDefaultCheckout());const a=o?n.currencyCode:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(r,a,!1),this.renderButton(i,r,n)})}deinitialize(){return Promise.resolve()}renderButton(e,t,n){const{buyNowInitializeOptions:i,style:r,onComplete:o,onEligibilityFailure:a}=n,s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:c}=d.initializationData||{},l={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},u={onClick:()=>this.handleClick(i),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},h={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(e,n)=>this.onHostedCheckoutApprove(e,n,t,o)},p=Object.assign(Object.assign(Object.assign({fundingSource:s.FUNDING.PAYPAL,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r)},l),i&&u),c&&h),m=s.Buttons(p);m.isEligible()?m.render(`#${e}`):a&&\"function\"==typeof a?a():this.bigCommercePaymentsIntegrationService.removeElement(e)}handleClick(e){return F_(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,n,i){return F_(this,void 0,void 0,function*(){if(!e.orderID)throw new jt(kt.MissingOrderId);const r=this.paymentIntegrationService.getState().getCartOrThrow(),o=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(o);if(yield this.paymentIntegrationService.updateBillingAddress(t),r.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(o);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:n}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(n,e.orderID),i&&\"function\"==typeof i&&i(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return F_(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return F_(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}}const L_=nn(e=>new R_(e,si(e)),[{id:\"bigcommerce_payments\"}]);var B_=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class j_{constructor(e,t,n){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.payPalSdkHelper=n}initialize(e){return B_(this,void 0,void 0,function*(){const{bigcommerce_payments_paylater:t,containerId:n,methodId:i}=e,{buyNowInitializeOptions:r,currencyCode:o,messagingContainerId:a}=t||{},s=!!r;if(!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_paylater\" argument is not provided.');if(s&&!o)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_paylater.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==r?void 0:r.getBuyNowCartRequestBody))throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_paylater.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=this.paymentIntegrationService.getState(),c=s?o:d.getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i,c,!1),this.renderButton(n,i,t);const l=a&&document.getElementById(a);if(c&&l){const e=d.getPaymentMethodOrThrow(i),{paypalBNPLConfiguration:t=[]}=e.initializationData||{},n=t&&t.find(({id:e})=>\"cart\"===e);if(!(null==n?void 0:n.status))return;l.removeAttribute(\"data-pp-style-logo-type\"),l.removeAttribute(\"data-pp-style-logo-position\"),l.removeAttribute(\"data-pp-style-text-color\"),l.removeAttribute(\"data-pp-style-text-size\");const r=yield this.payPalSdkHelper.getPayPalMessages(e,c);this.renderMessages(r,a,n)}})}deinitialize(){return Promise.resolve()}renderButton(e,t,n){const{buyNowInitializeOptions:i,style:r,onComplete:o,onEligibilityFailure:a}=n,s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:c}=d.initializationData||{},l={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_paylater\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},u={onClick:()=>this.handleClick(i),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},h={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(e,n)=>this.onHostedCheckoutApprove(e,n,t,o)},p=[s.FUNDING.PAYLATER,s.FUNDING.CREDIT];let m=!1;p.forEach(t=>{if(!m){const n=Object.assign(Object.assign(Object.assign({fundingSource:t,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r)},l),i&&u),c&&h),o=s.Buttons(n);o.isEligible()?(o.render(`#${e}`),m=!0):a&&\"function\"==typeof a&&a()}}),m||this.bigCommercePaymentsIntegrationService.removeElement(e)}handleClick(e){return B_(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,n,i){return B_(this,void 0,void 0,function*(){if(!e.orderID)throw new jt(kt.MissingOrderId);const r=this.paymentIntegrationService.getState().getCartOrThrow(),o=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(o);if(yield this.paymentIntegrationService.updateBillingAddress(t),r.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(o);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:n}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(n,e.orderID),i&&\"function\"==typeof i&&i(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return B_(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return B_(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}renderMessages(e,t,n){const i={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"cart\",style:ic(n)};e.Messages(i).render(`#${t}`)}}const U_=nn(e=>new j_(e,si(e),Ci()),[{id:\"bigcommerce_payments_paylater\"}]);var q_=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class V_{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){return q_(this,void 0,void 0,function*(){const{bigcommerce_payments_apms:t,containerId:n,methodId:i}=e,{apm:r,buyNowInitializeOptions:o,currencyCode:a}=t||{},s=!!o;if(!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_apms\" argument is not provided.');if(!r)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_apms.apm\" argument is not provided.');if(s&&!a)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_apms.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_apms.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=s?a:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i,d,!1),this.renderButton(n,i,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,n){const{apm:i,buyNowInitializeOptions:r,style:o,onEligibilityFailure:a}=n,s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow();if(!Object.values(s.FUNDING).includes(i))throw new rn('Unable to initialize PayPal button because \"options.bigcommerce_payments_apms.apm\" argument is not valid funding source.');const d={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apms\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},c={onClick:()=>this.handleClick(r),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},l=Object.assign(Object.assign({fundingSource:i,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(o)},d),r&&c),u=s.Buttons(l);u.isEligible()?u.render(`#${e}`):a&&\"function\"==typeof a?a():this.bigCommercePaymentsIntegrationService.removeElement(e)}handleClick(e){return q_(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const G_=nn(e=>new V_(e,si(e)),[{id:\"bigcommerce_payments_apms\"}]);var H_=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class $_{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){return H_(this,void 0,void 0,function*(){const{bigcommerce_payments_venmo:t,containerId:n,methodId:i}=e,{buyNowInitializeOptions:r,currencyCode:o}=t||{},a=!!r;if(!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_venmo\" argument is not provided.');if(a&&!o)throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_venmo.currencyCode\" argument is not provided.');if(a&&\"function\"!=typeof(null==r?void 0:r.getBuyNowCartRequestBody))throw new rn('Unable to initialize payment because \"options.bigcommerce_payments_venmo.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');a||(yield this.paymentIntegrationService.loadDefaultCheckout());const s=a?o:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i,s,!1),this.renderButton(n,i,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,n){const{buyNowInitializeOptions:i,style:r,onEligibilityFailure:o}=n,a=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),s=a.FUNDING.VENMO,d={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_venmo\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},c={onClick:()=>this.handleClick(i),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},l=Object.assign(Object.assign({fundingSource:s,style:this.getValidVenmoButtonStyles(r)},d),i&&c),u=a.Buttons(l);u.isEligible()?u.render(`#${e}`):o&&\"function\"==typeof o?o():this.bigCommercePaymentsIntegrationService.removeElement(e)}getValidVenmoButtonStyles(e){const t=this.bigCommercePaymentsIntegrationService.getValidButtonStyle(e);return t.color===Wn.gold?Object.assign(Object.assign({},t),{color:void 0}):t}handleClick(e){return H_(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const W_=nn(e=>new $_(e,si(e)),[{id:\"bigcommerce_payments_venmo\"}]);class Y_{constructor(e,t,n=window){this.paymentIntegrationService=e,this.boltScriptLoader=t,this.boltHostWindow=n}initialize(e){return t=this,n=void 0,r=function*(){const{bolt:t,containerId:n,methodId:i}=e,{buyNowInitializeOptions:r,style:o}=t||{};if(!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.bolt\" argument is not provided.');if(!Boolean(r))throw new on(\"Only buy now flow is implemented for Bolt button\");if(!(null==r?void 0:r.storefrontApiToken)||\"string\"!=typeof r.storefrontApiToken)throw new rn('Unable to initialize payment because \"options.storefrontApiToken\" argument is not provided.');const a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i),{initializationData:s,config:d}=a,{publishableKey:c,developerConfig:l}=s||{};yield this.boltScriptLoader.loadBoltClient(c,d.testMode,l,\"BigCommerce\",r.storefrontApiToken),this.renderButton(n,a,o)},new((i=void 0)||(i=Promise))(function(e,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((r=r.apply(t,n||[])).next())});// removed by dead control flow\n{ var t, n, i, r; }}deinitialize(){return Promise.resolve()}renderButton(e,t,n){var i;\"function\"==typeof(null===(i=this.boltHostWindow.BoltConnect)||void 0===i?void 0:i.setupProductPageCheckout)&&(this.addButtonContainer(e,t,n),this.boltHostWindow.BoltConnect.setupProductPageCheckout())}addButtonContainer(e,t,n){const i=document.getElementById(e);if(!i)return;const r=document.createElement(\"div\"),o=document.createElement(\"object\");r.setAttribute(\"id\",\"product-page-checkout-wrapper\"),r.setAttribute(\"class\",\"bolt-button-wrapper\"),r.setAttribute(\"style\",\"display:none\"),r.setAttribute(\"data-tid\",\"product-page-checkout-wrapper\"),o.setAttribute(\"data\",this.getBoltObjectData(t,n)),o.setAttribute(\"class\",\"bolt-product-checkout-button\"),r.append(o),i.innerHTML=\"\",i.append(r)}getBoltObjectData(e,t){const{initializationData:n,config:i}=e,{publishableKey:r,developerConfig:o}=n||{},a=this.boltScriptLoader.getDomainURL(!!i.testMode,o),s=this.getButtonHeight(null==t?void 0:t.size),d=this.getButtonBorderRadius(null==t?void 0:t.shape,s);return (0,query_string__WEBPACK_IMPORTED_MODULE_12__.stringifyUrl)({url:`https://${a}/v1/checkout_button`,query:{publishable_key:r,variant:\"ppc\",height:s,border_radius:d}})}getButtonHeight(e){if(e)switch(e){case Ui.Small:return 25;case Ui.Large:return 45;case Ui.Medium:default:return 40}}getButtonBorderRadius(e,t){if(e)switch(e){case qi.Pill:return t?Math.round(t/2):void 0;case qi.Rect:default:return 4}}}const K_=nn(e=>new Y_(e,new $i((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),[{id:\"bolt\"}]);function J_(e){const{color:t,fundingicons:n,height:i=40,layout:r,shape:o,size:a,tagline:s}=e||{},d={color:t,fundingicons:n,height:Z_(i),layout:r,shape:o||\"rect\",size:a,tagline:s};return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.omitBy)(d,lodash__WEBPACK_IMPORTED_MODULE_5__.isNil)}function Z_(e){const t=Number(e);return!t||Number.isNaN(t)?40:t>55?55:t<25?25:t}var Q_=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class X_{constructor(e,t,n,i){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeIntegrationService=n,this.braintreeHostWindow=i}initialize(e){return Q_(this,void 0,void 0,function*(){const{braintreepaypal:t,containerId:n,methodId:i}=e;if(!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.braintreepaypal\" argument is not provided.');let r,o=this.paymentIntegrationService.getState();if(t.buyNowInitializeOptions){if(!t.currencyCode)throw new rn('Unable to initialize payment because \"options.braintreepaypalcredit.currencyCode\" argument is not provided.');r=t.currencyCode}else yield this.paymentIntegrationService.loadDefaultCheckout(),o=this.paymentIntegrationService.getState(),r=o.getCartOrThrow().currency.code;const a=o.getPaymentMethodOrThrow(i),{clientToken:s,config:d,initializationData:c}=a;if(!s||!c)throw new jt(kt.MissingPaymentMethod);const l={currency:r,intent:c.intent,isCreditEnabled:c.isCreditEnabled};this.braintreeIntegrationService.initialize(s),yield this.braintreeIntegrationService.getPaypalCheckout(l,e=>{this.renderPayPalButton(e,t,n,i,!!d.testMode)},e=>this.handleError(e,n,t.onError))})}deinitialize(){return Q_(this,void 0,void 0,function*(){yield this.braintreeIntegrationService.teardown()})}renderPayPalButton(e,t,n,i,r){const{style:o,shouldProcessPayment:a,onAuthorizeError:s,onEligibilityFailure:d}=t,{paypal:c}=this.braintreeHostWindow;if(c){const l=c.Buttons({env:r?\"sandbox\":\"production\",fundingSource:c.FUNDING.PAYPAL,style:J_(o),createOrder:()=>this.setupPayment(e,t,i),onApprove:t=>this.tokenizePayment(t,e,i,a,s)});l.isEligible()?l.render(`#${n}`):d&&\"function\"==typeof d&&d()}else this.braintreeIntegrationService.removeElement(n)}setupPayment(e,t,n){var i;return Q_(this,void 0,void 0,function*(){const{onPaymentError:r,shippingAddress:o,buyNowInitializeOptions:a}=t;try{const r=\"function\"==typeof(null==a?void 0:a.getBuyNowCartRequestBody)?yield this.createBuyNowCart(a.getBuyNowCartRequestBody()):void 0;this.buyNowCartId=null==r?void 0:r.id;const s=this.paymentIntegrationService.getState(),d=s.getCustomer(),c=s.getPaymentMethodOrThrow(n),l=r?r.cartAmount:s.getCartOrThrow().cartAmount,u=r?t.currencyCode:s.getCartOrThrow().currency.code,h=o||(null==d?void 0:d.addresses[0]),p=h?ll(h):void 0;return yield e.createPayment({flow:\"checkout\",enableShippingAddress:!0,shippingAddressEditable:!1,shippingAddressOverride:p,amount:l,currency:u,offerCredit:!1,intent:null===(i=c.initializationData)||void 0===i?void 0:i.intent})}catch(e){throw r&&(Cn(e)||e instanceof Bt)&&r(e),e}})}tokenizePayment(e,t,n,i,r){return Q_(this,void 0,void 0,function*(){try{const{deviceData:r}=yield this.braintreeIntegrationService.getDataCollector({paypal:!0}),o=yield t.tokenizePayment(e),{details:a,nonce:s}=o,d=this.braintreeIntegrationService.mapToLegacyBillingAddress(a),c=this.braintreeIntegrationService.mapToLegacyShippingAddress(a);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",provider:n,action:i?\"process_payment\":\"set_external_checkout\",nonce:s,device_data:r,billing_address:JSON.stringify(d),shipping_address:JSON.stringify(c)},this.buyNowCartId&&{cart_id:this.buyNowCartId})),o}catch(e){throw r&&(Cn(e)||e instanceof Bt)&&r(e),e}})}createBuyNowCart(e){return Q_(this,void 0,void 0,function*(){if(!e)throw new jt(kt.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(e)}catch(e){throw new jn}})}handleError(e,t,n){if(this.braintreeIntegrationService.removeElement(t),!n||!Cn(e))throw e;n(e)}}const ew=nn(e=>{const t=window,n=new pn(e),i=new or(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),t,n),t);return new X_(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)(),i,t)},[{id:\"braintreepaypal\"}]);var tw=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class nw{constructor(e,t,n,i,r){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeIntegrationService=n,this.braintreeMessages=i,this.braintreeHostWindow=r}initialize(e){var t,n;return tw(this,void 0,void 0,function*(){const{braintreepaypalcredit:i,containerId:r,methodId:o}=e;if(!o)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!r)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!i)throw new rn('Unable to initialize payment because \"options.braintreepaypalcredit\" argument is not provided.');let a,s=this.paymentIntegrationService.getState();if(i.buyNowInitializeOptions){if(!i.currencyCode)throw new rn('Unable to initialize payment because \"options.braintreepaypalcredit.currencyCode\" argument is not provided.');a=i.currencyCode}else yield this.paymentIntegrationService.loadDefaultCheckout(),s=this.paymentIntegrationService.getState(),a=s.getCartOrThrow().currency.code;const d=s.getPaymentMethodOrThrow(o),{clientToken:c,config:l,initializationData:u}=d;if(!c||!u)throw new jt(kt.MissingPaymentMethod);const h={currency:a,intent:u.intent,isCreditEnabled:u.isCreditEnabled},p=cn(null!==(n=null===(t=s.getStoreConfig())||void 0===t?void 0:t.checkoutSettings.features)&&void 0!==n?n:{},\"PAYPAL-5663.hide_braintree_card_banner_implementation_in_checkout_sdk\");this.braintreeIntegrationService.initialize(c),yield this.braintreeIntegrationService.getPaypalCheckout(h,e=>{!p&&i.messagingContainerId&&this.renderPayPalMessages(o,i.messagingContainerId),this.renderPayPalButton(e,i,r,o,!!l.testMode)},e=>this.handleError(e,r,i.onError))})}deinitialize(){return tw(this,void 0,void 0,function*(){yield this.braintreeIntegrationService.teardown()})}renderPayPalMessages(e,t){this.braintreeMessages.render(e,t,ir.CART)}renderPayPalButton(e,t,n,i,r){const{style:o,shouldProcessPayment:a,onAuthorizeError:s,onEligibilityFailure:d}=t,{paypal:c}=this.braintreeHostWindow;let l=!1;c&&[c.FUNDING.PAYLATER,c.FUNDING.CREDIT].forEach(u=>{const h=u===c.FUNDING.CREDIT?Object.assign({label:tr.CREDIT},J_(o)):J_(o);if(!l){const o=c.Buttons({env:r?\"sandbox\":\"production\",fundingSource:u,style:h,createOrder:()=>this.setupPayment(e,t,i),onApprove:t=>this.tokenizePayment(t,e,i,a,s)});o.isEligible()?(o.render(`#${n}`),l=!0):c.FUNDING.CREDIT&&d&&\"function\"==typeof d&&d()}}),c&&l||this.braintreeIntegrationService.removeElement(n)}setupPayment(e,t,n){var i;return tw(this,void 0,void 0,function*(){const{onPaymentError:r,shippingAddress:o,buyNowInitializeOptions:a}=t;try{const r=\"function\"==typeof(null==a?void 0:a.getBuyNowCartRequestBody)?yield this.createBuyNowCart(a.getBuyNowCartRequestBody()):void 0;this.buyNowCartId=null==r?void 0:r.id;const s=this.paymentIntegrationService.getState(),d=s.getCustomer(),c=s.getPaymentMethodOrThrow(n),l=r?r.cartAmount:s.getCartOrThrow().cartAmount,u=r?t.currencyCode:s.getCartOrThrow().currency.code,h=o||(null==d?void 0:d.addresses[0]),p=h?ll(h):void 0;return yield e.createPayment({flow:\"checkout\",enableShippingAddress:!0,shippingAddressEditable:!1,shippingAddressOverride:p,amount:l,currency:u,offerCredit:!0,intent:null===(i=c.initializationData)||void 0===i?void 0:i.intent})}catch(e){throw r&&(Cn(e)||e instanceof Bt)&&r(e),e}})}tokenizePayment(e,t,n,i,r){return tw(this,void 0,void 0,function*(){try{const{deviceData:r}=yield this.braintreeIntegrationService.getDataCollector({paypal:!0}),o=yield t.tokenizePayment(e),{details:a,nonce:s}=o,d=this.braintreeIntegrationService.mapToLegacyBillingAddress(a),c=this.braintreeIntegrationService.mapToLegacyShippingAddress(a);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",provider:n,action:i?\"process_payment\":\"set_external_checkout\",nonce:s,device_data:r,billing_address:JSON.stringify(d),shipping_address:JSON.stringify(c)},this.buyNowCartId&&{cart_id:this.buyNowCartId})),o}catch(e){throw r&&(Cn(e)||e instanceof Bt)&&r(e),e}})}createBuyNowCart(e){return tw(this,void 0,void 0,function*(){if(!e)throw new jt(kt.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(e)}catch(e){throw new jn}})}handleError(e,t,n){if(this.braintreeIntegrationService.removeElement(t),!n||!Cn(e))throw e;n(e)}}const iw=nn(e=>{const t=window,n=new pn(e),i=new or(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),t,n),t),r=new al(e);return new nw(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)(),i,r,t)},[{id:\"braintreepaypalcredit\"}]);var rw=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class ow{constructor(e,t,n){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeSdk=n}initialize(e){return rw(this,void 0,void 0,function*(){const{containerId:t,methodId:n}=e;if(!n)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(n);const i=this.paymentIntegrationService.getState(),{clientToken:r,initializationData:o,config:a}=i.getPaymentMethodOrThrow(n);if(!r||!o)throw new jt(kt.MissingPaymentMethod);this.braintreeSdk.initialize(r);const s=yield this.braintreeSdk.getBraintreeVisaCheckout(),{currency:{code:d},cartAmount:c}=i.getCartOrThrow(),l=yield this.braintreeSdk.getVisaCheckoutSdk(a.testMode),u=s.createInitOptions({paymentRequest:{currencyCode:d,subtotal:String(c)},settings:{shipping:{collectShipping:!0}}});this.createSignInButton(t),yield l.init(u),l.on(\"payment.success\",e=>rw(this,void 0,void 0,function*(){yield this.paymentSuccess(s,e)}))})}deinitialize(){return Promise.resolve()}paymentSuccess(e,t){return rw(this,void 0,void 0,function*(){return Promise.all([e.tokenize(t),this.braintreeSdk.getDataCollectorOrThrow()]).then(([e,t])=>{const n=this.paymentIntegrationService.getState(),i=n.getShippingAddress(),r=n.getBillingAddress(),{shippingAddress:o=this.toVisaCheckoutAddress(i),billingAddress:a=this.toVisaCheckoutAddress(r)}=e;return this.postForm(Object.assign(Object.assign({},e),{shippingAddress:o,billingAddress:a}),t)})})}postForm(e,t){const{userData:n,billingAddress:i,shippingAddress:r,details:o}=e,{userEmail:a}=n,{deviceData:s}=t;return this.formPoster.postForm(\"/checkout.php\",{payment_type:e.type,nonce:e.nonce,provider:\"braintreevisacheckout\",action:\"set_external_checkout\",device_data:s,card_information:JSON.stringify({type:o.cardType,number:o.lastTwo}),billing_address:JSON.stringify(this.getAddress(a,i)),shipping_address:JSON.stringify(this.getAddress(a,r))})}toVisaCheckoutAddress(e){return e?{firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phone,streetAddress:e.address1,extendedAddress:e.address2,locality:e.city,region:e.stateOrProvinceCode,countryCode:e.countryCode,postalCode:e.postalCode}:{}}getAddress(e,t={}){return{email:e,first_name:t.firstName,last_name:t.lastName,phone_number:t.phoneNumber,address_line_1:t.streetAddress,address_line_2:t.extendedAddress,city:t.locality,state:t.region,country_code:t.countryCode,postal_code:t.postalCode}}createSignInButton(e){const t=document.querySelector(`#${e}`);if(!t)throw new Error(\"Need a container to place the button\");return this.insertVisaCheckoutButton(t)}insertVisaCheckoutButton(e){const t=document.createElement(\"div\");return t.style.display=\"flex\",t.style.flexDirection=\"column\",t.style.alignItems=\"flex-end\",t.innerHTML='\\n            <img\\n                alt=\"Visa Checkout\"\\n                class=\"v-button\"\\n                role=\"button\"\\n                src=\"https://secure.checkout.visa.com/wallet-services-web/xo/button.png?acceptCanadianVisaDebit=false&cobrand=true&height=34&width=178\"\\n                />\\n            <a class=\"v-learn v-learn-default\" style=\"text-align: right; display: block; font-size: 10px; color: #003366;\" href=\"#\" data-locale=\"en_US\">Tell Me More</a>',e.appendChild(t),t}}const aw=nn(e=>{const t=window,n=new pn(e),i=new En(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),t,n));return new ow(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)(),i)},[{id:\"braintreevisacheckout\"}]);function sw(e){const{billingAddress:t,email:n,firstName:i,lastName:r,phone:o,shippingAddress:a}=e,s=t||a;return{email:n,first_name:i,last_name:r,phone_number:o,address_line_1:null==s?void 0:s.line1,address_line_2:null==s?void 0:s.line2,city:null==s?void 0:s.city,state:null==s?void 0:s.state,country_code:null==s?void 0:s.countryCode,postal_code:null==s?void 0:s.postalCode}}function dw(e){const{email:t,phone:n,shippingAddress:i}=e,r=(null==i?void 0:i.recipientName)||\"\",[o,a]=r.split(\" \");return{email:t,first_name:o||\"\",last_name:a||\"\",phone_number:n,address_line_1:null==i?void 0:i.line1,address_line_2:null==i?void 0:i.line2,city:null==i?void 0:i.city,state:null==i?void 0:i.state,country_code:null==i?void 0:i.countryCode,postal_code:null==i?void 0:i.postalCode}}var cw=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};const lw=e=>{const{color:t,height:n}=e;return{backgroundColor:(i=t||\"\",i===er.WHITE?\"#FFFFFF\":\"#3D95CE\"),backgroundPosition:\"50% 50%\",backgroundSize:\"80px auto\",backgroundImage:`url(\"/app/assets/img/payment-providers/venmo-logo-${t===er.WHITE?er.BLUE:er.WHITE}.svg\")`,backgroundRepeat:\"no-repeat\",borderRadius:\"4px\",cursor:\"pointer\",transition:\"0.2s ease\",minHeight:`${n||40}px`,minWidth:\"150px\",height:\"100%\",width:\"100%\",border:t===er.WHITE?\"1px solid black\":\"none\"};// removed by dead control flow\n{ var i; }};class uw{constructor(e,t,n){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeSdk=n,this.onError=lodash__WEBPACK_IMPORTED_MODULE_5__.noop}initialize(e){return cw(this,void 0,void 0,function*(){const{braintreevenmo:t,containerId:n,methodId:i}=e;if(!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');const r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i),{clientToken:o,initializationData:a}=r,{paymentButtonStyles:s}=a,{cartButtonStyles:d}=s||{},c=(null==t?void 0:t.style)||d;if(!o||!a)throw new jt(kt.MissingPaymentMethod);if(!n)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');yield this.paymentIntegrationService.loadDefaultCheckout(),this.onError=(null==t?void 0:t.onError)||this.handleError,this.braintreeSdk.initialize(o);try{const e=yield this.braintreeSdk.getVenmoCheckoutOrThrow();this.renderVenmoButton(e,n,null==t?void 0:t.buyNowInitializeOptions,c)}catch(e){(cl(e)||function(e){return e instanceof mn}(e))&&this.handleInitializationVenmoError(e,n)}})}deinitialize(){return cw(this,void 0,void 0,function*(){return yield this.braintreeSdk.deinitialize(),Promise.resolve()})}handleError(e){throw new Error(e.message)}createBuyNowCart(e){return cw(this,void 0,void 0,function*(){if(\"function\"==typeof(null==e?void 0:e.getBuyNowCartRequestBody)){const t=null==e?void 0:e.getBuyNowCartRequestBody();if(!t)throw new jt(kt.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new jn}}})}handleInitializationVenmoError(e,t){return this.removeVenmoContainer(t),this.onError(e)}removeVenmoContainer(e){const t=document.getElementById(e);t&&t.remove()}renderVenmoButton(e,t,n,i){const r=document.getElementById(t),{color:o}=i||{};if(!r)throw new rn(\"Unable to create wallet button without valid container ID.\");r.setAttribute(\"aria-label\",\"Venmo\"),Object.assign(r.style,lw(i||{})),r.addEventListener(\"click\",()=>cw(this,void 0,void 0,function*(){r.setAttribute(\"disabled\",\"true\");const t=yield this.createBuyNowCart(n);e.tokenize&&e.tokenize((e,n)=>cw(this,void 0,void 0,function*(){r.removeAttribute(\"disabled\"),e&&this.onError(e),yield this.handlePostForm(n,null==t?void 0:t.id)}))})),o===er.BLUE&&(r.addEventListener(\"mouseenter\",()=>{r.style.backgroundColor=\"#0a7fc2\"}),r.addEventListener(\"mouseleave\",()=>{r.style.backgroundColor=lw(i||{}).backgroundColor}))}handlePostForm(e,t){return cw(this,void 0,void 0,function*(){const{deviceData:n}=yield this.braintreeSdk.getDataCollectorOrThrow(),{nonce:i,details:r}=e;this.formPoster.postForm(\"/checkout.php\",Object.assign({nonce:i,provider:\"braintreevenmo\",payment_type:\"paypal\",device_data:n,action:\"set_external_checkout\",billing_address:JSON.stringify(sw(r)),shipping_address:JSON.stringify(dw(r))},t&&{cart_id:t}))})}}const hw=nn(e=>{const t=window,n=(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),i=new pn(e),r=new Dn(n,t,i),o=new En(r);return new uw(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)(),o)},[{id:\"braintreevenmo\"}]);var pw=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class mw{constructor(e,t){this._paymentIntegrationService=e,this._googlePayPaymentProcessor=t}initialize(e){var t,n;return pw(this,void 0,void 0,function*(){if(!e.methodId||!qr(e.methodId))throw new rn('Unable to proceed because \"methodId\" is not a valid key.');if(this._methodId=e.methodId,!e.containerId)throw new rn('Unable to proceed because \"containerId\" is not a valid key.');const i=e[this._getMethodOrThrow()];if(!i)throw new rn(\"Unable to proceed without valid options.\");const{buyNowInitializeOptions:r,currencyCode:o,buttonColor:a,buttonType:s,onError:d}=i;let c,l=this._paymentIntegrationService.getState();try{c=l.getPaymentMethodOrThrow(this._getMethodOrThrow())}catch(e){l=yield this._paymentIntegrationService.loadPaymentMethod(this._getMethodOrThrow()),c=l.getPaymentMethodOrThrow(this._getMethodOrThrow())}if(this._countryCode=null===(t=c.initializationData)||void 0===t?void 0:t.storeCountry,r){if(!o)throw new rn('Unable to initialize payment because \"options.currencyCode\" argument is not provided.');this._currencyCode=o,this._buyNowInitializeOptions=r,yield this._googlePayPaymentProcessor.initialize(()=>c,this._getGooglePayClientOptions(),!!r,o)}else yield this._paymentIntegrationService.loadDefaultCheckout(),yield this._googlePayPaymentProcessor.initialize(()=>c,this._getGooglePayClientOptions());this._paymentButton=null!==(n=this._paymentButton)&&void 0!==n?n:this._googlePayPaymentProcessor.addPaymentButton(e.containerId,{buttonColor:null!=a?a:\"default\",buttonType:null!=s?s:\"plain\",onClick:this._handleClick(d)})})}deinitialize(){var e;return null===(e=this._paymentButton)||void 0===e||e.remove(),this._paymentButton=void 0,this._methodId=void 0,Promise.resolve()}_handleClick(e){return t=>pw(this,void 0,void 0,function*(){t.preventDefault();try{this._buyNowInitializeOptions?yield this._createBuyNowCartOrThrow(this._buyNowInitializeOptions):yield this._paymentIntegrationService.loadDefaultCheckout(),yield this._googlePayPaymentProcessor.initializeWidget(),yield this._interactWithPaymentSheet()}catch(t){let n=t;if(Ur(t)){if(\"CANCELED\"===t.statusCode)throw new Mn;n=new Li(JSON.stringify(t))}throw null==e||e(new Li(\"An error occurred while requesting your Google Pay payment details.\")),n}})}_interactWithPaymentSheet(){var e;return pw(this,void 0,void 0,function*(){const t=yield this._googlePayPaymentProcessor.showPaymentSheet(),n=this._googlePayPaymentProcessor.mapToBillingAddressRequestBody(t),i=this._googlePayPaymentProcessor.mapToShippingAddressRequestBody(t),r=\"/embedded-checkout\"===window.location.pathname?this._paymentIntegrationService.getState().getStoreConfigOrThrow().links.siteLink:void 0;n&&(yield this._paymentIntegrationService.updateBillingAddress(n)),i&&!(null===(e=this._buyNowCart)||void 0===e?void 0:e.lineItems.digitalItems.length)&&(yield this._paymentIntegrationService.updateShippingAddress(i)),yield this._googlePayPaymentProcessor.setExternalCheckoutForm(this._getMethodOrThrow(),t,r)})}_getGooglePayClientOptions(){return{paymentDataCallbacks:{onPaymentDataChanged:({callbackTrigger:e,shippingAddress:t,shippingOptionData:n,offerData:i})=>pw(this,void 0,void 0,function*(){const{availableTriggers:r,addressChangeTriggers:o,shippingOptionsChangeTriggers:a,offerChangeTriggers:s}=this._googlePayPaymentProcessor.getCallbackTriggers();if(!r.includes(e))return;const d=o.includes(e)?yield this._googlePayPaymentProcessor.handleShippingAddressChange(t):void 0;a.includes(e)&&(yield this._googlePayPaymentProcessor.handleShippingOptionChange(n.id));const{newOfferInfo:c,error:l}=s.includes(e)?yield this._googlePayPaymentProcessor.handleCoupons(i):{},u=l;return this._buyNowInitializeOptions?this._getBuyNowTransactionInfo(d,c,u):this._getTransactionInfo(d,c,u)})}}}_createBuyNowCartOrThrow(e){return pw(this,void 0,void 0,function*(){if(\"function\"==typeof(null==e?void 0:e.getBuyNowCartRequestBody)){const t=e.getBuyNowCartRequestBody();try{this._buyNowCart=yield this._paymentIntegrationService.createBuyNowCart(t),yield this._paymentIntegrationService.loadCheckout(this._buyNowCart.id)}catch(e){if(\"string\"==typeof e)throw new jn(e);throw e}}})}_getBuyNowTransactionInfo(e,t,n){if(!this._buyNowCart)return;const{cartAmount:i}=this._buyNowCart,r=this._googlePayPaymentProcessor.getTotalPrice();return Object.assign(Object.assign(Object.assign({newTransactionInfo:Object.assign(Object.assign({},this._countryCode&&{countryCode:this._countryCode}),{currencyCode:this._getCurrencyCodeOrThrow(),totalPrice:r||String(i),totalPriceStatus:Mr.FINAL})},e&&{newShippingOptionParameters:e}),t&&{newOfferInfo:t}),n&&{error:n})}_getTransactionInfo(e,t,n){return pw(this,void 0,void 0,function*(){yield this._paymentIntegrationService.loadCheckout();const i=this._googlePayPaymentProcessor.getTotalPrice(),{code:r}=this._paymentIntegrationService.getState().getCartOrThrow().currency;return Object.assign(Object.assign(Object.assign({newTransactionInfo:Object.assign(Object.assign({},this._countryCode&&{countryCode:this._countryCode}),{currencyCode:r,totalPriceStatus:Mr.FINAL,totalPrice:i})},e&&{newShippingOptionParameters:e}),t&&{newOfferInfo:t}),n&&{error:n})})}_getMethodOrThrow(){return qt(this._methodId,()=>new Vt(Tt.PaymentNotInitialized))}_getCurrencyCodeOrThrow(){return qt(this._currencyCode,()=>new rn('Unable to initialize payment because \"options.currencyCode\" argument is not provided.'))}}const yw=nn(e=>{const t=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),i=window,r=new pn(e),o=new En(new Dn((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),i,r));return new mw(e,new $r(Yr(),new _o(e,o),t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()))},[{id:\"googlepaybraintree\"}]),gw=nn(e=>new mw(e,new $r(Yr(),new Oo(e,new Io((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaypaypalcommerce\"}]),vw=nn(e=>new mw(e,new $r(Yr(),new ko(e,new wi((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepay_bigcommerce_payments\"}]),fw=nn(e=>{const t=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)();return new mw(e,new $r(Yr(),new jr(\"adyen\",e),t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()))},[{id:\"googlepayadyenv2\"}]),Sw=nn(e=>{const t=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)();return new mw(e,new $r(Yr(),new jr(\"adyen\",e),t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()))},[{id:\"googlepayadyenv3\"}]),_w=nn(e=>new mw(e,new $r(Yr(),new Zr(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepayauthorizenet\"}]),ww=nn(e=>{const t=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)();return new mw(e,new $r(Yr(),new no(e,t),t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()))},[{id:\"googlepaycheckoutcom\"}]),Cw=nn(e=>new mw(e,new $r(Yr(),new ro(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaycybersourcev2\"},{id:\"googlepaybnz\"}]),Iw=nn(e=>new mw(e,new $r(Yr(),new so(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepayorbital\"}]),bw=nn(e=>new mw(e,new $r(Yr(),new ho(e,new mo((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)())),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaystripe\"},{id:\"googlepaystripeupe\"},{id:\"googlepaystripeocs\"}]),Pw=nn(e=>new mw(e,new $r(Yr(),new vo(e),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepayworldpayaccess\"}]),Ow=nn(e=>new mw(e,new $r(Yr(),new zo(e,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)())),[{id:\"googlepaytdonlinemart\"}]);var Ew=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Aw{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){var t;return Ew(this,void 0,void 0,function*(){const{paypalcommerce:n,containerId:i,methodId:r}=e,o=Boolean(null==n?void 0:n.buyNowInitializeOptions);if(!r)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!n)throw new rn('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');if(o&&!n.currencyCode)throw new rn('Unable to initialize payment because \"options.paypalcommerce.currencyCode\" argument is not provided.');if(o&&\"function\"!=typeof(null===(t=n.buyNowInitializeOptions)||void 0===t?void 0:t.getBuyNowCartRequestBody))throw new rn('Unable to initialize payment because \"options.paypalcommerce.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');o||(yield this.paymentIntegrationService.loadDefaultCheckout());const a=o?n.currencyCode:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(r,a,!1),this.renderButton(i,r,n)})}deinitialize(){return Promise.resolve()}renderButton(e,t,n){const{buyNowInitializeOptions:i,style:r,onComplete:o,onEligibilityFailure:a}=n,s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:c,isAppSwitchEnabled:l}=d.initializationData||{},u={createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommerce\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)},h={onClick:()=>this.handleClick(i),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},p=Object.assign(Object.assign({},!l&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(e,n)=>this.onHostedCheckoutApprove(e,n,t,o)}),m=Object.assign(Object.assign(Object.assign({fundingSource:s.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(r)},u),i&&h),c&&p),y=s.Buttons(m);y.isEligible()?y.render(`#${e}`):a&&\"function\"==typeof a?a():this.paypalCommerceIntegrationService.removeElement(e)}handleClick(e){return Ew(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,n,i){return Ew(this,void 0,void 0,function*(){if(!e.orderID)throw new jt(kt.MissingOrderId);const r=this.paymentIntegrationService.getState().getCartOrThrow(),o=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(o);if(yield this.paymentIntegrationService.updateBillingAddress(t),r.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(o);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:n}}),yield this.paypalCommerceIntegrationService.submitPayment(n,e.orderID),i&&\"function\"==typeof i&&i(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return Ew(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return Ew(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}}const kw=nn(e=>new Aw(e,Yo(e)),[{id:\"paypalcommerce\"}]);var Tw=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Dw{constructor(e,t,n){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=n}initialize(e){var t;return Tw(this,void 0,void 0,function*(){const{paypalcommercecredit:n,containerId:i,methodId:r}=e,{buyNowInitializeOptions:o,currencyCode:a,messagingContainerId:s}=n||{},d=!!o;if(!r)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!n)throw new rn('Unable to initialize payment because \"options.paypalcommercecredit\" argument is not provided.');if(d&&!a)throw new rn('Unable to initialize payment because \"options.paypalcommercecredit.currencyCode\" argument is not provided.');if(d&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new rn('Unable to initialize payment because \"options.paypalcommercecredit.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');d||(yield this.paymentIntegrationService.loadDefaultCheckout());const c=this.paymentIntegrationService.getState(),l=d?a:c.getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(r,l,!1),this.renderButton(i,r,n);const u=c.getStoreConfigOrThrow().checkoutSettings.features;if(null!==(t=u[\"PAYPAL-5557.Hide_ppc_banner_implementation\"])&&void 0!==t&&t)return;const h=s&&document.getElementById(s);if(l&&h){const e=c.getPaymentMethodOrThrow(r),{paypalBNPLConfiguration:t=[]}=e.initializationData||{},n=t&&t.find(({id:e})=>\"cart\"===e);if(!(null==n?void 0:n.status))return;h.removeAttribute(\"data-pp-style-logo-type\"),h.removeAttribute(\"data-pp-style-logo-position\"),h.removeAttribute(\"data-pp-style-text-color\"),h.removeAttribute(\"data-pp-style-text-size\");const i=yield this.paypalCommerceSdk.getPayPalMessages(e,l);this.renderMessages(i,s,n)}})}deinitialize(){return Promise.resolve()}renderButton(e,t,n){const{buyNowInitializeOptions:i,style:r,onComplete:o,onEligibilityFailure:a}=n,s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:c,isAppSwitchEnabled:l}=d.initializationData||{},u={createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecredit\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)},h={onClick:()=>this.handleClick(i),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},p=Object.assign(Object.assign({},!l&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(e,n)=>this.onHostedCheckoutApprove(e,n,t,o)}),m=[s.FUNDING.PAYLATER,s.FUNDING.CREDIT];let y=!1;m.forEach(t=>{if(!y){const n=Object.assign(Object.assign(Object.assign({fundingSource:t,style:this.paypalCommerceIntegrationService.getValidButtonStyle(r)},u),i&&h),c&&p),o=s.Buttons(n);o.isEligible()?(o.render(`#${e}`),y=!0):a&&\"function\"==typeof a&&a()}}),y||this.paypalCommerceIntegrationService.removeElement(e)}handleClick(e){return Tw(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,n,i){return Tw(this,void 0,void 0,function*(){if(!e.orderID)throw new jt(kt.MissingOrderId);const r=this.paymentIntegrationService.getState().getCartOrThrow(),o=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(o);if(yield this.paymentIntegrationService.updateBillingAddress(t),r.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(o);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:n}}),yield this.paypalCommerceIntegrationService.submitPayment(n,e.orderID),i&&\"function\"==typeof i&&i(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return Tw(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return Tw(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}renderMessages(e,t,n){const i={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"cart\",style:Mh(n)};e.Messages(i).render(`#${t}`)}}const Mw=nn(e=>new Dw(e,Yo(e),ra()),[{id:\"paypalcommercecredit\"}]);var zw=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Nw{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return zw(this,void 0,void 0,function*(){const{paypalcommercevenmo:t,containerId:n,methodId:i}=e,{buyNowInitializeOptions:r,currencyCode:o}=t||{},a=!!r;if(!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');if(a&&!o)throw new rn('Unable to initialize payment because \"options.paypalcommercevenmo.currencyCode\" argument is not provided.');if(a&&\"function\"!=typeof(null==r?void 0:r.getBuyNowCartRequestBody))throw new rn('Unable to initialize payment because \"options.paypalcommercevenmo.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');a||(yield this.paymentIntegrationService.loadDefaultCheckout());const s=a?o:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(i,s,!1),this.renderButton(n,i,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,n){const{buyNowInitializeOptions:i,style:r,onEligibilityFailure:o}=n,a=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),s=a.FUNDING.VENMO,d={createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmo\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)},c={onClick:()=>this.handleClick(i),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},l=Object.assign(Object.assign({fundingSource:s,style:this.getValidVenmoButtonStyles(r)},d),i&&c),u=a.Buttons(l);u.isEligible()?u.render(`#${e}`):o&&\"function\"==typeof o?o():this.paypalCommerceIntegrationService.removeElement(e)}getValidVenmoButtonStyles(e){const t=this.paypalCommerceIntegrationService.getValidButtonStyle(e);return t.color===Lo.gold?Object.assign(Object.assign({},t),{color:void 0}):t}handleClick(e){return zw(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const xw=nn(e=>new Nw(e,Yo(e)),[{id:\"paypalcommercevenmo\"}]);var Fw=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Rw{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return Fw(this,void 0,void 0,function*(){const{paypalcommercealternativemethods:t,containerId:n,methodId:i}=e,{apm:r,buyNowInitializeOptions:o,currencyCode:a}=t||{},s=!!o;if(!i)throw new rn('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new rn('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new rn('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument is not provided.');if(!r)throw new rn('Unable to initialize payment because \"options.paypalcommercealternativemethods.apm\" argument is not provided.');if(s&&!a)throw new rn('Unable to initialize payment because \"options.paypalcommercealternativemethods.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new rn('Unable to initialize payment because \"options.paypalcommercealternativemethods.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=s?a:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(i,d,!1),this.renderButton(n,i,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,n){const{apm:i,buyNowInitializeOptions:r,style:o,onEligibilityFailure:a}=n,s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow();if(!Object.values(s.FUNDING).includes(i))throw new rn('Unable to initialize PayPal button because \"options.paypalcommercealternativemethods.apm\" argument is not valid funding source.');const d={createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethod\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)},c={onClick:()=>this.handleClick(r),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},l=Object.assign(Object.assign({fundingSource:i,style:this.paypalCommerceIntegrationService.getValidButtonStyle(o)},d),r&&c),u=s.Buttons(l);u.isEligible()?u.render(`#${e}`):a&&\"function\"==typeof a?a():this.paypalCommerceIntegrationService.removeElement(e)}handleClick(e){return Fw(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const Lw=nn(e=>new Rw(e,Yo(e)),[{id:\"paypalcommercealternativemethods\"}]);var Bw,jw,Uw,qw,Vw;!function(e){e.HORIZONTAL=\"horizontal\",e.VERTICAL=\"vertical\"}(Bw||(Bw={})),function(e){e.SMALL=\"small\",e.MEDIUM=\"medium\",e.LARGE=\"large\",e.RESPONSIVE=\"responsive\"}(jw||(jw={})),function(e){e.GOLD=\"gold\",e.BLUE=\"blue\",e.SIlVER=\"silver\",e.BLACK=\"black\"}(Uw||(Uw={})),function(e){e.CHECKOUT=\"checkout\",e.PAY=\"pay\",e.BUYNOW=\"buynow\",e.PAYPAL=\"paypal\",e.CREDIT=\"credit\"}(qw||(qw={})),function(e){e.PILL=\"pill\",e.RECT=\"rect\"}(Vw||(Vw={}));var Gw=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};class Hw{constructor(e,t,n){this.paymentIntegrationService=e,this.paypalExpressScriptLoader=t,this.formPoster=n}initialize(e){return Gw(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId);if(!e.paypal)throw new rn;if(!t.config.merchantId)throw new jt(kt.MissingPaymentMethod);const n=yield this.paypalExpressScriptLoader.loadPaypalSDK(t.config.merchantId);this.renderButton(e,n)})}deinitialize(){return Promise.resolve()}renderButton(e,t){const{containerId:n,methodId:i,paypal:r}=e,{allowCredit:o,clientId:a,onPaymentError:s,shouldProcessPayment:d,style:c}=r,l=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId);if(!l.config.merchantId)throw new jt(kt.MissingPaymentMethod);const u=l.config.merchantId,h=l.config.testMode?\"sandbox\":\"production\",p={[h]:a},m=t.FUNDING.CREDIT||\"credit\",y=o?[m]:[],g=o?[]:[m];return t.Button.render({env:h,client:p,commit:d,funding:{allowed:y,disallowed:g},style:this.getStyle(c),payment:(e,t)=>this.setupPayment(u,t,s),onAuthorize:(e,t)=>this.tokenizePayment(e,i,t,d)},n)}getStyle(e){const{color:t,fundingicons:n,label:i,layout:r,shape:o,size:a,tagline:s}=e||{};return{color:t,fundingicons:n,label:i,layout:r,shape:o||Vw.RECT,size:\"small\"===a?jw.RESPONSIVE:a,tagline:s}}setupPayment(e,t,n){return Gw(this,void 0,void 0,function*(){if(!t)throw new Vt(Tt.CheckoutButtonNotInitialized);try{const n=yield this.paymentIntegrationService.loadDefaultCheckout(),{id:i}=n.getCartOrThrow(),r=n.getHost()||\"\";return(yield t.request.post(`${r}/api/storefront/payment/paypalexpress`,{merchantId:e,cartId:i},{headers:Object.assign({\"X-API-INTERNAL\":Xn},ni)})).id}catch(e){throw n&&e instanceof Bt&&n(e),e}})}tokenizePayment(e,t,n,i){return Gw(this,void 0,void 0,function*(){if(!n)throw new Vt(Tt.CheckoutButtonNotInitialized);if(!e.paymentID||!e.payerID)throw new jt(kt.MissingPayment);const r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),o=yield n.payment.get(e.paymentID);return this.formPoster.postForm(\"/checkout.php\",{payment_type:\"paypal\",provider:r.id,action:i?\"process_payment\":\"set_external_checkout\",paymentId:e.paymentID,payerId:e.payerID,payerInfo:JSON.stringify(o.payer.payer_info)})})}}class $w{constructor(e){this.scriptLoader=e,this.window=window}loadPaypalSDK(e=\"\"){return t=this,n=void 0,r=function*(){const t=Object.assign({async:!0,attributes:{\"data-merchant-id\":e}},e&&{attributes:{\"data-merchant-id\":e}});if(yield this.scriptLoader.loadScript(\"//www.paypalobjects.com/api/checkout.min.js\",t),!this.window.paypal)throw new Xt;return this.window.paypal},new((i=void 0)||(i=Promise))(function(e,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,s)}d((r=r.apply(t,n||[])).next())});// removed by dead control flow\n{ var t, n, i, r; }}}const Ww=nn(e=>new Hw(e,new $w((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)()),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)()),[{id:\"paypalexpress\"}]);function Yw(e){const{host:t,locale:i=\"en\"}=null!=e?e:{},r=r_({config:{meta:{host:null==e?void 0:e.host,locale:null==e?void 0:e.locale},errors:{},statuses:{}}}),o=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t}),s=(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_7__.createFormPoster)({host:t}),d=function(e,t=Ke){const n=new Lt;for(const[,i]of Object.entries(t))if(xt(i))for(const t of i.resolveIds)n.register(t,()=>i(e));return n}(Ty(r));return new g_(r,new v_(function(e,t,n,i,r){const o=new Rt,s=(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_3__.getScriptLoader)(),d=new ts(t),c=new is(d,new ft(new It(t)),new os(new as(t)));return o.register(Ym.MASTERPASS,()=>new I_(e,c,new hs(s),i)),o.register(Ym.PAYPALEXPRESS,()=>new b_(e,c,new hg(s),n,r)),o}(r,o,s,i,t),d,new ds(new cs(o))))}var Kw,Jw,Zw;!function(e){e.CheckoutComplete=\"CHECKOUT_COMPLETE\",e.CheckoutError=\"CHECKOUT_ERROR\",e.CheckoutLoaded=\"CHECKOUT_LOADED\",e.FrameError=\"FRAME_ERROR\",e.FrameLoaded=\"FRAME_LOADED\",e.SignedOut=\"SIGNED_OUT\"}(Kw||(Kw={}));class Qw extends _t{constructor(e){super(e,{message:e.body.title}),this.name=\"InvalidLoginTokenError\",this.type=\"invalid_login_token\"}}!function(e){e.MissingContainer=\"missing_container\",e.MissingContent=\"missing_content\",e.UnknownError=\"unknown_error\"}(Jw||(Jw={}));class Xw extends Ze{constructor(e,t=Jw.UnknownError){super(e||\"Unable to embed the checkout form.\"),this.subtype=t,this.name=\"NotEmbeddableError\",this.type=\"not_embeddable\"}}!function(e){e.StyleConfigured=\"STYLE_CONFIGURED\"}(Zw||(Zw={}));const eC=\"isCookieAllowed\",tC=\"lastAllowCookieAttempt\";let nC=class{constructor(e,t,n,i,r,o,a,s){this._iframeCreator=e,this._messageListener=t,this._messagePoster=n,this._loadingIndicator=i,this._requestSender=r,this._storage=o,this._location=a,this._options=s,this._isAttached=!1,this._options.onComplete&&this._messageListener.addListener(Kw.CheckoutComplete,this._options.onComplete),this._options.onError&&this._messageListener.addListener(Kw.CheckoutError,this._options.onError),this._options.onLoad&&this._messageListener.addListener(Kw.CheckoutLoaded,this._options.onLoad),this._options.onFrameLoad&&this._messageListener.addListener(Kw.FrameLoaded,this._options.onFrameLoad),this._options.onSignOut&&this._messageListener.addListener(Kw.SignedOut,this._options.onSignOut),this._messageListener.addListener(Kw.FrameLoaded,()=>this._configureStyles())}attach(){return this._isAttached?Promise.resolve(this):(this._isAttached=!0,this._messageListener.listen(),this._loadingIndicator.show(this._options.containerId),this._allowCookie().then(()=>this._attemptLogin()).then(e=>this._iframeCreator.createFrame(e,this._options.containerId)).then(e=>{this._iframe=e,this._configureStyles(),this._loadingIndicator.hide()}).catch(e=>(this._isAttached=!1,this._retryAllowCookie(e).catch(()=>{throw this._messageListener.trigger({type:Kw.FrameError,payload:e}),this._loadingIndicator.hide(),e}))).then(()=>this))}detach(){this._isAttached&&(this._isAttached=!1,this._messageListener.stopListen(),this._iframe&&this._iframe.parentNode&&(this._iframe.parentNode.removeChild(this._iframe),this._iframe.iFrameResizer.close()))}_configureStyles(){this._iframe&&this._iframe.contentWindow&&this._options.styles&&(this._messagePoster.setTarget(this._iframe.contentWindow),this._messagePoster.post({type:Zw.StyleConfigured,payload:this._options.styles}))}_attemptLogin(){return/^\\/login\\/token/.test(xs(this._options.url).pathname)?this._requestSender.post(this._options.url).then(({body:{redirectUrl:e}})=>e).catch(e=>Promise.reject(new Qw(e))):Promise.resolve(this._options.url)}_allowCookie(){if(this._storage.getItem(eC))return Promise.resolve();this._storage.setItem(eC,!0),this._storage.setItem(tC,Date.now());const{origin:e}=xs(this._options.url),t=`${e}/embedded-checkout/allow-cookie?returnUrl=${encodeURIComponent(this._location.href)}`;return document.body.style.visibility=\"hidden\",this._location.replace(t),new Promise(()=>{})}_retryAllowCookie(e){const t=Number(this._storage.getItem(tC));return(!t||Date.now()-t>6e5)&&e instanceof Xw&&e.subtype===Jw.MissingContent?(this._storage.removeItem(tC),this._storage.removeItem(eC),this._allowCookie()):Promise.reject()}};nC=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Cr],nC);const iC=nC;class rC{constructor(e){this._options=e}createFrame(e,t){const n=document.getElementById(t),{timeout:i=6e4}=this._options||{};if(!n)throw new Xw(\"Unable to embed the iframe because the container element could not be found.\",Jw.MissingContainer);const r=document.createElement(\"iframe\");return r.src=e,r.style.border=\"none\",r.style.display=\"none\",r.style.width=\"100%\",r.allowPaymentRequest=!0,r.allow=\"payment\",n.appendChild(r),this._toResizableFrame(r,i).catch(e=>{throw n.removeChild(r),e})}_toResizableFrame(e,t){return new Promise((n,i)=>{const r=window.setTimeout(()=>{i(new Xw(\"Unable to embed the iframe because the content could not be loaded.\"))},t),o=t=>{if((t.origin===xs(e.src).origin||t.origin===rd(xs(e.src)).origin)&&(Bs(t.data,Kw.FrameError)&&(a(),i(new Xw(t.data.payload.message,Jw.MissingContent))),Bs(t.data,Kw.FrameLoaded))){e.style.display=\"\";const i=Hs({scrolling:!1,sizeWidth:!1,heightCalculationMethod:t.data.payload&&t.data.payload.contentId?\"taggedElement\":\"lowestElement\"},e);a(),n(i[i.length-1])}},a=()=>{window.removeEventListener(\"message\",o),window.clearTimeout(r)};window.addEventListener(\"message\",o)})}}function oC(e){const t=xs(e.url).origin;return new iC(new rC,new ad(t),new js(t),new Ba({styles:e.styles&&e.styles.loadingIndicator}),(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),new vm(\"BigCommerce.EmbeddedCheckout\"),window.location,e).attach()}function aC(e){if(!e.payload||!e.payload.contentId)return;const t=document.getElementById(e.payload.contentId);t&&!t.hasAttribute(\"data-iframe-height\")&&t.setAttribute(\"data-iframe-height\",\"\")}function sC(e){return\"object\"==typeof e&&null!==e&&\"message\"in e&&\"type\"in e}let dC=class{constructor(e,t,n,i={}){this._messageListener=e,this._messagePoster=t,this._untargetedMessagePoster=n,this._messageHandlers=i,this._messageListener.listen()}postComplete(){const e={type:Kw.CheckoutComplete};this._postMessage(e)}postError(e){const t={type:Kw.CheckoutError,payload:this._transformError(e)};this._postMessage(t)}postFrameError(e){const t={type:Kw.FrameError,payload:this._transformError(e)};this._postMessage(t,{untargeted:!0})}postFrameLoaded(e){const t={type:Kw.FrameLoaded,payload:e};this._postMessage(t)}postLoaded(){const e={type:Kw.CheckoutLoaded};this._postMessage(e)}postSignedOut(){const e={type:Kw.SignedOut};this._postMessage(e)}receiveStyles(e){this._messageListener.addListener(Zw.StyleConfigured,({payload:t})=>{e(t)})}_postMessage(e,t){if(this._notifyMessageHandlers(e),t&&t.untargeted)return this._untargetedMessagePoster.post(e);this._messagePoster.post(e)}_notifyMessageHandlers(e){Object.keys(this._messageHandlers).forEach(t=>{if(e.type!==t)return;const n=this._messageHandlers[t];n&&n.call(null,e)})}_transformError(e){return{message:e.message,type:sC(e)?e.type:void 0,subtype:sC(e)?e.subtype:void 0}}};dC=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Cr],dC);const cC=dC;let lC=class{postComplete(){}postError(){}postFrameError(){}postFrameLoaded(){}postLoaded(){}postSignedOut(){}receiveStyles(){}};lC=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Cr],lC);const uC=lC;function hC(e){Ge(939);const t=e.parentWindow||window.parent;return window===t?new uC:new cC(new ad(e.parentOrigin),new js(e.parentOrigin,t),new js(\"*\",t),{[Kw.FrameLoaded]:aC})}const pC=\"en\",mC=\"optimized_checkout\";let yC=class{constructor(e,t){var n;this._logger=t;const{locale:i,locales:r,translations:o}=this._transformConfig(e);this._locale=i,this._locales=r,this._translations=o,this._formatters={},this._isCspNonceExperimentEnabled=null===(n=e.isCspNonceExperimentEnabled)||void 0===n||n}mapKeys(e){Object.keys(e).forEach(t=>{const n=`${mC}.${e[t]}`;this._translations[`${mC}.${t}`]=this._translations[n]})}getLocale(){return this._hasTranslations()?this._locale:pC}translate(e,t={}){var n;const i=`${mC}.${e}`;if(\"string\"!=typeof this._translations[i])return this._logger.warn(`Translation key \"${i}\" is missing`),i;if(this._isCspNonceExperimentEnabled){this._formatters[i]||(this._formatters[i]=new intl_messageformat__WEBPACK_IMPORTED_MODULE_37__.IntlMessageFormat(this._escapeSpecialCharacters(this._translations[i]||\"\"),this._locales[i],void 0,{ignoreTag:!0}));try{return this._formatters[i].format(this._transformData(t))}catch(e){if(this._isFormatError(e))return null!==(n=e.originalMessage)&&void 0!==n?n:\"\";throw e}}if(!this._formatters[i]){const e=new (messageformat__WEBPACK_IMPORTED_MODULE_14___default())(this._locales[i]);this._formatters[i]=e.compile(this._translations[i]||\"\")}return this._formatters[i](this._transformData(t))}_transformConfig(e={}){const t={defaultLocale:\"\",defaultTranslations:{},translations:{},locales:{},locale:e.locale||pC},n=e.locales||{},i=this._flattenObject(e.translations||{}),r=this._flattenObject(e.defaultTranslations||{}),o=this._flattenObject(e.fallbackTranslations||{});return (0,lodash__WEBPACK_IMPORTED_MODULE_5__.union)(Object.keys(o),Object.keys(r),Object.keys(i)).forEach(a=>{var s,d;i&&i[a]?(t.translations[a]=i[a],t.locales[a]=n[a]||t.locale):r[a]?(t.translations[a]=r[a],t.locales[a]=null!==(s=e.defaultLocale)&&void 0!==s?s:pC):(t.translations[a]=o[a],t.locales[a]=null!==(d=e.fallbackLocale)&&void 0!==d?d:pC)}),t}_flattenObject(e,t={},n=\"\"){try{Object.keys(e).forEach(i=>{const r=e[i],o=n?`${n}.${i}`:i;if((0,lodash__WEBPACK_IMPORTED_MODULE_5__.isObject)(r))return this._flattenObject(r,t,o);t[o]=r})}catch(e){this._logger.warn(`Unable to parse object: ${e}`)}return t}_transformData(e){return Object.keys(e).reduce((t,n)=>{const i=e[n];return t[n]=null==i?\"\":i,t},{})}_hasTranslations(){return Object.keys(this._locales).map(e=>this._locales[e]).filter(e=>e.split(\"-\")[0]===this._locale.split(\"-\")[0]).length>0}_isFormatError(e){return\"object\"==typeof e&&null!==e&&\"originalMessage\"in e}_escapeSpecialCharacters(e){return e.replace(/(\\w+)='([^']*)'/g,\"$1=''$2''\")}};yC=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Cr],yC);const gC=yC;function vC(e={}){return new gC(e,yt())}let fC=class{constructor(e){this._storeConfig=e,this._customerFormatter=new br(this._storeConfig.shopperCurrency),this._storeFormatter=new br(this._storeConfig.currency)}toCustomerCurrency(e){const t=this._storeConfig.shopperCurrency.exchangeRate;return this._customerFormatter.format(e*t)}toStoreCurrency(e){return this._storeFormatter.format(e)}};fC=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Cr],fC);const SC=fC;function _C(e){return new SC(e)}function wC(e){return e&&\"ga\"in e&&\"function\"==typeof e.ga}function CC(e,t){wC(window)&&window.ga(\"send\",e,Object.assign(Object.assign({},t),{nonInteraction:!1}))}function IC(e){return bC(e).length>=8096}function bC(e){return Object.keys(e).reduce((t,n)=>{const i=typeof e[n];return\"string\"===i||\"number\"===i?[...t,`${n}=${e[n]}`]:\"object\"===i&&null!==e[n]?[...t,bC(e[n])]:t},[]).join(\"&\")}var PC;!function(e){e[e.CUSTOMER=1]=\"CUSTOMER\",e[e.SHIPPING=2]=\"SHIPPING\",e[e.BILLING=3]=\"BILLING\",e[e.PAYMENT=4]=\"PAYMENT\"}(PC||(PC={}));const OC={customer:PC.CUSTOMER,shipping:PC.SHIPPING,billing:PC.BILLING,payment:PC.PAYMENT};class EC{constructor(e,t,n,{checkoutSteps:i}={}){if(this.checkoutService=e,this.analyticsExtraItemsManager=t,this.analytics=n,this._checkoutStarted=!1,this._completedSteps={},this._viewedSteps={},this._analyticStepOrder=[\"customer\",\"shipping\",\"billing\",\"payment\"],void 0!==i){if(i.some(e=>!(e in OC)))throw new Ft(`Invalid checkout steps provided. Valid values are: ${(0,lodash__WEBPACK_IMPORTED_MODULE_5__.keys)(OC).join(\", \")}.`);this._analyticStepOrder=i}}trackCheckoutStarted(){if(this._checkoutStarted)return;const e=this.getCheckout();if(!e)return;const{coupons:t,grandTotal:n,shippingCostTotal:i,taxTotal:r,cart:{lineItems:o,discountAmount:a,id:s}}=e,d=this.analyticsExtraItemsManager.saveExtraItemsData(s,o);this.analytics.track(\"Checkout Started\",this.getTrackingPayload({revenue:n,shipping:i,tax:r,discount:a,coupons:t,lineItems:o,extraItemsData:d})),this._checkoutStarted=!0}trackOrderComplete(){var e;const t=this.getOrder();if(!t)return;const{isComplete:n,orderId:i,orderAmount:r,shippingCostTotal:o,taxTotal:a,discountAmount:s,coupons:d,lineItems:c,cartId:l}=t;if(!n)return;const u=this.analyticsExtraItemsManager.readExtraItemsData(l);if(null===u)return;const h=null===(e=this.checkoutService.getState().data.getConfig())||void 0===e?void 0:e.checkoutSettings.features[\"DATA-6891.missing_orders_within_GA\"],p=this.getTrackingPayload({orderId:i,revenue:r,shipping:o,tax:a,discount:s,coupons:d,extraItemsData:u,lineItems:c});if(h&&Jc(window)&&wC(window)&&IC(p))return CC(\"transaction\",{\"&ti\":p.order_id,\"&ta\":p.affiliation,\"&tr\":p.revenue,\"&ts\":p.shipping,\"&tt\":p.tax,\"&tcc\":p.coupon,\"&cu\":p.currency}),p.products.forEach(e=>{CC(\"item\",{\"&ti\":p.order_id,\"&in\":e.name,\"&ic\":e.sku,\"&iv\":`${e.category}`,\"&ip\":e.price,\"&iq\":e.quantity})}),this.analyticsExtraItemsManager.clearExtraItemData(l);this.analytics.track(\"Order Completed\",p),this.analyticsExtraItemsManager.clearExtraItemData(l)}trackStepViewed(e){const t=this.getIdFromStep(e);t&&!this.hasStepViewed(t)&&(this.trackViewed(t),this.backfill(t))}trackStepCompleted(e){const t=this.getIdFromStep(e);t&&!this.hasStepCompleted(t)&&(this.backfill(t),this.trackCompleted(t))}backfill(e){for(const t of this._analyticStepOrder){const n=this.getIdFromStep(t);if(!n)break;if(this.hasStepViewed(n)||this.trackViewed(n),n===e)break;this.hasStepCompleted(n)||this.trackCompleted(n)}}trackCompleted(e){const t=this.getSelectedShippingOption(),{code:n=\"\"}=this.getShopperCurrency()||{},i=this.getPaymentMethodName(),r={step:e,currency:n};t&&(r.shipping_method=t.description),i&&(r.payment_method=i),r.shipping_method||r.payment_method||(r.shipping_method=\" \"),this.analytics.track(\"Checkout Step Completed\",r);const o=t?t.id:\"\",a=e===PC.SHIPPING?`${e}-${o}`:e;this._completedSteps[a]=!0}getTrackingPayload({orderId:e,revenue:t,shipping:n,tax:i,discount:r,coupons:o,extraItemsData:a,lineItems:s}){const{code:d=\"\"}=this.getShopperCurrency()||{},{storeName:c=\"\"}=this.getStoreProfile()||{};return{order_id:String(e),affiliation:c,revenue:this.toShopperCurrency(t),shipping:this.toShopperCurrency(n),tax:this.toShopperCurrency(i),discount:this.toShopperCurrency(r),coupon:(o||[]).map(e=>e.code.toUpperCase()).join(\",\"),currency:d,products:this.getProducts(a,s)}}hasStepCompleted(e){const t=this.getSelectedShippingOption(),n=t?t.id:\"\";return Object.prototype.hasOwnProperty.call(this._completedSteps,e)||e===PC.SHIPPING&&Object.prototype.hasOwnProperty.call(this._completedSteps,`${e}-${n}`)}hasStepViewed(e){return!!this._viewedSteps[e]}getIdFromStep(e){const t=e.split(\".\");return OC[t[0]]||null}trackViewed(e){const t=this.getShopperCurrency();this.analytics.track(\"Checkout Step Viewed\",{step:e,currency:t?t.code:\"\"}),this._viewedSteps[e]=!0}getOrder(){const{data:{getOrder:e}}=this.checkoutService.getState();return e()}getCheckout(){const{data:{getCheckout:e}}=this.checkoutService.getState();return e()}getShopperCurrency(){const{data:{getConfig:e}}=this.checkoutService.getState(),t=e();return t&&t.shopperCurrency}getStoreProfile(){const{data:{getConfig:e}}=this.checkoutService.getState(),t=e();return t&&t.storeProfile}toShopperCurrency(e){const{exchangeRate:t=1}=this.getShopperCurrency()||{};return Math.round(e*t*100)/100}getSelectedShippingOption(){const{data:e}=this.checkoutService.getState(),t=e.getSelectedShippingOption();return t&&t.id&&t.description?t:null}getPaymentMethodName(){const{data:e}=this.checkoutService.getState(),t=e.getSelectedPaymentMethod();return t&&t.config&&t.config.displayName||\"\"}getProducts(e,t){const n=(t.customItems||[]).map(e=>({product_id:e.id,sku:e.sku,price:e.listPrice,quantity:e.quantity,name:e.name})),i=t.giftCertificates.map(e=>({product_id:e.id,price:this.toShopperCurrency(e.amount),name:e.name,quantity:1}));return[...n,...[...t.physicalItems,...t.digitalItems].map(t=>{let n;t.options&&t.options.length&&(n=t.options.map(e=>`${e.name}:${e.value}`),n.sort());const i=Array.isArray(n)&&n.length?n.join(\", \"):\"single-product-option\",r=e[t.productId]&&e[t.productId].brand;return Object.assign({product_id:String(t.productId),sku:t.sku,price:t.salePrice,image_url:t.imageUrl,name:t.name,quantity:t.quantity,category:e[t.productId]?e[t.productId].category:\"\",variant:i},r&&{brand:r})}),...i]}}class AC{trackCheckoutStarted(){}trackOrderComplete(){}trackStepViewed(){}trackStepCompleted(){}}function kC(e,t){const{data:n}=e.getState(),i=n.getConfig();if(!i)throw new Qe(We.MissingCheckoutConfig);const{isAnalyticsEnabled:r}=i.checkoutSettings;return r&&Jc(window)?new EC(e,new Kc(local_storage_fallback__WEBPACK_IMPORTED_MODULE_9__[\"default\"]),window.analytics,t):new AC}function TC(e){return Boolean(e.hasOwnProperty(\"braintreeFastlane\"))}class DC{constructor(e){this.checkoutService=e,this._selectedPaymentMethodId=\"\"}customerPaymentMethodExecuted(){this._shouldTrackFastlaneEvent()&&this._trackEmailSubmitted()}paymentComplete(){this._shouldTrackFastlaneEvent()&&this._trackOrderPlaced(this._selectedPaymentMethodId)}selectedPaymentMethod(e){this._shouldTrackFastlaneEvent()&&e&&(this._selectedPaymentMethodId=e,this._trackApmSelected(e,!1))}walletButtonClick(e){this._shouldTrackFastlaneEvent()&&e&&(this._selectedPaymentMethodId=e,this._trackApmSelected(e,!0))}_shouldTrackFastlaneEvent(){const e=this.checkoutService.getState(),t=e.data.getPaymentMethod(\"braintree\")||e.data.getPaymentMethod(\"braintreeacceleratedcheckout\"),n=null==t?void 0:t.initializationData.isBraintreeAnalyticsV2Enabled,i=TC(window)&&window.braintreeFastlane.events;return n&&i}_getBraintreeEventsOrThrow(){if(TC(window))return window.braintreeFastlane.events;throw new Xt}_trackEmailSubmitted(){const{emailSubmitted:e}=this._getBraintreeEventsOrThrow();e(this._getEmailSubmittedEventOptions())}_trackApmSelected(e,t){const{apmSelected:n}=this._getBraintreeEventsOrThrow();n(this._getApmSelectedEventOptions(e,t))}_trackOrderPlaced(e){const{orderPlaced:t}=this._getBraintreeEventsOrThrow();t(this._getOrderPlacedEventOptions(e))}_getEventCommonOptions(){var e,t;const n=this.checkoutService.getState(),i=n.data.getCart(),r=null===(e=n.data.getConfig())||void 0===e?void 0:e.storeProfile,o=null===(t=n.data.getCustomer())||void 0===t?void 0:t.isGuest,a=n.data.getPaymentMethod(\"braintreeacceleratedcheckout\"),s=[{treatment_group:!n.errors.getLoadPaymentMethodError(\"braintreeacceleratedcheckout\")&&(null==a?void 0:a.initializationData.shouldRunAcceleratedCheckout)?\"test\":\"control\"}];return{context_type:\"cs_id\",context_id:(null==i?void 0:i.id)||\"\",page_type:\"checkout_page\",page_name:window.document.title,partner_name:\"bigc\",user_type:o?\"store_guest\":\"store_member\",store_id:(null==r?void 0:r.storeId)||\"\",merchant_name:(null==r?void 0:r.storeName)||\"\",experiment:JSON.stringify(s)}}_getEmailSubmittedEventOptions(){const e=(this.checkoutService.getState().data.getPaymentMethods()||[]).map(({id:e})=>e);return Object.assign(Object.assign({},this._getEventCommonOptions()),{user_email_saved:!1,apm_shown:e.length>1?\"1\":\"0\",apm_list:e.join(\",\")})}_getApmSelectedEventOptions(e,t){const n=(this.checkoutService.getState().data.getPaymentMethods()||[]).map(({id:e})=>e);return Object.assign(Object.assign({},this._getEventCommonOptions()),{apm_shown:n.length>1?\"1\":\"0\",apm_list:n.join(\",\"),apm_selected:e,apm_location:t?\"pre-email section\":\"payment section\"})}_getOrderPlacedEventOptions(e){const t=this.checkoutService.getState().data.getCart();return Object.assign(Object.assign({},this._getEventCommonOptions()),{selected_payment_method:e,currency_code:(null==t?void 0:t.currency.code)||\"\"})}}function MC(e){return new DC(e)}class zC{constructor(e){this._checkoutService=e,this._selectedPaymentMethodId=\"\"}customerPaymentMethodExecuted(){this._shouldTrackFastlaneEvent()&&this._trackEmailSubmitted()}paymentComplete(){this._shouldTrackFastlaneEvent()&&this._trackOrderPlaced(this._selectedPaymentMethodId)}selectedPaymentMethod(e){this._shouldTrackFastlaneEvent()&&e&&(this._selectedPaymentMethodId=e,this._trackApmSelected(e,!1))}walletButtonClick(e){this._shouldTrackFastlaneEvent()&&e&&(this._selectedPaymentMethodId=e,this._trackApmSelected(e,!0))}_shouldTrackFastlaneEvent(){const e=this._checkoutService.getState().data.getPaymentMethod(\"paypalcommerce\"),t=((null==e?void 0:e.initializationData)||{}).isPayPalCommerceAnalyticsV2Enabled,n=window,i=!!n.paypalFastlane&&!!n.paypalFastlane.events;return t&&i}_getPayPalEventsOrThrow(){const e=window;if(e.paypalFastlane&&e.paypalFastlane.events)return e.paypalFastlane.events;throw new Xt}_trackEmailSubmitted(){const{emailSubmitted:e}=this._getPayPalEventsOrThrow();e(this._getEmailSubmittedEventOptions())}_trackApmSelected(e,t){const{apmSelected:n}=this._getPayPalEventsOrThrow();n(this._getApmSelectedEventOptions(e,t))}_trackOrderPlaced(e){const{orderPlaced:t}=this._getPayPalEventsOrThrow();t(this._getOrderPlacedEventOptions(e))}_getEventCommonOptions(){var e,t;const n=this._checkoutService.getState(),i=n.data.getCart(),r=null===(e=n.data.getConfig())||void 0===e?void 0:e.storeProfile,o=null===(t=n.data.getCustomer())||void 0===t?void 0:t.isGuest,a=\"paypalcommerceacceleratedcheckout\",s=n.data.getPaymentMethod(a),d=[{treatment_group:!n.errors.getLoadPaymentMethodError(a)&&(null==s?void 0:s.initializationData.shouldRunAcceleratedCheckout)?\"test\":\"control\"}];return{context_type:\"cs_id\",context_id:(null==i?void 0:i.id.replace(/-/g,\"\"))||\"\",page_type:\"checkout_page\",page_name:window.document.title,partner_name:\"bigc\",user_type:o?\"store_guest\":\"store_member\",store_id:(null==r?void 0:r.storeId)||\"\",merchant_name:(null==r?void 0:r.storeName)||\"\",experiment:JSON.stringify(d)}}_getEmailSubmittedEventOptions(){const e=(this._checkoutService.getState().data.getPaymentMethods()||[]).map(({id:e})=>e);return Object.assign(Object.assign({},this._getEventCommonOptions()),{user_email_saved:!1,apm_shown:e.length>1?\"1\":\"0\",apm_list:e.join(\",\")})}_getApmSelectedEventOptions(e,t){const n=(this._checkoutService.getState().data.getPaymentMethods()||[]).map(({id:e})=>e);return Object.assign(Object.assign({},this._getEventCommonOptions()),{apm_shown:n.length>1?\"1\":\"0\",apm_list:n.join(\",\"),apm_selected:e,apm_location:t?\"pre-email section\":\"payment section\"})}_getOrderPlacedEventOptions(e){const t=this._checkoutService.getState().data.getCart();return Object.assign(Object.assign({},this._getEventCommonOptions()),{selected_payment_method:e,currency_code:(null==t?void 0:t.currency.code)||\"\"})}}function NC(e){return new zC(e)}var xC;class FC{constructor(e,t){this._host=e,this._hostedFormFactory=t}submitStoredCard(e,t){return n=this,i=void 0,o=function*(){const n=this._hostedForm;if(!n)throw new Cs(fs.PaymentNotInitialized);yield n.validate().then(()=>n.submitStoredCard({fields:e,data:t}))},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}d((o=o.apply(n,i||[])).next())});// removed by dead control flow\n{ var n, i, r, o; }}initialize(e){const t=this._hostedFormFactory.create(this._host,e);return t.attach().then(()=>{this._hostedForm=t})}deinitialize(){this._hostedForm&&this._hostedForm.detach()}}function RC(e){const t=r_();return new FC(e,new Fm(t))}!function(e){e.CUSTOMER=\"customer\",e.SHIPPING=\"shipping\",e.BILLING=\"billing\",e.PAYMENT=\"payment\"}(xC||(xC={}));const LC=[xC.CUSTOMER,xC.SHIPPING,xC.BILLING,xC.PAYMENT];class BC{constructor(e,t){this.subscribe=e,this.bodlEvents=t,this._checkoutStarted=!1,this._emailEntryBegan=!1,this._shippingOptionsShown=!1,this._completedSteps={},this.subscribe(e=>{var t;if(this.setState(e.data),!(null===(t=this.state)||void 0===t?void 0:t.getConfig()))throw new Qe(We.MissingCheckoutConfig)})}setState(e){this.state=e}checkoutBegin(){const e=this._getCommonCheckoutData();!this._checkoutStarted&&e&&(this.bodlEvents.emitCheckoutBeginEvent(e),this._checkoutStarted=!0)}orderPurchased(){var e;const t=null===(e=this.state)||void 0===e?void 0:e.getOrder();if(!t)return;const{currency:n,isComplete:i,orderId:r,orderAmount:o,shippingCostTotal:a,lineItems:s,cartId:d,coupons:c,channelId:l,taxTotal:u}=t;i&&this.bodlEvents.emitOrderPurchasedEvent({event_id:d,currency:n.code,order_id:r,tax:u,channel_id:l,cart_value:o,coupon_codes:c.map(e=>e.code.toUpperCase()),shipping_cost:a,line_items:this._getProducts(s,n.code)})}stepCompleted(e){e&&LC.some(t=>(this._hasStepCompleted(t)||this._trackCompletedStep(t),t===e))}customerEmailEntry(e){!this._emailEntryBegan&&(null==e?void 0:e.length)&&(this._emailEntryBegan=!0,this.bodlEvents.emit(\"bodl_checkout_email_entry_began\"))}customerSuggestionInit(e){this.bodlEvents.emit(\"bodl_checkout_customer_suggestion_initialization\",e)}customerSuggestionExecute(){this.bodlEvents.emit(\"bodl_checkout_customer_suggestion_execute\")}customerPaymentMethodExecuted(e){this.bodlEvents.emit(\"bodl_checkout_customer_payment_method_executed\",e)}showShippingMethods(){this._shippingOptionsShown||(this._shippingOptionsShown=!0,this.bodlEvents.emit(\"bodl_checkout_show_shipping_options\"))}selectedPaymentMethod(e){const t=this._getCommonCheckoutData();t&&e&&this.bodlEvents.emitPaymentDetailsProvidedEvent(Object.assign(Object.assign({},t),{payment_type:e}))}clickPayButton(e){this.bodlEvents.emit(\"bodl_checkout_click_pay_button\",e)}paymentRejected(){this.bodlEvents.emit(\"bodl_checkout_payment_rejected\")}paymentComplete(){this.bodlEvents.emit(\"bodl_checkout_payment_complete\")}exitCheckout(){this.bodlEvents.emit(\"bodl_checkout_exit\")}_trackCompletedStep(e){this._completedSteps[e]=!0;const t={[xC.SHIPPING]:this._trackShippingStepCompleted.bind(this)}[e];t?t():this.bodlEvents.emit(\"bodl_checkout_step_completed\",{step:e})}_trackShippingStepCompleted(){var e,t;const n=null===(t=null===(e=this.state)||void 0===e?void 0:e.getSelectedShippingOption())||void 0===t?void 0:t.description,i=this._getCommonCheckoutData();i&&n&&this.bodlEvents.emitShippingDetailsProvidedEvent(Object.assign(Object.assign({},i),{shipping_method:n}))}_getCommonCheckoutData(){var e;const t=null===(e=this.state)||void 0===e?void 0:e.getCheckout();if(!t)return null;const{cart:{cartAmount:n,currency:i,lineItems:r,id:o,coupons:a},channelId:s}=t;return{event_id:o,currency:i.code,cart_value:n,coupon_codes:a.map(e=>e.code.toUpperCase()),line_items:this._getProducts(r,i.code),channel_id:s}}_getProducts(e,t){const n=(e.customItems||[]).map(e=>({product_id:e.id,sku:e.sku,base_price:e.listPrice,sale_price:e.listPrice,purchase_price:e.listPrice,quantity:e.quantity,product_name:e.name,currency:t})),i=e.giftCertificates.map(e=>({product_id:e.id,gift_certificate_id:e.id,base_price:e.amount,sale_price:e.amount,purchase_price:e.amount,product_name:e.name,gift_certificate_name:e.name,gift_certificate_theme:e.theme,quantity:1,currency:t}));return[...n,...[...e.physicalItems,...e.digitalItems].map(e=>{let n;return e.options&&e.options.length&&(n=e.options.map(e=>`${e.name}:${e.value}`),n.sort()),{product_id:e.productId,quantity:e.quantity,product_name:e.name,base_price:e.listPrice,sale_price:e.salePrice,purchase_price:e.salePrice>0?e.salePrice:e.listPrice,sku:e.sku,variant_id:e.variantId,discount:e.discountAmount,coupon_amount:e.couponAmount,brand_name:e.brand,currency:t,category_names:(i=e,Array.isArray(i.categoryNames)?i.categoryNames:Array.isArray(i.categories)?(0,lodash__WEBPACK_IMPORTED_MODULE_5__.flatten)(i.categories).map(({name:e})=>e):[]),retail_price:e.retailPrice};// removed by dead control flow\n{ var i; }}),...i].map(e=>Object.assign(Object.assign({},e),{product_id:String(e.product_id)}))}_hasStepCompleted(e){return this._completedSteps[e]}}class jC{checkoutBegin(){}orderPurchased(){}stepCompleted(){}customerEmailEntry(){}customerSuggestionInit(){}customerSuggestionExecute(){}customerPaymentMethodExecuted(){}showShippingMethods(){}selectedPaymentMethod(){}clickPayButton(){}paymentRejected(){}paymentComplete(){}exitCheckout(){}}function UC(e){return function(e){return\"bodlEvents\"in e}(window)?new BC(e,window.bodlEvents.checkout):new jC}\n//# sourceMappingURL=checkout-sdk.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9kaXN0L2VzbS9jaGVja291dC1zZGsuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3L0QsUUFBUSxRQUFRLFVBQVUsb05BQUMsQ0FBQyxTQUFTLFVBQVUsMEVBQUMsRUFBRSxPQUFPLGVBQWUsWUFBWSwrQkFBK0IsYUFBYSxZQUFZLHVDQUF1QyxhQUFhLGlFQUFpRSx1QkFBdUIsRUFBRSxnRUFBZ0UsNEZBQTRGLGVBQWUsd0NBQXdDLFNBQVMsR0FBRyxVQUFVLGtCQUFrQixrOUNBQWs5QyxFQUFFLFVBQVUsa0JBQWtCLDhoR0FBOGhHLEVBQUUsZ0JBQWdCLG1CQUFtQiw2QkFBNkIsNkNBQUUsQ0FBQyx5Q0FBRSxJQUFJLGlEQUFFLENBQUMsMEVBQUMsa0JBQWtCLGlEQUFFLENBQUMsMEVBQUMsU0FBUztBQUFBLFVBQUssQ0FBQyxrQkFBa0IsMnlDQUEyeUMsRUFBRSx1QkFBdUIsZUFBZSxNQUFNLHVUQUF1VCxhQUFhLDgyQkFBODJCLFdBQVcsR0FBRyxvQkFBb0IsZUFBZSxrQkFBa0IsVUFBVSxxR0FBcUcsZ0ZBQWdGLGdHQUFnRyx3RkFBd0Ysd0ZBQXdGLDhIQUE4SCxrRkFBa0YsdUdBQXVHLHNGQUFzRixpSEFBaUgsOEhBQThILG1IQUFtSCx1R0FBdUcsNkVBQTZFLDJFQUEyRSxhQUFhLHdXQUF3VyxXQUFXLEdBQUcsb0JBQW9CLGVBQWUsdUtBQXVLLE9BQU8sU0FBUyxpQkFBaUIsd0RBQXdELHFCQUFxQixXQUFXLGdEQUFnRCx1Q0FBdUMsaUNBQWlDLDhCQUE4Qiw2Q0FBNkMsTUFBTSxNQUFNLE1BQU0sVUFBVSxtQkFBbUIsU0FBUyxzRkFBc0YsNkRBQTZELFFBQVEsc0NBQXNDLFdBQVcsNkZBQTZGLFNBQVMsZ0JBQWdCLGdDQUFnQyxPQUFPLFNBQVMsU0FBUywrQ0FBQyxJQUFJLE9BQU8s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dUJBQXVCLDJCQUEyQixTQUFTLDBEQUEwRCxJQUFJLDJEQUEyRCxPQUFPLEVBQUUsOEJBQThCLFFBQVEsMkpBQTJKLHFGQUFxRixLQUFLLGtCQUFrQixHQUFHLHlCQUF5QixNQUFNLGlFQUFpRSxrQkFBa0IsTUFBTSxNQUFNLG1EQUFtRCxhQUFhLEdBQUcsT0FBTyx5SUFBeUksa0JBQWtCLHFDQUFxQyxzSkFBc0osaUNBQWlDLCtNQUErTSxHQUFHLDhEQUE4RCxNQUFNLDJEQUEyRCxPQUFPLEdBQUcsUUFBUSxjQUFjLHVYQUF1WCwrQ0FBQyxxQkFBcUIsT0FBTyxzQ0FBc0M7QUFBQSxVQUFLLENBQUMsNkNBQTZDLEtBQUssZ0NBQWdDLEdBQUcscUJBQXFCLGdDQUFnQyxTQUFTLGlCQUFpQixrQkFBa0IsaUJBQWlCLHNCQUFzQiwwQkFBMEIsNkJBQTZCLGlDQUFpQyx1QkFBdUIseUJBQXlCLGtCQUFrQixtQkFBbUIsbUJBQW1CLGlCQUFpQixlQUFlLG1CQUFtQix1QkFBdUIscURBQStkO0FBQzlpczZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9kaXN0L2VzbS9jaGVja291dC1zZGsuanM/ZDIxOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQqYXMgZSBmcm9tXCJpZnJhbWUtcmVzaXplclwiO2ltcG9ydCphcyB0IGZyb21cImlmcmFtZS1yZXNpemVyL2pzL2lmcmFtZVJlc2l6ZXIuY29udGVudFdpbmRvd1wiO2ltcG9ydHtjcmVhdGVSZXF1ZXN0U2VuZGVyIGFzIG4sY3JlYXRlVGltZW91dCBhcyBpfWZyb21cIkBiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlclwiO2ltcG9ydHtTY3JpcHRMb2FkZXIgYXMgcixjcmVhdGVTY3JpcHRMb2FkZXIgYXMgbyxnZXRTY3JpcHRMb2FkZXIgYXMgYSxnZXRTdHlsZXNoZWV0TG9hZGVyIGFzIHN9ZnJvbVwiQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXJcIjtpbXBvcnR7Y29tYmluZVJlZHVjZXJzIGFzIGQsY29tcG9zZVJlZHVjZXJzIGFzIGMsY3JlYXRlQWN0aW9uIGFzIGwsY3JlYXRlRGF0YVN0b3JlIGFzIHUsY3JlYXRlRXJyb3JBY3Rpb24gYXMgaCxkZWVwRnJlZXplIGFzIHB9ZnJvbVwiQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmVcIjtpbXBvcnR7Y29uZCBhcyBtLGNvbnN0YW50IGFzIHksZGlmZmVyZW5jZSBhcyBnLGVhY2ggYXMgdixmaWx0ZXIgYXMgZixmaW5kIGFzIFMsZmluZEluZGV4IGFzIF8sZmxhdE1hcCBhcyB3LGZsYXR0ZW4gYXMgQyxnZXQgYXMgSSxpZGVudGl0eSBhcyBiLGluY2x1ZGVzIGFzIFAsaXNBcnJheSBhcyBPLGlzRW1wdHkgYXMgRSxpc0VxdWFsIGFzIEEsaXNNYXRjaCBhcyBrLGlzTmlsIGFzIFQsaXNPYmplY3QgYXMgRCxpc1BsYWluT2JqZWN0IGFzIE0saXNTdHJpbmcgYXMgeixpc1VuZGVmaW5lZCBhcyBOLGtlYmFiQ2FzZSBhcyB4LGtleUJ5IGFzIEYsa2V5cyBhcyBSLGxhc3QgYXMgTCxtYXAgYXMgQixtYXggYXMgaixtZW1vaXplIGFzIFUsbWVyZ2UgYXMgcSxub29wIGFzIFYsb21pdCBhcyBHLG9taXRCeSBhcyBILG92ZXJTb21lIGFzICQscGljayBhcyBXLHBpY2tCeSBhcyBZLHJlZHVjZSBhcyBLLHJvdW5kIGFzIEosc29tZSBhcyBaLHN0dWJUcnVlIGFzIFEsdHJhbnNmb3JtIGFzIFgsdW5pb24gYXMgZWUsdW5pcSBhcyB0ZSx1bmlxdWVJZCBhcyBuZSx2YWx1ZXMgYXMgaWUsd2l0aG91dCBhcyByZX1mcm9tXCJsb2Rhc2hcIjtpbXBvcnR7T2JzZXJ2YWJsZSBhcyBvZSxTdWJqZWN0IGFzIGFlLGNvbmNhdCBhcyBzZSxkZWZlciBhcyBkZSxlbXB0eSBhcyBjZSxmcm9tIGFzIGxlLGZyb21FdmVudCBhcyB1ZSxtZXJnZSBhcyBoZSxub29wIGFzIHBlLG9mIGFzIG1lLHRocm93RXJyb3IgYXMgeWV9ZnJvbVwicnhqc1wiO2ltcG9ydHtjYXRjaEVycm9yIGFzIGdlLGRlbGF5IGFzIHZlLGRpc3RpbmN0VW50aWxDaGFuZ2VkIGFzIGZlLGZpbHRlciBhcyBTZSxtYXAgYXMgX2UscmV0cnlXaGVuIGFzIHdlLHNoYXJlUmVwbGF5IGFzIENlLHN3aXRjaE1hcCBhcyBJZSx0YWtlIGFzIGJlfWZyb21cInJ4anMvb3BlcmF0b3JzXCI7aW1wb3J0e21lbW9pemUgYXMgUGUsbWVtb2l6ZU9uZSBhcyBPZX1mcm9tXCJAYmlnY29tbWVyY2UvbWVtb2l6ZVwiO2ltcG9ydHtjcmVhdGVGb3JtUG9zdGVyIGFzIEVlfWZyb21cIkBiaWdjb21tZXJjZS9mb3JtLXBvc3RlclwiO2ltcG9ydHtzdXBwb3J0c1BvcHVwcyBhcyBBZX1mcm9tXCJAYnJhaW50cmVlL2Jyb3dzZXItZGV0ZWN0aW9uXCI7aW1wb3J0e2RlZmF1bHQgYXMga2V9ZnJvbVwibG9jYWwtc3RvcmFnZS1mYWxsYmFja1wiO2ltcG9ydHtjcmVhdGVDbGllbnQgYXMgVGV9ZnJvbVwiQGJpZ2NvbW1lcmNlL2JpZ3BheS1jbGllbnRcIjtpbXBvcnR7Y3JlZGl0Q2FyZFR5cGUgYXMgRGUsbnVtYmVyIGFzIE1lfWZyb21cImNhcmQtdmFsaWRhdG9yXCI7aW1wb3J0e2V4Y2x1ZGUgYXMgemUscGFyc2VVcmwgYXMgTmUsc3RyaW5naWZ5VXJsIGFzIHhlfWZyb21cInF1ZXJ5LXN0cmluZ1wiO2ltcG9ydHtjcmVhdGVTZWxlY3RvciBhcyBGZSxjcmVhdGVTZWxlY3RvckNyZWF0b3IgYXMgUmUsZGVmYXVsdE1lbW9pemUgYXMgTGV9ZnJvbVwicmVzZWxlY3RcIjtpbXBvcnR7ZGVmYXVsdCBhcyBCZX1mcm9tXCJzaGFsbG93ZXF1YWxcIjtpbXBvcnR7SW50bE1lc3NhZ2VGb3JtYXQgYXMgamV9ZnJvbVwiaW50bC1tZXNzYWdlZm9ybWF0XCI7aW1wb3J0e2RlZmF1bHQgYXMgVWV9ZnJvbVwibWVzc2FnZWZvcm1hdFwiO3ZhciBxZT17Nzg1OnQ9Pnt0LmV4cG9ydHM9ZX0sOTM5OmU9PntlLmV4cG9ydHM9dH19LFZlPXt9O2Z1bmN0aW9uIEdlKGUpe3ZhciB0PVZlW2VdO2lmKHZvaWQgMCE9PXQpcmV0dXJuIHQuZXhwb3J0czt2YXIgbj1WZVtlXT17ZXhwb3J0czp7fX07cmV0dXJuIHFlW2VdKG4sbi5leHBvcnRzLEdlKSxuLmV4cG9ydHN9R2UuZD0oZSx0KT0+e2Zvcih2YXIgbiBpbiB0KUdlLm8odCxuKSYmIUdlLm8oZSxuKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTohMCxnZXQ6dFtuXX0pfSxHZS5vPShlLHQpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KSxHZS5yPWU9PntcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfTt2YXIgSGU9e307R2UucihIZSksR2UuZChIZSx7Y3JlYXRlQW1hem9uUGF5VjJDdXN0b21lclN0cmF0ZWd5OigpPT5kbixjcmVhdGVBcHBsZVBheUN1c3RvbWVyU3RyYXRlZ3k6KCk9PkJuLGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNDdXN0b21lclN0cmF0ZWd5OigpPT51aSxjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5OigpPT5EaSxjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJDdXN0b21lclN0cmF0ZWd5OigpPT5OaSxjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lclN0cmF0ZWd5OigpPT5SaSxjcmVhdGVCb2x0Q3VzdG9tZXJTdHJhdGVneTooKT0+V2ksY3JlYXRlQnJhaW50cmVlRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5OigpPT5mcixjcmVhdGVCcmFpbnRyZWVQYXlwYWxDcmVkaXRDdXN0b21lclN0cmF0ZWd5OigpPT51cixjcmVhdGVCcmFpbnRyZWVQYXlwYWxDdXN0b21lclN0cmF0ZWd5OigpPT5kcixjcmVhdGVCcmFpbnRyZWVWaXNhQ2hlY2tvdXRDdXN0b21lclN0cmF0ZWd5OigpPT53cixjcmVhdGVHb29nbGVQYXlBZHllblYyQ3VzdG9tZXJTdHJhdGVneTooKT0+S3IsY3JlYXRlR29vZ2xlUGF5QWR5ZW5WM0N1c3RvbWVyU3RyYXRlZ3k6KCk9PkpyLGNyZWF0ZUdvb2dsZVBheUF1dGhvcml6ZURvdE5ldEN1c3RvbWVyU3RyYXRlZ3k6KCk9PlFyLGNyZWF0ZUdvb2dsZVBheUJpZ0NvbW1lcmNlUGF5bWVudHNDdXN0b21lclN0cmF0ZWd5OigpPT5UbyxjcmVhdGVHb29nbGVQYXlCbnpDdXN0b21lclN0cmF0ZWd5OigpPT5hbyxjcmVhdGVHb29nbGVQYXlCcmFpbnRyZWVDdXN0b21lclN0cmF0ZWd5OigpPT53byxjcmVhdGVHb29nbGVQYXlDaGVja291dENvbUN1c3RvbWVyU3RyYXRlZ3k6KCk9PmlvLGNyZWF0ZUdvb2dsZVBheUN5YmVyc291cmNlQ3VzdG9tZXJTdHJhdGVneTooKT0+b28sY3JlYXRlR29vZ2xlUGF5T3JiaXRhbEN1c3RvbWVyU3RyYXRlZ3k6KCk9PmNvLGNyZWF0ZUdvb2dsZVBheVBheVBhbENvbW1lcmNlQ3VzdG9tZXJTdHJhdGVneTooKT0+RW8sY3JlYXRlR29vZ2xlUGF5U3RyaXBlQ3VzdG9tZXJTdHJhdGVneTooKT0+eW8sY3JlYXRlR29vZ2xlUGF5U3RyaXBlVXBlQ3VzdG9tZXJTdHJhdGVneTooKT0+Z28sY3JlYXRlR29vZ2xlUGF5VGRPbmxpbmVNYXJ0Q3VzdG9tZXJTdHJhdGVneTooKT0+Tm8sY3JlYXRlR29vZ2xlUGF5V29ybGRwYXlBY2Nlc3NDdXN0b21lclN0cmF0ZWd5OigpPT5mbyxjcmVhdGVQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVyU3RyYXRlZ3k6KCk9PmVhLGNyZWF0ZVBheVBhbENvbW1lcmNlQ3VzdG9tZXJTdHJhdGVneTooKT0+Wm8sY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3k6KCk9PlNhLGNyZWF0ZVBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lclN0cmF0ZWd5OigpPT5pYSxjcmVhdGVTdHJpcGVMaW5rVjJDdXN0b21lclN0cmF0ZWd5OigpPT4kYSxjcmVhdGVTdHJpcGVVUEVDdXN0b21lclN0cmF0ZWd5OigpPT54YX0pO3ZhciAkZT17fTtHZS5yKCRlKSxHZS5kKCRlLHtjcmVhdGVBZHllblYyUGF5bWVudFN0cmF0ZWd5OigpPT5JZCxjcmVhdGVBZHllblYzUGF5bWVudFN0cmF0ZWd5OigpPT5BZCxjcmVhdGVBZmZpcm1QYXltZW50U3RyYXRlZ3k6KCk9PnpkLGNyZWF0ZUFmdGVycGF5UGF5bWVudFN0cmF0ZWd5OigpPT5qZCxjcmVhdGVBbWF6b25QYXlWMlBheW1lbnRTdHJhdGVneTooKT0+VmQsY3JlYXRlQXBwbGVQYXlQYXltZW50U3RyYXRlZ3k6KCk9PldkLGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3k6KCk9Pl9jLGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneTooKT0+dmMsY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudFN0cmF0ZWd5OigpPT5uYyxjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50U3RyYXRlZ3k6KCk9PmFjLGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50U3RyYXRlZ3k6KCk9PlFkLGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5UGF5bWVudFN0cmF0ZWd5OigpPT5sYyxjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50U3RyYXRlZ3k6KCk9PkljLGNyZWF0ZUJsdWVTbmFwRGlyZWN0QVBNUGF5bWVudFN0cmF0ZWd5OigpPT5WYyxjcmVhdGVCbHVlU25hcERpcmVjdENyZWRpdENhcmRQYXltZW50U3RyYXRlZ3k6KCk9PlVjLGNyZWF0ZUJsdWVTbmFwVjJQYXltZW50U3RyYXRlZ3k6KCk9PlljLGNyZWF0ZUJvbHRQYXltZW50U3RyYXRlZ3k6KCk9PnRsLGNyZWF0ZUJyYWludHJlZUFjaFBheW1lbnRTdHJhdGVneTooKT0+b2wsY3JlYXRlQnJhaW50cmVlQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneTooKT0+TWwsY3JlYXRlQnJhaW50cmVlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3k6KCk9PndsLGNyZWF0ZUJyYWludHJlZUxvY2FsTWV0aG9kc1BheW1lbnRTdHJhdGVneTooKT0+dmwsY3JlYXRlQnJhaW50cmVlUGF5cGFsUGF5bWVudFN0cmF0ZWd5OigpPT5wbCxjcmVhdGVCcmFpbnRyZWVWZW5tb1BheW1lbnRTdHJhdGVneTooKT0+YmwsY3JlYXRlQ2hlY2tvdXRDb21BUE1QYXltZW50U3RyYXRlZ3k6KCk9PlpsLGNyZWF0ZUNoZWNrb3V0Q29tQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneTooKT0+R2wsY3JlYXRlQ2hlY2tvdXRDb21GYXdyeVBheW1lbnRTdHJhdGVneTooKT0+QmwsY3JlYXRlQ2hlY2tvdXRDb21JZGVhbFBheW1lbnRTdHJhdGVneTooKT0+WWwsY3JlYXRlQ2hlY2tvdXRDb21TZXBhUGF5bWVudFN0cmF0ZWd5OigpPT4kbCxjcmVhdGVDbGVhcnBheVBheW1lbnRTdHJhdGVneTooKT0+dHUsY3JlYXRlQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneTooKT0+bnUsY3JlYXRlQ3liZXJTb3VyY2VQYXltZW50U3RyYXRlZ3k6KCk9PnZ1LGNyZWF0ZUN5YmVyU291cmNlVjJQYXltZW50U3RyYXRlZ3k6KCk9PkN1LGNyZWF0ZUV4dGVybmFsUGF5bWVudFN0cmF0ZWd5OigpPT5idSxjcmVhdGVHb29nbGVQYXlBZHllblYyUGF5bWVudFN0cmF0ZWd5OigpPT5UdSxjcmVhdGVHb29nbGVQYXlBZHllblYzUGF5bWVudFN0cmF0ZWd5OigpPT56dSxjcmVhdGVHb29nbGVQYXlBdXRob3JpemVOZXRQYXltZW50U3RyYXRlZ3k6KCk9Pk51LGNyZWF0ZUdvb2dsZVBheUJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50U3RyYXRlZ3k6KCk9Pkp1LGNyZWF0ZUdvb2dsZVBheUJyYWludHJlZVBheW1lbnRTdHJhdGVneTooKT0+anUsY3JlYXRlR29vZ2xlUGF5Q2hlY2tvdXRDb21QYXltZW50U3RyYXRlZ3k6KCk9Pnh1LGNyZWF0ZUdvb2dsZVBheUN5YmVyc291cmNlUGF5bWVudFN0cmF0ZWd5OigpPT5GdSxjcmVhdGVHb29nbGVQYXlPcmJpdGFsUGF5bWVudFN0cmF0ZWd5OigpPT5SdSxjcmVhdGVHb29nbGVQYXlQUENQUGF5bWVudFN0cmF0ZWd5OigpPT5IdSxjcmVhdGVHb29nbGVQYXlTdHJpcGVQYXltZW50U3RyYXRlZ3k6KCk9Pkx1LGNyZWF0ZUdvb2dsZVBheVRkT25saW5lTWFydFBheW1lbnRTdHJhdGVneTooKT0+WnUsY3JlYXRlR29vZ2xlUGF5V29ybGRwYXlBY2Nlc3NQYXltZW50U3RyYXRlZ3k6KCk9PkJ1LGNyZWF0ZUh1bW1QYXltZW50U3RyYXRlZ3k6KCk9PmVoLGNyZWF0ZUtsYXJuYVBheW1lbnRTdHJhdGVneTooKT0+YWgsY3JlYXRlS2xhcm5hVjJQYXltZW50U3RyYXRlZ3k6KCk9PnVoLGNyZWF0ZUxlZ2FjeVBheW1lbnRTdHJhdGVneTooKT0+cGgsY3JlYXRlTW9sbGllUGF5bWVudFN0cmF0ZWd5OigpPT5TaCxjcmVhdGVNb25lcmlzUGF5bWVudFN0cmF0ZWd5OigpPT5JaCxjcmVhdGVOb1BheW1lbnRTdHJhdGVneTooKT0+UGgsY3JlYXRlT2ZmbGluZVBheW1lbnRTdHJhdGVneTooKT0+RWgsY3JlYXRlT2Zmc2l0ZVBheW1lbnRTdHJhdGVneTooKT0+VGgsY3JlYXRlUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3k6KCk9PkdoLGNyZWF0ZVBheVBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3k6KCk9PlloLGNyZWF0ZVBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudFN0cmF0ZWd5OigpPT5MaCxjcmVhdGVQYXlQYWxDb21tZXJjZUZhc3RsYW5lUGF5bWVudFN0cmF0ZWd5OigpPT50cCxjcmVhdGVQYXlQYWxDb21tZXJjZVBheW1lbnRTdHJhdGVneTooKT0+eGgsY3JlYXRlUGF5UGFsQ29tbWVyY2VSYXRlUGF5UGF5bWVudFN0cmF0ZWd5OigpPT5aaCxjcmVhdGVQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudFN0cmF0ZWd5OigpPT5VaCxjcmVhdGVQYXlQYWxQcm9QYXltZW50U3RyYXRlZ3k6KCk9PnJwLGNyZWF0ZVNhZ2VQYXlQYXltZW50U3RyYXRlZ3k6KCk9PmFwLGNyZWF0ZVNlenpsZVBheW1lbnRTdHJhdGVneTooKT0+ZHAsY3JlYXRlU3F1YXJlVjJQYXltZW50U3RyYXRlZ3k6KCk9PmdwLGNyZWF0ZVN0cmlwZU9DU1BheW1lbnRTdHJhdGVneTooKT0+eHAsY3JlYXRlU3RyaXBlVVBFUGF5bWVudFN0cmF0ZWd5OigpPT5NcCxjcmVhdGVTdHJpcGVWM1BheW1lbnRTdHJhdGVneTooKT0+RXAsY3JlYXRlVERPbmxpbmVNYXJ0UGF5bWVudFN0cmF0ZWd5OigpPT5qcCxjcmVhdGVXb3JsZHBheUFjY2Vzc1BheW1lbnRTdHJhdGVneTooKT0+SHAsY3JlYXRlWmlwUGF5bWVudFN0cmF0ZWd5OigpPT5ZcH0pO3ZhciBXZSxZZSxLZT17fTtmdW5jdGlvbiBKZShlLHQsbil7cmV0dXJuKGk9dCkmJmkudHlwZSYmaS5lcnJvcj9zZShtZSh0KSx5ZShoKGUsdC5wYXlsb2FkLG4pKSk6eWUoaChlLHQsbikpO3ZhciBpfUdlLnIoS2UpLEdlLmQoS2Use2NyZWF0ZUFtYXpvblBheVYyQnV0dG9uU3RyYXRlZ3k6KCk9PlRfLGNyZWF0ZUFwcGxlUGF5QnV0dG9uU3RyYXRlZ3k6KCk9PnhfLGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneTooKT0+R18sY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvblN0cmF0ZWd5OigpPT5MXyxjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJCdXR0b25TdHJhdGVneTooKT0+VV8sY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQnV0dG9uU3RyYXRlZ3k6KCk9PldfLGNyZWF0ZUJvbHRCdXR0b25TdHJhdGVneTooKT0+S18sY3JlYXRlQnJhaW50cmVlUGF5cGFsQnV0dG9uU3RyYXRlZ3k6KCk9PmV3LGNyZWF0ZUJyYWludHJlZVBheXBhbENyZWRpdEJ1dHRvblN0cmF0ZWd5OigpPT5pdyxjcmVhdGVCcmFpbnRyZWVWZW5tb0J1dHRvblN0cmF0ZWd5OigpPT5odyxjcmVhdGVCcmFpbnRyZWVWaXNhQ2hlY2tvdXRCdXR0b25TdHJhdGVneTooKT0+YXcsY3JlYXRlR29vZ2xlUGF5QWR5ZW5WMkJ1dHRvblN0cmF0ZWd5OigpPT5mdyxjcmVhdGVHb29nbGVQYXlBZHllblYzQnV0dG9uU3RyYXRlZ3k6KCk9PlN3LGNyZWF0ZUdvb2dsZVBheUF1dGhvcml6ZURvdE5ldEJ1dHRvblN0cmF0ZWd5OigpPT5fdyxjcmVhdGVHb29nbGVQYXlCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uU3RyYXRlZ3k6KCk9PnZ3LGNyZWF0ZUdvb2dsZVBheUJyYWludHJlZUJ1dHRvblN0cmF0ZWd5OigpPT55dyxjcmVhdGVHb29nbGVQYXlDaGVja291dENvbUJ1dHRvblN0cmF0ZWd5OigpPT53dyxjcmVhdGVHb29nbGVQYXlDeWJlcnNvdXJjZUJ1dHRvblN0cmF0ZWd5OigpPT5DdyxjcmVhdGVHb29nbGVQYXlPcmJpdGFsQnV0dG9uU3RyYXRlZ3k6KCk9Pkl3LGNyZWF0ZUdvb2dsZVBheVBheVBhbENvbW1lcmNlQnV0dG9uU3RyYXRlZ3k6KCk9Pmd3LGNyZWF0ZUdvb2dsZVBheVN0cmlwZUJ1dHRvblN0cmF0ZWd5OigpPT5idyxjcmVhdGVHb29nbGVQYXlUZE9ubGluZU1hcnRCdXR0b25TdHJhdGVneTooKT0+T3csY3JlYXRlR29vZ2xlUGF5V29ybGRwYXlBY2Nlc3NCdXR0b25TdHJhdGVneTooKT0+UHcsY3JlYXRlUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneTooKT0+THcsY3JlYXRlUGF5UGFsQ29tbWVyY2VCdXR0b25TdHJhdGVneTooKT0+a3csY3JlYXRlUGF5UGFsQ29tbWVyY2VDcmVkaXRCdXR0b25TdHJhdGVneTooKT0+TXcsY3JlYXRlUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvblN0cmF0ZWd5OigpPT54dyxjcmVhdGVQYXlwYWxFeHByZXNzQnV0dG9uU3RyYXRlZ3k6KCk9Pld3fSk7Y2xhc3MgWmUgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXt2YXIgdDtzdXBlcihlfHxcIkFuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLlwiKSx0aGlzLm5hbWU9XCJTdGFuZGFyZEVycm9yXCIsdGhpcy50eXBlPVwic3RhbmRhcmRcIix0PW5ldy50YXJnZXQucHJvdG90eXBlLE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyx0KTp0aGlzLl9fcHJvdG9fXz10LFwiZnVuY3Rpb25cIj09dHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsbmV3LnRhcmdldCk6dGhpcy5zdGFjaz1uZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFja319IWZ1bmN0aW9uKGUpe2VbZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3M9MF09XCJNaXNzaW5nQmlsbGluZ0FkZHJlc3NcIixlW2UuTWlzc2luZ0NhcnQ9MV09XCJNaXNzaW5nQ2FydFwiLGVbZS5NaXNzaW5nQ2hlY2tvdXQ9Ml09XCJNaXNzaW5nQ2hlY2tvdXRcIixlW2UuTWlzc2luZ0NvbnNpZ25tZW50cz0zXT1cIk1pc3NpbmdDb25zaWdubWVudHNcIixlW2UuTWlzc2luZ0N1c3RvbWVyPTRdPVwiTWlzc2luZ0N1c3RvbWVyXCIsZVtlLk1pc3NpbmdDaGVja291dENvbmZpZz01XT1cIk1pc3NpbmdDaGVja291dENvbmZpZ1wiLGVbZS5NaXNzaW5nT3JkZXI9Nl09XCJNaXNzaW5nT3JkZXJcIixlW2UuTWlzc2luZ09yZGVyQ29uZmlnPTddPVwiTWlzc2luZ09yZGVyQ29uZmlnXCIsZVtlLk1pc3NpbmdPcmRlcklkPThdPVwiTWlzc2luZ09yZGVySWRcIixlW2UuTWlzc2luZ1BheW1lbnQ9OV09XCJNaXNzaW5nUGF5bWVudFwiLGVbZS5NaXNzaW5nUGF5bWVudElkPTEwXT1cIk1pc3NpbmdQYXltZW50SWRcIixlW2UuTWlzc2luZ1BheW1lbnRJbnN0cnVtZW50PTExXT1cIk1pc3NpbmdQYXltZW50SW5zdHJ1bWVudFwiLGVbZS5NaXNzaW5nUGF5bWVudE1ldGhvZD0xMl09XCJNaXNzaW5nUGF5bWVudE1ldGhvZFwiLGVbZS5NaXNzaW5nUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXI9MTNdPVwiTWlzc2luZ1BheW1lbnRQcm92aWRlckN1c3RvbWVyXCIsZVtlLk1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmw9MTRdPVwiTWlzc2luZ1BheW1lbnRSZWRpcmVjdFVybFwiLGVbZS5NaXNzaW5nUGF5bWVudFN0YXR1cz0xNV09XCJNaXNzaW5nUGF5bWVudFN0YXR1c1wiLGVbZS5NaXNzaW5nUGF5bWVudFRva2VuPTE2XT1cIk1pc3NpbmdQYXltZW50VG9rZW5cIixlW2UuTWlzc2luZ1NoaXBwaW5nQWRkcmVzcz0xN109XCJNaXNzaW5nU2hpcHBpbmdBZGRyZXNzXCJ9KFdlfHwoV2U9e30pKTtjbGFzcyBRZSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe3N1cGVyKGZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIFdlLk1pc3NpbmdCaWxsaW5nQWRkcmVzczpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgYmlsbGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBXZS5NaXNzaW5nQ2FydDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2FydCBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2UgV2UuTWlzc2luZ0NvbnNpZ25tZW50czpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBXZS5NaXNzaW5nQ2hlY2tvdXQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNoZWNrb3V0IGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBXZS5NaXNzaW5nQ3VzdG9tZXI6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGN1c3RvbWVyIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBXZS5NaXNzaW5nQ2hlY2tvdXRDb25maWc6Y2FzZSBXZS5NaXNzaW5nT3JkZXJDb25maWc6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbmZpZ3VyYXRpb24gZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIFdlLk1pc3NpbmdPcmRlcjpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIFdlLk1pc3NpbmdPcmRlcklkOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC5cIjtjYXNlIFdlLk1pc3NpbmdQYXltZW50OnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBXZS5NaXNzaW5nUGF5bWVudFRva2VuOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgdG9rZW4gcmVxdWlyZWQgdG8gc3VibWl0IGEgcGF5bWVudCBpcyBtaXNzaW5nLlwiO2Nhc2UgV2UuTWlzc2luZ1BheW1lbnRNZXRob2Q6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuXCI7Y2FzZSBXZS5NaXNzaW5nUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXI6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgcHJvdmlkZXIgY3VzdG9tZXIgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBXZS5NaXNzaW5nU2hpcHBpbmdBZGRyZXNzOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBzaGlwcGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7ZGVmYXVsdDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGRhdGEgaXMgdW5hdmFpbGFibGUuXCJ9fShlKSksdGhpcy5zdWJ0eXBlPWUsdGhpcy5uYW1lPVwiTWlzc2luZ0RhdGFFcnJvclwiLHRoaXMudHlwZT1cIm1pc3NpbmdfZGF0YVwifX0hZnVuY3Rpb24oZSl7ZS5VcGRhdGVCaWxsaW5nQWRkcmVzc1JlcXVlc3RlZD1cIlVQREFURV9CSUxMSU5HX0FERFJFU1NfUkVRVUVTVEVEXCIsZS5VcGRhdGVCaWxsaW5nQWRkcmVzc1N1Y2NlZWRlZD1cIlVQREFURV9CSUxMSU5HX0FERFJFU1NfU1VDQ0VFREVEXCIsZS5VcGRhdGVCaWxsaW5nQWRkcmVzc0ZhaWxlZD1cIlVQREFURV9CSUxMSU5HX0FERFJFU1NfRkFJTEVEXCIsZS5Db250aW51ZUFzR3Vlc3RSZXF1ZXN0ZWQ9XCJDT05USU5VRV9BU19HVUVTVF9SRVFVRVNURURcIixlLkNvbnRpbnVlQXNHdWVzdFN1Y2NlZWRlZD1cIkNPTlRJTlVFX0FTX0dVRVNUX1NVQ0NFRURFRFwiLGUuQ29udGludWVBc0d1ZXN0RmFpbGVkPVwiQ09OVElOVUVfQVNfR1VFU1RfRkFJTEVEXCJ9KFllfHwoWWU9e30pKTtjbGFzcyBYZSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiVW5hYmxlIHRvIGNvbnRpbnVlIGFzIGEgZ3Vlc3QgYmVjYXVzZSB0aGUgY3VzdG9tZXIgaXMgYWxyZWFkeSBzaWduZWQgaW4uXCIpLHRoaXMubmFtZT1cIlVuYWJsZVRvQ29udGludWVBc0d1ZXN0RXJyb3JcIix0aGlzLnR5cGU9XCJ1bmFibGVfdG9fY29udGludWVfYXNfZ3Vlc3RcIn19dmFyIGV0O2NsYXNzIHR0e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lLHRoaXMuX3N1YnNjcmlwdGlvbkFjdGlvbkNyZWF0b3I9dH1jb250aW51ZUFzR3Vlc3QoZSx0KXtyZXR1cm4gbj0+e2NvbnN0IGk9bi5nZXRTdGF0ZSgpLHI9aS5jaGVja291dC5nZXRDaGVja291dCgpO2lmKCFyKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXQpO2NvbnN0IG89aS5jdXN0b21lci5nZXRDdXN0b21lcigpO2lmKG8mJiFvLmlzR3Vlc3QpdGhyb3cgbmV3IFhlO2NvbnN0IGE9aS5iaWxsaW5nQWRkcmVzcy5nZXRCaWxsaW5nQWRkcmVzcygpO2xldCBzO2lmKGEpe2NvbnN0e2NvdW50cnk6dH09YSxuPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0oYSxbXCJjb3VudHJ5XCJdKTtzPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxuKSxlKX1lbHNlIHM9ZTtjb25zdCBkPSFFKGEpO3JldHVybiBoZShzZShtZShsKFllLkNvbnRpbnVlQXNHdWVzdFJlcXVlc3RlZCkpLGRlKCgpPT57cmV0dXJuIGU9dGhpcyxuPXZvaWQgMCxvPWZ1bmN0aW9uKigpe2NvbnN0e2JvZHk6ZX09eWllbGQgdGhpcy5fY3JlYXRlT3JVcGRhdGVCaWxsaW5nQWRkcmVzcyhyLmlkLHMsZCx0KTtyZXR1cm4gbChZZS5Db250aW51ZUFzR3Vlc3RTdWNjZWVkZWQsZSl9LG5ldygoaT12b2lkIDApfHwoaT1Qcm9taXNlKSkoZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBhKGUpe3RyeXtkKG8ubmV4dChlKSl9Y2F0Y2goZSl7cihlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChvLnRocm93KGUpKX1jYXRjaChlKXtyKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciBuO2UuZG9uZT90KGUudmFsdWUpOihuPWUudmFsdWUsbiBpbnN0YW5jZW9mIGk/bjpuZXcgaShmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChvPW8uYXBwbHkoZSxufHxbXSkpLm5leHQoKSl9KTt2YXIgZSxuLGksb30pKS5waXBlKGdlKGU9PkplKFllLkNvbnRpbnVlQXNHdWVzdEZhaWxlZCxlKSkpLHRoaXMuX3VwZGF0ZUN1c3RvbWVyQ29uc2VudChlLHQpKX19dXBkYXRlQWRkcmVzcyhlLHQpe3JldHVybiBuPT5vZS5jcmVhdGUoaT0+e2NvbnN0IHI9bi5nZXRTdGF0ZSgpLG89ci5jaGVja291dC5nZXRDaGVja291dCgpO2lmKCFvKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXQpO2kubmV4dChsKFllLlVwZGF0ZUJpbGxpbmdBZGRyZXNzUmVxdWVzdGVkKSk7Y29uc3QgYT1yLmJpbGxpbmdBZGRyZXNzLmdldEJpbGxpbmdBZGRyZXNzKCkscz0hRShhKSxkPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7ZW1haWw6dm9pZCAwPT09ZS5lbWFpbCYmYT9hLmVtYWlsOmUuZW1haWx9KTthJiZhLmlkJiYoZC5pZD1hLmlkKSx0aGlzLl9jcmVhdGVPclVwZGF0ZUJpbGxpbmdBZGRyZXNzKG8uaWQsZCxzLHQpLnRoZW4oKHtib2R5OmV9KT0+e2kubmV4dChsKFllLlVwZGF0ZUJpbGxpbmdBZGRyZXNzU3VjY2VlZGVkLGUpKSxpLmNvbXBsZXRlKCl9KS5jYXRjaChlPT57aS5lcnJvcihoKFllLlVwZGF0ZUJpbGxpbmdBZGRyZXNzRmFpbGVkLGUpKX0pfSl9X3VwZGF0ZUN1c3RvbWVyQ29uc2VudCh7ZW1haWw6ZSxhY2NlcHRzQWJhbmRvbmVkQ2FydEVtYWlsczp0LGFjY2VwdHNNYXJrZXRpbmdOZXdzbGV0dGVyOm59LGkpe3JldHVybiBudWxsPT10JiZudWxsPT1uP2NlKCk6dGhpcy5fc3Vic2NyaXB0aW9uQWN0aW9uQ3JlYXRvci51cGRhdGVTdWJzY3JpcHRpb25zKHtlbWFpbDplLGFjY2VwdHNNYXJrZXRpbmdOZXdzbGV0dGVyOm58fCExLGFjY2VwdHNBYmFuZG9uZWRDYXJ0RW1haWxzOnR8fCExfSxpKX1fY3JlYXRlT3JVcGRhdGVCaWxsaW5nQWRkcmVzcyhlLHQsbixpKXtyZXR1cm4gbj90aGlzLl9yZXF1ZXN0U2VuZGVyLnVwZGF0ZUFkZHJlc3MoZSx0LGkpOnRoaXMuX3JlcXVlc3RTZW5kZXIuY3JlYXRlQWRkcmVzcyhlLHQsaSl9fWNsYXNzIG50IGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJZb3VyIGNoZWNrb3V0IGNvdWxkIG5vdCBiZSBwcm9jZXNzZWQgYmVjYXVzZSB5b3VyIGNhcnQgaXMgZW1wdHkuIFBsZWFzZSBhZGQgaXRlbXMgdG8geW91ciBjYXJ0IGFuZCB0cnkgYWdhaW4uXCIpLHRoaXMubmFtZT1cIkVtcHR5Q2FydEVycm9yXCIsdGhpcy50eXBlPVwiZW1wdHlfY2FydFwifX0hZnVuY3Rpb24oZSl7ZS5Kc29uPVwiYXBwbGljYXRpb24vanNvblwiLGUuSnNvblYxPVwiYXBwbGljYXRpb24vdm5kLmJjLnYxK2pzb25cIn0oZXR8fChldD17fSkpO2NvbnN0IGl0PWV0LHJ0PXtcIlgtQ2hlY2tvdXQtU0RLLVZlcnNpb25cIjpcIjEuODAzLjBcIn07Y29uc3Qgb3Q9e2luY2x1ZGU6W1wiY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5vcHRpb25zXCIsXCJjYXJ0LmxpbmVJdGVtcy5kaWdpdGFsSXRlbXMub3B0aW9uc1wiLFwiY3VzdG9tZXJcIixcInByb21vdGlvbnMuYmFubmVyc1wiXS5qb2luKFwiLFwiKX07Y2xhc3MgYXR7Y29uc3RydWN0b3IoZSl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lfWNyZWF0ZUFkZHJlc3MoZSx0LHt0aW1lb3V0Om59PXt9KXtjb25zdCBpPWAvYXBpL3N0b3JlZnJvbnQvY2hlY2tvdXRzLyR7ZX0vYmlsbGluZy1hZGRyZXNzYCxyPU9iamVjdC5hc3NpZ24oe0FjY2VwdDppdC5Kc29uVjF9LHJ0KTtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5wb3N0KGkse2JvZHk6dCxwYXJhbXM6b3QsaGVhZGVyczpyLHRpbWVvdXQ6bn0pLmNhdGNoKGU9PntpZihcImVtcHR5X2NhcnRcIj09PWUuYm9keS50eXBlKXRocm93IG5ldyBudDt0aHJvdyBlfSl9dXBkYXRlQWRkcmVzcyhlLHQse3RpbWVvdXQ6bn09e30pe2NvbnN0e2lkOml9PXQscj1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KHQsW1wiaWRcIl0pLG89YC9hcGkvc3RvcmVmcm9udC9jaGVja291dHMvJHtlfS9iaWxsaW5nLWFkZHJlc3MvJHtpfWAsYT1PYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxfSxydCk7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucHV0KG8se3BhcmFtczpvdCxib2R5OnIsaGVhZGVyczphLHRpbWVvdXQ6bn0pLmNhdGNoKGU9PntpZihcImVtcHR5X2NhcnRcIj09PWUuYm9keS50eXBlKXRocm93IG5ldyBudDt0aHJvdyBlfSl9fXZhciBzdCxkdDtmdW5jdGlvbiBjdChlLHQpe2NvbnN0IG49dSgoZSx0KT0+dC50eXBlPT09c3QuU3luY2hyb25pemU/dC5wYXlsb2FkOmUsZS5nZXRTdGF0ZSgpLHtzdGF0ZVRyYW5zZm9ybWVyOnR9KTtyZXR1cm4gZS5zdWJzY3JpYmUoZT0+e24uZGlzcGF0Y2gobChzdC5TeW5jaHJvbml6ZSxlKSl9LHtpbml0aWFsOiExfSksbn0hZnVuY3Rpb24oZSl7ZS5TeW5jaHJvbml6ZT1cIlNZTkNIUk9OSVpFXCJ9KHN0fHwoc3Q9e30pKSxmdW5jdGlvbihlKXtlLkNsZWFyRXJyb3I9XCJDTEVBUl9FUlJPUlwifShkdHx8KGR0PXt9KSk7Y2xhc3MgbHR7Y2xlYXJFcnJvcihlKXtyZXR1cm57dHlwZTpkdC5DbGVhckVycm9yLHBheWxvYWQ6ZX19fWZ1bmN0aW9uIHV0KCl7dHJ5e3JldHVyblwicHJvZHVjdGlvblwifWNhdGNoKGUpe3JldHVyblwiZGV2ZWxvcG1lbnRcIn19Y2xhc3MgaHR7Y29uc3RydWN0b3IoZSl7dGhpcy5fY29uc29sZT1lfWxvZyguLi5lKXt0aGlzLl9sb2dUb0NvbnNvbGUoXCJsb2dcIiwuLi5lKX1pbmZvKC4uLmUpe3RoaXMuX2xvZ1RvQ29uc29sZShcImluZm9cIiwuLi5lKX13YXJuKC4uLmUpe3RoaXMuX2xvZ1RvQ29uc29sZShcIndhcm5cIiwuLi5lKX1lcnJvciguLi5lKXt0aGlzLl9sb2dUb0NvbnNvbGUoXCJlcnJvclwiLC4uLmUpfWRlYnVnKC4uLmUpe3RoaXMuX2xvZ1RvQ29uc29sZShcImRlYnVnXCIsLi4uZSl9X2xvZ1RvQ29uc29sZShlLC4uLnQpe3RoaXMuX2NvbnNvbGUmJnRoaXMuX2NvbnNvbGVbZV0mJnRoaXMuX2NvbnNvbGVbZV0uY2FsbCh0aGlzLl9jb25zb2xlLC4uLnQpfX1jbGFzcyBwdHtsb2coKXt9aW5mbygpe313YXJuKCl7fWVycm9yKCl7fWRlYnVnKCl7fX1jb25zdCBtdD1mdW5jdGlvbihlPSEwKXtyZXR1cm4gZT9uZXcgaHQoY29uc29sZSk6bmV3IHB0fShcInRlc3RcIiE9PXV0KCkpO2Z1bmN0aW9uIHl0KCl7cmV0dXJuIG10fWZ1bmN0aW9uIGd0KGUsdCxuKXtjb25zdCBpPW5ldyBXZWFrTWFwO2Z1bmN0aW9uIHIoZSl7cmV0dXJuKC4uLm4pPT57Y29uc3Qgcj1uW24ubGVuZ3RoLTFdLHt1c2VDYWNoZTpvfT0oYT1yKSYmXCJib29sZWFuXCI9PXR5cGVvZiBhLnVzZUNhY2hlP3I6e3VzZUNhY2hlOiExfTt2YXIgYTtpZighbylyZXR1cm4gZS5jYWxsKHRoaXMsLi4ubik7Y29uc3Qgcz1pLmdldCh0aGlzKXx8e307dmFyIGQ7cmV0dXJuIGkuZ2V0KHRoaXMpfHxpLnNldCh0aGlzLHMpLHNbdF18fChzW3RdPShkPWUsUGUoZnVuY3Rpb24oLi4uZSl7Y29uc3QgdD1kLmNhbGwodGhpcywuLi5lKTtyZXR1cm4gdCBpbnN0YW5jZW9mIG9lP2xlKHQpLnBpcGUoQ2UoKSk6XCJmdW5jdGlvblwiPT10eXBlb2YgdD9QZShlPT5sZSh0KGUpKS5waXBlKENlKCkpLHtpc0VxdWFsOkF9KTp0fSx7aXNFcXVhbDpBfSkpKSxzW3RdLmNhbGwodGhpcywuLi5uKX19cmV0dXJue2dldCgpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4udmFsdWUpdGhyb3cgbmV3IEVycm9yKFwiRGVjb3JhdG9yIHNob3VsZCBiZSB1c2VkIGluIGZ1bmN0aW9uc1wiKTtjb25zdCBlPXIuY2FsbCh0aGlzLG4udmFsdWUpO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyx0LE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxuKSx7dmFsdWU6ZX0pKSxlfX19dmFyIHZ0OyFmdW5jdGlvbihlKXtlLkxvYWRDb25maWdSZXF1ZXN0ZWQ9XCJMT0FEX0NPTkZJR19SRVFVRVNURURcIixlLkxvYWRDb25maWdTdWNjZWVkZWQ9XCJMT0FEX0NPTkZJR19TVUNDRUVERURcIixlLkxvYWRDb25maWdGYWlsZWQ9XCJMT0FEX0NPTkZJR19GQUlMRURcIn0odnR8fCh2dD17fSkpO2NsYXNzIGZ0e2NvbnN0cnVjdG9yKGUpe3RoaXMuX2NvbmZpZ1JlcXVlc3RTZW5kZXI9ZX1sb2FkQ29uZmlnKGUpe3JldHVybiBvZS5jcmVhdGUodD0+e3QubmV4dChsKHZ0LkxvYWRDb25maWdSZXF1ZXN0ZWQpKSx0aGlzLl9jb25maWdSZXF1ZXN0U2VuZGVyLmxvYWRDb25maWcoZSkudGhlbihlPT57dC5uZXh0KGwodnQuTG9hZENvbmZpZ1N1Y2NlZWRlZCxlLmJvZHkpKSx0LmNvbXBsZXRlKCl9KS5jYXRjaChlPT57dC5lcnJvcihoKHZ0LkxvYWRDb25maWdGYWlsZWQsZSkpfSl9KX19IWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxhPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pOmk7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpYT1SZWZsZWN0LmRlY29yYXRlKGUsdCxuLGkpO2Vsc2UgZm9yKHZhciBzPWUubGVuZ3RoLTE7cz49MDtzLS0pKHI9ZVtzXSkmJihhPShvPDM/cihhKTpvPjM/cih0LG4sYSk6cih0LG4pKXx8YSk7bz4zJiZhJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLGEpfShbZ3RdLGZ0LnByb3RvdHlwZSxcImxvYWRDb25maWdcIixudWxsKTtjb25zdCBTdD17Ym9keTp7fSxoZWFkZXJzOnt9LHN0YXR1czowfTtjbGFzcyBfdCBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUse21lc3NhZ2U6dCxlcnJvcnM6bn09e30pe2NvbnN0e2JvZHk6aSxoZWFkZXJzOnIsc3RhdHVzOm99PWV8fFN0O3N1cGVyKHR8fFwiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuXCIpLHRoaXMubmFtZT1cIlJlcXVlc3RFcnJvclwiLHRoaXMudHlwZT1cInJlcXVlc3RcIix0aGlzLmJvZHk9aSx0aGlzLmhlYWRlcnM9cix0aGlzLnN0YXR1cz1vLHRoaXMuZXJyb3JzPW58fFtdfX1jbGFzcyB3dCBleHRlbmRzIF90e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUse21lc3NhZ2U6ZS5ib2R5LnRpdGxlfSksdGhpcy5uYW1lPVwiQ2hlY2tvdXROb3RBdmFpbGFibGVFcnJvclwiLHRoaXMudHlwZT1cImNoZWNrb3V0X25vdF9hdmFpbGFibGVcIn19Y29uc3QgQ3Q9XCJUaGlzIEFQSSBlbmRwb2ludCBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHkgYW5kIG1heSBjaGFuZ2UgaW4gdGhlIGZ1dHVyZVwiO2NsYXNzIEl0e2NvbnN0cnVjdG9yKGUpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZX1sb2FkQ29uZmlnKHt0aW1lb3V0OmUscGFyYW1zOnR9PXt9KXtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5nZXQoXCIvYXBpL3N0b3JlZnJvbnQvY2hlY2tvdXQtc2V0dGluZ3NcIix7dGltZW91dDplLGhlYWRlcnM6T2JqZWN0LmFzc2lnbih7QWNjZXB0Oml0Lkpzb25WMSxcIlgtQVBJLUlOVEVSTkFMXCI6Q3R9LHJ0KSxwYXJhbXM6dH0pLmNhdGNoKGU9PntpZihlLnN0YXR1cz49NDAwJiZlLnN0YXR1czw1MDApdGhyb3cgbmV3IHd0KGUpO3Rocm93IGV9KX19dmFyIGJ0OyFmdW5jdGlvbihlKXtlLkFwcGx5Q291cG9uUmVxdWVzdGVkPVwiQVBQTFlfQ09VUE9OX1JFUVVFU1RFRFwiLGUuQXBwbHlDb3Vwb25TdWNjZWVkZWQ9XCJBUFBMWV9DT1VQT05fU1VDQ0VFREVEXCIsZS5BcHBseUNvdXBvbkZhaWxlZD1cIkFQUExZX0NPVVBPTl9GQUlMRURcIixlLlJlbW92ZUNvdXBvblJlcXVlc3RlZD1cIlJFTU9WRV9DT1VQT05fUkVRVUVTVEVEXCIsZS5SZW1vdmVDb3Vwb25TdWNjZWVkZWQ9XCJSRU1PVkVfQ09VUE9OX1NVQ0NFRURFRFwiLGUuUmVtb3ZlQ291cG9uRmFpbGVkPVwiUkVNT1ZFX0NPVVBPTl9GQUlMRURcIn0oYnR8fChidD17fSkpO2NsYXNzIFB0e2NvbnN0cnVjdG9yKGUpe3RoaXMuX2NvdXBvblJlcXVlc3RTZW5kZXI9ZX1hcHBseUNvdXBvbihlLHQpe3JldHVybiBuPT5vZS5jcmVhdGUoaT0+e2NvbnN0IHI9bi5nZXRTdGF0ZSgpLmNoZWNrb3V0LmdldENoZWNrb3V0KCk7aWYoIXIpdGhyb3cgbmV3IFFlKFdlLk1pc3NpbmdDaGVja291dCk7aS5uZXh0KGwoYnQuQXBwbHlDb3Vwb25SZXF1ZXN0ZWQpKSx0aGlzLl9jb3Vwb25SZXF1ZXN0U2VuZGVyLmFwcGx5Q291cG9uKHIuaWQsZSx0KS50aGVuKCh7Ym9keTplfSk9PntpLm5leHQobChidC5BcHBseUNvdXBvblN1Y2NlZWRlZCxlKSksaS5jb21wbGV0ZSgpfSkuY2F0Y2goZT0+e2kuZXJyb3IoaChidC5BcHBseUNvdXBvbkZhaWxlZCxlKSl9KX0pfXJlbW92ZUNvdXBvbihlLHQpe3JldHVybiBuPT5vZS5jcmVhdGUoaT0+e2NvbnN0IHI9bi5nZXRTdGF0ZSgpLmNoZWNrb3V0LmdldENoZWNrb3V0KCk7aWYoIXIpdGhyb3cgbmV3IFFlKFdlLk1pc3NpbmdDaGVja291dCk7aS5uZXh0KGwoYnQuUmVtb3ZlQ291cG9uUmVxdWVzdGVkKSksdGhpcy5fY291cG9uUmVxdWVzdFNlbmRlci5yZW1vdmVDb3Vwb24oci5pZCxlLHQpLnRoZW4oKHtib2R5OmV9KT0+e2kubmV4dChsKGJ0LlJlbW92ZUNvdXBvblN1Y2NlZWRlZCxlKSksaS5jb21wbGV0ZSgpfSkuY2F0Y2goZT0+e2kuZXJyb3IoaChidC5SZW1vdmVDb3Vwb25GYWlsZWQsZSkpfSl9KX19Y29uc3QgT3Q9W1wiY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5vcHRpb25zXCIsXCJjYXJ0LmxpbmVJdGVtcy5kaWdpdGFsSXRlbXMub3B0aW9uc1wiLFwiY3VzdG9tZXJcIixcImN1c3RvbWVyLmN1c3RvbWVyR3JvdXBcIixcInBheW1lbnRzXCIsXCJwcm9tb3Rpb25zLmJhbm5lcnNcIl07dmFyIEV0LEF0LGt0LFR0O2Z1bmN0aW9uIER0KGUpe3JldHVybiB0ZShlKS5qb2luKFwiLFwiKX0hZnVuY3Rpb24oZSl7ZS5BdmFpbGFibGVTaGlwcGluZ09wdGlvbnM9XCJjb25zaWdubWVudHMuYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zXCIsZS5QaHlzaWNhbEl0ZW1zQ2F0ZWdvcnlOYW1lcz1cImNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMuY2F0ZWdvcnlOYW1lc1wiLGUuRGlnaXRhbEl0ZW1zQ2F0ZWdvcnlOYW1lcz1cImNhcnQubGluZUl0ZW1zLmRpZ2l0YWxJdGVtcy5jYXRlZ29yeU5hbWVzXCJ9KEV0fHwoRXQ9e30pKTtjbGFzcyBNdHtjb25zdHJ1Y3RvcihlKXt0aGlzLl9yZXF1ZXN0U2VuZGVyPWV9YXBwbHlDb3Vwb24oZSx0LHt0aW1lb3V0Om59PXt9KXtjb25zdCBpPWAvYXBpL3N0b3JlZnJvbnQvY2hlY2tvdXRzLyR7ZX0vY291cG9uc2Ascj1PYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxfSxydCk7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdChpLHtoZWFkZXJzOnIsdGltZW91dDpuLHBhcmFtczp7aW5jbHVkZTpEdChbLi4uT3QsRXQuQXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zXSl9LGJvZHk6e2NvdXBvbkNvZGU6dH19KS5jYXRjaChlPT57aWYoXCJlbXB0eV9jYXJ0XCI9PT1lLmJvZHkudHlwZSl0aHJvdyBuZXcgbnQ7dGhyb3cgZX0pfXJlbW92ZUNvdXBvbihlLHQse3RpbWVvdXQ6bn09e30pe2NvbnN0IGk9YC9hcGkvc3RvcmVmcm9udC9jaGVja291dHMvJHtlfS9jb3Vwb25zLyR7dH1gLHI9T2JqZWN0LmFzc2lnbih7QWNjZXB0Oml0Lkpzb25WMX0scnQpO3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLmRlbGV0ZShpLHtoZWFkZXJzOnIsdGltZW91dDpuLHBhcmFtczp7aW5jbHVkZTpEdChbLi4uT3QsRXQuQXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zXSl9fSkuY2F0Y2goZT0+e2lmKFwiZW1wdHlfY2FydFwiPT09ZS5ib2R5LnR5cGUpdGhyb3cgbmV3IG50O3Rocm93IGV9KX19IWZ1bmN0aW9uKGUpe2UuQXBwbHlHaWZ0Q2VydGlmaWNhdGVSZXF1ZXN0ZWQ9XCJBUFBMWV9HSUZUX0NFUlRJRklDQVRFX1JFUVVFU1RFRFwiLGUuQXBwbHlHaWZ0Q2VydGlmaWNhdGVTdWNjZWVkZWQ9XCJBUFBMWV9HSUZUX0NFUlRJRklDQVRFX1NVQ0NFRURFRFwiLGUuQXBwbHlHaWZ0Q2VydGlmaWNhdGVGYWlsZWQ9XCJBUFBMWV9HSUZUX0NFUlRJRklDQVRFX0ZBSUxFRFwiLGUuUmVtb3ZlR2lmdENlcnRpZmljYXRlUmVxdWVzdGVkPVwiUkVNT1ZFX0dJRlRfQ0VSVElGSUNBVEVfUkVRVUVTVEVEXCIsZS5SZW1vdmVHaWZ0Q2VydGlmaWNhdGVTdWNjZWVkZWQ9XCJSRU1PVkVfR0lGVF9DRVJUSUZJQ0FURV9TVUNDRUVERURcIixlLlJlbW92ZUdpZnRDZXJ0aWZpY2F0ZUZhaWxlZD1cIlJFTU9WRV9HSUZUX0NFUlRJRklDQVRFX0ZBSUxFRFwifShBdHx8KEF0PXt9KSk7Y2xhc3MgenR7Y29uc3RydWN0b3IoZSl7dGhpcy5fZ2lmdENlcnRpZmljYXRlUmVxdWVzdFNlbmRlcj1lfWFwcGx5R2lmdENlcnRpZmljYXRlKGUsdCl7cmV0dXJuIG49Pm9lLmNyZWF0ZShpPT57Y29uc3Qgcj1uLmdldFN0YXRlKCkuY2hlY2tvdXQuZ2V0Q2hlY2tvdXQoKTtpZighcil0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NoZWNrb3V0KTtpLm5leHQobChBdC5BcHBseUdpZnRDZXJ0aWZpY2F0ZVJlcXVlc3RlZCkpLHRoaXMuX2dpZnRDZXJ0aWZpY2F0ZVJlcXVlc3RTZW5kZXIuYXBwbHlHaWZ0Q2VydGlmaWNhdGUoci5pZCxlLHQpLnRoZW4oKHtib2R5OmV9KT0+e2kubmV4dChsKEF0LkFwcGx5R2lmdENlcnRpZmljYXRlU3VjY2VlZGVkLGUpKSxpLmNvbXBsZXRlKCl9KS5jYXRjaChlPT57aS5lcnJvcihoKEF0LkFwcGx5R2lmdENlcnRpZmljYXRlRmFpbGVkLGUpKX0pfSl9cmVtb3ZlR2lmdENlcnRpZmljYXRlKGUsdCl7cmV0dXJuIG49Pm9lLmNyZWF0ZShpPT57Y29uc3Qgcj1uLmdldFN0YXRlKCkuY2hlY2tvdXQuZ2V0Q2hlY2tvdXQoKTtpZighcil0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NoZWNrb3V0KTtpLm5leHQobChBdC5SZW1vdmVHaWZ0Q2VydGlmaWNhdGVSZXF1ZXN0ZWQpKSx0aGlzLl9naWZ0Q2VydGlmaWNhdGVSZXF1ZXN0U2VuZGVyLnJlbW92ZUdpZnRDZXJ0aWZpY2F0ZShyLmlkLGUsdCkudGhlbigoe2JvZHk6ZX0pPT57aS5uZXh0KGwoQXQuUmVtb3ZlR2lmdENlcnRpZmljYXRlU3VjY2VlZGVkLGUpKSxpLmNvbXBsZXRlKCl9KS5jYXRjaChlPT57aS5lcnJvcihoKEF0LlJlbW92ZUdpZnRDZXJ0aWZpY2F0ZUZhaWxlZCxlKSl9KX0pfX1jbGFzcyBOdHtjb25zdHJ1Y3RvcihlKXt0aGlzLl9yZXF1ZXN0U2VuZGVyPWV9YXBwbHlHaWZ0Q2VydGlmaWNhdGUoZSx0LHt0aW1lb3V0Om59PXt9KXtjb25zdCBpPWAvYXBpL3N0b3JlZnJvbnQvY2hlY2tvdXRzLyR7ZX0vZ2lmdC1jZXJ0aWZpY2F0ZXNgLHI9T2JqZWN0LmFzc2lnbih7QWNjZXB0Oml0Lkpzb25WMX0scnQpO3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoaSx7aGVhZGVyczpyLHRpbWVvdXQ6bixwYXJhbXM6e2luY2x1ZGU6RHQoT3QpfSxib2R5OntnaWZ0Q2VydGlmaWNhdGVDb2RlOnR9fSkuY2F0Y2goZT0+e2lmKFwiZW1wdHlfY2FydFwiPT09ZS5ib2R5LnR5cGUpdGhyb3cgbmV3IG50O3Rocm93IGV9KX1yZW1vdmVHaWZ0Q2VydGlmaWNhdGUoZSx0LHt0aW1lb3V0Om59PXt9KXtjb25zdCBpPWAvYXBpL3N0b3JlZnJvbnQvY2hlY2tvdXRzLyR7ZX0vZ2lmdC1jZXJ0aWZpY2F0ZXMvJHt0fWAscj1PYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxfSxydCk7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIuZGVsZXRlKGkse2hlYWRlcnM6cix0aW1lb3V0Om4scGFyYW1zOntpbmNsdWRlOkR0KE90KX19KS5jYXRjaChlPT57aWYoXCJlbXB0eV9jYXJ0XCI9PT1lLmJvZHkudHlwZSl0aHJvdyBuZXcgbnQ7dGhyb3cgZX0pfX1mdW5jdGlvbiB4dChlKXtyZXR1cm4gZSYmXCJyZXNvbHZlSWRzXCJpbiBlfWNsYXNzIEZ0IGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuXCIpLHRoaXMubmFtZT1cIkludmFsaWRBcmd1bWVudEVycm9yXCIsdGhpcy50eXBlPVwiaW52YWxpZF9hcmd1bWVudFwifX1jbGFzcyBSdHtjb25zdHJ1Y3RvcihlKXt2YXIgdCxuLGk7dGhpcy5fZmFjdG9yaWVzPXt9LHRoaXMuX2luc3RhbmNlcz17fSx0aGlzLl9kZWZhdWx0VG9rZW49bnVsbCE9PSh0PW51bGw9PWU/dm9pZCAwOmUuZGVmYXVsdFRva2VuKSYmdm9pZCAwIT09dD90OlwiZGVmYXVsdFwiLHRoaXMuX3VzZUZhbGxiYWNrPW51bGw9PT0obj1udWxsPT1lP3ZvaWQgMDplLnVzZUZhbGxiYWNrKXx8dm9pZCAwPT09bnx8bix0aGlzLl90b2tlblJlc29sdmVyPW51bGwhPT0oaT1udWxsPT1lP3ZvaWQgMDplLnRva2VuUmVzb2x2ZXIpJiZ2b2lkIDAhPT1pP2k6ZT0+ZX1nZXQoZSx0KXt0cnl7cmV0dXJuIHRoaXMuX2dldEluc3RhbmNlKGV8fHRoaXMuX2RlZmF1bHRUb2tlbix0fHxlfHx0aGlzLl9kZWZhdWx0VG9rZW4pfWNhdGNoKGUpe2lmKCF0aGlzLl91c2VGYWxsYmFjayl0aHJvdyBlO3JldHVybiB0aGlzLl9nZXRJbnN0YW5jZSh0aGlzLl9kZWZhdWx0VG9rZW4sdHx8dGhpcy5fZGVmYXVsdFRva2VuKX19cmVnaXN0ZXIoZSx0KXtpZih0aGlzLl9oYXNGYWN0b3J5KGUpKXRocm93IG5ldyBGdChgJyR7ZX0nIGlzIGFscmVhZHkgcmVnaXN0ZXJlZC5gKTt0aGlzLl9mYWN0b3JpZXNbZV09dH1faGFzRmFjdG9yeShlKXtyZXR1cm4hIXRoaXMuX2ZhY3Rvcmllc1tlXX1faGFzSW5zdGFuY2UoZSl7cmV0dXJuISF0aGlzLl9pbnN0YW5jZXNbZV19X2dldEluc3RhbmNlKGUsdCl7aWYoIXRoaXMuX2hhc0luc3RhbmNlKHQpKXtjb25zdCBuPXRoaXMuX3Rva2VuUmVzb2x2ZXIoZSxPYmplY3Qua2V5cyh0aGlzLl9mYWN0b3JpZXMpKSxpPW4mJnRoaXMuX2ZhY3Rvcmllc1tuXTtpZighaSl0aHJvdyBuZXcgRnQoYCcke2V9JyBpcyBub3QgcmVnaXN0ZXJlZC5gKTt0aGlzLl9pbnN0YW5jZXNbdF09aSgpfXJldHVybiB0aGlzLl9pbnN0YW5jZXNbdF19fWNsYXNzIEx0e2NvbnN0cnVjdG9yKGU9ITEpe3RoaXMuX3VzZUZhbGxiYWNrPWUsdGhpcy5fcmVnaXN0cnk9bmV3IFJ0KHt0b2tlblJlc29sdmVyOnRoaXMuX3Jlc29sdmVUb2tlbi5iaW5kKHRoaXMpLHVzZUZhbGxiYWNrOnRoaXMuX3VzZUZhbGxiYWNrfSl9Z2V0KGUpe3JldHVybiB0aGlzLl9yZWdpc3RyeS5nZXQodGhpcy5fZW5jb2RlVG9rZW4oZSkpfXJlZ2lzdGVyKGUsdCl7dGhpcy5fcmVnaXN0cnkucmVnaXN0ZXIodGhpcy5fZW5jb2RlVG9rZW4oZSksdCl9X2VuY29kZVRva2VuKGUpe3JldHVybiBidG9hKEpTT04uc3RyaW5naWZ5KGUpKX1fZGVjb2RlVG9rZW4oZSl7cmV0dXJuIEpTT04ucGFyc2UoYXRvYihlKSl9X3Jlc29sdmVUb2tlbihlLHQpe3ZhciBuO2NvbnN0IGk9dGhpcy5fZGVjb2RlVG9rZW4oZSkscj1bXTt0LmZvckVhY2goZT0+e2NvbnN0IHQ9dGhpcy5fZGVjb2RlVG9rZW4oZSksbj17dG9rZW46ZSxtYXRjaGVzOjAsZGVmYXVsdDohMX07Zm9yKGNvbnN0W2Uscl1vZiBPYmplY3QuZW50cmllcyh0KSl7aWYoZSBpbiBpJiZpW2VdIT09cil7bi5tYXRjaGVzPTA7YnJlYWt9ZSBpbiBpJiZpW2VdPT09ciYmbi5tYXRjaGVzKyssXCJkZWZhdWx0XCI9PT1lJiYhMD09PXImJihuLmRlZmF1bHQ9ITApfXIucHVzaChuKX0pO2NvbnN0IG89ci5zb3J0KChlLHQpPT50Lm1hdGNoZXMtZS5tYXRjaGVzKS5maWx0ZXIoZT0+ZS5tYXRjaGVzPjApO28ubGVuZ3RoPjEmJm9bMF0ubWF0Y2hlcz09PW9bMV0ubWF0Y2hlcyYmXCJkZXZlbG9wbWVudFwiPT09dXQoKSYmeXQoKS53YXJuKFwiVGhlIHByb3ZpZGVkIHF1ZXJ5IG1hdGNoZXMgYXQgbGVhc3QgdHdvIHN0cmF0ZWdpZXMgd2l0aCB0aGUgc2FtZSBzcGVjaWZpY2l0eS4gVGhpcyB3YXJuaW5nIGNhbiBiZSByZXNvbHZlZCBieSBtYWtpbmcgdGhlaXIgcmVzb2x2ZSBJRCBtb3JlIHNwZWNpZmljLlwiKTtjb25zdCBhPW9bMF07aWYoYSYmYS50b2tlbilyZXR1cm4gYS50b2tlbjtpZih0aGlzLl91c2VGYWxsYmFjayl7Y29uc3QgZT1udWxsPT09KG49ci5maW5kKGU9PmUuZGVmYXVsdCkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnRva2VuO2lmKGUpcmV0dXJuIGV9dGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIHJlc29sdmUgdG8gYSByZWdpc3RlcmVkIHRva2VuIHdpdGggdGhlIHByb3ZpZGVkIHRva2VuLlwiKX19Y2xhc3MgQnQgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXt2YXIgdDtzdXBlcihlfHxcIkFuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLlwiKSx0aGlzLm5hbWU9XCJTdGFuZGFyZEVycm9yXCIsdGhpcy50eXBlPVwic3RhbmRhcmRcIix0PW5ldy50YXJnZXQucHJvdG90eXBlLE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyx0KTp0aGlzLl9fcHJvdG9fXz10LFwiZnVuY3Rpb25cIj09dHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsbmV3LnRhcmdldCk6dGhpcy5zdGFjaz1uZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFja319IWZ1bmN0aW9uKGUpe2VbZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3M9MF09XCJNaXNzaW5nQmlsbGluZ0FkZHJlc3NcIixlW2UuTWlzc2luZ0NhcnQ9MV09XCJNaXNzaW5nQ2FydFwiLGVbZS5NaXNzaW5nQ2hlY2tvdXQ9Ml09XCJNaXNzaW5nQ2hlY2tvdXRcIixlW2UuTWlzc2luZ0NvbnNpZ25tZW50cz0zXT1cIk1pc3NpbmdDb25zaWdubWVudHNcIixlW2UuTWlzc2luZ0N1c3RvbWVyPTRdPVwiTWlzc2luZ0N1c3RvbWVyXCIsZVtlLk1pc3NpbmdDaGVja291dENvbmZpZz01XT1cIk1pc3NpbmdDaGVja291dENvbmZpZ1wiLGVbZS5NaXNzaW5nT3JkZXI9Nl09XCJNaXNzaW5nT3JkZXJcIixlW2UuTWlzc2luZ09yZGVyQ29uZmlnPTddPVwiTWlzc2luZ09yZGVyQ29uZmlnXCIsZVtlLk1pc3NpbmdPcmRlcklkPThdPVwiTWlzc2luZ09yZGVySWRcIixlW2UuTWlzc2luZ1BheW1lbnQ9OV09XCJNaXNzaW5nUGF5bWVudFwiLGVbZS5NaXNzaW5nUGF5bWVudElkPTEwXT1cIk1pc3NpbmdQYXltZW50SWRcIixlW2UuTWlzc2luZ1BheW1lbnRJbnN0cnVtZW50PTExXT1cIk1pc3NpbmdQYXltZW50SW5zdHJ1bWVudFwiLGVbZS5NaXNzaW5nUGF5bWVudE1ldGhvZD0xMl09XCJNaXNzaW5nUGF5bWVudE1ldGhvZFwiLGVbZS5NaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsPTEzXT1cIk1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmxcIixlW2UuTWlzc2luZ1BheW1lbnRTdGF0dXM9MTRdPVwiTWlzc2luZ1BheW1lbnRTdGF0dXNcIixlW2UuTWlzc2luZ1BheW1lbnRUb2tlbj0xNV09XCJNaXNzaW5nUGF5bWVudFRva2VuXCIsZVtlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M9MTZdPVwiTWlzc2luZ1NoaXBwaW5nQWRkcmVzc1wifShrdHx8KGt0PXt9KSk7Y2xhc3MganQgZXh0ZW5kcyBCdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSBrdC5NaXNzaW5nQmlsbGluZ0FkZHJlc3M6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2Uga3QuTWlzc2luZ0NhcnQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNhcnQgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIGt0Lk1pc3NpbmdDb25zaWdubWVudHM6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbnNpZ25tZW50cyBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2Uga3QuTWlzc2luZ0NoZWNrb3V0OnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2Uga3QuTWlzc2luZ0N1c3RvbWVyOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjdXN0b21lciBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2Uga3QuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOmNhc2Uga3QuTWlzc2luZ09yZGVyQ29uZmlnOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBrdC5NaXNzaW5nT3JkZXI6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBrdC5NaXNzaW5nT3JkZXJJZDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgSUQgaXMgdW5hdmFpbGFibGUgb3Igbm90IGdlbmVyYXRlZCB5ZXQuXCI7Y2FzZSBrdC5NaXNzaW5nUGF5bWVudDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2Uga3QuTWlzc2luZ1BheW1lbnRUb2tlbjpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHRva2VuIHJlcXVpcmVkIHRvIHN1Ym1pdCBhIHBheW1lbnQgaXMgbWlzc2luZy5cIjtjYXNlIGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IG1ldGhvZCBkYXRhIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBwcm9wZXJseSBjb25maWd1cmVkLlwiO2Nhc2Uga3QuTWlzc2luZ1NoaXBwaW5nQWRkcmVzczpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2RlZmF1bHQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBkYXRhIGlzIHVuYXZhaWxhYmxlLlwifX0oZSkpLHRoaXMuc3VidHlwZT1lLHRoaXMubmFtZT1cIk1pc3NpbmdEYXRhRXJyb3JcIix0aGlzLnR5cGU9XCJtaXNzaW5nX2RhdGFcIn19ZnVuY3Rpb24gVXQoZSl7cmV0dXJuIHQ9ZS5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5maWx0ZXIoZT0+IWUuYWRkZWRCeVByb21vdGlvbiksSyh0LChlLHQpPT5lK3QucXVhbnRpdHksMCk7dmFyIHR9ZnVuY3Rpb24gcXQoZSx0KXtpZihudWxsPT1lKXRocm93IHQ/dCgpOm5ldyBFcnJvcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLlwiKTtyZXR1cm4gZX0hZnVuY3Rpb24oZSl7ZVtlLkNoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQ9MF09XCJDaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkXCIsZVtlLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ9MV09XCJDdXN0b21lck5vdEluaXRpYWxpemVkXCIsZVtlLlBheW1lbnROb3RJbml0aWFsaXplZD0yXT1cIlBheW1lbnROb3RJbml0aWFsaXplZFwiLGVbZS5TaGlwcGluZ05vdEluaXRpYWxpemVkPTNdPVwiU2hpcHBpbmdOb3RJbml0aWFsaXplZFwiLGVbZS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkPTRdPVwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZFwifShUdHx8KFR0PXt9KSk7Y2xhc3MgVnQgZXh0ZW5kcyBCdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSBUdC5DdXN0b21lck5vdEluaXRpYWxpemVkOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuXCI7Y2FzZSBUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLlwiO2Nhc2UgVHQuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLlwiO2Nhc2UgVHQuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuXCI7ZGVmYXVsdDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuXCJ9fShlKSksdGhpcy5zdWJ0eXBlPWUsdGhpcy5uYW1lPVwiTm90SW5pdGlhbGl6ZWRFcnJvclwiLHRoaXMudHlwZT1cIm5vdF9pbml0aWFsaXplZFwifX1jb25zdCBHdD17ZGU6XCJldVwiLGpwOlwiZmVcIix1azpcImV1XCIsdXM6XCJuYVwifTt2YXIgSHQsJHQsV3QsWXQsS3QsSnQ7IWZ1bmN0aW9uKGUpe2UuZW5fVVM9XCJlbl9VU1wiLGUuZW5fR0I9XCJlbl9HQlwiLGUuZGVfREU9XCJkZV9ERVwiLGUuZnJfRlI9XCJmcl9GUlwiLGUuaXRfSVQ9XCJpdF9JVFwiLGUuZXNfRVM9XCJlc19FU1wiLGUuamFfSlA9XCJqYV9KUFwifShIdHx8KEh0PXt9KSksZnVuY3Rpb24oZSl7ZS5Ib21lPVwiSG9tZVwiLGUuUHJvZHVjdD1cIlByb2R1Y3RcIixlLkNhcnQ9XCJDYXJ0XCIsZS5DaGVja291dD1cIkNoZWNrb3V0XCIsZS5PdGhlcj1cIk90aGVyXCJ9KCR0fHwoJHQ9e30pKSxmdW5jdGlvbihlKXtlLlVTRD1cIlVTRFwiLGUuRVVSPVwiRVVSXCIsZS5HQlA9XCJHQlBcIixlLkpQWT1cIkpQWVwifShXdHx8KFd0PXt9KSksZnVuY3Rpb24oZSl7ZS5QYXlBbmRTaGlwPVwiUGF5QW5kU2hpcFwiLGUuUGF5T25seT1cIlBheU9ubHlcIn0oWXR8fChZdD17fSkpLGZ1bmN0aW9uKGUpe2UuR29sZD1cIkdvbGRcIixlLkxpZ2h0R3JheT1cIkxpZ2h0R3JheVwiLGUuRGFya0dyYXk9XCJEYXJrR3JheVwifShLdHx8KEt0PXt9KSksZnVuY3Rpb24oZSl7ZS5DMDAwMT1cIkMwMDAxXCJ9KEp0fHwoSnQ9e30pKTt2YXIgWnQ9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgUXR7Y29uc3RydWN0b3IoZSl7dGhpcy5hbWF6b25QYXlWMlNjcmlwdExvYWRlcj1lfWluaXRpYWxpemUoZSl7cmV0dXJuIFp0KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0aGlzLmFtYXpvblBheVYyU0RLPXlpZWxkIHRoaXMuYW1hem9uUGF5VjJTY3JpcHRMb2FkZXIubG9hZChlKSx0aGlzLmJ1dHRvblBhcmVudENvbnRhaW5lcj10aGlzLmJ1dHRvblBhcmVudENvbnRhaW5lcnx8dGhpcy5jcmVhdGVBbWF6b25QYXlCdXR0b25QYXJlbnRDb250YWluZXIoKX0pfWRlaW5pdGlhbGl6ZSgpe3ZhciBlO3JldHVybiB0aGlzLmFtYXpvblBheVYyQnV0dG9uPXZvaWQgMCxudWxsPT09KGU9dGhpcy5idXR0b25QYXJlbnRDb250YWluZXIpfHx2b2lkIDA9PT1lfHxlLnJlbW92ZSgpLHRoaXMuYnV0dG9uUGFyZW50Q29udGFpbmVyPXZvaWQgMCx0aGlzLmFtYXpvblBheVYyU0RLPXZvaWQgMCxQcm9taXNlLnJlc29sdmUoKX1iaW5kQnV0dG9uKGUsdCxuKXt0aGlzLmdldEFtYXpvblBheVYyU0RLKCkuUGF5LmJpbmRDaGFuZ2VBY3Rpb24oYCMke2V9YCx7YW1hem9uQ2hlY2tvdXRTZXNzaW9uSWQ6dCxjaGFuZ2VBY3Rpb246bn0pfWNyZWF0ZUJ1dHRvbihlLHQpe3RoaXMuYW1hem9uUGF5VjJCdXR0b249dGhpcy5nZXRBbWF6b25QYXlWMlNESygpLlBheS5yZW5kZXJCdXR0b24oYCMke2V9YCx0KX1wcmVwYXJlQ2hlY2tvdXQoZSl7Y29uc3QgdD10aGlzLnByZXBhcmVSZXF1ZXN0Q29uZmlnKGUpO3RoaXMuZ2V0QW1hem9uUGF5VjJCdXR0b24oKS5vbkNsaWNrKCgpPT57dGhpcy5nZXRBbWF6b25QYXlWMkJ1dHRvbigpLmluaXRDaGVja291dCh0KX0pfXByZXBhcmVDaGVja291dFdpdGhDcmVhdGlvblJlcXVlc3RDb25maWcoZSl7dGhpcy5nZXRBbWF6b25QYXlWMkJ1dHRvbigpLm9uQ2xpY2soKCk9Plp0KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIGUoKTtpZih0KXtjb25zdCBlPXRoaXMucHJlcGFyZVJlcXVlc3RDb25maWcodC5jcmVhdGVDaGVja291dFNlc3Npb25Db25maWcsdC5lc3RpbWF0ZWRPcmRlckFtb3VudCx0LnByb2R1Y3RUeXBlKTt0aGlzLmdldEFtYXpvblBheVYyQnV0dG9uKCkuaW5pdENoZWNrb3V0KGUpfX0pKX1zaWdub3V0KCl7cmV0dXJuIFp0KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5hbWF6b25QYXlWMlNESyYmdGhpcy5hbWF6b25QYXlWMlNESy5QYXkuc2lnbm91dCgpLFByb21pc2UucmVzb2x2ZSgpfSl9cmVuZGVyQW1hem9uUGF5QnV0dG9uKHtidXR0b25Db2xvcjplLGNoZWNrb3V0U3RhdGU6dCxjb250YWluZXJJZDpuLGRlY291cGxlQ2hlY2tvdXRJbml0aWF0aW9uOmk9ITEsbWV0aG9kSWQ6cixvcHRpb25zOm8scGxhY2VtZW50OmEsaXNCdXR0b25NaWNyb1RleHREaXNhYmxlZDpzPSExfSl7Y29uc3QgZD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtufWApO2lmKCFkKXJldHVybjtjb25zdHtpZDpjfT1kLmFwcGVuZENoaWxkKHRoaXMuZ2V0QnV0dG9uUGFyZW50Q29udGFpbmVyKCkpO28mJnMmJihvLmRlc2lnbj1KdC5DMDAwMSk7Y29uc3QgbD1udWxsIT1vP286dGhpcy5nZXRBbWF6b25QYXlWMkJ1dHRvbk9wdGlvbnModCxyLGEsaSxlKTtyZXR1cm4gdGhpcy5jcmVhdGVCdXR0b24oYyxsKSx0aGlzLmdldEJ1dHRvblBhcmVudENvbnRhaW5lcigpfXVwZGF0ZUJ1eU5vd0Zsb3dGbGFnKGUpe3RoaXMuaXNCdXlOb3dGbG93PUJvb2xlYW4oZSl9aXNQaDRFbmFibGVkKGUsdCl7Y29uc3Qgbj0hIWVbXCJQUk9KRUNULTM0ODMuYW1hem9uX3BheV9waDRcIl0saT0hIWVbXCJJTlQtNjg4NS5hbWF6b25fcGF5X3BoNF91c19vbmx5XCJdO3JldHVybiBuJiZpP1wiVVNcIj09PXQ6bn1wcmVwYXJlUmVxdWVzdENvbmZpZyhlLHQsbil7Y29uc3R7cHVibGljS2V5SWQ6aX09ZSxyPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0oZSxbXCJwdWJsaWNLZXlJZFwiXSk7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7Y3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnOnRoaXMuaXNFbnZpcm9ubWVudFNwZWNpZmljKGkpP3I6ZX0sdCYme2VzdGltYXRlZE9yZGVyQW1vdW50OnR9KSxuJiZ7cHJvZHVjdFR5cGU6bn0pfWNyZWF0ZUFtYXpvblBheUJ1dHRvblBhcmVudENvbnRhaW5lcigpe2NvbnN0IGU9TWF0aC5yYW5kb20oKS50b1N0cmluZygxNikuc3Vic3RyKC00KSx0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIHQuaWQ9YGFtYXpvbnBheV9idXR0b25fcGFyZW50X2NvbnRhaW5lcl8ke2V9YCx0fWdldEFtYXpvblBheVYyQnV0dG9uT3B0aW9ucyhlLHQsbixpPSExLHI9S3QuR29sZCl7dmFyIG87Y29uc3R7Z2V0Q2FydDphLGdldENoZWNrb3V0OnMsZ2V0U3RvcmVDb25maWdPclRocm93OmQsZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c6Y309dGhpcy5nZXRDaGVja291dFN0YXRlKGUpLHtjb25maWc6e21lcmNoYW50SWQ6bCx0ZXN0TW9kZTp1fSxpbml0aWFsaXphdGlvbkRhdGE6aH09Yyh0KTtpZighaCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0e2NoZWNrb3V0TGFuZ3VhZ2U6cCxjaGVja291dFNlc3Npb25NZXRob2Q6bSxjcmVhdGVDaGVja291dFNlc3Npb25Db25maWc6eSxleHRyYWN0QW1hem9uQ2hlY2tvdXRTZXNzaW9uSWQ6ZyxsZWRnZXJDdXJyZW5jeTp2LHB1YmxpY0tleUlkOmY9XCJcIixpc0J1dHRvbk1pY3JvVGV4dERpc2FibGVkOlN9PWg7aWYoIWx8fCF2KXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3QgXz1PYmplY3QuYXNzaWduKHttZXJjaGFudElkOmwsbGVkZ2VyQ3VycmVuY3k6dixjaGVja291dExhbmd1YWdlOnAscGxhY2VtZW50Om4sYnV0dG9uQ29sb3I6cn0sUz97ZGVzaWduOkp0LkMwMDAxfTp7fSk7aWYodGhpcy5pc0J1eU5vd0Zsb3cpcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxfKSx7c2FuZGJveDohIXV9KTtjb25zdCB3PWEoKTtfLnByb2R1Y3RUeXBlPXcmJjA9PT1VdCh3KT9ZdC5QYXlPbmx5Oll0LlBheUFuZFNoaXA7Y29uc3R7Y2hlY2tvdXRTZXR0aW5nczp7ZmVhdHVyZXM6Q30sc3RvcmVQcm9maWxlOntzaG9wUGF0aDpJLHN0b3JlQ291bnRyeUNvZGU6Yn19PWQoKTtpZih0aGlzLmlzUGg0RW5hYmxlZChDLGIpKXtpZigheSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0IGU9bnVsbD09PShvPXMoKSl8fHZvaWQgMD09PW8/dm9pZCAwOm8ub3V0c3RhbmRpbmdCYWxhbmNlLnRvU3RyaW5nKCksdD1udWxsPT13P3ZvaWQgMDp3LmN1cnJlbmN5LmNvZGUsbj1PYmplY3QuYXNzaWduKHt9LF8pO2xldCByO3JldHVybiB0aGlzLmlzRW52aXJvbm1lbnRTcGVjaWZpYyhmKT8obi5wdWJsaWNLZXlJZD1mLHI9eSk6KG4uc2FuZGJveD0hIXUscj1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30seSkse3B1YmxpY0tleUlkOmZ9KSksaXx8KG4uY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnPXIpLGUmJnQmJihuLmVzdGltYXRlZE9yZGVyQW1vdW50PXthbW91bnQ6ZSxjdXJyZW5jeUNvZGU6dH0pLG59Y29uc3QgUD17bWV0aG9kOm0sdXJsOmAke0l9L3JlbW90ZS1jaGVja291dC8ke3R9L3BheW1lbnQtc2Vzc2lvbmAsZXh0cmFjdEFtYXpvbkNoZWNrb3V0U2Vzc2lvbklkOmd9O3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sXykse2NyZWF0ZUNoZWNrb3V0U2Vzc2lvbjpQLHNhbmRib3g6ISF1fSl9aXNFbnZpcm9ubWVudFNwZWNpZmljKGUpe3JldHVybi9eKFNBTkRCT1h8TElWRSkvLnRlc3QoZSl9Z2V0QW1hem9uUGF5VjJTREsoKXtyZXR1cm4gdGhpcy5nZXRPclRocm93KHRoaXMuYW1hem9uUGF5VjJTREspfWdldEJ1dHRvblBhcmVudENvbnRhaW5lcigpe3JldHVybiB0aGlzLmdldE9yVGhyb3codGhpcy5idXR0b25QYXJlbnRDb250YWluZXIpfWdldEFtYXpvblBheVYyQnV0dG9uKCl7cmV0dXJuIHRoaXMuZ2V0T3JUaHJvdyh0aGlzLmFtYXpvblBheVYyQnV0dG9uKX1nZXRPclRocm93KGUpe3JldHVybiBxdChlLCgpPT5uZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKSl9Z2V0Q2hlY2tvdXRTdGF0ZShlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YodD1lKSYmbnVsbCE9PXQmJlwiY2FydFwiaW4gdCYmXCJjaGVja291dFwiaW4gdCYmXCJjb25maWdcImluIHQmJlwicGF5bWVudE1ldGhvZHNcImluIHQ/e2dldENhcnQ6ZS5jYXJ0LmdldENhcnQsZ2V0Q2hlY2tvdXQ6ZS5jaGVja291dC5nZXRDaGVja291dCxnZXRTdG9yZUNvbmZpZ09yVGhyb3c6ZS5jb25maWcuZ2V0U3RvcmVDb25maWdPclRocm93LGdldFBheW1lbnRNZXRob2RPclRocm93OnQ9PmUucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codCl9OmU7dmFyIHR9fWNsYXNzIFh0IGV4dGVuZHMgQnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC5cIiksdGhpcy5uYW1lPVwiUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3JcIix0aGlzLnR5cGU9XCJwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGVcIn19Y2xhc3MgZW57Y29uc3RydWN0b3IoZSx0PXdpbmRvdyl7dGhpcy5zY3JpcHRMb2FkZXI9ZSx0aGlzLndpbmRvd1dpdGhBbWF6b25QYXk9dH1sb2FkKGUpe3JldHVybiB0PXRoaXMsbj12b2lkIDAscj1mdW5jdGlvbiooKXtjb25zdHtpbml0aWFsaXphdGlvbkRhdGE6dH09ZSxuPShudWxsPT10P3ZvaWQgMDp0LnJlZ2lvbil8fFwidXNcIixpPUd0W25dO2lmKHlpZWxkIHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoYGh0dHBzOi8vc3RhdGljLSR7aX0ucGF5bWVudHMtYW1hem9uLmNvbS9jaGVja291dC5qc2ApLCF0aGlzLndpbmRvd1dpdGhBbWF6b25QYXkuYW1hem9uKXRocm93IG5ldyBYdDtyZXR1cm4gdGhpcy53aW5kb3dXaXRoQW1hem9uUGF5LmFtYXpvbn0sbmV3KChpPXZvaWQgMCl8fChpPVByb21pc2UpKShmdW5jdGlvbihlLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoci5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKHIudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2YgaT9uOm5ldyBpKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKHI9ci5hcHBseSh0LG58fFtdKSkubmV4dCgpKX0pO3ZhciB0LG4saSxyfX1mdW5jdGlvbiB0bigpe3JldHVybiBuZXcgUXQobmV3IGVuKGEoKSkpfWZ1bmN0aW9uIG5uKGUsdCl7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx7cmVzb2x2ZUlkczp0fSl9Y2xhc3Mgcm4gZXh0ZW5kcyBCdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHxcIkludmFsaWQgYXJndW1lbnRzIGhhdmUgYmVlbiBwcm92aWRlZC5cIiksdGhpcy5uYW1lPVwiSW52YWxpZEFyZ3VtZW50RXJyb3JcIix0aGlzLnR5cGU9XCJpbnZhbGlkX2FyZ3VtZW50XCJ9fWNsYXNzIG9uIGV4dGVuZHMgQnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJOb3QgaW1wbGVtZW50ZWQuXCIpLHRoaXMubmFtZT1cIk5vdEltcGxlbWVudGVkRXJyb3JcIix0aGlzLnR5cGU9XCJub3RfaW1wbGVtZW50ZWRcIn19dmFyIGFuPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIHNue2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3I9dH1pbml0aWFsaXplKGUpe3JldHVybiBhbih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bWV0aG9kSWQ6dCxhbWF6b25wYXk6bn09ZTtpZighdHx8IShudWxsPT1uP3ZvaWQgMDpuLmNvbnRhaW5lcikpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBvciBcImNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2xldCBpO3RyeXtpPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KHQpfWNhdGNoKGUpe3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZCh0KSxpPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KHQpfXlpZWxkIHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLmluaXRpYWxpemUoaSksdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IucmVuZGVyQW1hem9uUGF5QnV0dG9uKHtjaGVja291dFN0YXRlOnRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGNvbnRhaW5lcklkOm4uY29udGFpbmVyLG1ldGhvZElkOnQscGxhY2VtZW50OiR0LkNoZWNrb3V0fSl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gYW4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLmRlaW5pdGlhbGl6ZSgpfSl9c2lnbkluKCl7dGhyb3cgbmV3IG9uKCdJbiBvcmRlciB0byBzaWduIGluIHZpYSBBbWF6b24sIHRoZSBzaG9wcGVyIG11c3QgY2xpY2sgb24gXCJBbWF6b24gUGF5XCIgYnV0dG9uLicpfXNpZ25PdXQoZSl7cmV0dXJuIGFuKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRJZCgpO3QmJih5aWVsZCB0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5zaWdub3V0KCkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnJlbW90ZUNoZWNrb3V0U2lnbk91dCh0LnByb3ZpZGVySWQsZSkpfSl9ZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChlKXt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayl8fHZvaWQgMD09PXR8fHQuY2FsbChlKSxQcm9taXNlLnJlc29sdmUoKX19Y29uc3QgZG49bm4oZT0+bmV3IHNuKGUsdG4oKSksW3tpZDpcImFtYXpvbnBheVwifV0pO2Z1bmN0aW9uIGNuKGUsdCl7dmFyIG47cmV0dXJuIG51bGw9PT0obj1lW3RdKXx8dm9pZCAwPT09bnx8bn1jb25zdCBsbj1cIjMuMTI4LjBcIix1bj1cIjMuMTIzLjJcIixobj1cIjMuMTA2LjBcIjtjbGFzcyBwbntjb25zdHJ1Y3RvcihlKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmJyYWludHJlZVdpbmRvdz13aW5kb3d9Z2V0U0RLVmVyc2lvbigpe2NvbnN0IGU9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0U3RvcmVDb25maWcoKSx0PShudWxsPT1lP3ZvaWQgMDplLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXMpfHx7fTtyZXR1cm4gdGhpcy5nZXRQcmVsb2FkZWRTREtWZXJzaW9uKCl8fChjbih0LFwiUEFZUEFMLTU4MDkuYnJhaW50cmVlX2hvc3RlZF9maWVsZHNfZml4X3ZlcnNpb25cIik/bG46Y24odCxcIlBBWVBBTC01NjM2LnVwZGF0ZV9icmFpbnRyZWVfc2RrX3ZlcnNpb25cIik/dW46aG4pfWdldFByZWxvYWRlZFNES1ZlcnNpb24oKXtjb25zdCBlPXRoaXMuYnJhaW50cmVlV2luZG93LmJyYWludHJlZTtpZihlKXtjb25zdCB0PVMoT2JqZWN0LnZhbHVlcyhlKSxlPT4hIWUuVkVSU0lPTik7cmV0dXJuIG51bGw9PXQ/dm9pZCAwOnQuVkVSU0lPTn19fWNsYXNzIG1uIGV4dGVuZHMgQnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJVbnN1cHBvcnRlZCBicm93c2VyIGVycm9yXCIpLHRoaXMubmFtZT1cIlVuc3VwcG9ydGVkQnJvd3NlckVycm9yXCIsdGhpcy50eXBlPVwidW5zdXBwb3J0ZWRfYnJvd3NlclwifX12YXIgeW4sZ24sdm4sZm4sU24sX24sd247ZnVuY3Rpb24gQ24oZSl7cmV0dXJuIEJvb2xlYW4oXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiYoXCJ0eXBlXCJpbiBlfHxcIm1lc3NhZ2VcImluIGV8fFwiY29kZVwiaW4gZSkpfSFmdW5jdGlvbihlKXtlLkVTVElNQVRFRD1cIkVTVElNQVRFRFwiLGUuRklOQUw9XCJGSU5BTFwiLGUuTk9UX0NVUlJFTlRMWV9LTk9XTj1cIk5PVF9DVVJSRU5UTFlfS05PV05cIn0oeW58fCh5bj17fSkpLGZ1bmN0aW9uKGUpe2UuQ29tcGxldGVkPVwiQ09NUExFVEVEXCIsZS5QZW5kaW5nPVwiUEVORElOR1wiLGUuRmFpbGVkPVwiRkFJTEVEXCJ9KGdufHwoZ249e30pKSxmdW5jdGlvbihlKXtlLlRSVVNUTFk9XCJ0cnVzdGx5XCJ9KHZufHwodm49e30pKSxmdW5jdGlvbihlKXtlLlNVQ0NFRURFRD1cInN1Y2NlZWRlZFwiLGUuRkFJTEVEPVwiZmFpbGVkXCIsZS5DQU5DRUxFRD1cImNhbmNlbGxlZFwiLGUuVU5SRUNPR05JWkVEPVwidW5yZWNvZ25pemVkXCJ9KGZufHwoZm49e30pKSxmdW5jdGlvbihlKXtlLkN1c3RvbWVyPVwiQ1VTVE9NRVJcIixlLk1lcmNoYW50PVwiTUVSQ0hBTlRcIixlLk5ldHdvcms9XCJORVRXT1JLXCIsZS5JbnRlcm5hbD1cIklOVEVSTkFMXCIsZS5Vbmtub3duPVwiVU5LTk9XTlwifShTbnx8KFNuPXt9KSksZnVuY3Rpb24oZSl7ZS5Lb3VudE5vdEVuYWJsZWQ9XCJEQVRBX0NPTExFQ1RPUl9LT1VOVF9OT1RfRU5BQkxFRFwifShfbnx8KF9uPXt9KSksZnVuY3Rpb24oZSl7ZS5WaXNhPVwidmlzYVwiLGUuTWFzdGVyY2FyZD1cIm1hc3RlcmNhcmRcIixlLkFtZXJpY2FuRXhwcmVzcz1cImFtZXJpY2FuLWV4cHJlc3NcIixlLkRpbmVyc0NsdWI9XCJkaW5lcnMtY2x1YlwiLGUuRGlzY292ZXI9XCJkaXNjb3ZlclwiLGUuSmNiPVwiamNiXCIsZS5VbmlvblBheT1cInVuaW9uLXBheVwiLGUuTWFlc3Rybz1cIm1hZXN0cm9cIixlLkVsbz1cImVsb1wiLGUuTWlyPVwibWlyXCIsZS5IaXBlcj1cImhpcGVyXCIsZS5IaXBlcmNhcmQ9XCJoaXBlcmNhcmRcIn0od258fCh3bj17fSkpO3ZhciBJbixibixQbixPbj1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBFbntjb25zdHJ1Y3RvcihlKXt0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlcj1lfWluaXRpYWxpemUoZSl7dGhpcy5zZXRDbGllbnRUb2tlbihlKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gT24odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMudGVhcmRvd25Nb2R1bGUodGhpcy5kYXRhQ29sbGVjdG9yKSx0aGlzLmRhdGFDb2xsZWN0b3I9dm9pZCAwfSl9Z2V0Q2xpZW50KCl7cmV0dXJuIE9uKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy5jbGllbnQpe2NvbnN0IGU9dGhpcy5nZXRDbGllbnRUb2tlbk9yVGhyb3coKSx0PXlpZWxkIHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRDbGllbnQoKTt0aGlzLmNsaWVudD15aWVsZCB0LmNyZWF0ZSh7YXV0aG9yaXphdGlvbjplfSl9cmV0dXJuIHRoaXMuY2xpZW50fSl9Z2V0RGF0YUNvbGxlY3Rvck9yVGhyb3coZSl7cmV0dXJuIE9uKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXtkZXZpY2VEYXRhOnZvaWQgMCx0ZWFyZG93bjooKT0+UHJvbWlzZS5yZXNvbHZlKCl9O2lmKCF0aGlzLmRhdGFDb2xsZWN0b3IpdHJ5e2NvbnN0IHQ9eWllbGQgdGhpcy5nZXRDbGllbnQoKSxuPXlpZWxkIHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWREYXRhQ29sbGVjdG9yKCksaT1PYmplY3QuYXNzaWduKHtjbGllbnQ6dCxrb3VudDohMH0sZSk7dGhpcy5kYXRhQ29sbGVjdG9yPXlpZWxkIG4uY3JlYXRlKGkpfWNhdGNoKGUpe2lmKENuKGUpJiZlLmNvZGU9PT1fbi5Lb3VudE5vdEVuYWJsZWQpcmV0dXJuIHQ7dGhyb3cgZX1yZXR1cm4gdGhpcy5kYXRhQ29sbGVjdG9yfSl9Z2V0QnJhaW50cmVlR29vZ2xlUGF5bWVudCgpe3JldHVybiBPbih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXRoaXMuZ29vZ2xlUGF5bWVudCl7Y29uc3RbZSx0XT15aWVsZCBQcm9taXNlLmFsbChbdGhpcy5nZXRDbGllbnQoKSx0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkR29vZ2xlUGF5bWVudCgpXSk7dGhpcy5nb29nbGVQYXltZW50PXlpZWxkIHQuY3JlYXRlKHtjbGllbnQ6ZX0pfXJldHVybiB0aGlzLmdvb2dsZVBheW1lbnR9KX1nZXRCcmFpbnRyZWVUaHJlZURTKCl7cmV0dXJuIE9uKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy50aHJlZURTKXtjb25zdFtlLHRdPXlpZWxkIFByb21pc2UuYWxsKFt0aGlzLmdldENsaWVudCgpLHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWQzRFMoKV0pO3RoaXMudGhyZWVEUz15aWVsZCB0LmNyZWF0ZSh7Y2xpZW50OmUsdmVyc2lvbjoyfSl9cmV0dXJuIHRoaXMudGhyZWVEU30pfWdldEJyYWludHJlZUxvY2FsUGF5bWVudChlKXtyZXR1cm4gT24odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0aGlzLmJyYWludHJlZUxvY2FsUGF5bWVudCl7Y29uc3RbdCxuXT15aWVsZCBQcm9taXNlLmFsbChbdGhpcy5nZXRDbGllbnQoKSx0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkTG9jYWxQYXltZW50KCldKTt0aGlzLmJyYWludHJlZUxvY2FsUGF5bWVudD15aWVsZCBuZXcgUHJvbWlzZSgoaSxyKT0+e24uY3JlYXRlKHtjbGllbnQ6dCxtZXJjaGFudEFjY291bnRJZDplfSwoZSx0KT0+e2UmJnIoZSksaSh0KX0pfSl9cmV0dXJuIHRoaXMuYnJhaW50cmVlTG9jYWxQYXltZW50fSl9Z2V0VXNCYW5rQWNjb3VudCgpe3JldHVybiBPbih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXRoaXMudXNCYW5rQWNjb3VudCl7Y29uc3QgZT15aWVsZCB0aGlzLmdldENsaWVudCgpLHQ9eWllbGQgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZFVzQmFua0FjY291bnQoKTt0aGlzLnVzQmFua0FjY291bnQ9eWllbGQgdC5jcmVhdGUoe2NsaWVudDplfSl9cmV0dXJuIHRoaXMudXNCYW5rQWNjb3VudH0pfWdldEJyYWludHJlZVZpc2FDaGVja291dCgpe3JldHVybiB0aGlzLnZpc2FDaGVja291dHx8KHRoaXMudmlzYUNoZWNrb3V0PVByb21pc2UuYWxsKFt0aGlzLmdldENsaWVudCgpLHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRWaXNhQ2hlY2tvdXQoKV0pLnRoZW4oKFtlLHRdKT0+dC5jcmVhdGUoe2NsaWVudDplfSkpKSx0aGlzLnZpc2FDaGVja291dH1nZXRWaXNhQ2hlY2tvdXRTZGsoZSl7cmV0dXJuIE9uKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy52aXNhQ2hlY2tvdXRTREt8fCh0aGlzLnZpc2FDaGVja291dFNESz15aWVsZCB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkVmlzYUNoZWNrb3V0U2RrKGUpKSx0aGlzLnZpc2FDaGVja291dFNES30pfWdldFZlbm1vQ2hlY2tvdXRPclRocm93KCl7cmV0dXJuIE9uKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy5icmFpbnRyZWVWZW5tbyl7Y29uc3QgZT15aWVsZCB0aGlzLmdldENsaWVudCgpLHQ9eWllbGQgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZFZlbm1vQ2hlY2tvdXQoKSxuPXtjbGllbnQ6ZSxhbGxvd0Rlc2t0b3A6ITAscGF5bWVudE1ldGhvZFVzYWdlOlwibXVsdGlfdXNlXCJ9LGk9eWllbGQgdC5jcmVhdGUobik7aWYoIWkuaXNCcm93c2VyU3VwcG9ydGVkKCkpdGhyb3cgbmV3IG1uO3RoaXMuYnJhaW50cmVlVmVubW89aX1yZXR1cm4gdGhpcy5icmFpbnRyZWVWZW5tb30pfXNldENsaWVudFRva2VuKGUpe3RoaXMuY2xpZW50VG9rZW49ZX1nZXRDbGllbnRUb2tlbk9yVGhyb3coKXtpZighdGhpcy5jbGllbnRUb2tlbil0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gdGhpcy5jbGllbnRUb2tlbn10ZWFyZG93bk1vZHVsZShlKXtyZXR1cm4gZT9lLnRlYXJkb3duKCk6UHJvbWlzZS5yZXNvbHZlKCl9fSFmdW5jdGlvbihlKXtlLlNhbmRib3g9XCJzYW5kYm94XCIsZS5Qcm9kdWN0aW9uPVwicHJvZHVjdGlvblwifShJbnx8KEluPXt9KSksZnVuY3Rpb24oZSl7ZS5DbGllbnQ9XCJjbGllbnRcIixlLkRhdGFDb2xsZWN0b3I9XCJkYXRhQ29sbGVjdG9yXCIsZS5GYXN0bGFuZT1cImZhc3RsYW5lXCIsZS5Hb29nbGVQYXltZW50PVwiZ29vZ2xlUGF5bWVudFwiLGUuSG9zdGVkRmllbGRzPVwiaG9zdGVkRmllbGRzXCIsZS5Mb2NhbFBheW1lbnQ9XCJsb2NhbFBheW1lbnRcIixlLlBheXBhbD1cInBheXBhbFwiLGUuUGF5cGFsQ2hlY2tvdXQ9XCJwYXlwYWxDaGVja291dFwiLGUuVGhyZWVEU2VjdXJlPVwidGhyZWVEU2VjdXJlXCIsZS5Vc0JhbmtBY2NvdW50PVwidXNCYW5rQWNjb3VudFwiLGUuVmVubW89XCJ2ZW5tb1wiLGUuVmlzYUNoZWNrb3V0PVwidmlzYUNoZWNrb3V0XCJ9KGJufHwoYm49e30pKSxmdW5jdGlvbihlKXtlLkNhcmRDb2RlPVwiY2FyZENvZGVcIixlLkNhcmRDb2RlVmVyaWZpY2F0aW9uPVwiY2FyZENvZGVWZXJpZmljYXRpb25cIixlLkNhcmRFeHBpcnk9XCJjYXJkRXhwaXJ5XCIsZS5DYXJkTmFtZT1cImNhcmROYW1lXCIsZS5DYXJkTnVtYmVyPVwiY2FyZE51bWJlclwiLGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbj1cImNhcmROdW1iZXJWZXJpZmljYXRpb25cIn0oUG58fChQbj17fSkpO2NvbnN0IEFuPXtbaG5dOntbYm4uQ2xpZW50XTpcInNoYTM4NC0yNkJYRE5uSkkyM0pZUnlGQmo0eGU0c1ZOclVTU2lTU3UxMWt4VlhOTS92RVBPTm00THVMMDB3NlphVGdRZXd0XCIsW2JuLlBheXBhbENoZWNrb3V0XTpcInNoYTM4NC1CK3Z6Ylp3blF0eldCdGhwa1Q0VFhLVWliTzY1dHllSzdlQ3hTdnBibGdwclRlcDIrSUFYQjJDeHhqcm43MTBPXCIsW2JuLlBheXBhbF06XCJzaGEzODQtdXlBR0wxLzMrWEpBSG5Hb055NGVDb1hkeko0ZjdJbHpwKzZ3OVBObkVqczZEQ0N6OVdNeUpqTU4xZ3pjNzhVK1wiLFtibi5Mb2NhbFBheW1lbnRdOlwic2hhMzg0LUxJdk9FTWtJVkV3VnVZQmRWT1FjMUFDNVliR0dsd3lmVWhlUzBBQ0syMThEMlNUdVZZUWxaNEZ5RVBvd0FFZlRcIixbYm4uRGF0YUNvbGxlY3Rvcl06XCJzaGEzODQtMWJvOUpEeitLc2N0aGMwODVjQ0tXdXI4Q0x3VW9CcG9OeXhzRGk3OTMybUNsMHpGcTNBNW12K0ZRTHc5R0hwVlwiLFtibi5Vc0JhbmtBY2NvdW50XTpcInNoYTM4NC14bUhCVmFVK3c3NFYrT2ViRDNBYVBPTkZ4SFVHTWYrUVJzOEcvSnhWUFhOTlA3TURhMmpMMElDV0hJZTJ0VGZKXCIsW2JuLkdvb2dsZVBheW1lbnRdOlwic2hhMzg0LVdLREpsOG1xb1A4MnFacE1HSDZBYlp4bnZYblNXOElMVjRNNjRDeU1MaXVnR013dTdMeVA4OXdqQ2tIcXNpQmVcIixbYm4uVGhyZWVEU2VjdXJlXTpcInNoYTM4NC1WUVVscEdIenNHdnM1WGVpR0ZpcDdFWFJzdm9IV0VYRFZtZ0NhY2ZieWllWkk5bWRCT3FxM05Tb3lvMjhPQ09CXCIsW2JuLlZpc2FDaGVja291dF06XCJzaGEzODQteXg3bUFEZnpUTjBUNDNRNnJsSDQ5TElnMUVKMGlVWmdCcC9FY3pYOUxYc1VHa3lTZ3hyRCtuV0hRUkJreWZvVFwiLFtibi5WZW5tb106XCJzaGEzODQtUVg0clBqb2oxWkRodUcwYVN5S3M1NmxFS0RxVE1UY2pZeFVIWTFTek81VlpEc3FJRTJOVGtxb3Q3S05TQ3lvdlwiLFtibi5Ib3N0ZWRGaWVsZHNdOlwic2hhMzg0LVZ2WUJBQ2ZTdTBDci9KMzJ1S214RzdBWGNOT0pFMUF6SUlMM2tiaWt5UzdZS3A1Zno1SXMrTnpOUC9seWF1TnlcIixbYm4uRmFzdGxhbmVdOlwic2hhMzg0LTlvR3NaTVJad3BHdERFRFlhL2RGdDc2ZEVDcWoxeEFuaTlnSUtnYzNLZk1JaVJuUjczbkVlZVVETGlCenhoRmFcIn0sW3VuXTp7W2JuLkNsaWVudF06XCJzaGEzODQtbytuYlFHY3dOTnhJQmVYZXUzK1htYlNxK0NnOFIzRU4zTjBsNWhYQ2dNTVUyUkdZMHQxejBMcm9TRUlBYmZBT1wiLFtibi5QYXlwYWxDaGVja291dF06XCJzaGEzODQtV3JmYldQQlM0bUg4NkdBb3ljUFNnaUg4aFE4S0g3QTY3QzkzSGpodW52L3hoTmsyWXBCbjN3YkZBNEZoZzlVL1wiLFtibi5QYXlwYWxdOlwic2hhMzg0LVZGMzg5bnZ2clJVZ0RzVFhNeFRZT1JEdFZlZ0I5SVFhM0N4ci8vRHlKbkxZbno4L1g4VkN6RXZjazJjK01lZ3RcIixbYm4uTG9jYWxQYXltZW50XTpcInNoYTM4NC10Wkt4MnJFUWJmbVpwb1BTWTVWUG1KRWhhcTRYNzVkTHZ3SE1zM1ZFOVUrQzhsUHl3K2hXVElMMStHUHZXQ0lIXCIsW2JuLkRhdGFDb2xsZWN0b3JdOlwic2hhMzg0LUU2azN3T3BQN3N5Q0REd2FSRExGMDY5NDJZMDBOa2J3SnZXaTJPUVh3d0t6R3dHNWZkM0U3UkZVdkNDZWNmdk9cIixbYm4uVXNCYW5rQWNjb3VudF06XCJzaGEzODQtMjU4Rk9OOExaR0cwVzlRYXo0SmlqODNwWkh1MzBZbktqSkE3Z051bExCaDZDY2xrdWNnRit0SERRdVlGUllmV1wiLFtibi5Hb29nbGVQYXltZW50XTpcInNoYTM4NC10YUoycC8wK24wVkgzMjhQT0FvQml1RWJMM3RuSFVURTlTNDJoSzFWK1R4czNYK1FZalpPeUtXMzVKZ0hSRmZPXCIsW2JuLlRocmVlRFNlY3VyZV06XCJzaGEzODQtK05TWkg0Wmozc081YmRXdlBLaFU1TjE2UUR4ZXVlVFZUblVWZWxlZUVTa2hMU2F6NE9iMWhoLzVteWVjYzlZbVwiLFtibi5WaXNhQ2hlY2tvdXRdOlwic2hhMzg0LTY2RGlCamdoeGsxT21Cajhha3NOOGdiUStDd29RY3gxdlBmaVhVTjA4ZzFpUVZNK0J3ZXdGMHA3dG9NM2k3U1NcIixbYm4uVmVubW9dOlwic2hhMzg0LUI1VXdZNDJrRTRSb0xvV2JRN1lwcW9zVWxVYWQyL0RsR1dpdzBIaG9aYlNQazMwQ1FBYVNBMTBvaHlMRFRrRFVcIixbYm4uSG9zdGVkRmllbGRzXTpcInNoYTM4NC1BdzlFZXNTYVVlV3hlMzZQcUVIaU95T3lPcThNNkNJYjFndzcveUhOVlBSekd0RlhYY2QyT1E4cVhySWxPajJQXCIsW2JuLkZhc3RsYW5lXTpcInNoYTM4NC1yaEJMMWhwWjcxSnFHKzJUc1QwRGloNDdtYmp4OGNqSkNwZVpqazl0dzNkZjFnRk1LZkNUbU15WnVuaHI3SDRZXCJ9LFtsbl06e1tibi5DbGllbnRdOlwic2hhMzg0LTBXTnhrc0lwUlArZllaaUlkcjEyZzZEQlVRZkxEellDUUpadFIvQzhLa2N3U0doUEhmY0ZwM3RUYUdjTXlGVHFcIixbYm4uUGF5cGFsQ2hlY2tvdXRdOlwic2hhMzg0LWxXTTFqazRCT3hvRE5WNktvcDd0Vk52UWdJTmxtRVZ6MGMvT3dNK0hOSEszUUM4eHF3ZDU0T3ZydDJRUkRUamhcIixbYm4uUGF5cGFsXTpcInNoYTM4NC1mWFVtVnhDMkVNWkJEWFo3ZVRIU1RML0xGQnJIZWovTVNYVC92VEJYdnJhNGx6Z0xOR3ZSRUFwK3gwR1lPYnVIXCIsW2JuLkxvY2FsUGF5bWVudF06XCJzaGEzODQtcGhhMXhHdUdTa21aSDV4OWFxSHZSYU80eExlYTdybVEvNzlQRmo5enhOenh1RmNPV1pnN2dPUDdGaWJ5Z09FQ1wiLFtibi5EYXRhQ29sbGVjdG9yXTpcInNoYTM4NC1RNlBJMkY5ZWVrV2JBeGhyb3libCthRWN2cWhkb3dOL0VRbEd3QlV5Sk96UEZuOTk4MnU5eGw2U1U2WGZHS3pjXCIsW2JuLlVzQmFua0FjY291bnRdOlwic2hhMzg0LVczUkxRU0tKTDF0UTMrWTdtUDZ0bWthbXRaOGJWNFl3L1h4TDlKajVKdFhIcmFEOGxvTUY4aEFJRzVtMnpLN0ZcIixbYm4uR29vZ2xlUGF5bWVudF06XCJzaGEzODQtVElUUU1zRldBM2VsRE5HUDJtV3oyb0tCbzRxanQrVGxxem92Y2FQb2VCaUFoL3dQQmk2bmFlNTBBRGRnVTEvaVwiLFtibi5UaHJlZURTZWN1cmVdOlwic2hhMzg0LVlpeWNZTjg5WmxML0V2Y2FxNHkxYWpXMW1oZDdKWWZaQkR1T3dIdEluNC9Kbm0yMEdMKy9YQ00rellBd1dEOERcIixbYm4uVmlzYUNoZWNrb3V0XTpcInNoYTM4NC0vT2RhVHY5cXJrS3pqT2J0VWU2eXpmRGhIb3pGVy8rdVhsclNsNzM2c09aUkpwakdRRVR2cFlYcU1GRmc2OXh2XCIsW2JuLlZlbm1vXTpcInNoYTM4NC1kQStvamRXOXZiSlM0SmF2Y1h5T3M5ZDV1WkhKZzVkTnRZdXBvUFNIMnpzWElpWURWUzVhbUxiL3U4cW1RNm96XCIsW2JuLkhvc3RlZEZpZWxkc106XCJzaGEzODQtMzFaa1M1OCtpYVdzVzA2ZnRXNTJ6elZaRnA0M1dQZDdwTllSaWRkWXluU05nNk9oN1dHYlNGR29yQVVINlQxelwiLFtibi5GYXN0bGFuZV06XCJzaGEzODQtamxicndOdkwzSHZMQVVDdExTbXJuUTJHSDF1ZENVclJTL2JWbVJlQVM1ZnVJVnZjVzhQa28vR2tnODJ0bGd0clwifX07dmFyIGtuLFRuPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIERue2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLnNjcmlwdExvYWRlcj1lLHRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdz10LHRoaXMuYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXI9bn1sb2FkQ2xpZW50KCl7cmV0dXJuIFRuKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdyhibi5DbGllbnQsXCJjbGllbnQubWluLmpzXCIpfSl9bG9hZEZhc3RsYW5lKCl7cmV0dXJuIFRuKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdyhibi5GYXN0bGFuZSxcImZhc3RsYW5lLm1pbi5qc1wiKX0pfWxvYWRQYXlwYWxDaGVja291dCgpe3JldHVybiBUbih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3coYm4uUGF5cGFsQ2hlY2tvdXQsXCJwYXlwYWwtY2hlY2tvdXQubWluLmpzXCIpfSl9bG9hZFBheXBhbCgpe3JldHVybiBUbih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3coYm4uUGF5cGFsLFwicGF5cGFsLm1pbi5qc1wiKX0pfWxvYWRMb2NhbFBheW1lbnQoKXtyZXR1cm4gVG4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLmxvYWRCcmFpbnRyZWVNb2R1bGVPclRocm93KGJuLkxvY2FsUGF5bWVudCxcImxvY2FsLXBheW1lbnQubWluLmpzXCIpfSl9bG9hZERhdGFDb2xsZWN0b3IoKXtyZXR1cm4gVG4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLmxvYWRCcmFpbnRyZWVNb2R1bGVPclRocm93KGJuLkRhdGFDb2xsZWN0b3IsXCJkYXRhLWNvbGxlY3Rvci5taW4uanNcIil9KX1sb2FkVXNCYW5rQWNjb3VudCgpe3JldHVybiBUbih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3coYm4uVXNCYW5rQWNjb3VudCxcInVzLWJhbmstYWNjb3VudC5taW4uanNcIil9KX1sb2FkR29vZ2xlUGF5bWVudCgpe3JldHVybiBUbih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3coYm4uR29vZ2xlUGF5bWVudCxcImdvb2dsZS1wYXltZW50Lm1pbi5qc1wiKX0pfWxvYWQzRFMoKXtyZXR1cm4gVG4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLmxvYWRCcmFpbnRyZWVNb2R1bGVPclRocm93KGJuLlRocmVlRFNlY3VyZSxcInRocmVlLWQtc2VjdXJlLm1pbi5qc1wiKX0pfWxvYWRWaXNhQ2hlY2tvdXQoKXtyZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdyhibi5WaXNhQ2hlY2tvdXQsXCJ2aXNhLWNoZWNrb3V0Lm1pbi5qc1wiKX1sb2FkVmVubW9DaGVja291dCgpe3JldHVybiB0aGlzLmxvYWRCcmFpbnRyZWVNb2R1bGVPclRocm93KGJuLlZlbm1vLFwidmVubW8ubWluLmpzXCIpfWxvYWRIb3N0ZWRGaWVsZHMoKXtyZXR1cm4gVG4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLmxvYWRCcmFpbnRyZWVNb2R1bGVPclRocm93KGJuLkhvc3RlZEZpZWxkcyxcImhvc3RlZC1maWVsZHMubWluLmpzXCIpfSl9bG9hZFZpc2FDaGVja291dFNkayhlKXtyZXR1cm4gVG4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKHRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5WKXJldHVybiB0aGlzLmJyYWludHJlZUhvc3RXaW5kb3cuVjtjb25zdCB0PWU/XCJzaGEzODQtMGV1MXMxR3RxelhsTDlEdExnbXd6QzVXV2xFSC9BRFJNMG4zOGNWUWt2dFQrVy9nZXk5NnJjYjFMd3VVT1BEbVwiOlwic2hhMzg0LTFmMWNzdlAzWkZ4ZzRkSUxIMUdhWTRMSGxaMG9YN1JrODNyeG1MbHdibklpNFRNME5ZelhvZXYxVm9FaVZEUzZcIjtyZXR1cm4gdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChgLy8ke2U/XCJzYW5kYm94LVwiOlwiXCJ9YXNzZXRzLnNlY3VyZS5jaGVja291dC52aXNhLmNvbS9jaGVja291dC13aWRnZXQvcmVzb3VyY2VzL2pzL2ludGVncmF0aW9uL3YxL3Nkay5qc2Ase2FzeW5jOiEwLGF0dHJpYnV0ZXM6e2ludGVncml0eTp0LGNyb3Nzb3JpZ2luOlwiYW5vbnltb3VzXCJ9fSkudGhlbigoKT0+e2lmKCF0aGlzLmJyYWludHJlZUhvc3RXaW5kb3cuVil0aHJvdyBuZXcgWHQ7cmV0dXJuIHRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5WfSl9KX1sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdyhlLHQpe3JldHVybiBUbih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7bGV0IG49dGhpcy5nZXRCcmFpbnRyZWVNb2R1bGUoZSk7aWYobilyZXR1cm4gbjtjb25zdCBpPXRoaXMuYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIuZ2V0U0RLVmVyc2lvbigpLHI9YC8vanMuYnJhaW50cmVlZ2F0ZXdheS5jb20vd2ViLyR7aX0vanMvJHt0fWAsbz1pIGluIEFuP3RoaXMuZ2V0SW50ZWdyaXR5VmFsdWVzQnlNb2R1bGVOYW1lKGUsaSk6dm9pZCAwO2lmKHlpZWxkIHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQocixvP3thc3luYzohMCxhdHRyaWJ1dGVzOntpbnRlZ3JpdHk6byxjcm9zc29yaWdpbjpcImFub255bW91c1wifX06dm9pZCAwKSxuPXRoaXMuZ2V0QnJhaW50cmVlTW9kdWxlKGUpLCFuKXRocm93IG5ldyBYdDtyZXR1cm4gbn0pfWdldEJyYWludHJlZU1vZHVsZShlKXt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PXRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5icmFpbnRyZWUpfHx2b2lkIDA9PT10P3ZvaWQgMDp0W2VdfWdldEludGVncml0eVZhbHVlc0J5TW9kdWxlTmFtZShlLHQpe2NvbnN0IG49QW5bdF1bZV07aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBmaWxlTmFtZSB2YWx1ZVwiKTtyZXR1cm4gbn19Y2xhc3MgTW4gZXh0ZW5kcyBCdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHxcIlBheW1lbnQgcHJvY2VzcyB3YXMgY2FuY2VsbGVkLlwiKSx0aGlzLm5hbWU9XCJQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3JcIix0aGlzLnR5cGU9XCJwYXltZW50X2NhbmNlbGxlZFwifX0hZnVuY3Rpb24oZSl7ZS5CUkFJTlRSRUU9XCJicmFpbnRyZWVcIixlLkJSQUlOVFJFRV9GQVNUTEFORT1cImJyYWludHJlZWFjY2VsZXJhdGVkY2hlY2tvdXRcIn0oa258fChrbj17fSkpO3ZhciB6bixObj1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTshZnVuY3Rpb24oZSl7ZS5TdWJ0b3RhbD1cIlN1YnRvdGFsXCIsZS5TaGlwcGluZz1cIlNoaXBwaW5nXCJ9KHpufHwoem49e30pKTtjbGFzcyB4bntjb25zdHJ1Y3RvcihlLHQsbixpLHIpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZSx0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5fc2Vzc2lvbkZhY3Rvcnk9bix0aGlzLl9icmFpbnRyZWVTZGs9aSx0aGlzLl9hcHBsZVBheVNjcmlwdExvYWRlcj1yLHRoaXMuX29uQXV0aG9yaXplQ2FsbGJhY2s9Vix0aGlzLl9vbkVycm9yPVYsdGhpcy5fb25DbGljaz1WLHRoaXMuX3N1YlRvdGFsTGFiZWw9em4uU3VidG90YWwsdGhpcy5fc2hpcHBpbmdMYWJlbD16bi5TaGlwcGluZyx0aGlzLl9oYXNBcHBsZVBheVNlc3Npb249ITF9aW5pdGlhbGl6ZShlKXt2YXIgdDtyZXR1cm4gTm4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOm4sYXBwbGVwYXk6aX09ZTtpZighbnx8IWkpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtjb25zdHtjb250YWluZXI6cixzaGlwcGluZ0xhYmVsOm8sc3VidG90YWxMYWJlbDphLG9uRXJyb3I6cz1WLG9uQ2xpY2s6ZD1WLG9uUGF5bWVudEF1dGhvcml6ZTpjfT1pO3RoaXMuX3NoaXBwaW5nTGFiZWw9b3x8em4uU2hpcHBpbmcsdGhpcy5fc3ViVG90YWxMYWJlbD1hfHx6bi5TdWJ0b3RhbCx0aGlzLl9vbkF1dGhvcml6ZUNhbGxiYWNrPWMsdGhpcy5fb25FcnJvcj1zLHRoaXMuX29uQ2xpY2s9ZDtsZXQgbD10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7eWllbGQgdGhpcy5fYXBwbGVQYXlTY3JpcHRMb2FkZXIubG9hZFNkaygpO3RyeXt0aGlzLl9wYXltZW50TWV0aG9kPWwuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobil9Y2F0Y2goZSl7bD15aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG4pLHRoaXMuX3BheW1lbnRNZXRob2Q9bC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhuKX15aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnZlcmlmeUNoZWNrb3V0U3BhbVByb3RlY3Rpb24oKSx0aGlzLl9hcHBsZVBheUJ1dHRvbj10aGlzLl9jcmVhdGVCdXR0b24ociksdGhpcy5fYXBwbGVQYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5faGFuZGxlV2FsbGV0QnV0dG9uQ2xpY2suYmluZCh0aGlzKSksKG51bGw9PT0odD10aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2F0ZXdheSk9PT1rbi5CUkFJTlRSRUUmJih5aWVsZCB0aGlzLl9pbml0aWFsaXplQnJhaW50cmVlU2RrKCkpfSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfXNpZ25Jbigpe3Rocm93IG5ldyBvbignSW4gb3JkZXIgdG8gc2lnbiBpbiB2aWEgQXBwbGUsIHRoZSBzaG9wcGVyIG11c3QgY2xpY2sgb24gXCJBcHBsZSBQYXlcIiBidXR0b24uJyl9c2lnbk91dCgpe3Rocm93IG5ldyBvbihcIk5lZWQgdG8gZG8gc2lnbm91dCB2aWEgYXBwbGUuXCIpfWV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoZSl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD1udWxsPT1lP3ZvaWQgMDplLmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2spfHx2b2lkIDA9PT10fHx0LmNhbGwoZSksUHJvbWlzZS5yZXNvbHZlKCl9X2NyZWF0ZUJ1dHRvbihlKXtjb25zdCB0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpO2lmKCF0KXRocm93IG5ldyBybihcIlVuYWJsZSB0byBjcmVhdGUgc2lnbi1pbiBidXR0b24gd2l0aG91dCB2YWxpZCBjb250YWluZXIgSUQuXCIpO2NvbnN0IG49dGhpcy5fY3JlYXRlQXBwbGVQYXlCdXR0b25FbGVtZW50KCk7cmV0dXJuIHQuYXBwZW5kQ2hpbGQobiksbn1fY3JlYXRlQXBwbGVQYXlCdXR0b25FbGVtZW50KCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXBwbGUtcGF5LWJ1dHRvblwiKTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoXCJidXR0b25zdHlsZVwiLFwiYmxhY2tcIiksZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJwbGFpblwiKSxlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCItLWFwcGxlLXBheS1idXR0b24td2lkdGg6IDEwMCU7IC0tYXBwbGUtcGF5LWJ1dHRvbi1oZWlnaHQ6IDM2cHg7IC0tYXBwbGUtcGF5LWJ1dHRvbi1ib3JkZXItcmFkaXVzOiA0cHg7XCIpLGV9X2hhbmRsZVdhbGxldEJ1dHRvbkNsaWNrKGUpe2lmKGUucHJldmVudERlZmF1bHQoKSx0aGlzLl9oYXNBcHBsZVBheVNlc3Npb24pcmV0dXJuO3RoaXMuX29uQ2xpY2soKTtjb25zdCB0PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxuPXQuZ2V0Q2FydE9yVGhyb3coKSxpPXQuZ2V0U3RvcmVDb25maWdPclRocm93KCkscj10LmdldENoZWNrb3V0T3JUaHJvdygpO2lmKCF0aGlzLl9wYXltZW50TWV0aG9kfHwhdGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtjb25zdCBvPXRoaXMuX2dldEJhc2VSZXF1ZXN0KG4scixpLHRoaXMuX3BheW1lbnRNZXRob2QpLGE9dGhpcy5fc2Vzc2lvbkZhY3RvcnkuY3JlYXRlKG8pO3RoaXMuX2hhbmRsZUFwcGxlUGF5RXZlbnRzKGEsdGhpcy5fcGF5bWVudE1ldGhvZCxpKSxhLmJlZ2luKCksdGhpcy5faGFzQXBwbGVQYXlTZXNzaW9uPSEwfV9nZXRCYXNlUmVxdWVzdChlLHQsbixpKXt2YXIgcjtjb25zdHtzdG9yZVByb2ZpbGU6e3N0b3JlQ291bnRyeUNvZGU6byxzdG9yZU5hbWU6YX19PW4se2N1cnJlbmN5Ontjb2RlOnMsZGVjaW1hbFBsYWNlczpkfX09ZSx7aW5pdGlhbGl6YXRpb25EYXRhOnttZXJjaGFudENhcGFiaWxpdGllczpjLHN1cHBvcnRlZE5ldHdvcmtzOmx9fT1pLHU9ZS5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGg+MCxoPXtyZXF1aXJlZEJpbGxpbmdDb250YWN0RmllbGRzOltcInBvc3RhbEFkZHJlc3NcIl0scmVxdWlyZWRTaGlwcGluZ0NvbnRhY3RGaWVsZHM6W1wiZW1haWxcIixcInBob25lXCJdLGNvdW50cnlDb2RlOm8sY3VycmVuY3lDb2RlOnMsbWVyY2hhbnRDYXBhYmlsaXRpZXM6YyxzdXBwb3J0ZWROZXR3b3JrczpsLGxpbmVJdGVtczpbXSx0b3RhbDp1P3tsYWJlbDphLGFtb3VudDpgJHt0LmdyYW5kVG90YWwudG9GaXhlZChkKX1gLHR5cGU6XCJwZW5kaW5nXCJ9OntsYWJlbDphLGFtb3VudDpgJHt0LmdyYW5kVG90YWwudG9GaXhlZChkKX1gLHR5cGU6XCJmaW5hbFwifX07aWYodSludWxsPT09KHI9aC5yZXF1aXJlZFNoaXBwaW5nQ29udGFjdEZpZWxkcyl8fHZvaWQgMD09PXJ8fHIucHVzaChcInBvc3RhbEFkZHJlc3NcIik7ZWxzZXtjb25zdCBlPVt7bGFiZWw6dGhpcy5fc3ViVG90YWxMYWJlbCxhbW91bnQ6YCR7dC5zdWJ0b3RhbC50b0ZpeGVkKGQpfWB9XTt0LnRheGVzLmZvckVhY2godD0+ZS5wdXNoKHtsYWJlbDp0Lm5hbWUsYW1vdW50OmAke3QuYW1vdW50LnRvRml4ZWQoZCl9YH0pKSxoLmxpbmVJdGVtcz1lfXJldHVybiBofV9oYW5kbGVBcHBsZVBheUV2ZW50cyhlLHQsbil7ZS5vbnZhbGlkYXRlbWVyY2hhbnQ9bj0+Tm4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdHtib2R5Oml9PXlpZWxkIHRoaXMuX29uVmFsaWRhdGVNZXJjaGFudCh0LG4pO2UuY29tcGxldGVNZXJjaGFudFZhbGlkYXRpb24oaSl9Y2F0Y2goZSl7dGhpcy5fb25FcnJvcihlKX19KSxlLm9uc2hpcHBpbmdjb250YWN0c2VsZWN0ZWQ9dD0+Tm4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9oYW5kbGVTaGlwcGluZ0NvbnRhY3RTZWxlY3RlZChlLG4sdCl9KSxlLm9uc2hpcHBpbmdtZXRob2RzZWxlY3RlZD10PT5Obih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2hhbmRsZVNoaXBwaW5nTWV0aG9kU2VsZWN0ZWQoZSxuLHQpfSksZS5vbmNhbmNlbD0oKT0+Tm4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RoaXMuX2hhc0FwcGxlUGF5U2Vzc2lvbj0hMTt0cnl7Y29uc3QgZT1gL3JlbW90ZS1jaGVja291dC8ke3QuaWR9L3NpZ25vdXRgO3JldHVybiB5aWVsZCB0aGlzLl9yZXF1ZXN0U2VuZGVyLmdldChlKSx5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dCgpfWNhdGNoKGUpe3JldHVybiB0aGlzLl9vbkVycm9yKG5ldyBNbil9fSksZS5vbnBheW1lbnRhdXRob3JpemVkPW49Pk5uKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fb25QYXltZW50QXV0aG9yaXplZChuLGUsdCl9KX1faGFuZGxlU2hpcHBpbmdDb250YWN0U2VsZWN0ZWQoZSx0LG4pe3ZhciBpO3JldHVybiBObih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgcj10aGlzLl90cmFuc2Zvcm1Db250YWN0VG9BZGRyZXNzKG4uc2hpcHBpbmdDb250YWN0KTt0cnl7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3Mocil9Y2F0Y2godCl7cmV0dXJuIGUuYWJvcnQoKSx0aGlzLl9oYXNBcHBsZVBheVNlc3Npb249ITEsdGhpcy5fb25FcnJvcih0KX1jb25zdHtzdG9yZVByb2ZpbGU6e3N0b3JlTmFtZTpvfX09dDtsZXQgYT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7Y29uc3R7Y3VycmVuY3k6e2RlY2ltYWxQbGFjZXM6c319PWEuZ2V0Q2FydE9yVGhyb3coKTtsZXQgZD1hLmdldENoZWNrb3V0T3JUaHJvdygpO2NvbnN0IGM9bnVsbD09PShpPWQuY29uc2lnbm1lbnRzWzBdLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmlkLGw9ZC5jb25zaWdubWVudHNbMF0uYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLHU9bnVsbD09bD92b2lkIDA6bC5maW5kKCh7aWQ6ZX0pPT5lPT09YyksaD1udWxsPT1sP3ZvaWQgMDpsLmZpbHRlcihlPT5lLmlkIT09YykscD11P1t7bGFiZWw6dS5kZXNjcmlwdGlvbixhbW91bnQ6YCR7dS5jb3N0LnRvRml4ZWQocyl9YCxkZXRhaWw6dS5hZGRpdGlvbmFsRGVzY3JpcHRpb24saWRlbnRpZmllcjp1LmlkfV06W107aWYoaCYmWy4uLmguZmlsdGVyKGU9PmUuaXNSZWNvbW1lbmRlZCksLi4uaC5maWx0ZXIoZT0+IWUuaXNSZWNvbW1lbmRlZCldLmZvckVhY2goZT0+cC5wdXNoKHtsYWJlbDplLmRlc2NyaXB0aW9uLGFtb3VudDpgJHtlLmNvc3QudG9GaXhlZChzKX1gLGRldGFpbDplLmFkZGl0aW9uYWxEZXNjcmlwdGlvbixpZGVudGlmaWVyOmUuaWR9KSksIShsIGluc3RhbmNlb2YgQXJyYXkpKXRocm93IG5ldyBFcnJvcihcIlNoaXBwaW5nIG9wdGlvbnMgbm90IGF2YWlsYWJsZS5cIik7aWYoMD09PWwubGVuZ3RoKXJldHVybiB2b2lkIGUuY29tcGxldGVTaGlwcGluZ0NvbnRhY3RTZWxlY3Rpb24oQXBwbGVQYXlTZXNzaW9uLlNUQVRVU19JTlZBTElEX1NISVBQSU5HX1BPU1RBTF9BRERSRVNTLFtdLHt0eXBlOlwicGVuZGluZ1wiLGxhYmVsOm8sYW1vdW50OmAke2QuZ3JhbmRUb3RhbC50b0ZpeGVkKHMpfWB9LFtdKTtjb25zdCBtPWwuZmluZChlPT5lLmlzUmVjb21tZW5kZWQpLHk9bT9tLmlkOmxbMF0uaWQsZz11P3UuaWQ6eTt0cnl7eWllbGQgdGhpcy5fdXBkYXRlU2hpcHBpbmdPcHRpb24oZyl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuX29uRXJyb3IoZSl9YT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksZD1hLmdldENoZWNrb3V0T3JUaHJvdygpLGUuY29tcGxldGVTaGlwcGluZ0NvbnRhY3RTZWxlY3Rpb24oe25ld1NoaXBwaW5nTWV0aG9kczpwLG5ld1RvdGFsOnt0eXBlOlwiZmluYWxcIixsYWJlbDpvLGFtb3VudDpgJHtkLmdyYW5kVG90YWwudG9GaXhlZChzKX1gfSxuZXdMaW5lSXRlbXM6dGhpcy5fZ2V0VXBkYXRlZExpbmVJdGVtcyhkLHMpfSl9KX1faGFuZGxlU2hpcHBpbmdNZXRob2RTZWxlY3RlZChlLHQsbil7cmV0dXJuIE5uKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtzdG9yZVByb2ZpbGU6e3N0b3JlTmFtZTppfX09dCx7c2hpcHBpbmdNZXRob2Q6e2lkZW50aWZpZXI6cn19PW47dHJ5e3lpZWxkIHRoaXMuX3VwZGF0ZVNoaXBwaW5nT3B0aW9uKHIpfWNhdGNoKHQpe3JldHVybiBlLmFib3J0KCksdGhpcy5faGFzQXBwbGVQYXlTZXNzaW9uPSExLHRoaXMuX29uRXJyb3IodCl9Y29uc3Qgbz10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse2N1cnJlbmN5OntkZWNpbWFsUGxhY2VzOmF9fT1vLmdldENhcnRPclRocm93KCkscz1vLmdldENoZWNrb3V0T3JUaHJvdygpO2UuY29tcGxldGVTaGlwcGluZ01ldGhvZFNlbGVjdGlvbih7bmV3VG90YWw6e3R5cGU6XCJmaW5hbFwiLGxhYmVsOmksYW1vdW50OmAke3MuZ3JhbmRUb3RhbC50b0ZpeGVkKGEpfWB9LG5ld0xpbmVJdGVtczp0aGlzLl9nZXRVcGRhdGVkTGluZUl0ZW1zKHMsYSl9KX0pfV9nZXRVcGRhdGVkTGluZUl0ZW1zKGUsdCl7Y29uc3Qgbj1be2xhYmVsOnRoaXMuX3N1YlRvdGFsTGFiZWwsYW1vdW50OmAke2Uuc3VidG90YWwudG9GaXhlZCh0KX1gfV07cmV0dXJuIGUudGF4ZXMuZm9yRWFjaChlPT5uLnB1c2goe2xhYmVsOmUubmFtZSxhbW91bnQ6YCR7ZS5hbW91bnQudG9GaXhlZCh0KX1gfSkpLG4ucHVzaCh7bGFiZWw6dGhpcy5fc2hpcHBpbmdMYWJlbCxhbW91bnQ6YCR7ZS5zaGlwcGluZ0Nvc3RUb3RhbC50b0ZpeGVkKHQpfWB9KSxufV91cGRhdGVTaGlwcGluZ09wdGlvbihlKXtyZXR1cm4gTm4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKGUpfSl9X29uVmFsaWRhdGVNZXJjaGFudChlLHQpe3JldHVybiBObih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj1bYHZhbGlkYXRpb25Vcmw9JHt0LnZhbGlkYXRpb25VUkx9YCxgbWVyY2hhbnRJZGVudGlmaWVyPSR7ZS5pbml0aWFsaXphdGlvbkRhdGEubWVyY2hhbnRJZH1gLGBkaXNwbGF5TmFtZT0ke2UuaW5pdGlhbGl6YXRpb25EYXRhLnN0b3JlTmFtZX1gLGBkb21haW5OYW1lPSR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfWBdLmpvaW4oXCImXCIpO3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoYCR7ZS5pbml0aWFsaXphdGlvbkRhdGEucGF5bWVudHNVcmx9L2FwaS9wdWJsaWMvdjEvcGF5bWVudHMvYXBwbGVwYXkvdmFsaWRhdGVfbWVyY2hhbnRgLHtjcmVkZW50aWFsczohMSxoZWFkZXJzOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uXCIsXCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFwiWC1YU1JGLVRPS0VOXCI6bnVsbH0sYm9keTpufSl9KX1fb25QYXltZW50QXV0aG9yaXplZChlLHQsbil7dmFyIGk7cmV0dXJuIE5uKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHt0b2tlbjpyLGJpbGxpbmdDb250YWN0Om8sc2hpcHBpbmdDb250YWN0OmF9PWUucGF5bWVudCxzPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aD4wO2xldCBkOyhudWxsPT09KGk9bi5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmdhdGV3YXkpPT09a24uQlJBSU5UUkVFJiYoZD15aWVsZCB0aGlzLl9nZXRCcmFpbnRyZWVEZXZpY2VEYXRhKCkpO2NvbnN0IGM9e21ldGhvZElkOm4uaWQscGF5bWVudERhdGE6e2RldmljZVNlc3Npb25JZDpkLGZvcm1hdHRlZFBheWxvYWQ6e2FwcGxlX3BheV90b2tlbjp7cGF5bWVudF9kYXRhOnIucGF5bWVudERhdGEscGF5bWVudF9tZXRob2Q6ci5wYXltZW50TWV0aG9kLHRyYW5zYWN0aW9uX2lkOnIudHJhbnNhY3Rpb25JZGVudGlmaWVyfX19fSxsPXRoaXMuX3RyYW5zZm9ybUNvbnRhY3RUb0FkZHJlc3MobyksdT10aGlzLl90cmFuc2Zvcm1Db250YWN0VG9BZGRyZXNzKGEpLGg9bnVsbD09YT92b2lkIDA6YS5lbWFpbEFkZHJlc3MscD0obnVsbD09YT92b2lkIDA6YS5waG9uZU51bWJlcil8fFwiXCI7dHJ5e3JldHVybiB5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxsKSx7ZW1haWw6aCxwaG9uZTpwfSkpLHMmJih5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyh1KSkseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7dXNlU3RvcmVDcmVkaXQ6ITF9KSx5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoYyksdC5jb21wbGV0ZVBheW1lbnQoQXBwbGVQYXlTZXNzaW9uLlNUQVRVU19TVUNDRVNTKSx0aGlzLl9vbkF1dGhvcml6ZUNhbGxiYWNrKCl9Y2F0Y2goZSl7cmV0dXJuIHQuY29tcGxldGVQYXltZW50KEFwcGxlUGF5U2Vzc2lvbi5TVEFUVVNfRkFJTFVSRSksdGhpcy5fb25FcnJvcihlKX19KX1fdHJhbnNmb3JtQ29udGFjdFRvQWRkcmVzcyhlKXtyZXR1cm57Zmlyc3ROYW1lOihudWxsPT1lP3ZvaWQgMDplLmdpdmVuTmFtZSl8fFwiXCIsbGFzdE5hbWU6KG51bGw9PWU/dm9pZCAwOmUuZmFtaWx5TmFtZSl8fFwiXCIsY2l0eToobnVsbD09ZT92b2lkIDA6ZS5sb2NhbGl0eSl8fFwiXCIsY29tcGFueTpcIlwiLGFkZHJlc3MxOihudWxsPT1lP3ZvaWQgMDplLmFkZHJlc3NMaW5lcykmJmUuYWRkcmVzc0xpbmVzWzBdfHxcIlwiLGFkZHJlc3MyOihudWxsPT1lP3ZvaWQgMDplLmFkZHJlc3NMaW5lcykmJmUuYWRkcmVzc0xpbmVzWzFdfHxcIlwiLHBvc3RhbENvZGU6KG51bGw9PWU/dm9pZCAwOmUucG9zdGFsQ29kZSl8fFwiXCIsY291bnRyeUNvZGU6KG51bGw9PWU/dm9pZCAwOmUuY291bnRyeUNvZGUpfHxcIlwiLHBob25lOihudWxsPT1lP3ZvaWQgMDplLnBob25lTnVtYmVyKXx8XCJcIixzdGF0ZU9yUHJvdmluY2U6KG51bGw9PWU/dm9pZCAwOmUuYWRtaW5pc3RyYXRpdmVBcmVhKXx8XCJcIixzdGF0ZU9yUHJvdmluY2VDb2RlOihudWxsPT1lP3ZvaWQgMDplLmFkbWluaXN0cmF0aXZlQXJlYSl8fFwiXCIsY3VzdG9tRmllbGRzOltdfX1fZ2V0QnJhaW50cmVlRGV2aWNlRGF0YSgpe3JldHVybiBObih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0e2RldmljZURhdGE6ZX09eWllbGQgdGhpcy5fYnJhaW50cmVlU2RrLmdldERhdGFDb2xsZWN0b3JPclRocm93KCk7cmV0dXJuIGV9Y2F0Y2goZSl7fX0pfV9pbml0aWFsaXplQnJhaW50cmVlU2RrKCl7cmV0dXJuIE5uKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGtuLkJSQUlOVFJFRSk7Y29uc3QgZT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZChrbi5CUkFJTlRSRUUpO2UmJmUuY2xpZW50VG9rZW4mJmUuaW5pdGlhbGl6YXRpb25EYXRhJiZ0aGlzLl9icmFpbnRyZWVTZGsuaW5pdGlhbGl6ZShlLmNsaWVudFRva2VuKX0pfX1mdW5jdGlvbiBGbihlKXtpZighZnVuY3Rpb24oZSl7cmV0dXJuXCJBcHBsZVBheVNlc3Npb25cImluIGV9KGUpKXRocm93IG5ldyBFcnJvcihcIkFwcGxlIHBheSBpcyBub3Qgc3VwcG9ydGVkXCIpfWNsYXNzIFJue2NyZWF0ZShlKXtyZXR1cm4gRm4od2luZG93KSxuZXcgQXBwbGVQYXlTZXNzaW9uKDEsZSl9fWNsYXNzIExue2NvbnN0cnVjdG9yKGUpe3RoaXMuc2NyaXB0TG9hZGVyPWUsdGhpcy5zZGtWZXJzaW9uPVwiMS5sYXRlc3RcIn1sb2FkU2RrKCl7cmV0dXJuIGU9dGhpcyx0PXZvaWQgMCxpPWZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoYGh0dHBzOi8vYXBwbGVwYXkuY2RuLWFwcGxlLmNvbS9qc2FwaS8ke3RoaXMuc2RrVmVyc2lvbn0vYXBwbGUtcGF5LXNkay5qc2ApLEZuKHdpbmRvdyl9LG5ldygobj12b2lkIDApfHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KTt2YXIgZSx0LG4saX19Y29uc3QgQm49bm4oZT0+e2NvbnN0e2dldEhvc3Q6dH09ZS5nZXRTdGF0ZSgpLGk9bmV3IHBuKGUpO3JldHVybiBuZXcgeG4obih7aG9zdDp0KCl9KSxlLG5ldyBSbixuZXcgRW4obmV3IERuKGEoKSx3aW5kb3csaSkpLG5ldyBMbihuZXcgcikpfSxbe2lkOlwiYXBwbGVwYXlcIn1dKTtjbGFzcyBqbiBleHRlbmRzIEJ0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQgZHVyaW5nIGJ1eSBub3cgY2FydCBjcmVhdGlvbiBwcm9jZXNzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiKSx0aGlzLm5hbWU9XCJCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvclwiLHRoaXMudHlwZT1cImJ1eV9ub3dfY2FydF9jcmVhdGlvbl9lcnJvclwifX1jb25zdCBVbj17Ym9keTp7fSxoZWFkZXJzOnt9LHN0YXR1czowfTtjbGFzcyBxbiBleHRlbmRzIEJ0e2NvbnN0cnVjdG9yKGUse21lc3NhZ2U6dCxlcnJvcnM6bn09e30pe2NvbnN0e2JvZHk6aSxoZWFkZXJzOnIsc3RhdHVzOm99PWV8fFVuO3N1cGVyKHR8fFwiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuXCIpLHRoaXMubmFtZT1cIlJlcXVlc3RFcnJvclwiLHRoaXMudHlwZT1cInJlcXVlc3RcIix0aGlzLmJvZHk9aSx0aGlzLmhlYWRlcnM9cix0aGlzLnN0YXR1cz1vLHRoaXMuZXJyb3JzPW58fFtdfX12YXIgVm4sR24sSG4sJG4sV24sWW4sS24sSm47IWZ1bmN0aW9uKGUpe2UuQnV5Tm93PVwiQlVZX05PV1wifShWbnx8KFZuPXt9KSksZnVuY3Rpb24oZSl7ZS5Qb3NzaWJsZT1cIlBPU1NJQkxFXCIsZS5Obz1cIk5PXCIsZS5Vbmtub3duPVwiVU5LTk9XTlwiLGUuWWVzPVwiWUVTXCJ9KEdufHwoR249e30pKSxmdW5jdGlvbihlKXtlLkFVVEhPUklaRT1cImF1dGhvcml6ZVwiLGUuQ0FQVFVSRT1cImNhcHR1cmVcIn0oSG58fChIbj17fSkpLGZ1bmN0aW9uKGUpe2UucGF5cGFsPVwicGF5cGFsXCIsZS5jaGVja291dD1cImNoZWNrb3V0XCIsZS5idXlub3c9XCJidXlub3dcIixlLnBheT1cInBheVwiLGUuaW5zdGFsbG1lbnQ9XCJpbnN0YWxsbWVudFwifSgkbnx8KCRuPXt9KSksZnVuY3Rpb24oZSl7ZS5nb2xkPVwiZ29sZFwiLGUuYmx1ZT1cImJsdWVcIixlLnNpbHZlcj1cInNpbHZlclwiLGUuYmxhY2s9XCJibGFja1wiLGUud2hpdGU9XCJ3aGl0ZVwifShXbnx8KFduPXt9KSksZnVuY3Rpb24oZSl7ZS5waWxsPVwicGlsbFwiLGUucmVjdD1cInJlY3RcIn0oWW58fChZbj17fSkpLGZ1bmN0aW9uKGUpe2UuT1hYTz1cIm94eG9cIn0oS258fChLbj17fSkpLGZ1bmN0aW9uKGUpe2UuQXBwcm92ZWQ9XCJBUFBST1ZFRFwiLGUuQ3JlYXRlZD1cIkNSRUFURURcIixlLlBheWVyQWN0aW9uUmVxdWlyZWQ9XCJQQVlFUl9BQ1RJT05fUkVRVUlSRURcIixlLlBvbGxpbmdTdG9wPVwiUE9MTElOR19TVE9QXCIsZS5Qb2xsaW5nRXJyb3I9XCJQT0xMSU5HX0VSUk9SXCJ9KEpufHwoSm49e30pKTt2YXIgWm49ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgUW57Y29uc3RydWN0b3IoZSx0LG4saSl7dGhpcy5mb3JtUG9zdGVyPWUsdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlcj1uLHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1NjcmlwdExvYWRlcj1pfWxvYWRQYXlQYWxTZGsoZSx0LG4saSl7cmV0dXJuIFpuKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCByPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLG89dHx8ci5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGUsYT1yLmdldFBheW1lbnRNZXRob2RPclRocm93KGUpO3JldHVybiB0aGlzLnBheXBhbFNkaz15aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRMb2FkZXIuZ2V0UGF5UGFsU0RLKGEsbyxuLGkpLHRoaXMucGF5cGFsU2RrfSl9Z2V0UGF5UGFsU2RrT3JUaHJvdygpe2lmKCF0aGlzLnBheXBhbFNkayl0aHJvdyBuZXcgWHQ7cmV0dXJuIHRoaXMucGF5cGFsU2RrfWNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KGUpe3JldHVybiBabih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD1lLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSgpO2lmKCF0KXRocm93IG5ldyBqdChrdC5NaXNzaW5nQ2FydCk7dHJ5e3JldHVybiB5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydCh0KX1jYXRjaChlKXt0aHJvdyBuZXcgam59fSl9Y3JlYXRlT3JkZXIoZSx0KXtyZXR1cm4gWm4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5pZCx7b3JkZXJJZDppfT15aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLmNyZWF0ZU9yZGVyKGUsT2JqZWN0LmFzc2lnbih7Y2FydElkOm59LHQpKTtyZXR1cm4gaX0pfWNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhlLHQpe3JldHVybiBabih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmlkLHtvcmRlcklkOmksc2V0dXBUb2tlbjpyfT15aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLmNyZWF0ZU9yZGVyKGUsT2JqZWN0LmFzc2lnbih7Y2FydElkOm59LHQpKTtyZXR1cm4gT2JqZWN0LmFzc2lnbih7b3JkZXJJZDppfSxyP3tzZXR1cFRva2VuOnJ9Ont9KX0pfXVwZGF0ZU9yZGVyKCl7cmV0dXJuIFpuKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBlPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHQ9ZS5nZXRDYXJ0T3JUaHJvdygpLG49ZS5nZXRDb25zaWdubWVudHNPclRocm93KClbMF07dHJ5e3lpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIudXBkYXRlT3JkZXIoe2F2YWlsYWJsZVNoaXBwaW5nT3B0aW9uczpuLmF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyxjYXJ0SWQ6dC5pZCxzZWxlY3RlZFNoaXBwaW5nT3B0aW9uOm4uc2VsZWN0ZWRTaGlwcGluZ09wdGlvbn0pfWNhdGNoKGUpe3Rocm93IG5ldyBxbn19KX1nZXRPcmRlclN0YXR1cyhlLHQpe3JldHVybiBabih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0e3N0YXR1czpufT15aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLmdldE9yZGVyU3RhdHVzKGUsdCk7cmV0dXJuIG59Y2F0Y2goZSl7dGhyb3cgbmV3IHFufX0pfXRva2VuaXplUGF5bWVudChlLHQpe2NvbnN0IG49dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKTtpZighdCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ09yZGVySWQpO3JldHVybiB0aGlzLmZvcm1Qb3N0ZXIucG9zdEZvcm0oXCIvY2hlY2tvdXQucGhwXCIsT2JqZWN0LmFzc2lnbih7cGF5bWVudF90eXBlOlwicGF5cGFsXCIsYWN0aW9uOlwic2V0X2V4dGVybmFsX2NoZWNrb3V0XCIscHJvdmlkZXI6ZSxvcmRlcl9pZDp0fSxuLnNvdXJjZT09PVZuLkJ1eU5vdyYme2NhcnRfaWQ6bi5pZH0pKX1zdWJtaXRQYXltZW50KGUsdCxuKXtyZXR1cm4gWm4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IGk9e2Zvcm1hdHRlZFBheWxvYWQ6e3ZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDpudWxsLHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50Om51bGwsZGV2aWNlX2luZm86bnVsbCxtZXRob2RfaWQ6ZSxwYXlwYWxfYWNjb3VudDp7b3JkZXJfaWQ6dH19fTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChPYmplY3QuYXNzaWduKHttZXRob2RJZDplLHBheW1lbnREYXRhOml9LG4/e2dhdGV3YXlJZDpufTp7fSkpfSl9Z2V0U2hpcHBpbmdPcHRpb25PclRocm93KGUpe2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q29uc2lnbm1lbnRzT3JUaHJvdygpWzBdLG49dC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnN8fFtdLGk9bi5maW5kKGU9PmUuaXNSZWNvbW1lbmRlZCkscj0oZT9uLmZpbmQodD0+dC5pZD09PWUpOm4uZmluZChlPT57dmFyIG47cmV0dXJuIGUuaWQ9PT0obnVsbD09PShuPXQuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbil8fHZvaWQgMD09PW4/dm9pZCAwOm4uaWQpfSkpfHxpfHxuWzBdO2lmKCFyKXRocm93IG5ldyBFcnJvcihcIllvdXIgb3JkZXIgY2FuJ3QgYmUgc2hpcHBlZCB0byB0aGlzIGFkZHJlc3NcIik7cmV0dXJuIHJ9Z2V0QWRkcmVzcyhlKXtyZXR1cm57Zmlyc3ROYW1lOihudWxsPT1lP3ZvaWQgMDplLmZpcnN0TmFtZSl8fFwiXCIsbGFzdE5hbWU6KG51bGw9PWU/dm9pZCAwOmUubGFzdE5hbWUpfHxcIlwiLGVtYWlsOihudWxsPT1lP3ZvaWQgMDplLmVtYWlsKXx8XCJcIixwaG9uZToobnVsbD09ZT92b2lkIDA6ZS5waG9uZSl8fFwiXCIsY29tcGFueTpcIlwiLGFkZHJlc3MxOihudWxsPT1lP3ZvaWQgMDplLmFkZHJlc3MxKXx8XCJcIixhZGRyZXNzMjoobnVsbD09ZT92b2lkIDA6ZS5hZGRyZXNzMil8fFwiXCIsY2l0eToobnVsbD09ZT92b2lkIDA6ZS5jaXR5KXx8XCJcIixjb3VudHJ5Q29kZToobnVsbD09ZT92b2lkIDA6ZS5jb3VudHJ5Q29kZSl8fFwiXCIscG9zdGFsQ29kZToobnVsbD09ZT92b2lkIDA6ZS5wb3N0YWxDb2RlKXx8XCJcIixzdGF0ZU9yUHJvdmluY2U6XCJcIixzdGF0ZU9yUHJvdmluY2VDb2RlOihudWxsPT1lP3ZvaWQgMDplLnN0YXRlT3JQcm92aW5jZUNvZGUpfHxcIlwiLGN1c3RvbUZpZWxkczpbXX19Z2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKHtwYXllcjplfSl7dmFyIHQsbjtyZXR1cm4gdGhpcy5nZXRBZGRyZXNzKHtmaXJzdE5hbWU6ZS5uYW1lLmdpdmVuX25hbWUsbGFzdE5hbWU6ZS5uYW1lLnN1cm5hbWUsZW1haWw6ZS5lbWFpbF9hZGRyZXNzLGFkZHJlc3MxOmUuYWRkcmVzcy5hZGRyZXNzX2xpbmVfMSxhZGRyZXNzMjplLmFkZHJlc3MuYWRkcmVzc19saW5lXzIsY2l0eTplLmFkZHJlc3MuYWRtaW5fYXJlYV8yLGNvdW50cnlDb2RlOmUuYWRkcmVzcy5jb3VudHJ5X2NvZGUscG9zdGFsQ29kZTplLmFkZHJlc3MucG9zdGFsX2NvZGUsc3RhdGVPclByb3ZpbmNlQ29kZTplLmFkZHJlc3MuYWRtaW5fYXJlYV8xLHBob25lOm51bGw9PT0obj1udWxsPT09KHQ9ZS5waG9uZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQucGhvbmVfbnVtYmVyKXx8dm9pZCAwPT09bj92b2lkIDA6bi5uYXRpb25hbF9udW1iZXJ9KX1nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKGUpe2NvbnN0e3BheWVyOnQscHVyY2hhc2VfdW5pdHM6bn09ZSx7YWRkcmVzczppLG5hbWU6e2Z1bGxfbmFtZTpyfX09blswXS5zaGlwcGluZyxbbywuLi5hXT1yLnNwbGl0KFwiIFwiKTtyZXR1cm4gdGhpcy5nZXRBZGRyZXNzKHtmaXJzdE5hbWU6byxsYXN0TmFtZTphLmpvaW4oXCIgXCIpLGVtYWlsOnQuZW1haWxfYWRkcmVzcyxhZGRyZXNzMTppLmFkZHJlc3NfbGluZV8xLGFkZHJlc3MyOmkuYWRkcmVzc19saW5lXzIsY2l0eTppLmFkbWluX2FyZWFfMixjb3VudHJ5Q29kZTppLmNvdW50cnlfY29kZSxwb3N0YWxDb2RlOmkucG9zdGFsX2NvZGUsc3RhdGVPclByb3ZpbmNlQ29kZTppLmFkbWluX2FyZWFfMX0pfWdldFZhbGlkQnV0dG9uU3R5bGUoZSl7Y29uc3R7Y29sb3I6dCxoZWlnaHQ6bixsYWJlbDppLHNoYXBlOnJ9PWV8fHt9LG89e2NvbG9yOnQmJlduW3RdP3Q6dm9pZCAwLGhlaWdodDp0aGlzLmdldFZhbGlkSGVpZ2h0KG4pLGxhYmVsOmkmJiRuW2ldP2k6dm9pZCAwLHNoYXBlOnImJlluW3JdP3I6dm9pZCAwfTtyZXR1cm4gSChvLFQpfWdldFZhbGlkSGVpZ2h0KGUpe3JldHVybiBlJiZcIm51bWJlclwiPT10eXBlb2YgZT9lPjU1PzU1OmU8MjU/MjU6ZTo0MH1yZW1vdmVFbGVtZW50KGUpe2NvbnN0IHQ9ZSYmZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSk7dCYmKHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIil9fWNvbnN0IFhuPVwiVGhpcyBBUEkgZW5kcG9pbnQgaXMgZm9yIGludGVybmFsIHVzZSBvbmx5IGFuZCBtYXkgY2hhbmdlIGluIHRoZSBmdXR1cmVcIjt2YXIgZWk7IWZ1bmN0aW9uKGUpe2UuSnNvbj1cImFwcGxpY2F0aW9uL2pzb25cIixlLkpzb25WMT1cImFwcGxpY2F0aW9uL3ZuZC5iYy52MStqc29uXCJ9KGVpfHwoZWk9e30pKTtjb25zdCB0aT1laSxuaT17XCJYLUNoZWNrb3V0LVNESy1WZXJzaW9uXCI6XCIxLjgwMy4wXCJ9O3ZhciBpaT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyByaXtjb25zdHJ1Y3RvcihlKXt0aGlzLnJlcXVlc3RTZW5kZXI9ZX1jcmVhdGVPcmRlcihlLHQpe3JldHVybiBpaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj1gL2FwaS9zdG9yZWZyb250L3BheW1lbnQvJHtlfWAsaT10LHI9T2JqZWN0LmFzc2lnbih7XCJYLUFQSS1JTlRFUk5BTFwiOlhuLFwiQ29udGVudC1UeXBlXCI6dGkuSnNvbn0sbmkpO3JldHVybih5aWVsZCB0aGlzLnJlcXVlc3RTZW5kZXIucG9zdChuLHtoZWFkZXJzOnIsYm9keTppfSkpLmJvZHl9KX11cGRhdGVPcmRlcihlKXtyZXR1cm4gaWkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9ZSxuPU9iamVjdC5hc3NpZ24oe1wiWC1BUEktSU5URVJOQUxcIjpYbixcIkNvbnRlbnQtVHlwZVwiOnRpLkpzb259LG5pKTtyZXR1cm4oeWllbGQgdGhpcy5yZXF1ZXN0U2VuZGVyLnB1dChcIi9hcGkvc3RvcmVmcm9udC9pbml0aWFsaXphdGlvbi9iaWdjb21tZXJjZV9wYXltZW50c1wiLHtoZWFkZXJzOm4sYm9keTp0fSkpLmJvZHl9KX1nZXRPcmRlclN0YXR1cyhlPVwiYmlnY29tbWVyY2VfcGF5bWVudHNcIix0KXtyZXR1cm4gaWkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49YC9hcGkvc3RvcmVmcm9udC9pbml0aWFsaXphdGlvbi8ke2V9YCxpPU9iamVjdC5hc3NpZ24oe1wiWC1BUEktSU5URVJOQUxcIjpYbixcIkNvbnRlbnQtVHlwZVwiOnRpLkpzb259LG5pKTtyZXR1cm4oeWllbGQgdGhpcy5yZXF1ZXN0U2VuZGVyLmdldChuLE9iamVjdC5hc3NpZ24oe2hlYWRlcnM6aX0sdCkpKS5ib2R5fSl9fXZhciBvaT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBhaXtjb25zdHJ1Y3RvcihlKXt0aGlzLnNjcmlwdExvYWRlcj1lLHRoaXMud2luZG93PXdpbmRvd31nZXRQYXlQYWxTREsoZSx0LG4saSl7cmV0dXJuIG9pKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCByPXRoaXMuZ2V0UGF5UGFsU2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhlLHQsbik7cmV0dXJuIHRoaXMubG9hZFBheVBhbFNESyhyLGkpfSl9bG9hZFBheVBhbFNESyhlLHQ9ITEpe3JldHVybiBvaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXRoaXMud2luZG93LnBheXBhbHx8dCl7Y29uc3QgdD10aGlzLnRyYW5zZm9ybUNvbmZpZyhlLm9wdGlvbnMpLG49dGhpcy50cmFuc2Zvcm1Db25maWcoZS5hdHRyaWJ1dGVzKSxpPWBodHRwczovL3d3dy5wYXlwYWwuY29tL3Nkay9qcz8ke25ldyBVUkxTZWFyY2hQYXJhbXModCkudG9TdHJpbmcoKX1gO3lpZWxkIHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoaSx7YXN5bmM6ITAsYXR0cmlidXRlczpufSl9aWYoIXRoaXMud2luZG93LnBheXBhbCl0aHJvdyBuZXcgWHQ7cmV0dXJuIHRoaXMud2luZG93LnBheXBhbH0pfWdldFBheVBhbFNka1NjcmlwdENvbmZpZ09yVGhyb3coZSx0LG49ITApe2NvbnN0e2lkOmksY2xpZW50VG9rZW46cixpbml0aWFsaXphdGlvbkRhdGE6b309ZTtpZighKG51bGw9PW8/dm9pZCAwOm8uY2xpZW50SWQpKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3R7aW50ZW50OmEsY2xpZW50SWQ6cyxtZXJjaGFudElkOmQsYnV5ZXJDb3VudHJ5OmMsYXR0cmlidXRpb25JZDpsLGlzVmVubW9FbmFibGVkOnUsaXNIb3N0ZWRDaGVja291dEVuYWJsZWQ6aCxpc1BheVBhbENyZWRpdEF2YWlsYWJsZTpwLGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU6bSxhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzOnk9W10sZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM6Zz1bXSxpc0dvb2dsZVBheUVuYWJsZWQ6dn09byxmPWh8fG4sUz1cImJpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzXCI9PT1pLF89Uz9bXCJjYXJkXCJdOltdLHc9cD9bXCJjcmVkaXRcIixcInBheWxhdGVyXCJdOltdLEM9bnx8IWYsST11P1tcInZlbm1vXCJdOltdLGI9Qz9nOltdLFA9dj9bXCJnb29nbGVwYXlcIl06W10sTz1uP1tcImNhcmQtZmllbGRzXCJdOltdLEU9Wy4uLlM/W106W1wiY2FyZFwiXSwuLi5wP1tdOltcImNyZWRpdFwiLFwicGF5bGF0ZXJcIl0sLi4udT9bXTpbXCJ2ZW5tb1wiXSwuLi5DP3kuZmlsdGVyKGU9PiFnLmluY2x1ZGVzKGUpKTp5XSxBPVsuLi5fLC4uLncsLi4uSSwuLi5iXTtyZXR1cm57b3B0aW9uczpPYmplY3QuYXNzaWduKHtcImNsaWVudC1pZFwiOnMsXCJtZXJjaGFudC1pZFwiOmQsXCJlbmFibGUtZnVuZGluZ1wiOkEubGVuZ3RoPjA/QTp2b2lkIDAsXCJkaXNhYmxlLWZ1bmRpbmdcIjpFLmxlbmd0aD4wP0U6dm9pZCAwLGNvbW1pdDpmLGNvbXBvbmVudHM6W1wiYnV0dG9uc1wiLFwiaG9zdGVkLWZpZWxkc1wiLFwicGF5bWVudC1maWVsZHNcIixcImxlZ2FsXCIsLi4uUCwuLi5PXSxjdXJyZW5jeTp0LGludGVudDphfSxtJiZ7XCJidXllci1jb3VudHJ5XCI6Y30pLGF0dHJpYnV0ZXM6e1wiZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkXCI6bCxcImRhdGEtY2xpZW50LXRva2VuXCI6cn19fXRyYW5zZm9ybUNvbmZpZyhlKXtsZXQgdD17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChuPT57Y29uc3QgaT1lW25dO251bGw9PWl8fFwiXCI9PT1pfHxBcnJheS5pc0FycmF5KGkpJiYwPT09aS5sZW5ndGh8fCh0PU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7W25dOkFycmF5LmlzQXJyYXkoaSk/aS5qb2luKFwiLFwiKTppfSkpfSksdH19Y29uc3Qgc2k9ZT0+e2NvbnN0e2dldEhvc3Q6dH09ZS5nZXRTdGF0ZSgpO3JldHVybiBuZXcgUW4oRWUoKSxlLG5ldyByaShuKHtob3N0OnQoKX0pKSxuZXcgYWkoYSgpKSl9LGRpPTM2O3ZhciBjaT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBsaXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZT10LHRoaXMub25FcnJvcj1WfWluaXRpYWxpemUoZSl7cmV0dXJuIGNpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtiaWdjb21tZXJjZV9wYXltZW50czp0LG1ldGhvZElkOm59PWU7aWYoIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighdC5jb250YWluZXIpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzLmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZih0Lm9uQ2xpY2smJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQub25DbGljayl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHMub25DbGlja1wiIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLicpO3RoaXMub25FcnJvcj10Lm9uRXJyb3J8fFYsdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZChuKXx8KHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChuKSk7Y29uc3QgaT15aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhuKTtpJiZpLkJ1dHRvbnMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGkuQnV0dG9ucz90aGlzLnJlbmRlckJ1dHRvbihuLHQpOmNvbnNvbGUuZXJyb3IoXCJbQkMgUGF5UGFsXTogUGF5UGFsIEJ1dHRvbiBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREtcIil9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9c2lnbkluKGUsdCl7cmV0dXJuIGNpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGUsdCksUHJvbWlzZS5yZXNvbHZlKCl9KX1zaWduT3V0KGUpe3JldHVybiBjaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIoZSksUHJvbWlzZS5yZXNvbHZlKCl9KX1leGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KGUpe3ZhciB0O3JldHVybiBudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrKXx8dm9pZCAwPT09dHx8dC5jYWxsKGUpLFByb21pc2UucmVzb2x2ZSgpfXJlbmRlckJ1dHRvbihlLHQpe2NvbnN0e2NvbnRhaW5lcjpuLG9uQ2xpY2s6aSxvbkNvbXBsZXRlOnJ9PXQsbz10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpLGE9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSkse2lzSG9zdGVkQ2hlY2tvdXRFbmFibGVkOnMscGF5bWVudEJ1dHRvblN0eWxlczpkfT1hLmluaXRpYWxpemF0aW9uRGF0YXx8e30se2NoZWNrb3V0VG9wQnV0dG9uU3R5bGVzOmN9PWR8fHt9LGw9T2JqZWN0LmFzc2lnbih7Y3JlYXRlT3JkZXI6KCk9PnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcImJpZ2NvbW1lcmNlX3BheW1lbnRzXCIpLG9uQXBwcm92ZTooe29yZGVySUQ6dH0pPT50aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KGUsdCl9LGkmJntvbkNsaWNrOigpPT5pKCl9KSx1PXtvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTplPT50aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGUpLG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlOmU9PnRoaXMub25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZSksb25BcHByb3ZlOih0LG4pPT50aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKHQsbixlLHIpfSxoPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7ZnVuZGluZ1NvdXJjZTpvLkZVTkRJTkcuUEFZUEFMLHN0eWxlOnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxjKSx7aGVpZ2h0OmRpfSkpfSxsKSxzJiZ1KSxwPW8uQnV0dG9ucyhoKTtwLmlzRWxpZ2libGUoKT9wLnJlbmRlcihgIyR7bn1gKTp0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChuKX1vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShlLHQsbixpKXtyZXR1cm4gY2kodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFlLm9yZGVySUQpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdPcmRlcklkKTtjb25zdCByPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCksbz15aWVsZCB0Lm9yZGVyLmdldCgpO3RyeXtjb25zdCB0PXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMobyk7aWYoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKHQpLHIubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoPjApe2NvbnN0IGU9dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMobyk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhlKSx5aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKX15aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30se3BhcmFtczp7bWV0aG9kSWQ6bn19KSx5aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChuLGUub3JkZXJJRCksaSYmXCJmdW5jdGlvblwiPT10eXBlb2YgaSYmaSgpfWNhdGNoKGUpe3RoaXMuaGFuZGxlRXJyb3IoZSl9fSl9b25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZSl7cmV0dXJuIGNpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRBZGRyZXNzKHtjaXR5OmUuc2hpcHBpbmdBZGRyZXNzLmNpdHksY291bnRyeUNvZGU6ZS5zaGlwcGluZ0FkZHJlc3MuY291bnRyeUNvZGUscG9zdGFsQ29kZTplLnNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlLHN0YXRlT3JQcm92aW5jZUNvZGU6ZS5zaGlwcGluZ0FkZHJlc3Muc3RhdGV9KTt0cnl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKHQpLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3ModCk7Y29uc3QgZT10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKGUuaWQpLHlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpfWNhdGNoKGUpe3RoaXMuaGFuZGxlRXJyb3IoZSl9fSl9b25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZSl7cmV0dXJuIGNpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coZS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkKTt0cnl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHQuaWQpLHlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpfWNhdGNoKGUpe3RoaXMuaGFuZGxlRXJyb3IoZSl9fSl9aGFuZGxlRXJyb3IoZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpcy5vbkVycm9yKXRocm93IGU7dGhpcy5vbkVycm9yKGUpfX1jb25zdCB1aT1ubihlPT5uZXcgbGkoZSxzaShlKSksW3tpZDpcImJpZ2NvbW1lcmNlX3BheW1lbnRzXCJ9XSk7dmFyIGhpLHBpLG1pLHlpLGdpLHZpLGZpLFNpLF9pPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIHdpe2NvbnN0cnVjdG9yKGUpe3RoaXMuc2NyaXB0TG9hZGVyPWUsdGhpcy53aW5kb3c9d2luZG93fWdldFBheVBhbEZhc3RsYW5lU2RrKGUsdCxuKXtyZXR1cm4gX2kodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZVNkayl7Y29uc3QgaT10aGlzLmdldFBheVBhbEZhc3RsYW5lU2RrQ29uZmlndXJhdGlvbihlLHQsbik7aWYoeWllbGQgdGhpcy5sb2FkUGF5UGFsU2RrKGkpLCF0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZVNkayl0aHJvdyBuZXcgWHR9cmV0dXJuIHRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lU2RrfSl9Z2V0UGF5UGFsR29vZ2xlUGF5U2RrKGUsdCxuLGkpe3JldHVybiBfaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXRoaXMud2luZG93LnBheXBhbEdvb2dsZVBheXx8aSl7Y29uc3QgaT10aGlzLmdldFBheVBhbEdvb2dsZVBheVNka1NjcmlwdENvbmZpZ09yVGhyb3coZSx0LG4pO3lpZWxkIHRoaXMubG9hZFBheVBhbFNkayhpKX1pZighdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5KXRocm93IG5ldyBYdDtyZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5fSl9Z2V0UGF5UGFsQXBtc1NkayhlLHQpe3JldHVybiBfaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXRoaXMud2luZG93LnBheXBhbEFwbXMpe2NvbnN0IG49dGhpcy5nZXRQYXlQYWxBcG1TZGtDb25maWd1cmF0aW9uKGUsdCk7aWYoeWllbGQgdGhpcy5sb2FkUGF5UGFsU2RrKG4pLCF0aGlzLndpbmRvdy5wYXlwYWxBcG1zKXRocm93IG5ldyBYdH1yZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsQXBtc30pfWdldFBheVBhbE1lc3NhZ2VzKGUsdCl7cmV0dXJuIF9pKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy53aW5kb3cucGF5cGFsTWVzc2FnZXMpe2NvbnN0IG49dGhpcy5nZXRQYXlQYWxTZGtNZXNzYWdlc0NvbmZpZ3VyYXRpb24oZSx0KTt5aWVsZCB0aGlzLmxvYWRQYXlQYWxTZGsobil9aWYoIXRoaXMud2luZG93LnBheXBhbE1lc3NhZ2VzKXRocm93IG5ldyBYdDtyZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsTWVzc2FnZXN9KX1sb2FkUGF5UGFsU2RrKHtvcHRpb25zOmUsYXR0cmlidXRlczp0fSl7cmV0dXJuIF9pKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXRoaXMudHJhbnNmb3JtQ29uZmlnKGUpLGk9dGhpcy50cmFuc2Zvcm1Db25maWcodCkscj1gaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9zZGsvanM/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKG4pLnRvU3RyaW5nKCl9YDt5aWVsZCB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KHIse2FzeW5jOiEwLGF0dHJpYnV0ZXM6aX0pfSl9Z2V0UGF5UGFsRmFzdGxhbmVTZGtDb25maWd1cmF0aW9uKGUsdCxuKXtjb25zdHtjbGllbnRUb2tlbjppLGluaXRpYWxpemF0aW9uRGF0YTpyfT1lO2lmKCFyfHwhci5jbGllbnRJZCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0e2ludGVudDpvLGNsaWVudElkOmEsbWVyY2hhbnRJZDpzLGF0dHJpYnV0aW9uSWQ6ZH09cjtyZXR1cm57b3B0aW9uczp7XCJjbGllbnQtaWRcIjphLFwibWVyY2hhbnQtaWRcIjpzLGNvbW1pdDohMCxjb21wb25lbnRzOltcImZhc3RsYW5lXCIsXCJ0aHJlZS1kb21haW4tc2VjdXJlXCJdLGN1cnJlbmN5OnQsaW50ZW50Om99LGF0dHJpYnV0ZXM6e1wiZGF0YS1jbGllbnQtbWV0YWRhdGEtaWRcIjpuLnJlcGxhY2UoLy0vZyxcIlwiKSxcImRhdGEtbmFtZXNwYWNlXCI6XCJwYXlwYWxGYXN0bGFuZVNka1wiLFwiZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkXCI6ZCxcImRhdGEtc2RrLWNsaWVudC10b2tlblwiOml9fX1nZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93KGUsdCxuPSEwKXtjb25zdHtjbGllbnRUb2tlbjppLGluaXRpYWxpemF0aW9uRGF0YTpyfT1lO2lmKCFyfHwhci5jbGllbnRJZCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0e2ludGVudDpvLGNsaWVudElkOmEsbWVyY2hhbnRJZDpzLGJ1eWVyQ291bnRyeTpkLGF0dHJpYnV0aW9uSWQ6Yyxpc0hvc3RlZENoZWNrb3V0RW5hYmxlZDpsLGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU6dX09cixoPWx8fG47cmV0dXJue29wdGlvbnM6T2JqZWN0LmFzc2lnbih7XCJjbGllbnQtaWRcIjphLFwibWVyY2hhbnQtaWRcIjpzLGNvbW1pdDpoLGNvbXBvbmVudHM6W1wiZ29vZ2xlcGF5XCJdLGN1cnJlbmN5OnQsaW50ZW50Om99LHUmJntcImJ1eWVyLWNvdW50cnlcIjpkfSksYXR0cmlidXRlczp7XCJkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWRcIjpjLFwiZGF0YS1jbGllbnQtdG9rZW5cIjppLFwiZGF0YS1uYW1lc3BhY2VcIjpcInBheXBhbEdvb2dsZVBheVwifX19Z2V0UGF5UGFsQXBtU2RrQ29uZmlndXJhdGlvbihlLHQpe2NvbnN0e2luaXRpYWxpemF0aW9uRGF0YTpufT1lO2lmKCFufHwhbi5jbGllbnRJZCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0e2ludGVudDppLGNsaWVudElkOnIsbWVyY2hhbnRJZDpvLGJ1eWVyQ291bnRyeTphLGF0dHJpYnV0aW9uSWQ6cyxpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlOmQsYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczpjPVtdLGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzOmw9W119PW4sdT1sLGg9Yy5maWx0ZXIoZT0+IWwuaW5jbHVkZXMoZSkpO3JldHVybntvcHRpb25zOk9iamVjdC5hc3NpZ24oe1wiY2xpZW50LWlkXCI6cixcIm1lcmNoYW50LWlkXCI6byxcImVuYWJsZS1mdW5kaW5nXCI6dS5sZW5ndGg+MD91OnZvaWQgMCxcImRpc2FibGUtZnVuZGluZ1wiOmgubGVuZ3RoPjA/aDp2b2lkIDAsY29tbWl0OiEwLGNvbXBvbmVudHM6W1wiYnV0dG9uc1wiLFwicGF5bWVudC1maWVsZHNcIl0sY3VycmVuY3k6dCxpbnRlbnQ6aX0sZCYme1wiYnV5ZXItY291bnRyeVwiOmF9KSxhdHRyaWJ1dGVzOntcImRhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZFwiOnMsXCJkYXRhLW5hbWVzcGFjZVwiOlwicGF5cGFsQXBtc1wifX19Z2V0UGF5UGFsU2RrTWVzc2FnZXNDb25maWd1cmF0aW9uKGUsdCl7Y29uc3R7aW5pdGlhbGl6YXRpb25EYXRhOm59PWU7aWYoIW58fCFuLmNsaWVudElkKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3R7Y2xpZW50SWQ6aSxtZXJjaGFudElkOnIsYXR0cmlidXRpb25JZDpvLGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU6YSxidXllckNvdW50cnk6c309bjtyZXR1cm57b3B0aW9uczpPYmplY3QuYXNzaWduKHtcImNsaWVudC1pZFwiOmksXCJtZXJjaGFudC1pZFwiOnIsY29tcG9uZW50czpbXCJtZXNzYWdlc1wiXSxjdXJyZW5jeTp0fSxhJiZ7XCJidXllci1jb3VudHJ5XCI6c30pLGF0dHJpYnV0ZXM6e1wiZGF0YS1uYW1lc3BhY2VcIjpcInBheXBhbE1lc3NhZ2VzXCIsXCJkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWRcIjpvfX19dHJhbnNmb3JtQ29uZmlnKGUpe2xldCB0PXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKG49Pntjb25zdCBpPWVbbl07bnVsbD09aXx8XCJcIj09PWl8fEFycmF5LmlzQXJyYXkoaSkmJjA9PT1pLmxlbmd0aHx8KHQ9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtbbl06QXJyYXkuaXNBcnJheShpKT9pLmpvaW4oXCIsXCIpOml9KSl9KSx0fX1mdW5jdGlvbiBDaSgpe3JldHVybiBuZXcgd2kobygpKX0hZnVuY3Rpb24oZSl7ZS5DVlY9XCJjdnZcIixlLlBBTj1cInBhblwifShoaXx8KGhpPXt9KSk7Y2xhc3MgSWl7c3RhdGljIGdldChlKXtjb25zdCB0PWAke2VuY29kZVVSSUNvbXBvbmVudChgJHtlfWApfT1gLG49ZG9jdW1lbnQuY29va2llO2xldCBpPW51bGw7Y29uc3Qgcj1uLmluZGV4T2YodCk7aWYocj4tMSl7bGV0IGU9bi5pbmRleE9mKFwiO1wiLHIpOy0xPT09ZSYmKGU9bi5sZW5ndGgpLGk9ZGVjb2RlVVJJQ29tcG9uZW50KG4uc3Vic3RyaW5nKHIrdC5sZW5ndGgsZSkpfXJldHVybiBpfXN0YXRpYyBzZXQoZSx0LG49e3NlY3VyZTohMH0pe2xldCBpPWAke2VuY29kZVVSSUNvbXBvbmVudChlKX09JHtlbmNvZGVVUklDb21wb25lbnQodCl9YDtjb25zdHtleHBpcmVzOnIscGF0aDpvLGRvbWFpbjphLHNlY3VyZTpzfT1uO2lmKHIpaSs9YDsgZXhwaXJlcz0ke3IudG9VVENTdHJpbmcoKX1gO2Vsc2V7Y29uc3QgZT1uZXcgRGF0ZSx0PTYwO2Uuc2V0VGltZShlLmdldFRpbWUoKSs2MCp0KjFlMyksaSs9YDsgZXhwaXJlcz0ke2UudG9VVENTdHJpbmcoKX1gfW8mJihpKz1gOyBwYXRoPSR7b31gKSxhJiYoaSs9YDsgZG9tYWluPSR7YX1gKSxzJiYoaSs9XCI7IHNlY3VyZVwiKSxkb2N1bWVudC5jb29raWU9aX1zdGF0aWMgcmVtb3ZlKGUsdCl7SWkuc2V0KGUsXCJcIixPYmplY3QuYXNzaWduKHtleHBpcmVzOm5ldyBEYXRlKDApfSx0KSl9fSFmdW5jdGlvbihlKXtlLkFVVEhPUklaRT1cImF1dGhvcml6ZVwiLGUuQ0FQVFVSRT1cImNhcHR1cmVcIn0ocGl8fChwaT17fSkpLGZ1bmN0aW9uKGUpe2UuUG9zc2libGU9XCJQT1NTSUJMRVwiLGUuTm89XCJOT1wiLGUuVW5rbm93bj1cIlVOS05PV05cIixlLlllcz1cIllFU1wifShtaXx8KG1pPXt9KSksZnVuY3Rpb24oZSl7ZS5TdWNjZWVkZWQ9XCJzdWNjZWVkZWRcIixlLkNhbmNlbGxlZD1cImNhbmNlbGxlZFwiLGUuRXJyb3JlZD1cImVycm9yZWRcIn0oeWl8fCh5aT17fSkpLGZ1bmN0aW9uKGUpe2UucGF5cGFsPVwicGF5cGFsXCIsZS5jaGVja291dD1cImNoZWNrb3V0XCIsZS5idXlub3c9XCJidXlub3dcIixlLnBheT1cInBheVwiLGUuaW5zdGFsbG1lbnQ9XCJpbnN0YWxsbWVudFwifShnaXx8KGdpPXt9KSksZnVuY3Rpb24oZSl7ZS5nb2xkPVwiZ29sZFwiLGUuYmx1ZT1cImJsdWVcIixlLnNpbHZlcj1cInNpbHZlclwiLGUuYmxhY2s9XCJibGFja1wiLGUud2hpdGU9XCJ3aGl0ZVwifSh2aXx8KHZpPXt9KSksZnVuY3Rpb24oZSl7ZS5waWxsPVwicGlsbFwiLGUucmVjdD1cInJlY3RcIn0oZml8fChmaT17fSkpLGZ1bmN0aW9uKGUpe2UuU1VDQ0VFREVEPVwic3VjY2VlZGVkXCIsZS5GQUlMRUQ9XCJmYWlsZWRcIixlLkNBTkNFTEVEPVwiY2FuY2VsZWRcIixlLlVOUkVDT0dOSVpFRD1cInVucmVjb2duaXplZFwifShTaXx8KFNpPXt9KSk7dmFyIGJpPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIFBpe2NvbnN0cnVjdG9yKCl7dGhpcy53aW5kb3c9d2luZG93fWluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShlLHQsbil7cmV0dXJuIGJpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZih0JiYod2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZmFzdGxhbmVFbnZcIixcInNhbmRib3hcIiksd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYXhvRW52XCIsXCJzYW5kYm94XCIpKSwhdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmUpe2NvbnN0IHQ9e3Jvb3Q6e2JhY2tncm91bmRDb2xvclByaW1hcnk6XCJ0cmFuc3BhcmVudFwifX07dGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmU9eWllbGQgZS5GYXN0bGFuZSh7c3R5bGVzOm58fHR9KX1yZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmV9KX1nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKXtpZighdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmUpdGhyb3cgbmV3IFh0O3JldHVybiB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZX1sb29rdXBDdXN0b21lck9yVGhyb3coZSl7cmV0dXJuIGJpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKS5pZGVudGl0eS5sb29rdXBDdXN0b21lckJ5RW1haWwoZSl9KX10cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhlKXtyZXR1cm4gYmkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiBlP3RoaXMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCkuaWRlbnRpdHkudHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyhlKTp7fX0pfXVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQoZSl7Y29uc3QgdD1uZXcgRGF0ZTt0LnNldERhdGUodC5nZXREYXRlKCkrMTQpO2NvbnN0IG49e2V4cGlyZXM6dCxzZWN1cmU6ITB9O0lpLnNldChcImJjLWZhc3RsYW5lLXNlc3Npb25JZFwiLGUsbil9cmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpe0lpLnJlbW92ZShcImJjLWZhc3RsYW5lLXNlc3Npb25JZFwiKX1nZXRTdG9yYWdlU2Vzc2lvbklkKCl7cmV0dXJuIElpLmdldChcImJjLWZhc3RsYW5lLXNlc3Npb25JZFwiKXx8XCJcIn1tYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhKGUsdCl7dmFyIG4saSxyO2NvbnN0e2F1dGhlbnRpY2F0aW9uU3RhdGU6byxwcm9maWxlRGF0YTphfT10LHM9bnVsbD09PShyPW51bGw9PT0oaT1udWxsPT09KG49bnVsbD09YT92b2lkIDA6YS5jYXJkKXx8dm9pZCAwPT09bj92b2lkIDA6bi5wYXltZW50U291cmNlKXx8dm9pZCAwPT09aT92b2lkIDA6aS5jYXJkKXx8dm9pZCAwPT09cj92b2lkIDA6ci5iaWxsaW5nQWRkcmVzcyxkPW51bGw9PWE/dm9pZCAwOmEuc2hpcHBpbmdBZGRyZXNzLGM9bnVsbD09YT92b2lkIDA6YS5uYW1lLGw9bnVsbD09YT92b2lkIDA6YS5jYXJkLHU9ZD90aGlzLm1hcFBheVBhbFRvQmNBZGRyZXNzKGQuYWRkcmVzcyxkLm5hbWUsZC5waG9uZU51bWJlcik6dm9pZCAwLGg9cyYmYz90aGlzLm1hcFBheVBhbFRvQmNBZGRyZXNzKHMsYyxudWxsPT1kP3ZvaWQgMDpkLnBob25lTnVtYmVyKTp2b2lkIDAscD1sP3RoaXMubWFwUGF5UGFsVG9CY0luc3RydW1lbnQoZSxsKTpbXSxtPXRoaXMuZmlsdGVyQWRkcmVzc2VzKFt1LGhdKTtyZXR1cm57YXV0aGVudGljYXRpb25TdGF0ZTpvfHxTaS5VTlJFQ09HTklaRUQsYWRkcmVzc2VzOm0sYmlsbGluZ0FkZHJlc3M6aCxzaGlwcGluZ0FkZHJlc3M6dSxpbnN0cnVtZW50czpwfX1tYXBQYXlQYWxUb0JjSW5zdHJ1bWVudChlLHQpe2NvbnN0e2lkOm4scGF5bWVudFNvdXJjZTppfT10LHticmFuZDpyLGV4cGlyeTpvLGxhc3REaWdpdHM6YX09aS5jYXJkLFtzLGRdPW8uc3BsaXQoXCItXCIpO3JldHVyblt7YmlncGF5VG9rZW46bixicmFuZDpyLGRlZmF1bHRJbnN0cnVtZW50OiExLGV4cGlyeU1vbnRoOmQsZXhwaXJ5WWVhcjpzLGlpbjpcIlwiLGxhc3Q0OmEsbWV0aG9kOmUscHJvdmlkZXI6ZSx0cnVzdGVkU2hpcHBpbmdBZGRyZXNzOiExLHVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGU6aGkuUEFOLHR5cGU6XCJjYXJkXCJ9XX1tYXBCY1RvUGF5UGFsQWRkcmVzcyhlKXtyZXR1cm57Y29tcGFueToobnVsbD09ZT92b2lkIDA6ZS5jb21wYW55KXx8XCJcIixhZGRyZXNzTGluZTE6KG51bGw9PWU/dm9pZCAwOmUuYWRkcmVzczEpfHxcIlwiLGFkZHJlc3NMaW5lMjoobnVsbD09ZT92b2lkIDA6ZS5hZGRyZXNzMil8fFwiXCIsYWRtaW5BcmVhMToobnVsbD09ZT92b2lkIDA6ZS5zdGF0ZU9yUHJvdmluY2VDb2RlKXx8KG51bGw9PWU/dm9pZCAwOmUuc3RhdGVPclByb3ZpbmNlKXx8XCJcIixhZG1pbkFyZWEyOihudWxsPT1lP3ZvaWQgMDplLmNpdHkpfHxcIlwiLHBvc3RhbENvZGU6KG51bGw9PWU/dm9pZCAwOmUucG9zdGFsQ29kZSl8fFwiXCIsY291bnRyeUNvZGU6KG51bGw9PWU/dm9pZCAwOmUuY291bnRyeUNvZGUpfHxcIlwifX1tYXBQYXlQYWxUb0JjQWRkcmVzcyhlLHQsbixpKXtjb25zdFtyLG9dPXQuZnVsbE5hbWUuc3BsaXQoXCIgXCIpLGE9KG51bGw9PW4/dm9pZCAwOm4ubmF0aW9uYWxOdW1iZXIpfHxcIlwiLHM9KG51bGw9PW4/dm9pZCAwOm4uY291bnRyeUNvZGUpfHxcIlwiO3JldHVybntpZDpEYXRlLm5vdygpLHR5cGU6XCJwYXlwYWwtYWRkcmVzc1wiLGZpcnN0TmFtZTp0LmZpcnN0TmFtZXx8cnx8XCJcIixsYXN0TmFtZTp0Lmxhc3ROYW1lfHxvfHxcIlwiLGNvbXBhbnk6ZS5jb21wYW55fHxcIlwiLGFkZHJlc3MxOmUuYWRkcmVzc0xpbmUxLGFkZHJlc3MyOmUuYWRkcmVzc0xpbmUyfHxcIlwiLGNpdHk6ZS5hZG1pbkFyZWEyLHN0YXRlT3JQcm92aW5jZTplLmFkbWluQXJlYTEsc3RhdGVPclByb3ZpbmNlQ29kZTplLmFkbWluQXJlYTEsY291bnRyeTplLmNvdW50cnlDb2RlfHxcIlwiLGNvdW50cnlDb2RlOmUuY291bnRyeUNvZGV8fFwiXCIscG9zdGFsQ29kZTplLnBvc3RhbENvZGUscGhvbmU6cythLGN1c3RvbUZpZWxkczppfHxbXX19ZmlsdGVyQWRkcmVzc2VzKGUpe3JldHVybiBlLnJlZHVjZSgoZSx0KT0+dD9lLnNvbWUoZT0+dGhpcy5pc0VxdWFsQWRkcmVzc2VzKGUsdCkpP2U6Wy4uLmUsdF06ZSxbXSl9aXNFcXVhbEFkZHJlc3NlcyhlLHQpe3JldHVybiBBKHRoaXMubm9ybWFsaXplQWRkcmVzcyhlKSx0aGlzLm5vcm1hbGl6ZUFkZHJlc3ModCkpfW5vcm1hbGl6ZUFkZHJlc3MoZSl7cmV0dXJuIEcoZSxbXCJpZFwiLFwicGhvbmVcIl0pfX1mdW5jdGlvbiBPaSgpe3JldHVybiBuZXcgUGl9ZnVuY3Rpb24gRWkoZSl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGV9ZnVuY3Rpb24gQWkoZSx0KXtpZih0fHxlKXJldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuO2NvbnN0IGk9e30scj1IKGUucm9vdCxFaSksbz1IKGUuaW5wdXQsRWkpLGE9SChlLnRvZ2dsZSxFaSkscz1IKG51bGw9PT0odD1lLnRleHQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmJvZHksRWkpLGQ9SChudWxsPT09KG49ZS50ZXh0KXx8dm9pZCAwPT09bj92b2lkIDA6bi5jYXB0aW9uLEVpKSxjPWUuYnJhbmRpbmc7cmV0dXJuIE9iamVjdC5rZXlzKHIpLmxlbmd0aCYmKGkucm9vdD1yKSxPYmplY3Qua2V5cyhvKS5sZW5ndGgmJihpLmlucHV0PW8pLE9iamVjdC5rZXlzKGEpLmxlbmd0aCYmKGkudG9nZ2xlPWEpLE9iamVjdC5rZXlzKHMpLmxlbmd0aCYmKGkudGV4dD17fSxpLnRleHQuYm9keT1zKSxPYmplY3Qua2V5cyhkKS5sZW5ndGgmJihpLnRleHQ9T2JqZWN0LmFzc2lnbih7fSxpLnRleHQpLGkudGV4dC5jYXB0aW9uPWQpLGMmJihpLmJyYW5kaW5nPWMpLGl9KGZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxzLGQsYyxsLHUsaCxwLG0seSxnLHYsZixTLF8sdyxDLEk7cmV0dXJue3Jvb3Q6e2JhY2tncm91bmRDb2xvclByaW1hcnk6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVSb290U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IpfHwobnVsbD09PShuPW51bGw9PXQ/dm9pZCAwOnQucm9vdCl8fHZvaWQgMD09PW4/dm9pZCAwOm4uYmFja2dyb3VuZENvbG9yUHJpbWFyeSksZXJyb3JDb2xvcjoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZVJvb3RTZXR0aW5nc0Vycm9yQ29sb3IpfHwobnVsbD09PShpPW51bGw9PXQ/dm9pZCAwOnQucm9vdCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZXJyb3JDb2xvciksZm9udEZhbWlseToobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRGYW1pbHkpfHwobnVsbD09PShyPW51bGw9PXQ/dm9pZCAwOnQucm9vdCl8fHZvaWQgMD09PXI/dm9pZCAwOnIuZm9udEZhbWlseSksZm9udFNpemVCYXNlOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lUm9vdFNldHRpbmdzRm9udFNpemUpfHwobnVsbD09PShvPW51bGw9PXQ/dm9pZCAwOnQucm9vdCl8fHZvaWQgMD09PW8/dm9pZCAwOm8uZm9udFNpemVCYXNlKSxwYWRkaW5nOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZyl8fChudWxsPT09KGE9bnVsbD09dD92b2lkIDA6dC5yb290KXx8dm9pZCAwPT09YT92b2lkIDA6YS5wYWRkaW5nKSxwcmltYXJ5Q29sb3I6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVSb290U2V0dGluZ3NQcmltYXJ5Q29sb3IpfHwobnVsbD09PShzPW51bGw9PXQ/dm9pZCAwOnQucm9vdCl8fHZvaWQgMD09PXM/dm9pZCAwOnMucHJpbWFyeUNvbG9yKX0saW5wdXQ6e2JvcmRlclJhZGl1czoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJSYWRpdXMpfHwobnVsbD09PShkPW51bGw9PXQ/dm9pZCAwOnQuaW5wdXQpfHx2b2lkIDA9PT1kP3ZvaWQgMDpkLmJvcmRlclJhZGl1cyksYm9yZGVyQ29sb3I6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyQ29sb3IpfHwobnVsbD09PShjPW51bGw9PXQ/dm9pZCAwOnQuaW5wdXQpfHx2b2lkIDA9PT1jP3ZvaWQgMDpjLmJvcmRlckNvbG9yKSxmb2N1c0JvcmRlckNvbG9yOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lSW5wdXRTZXR0aW5nc0ZvY3VzQm9yZGVyQmFzZSl8fChudWxsPT09KGw9bnVsbD09dD92b2lkIDA6dC5pbnB1dCl8fHZvaWQgMD09PWw/dm9pZCAwOmwuZm9jdXNCb3JkZXJDb2xvciksYmFja2dyb3VuZENvbG9yOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvcil8fChudWxsPT09KHU9bnVsbD09dD92b2lkIDA6dC5pbnB1dCl8fHZvaWQgMD09PXU/dm9pZCAwOnUuYmFja2dyb3VuZENvbG9yKSxib3JkZXJXaWR0aDoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJXaWR0aCl8fChudWxsPT09KGg9bnVsbD09dD92b2lkIDA6dC5pbnB1dCl8fHZvaWQgMD09PWg/dm9pZCAwOmguYm9yZGVyV2lkdGgpLHRleHRDb2xvckJhc2U6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZSl8fChudWxsPT09KHA9bnVsbD09dD92b2lkIDA6dC5pbnB1dCl8fHZvaWQgMD09PXA/dm9pZCAwOnAudGV4dENvbG9yQmFzZSl9LHRvZ2dsZTp7Y29sb3JQcmltYXJ5OihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclByaW1hcnkpfHwobnVsbD09PShtPW51bGw9PXQ/dm9pZCAwOnQudG9nZ2xlKXx8dm9pZCAwPT09bT92b2lkIDA6bS5jb2xvclByaW1hcnkpLGNvbG9yU2Vjb25kYXJ5OihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclNlY29uZGFyeSl8fChudWxsPT09KHk9bnVsbD09dD92b2lkIDA6dC50b2dnbGUpfHx2b2lkIDA9PT15P3ZvaWQgMDp5LmNvbG9yU2Vjb25kYXJ5KX0sdGV4dDp7Ym9keTp7Y29sb3I6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzQ29sb3IpfHwobnVsbD09PSh2PW51bGw9PT0oZz1udWxsPT10P3ZvaWQgMDp0LnRleHQpfHx2b2lkIDA9PT1nP3ZvaWQgMDpnLmJvZHkpfHx2b2lkIDA9PT12P3ZvaWQgMDp2LmNvbG9yKSxmb250U2l6ZToobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NGb250U2l6ZSl8fChudWxsPT09KFM9bnVsbD09PShmPW51bGw9PXQ/dm9pZCAwOnQudGV4dCl8fHZvaWQgMD09PWY/dm9pZCAwOmYuYm9keSl8fHZvaWQgMD09PVM/dm9pZCAwOlMuZm9udFNpemUpfSxjYXB0aW9uOntjb2xvcjoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZVRleHRDYXB0aW9uU2V0dGluZ3NDb2xvcil8fChudWxsPT09KHc9bnVsbD09PShfPW51bGw9PXQ/dm9pZCAwOnQudGV4dCl8fHZvaWQgMD09PV8/dm9pZCAwOl8uY2FwdGlvbil8fHZvaWQgMD09PXc/dm9pZCAwOncuY29sb3IpLGZvbnRTaXplOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0ZvbnRTaXplKXx8KG51bGw9PT0oST1udWxsPT09KEM9bnVsbD09dD92b2lkIDA6dC50ZXh0KXx8dm9pZCAwPT09Qz92b2lkIDA6Qy5jYXB0aW9uKXx8dm9pZCAwPT09ST92b2lkIDA6SS5mb250U2l6ZSl9fSxicmFuZGluZzoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZUJyYW5kaW5nU2V0dGluZ3MpfHwobnVsbD09dD92b2lkIDA6dC5icmFuZGluZyl9fShlLHQpKX12YXIga2k9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgVGl7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1Nkaz10LHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHM9bn1pbml0aWFsaXplKGUpe3ZhciB0O3JldHVybiBraSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bWV0aG9kSWQ6bixiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZTppfT1lO2lmKCFuKXRocm93IG5ldyBybignVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3RyeXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2Qobik7Y29uc3QgZT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxyPWUuZ2V0Q2FydE9yVGhyb3coKSxvPWUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobiksYT0hIShudWxsPT09KHQ9by5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUpLHM9eWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzU2RrLmdldFBheVBhbEZhc3RsYW5lU2RrKG8sci5jdXJyZW5jeS5jb2RlLHIuaWQpO3lpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKHMsYSx0aGlzLmdldEZhc3RsYW5lU3R5bGVzKG4saSkpfWNhdGNoKGUpe31yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4ga2kodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX0pfXNpZ25JbihlLHQpe3JldHVybiBraSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGUsdCl9KX1zaWduT3V0KGUpe3JldHVybiBraSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihlKX0pfWV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoZSl7cmV0dXJuIGtpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZDp0LGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2s6bixtZXRob2RJZDppfT1lfHx7fTtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBuKXRocm93IG5ldyBybignVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcImNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2tcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgYW5kIGl0IG11c3QgYmUgYSBmdW5jdGlvbi4nKTtpZih0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDdXN0b21lck9yVGhyb3coKS5pc0d1ZXN0KXt0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0KCk7dHJ5e3lpZWxkIHRoaXMucnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhpKX1jYXRjaChlKXt9fW4oKX0pfXJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coZSl7cmV0dXJuIGtpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLG49dC5nZXRDYXJ0T3JUaHJvdygpLmlkLGk9dC5nZXRDdXN0b21lcigpLHI9dC5nZXRCaWxsaW5nQWRkcmVzcygpLG89KG51bGw9PWk/dm9pZCAwOmkuZW1haWwpfHwobnVsbD09cj92b2lkIDA6ci5lbWFpbCl8fFwiXCIse2N1c3RvbWVyQ29udGV4dElkOmF9PXlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMubG9va3VwQ3VzdG9tZXJPclRocm93KG8pLHM9eWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy50cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhhKSxkPXMuYXV0aGVudGljYXRpb25TdGF0ZT09PVNpLkNBTkNFTEVEO3lpZWxkIHRoaXMudXBkYXRlQ3VzdG9tZXJEYXRhU3RhdGUoZSxzKSxkP3RoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpOnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMudXBkYXRlU3RvcmFnZVNlc3Npb25JZChuKX0pfXVwZGF0ZUN1c3RvbWVyRGF0YVN0YXRlKGUsdCl7dmFyIG47cmV0dXJuIGtpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBpPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkse2F1dGhlbnRpY2F0aW9uU3RhdGU6cixhZGRyZXNzZXM6byxiaWxsaW5nQWRkcmVzczphLHNoaXBwaW5nQWRkcmVzczpzLGluc3RydW1lbnRzOmR9PXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMubWFwUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YShlLHQpO2lmKHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcih7YXV0aGVudGljYXRpb25TdGF0ZTpyLGFkZHJlc3NlczpvLGluc3RydW1lbnRzOmR9KSxhJiYoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGEpKSxzJiZpLmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aD4wKXtjb25zdCB0PXlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MocyksaT10LmdldFBheW1lbnRNZXRob2RPclRocm93KGUpLHtpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZDpyfT1pLmluaXRpYWxpemF0aW9uRGF0YXx8e30sbz10LmdldENvbnNpZ25tZW50cygpfHxbXSxhPShudWxsPT09KG49b1swXSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zKXx8W10sZD1hWzBdLGM9YS5maW5kKGU9PmUuaXNSZWNvbW1lbmRlZCk7aWYoKGN8fGQpJiZyKXtjb25zdCBlPShudWxsPT1jP3ZvaWQgMDpjLmlkKXx8ZC5pZDt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oZSl9fX0pfWdldEZhc3RsYW5lU3R5bGVzKGUsdCl7Y29uc3Qgbj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKSx7ZmFzdGxhbmVTdHlsZXM6aSxpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQ6cn09bi5pbml0aWFsaXphdGlvbkRhdGF8fHt9O3JldHVybiBBaShyP2k6e30sbnVsbD09dD92b2lkIDA6dC5zdHlsZXMpfX1jb25zdCBEaT1ubihlPT5uZXcgVGkoZSxDaSgpLE9pKCkpLFt7aWQ6XCJiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZVwifSx7aWQ6XCJiaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkc1wifV0pO3ZhciBNaT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyB6aXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZT10LHRoaXMub25FcnJvcj1WfWluaXRpYWxpemUoZSl7cmV0dXJuIE1pKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcjp0LG1ldGhvZElkOm59PWU7aWYoIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighdC5jb250YWluZXIpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZih0Lm9uQ2xpY2smJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQub25DbGljayl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIub25DbGlja1wiIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLicpO3RoaXMub25FcnJvcj10Lm9uRXJyb3J8fFYsdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZChuKXx8KHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChuKSk7Y29uc3QgaT15aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhuKTtpJiZpLkJ1dHRvbnMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGkuQnV0dG9ucz90aGlzLnJlbmRlckJ1dHRvbihuLHQpOmNvbnNvbGUuZXJyb3IoXCJbQkMgQmlnQ29tbWVyY2VQYXltZW50cyBQYXlMYXRlcl06IGJ1dHRvbiBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREtcIil9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9c2lnbkluKGUsdCl7cmV0dXJuIE1pKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoZSx0KX0pfXNpZ25PdXQoZSl7cmV0dXJuIE1pKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKGUpfSl9ZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChlKXt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayl8fHZvaWQgMD09PXR8fHQuY2FsbChlKSxQcm9taXNlLnJlc29sdmUoKX1yZW5kZXJCdXR0b24oZSx0KXtjb25zdHtjb250YWluZXI6bixvbkNvbXBsZXRlOmksb25DbGljazpyfT10LG89dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKSxhPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KGUpLHtpc0hvc3RlZENoZWNrb3V0RW5hYmxlZDpzLHBheW1lbnRCdXR0b25TdHlsZXM6ZH09YS5pbml0aWFsaXphdGlvbkRhdGF8fHt9LHtjaGVja291dFRvcEJ1dHRvblN0eWxlczpjfT1kfHx7fSxsPU9iamVjdC5hc3NpZ24oe2NyZWF0ZU9yZGVyOigpPT50aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXCJiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlclwiKSxvbkFwcHJvdmU6KHtvcmRlcklEOnR9KT0+dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChlLHQpfSxyJiZ7b25DbGljazooKT0+cigpfSksdT17b25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U6ZT0+dGhpcy5vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShlKSxvblNoaXBwaW5nT3B0aW9uc0NoYW5nZTplPT50aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGUpLG9uQXBwcm92ZToodCxuKT0+dGhpcy5vbkhvc3RlZENoZWNrb3V0QXBwcm92ZSh0LG4sZSxpKX0saD1bby5GVU5ESU5HLlBBWUxBVEVSLG8uRlVORElORy5DUkVESVRdO2xldCBwPSExO2guZm9yRWFjaChlPT57aWYoIXApe2NvbnN0IHQ9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtmdW5kaW5nU291cmNlOmUsc3R5bGU6dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGMpLHtoZWlnaHQ6ZGl9KSl9LGwpLHMmJnUpLGk9by5CdXR0b25zKHQpO2kuaXNFbGlnaWJsZSgpJiYoaS5yZW5kZXIoYCMke259YCkscD0hMCl9fSkscHx8dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQobil9b25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZSx0LG4saSl7cmV0dXJuIE1pKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighZS5vcmRlcklEKXRocm93IG5ldyBqdChrdC5NaXNzaW5nT3JkZXJJZCk7Y29uc3Qgcj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLG89eWllbGQgdC5vcmRlci5nZXQoKTt0cnl7Y29uc3QgdD10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKG8pO2lmKHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyh0KSxyLmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aD4wKXtjb25zdCBlPXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKG8pO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoZSkseWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCl9eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt9LHtwYXJhbXM6e21ldGhvZElkOm59fSkseWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobixlLm9yZGVySUQpLGkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGkmJmkoKX1jYXRjaChlKXt0aGlzLmhhbmRsZUVycm9yKGUpfX0pfW9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGUpe3JldHVybiBNaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7Y2l0eTplLnNoaXBwaW5nQWRkcmVzcy5jaXR5LGNvdW50cnlDb2RlOmUuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLHBvc3RhbENvZGU6ZS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxzdGF0ZU9yUHJvdmluY2VDb2RlOmUuc2hpcHBpbmdBZGRyZXNzLnN0YXRlfSk7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyh0KSx5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHQpO2NvbnN0IGU9dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdygpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihlLmlkKSx5aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKX1jYXRjaChlKXt0aGlzLmhhbmRsZUVycm9yKGUpfX0pfW9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGUpe3JldHVybiBNaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KGUuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi5pZCk7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbih0LmlkKSx5aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKX1jYXRjaChlKXt0aGlzLmhhbmRsZUVycm9yKGUpfX0pfWhhbmRsZUVycm9yKGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXMub25FcnJvcil0aHJvdyBlO3RoaXMub25FcnJvcihlKX19Y29uc3QgTmk9bm4oZT0+bmV3IHppKGUsc2koZSkpLFt7aWQ6XCJiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlclwifV0pO3ZhciB4aT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBGaXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZT10fWluaXRpYWxpemUoZSl7cmV0dXJuIHhpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbzp0LG1ldGhvZElkOm59PWU7aWYoIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c192ZW5tb1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighdC5jb250YWluZXIpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vLmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZih0Lm9uQ2xpY2smJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQub25DbGljayl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8ub25DbGlja1wiIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLicpO3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2Qobil8fCh5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobikpO2NvbnN0IGk9eWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobik7aSYmaS5CdXR0b25zJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBpLkJ1dHRvbnM/dGhpcy5yZW5kZXJCdXR0b24obix0KTpjb25zb2xlLmVycm9yKFwiW0JDIFBheW1lbnRzIFZlbm1vXTogQnV0dG9uIGNvdWxkIG5vdCBiZSByZW5kZXJlZCwgZHVlIHRvIGlzc3VlcyB3aXRoIGxvYWRpbmcgUGF5UGFsIFNES1wiKX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1zaWduSW4oZSx0KXtyZXR1cm4geGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihlLHQpfSl9c2lnbk91dChlKXtyZXR1cm4geGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIoZSl9KX1leGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KGUpe3ZhciB0O3JldHVybiBudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrKXx8dm9pZCAwPT09dHx8dC5jYWxsKGUpLFByb21pc2UucmVzb2x2ZSgpfXJlbmRlckJ1dHRvbihlLHQpe2NvbnN0e2NvbnRhaW5lcjpuLG9uQ2xpY2s6aX09dCxyPXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCksbz10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKSx7cGF5bWVudEJ1dHRvblN0eWxlczphfT1vLmluaXRpYWxpemF0aW9uRGF0YXx8e30se2NoZWNrb3V0VG9wQnV0dG9uU3R5bGVzOnN9PWF8fHt9LGQ9T2JqZWN0LmFzc2lnbih7ZnVuZGluZ1NvdXJjZTpyLkZVTkRJTkcuVkVOTU8sc3R5bGU6dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHMpLHtoZWlnaHQ6ZGl9KSksY3JlYXRlT3JkZXI6KCk9PnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcImJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vXCIpLG9uQXBwcm92ZTooe29yZGVySUQ6dH0pPT50aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KGUsdCl9LGkmJntvbkNsaWNrOigpPT5pKCl9KSxjPXIuQnV0dG9ucyhkKTtjLmlzRWxpZ2libGUoKT9jLnJlbmRlcihgIyR7bn1gKTp0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChuKX19Y29uc3QgUmk9bm4oZT0+bmV3IEZpKGUsc2koZSkpLFt7aWQ6XCJiaWdjb21tZXJjZV9wYXltZW50c192ZW5tb1wifV0pO2NsYXNzIExpIGV4dGVuZHMgQnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGhhcyB0aHJvd24gYW4gdW5leHBlY3RlZCBlcnJvci5cIiksdGhpcy5uYW1lPVwiUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yXCIsdGhpcy50eXBlPVwicGF5bWVudF9tZXRob2RfY2xpZW50X2ludmFsaWRcIn19Y2xhc3MgQmkgZXh0ZW5kcyBxbntjb25zdHJ1Y3RvcihlKXtzdXBlcihlLHttZXNzYWdlOlwiVGhlcmUgaXMgYSBwcm9ibGVtIHByb2Nlc3NpbmcgeW91ciBwYXltZW50LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwifSksdGhpcy5uYW1lPVwiUGF5bWVudE1ldGhvZEludmFsaWRFcnJvclwiLHRoaXMudHlwZT1cInBheW1lbnRfbWV0aG9kX2ludmFsaWRcIn19dmFyIGppLFVpLHFpLFZpPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIEdpe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5ib2x0U2NyaXB0TG9hZGVyPXQsdGhpcy5ib2x0SG9zdFdpbmRvdz13aW5kb3d9aW5pdGlhbGl6ZShlKXt2YXIgdDtyZXR1cm4gVmkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOm4sYm9sdDppfT1lLHtvbkluaXQ6cn09aXx8e307aWYoIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG4pO2NvbnN0IG89dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobik7aWYoIShudWxsPT09KHQ9by5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnB1Ymxpc2hhYmxlS2V5KSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0e2RldmVsb3BlckNvbmZpZzphLHB1Ymxpc2hhYmxlS2V5OnN9PW8uaW5pdGlhbGl6YXRpb25EYXRhO2lmKHlpZWxkIHRoaXMuYm9sdFNjcmlwdExvYWRlci5sb2FkQm9sdENsaWVudChzLG8uY29uZmlnLnRlc3RNb2RlLGEpLHImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHIpe2NvbnN0IGU9dGhpcy5nZXRDdXN0b21lckVtYWlsKCk7cih5aWVsZCB0aGlzLmhhc0JvbHRBY2NvdW50KGUpLGUpfX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1zaWduSW4oZSx0KXtyZXR1cm4gVmkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoZSx0KSxQcm9taXNlLnJlc29sdmUoKX0pfXNpZ25PdXQoZSl7cmV0dXJuIFZpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihlKSxQcm9taXNlLnJlc29sdmUoKX0pfWV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoZSl7cmV0dXJuIFZpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrOnQ9cGUsY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQ6bixtZXRob2RJZDppfT1lfHx7fSxyPXRoaXMuZ2V0Q3VzdG9tZXJFbWFpbCgpO2lmKCFpKXRocm93IG5ldyBybignVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwiY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFja1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBhbmQgaXQgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO2lmKHIpcmV0dXJuIHRoaXMub3BlbkJvbHRDaGVja291dE1vZGFsT3JUaHJvdyhyLGksdCxuKTt0KCl9KX1vcGVuQm9sdENoZWNrb3V0TW9kYWxPclRocm93KGUsdCxuLGkpe3ZhciByO3JldHVybiBWaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbz10aGlzLmdldEJvbHRDbGllbnRPclRocm93KCksYT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kKHQpO3RyeXtpZihudWxsPT09KHI9bnVsbD09YT92b2lkIDA6YS5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmVtYmVkZGVkT25lQ2xpY2tFbmFibGVkKXtjb25zdCB0PXlpZWxkIHRoaXMuaGFzQm9sdEFjY291bnQoZSk7aWYodCl7Y29uc3QgdD17Y2xvc2U6KCk9PntuKCl9fTt5aWVsZCBvLm9wZW5DaGVja291dChlLHQpfWVsc2UgbigpO1wiZnVuY3Rpb25cIj09dHlwZW9mIGkmJmkoe2hhc0JvbHRBY2NvdW50OnR9KX1lbHNlIG4oKX1jYXRjaChlKXtpZihmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZS5tZXNzYWdlJiZcInN0cmluZ1wiPT10eXBlb2YgZS50eXBlJiYoXCJzdHJpbmdcIj09dHlwZW9mIGUuc3VidHlwZXx8IWUuc3VidHlwZSkmJmUgaW5zdGFuY2VvZiBFcnJvcn0oZSkmJlwiTWlzc2luZ0RhdGFFcnJvclwiIT09ZS5uYW1lJiZcIk5vdEluaXRpYWxpemVkRXJyb3JcIiE9PWUubmFtZSl0aHJvdyBuZXcgTGkoZS5tZXNzYWdlKTt0aHJvdyBlfX0pfWdldEJvbHRDbGllbnRPclRocm93KCl7Y29uc3QgZT10aGlzLmJvbHRIb3N0V2luZG93LkJvbHRDaGVja291dDtpZighZSl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gZX1oYXNCb2x0QWNjb3VudChlKXtyZXR1cm4gVmkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5nZXRCb2x0Q2xpZW50T3JUaHJvdygpO3RyeXtyZXR1cm4geWllbGQgdC5oYXNCb2x0QWNjb3VudChlKX1jYXRjaChlKXt0aHJvdyBuZXcgQml9fSl9Z2V0Q3VzdG9tZXJFbWFpbCgpe2NvbnN0IGU9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksdD1lLmdldEN1c3RvbWVyKCksbj1lLmdldEJpbGxpbmdBZGRyZXNzKCk7cmV0dXJuKG51bGw9PXQ/dm9pZCAwOnQuZW1haWwpfHwobnVsbD09bj92b2lkIDA6bi5lbWFpbCl8fFwiXCJ9fSFmdW5jdGlvbihlKXtlLlNhbmRib3hNb2RlPVwiYm9sdF9zYW5kYm94XCIsZS5TdGFnaW5nTW9kZT1cImJvbHRfc3RhZ2luZ1wiLGUuRGV2ZWxvcG1lbnRNb2RlPVwiYm9sdF9kZXZlbG9wbWVudFwifShqaXx8KGppPXt9KSksZnVuY3Rpb24oZSl7ZS5TbWFsbD1cInNtYWxsXCIsZS5NZWRpdW09XCJtZWRpdW1cIixlLkxhcmdlPVwibGFyZ2VcIn0oVWl8fChVaT17fSkpLGZ1bmN0aW9uKGUpe2UuUGlsbD1cInBpbGxcIixlLlJlY3Q9XCJyZWN0XCJ9KHFpfHwocWk9e30pKTt2YXIgSGk9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgJGl7Y29uc3RydWN0b3IoZSx0PXdpbmRvdyl7dGhpcy5zY3JpcHRMb2FkZXI9ZSx0aGlzLmJvbHRIb3N0V2luZG93PXR9bG9hZEJvbHRDbGllbnQoZSx0LG4saSxyKXtyZXR1cm4gSGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKHRoaXMuYm9sdEhvc3RXaW5kb3cuQm9sdENoZWNrb3V0KXJldHVybiB0aGlzLmJvbHRIb3N0V2luZG93LkJvbHRDaGVja291dDtpZighZSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcInB1Ymxpc2hhYmxlS2V5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKHlpZWxkIHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoYC8vJHt0aGlzLmdldERvbWFpblVSTCghIXQsbil9L2Nvbm5lY3QtYmlnY29tbWVyY2UuanNgLHRoaXMuZ2V0U2NyaXB0T3B0aW9ucyhcImJvbHQtY29ubmVjdFwiLGUsaSxyKSkseWllbGQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChgLy8ke3RoaXMuZ2V0RG9tYWluVVJMKCEhdCxuKX0vdHJhY2suanNgLHRoaXMuZ2V0U2NyaXB0T3B0aW9ucyhcImJvbHQtdHJhY2tcIixlKSksIXRoaXMuYm9sdEhvc3RXaW5kb3cuQm9sdENoZWNrb3V0KXRocm93IG5ldyBYdDtyZXR1cm4gdGhpcy5ib2x0SG9zdFdpbmRvdy5Cb2x0Q2hlY2tvdXR9KX1sb2FkQm9sdEVtYmVkZGVkKGUsdCxuKXtyZXR1cm4gSGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKHlpZWxkIHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoYC8vJHt0aGlzLmdldERvbWFpblVSTCghIXQsbil9L2VtYmVkLmpzYCx7YXN5bmM6ITAsYXR0cmlidXRlczp7aWQ6XCJib2x0LWVtYmVkZGVkXCJ9fSksIXRoaXMuYm9sdEhvc3RXaW5kb3cuQm9sdCl0aHJvdyBuZXcgWHQ7cmV0dXJuIHRoaXMuYm9sdEhvc3RXaW5kb3cuQm9sdChlKX0pfWdldERvbWFpblVSTChlLHQpe2lmKCFlKXJldHVyblwiY29ubmVjdC5ib2x0LmNvbVwiO2lmKHQpc3dpdGNoKHQuZGV2ZWxvcGVyTW9kZSl7Y2FzZSBqaS5TdGFnaW5nTW9kZTpyZXR1cm5cImNvbm5lY3Qtc3RhZ2luZy5ib2x0LmNvbVwiO2Nhc2UgamkuRGV2ZWxvcG1lbnRNb2RlOnJldHVybmBjb25uZWN0LiR7dC5kZXZlbG9wZXJEb21haW59YH1yZXR1cm5cImNvbm5lY3Qtc2FuZGJveC5ib2x0LmNvbVwifWdldFNjcmlwdE9wdGlvbnMoZSx0LG4saSl7cmV0dXJue2FzeW5jOiEwLGF0dHJpYnV0ZXM6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtpZDplLFwiZGF0YS1wdWJsaXNoYWJsZS1rZXlcIjp0fSxuJiZ7XCJkYXRhLXNob3BwaW5nLWNhcnQtaWRcIjpufSksaSYme1wiZGF0YS1zdG9yZWZyb250LWFwaS10b2tlblwiOml9KX19fWNvbnN0IFdpPW5uKGU9Pm5ldyBHaShlLG5ldyAkaShhKCkpKSxbe2lkOlwiYm9sdFwifV0pO2NsYXNzIFlpIGV4dGVuZHMgcm57Y29uc3RydWN0b3IoZSl7bGV0IHQ9XCJVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuXCI7ZSYmKHQ9YCR7dH0gTWFrZSBzdXJlIHRoZSBmb2xsb3dpbmcgZmllbGRzIGFyZSBwcm92aWRlZCBjb3JyZWN0bHk6ICR7ZS5qb2luKFwiLCBcIil9LmApLHN1cGVyKHQpLHRoaXMubmFtZT1cIlBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvclwifX1jbGFzcyBLaSBleHRlbmRzIEJ0e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIodHx8XCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IGZvcm0gY29udGFpbnMgaW52YWxpZCBkYXRhLlwiKSx0aGlzLmRldGFpbHM9ZSx0aGlzLm5hbWU9XCJQYXltZW50SW52YWxpZEZvcm1FcnJvclwiLHRoaXMudHlwZT1cInBheW1lbnRfaW52YWxpZF9mb3JtXCJ9fWNsYXNzIEppe2NvbnN0cnVjdG9yKGUpe2NvbnN0IHQ9bmV3IFByb21pc2UoKGUsdCk9Pnt0aGlzLmNhbmNlbD10fSk7dGhpcy5wcm9taXNlPVByb21pc2UucmFjZShbZSx0XSl9fWNvbnN0IFppPVtcImJ1dHRvbnNcIixcIm1lc3NhZ2VzXCJdO3ZhciBRaSxYaSxlcix0cixucixpcjshZnVuY3Rpb24oZSl7ZS5IT1JJWk9OVEFMPVwiaG9yaXpvbnRhbFwiLGUuVkVSVElDQUw9XCJ2ZXJ0aWNhbFwifShRaXx8KFFpPXt9KSksZnVuY3Rpb24oZSl7ZS5TTUFMTD1cInNtYWxsXCIsZS5NRURJVU09XCJtZWRpdW1cIixlLkxBUkdFPVwibGFyZ2VcIixlLlJFU1BPTlNJVkU9XCJyZXNwb25zaXZlXCJ9KFhpfHwoWGk9e30pKSxmdW5jdGlvbihlKXtlLkdPTEQ9XCJnb2xkXCIsZS5CTFVFPVwiYmx1ZVwiLGUuU0lsVkVSPVwic2lsdmVyXCIsZS5CTEFDSz1cImJsYWNrXCIsZS5XSElURT1cIndoaXRlXCJ9KGVyfHwoZXI9e30pKSxmdW5jdGlvbihlKXtlLkNIRUNLT1VUPVwiY2hlY2tvdXRcIixlLlBBWT1cInBheVwiLGUuQlVZTk9XPVwiYnV5bm93XCIsZS5QQVlQQUw9XCJwYXlwYWxcIixlLkNSRURJVD1cImNyZWRpdFwifSh0cnx8KHRyPXt9KSksZnVuY3Rpb24oZSl7ZS5QSUxMPVwicGlsbFwiLGUuUkVDVD1cInJlY3RcIn0obnJ8fChucj17fSkpLGZ1bmN0aW9uKGUpe2UuQ0FSVD1cImNhcnRcIixlLkhPTUU9XCJob21lcGFnZVwiLGUuUEFZTUVOVD1cInBheW1lbnRcIixlLlBST0RVQ1Q9XCJwcm9kdWN0XCJ9KGlyfHwoaXI9e30pKTt2YXIgcnI9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3Mgb3J7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyPWUsdGhpcy5icmFpbnRyZWVIb3N0V2luZG93PXQsdGhpcy5vdmVybGF5PW4sdGhpcy5kYXRhQ29sbGVjdG9ycz17fX1pbml0aWFsaXplKGUsdCl7dGhpcy5jbGllbnRUb2tlbj1lLHRoaXMudGhyZWVEU2VjdXJlT3B0aW9ucz10fWdldEJyYWludHJlZUZhc3RsYW5lKGUsdCxuKXtyZXR1cm4gcnIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKHQmJih3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJheG9FbnZcIixcInNhbmRib3hcIiksd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZmFzdGxhbmVFbnZcIixcInNhbmRib3hcIikpLCF0aGlzLmJyYWludHJlZUhvc3RXaW5kb3cuYnJhaW50cmVlRmFzdGxhbmUpe2NvbnN0IHQ9dGhpcy5nZXRDbGllbnRUb2tlbk9yVGhyb3coKSxpPXlpZWxkIHRoaXMuZ2V0Q2xpZW50KCkscj15aWVsZCB0aGlzLmdldFNlc3Npb25JZChlKSxvPXlpZWxkIHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRGYXN0bGFuZSgpLGE9e3Jvb3Q6e2JhY2tncm91bmRDb2xvclByaW1hcnk6XCJ0cmFuc3BhcmVudFwifX07dGhpcy5icmFpbnRyZWVIb3N0V2luZG93LmJyYWludHJlZUZhc3RsYW5lPXlpZWxkIG8uY3JlYXRlKHthdXRob3JpemF0aW9uOnQsY2xpZW50OmksZGV2aWNlRGF0YTpyLHN0eWxlczpufHxhfSl9cmV0dXJuIHRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5icmFpbnRyZWVGYXN0bGFuZX0pfWdldENsaWVudCgpe3JldHVybiBycih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXRoaXMuY2xpZW50KXtjb25zdCBlPXRoaXMuZ2V0Q2xpZW50VG9rZW5PclRocm93KCksdD15aWVsZCB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkQ2xpZW50KCk7dGhpcy5jbGllbnQ9dC5jcmVhdGUoe2F1dGhvcml6YXRpb246ZX0pfXJldHVybiB0aGlzLmNsaWVudH0pfWdldFBheXBhbCgpe3JldHVybiB0aGlzLmJyYWludHJlZVBheXBhbHx8KHRoaXMuYnJhaW50cmVlUGF5cGFsPVByb21pc2UuYWxsKFt0aGlzLmdldENsaWVudCgpLHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRQYXlwYWwoKV0pLnRoZW4oKFtlLHRdKT0+dC5jcmVhdGUoe2NsaWVudDplfSkpKSx0aGlzLmJyYWludHJlZVBheXBhbH1wYXlwYWwoZSl7dmFye3Nob3VsZFNhdmVJbnN0cnVtZW50OnR9PWUsbj1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wic2hvdWxkU2F2ZUluc3RydW1lbnRcIl0pO2NvbnN0IGk9QWUoKTtyZXR1cm4gdGhpcy5nZXRQYXlwYWwoKS50aGVuKGU9Pnt2YXIgcjtyZXR1cm4gaSYmKG51bGw9PT0ocj10aGlzLm92ZXJsYXkpfHx2b2lkIDA9PT1yfHxyLnNob3coe29uQ2xpY2s6KCk9PmUuZm9jdXNXaW5kb3coKX0pKSxlLnRva2VuaXplKE9iamVjdC5hc3NpZ24oe2VuYWJsZVNoaXBwaW5nQWRkcmVzczohMCxmbG93OnQ/XCJ2YXVsdFwiOlwiY2hlY2tvdXRcIix1c2VyYWN0aW9uOlwiY29tbWl0XCJ9LG4pKX0pLnRoZW4oZT0+e3ZhciB0O3JldHVybiBudWxsPT09KHQ9dGhpcy5vdmVybGF5KXx8dm9pZCAwPT09dHx8dC5yZW1vdmUoKSxlfSkuY2F0Y2goZT0+e3ZhciB0O3Rocm93IG51bGw9PT0odD10aGlzLm92ZXJsYXkpfHx2b2lkIDA9PT10fHx0LnJlbW92ZSgpLGV9KX1nZXRQYXlwYWxDaGVja291dChlLHQsbil7cmV0dXJuIHJyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBpPXlpZWxkIHRoaXMuZ2V0Q2xpZW50KCkscj15aWVsZCB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkUGF5cGFsQ2hlY2tvdXQoKSxvPXtjbGllbnQ6aX07cmV0dXJuIHRoaXMucGF5cGFsQ2hlY2tvdXQ9eWllbGQgci5jcmVhdGUobywoaSxyKT0+e3ZhciBvO2lmKGkpcmV0dXJuIG4oaSk7Y29uc3QgYT1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe2N1cnJlbmN5OmUuY3VycmVuY3l9LGUuaXNDcmVkaXRFbmFibGVkJiZ7XCJlbmFibGUtZnVuZGluZ1wiOlwicGF5bGF0ZXJcIn0pLHtjb21wb25lbnRzOlppLnRvU3RyaW5nKCksaW50ZW50OmUuaW50ZW50LGNvbW1pdDpudWxsPT09KG89ZS5jb21taXQpfHx2b2lkIDA9PT1vfHxvfSk7dGhpcy5icmFpbnRyZWVIb3N0V2luZG93LnBheXBhbD90KHIpOnIubG9hZFBheVBhbFNESyhhLCgpPT50KHIpKX0pLHRoaXMucGF5cGFsQ2hlY2tvdXR9KX1nZXREYXRhQ29sbGVjdG9yKGUpe3JldHVybiBycih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD0obnVsbD09ZT92b2lkIDA6ZS5wYXlwYWwpP1wicGF5cGFsXCI6XCJkZWZhdWx0XCI7bGV0IG49dGhpcy5kYXRhQ29sbGVjdG9yc1t0XTtpZighbil7dHJ5e2NvbnN0IHQ9eWllbGQgdGhpcy5nZXRDbGllbnQoKSxpPXlpZWxkIHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWREYXRhQ29sbGVjdG9yKCkscj1PYmplY3QuYXNzaWduKHtjbGllbnQ6dCxrb3VudDohMH0sZSk7bj15aWVsZCBpLmNyZWF0ZShyKX1jYXRjaChlKXtpZighQ24oZSl8fFwiREFUQV9DT0xMRUNUT1JfS09VTlRfTk9UX0VOQUJMRURcIiE9PWUuY29kZSl0aHJvdyBlO249e2RldmljZURhdGE6dm9pZCAwLHRlYXJkb3duOigpPT5Qcm9taXNlLnJlc29sdmUoKX19dGhpcy5kYXRhQ29sbGVjdG9yc1t0XT1ufXJldHVybiBufSl9Z2V0QnJhaW50cmVlRW52KGU9ITEpe3JldHVybiBlP0luLlNhbmRib3g6SW4uUHJvZHVjdGlvbn1tYXBUb0JyYWludHJlZVNoaXBwaW5nQWRkcmVzc092ZXJyaWRlKGUpe3JldHVybntyZWNpcGllbnROYW1lOmAke2UuZmlyc3ROYW1lfSAke2UubGFzdE5hbWV9YCxsaW5lMTplLmFkZHJlc3MxLGxpbmUyOmUuYWRkcmVzczIsY2l0eTplLmNpdHksc3RhdGU6ZS5zdGF0ZU9yUHJvdmluY2VDb2RlLHBvc3RhbENvZGU6ZS5wb3N0YWxDb2RlLGNvdW50cnlDb2RlOmUuY291bnRyeUNvZGUscGhvbmU6ZS5waG9uZX19bWFwVG9MZWdhY3lTaGlwcGluZ0FkZHJlc3MoZSl7Y29uc3R7ZW1haWw6dCxwaG9uZTpuLHNoaXBwaW5nQWRkcmVzczppfT1lLHI9KG51bGw9PWk/dm9pZCAwOmkucmVjaXBpZW50TmFtZSl8fFwiXCIsW28sYV09ci5zcGxpdChcIiBcIik7cmV0dXJue2VtYWlsOnQsZmlyc3RfbmFtZTpvfHxcIlwiLGxhc3RfbmFtZTphfHxcIlwiLHBob25lX251bWJlcjpuLGFkZHJlc3NfbGluZV8xOm51bGw9PWk/dm9pZCAwOmkubGluZTEsYWRkcmVzc19saW5lXzI6bnVsbD09aT92b2lkIDA6aS5saW5lMixjaXR5Om51bGw9PWk/dm9pZCAwOmkuY2l0eSxzdGF0ZTpudWxsPT1pP3ZvaWQgMDppLnN0YXRlLGNvdW50cnlfY29kZTpudWxsPT1pP3ZvaWQgMDppLmNvdW50cnlDb2RlLHBvc3RhbF9jb2RlOm51bGw9PWk/dm9pZCAwOmkucG9zdGFsQ29kZX19bWFwVG9MZWdhY3lCaWxsaW5nQWRkcmVzcyhlKXtjb25zdHtiaWxsaW5nQWRkcmVzczp0LGVtYWlsOm4sZmlyc3ROYW1lOmksbGFzdE5hbWU6cixwaG9uZTpvLHNoaXBwaW5nQWRkcmVzczphfT1lLHM9dHx8YTtyZXR1cm57ZW1haWw6bixmaXJzdF9uYW1lOmksbGFzdF9uYW1lOnIscGhvbmVfbnVtYmVyOm8sYWRkcmVzc19saW5lXzE6bnVsbD09cz92b2lkIDA6cy5saW5lMSxhZGRyZXNzX2xpbmVfMjpudWxsPT1zP3ZvaWQgMDpzLmxpbmUyLGNpdHk6bnVsbD09cz92b2lkIDA6cy5jaXR5LHN0YXRlOm51bGw9PXM/dm9pZCAwOnMuc3RhdGUsY291bnRyeV9jb2RlOm51bGw9PXM/dm9pZCAwOnMuY291bnRyeUNvZGUscG9zdGFsX2NvZGU6bnVsbD09cz92b2lkIDA6cy5wb3N0YWxDb2RlfX1yZW1vdmVFbGVtZW50KGUpe2NvbnN0IHQ9ZSYmZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSk7dCYmdC5yZW1vdmUoKX1nZXRTZXNzaW9uSWQoZSl7cmV0dXJuIHJyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtkZXZpY2VEYXRhOnR9PXlpZWxkIHRoaXMuZ2V0RGF0YUNvbGxlY3Rvcih7cmlza0NvcnJlbGF0aW9uSWQ6ZX0pO3JldHVybiB0fSl9dGVhcmRvd24oKXtyZXR1cm4gcnIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMudGVhcmRvd25Nb2R1bGUodGhpcy5kYXRhQ29sbGVjdG9ycy5kZWZhdWx0KSx5aWVsZCB0aGlzLnRlYXJkb3duTW9kdWxlKHRoaXMuZGF0YUNvbGxlY3RvcnMucGF5cGFsKSx0aGlzLmRhdGFDb2xsZWN0b3JzPXt9LHlpZWxkIHRoaXMudGVhcmRvd25Nb2R1bGUodGhpcy5wYXlwYWxDaGVja291dCksdGhpcy5wYXlwYWxDaGVja291dD12b2lkIDB9KX1nZXQzRFMoKXtyZXR1cm4gcnIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLnRocmVlRFN8fCh0aGlzLnRocmVlRFM9UHJvbWlzZS5hbGwoW3RoaXMuZ2V0Q2xpZW50KCksdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZDNEUygpXSkudGhlbigoW2UsdF0pPT50LmNyZWF0ZSh7Y2xpZW50OmUsdmVyc2lvbjoyfSkpKSx0aGlzLnRocmVlRFN9KX1nZXRWZW5tb0NoZWNrb3V0KGUpe3JldHVybiBycih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXRoaXMudmVubW9DaGVja291dCl7Y29uc3QgdD15aWVsZCB0aGlzLmdldENsaWVudCgpLG49eWllbGQgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZFZlbm1vQ2hlY2tvdXQoKSxpPU9iamVjdC5hc3NpZ24oe2NsaWVudDp0LGFsbG93RGVza3RvcDohMCxwYXltZW50TWV0aG9kVXNhZ2U6XCJtdWx0aV91c2VcIn0sZXx8e30pO3RoaXMudmVubW9DaGVja291dD15aWVsZCBuZXcgUHJvbWlzZSgoZSx0KT0+e24uY3JlYXRlKGksKG4saSk9Pm4/dChuKTppLmlzQnJvd3NlclN1cHBvcnRlZCgpP3ZvaWQgZShpKTp0KG5ldyBtbikpfSl9cmV0dXJuIHRoaXMudmVubW9DaGVja291dH0pfXZlcmlmeUNhcmQoZSx0LG4pe3JldHVybiBycih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT15aWVsZCB0aGlzLnRva2VuaXplQ2FyZChlLHQpO3JldHVybiB0aGlzLmNoYWxsZW5nZTNEU1ZlcmlmaWNhdGlvbihpLG4pfSl9dG9rZW5pemVDYXJkKGUsdCl7cmV0dXJuIHJyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50RGF0YTpufT1lO2lmKCFmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuITE7Y29uc3QgdD1lO3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0LmNjRXhwaXJ5JiZudWxsIT09dC5jY0V4cGlyeSYmXCJzdHJpbmdcIj09dHlwZW9mIHQuY2NOdW1iZXImJlwic3RyaW5nXCI9PXR5cGVvZiB0LmNjTmFtZX0obikpdGhyb3cgbmV3IFlpKFtcInBheW1lbnQucGF5bWVudERhdGFcIl0pO2NvbnN0IGk9dGhpcy5nZXRFcnJvcnNSZXF1aXJlZEZpZWxkcyhuKTtpZighRShpKSl0aHJvdyBuZXcgS2koaSk7Y29uc3Qgcj10aGlzLm1hcFRvQ3JlZGl0Q2FyZChuLHQpLG89eWllbGQgdGhpcy5nZXRDbGllbnQoKSx7Y3JlZGl0Q2FyZHM6YX09eWllbGQgby5yZXF1ZXN0KHIpO3JldHVybntub25jZTphWzBdLm5vbmNlLGJpbjphWzBdLmRldGFpbHMuYmlufX0pfWNoYWxsZW5nZTNEU1ZlcmlmaWNhdGlvbihlLHQpe3JldHVybiBycih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj15aWVsZCB0aGlzLmdldDNEUygpO3JldHVybiB0aGlzLnByZXNlbnQzRFNDaGFsbGVuZ2Uobix0LGUpfSl9dGVhcmRvd25Nb2R1bGUoZSl7cmV0dXJuIGU/ZS50ZWFyZG93bigpOlByb21pc2UucmVzb2x2ZSgpfWdldENsaWVudFRva2VuT3JUaHJvdygpe2lmKCF0aGlzLmNsaWVudFRva2VuKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3JldHVybiB0aGlzLmNsaWVudFRva2VufWdldEVycm9yc1JlcXVpcmVkRmllbGRzKGUpe2NvbnN0e2NjTnVtYmVyOnQsY2NFeHBpcnk6bn09ZSxpPXt9O3JldHVybiB0fHwoaS5jY051bWJlcj1be21lc3NhZ2U6XCJDcmVkaXQgY2FyZCBudW1iZXIgaXMgcmVxdWlyZWRcIix0eXBlOlwicmVxdWlyZWRcIn1dKSxufHwoaS5jY0V4cGlyeT1be21lc3NhZ2U6XCJFeHBpcmF0aW9uIGRhdGUgaXMgcmVxdWlyZWRcIix0eXBlOlwicmVxdWlyZWRcIn1dKSxpfW1hcFRvQ3JlZGl0Q2FyZChlLHQpe3JldHVybntkYXRhOntjcmVkaXRDYXJkOntjYXJkaG9sZGVyTmFtZTplLmNjTmFtZSxudW1iZXI6ZS5jY051bWJlcixjdnY6ZS5jY0N2dixleHBpcmF0aW9uRGF0ZTpgJHtlLmNjRXhwaXJ5Lm1vbnRofS8ke2UuY2NFeHBpcnkueWVhcn1gLG9wdGlvbnM6e3ZhbGlkYXRlOiExfSxiaWxsaW5nQWRkcmVzczp0JiZ7Y291bnRyeUNvZGVBbHBoYTI6dC5jb3VudHJ5Q29kZSxsb2NhbGl0eTp0LmNpdHksY291bnRyeU5hbWU6dC5jb3VudHJ5LHBvc3RhbENvZGU6dC5wb3N0YWxDb2RlLHN0cmVldEFkZHJlc3M6dC5hZGRyZXNzMj9gJHt0LmFkZHJlc3MxfSAke3QuYWRkcmVzczJ9YDp0LmFkZHJlc3MxfX19LGVuZHBvaW50OlwicGF5bWVudF9tZXRob2RzL2NyZWRpdF9jYXJkc1wiLG1ldGhvZDpcInBvc3RcIn19cHJlc2VudDNEU0NoYWxsZW5nZShlLHQsbil7Y29uc3R7bm9uY2U6aSxiaW46cn09bjtpZighdGhpcy50aHJlZURTZWN1cmVPcHRpb25zfHwhaSl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtjb25zdHthZGRGcmFtZTpvLHJlbW92ZUZyYW1lOmEsY2hhbGxlbmdlUmVxdWVzdGVkOnM9ITAsYWRkaXRpb25hbEluZm9ybWF0aW9uOmR9PXRoaXMudGhyZWVEU2VjdXJlT3B0aW9ucyxjPSgpPT5ycih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCBlLmNhbmNlbFZlcmlmeUNhcmQoKTtyZXR1cm4gdS5jYW5jZWwobmV3IE1uKSx0fSksbD10LnRvRml4ZWQoMiksdT1uZXcgSmkoZS52ZXJpZnlDYXJkKHthZGRGcmFtZTooZSx0KT0+e28mJm8oZSx0LGMpfSxhbW91bnQ6TnVtYmVyKGwpLGJpbjpyLGNoYWxsZW5nZVJlcXVlc3RlZDpzLG5vbmNlOmkscmVtb3ZlRnJhbWU6YSxvbkxvb2t1cENvbXBsZXRlOihlLHQpPT57dCgpfSxjb2xsZWN0RGV2aWNlRGF0YTohMCxhZGRpdGlvbmFsSW5mb3JtYXRpb246ZH0pKTtyZXR1cm4gdS5wcm9taXNlfX12YXIgYXI9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3Mgc3J7Y29uc3RydWN0b3IoZSx0LG4saSl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5mb3JtUG9zdGVyPXQsdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2U9bix0aGlzLmJyYWludHJlZUhvc3RXaW5kb3c9aX1pbml0aWFsaXplKGUpe3JldHVybiBhcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7YnJhaW50cmVlcGF5cGFsOnQsbWV0aG9kSWQ6bn09ZSx7Y29udGFpbmVyOmksb25FcnJvcjpyfT10fHx7fTtpZighbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJyYWludHJlZXBheXBhbFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYnJhaW50cmVlcGF5cGFsLmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtsZXQgbyxhPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO3RyeXtpZihvPWEuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobiksIW8uY2xpZW50VG9rZW4pdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50VG9rZW4pfWNhdGNoKGUpe2E9eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG4pLG89YS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhuKX1jb25zdHtjbGllbnRUb2tlbjpzLGNvbmZpZzpkLGluaXRpYWxpemF0aW9uRGF0YTpjfT1vLHtwYXltZW50QnV0dG9uU3R5bGVzOmx9PWN8fHt9LHtjaGVja291dFRvcEJ1dHRvblN0eWxlczp1fT1sfHx7fTtpZighc3x8IWMpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtjb25zdCBoPXtjdXJyZW5jeTphLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSxpbnRlbnQ6Yy5pbnRlbnQsaXNDcmVkaXRFbmFibGVkOmMuaXNDcmVkaXRFbmFibGVkLGNvbW1pdDohMX07dGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZShzKSx5aWVsZCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlwYWxDaGVja291dChoLGU9Pnt0aGlzLnJlbmRlclBheVBhbEJ1dHRvbihlLHQsbixCb29sZWFuKGQudGVzdE1vZGUpLHUpfSxlPT50aGlzLmhhbmRsZUVycm9yKGUsaSxyKSl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gYXIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLnRlYXJkb3duKCl9KX1zaWduSW4oZSx0KXtyZXR1cm4gYXIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihlLHQpfSl9c2lnbk91dChlKXtyZXR1cm4gYXIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIoZSl9KX1leGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KGUpe3ZhciB0O3JldHVybiBudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrKXx8dm9pZCAwPT09dHx8dC5jYWxsKGUpLFByb21pc2UucmVzb2x2ZSgpfXJlbmRlclBheVBhbEJ1dHRvbihlLHQsbixpLHIpe2NvbnN0e2NvbnRhaW5lcjpvLG9uQ2xpY2s6YT1WfT10LHtwYXlwYWw6c309dGhpcy5icmFpbnRyZWVIb3N0V2luZG93LGQ9bnVsbD09cz92b2lkIDA6cy5GVU5ESU5HLlBBWVBBTDtpZihzJiZkKXtjb25zdCBjPXMuQnV0dG9ucyh7ZW52OnRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJyYWludHJlZUVudihpKSxmdW5kaW5nU291cmNlOmQsc3R5bGU6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHIpLHtoZWlnaHQ6ZGl9KSxjcmVhdGVPcmRlcjooKT0+dGhpcy5zZXR1cFBheW1lbnQoZSx0LG4pLG9uQXBwcm92ZTppPT50aGlzLnRva2VuaXplUGF5bWVudChpLGUsbix0KSxvbkNsaWNrOmF9KTtjLmlzRWxpZ2libGUoKSYmYy5yZW5kZXIoYCMke299YCl9ZWxzZSB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KG8pfXNldHVwUGF5bWVudChlLHQsbil7dmFyIGk7cmV0dXJuIGFyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtjb25zdCB0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHI9dC5nZXRDaGVja291dE9yVGhyb3coKS5vdXRzdGFuZGluZ0JhbGFuY2Usbz10LmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSxhPXQuZ2V0Q3VzdG9tZXIoKSxzPXQuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobiksZD1udWxsPT1hP3ZvaWQgMDphLmFkZHJlc3Nlc1swXSxjPWQ/dGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UubWFwVG9CcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3NPdmVycmlkZShkKTp2b2lkIDA7cmV0dXJuIHlpZWxkIGUuY3JlYXRlUGF5bWVudCh7ZmxvdzpcImNoZWNrb3V0XCIsZW5hYmxlU2hpcHBpbmdBZGRyZXNzOiEwLHNoaXBwaW5nQWRkcmVzc0VkaXRhYmxlOiExLHNoaXBwaW5nQWRkcmVzc092ZXJyaWRlOmMsYW1vdW50OnIsY3VycmVuY3k6byxvZmZlckNyZWRpdDohMSxpbnRlbnQ6bnVsbD09PShpPXMuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09aT92b2lkIDA6aS5pbnRlbnR9KX1jYXRjaChlKXtjb25zdHtjb250YWluZXI6bixvbkVycm9yOml9PXQ7dGhpcy5oYW5kbGVFcnJvcihlLG4saSl9fSl9dG9rZW5pemVQYXltZW50KGUsdCxuLGkpe3JldHVybiBhcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0e2RldmljZURhdGE6aX09eWllbGQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0RGF0YUNvbGxlY3Rvcih7cGF5cGFsOiEwfSkscj15aWVsZCB0LnRva2VuaXplUGF5bWVudChlKSx7ZGV0YWlsczpvLG5vbmNlOmF9PXIscz10aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5tYXBUb0xlZ2FjeUJpbGxpbmdBZGRyZXNzKG8pLGQ9dGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UubWFwVG9MZWdhY3lTaGlwcGluZ0FkZHJlc3Mobyk7cmV0dXJuIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybShcIi9jaGVja291dC5waHBcIix7cGF5bWVudF90eXBlOlwicGF5cGFsXCIscHJvdmlkZXI6bixhY3Rpb246XCJzZXRfZXh0ZXJuYWxfY2hlY2tvdXRcIixub25jZTphLGRldmljZV9kYXRhOmksYmlsbGluZ19hZGRyZXNzOkpTT04uc3RyaW5naWZ5KHMpLHNoaXBwaW5nX2FkZHJlc3M6SlNPTi5zdHJpbmdpZnkoZCl9KSxyfWNhdGNoKGUpe2NvbnN0e2NvbnRhaW5lcjp0LG9uRXJyb3I6bn09aTt0aGlzLmhhbmRsZUVycm9yKGUsdCxuKX19KX1oYW5kbGVFcnJvcihlLHQsbil7aWYodGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudCh0KSwhbnx8IUNuKGUpKXRocm93IGU7bihlKX19Y29uc3QgZHI9bm4oZT0+e2NvbnN0IHQ9d2luZG93LG49bmV3IHBuKGUpLGk9bmV3IG9yKG5ldyBEbihhKCksdCxuKSx0KTtyZXR1cm4gbmV3IHNyKGUsRWUoKSxpLHQpfSxbe2lkOlwiYnJhaW50cmVlcGF5cGFsXCJ9XSk7dmFyIGNyPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIGxye2NvbnN0cnVjdG9yKGUsdCxuLGkpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuZm9ybVBvc3Rlcj10LHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlPW4sdGhpcy5icmFpbnRyZWVIb3N0V2luZG93PWl9aW5pdGlhbGl6ZShlKXtyZXR1cm4gY3IodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e2JyYWludHJlZXBheXBhbGNyZWRpdDp0LG1ldGhvZElkOm59PWUse2NvbnRhaW5lcjppLG9uRXJyb3I6cn09dHx8e307aWYoIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5icmFpbnRyZWVwYXlwYWxjcmVkaXRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIWkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJyYWludHJlZXBheXBhbGNyZWRpdC5jb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7bGV0IG8sYT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTt0cnl7bz1hLmdldFBheW1lbnRNZXRob2RPclRocm93KG4pfWNhdGNoKGUpe2E9eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG4pLG89YS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhuKX1jb25zdHtjbGllbnRUb2tlbjpzLGNvbmZpZzpkLGluaXRpYWxpemF0aW9uRGF0YTpjfT1vLHtwYXltZW50QnV0dG9uU3R5bGVzOmx9PWN8fHt9LHtjaGVja291dFRvcEJ1dHRvblN0eWxlczp1fT1sfHx7fTtpZighc3x8IWMpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtjb25zdCBoPXtjdXJyZW5jeTphLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSxpbnRlbnQ6Yy5pbnRlbnQsaXNDcmVkaXRFbmFibGVkOmMuaXNDcmVkaXRFbmFibGVkLGNvbW1pdDohMX07dGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZShzKSx5aWVsZCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlwYWxDaGVja291dChoLGU9Pnt0aGlzLnJlbmRlclBheVBhbEJ1dHRvbihlLHQsbixCb29sZWFuKGQudGVzdE1vZGUpLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx1KSx7aGVpZ2h0OmRpfSkpfSxlPT50aGlzLmhhbmRsZUVycm9yKGUsaSxyKSl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gY3IodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLnRlYXJkb3duKCl9KX1zaWduSW4oZSx0KXtyZXR1cm4gY3IodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihlLHQpfSl9c2lnbk91dChlKXtyZXR1cm4gY3IodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIoZSl9KX1leGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KGUpe3ZhciB0O3JldHVybiBudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrKXx8dm9pZCAwPT09dHx8dC5jYWxsKGUpLFByb21pc2UucmVzb2x2ZSgpfXJlbmRlclBheVBhbEJ1dHRvbihlLHQsbixpLHIpe2NvbnN0e2NvbnRhaW5lcjpvLG9uQ2xpY2s6YT1WfT10LHtwYXlwYWw6c309dGhpcy5icmFpbnRyZWVIb3N0V2luZG93O2xldCBkPSExO3MmJltzLkZVTkRJTkcuUEFZTEFURVIscy5GVU5ESU5HLkNSRURJVF0uZm9yRWFjaChjPT57aWYoIWQpe2NvbnN0IGw9cy5CdXR0b25zKHtlbnY6aT9cInNhbmRib3hcIjpcInByb2R1Y3Rpb25cIixmdW5kaW5nU291cmNlOmMsc3R5bGU6cixjcmVhdGVPcmRlcjooKT0+dGhpcy5zZXR1cFBheW1lbnQoZSx0LG4pLG9uQXBwcm92ZTppPT50aGlzLnRva2VuaXplUGF5bWVudChpLGUsbix0KSxvbkNsaWNrOmF9KTtsLmlzRWxpZ2libGUoKSYmKGwucmVuZGVyKGAjJHtvfWApLGQ9ITApfX0pLHMmJmR8fHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQobyl9c2V0dXBQYXltZW50KGUsdCxuKXt2YXIgaTtyZXR1cm4gY3IodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkscj10LmdldENoZWNrb3V0T3JUaHJvdygpLm91dHN0YW5kaW5nQmFsYW5jZSxvPXQuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlLGE9dC5nZXRDdXN0b21lcigpLHM9dC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhuKSxkPW51bGw9PWE/dm9pZCAwOmEuYWRkcmVzc2VzWzBdLGM9ZD90aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5tYXBUb0JyYWludHJlZVNoaXBwaW5nQWRkcmVzc092ZXJyaWRlKGQpOnZvaWQgMDtyZXR1cm4geWllbGQgZS5jcmVhdGVQYXltZW50KHtmbG93OlwiY2hlY2tvdXRcIixlbmFibGVTaGlwcGluZ0FkZHJlc3M6ITAsc2hpcHBpbmdBZGRyZXNzRWRpdGFibGU6ITEsc2hpcHBpbmdBZGRyZXNzT3ZlcnJpZGU6YyxhbW91bnQ6cixjdXJyZW5jeTpvLG9mZmVyQ3JlZGl0OiEwLGludGVudDpudWxsPT09KGk9cy5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmludGVudH0pfWNhdGNoKGUpe2NvbnN0e2NvbnRhaW5lcjpuLG9uRXJyb3I6aX09dDt0aGlzLmhhbmRsZUVycm9yKGUsbixpKX19KX10b2tlbml6ZVBheW1lbnQoZSx0LG4saSl7cmV0dXJuIGNyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7Y29uc3R7ZGV2aWNlRGF0YTppfT15aWVsZCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXREYXRhQ29sbGVjdG9yKHtwYXlwYWw6ITB9KSxyPXlpZWxkIHQudG9rZW5pemVQYXltZW50KGUpLHtkZXRhaWxzOm8sbm9uY2U6YX09cixzPXRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLm1hcFRvTGVnYWN5QmlsbGluZ0FkZHJlc3MobyksZD10aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5tYXBUb0xlZ2FjeVNoaXBwaW5nQWRkcmVzcyhvKTtyZXR1cm4gdGhpcy5mb3JtUG9zdGVyLnBvc3RGb3JtKFwiL2NoZWNrb3V0LnBocFwiLHtwYXltZW50X3R5cGU6XCJwYXlwYWxcIixwcm92aWRlcjpuLGFjdGlvbjpcInNldF9leHRlcm5hbF9jaGVja291dFwiLG5vbmNlOmEsZGV2aWNlX2RhdGE6aSxiaWxsaW5nX2FkZHJlc3M6SlNPTi5zdHJpbmdpZnkocyksc2hpcHBpbmdfYWRkcmVzczpKU09OLnN0cmluZ2lmeShkKX0pLHJ9Y2F0Y2goZSl7Y29uc3R7Y29udGFpbmVyOnQsb25FcnJvcjpufT1pO3RoaXMuaGFuZGxlRXJyb3IoZSx0LG4pfX0pfWhhbmRsZUVycm9yKGUsdCxuKXtpZih0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KHQpLCFufHwhQ24oZSkpdGhyb3cgZTtuKGUpfX1jb25zdCB1cj1ubihlPT57Y29uc3QgdD13aW5kb3csbj1uZXcgcG4oZSksaT1uZXcgb3IobmV3IERuKGEoKSx0LG4pLHQpO3JldHVybiBuZXcgbHIoZSxFZSgpLGksdCl9LFt7aWQ6XCJicmFpbnRyZWVwYXlwYWxjcmVkaXRcIn1dKTtmdW5jdGlvbiBocihlKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZX1mdW5jdGlvbiBwcihlLHQpe2lmKHR8fGUpcmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0LG47Y29uc3QgaT17fSxyPUgoZS5yb290LGhyKSxvPUgoZS5pbnB1dCxociksYT1IKGUudG9nZ2xlLGhyKSxzPUgobnVsbD09PSh0PWUudGV4dCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuYm9keSxociksZD1IKG51bGw9PT0obj1lLnRleHQpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNhcHRpb24saHIpLGM9ZS5icmFuZGluZztyZXR1cm4gT2JqZWN0LmtleXMocikubGVuZ3RoJiYoaS5yb290PXIpLE9iamVjdC5rZXlzKG8pLmxlbmd0aCYmKGkuaW5wdXQ9byksT2JqZWN0LmtleXMoYSkubGVuZ3RoJiYoaS50b2dnbGU9YSksT2JqZWN0LmtleXMocykubGVuZ3RoJiYoaS50ZXh0PXt9LGkudGV4dC5ib2R5PXMpLE9iamVjdC5rZXlzKGQpLmxlbmd0aCYmKGkudGV4dD1PYmplY3QuYXNzaWduKHt9LGkudGV4dCksaS50ZXh0LmNhcHRpb249ZCksYyYmKGkuYnJhbmRpbmc9YyksaX0oZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhLHMsZCxjLGwsdSxoLHAsbSx5LGcsdixmLFMsXyx3LEMsSTtyZXR1cm57cm9vdDp7YmFja2dyb3VuZENvbG9yUHJpbWFyeToobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZVJvb3RTZXR0aW5nc0JhY2tncm91bmRDb2xvcil8fChudWxsPT09KG49bnVsbD09dD92b2lkIDA6dC5yb290KXx8dm9pZCAwPT09bj92b2lkIDA6bi5iYWNrZ3JvdW5kQ29sb3JQcmltYXJ5KSxlcnJvckNvbG9yOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lUm9vdFNldHRpbmdzRXJyb3JDb2xvcil8fChudWxsPT09KGk9bnVsbD09dD92b2lkIDA6dC5yb290KXx8dm9pZCAwPT09aT92b2lkIDA6aS5lcnJvckNvbG9yKSxmb250RmFtaWx5OihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lUm9vdFNldHRpbmdzRm9udEZhbWlseSl8fChudWxsPT09KHI9bnVsbD09dD92b2lkIDA6dC5yb290KXx8dm9pZCAwPT09cj92b2lkIDA6ci5mb250RmFtaWx5KSxmb250U2l6ZUJhc2U6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVSb290U2V0dGluZ3NGb250U2l6ZSl8fChudWxsPT09KG89bnVsbD09dD92b2lkIDA6dC5yb290KXx8dm9pZCAwPT09bz92b2lkIDA6by5mb250U2l6ZUJhc2UpLHBhZGRpbmc6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVSb290U2V0dGluZ3NQYWRkaW5nKXx8KG51bGw9PT0oYT1udWxsPT10P3ZvaWQgMDp0LnJvb3QpfHx2b2lkIDA9PT1hP3ZvaWQgMDphLnBhZGRpbmcpLHByaW1hcnlDb2xvcjoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZVJvb3RTZXR0aW5nc1ByaW1hcnlDb2xvcil8fChudWxsPT09KHM9bnVsbD09dD92b2lkIDA6dC5yb290KXx8dm9pZCAwPT09cz92b2lkIDA6cy5wcmltYXJ5Q29sb3IpfSxpbnB1dDp7Ym9yZGVyUmFkaXVzOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlclJhZGl1cyl8fChudWxsPT09KGQ9bnVsbD09dD92b2lkIDA6dC5pbnB1dCl8fHZvaWQgMD09PWQ/dm9pZCAwOmQuYm9yZGVyUmFkaXVzKSxib3JkZXJDb2xvcjoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJDb2xvcil8fChudWxsPT09KGM9bnVsbD09dD92b2lkIDA6dC5pbnB1dCl8fHZvaWQgMD09PWM/dm9pZCAwOmMuYm9yZGVyQ29sb3IpLGZvY3VzQm9yZGVyQ29sb3I6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVJbnB1dFNldHRpbmdzRm9jdXNCb3JkZXJCYXNlKXx8KG51bGw9PT0obD1udWxsPT10P3ZvaWQgMDp0LmlucHV0KXx8dm9pZCAwPT09bD92b2lkIDA6bC5mb2N1c0JvcmRlckNvbG9yKSxiYWNrZ3JvdW5kQ29sb3I6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVJbnB1dFNldHRpbmdzQmFja2dyb3VuZENvbG9yKXx8KG51bGw9PT0odT1udWxsPT10P3ZvaWQgMDp0LmlucHV0KXx8dm9pZCAwPT09dT92b2lkIDA6dS5iYWNrZ3JvdW5kQ29sb3IpLGJvcmRlcldpZHRoOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlcldpZHRoKXx8KG51bGw9PT0oaD1udWxsPT10P3ZvaWQgMDp0LmlucHV0KXx8dm9pZCAwPT09aD92b2lkIDA6aC5ib3JkZXJXaWR0aCksdGV4dENvbG9yQmFzZToobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZUlucHV0U2V0dGluZ3NUZXh0Q29sb3JCYXNlKXx8KG51bGw9PT0ocD1udWxsPT10P3ZvaWQgMDp0LmlucHV0KXx8dm9pZCAwPT09cD92b2lkIDA6cC50ZXh0Q29sb3JCYXNlKX0sdG9nZ2xlOntjb2xvclByaW1hcnk6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yUHJpbWFyeSl8fChudWxsPT09KG09bnVsbD09dD92b2lkIDA6dC50b2dnbGUpfHx2b2lkIDA9PT1tP3ZvaWQgMDptLmNvbG9yUHJpbWFyeSksY29sb3JTZWNvbmRhcnk6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yU2Vjb25kYXJ5KXx8KG51bGw9PT0oeT1udWxsPT10P3ZvaWQgMDp0LnRvZ2dsZSl8fHZvaWQgMD09PXk/dm9pZCAwOnkuY29sb3JTZWNvbmRhcnkpfSx0ZXh0Ontib2R5Ontjb2xvcjoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NDb2xvcil8fChudWxsPT09KHY9bnVsbD09PShnPW51bGw9PXQ/dm9pZCAwOnQudGV4dCl8fHZvaWQgMD09PWc/dm9pZCAwOmcuYm9keSl8fHZvaWQgMD09PXY/dm9pZCAwOnYuY29sb3IpLGZvbnRTaXplOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0ZvbnRTaXplKXx8KG51bGw9PT0oUz1udWxsPT09KGY9bnVsbD09dD92b2lkIDA6dC50ZXh0KXx8dm9pZCAwPT09Zj92b2lkIDA6Zi5ib2R5KXx8dm9pZCAwPT09Uz92b2lkIDA6Uy5mb250U2l6ZSl9LGNhcHRpb246e2NvbG9yOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0NvbG9yKXx8KG51bGw9PT0odz1udWxsPT09KF89bnVsbD09dD92b2lkIDA6dC50ZXh0KXx8dm9pZCAwPT09Xz92b2lkIDA6Xy5jYXB0aW9uKXx8dm9pZCAwPT09dz92b2lkIDA6dy5jb2xvciksZm9udFNpemU6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzRm9udFNpemUpfHwobnVsbD09PShJPW51bGw9PT0oQz1udWxsPT10P3ZvaWQgMDp0LnRleHQpfHx2b2lkIDA9PT1DP3ZvaWQgMDpDLmNhcHRpb24pfHx2b2lkIDA9PT1JP3ZvaWQgMDpJLmZvbnRTaXplKX19LGJyYW5kaW5nOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lQnJhbmRpbmdTZXR0aW5ncyl8fChudWxsPT10P3ZvaWQgMDp0LmJyYW5kaW5nKX19KGUsdCkpfXZhciBtcj1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyB5cntjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYnJhaW50cmVlRmFzdGxhbmVVdGlscz10LHRoaXMuaXNBY2NlbGVyYXRlZENoZWNrb3V0RW5hYmxlZD0hMX1pbml0aWFsaXplKHttZXRob2RJZDplLGJyYWludHJlZWZhc3RsYW5lOnR9KXt2YXIgbjtyZXR1cm4gbXIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFlKXRocm93IG5ldyBybignVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0IGk9eWllbGQgdGhpcy5nZXRWYWxpZFBheW1lbnRNZXRob2RPclRocm93KGUpLHtpc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkOnIsaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkOm99PWkuaW5pdGlhbGl6YXRpb25EYXRhfHx7fSxhPW8/bnVsbD09PShuPWkuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09bj92b2lkIDA6bi5mYXN0bGFuZVN0eWxlczp2b2lkIDA7dGhpcy5pc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkPSEhcjt0cnl7aWYodGhpcy5pc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkKXtjb25zdCBlPXByKGEsbnVsbD09dD92b2lkIDA6dC5zdHlsZXMpO3lpZWxkIHRoaXMuYnJhaW50cmVlRmFzdGxhbmVVdGlscy5pbml0aWFsaXplQnJhaW50cmVlRmFzdGxhbmVPclRocm93KGkuaWQsZSl9fWNhdGNoKGUpe31yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gbXIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX0pfXNpZ25JbihlLHQpe3JldHVybiBtcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGUsdCl9KX1zaWduT3V0KGUpe3JldHVybiBtcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihlKX0pfWV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoZSl7cmV0dXJuIG1yKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZDp0LGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2s6bn09ZXx8e307aWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIGFuZCBpdCBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7Y29uc3QgaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDdXN0b21lck9yVGhyb3coKTtpZih0aGlzLmlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQmJmkuaXNHdWVzdCl7Y29uc3QgZT15aWVsZCB0aGlzLnNob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdygpO3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQoKSxlJiYoeWllbGQgdGhpcy5icmFpbnRyZWVGYXN0bGFuZVV0aWxzLnJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3codm9pZCAwLCEwKSl9bigpfSl9c2hvdWxkUnVuQXV0aGVudGljYXRpb25GbG93KCl7dmFyIGU7cmV0dXJuIG1yKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PVwiYnJhaW50cmVlYWNjZWxlcmF0ZWRjaGVja291dFwiO3RyeXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QodCk7Y29uc3Qgbj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyh0KTtyZXR1cm4obnVsbD09PShlPW4uaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5zaG91bGRSdW5BY2NlbGVyYXRlZENoZWNrb3V0KXx8ITF9Y2F0Y2goZSl7cmV0dXJuITF9fSl9Z2V0VmFsaWRQYXltZW50TWV0aG9kT3JUaHJvdyhlKXtyZXR1cm4gbXIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2xldCB0PWU7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZCh0KX1jYXRjaChuKXt0PVwiYnJhaW50cmVlXCI9PT1lP1wiYnJhaW50cmVlYWNjZWxlcmF0ZWRjaGVja291dFwiOlwiYnJhaW50cmVlXCIseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKHQpfXJldHVybiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyh0KX0pfX12YXIgZ3I9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgdnJ7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZT10fWdldERldmljZVNlc3Npb25JZCgpe3JldHVybiBncih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgZT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0KCk7cmV0dXJuIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNlc3Npb25JZChudWxsPT1lP3ZvaWQgMDplLmlkKX0pfWluaXRpYWxpemVCcmFpbnRyZWVGYXN0bGFuZU9yVGhyb3coZSx0KXtyZXR1cm4gZ3IodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksaT1uLmdldENhcnQoKSx7Y2xpZW50VG9rZW46cixjb25maWc6b309bi5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKTtpZighcil0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO3RoaXMubWV0aG9kSWQ9ZSx0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5pbml0aWFsaXplKHIpLHRoaXMuYnJhaW50cmVlRmFzdGxhbmU9eWllbGQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QnJhaW50cmVlRmFzdGxhbmUobnVsbD09aT92b2lkIDA6aS5pZCxvLnRlc3RNb2RlLHQpfSl9Z2V0QnJhaW50cmVlRmFzdGxhbmVPclRocm93KCl7aWYoIXRoaXMuYnJhaW50cmVlRmFzdGxhbmUpdGhyb3cgbmV3IFh0O3JldHVybiB0aGlzLmJyYWludHJlZUZhc3RsYW5lfWdldEJyYWludHJlZUZhc3RsYW5lQ29tcG9uZW50T3JUaHJvdygpe3JldHVybiB0aGlzLmdldEJyYWludHJlZUZhc3RsYW5lT3JUaHJvdygpLkZhc3RsYW5lQ2FyZENvbXBvbmVudH1ydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KGUsdCl7dmFyIG47cmV0dXJuIGdyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7Y29uc3QgaT10aGlzLmdldE1ldGhvZElkT3JUaHJvdygpLHI9dGhpcy5nZXRCcmFpbnRyZWVGYXN0bGFuZU9yVGhyb3coKSx7bG9va3VwQ3VzdG9tZXJCeUVtYWlsOm8sdHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdzphfT1yLmlkZW50aXR5LHM9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksZD1zLmdldENhcnRPclRocm93KCksYz1zLmdldEN1c3RvbWVyKCksbD1zLmdldEJpbGxpbmdBZGRyZXNzKCkse2lzRmFzdGxhbmVTaGlwcGluZ09wdGlvbkF1dG9TZWxlY3RFbmFibGVkOnV9PXMuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coaSkuaW5pdGlhbGl6YXRpb25EYXRhfHx7fSxoPWV8fChudWxsPT1jP3ZvaWQgMDpjLmVtYWlsKXx8KG51bGw9PWw/dm9pZCAwOmwuZW1haWwpfHxcIlwiLHtjdXN0b21lckNvbnRleHRJZDpwfT15aWVsZCBvKGgpO2lmKCFwKXJldHVybiB5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe2F1dGhlbnRpY2F0aW9uU3RhdGU6Zm4uVU5SRUNPR05JWkVELGFkZHJlc3NlczpbXSxpbnN0cnVtZW50czpbXX0pLHZvaWQgdGhpcy5zYXZlU2Vzc2lvbklkVG9Db29raWVzKGQuaWQpO2NvbnN0e2F1dGhlbnRpY2F0aW9uU3RhdGU6bSxwcm9maWxlRGF0YTp5fT15aWVsZCBhKHApLGc9KG51bGw9PT0obj1udWxsPT15P3ZvaWQgMDp5LnNoaXBwaW5nQWRkcmVzcyl8fHZvaWQgMD09PW4/dm9pZCAwOm4ucGhvbmVOdW1iZXIpfHxcIlwiO2lmKG09PT1mbi5DQU5DRUxFRClyZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHthdXRoZW50aWNhdGlvblN0YXRlOm0sYWRkcmVzc2VzOltdLGluc3RydW1lbnRzOltdfSksdm9pZCB0aGlzLnJlbW92ZVNlc3Npb25JZEZyb21Db29raWVzKCk7Y29uc3Qgdj10aGlzLm1hcFBheVBhbFRvQmNBZGRyZXNzKFt5LnNoaXBwaW5nQWRkcmVzc10sW2ddKXx8W10sZj10aGlzLmdldFBheVBhbEJpbGxpbmdBZGRyZXNzZXMoeSksUz1mP3RoaXMubWFwUGF5UGFsVG9CY0FkZHJlc3MoW2ZdLFtnXSk6W10sXz15LmNhcmQ/dGhpcy5tYXBQYXlQYWxUb0JjSW5zdHJ1bWVudChpLFt5LmNhcmRdKTpbXSx3PXRoaXMubWVyZ2VTaGlwcGluZ0FuZEJpbGxpbmdBZGRyZXNzZXModixTKTtpZih0aGlzLnNhdmVTZXNzaW9uSWRUb0Nvb2tpZXMoZC5pZCkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHthdXRoZW50aWNhdGlvblN0YXRlOm0sYWRkcmVzc2VzOncsaW5zdHJ1bWVudHM6X30pLFMubGVuZ3RoPjAmJmQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoPjAmJih5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoU1swXSkpLFMubGVuZ3RoPjAmJmQubGluZUl0ZW1zLmRpZ2l0YWxJdGVtcy5sZW5ndGg+MCYmMD09PWQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoKXtjb25zdHtmaXJzdE5hbWU6ZSxsYXN0TmFtZTp0fT13WzBdLG49T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LFNbMF0pLHtmaXJzdE5hbWU6ZSxsYXN0TmFtZTp0fSk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKG4pfXYubGVuZ3RoPjAmJmQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoPjAmJih5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHZbMF0pLHQmJnUmJih5aWVsZCB0aGlzLnNldFNoaXBwaW5nT3B0aW9uKCkpKX1jYXRjaChlKXt9fSl9Z2V0U2Vzc2lvbklkRnJvbUNvb2tpZXMoKXtyZXR1cm4gSWkuZ2V0KFwiYmMtZmFzdGxhbmUtc2Vzc2lvbklkXCIpfHxcIlwifXNhdmVTZXNzaW9uSWRUb0Nvb2tpZXMoZSl7Y29uc3QgdD1uZXcgRGF0ZTt0LnNldERhdGUodC5nZXREYXRlKCkrMTQpLElpLnNldChcImJjLWZhc3RsYW5lLXNlc3Npb25JZFwiLGUse2V4cGlyZXM6dCxzZWN1cmU6ITB9KX1yZW1vdmVTZXNzaW9uSWRGcm9tQ29va2llcygpe0lpLnJlbW92ZShcImJjLWZhc3RsYW5lLXNlc3Npb25JZFwiKX1tYXBQYXlQYWxUb0JjSW5zdHJ1bWVudChlLHQpe2lmKHQpcmV0dXJuIHQubWFwKHQ9Pntjb25zdHtpZDpuLHBheW1lbnRTb3VyY2U6aX09dCx7YnJhbmQ6cixleHBpcnk6byxsYXN0RGlnaXRzOmEsYmluRGV0YWlsczpzfT1pLmNhcmQsW2QsY109by5zcGxpdChcIi1cIik7cmV0dXJue2JpZ3BheVRva2VuOm4sYnJhbmQ6cixkZWZhdWx0SW5zdHJ1bWVudDohMSxleHBpcnlNb250aDpjLGV4cGlyeVllYXI6ZCxpaW46KG51bGw9PXM/dm9pZCAwOnMuYmluKXx8XCJcIixsYXN0NDphLG1ldGhvZDplLHByb3ZpZGVyOmUsdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczohMSx0eXBlOlwiY2FyZFwiLHVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGU6aGkuUEFOfX0pfW1hcFBheVBhbFRvQmNBZGRyZXNzKGUsdCl7aWYoIWUpcmV0dXJuW107Y29uc3Qgbj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDb3VudHJpZXMoKXx8W10saT1lPT57Y29uc3QgdD1uLmZpbmQodD0+dC5jb2RlPT09ZSk7cmV0dXJuKG51bGw9PXQ/dm9pZCAwOnQubmFtZSl8fFwiXCJ9O3JldHVybiBlLm1hcChlPT4oe2lkOkRhdGUubm93KCksdHlwZTpcInBheXBhbC1hZGRyZXNzXCIsZmlyc3ROYW1lOmUuZmlyc3ROYW1lfHxcIlwiLGxhc3ROYW1lOmUubGFzdE5hbWV8fFwiXCIsY29tcGFueTplLmNvbXBhbnl8fFwiXCIsYWRkcmVzczE6ZS5zdHJlZXRBZGRyZXNzLGFkZHJlc3MyOmUuZXh0ZW5kZWRBZGRyZXNzfHxcIlwiLGNpdHk6ZS5sb2NhbGl0eSxzdGF0ZU9yUHJvdmluY2U6ZS5yZWdpb24sc3RhdGVPclByb3ZpbmNlQ29kZTplLnJlZ2lvbixjb3VudHJ5OmkoZS5jb3VudHJ5Q29kZUFscGhhMiksY291bnRyeUNvZGU6ZS5jb3VudHJ5Q29kZUFscGhhMixwb3N0YWxDb2RlOmUucG9zdGFsQ29kZSxwaG9uZTp0JiZ0WzBdfHxcIlwiLGN1c3RvbUZpZWxkczpbXX0pKX1nZXRQYXlQYWxCaWxsaW5nQWRkcmVzc2VzKGUpe2NvbnN0e2NhcmQ6dCxuYW1lOm59PWV8fHt9O2lmKCF0KXJldHVybjtjb25zdHtmaXJzdE5hbWU6aSxsYXN0TmFtZTpyfT10LnBheW1lbnRTb3VyY2UuY2FyZC5iaWxsaW5nQWRkcmVzcyx7Zmlyc3ROYW1lOm8sbGFzdE5hbWU6YX09bnx8e30se3NoaXBwaW5nQWRkcmVzczpzfT1lfHx7fSxkPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0LnBheW1lbnRTb3VyY2UuY2FyZC5iaWxsaW5nQWRkcmVzcykse2ZpcnN0TmFtZTppfHxvLGxhc3ROYW1lOnJ8fGF9KTtyZXR1cm4gcyYmQSh0aGlzLm5vcm1hbGl6ZUFkZHJlc3MoZCksdGhpcy5ub3JtYWxpemVBZGRyZXNzKHMpKT9zOmR9bm9ybWFsaXplQWRkcmVzcyhlKXtyZXR1cm4gRyhlLFtcImlkXCJdKX1tZXJnZVNoaXBwaW5nQW5kQmlsbGluZ0FkZHJlc3NlcyhlLHQpe2NvbnN0IG49dC5maWx0ZXIodD0+IWUuc29tZShlPT5BKHRoaXMubm9ybWFsaXplQWRkcmVzcyhlKSx0aGlzLm5vcm1hbGl6ZUFkZHJlc3ModCkpKSk7cmV0dXJuWy4uLmUsLi4ubl19Z2V0TWV0aG9kSWRPclRocm93KCl7aWYoIXRoaXMubWV0aG9kSWQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7cmV0dXJuIHRoaXMubWV0aG9kSWR9c2V0U2hpcHBpbmdPcHRpb24oKXt2YXIgZTtyZXR1cm4gZ3IodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q29uc2lnbm1lbnRzKCl8fFtdLG49KG51bGw9PT0oZT10WzBdKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMpfHxbXSxpPW4uZmluZChlPT5lLmlzUmVjb21tZW5kZWQpO2lmKGl8fG4ubGVuZ3RoKXtjb25zdCBlPWl8fG5bMF07eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKGUuaWQpfX0pfX1jb25zdCBmcj1ubihlPT57Y29uc3QgdD13aW5kb3csbj1uZXcgcG4oZSksaT1uZXcgb3IobmV3IERuKGEoKSx0LG4pLHQpLHI9bmV3IHZyKGUsaSk7cmV0dXJuIG5ldyB5cihlLHIpfSxbe2lkOlwiYnJhaW50cmVlYWNjZWxlcmF0ZWRjaGVja291dFwifSx7aWQ6XCJicmFpbnRyZWVcIn1dKTt2YXIgU3I9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgX3J7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuZm9ybVBvc3Rlcj10LHRoaXMuYnJhaW50cmVlU2RrPW4sdGhpcy5idXR0b25DbGFzc05hbWU9XCJ2aXNhLWNoZWNrb3V0LXdyYXBwZXJcIix0aGlzLm9uRXJyb3I9Vn1pbml0aWFsaXplKGUpe3JldHVybiBTcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7YnJhaW50cmVldmlzYWNoZWNrb3V0OnQsbWV0aG9kSWQ6bn09ZTtpZighbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighdCl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJvcHRpb25zLmJyYWludHJlZXZpc2FjaGVja291dFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2Qobik7Y29uc3QgaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxyPWkuZ2V0Q2hlY2tvdXRPclRocm93KCkse2NsaWVudFRva2VuOm8sY29uZmlnOmF9PWkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobikscz1pLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpO2lmKCFvKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7dGhpcy5icmFpbnRyZWVTZGsuaW5pdGlhbGl6ZShvKTtjb25zdCBkPXlpZWxkIHRoaXMuYnJhaW50cmVlU2RrLmdldEJyYWludHJlZVZpc2FDaGVja291dCgpLGM9eWllbGQgdGhpcy5icmFpbnRyZWVTZGsuZ2V0VmlzYUNoZWNrb3V0U2RrKGEudGVzdE1vZGUpLHtjb250YWluZXI6bCxvbkVycm9yOnV9PXQ7dGhpcy5vbkVycm9yPXV8fFY7Y29uc3QgaD1kLmNyZWF0ZUluaXRPcHRpb25zKHtwYXltZW50UmVxdWVzdDp7Y3VycmVuY3lDb2RlOnMuY3VycmVuY3kuY29kZSxzdWJ0b3RhbDpTdHJpbmcoci5zdWJ0b3RhbCl9LHNldHRpbmdzOntsb2NhbGU6cy5zdG9yZVByb2ZpbGUuc3RvcmVMYW5ndWFnZSxzaGlwcGluZzp7Y29sbGVjdFNoaXBwaW5nOiEwfX19KSxwPXRoaXMuY3JlYXRlU2lnbkluQnV0dG9uKGwsdGhpcy5idXR0b25DbGFzc05hbWUpO3lpZWxkIGMuaW5pdChoKSxjLm9uKFwicGF5bWVudC5zdWNjZXNzXCIsZT0+dGhpcy50b2tlbml6ZVBheW1lbnQoZCxlKS50aGVuKCgpPT50aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KCkpLmNhdGNoKGU9PnRoaXMuaGFuZGxlRXJyb3IoZSkpKSxjLm9uKFwicGF5bWVudC5lcnJvclwiLChlLHQpPT50aGlzLmhhbmRsZUVycm9yKHQpKSxwLnN0eWxlLnZpc2liaWxpdHk9XCJ2aXNpYmxlXCJ9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gU3IodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuYnJhaW50cmVlU2RrLmRlaW5pdGlhbGl6ZSgpfSl9c2lnbkluKCl7dGhyb3cgbmV3IG9uKCdJbiBvcmRlciB0byBzaWduIGluIHZpYSBWaXNhQ2hlY2tvdXQsIHRoZSBzaG9wcGVyIG11c3QgY2xpY2sgb24gXCJWaXNhIENoZWNrb3V0XCIgYnV0dG9uLicpfXNpZ25PdXQoZSl7cmV0dXJuIFNyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihlKSxQcm9taXNlLnJlc29sdmUoKX0pfWV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoZSl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD1udWxsPT1lP3ZvaWQgMDplLmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2spfHx2b2lkIDA9PT10fHx0LmNhbGwoZSksUHJvbWlzZS5yZXNvbHZlKCl9dG9rZW5pemVQYXltZW50KGUsdCl7cmV0dXJuIFNyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gUHJvbWlzZS5hbGwoW2UudG9rZW5pemUodCksdGhpcy5icmFpbnRyZWVTZGsuZ2V0RGF0YUNvbGxlY3Rvck9yVGhyb3coKV0pLnRoZW4oKFtlLHRdKT0+e2NvbnN0IG49dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksaT1uLmdldFNoaXBwaW5nQWRkcmVzcygpLHI9bi5nZXRCaWxsaW5nQWRkcmVzcygpLHtzaGlwcGluZ0FkZHJlc3M6bz10aGlzLm1hcFRvVmlzYUNoZWNrb3V0QWRkcmVzcyhpKSxiaWxsaW5nQWRkcmVzczphPXRoaXMubWFwVG9WaXNhQ2hlY2tvdXRBZGRyZXNzKHIpfT1lO3JldHVybiB0aGlzLnBvc3RGb3JtKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7c2hpcHBpbmdBZGRyZXNzOm8sYmlsbGluZ0FkZHJlc3M6YX0pLHQpfSl9KX1wb3N0Rm9ybShlLHQpe2NvbnN0e3VzZXJEYXRhOm4sYmlsbGluZ0FkZHJlc3M6aSxzaGlwcGluZ0FkZHJlc3M6cixkZXRhaWxzOm99PWUse3VzZXJFbWFpbDphfT1uLHtkZXZpY2VEYXRhOnN9PXQ7cmV0dXJuIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybShcIi9jaGVja291dC5waHBcIix7cGF5bWVudF90eXBlOmUudHlwZSxub25jZTplLm5vbmNlLHByb3ZpZGVyOlwiYnJhaW50cmVldmlzYWNoZWNrb3V0XCIsYWN0aW9uOlwic2V0X2V4dGVybmFsX2NoZWNrb3V0XCIsZGV2aWNlX2RhdGE6cyxjYXJkX2luZm9ybWF0aW9uOkpTT04uc3RyaW5naWZ5KHt0eXBlOm8uY2FyZFR5cGUsbnVtYmVyOm8ubGFzdFR3b30pLGJpbGxpbmdfYWRkcmVzczpKU09OLnN0cmluZ2lmeSh0aGlzLmdldEFkZHJlc3MoYSxpKSksc2hpcHBpbmdfYWRkcmVzczpKU09OLnN0cmluZ2lmeSh0aGlzLmdldEFkZHJlc3MoYSxyKSl9KX1tYXBUb1Zpc2FDaGVja291dEFkZHJlc3MoZSl7cmV0dXJuIGU/e2ZpcnN0TmFtZTplLmZpcnN0TmFtZSxsYXN0TmFtZTplLmxhc3ROYW1lLHBob25lTnVtYmVyOmUucGhvbmUsc3RyZWV0QWRkcmVzczplLmFkZHJlc3MxLGV4dGVuZGVkQWRkcmVzczplLmFkZHJlc3MyLGxvY2FsaXR5OmUuY2l0eSxyZWdpb246ZS5zdGF0ZU9yUHJvdmluY2VDb2RlLGNvdW50cnlDb2RlOmUuY291bnRyeUNvZGUscG9zdGFsQ29kZTplLnBvc3RhbENvZGV9Ont9fWdldEFkZHJlc3MoZSx0PXt9KXtyZXR1cm57ZW1haWw6ZSxmaXJzdF9uYW1lOnQuZmlyc3ROYW1lLGxhc3RfbmFtZTp0Lmxhc3ROYW1lLHBob25lX251bWJlcjp0LnBob25lTnVtYmVyLGFkZHJlc3NfbGluZV8xOnQuc3RyZWV0QWRkcmVzcyxhZGRyZXNzX2xpbmVfMjp0LmV4dGVuZGVkQWRkcmVzcyxjaXR5OnQubG9jYWxpdHksc3RhdGU6dC5yZWdpb24sY291bnRyeV9jb2RlOnQuY291bnRyeUNvZGUscG9zdGFsX2NvZGU6dC5wb3N0YWxDb2RlfX1jcmVhdGVTaWduSW5CdXR0b24oZSx0KXtjb25zdCBuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2V9YCk7aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcHJvdmlkZWQgY29udGFpbmVyIElEIGlzIG5vdCB2YWxpZC5cIik7cmV0dXJuIHRoaXMuaW5zZXJ0VmlzYUNoZWNrb3V0QnV0dG9uKG4sdCl9aW5zZXJ0VmlzYUNoZWNrb3V0QnV0dG9uKGUsdCl7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBuLnN0eWxlLmRpc3BsYXk9XCJmbGV4XCIsbi5zdHlsZS5mbGV4RGlyZWN0aW9uPVwiY29sdW1uXCIsbi5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCIsbi5zdHlsZS53aWR0aD1cIm1heC1jb250ZW50XCIsbi5jbGFzc05hbWU9dCxuLmlubmVySFRNTD0nXFxuICAgICAgICAgICAgPGltZ1xcbiAgICAgICAgICAgICAgICBhbHQ9XCJWaXNhIENoZWNrb3V0XCJcXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJ2LWJ1dHRvblwiXFxuICAgICAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxcbiAgICAgICAgICAgICAgICBzcmM9XCJodHRwczovL3NlY3VyZS5jaGVja291dC52aXNhLmNvbS93YWxsZXQtc2VydmljZXMtd2ViL3hvL2J1dHRvbi5wbmc/YWNjZXB0Q2FuYWRpYW5WaXNhRGViaXQ9ZmFsc2UmY29icmFuZD10cnVlJmhlaWdodD0zNCZ3aWR0aD0xNzhcIlxcbiAgICAgICAgICAgICAgICAvPlxcbiAgICAgICAgICAgIDxhIGNsYXNzPVwidi1sZWFybiB2LWxlYXJuLWRlZmF1bHRcIiBzdHlsZT1cInRleHQtYWxpZ246IHJpZ2h0OyBkaXNwbGF5OiBibG9jazsgZm9udC1zaXplOiAxMHB4OyBjb2xvcjogIzAwMzM2NjtcIiBocmVmPVwiI1wiIGRhdGEtbG9jYWxlPVwiZW5fVVNcIj5UZWxsIE1lIE1vcmU8L2E+JyxlLmFwcGVuZENoaWxkKG4pLG59aGFuZGxlRXJyb3IoZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpcy5vbkVycm9yKXRocm93IGU7dGhpcy5vbkVycm9yKGUpfX1jb25zdCB3cj1ubihlPT57Y29uc3QgdD13aW5kb3csbj1uZXcgcG4oZSksaT1uZXcgRW4obmV3IERuKGEoKSx0LG4pKTtyZXR1cm4gbmV3IF9yKGUsRWUoKSxpKX0sW3tpZDpcImJyYWludHJlZXZpc2FjaGVja291dFwifV0pLENyPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdCYmbj9JcigwLHQsbik6ZnVuY3Rpb24oZSl7Y29uc3QgdD1jbGFzcyBleHRlbmRzIGV7fTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZS5wcm90b3R5cGUpLmZvckVhY2gobj0+e2NvbnN0IGk9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLnByb3RvdHlwZSxuKTtpJiZcImNvbnN0cnVjdG9yXCIhPT1uJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsbixJcihlLnByb3RvdHlwZSxuLGkpKX0pLHR9KGUpfTtmdW5jdGlvbiBJcihlLHQsbil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygbi52YWx1ZSlyZXR1cm4gbjtsZXQgaT1uLnZhbHVlO3JldHVybntnZXQoKXtjb25zdCBlPWkuYmluZCh0aGlzKTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsdCxPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbikse3ZhbHVlOmV9KSksZX0sc2V0KGUpe2k9ZX19fWNsYXNzIGJye2NvbnN0cnVjdG9yKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcihcIkN1cnJlbmN5IHNldHRpbmdzIG1pc3NpbmdcIik7Y29uc3R7ZGVjaW1hbFBsYWNlczp0LHN5bWJvbExvY2F0aW9uOm4sc3ltYm9sOmksdGhvdXNhbmRzU2VwYXJhdG9yOnIsZGVjaW1hbFNlcGFyYXRvcjpvfT1lO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBufHxcInN0cmluZ1wiIT10eXBlb2YgaXx8XCJzdHJpbmdcIiE9dHlwZW9mIHJ8fFwic3RyaW5nXCIhPXR5cGVvZiBvfHxcInN0cmluZ1wiIT10eXBlb2YgdCl0aHJvdyBuZXcgcm4oXCJJbnZhbGlkIGN1cnJlbmN5IHNldHRpbmdzIHByb3ZpZGVkXCIpO3RoaXMuX2RlY2ltYWxQbGFjZXM9cGFyc2VJbnQodCwxMCksdGhpcy5fc3ltYm9sTG9jYXRpb249bix0aGlzLl9zeW1ib2w9aSx0aGlzLl90aG91c2FuZHNTZXBhcmF0b3I9cix0aGlzLl9kZWNpbWFsU2VwYXJhdG9yPW99Zm9ybWF0KGUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlKXRocm93IG5ldyBybihcIkludmFsaWQgYW1vdW50IHByb3ZpZGVkXCIpO2NvbnN0IHQ9dGhpcy5fZm9ybWF0TnVtYmVyKGUpLG49dGhpcy5fZm9ybWF0Q3VycmVuY3kodCk7cmV0dXJuIGU8MD9gLSR7bn1gOm59X2Zvcm1hdE51bWJlcihlKXtjb25zdCB0PU1hdGguYWJzKGUpLFtuLGk9XCJcIl09dGhpcy5fdG9GaXhlZCh0LHRoaXMuX2RlY2ltYWxQbGFjZXMpLnNwbGl0KFwiLlwiKSxyPW4ucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZyx0aGlzLl90aG91c2FuZHNTZXBhcmF0b3IpO3JldHVybiB0aGlzLl9kZWNpbWFsUGxhY2VzPDE/cjpbcixpXS5qb2luKHRoaXMuX2RlY2ltYWxTZXBhcmF0b3IpfV9mb3JtYXRDdXJyZW5jeShlKXtyZXR1cm5cImxlZnRcIj09PXRoaXMuX3N5bWJvbExvY2F0aW9uLnRvTG93ZXJDYXNlKCk/YCR7dGhpcy5fc3ltYm9sfSR7ZX1gOmAke2V9JHt0aGlzLl9zeW1ib2x9YH1fdG9GaXhlZChlLHQpe3JldHVybigrYCR7TWF0aC5yb3VuZCgrYCR7ZX1lJHt0fWApfWUkey10fWApLnRvRml4ZWQodCl9fWxldCBQcj1jbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9zdG9yZUNvbmZpZz1lLHRoaXMuX2N1c3RvbWVyRm9ybWF0dGVyPW5ldyBicih0aGlzLl9zdG9yZUNvbmZpZy5zaG9wcGVyQ3VycmVuY3kpLHRoaXMuX3N0b3JlRm9ybWF0dGVyPW5ldyBicih0aGlzLl9zdG9yZUNvbmZpZy5jdXJyZW5jeSl9dG9DdXN0b21lckN1cnJlbmN5KGUpe2NvbnN0IHQ9dGhpcy5fc3RvcmVDb25maWcuc2hvcHBlckN1cnJlbmN5LmV4Y2hhbmdlUmF0ZTtyZXR1cm4gdGhpcy5fY3VzdG9tZXJGb3JtYXR0ZXIuZm9ybWF0KGUqdCl9dG9TdG9yZUN1cnJlbmN5KGUpe3JldHVybiB0aGlzLl9zdG9yZUZvcm1hdHRlci5mb3JtYXQoZSl9fTtQcj1mdW5jdGlvbihlLHQsbixpKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsYT1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxuKTppO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKWE9UmVmbGVjdC5kZWNvcmF0ZShlLHQsbixpKTtlbHNlIGZvcih2YXIgcz1lLmxlbmd0aC0xO3M+PTA7cy0tKShyPWVbc10pJiYoYT0obzwzP3IoYSk6bz4zP3IodCxuLGEpOnIodCxuKSl8fGEpO3JldHVybiBvPjMmJmEmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4sYSksYX0oW0NyXSxQcik7Y29uc3QgT3I9UHIsRXI9KGUsdCk9PiEhZSYmKCEhZS5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5zb21lKGU9PmUuaXNTaGlwcGluZ1JlcXVpcmVkKXx8ISghdHx8IWUubGluZUl0ZW1zLmN1c3RvbUl0ZW1zKSYmZS5saW5lSXRlbXMuY3VzdG9tSXRlbXMubGVuZ3RoPjApO3ZhciBBcixrcixUcixEcixNcix6cixOcix4cixGcjtmdW5jdGlvbiBScihlKXtyZXR1cm4gZSBpbiB6cn0hZnVuY3Rpb24oZSl7ZS5BVVRIT1JJWkU9XCJhdXRob3JpemVcIixlLkNBUFRVUkU9XCJjYXB0dXJlXCJ9KEFyfHwoQXI9e30pKSxmdW5jdGlvbihlKXtlLnBheXBhbD1cInBheXBhbFwiLGUuY2hlY2tvdXQ9XCJjaGVja291dFwiLGUuYnV5bm93PVwiYnV5bm93XCIsZS5wYXk9XCJwYXlcIixlLmluc3RhbGxtZW50PVwiaW5zdGFsbG1lbnRcIn0oa3J8fChrcj17fSkpLGZ1bmN0aW9uKGUpe2UuZ29sZD1cImdvbGRcIixlLmJsdWU9XCJibHVlXCIsZS5zaWx2ZXI9XCJzaWx2ZXJcIixlLmJsYWNrPVwiYmxhY2tcIixlLndoaXRlPVwid2hpdGVcIn0oVHJ8fChUcj17fSkpLGZ1bmN0aW9uKGUpe2UucGlsbD1cInBpbGxcIixlLnJlY3Q9XCJyZWN0XCJ9KERyfHwoRHI9e30pKSxmdW5jdGlvbihlKXtlLkVTVElNQVRFRD1cIkVTVElNQVRFRFwiLGUuRklOQUw9XCJGSU5BTFwiLGUuTk9UX0NVUlJFTlRMWV9LTk9XTj1cIk5PVF9DVVJSRU5UTFlfS05PV05cIn0oTXJ8fChNcj17fSkpLGZ1bmN0aW9uKGUpe2UuQU1FWD1cIkFNRVhcIixlLkRJU0NPVkVSPVwiRElTQ09WRVJcIixlLklOVEVSQUM9XCJJTlRFUkFDXCIsZS5KQ0I9XCJKQ0JcIixlLk1DPVwiTUFTVEVSQ0FSRFwiLGUuVklTQT1cIlZJU0FcIn0oenJ8fCh6cj17fSkpLGZ1bmN0aW9uKGUpe2UuT0ZGRVI9XCJPRkZFUlwiLGUuUEFZTUVOVF9BVVRIT1JJWkFUSU9OPVwiUEFZTUVOVF9BVVRIT1JJWkFUSU9OXCIsZS5TSElQUElOR19BRERSRVNTPVwiU0hJUFBJTkdfQUREUkVTU1wiLGUuU0hJUFBJTkdfT1BUSU9OPVwiU0hJUFBJTkdfT1BUSU9OXCJ9KE5yfHwoTnI9e30pKSxmdW5jdGlvbihlKXtlLk9GRkVSX0lOVkFMSUQ9XCJPRkZFUl9JTlZBTElEXCIsZS5QQVlNRU5UX0RBVEFfSU5WQUxJRD1cIlBBWU1FTlRfREFUQV9JTlZBTElEXCIsZS5TSElQUElOR19BRERSRVNTX0lOVkFMSUQ9XCJTSElQUElOR19BRERSRVNTX0lOVkFMSURcIixlLlNISVBQSU5HX0FERFJFU1NfVU5TRVJWSUNFQUJMRT1cIlNISVBQSU5HX0FERFJFU1NfVU5TRVJWSUNFQUJMRVwiLGUuU0hJUFBJTkdfT1BUSU9OX0lOVkFMSUQ9XCJTSElQUElOR19PUFRJT05fSU5WQUxJRFwiLGUuT1RIRVJfRVJST1I9XCJPVEhFUl9FUlJPUlwifSh4cnx8KHhyPXt9KSksZnVuY3Rpb24oZSl7ZS5JTklUSUFMSVpFPVwiSU5JVElBTElaRVwiLGUuU0hJUFBJTkdfT1BUSU9OPVwiU0hJUFBJTkdfT1BUSU9OXCIsZS5TSElQUElOR19BRERSRVNTPVwiU0hJUFBJTkdfQUREUkVTU1wiLGUuT0ZGRVI9XCJPRkZFUlwifShGcnx8KEZyPXt9KSk7dmFyIExyLEJyPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIGpye2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fZ2F0ZXdheUlkZW50aWZpZXI9ZSx0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5faXNCdXlOb3dGbG93PSExfW1hcFRvU2hpcHBpbmdBZGRyZXNzUmVxdWVzdEJvZHkoe3NoaXBwaW5nQWRkcmVzczplfSl7aWYoIWUpcmV0dXJuO2NvbnN0e2NvbXBhbnk6dD1cIlwiLHBob25lOm49XCJcIn09dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFNoaXBwaW5nQWRkcmVzcygpfHx7fTtyZXR1cm4gdGhpcy5fbWFwVG9BZGRyZXNzUmVxdWVzdEJvZHkoZSx0LG4pfW1hcFRvQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keShlKXtjb25zdHtiaWxsaW5nQWRkcmVzczp0fT1lLnBheW1lbnRNZXRob2REYXRhLmluZm87aWYoIXQpcmV0dXJuO2NvbnN0e2NvbXBhbnk6bj1cIlwiLHBob25lOmk9XCJcIixlbWFpbDpyLGN1c3RvbUZpZWxkczpvPVtdfT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0QmlsbGluZ0FkZHJlc3MoKXx8e307cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLl9tYXBUb0FkZHJlc3NSZXF1ZXN0Qm9keSh0LG4saSxvKSkse2VtYWlsOnJ8fGUuZW1haWx9KX1tYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhKGUpe3ZhciB0O2NvbnN0e3BheW1lbnRNZXRob2REYXRhOnt0b2tlbml6YXRpb25EYXRhOnt0b2tlbjpufSxpbmZvOntjYXJkTmV0d29yazppLGNhcmREZXRhaWxzOnJ9fX09ZTtpZighbil0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRUb2tlbik7cmV0dXJuIFByb21pc2UucmVzb2x2ZShPYmplY3QuYXNzaWduKHtub25jZTpuLGNhcmRfaW5mb3JtYXRpb246e3R5cGU6aSxudW1iZXI6cn19LHRoaXMuX2lzQnV5Tm93RmxvdyYme2NhcnRfaWQ6bnVsbD09PSh0PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0KCkpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlkfSkpfWdldFJlcXVpcmVkRGF0YSgpe3ZhciBlO3JldHVybiBCcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD17ZW1haWxSZXF1aXJlZDohMH07aWYoIXRoaXMuX2lzU2hpcHBpbmdBZGRyZXNzUmVxdWlyZWQoKSlyZXR1cm4gdDtjb25zdCBuPXlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFNoaXBwaW5nQ291bnRyaWVzKCksaT1udWxsPT09KGU9bi5nZXRTaGlwcGluZ0NvdW50cmllcygpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5tYXAoZT0+ZS5jb2RlKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtzaGlwcGluZ0FkZHJlc3NSZXF1aXJlZDohMCxzaGlwcGluZ0FkZHJlc3NQYXJhbWV0ZXJzOk9iamVjdC5hc3NpZ24oe3Bob25lTnVtYmVyUmVxdWlyZWQ6ITB9LGkmJnthbGxvd2VkQ291bnRyeUNvZGVzOml9KSxzaGlwcGluZ09wdGlvblJlcXVpcmVkOiEwfSl9KX1nZXRDYWxsYmFja0ludGVudHMoKXtyZXR1cm4gdGhpcy5faXNTaGlwcGluZ0FkZHJlc3NSZXF1aXJlZCgpP1tOci5PRkZFUixOci5TSElQUElOR19BRERSRVNTLE5yLlNISVBQSU5HX09QVElPTl06W05yLk9GRkVSXX1nZXRDYWxsYmFja1RyaWdnZXJzKCl7Y29uc3QgZT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlc1tcIlBJLTI4NzUuZ29vZ2xlcGF5X2NvdXBvbnNfaGFuZGxpbmdcIl18fCExO3JldHVybnthdmFpbGFibGVUcmlnZ2VyczpbRnIuSU5JVElBTElaRSxGci5TSElQUElOR19BRERSRVNTLEZyLlNISVBQSU5HX09QVElPTiwuLi5lP1tGci5PRkZFUl06W11dLGluaXRpYWxpemF0aW9uVHJpZ2dlcjpbRnIuSU5JVElBTElaRV0sYWRkcmVzc0NoYW5nZVRyaWdnZXJzOltGci5JTklUSUFMSVpFLEZyLlNISVBQSU5HX0FERFJFU1NdLHNoaXBwaW5nT3B0aW9uc0NoYW5nZVRyaWdnZXJzOltGci5TSElQUElOR19PUFRJT05dLG9mZmVyQ2hhbmdlVHJpZ2dlcnM6ZT9bRnIuT0ZGRVJdOltdfX1nZXROb25jZShlKXt2YXIgdDtjb25zdCBuPW51bGw9PT0odD10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSkuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5ub25jZTtpZighbil0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRUb2tlbik7cmV0dXJuIFByb21pc2UucmVzb2x2ZShuKX1leHRyYVBheW1lbnREYXRhKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh2b2lkIDApfWdldE1lcmNoYW50SW5mbygpe2NvbnN0e2dvb2dsZU1lcmNoYW50TmFtZTplLGdvb2dsZU1lcmNoYW50SWQ6dCxwbGF0Zm9ybVRva2VuOm59PXRoaXMuZ2V0R29vZ2xlUGF5SW5pdGlhbGl6YXRpb25EYXRhKCk7cmV0dXJue21lcmNoYW50TmFtZTplLG1lcmNoYW50SWQ6dCxhdXRoSnd0Om59fWdldFRyYW5zYWN0aW9uSW5mbygpe2xldCBlO2lmKHRoaXMuX2lzQnV5Tm93RmxvdyllPXRoaXMuX2dldEN1cnJlbmN5Q29kZU9yVGhyb3coKTtlbHNle2NvbnN0e2dldENhcnRPclRocm93OnR9PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtlPXQoKS5jdXJyZW5jeS5jb2RlfWNvbnN0IHQ9dGhpcy5nZXRHb29nbGVQYXlJbml0aWFsaXphdGlvbkRhdGEoKS5zdG9yZUNvdW50cnk7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0JiZ7Y291bnRyeUNvZGU6dH0pLHtjdXJyZW5jeUNvZGU6ZSx0b3RhbFByaWNlU3RhdHVzOk1yLkVTVElNQVRFRCx0b3RhbFByaWNlOlwiMFwifSl9Z2V0UGF5bWVudEdhdGV3YXlQYXJhbWV0ZXJzKCl7Y29uc3QgZT10aGlzLmdldEdvb2dsZVBheUluaXRpYWxpemF0aW9uRGF0YSgpLmdhdGV3YXlNZXJjaGFudElkO2lmKCFlKXRocm93IG5ldyBybihcIlVuYWJsZSB0byBwcm9jZWVkLCBnYXRld2F5TWVyY2hhbnRJZCBpcyBtaXNzaW5nLlwiKTtyZXR1cm57Z2F0ZXdheTp0aGlzLl9nYXRld2F5SWRlbnRpZmllcixnYXRld2F5TWVyY2hhbnRJZDplfX1nZXRDYXJkUGFyYW1ldGVycygpe3JldHVybnthbGxvd2VkQXV0aE1ldGhvZHM6W1wiUEFOX09OTFlcIixcIkNSWVBUT0dSQU1fM0RTXCJdLGFsbG93ZWRDYXJkTmV0d29ya3M6dGhpcy5nZXRQYXltZW50TWV0aG9kKCkuc3VwcG9ydGVkQ2FyZHMuZmlsdGVyKFJyKS5tYXAoZT0+enJbZV0pLGJpbGxpbmdBZGRyZXNzUmVxdWlyZWQ6ITAsYmlsbGluZ0FkZHJlc3NQYXJhbWV0ZXJzOntmb3JtYXQ6XCJGVUxMXCIscGhvbmVOdW1iZXJSZXF1aXJlZDohMH19fWluaXRpYWxpemUoZSx0LG4pe3JldHVybiB0aGlzLl9nZXRQYXltZW50TWV0aG9kRm49ZSx0aGlzLl9pc0J1eU5vd0Zsb3c9Qm9vbGVhbih0KSx0aGlzLl9jdXJyZW5jeUNvZGU9bix0aGlzLl9pc0J1eU5vd0Zsb3cmJnRoaXMuX2dldEN1cnJlbmN5Q29kZU9yVGhyb3coKSxQcm9taXNlLnJlc29sdmUoKX1oYW5kbGVTaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZSl7dmFyIHQsbixpLHI7cmV0dXJuIEJyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtlJiYoZS5uYW1lPWUubmFtZXx8XCJcIixlLmFkZHJlc3MxPWUuYWRkcmVzczF8fFwiXCIpO2NvbnN0IG89dGhpcy5tYXBUb1NoaXBwaW5nQWRkcmVzc1JlcXVlc3RCb2R5KHtzaGlwcGluZ0FkZHJlc3M6ZX0pO28mJih5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhvKSk7Y29uc3QgYT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkscz1hLmdldENvbnNpZ25tZW50cygpO2lmKCEobnVsbD09cz92b2lkIDA6c1swXSkpcmV0dXJuO2NvbnN0IGQ9c1swXSxjPWEuZ2V0U3RvcmVDb25maWdPclRocm93KCk7dGhpcy5fY3VycmVuY3lTZXJ2aWNlfHwodGhpcy5fY3VycmVuY3lTZXJ2aWNlPW5ldyBPcihjKSk7Y29uc3QgbD0oZC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnN8fFtdKS5tYXAodGhpcy5fZ2V0R29vZ2xlUGF5U2hpcHBpbmdPcHRpb24uYmluZCh0aGlzKSksdT1udWxsPT09KHQ9ZC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmZpbmQoZT0+ZS5pc1JlY29tbWVuZGVkKTtpZihsLmxlbmd0aCl7Y29uc3QgZT0obnVsbD09PShuPWQuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbil8fHZvaWQgMD09PW4/dm9pZCAwOm4uaWQpfHwobnVsbD09dT92b2lkIDA6dS5pZCl8fChudWxsPT09KGk9bFswXSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuaWQpO3JldHVybiEobnVsbD09PShyPWQuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbil8fHZvaWQgMD09PXI/dm9pZCAwOnIuaWQpJiZsWzBdJiYoeWllbGQgdGhpcy5oYW5kbGVTaGlwcGluZ09wdGlvbkNoYW5nZSgobnVsbD09dT92b2lkIDA6dS5pZCl8fGxbMF0uaWQpKSx7ZGVmYXVsdFNlbGVjdGVkT3B0aW9uSWQ6ZSxzaGlwcGluZ09wdGlvbnM6bH19fSl9aGFuZGxlU2hpcHBpbmdPcHRpb25DaGFuZ2UoZSl7cmV0dXJuIEJyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZihcInNoaXBwaW5nX29wdGlvbl91bnNlbGVjdGVkXCIhPT1lKXJldHVybiB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKGUpfSl9Z2V0VG90YWxQcmljZSgpe2NvbnN0e2dldENoZWNrb3V0T3JUaHJvdzplLGdldENhcnRPclRocm93OnR9PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx7ZGVjaW1hbFBsYWNlczpufT10KCkuY3VycmVuY3k7cmV0dXJuIEooZSgpLm91dHN0YW5kaW5nQmFsYW5jZSxuKS50b0ZpeGVkKG4pfWhhbmRsZUNvdXBvbnMoZSl7cmV0dXJuIEJyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtyZWRlbXB0aW9uQ29kZXM6dD1bXX09ZSx7b2ZmZXJzOm59PXRoaXMuZ2V0QXBwbGllZENvdXBvbnMoKTtsZXQgaTtyZXR1cm4geWllbGQgdC5yZWR1Y2UoKGUsdCk9PkJyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZih5aWVsZCBlLG4uc29tZSgoe3JlZGVtcHRpb25Db2RlOmV9KT0+ZT09PXQpKXJldHVybjtjb25zdCByPXlpZWxkIHRoaXMuYXBwbHlDb3Vwb24odCk7ciYmKGk9cil9KSxQcm9taXNlLnJlc29sdmUoKSkseWllbGQgbi5yZWR1Y2UoKGUsbik9PkJyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCBlLHQuaW5jbHVkZXMobi5yZWRlbXB0aW9uQ29kZSl8fCh5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUNvdXBvbihuLnJlZGVtcHRpb25Db2RlKSl9KSxQcm9taXNlLnJlc29sdmUoKSkse25ld09mZmVySW5mbzp0aGlzLmdldEFwcGxpZWRDb3Vwb25zKCksZXJyb3I6aX19KX1nZXRBcHBsaWVkQ291cG9ucygpe2NvbnN0IGU9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHtjb3Vwb25zOnR9PWUuZ2V0Q2hlY2tvdXQoKXx8e307cmV0dXJue29mZmVyczoodHx8W10pLm1hcChlPT57Y29uc3R7ZGlzcGxheU5hbWU6dCxjb2RlOm59PWU7cmV0dXJue3JlZGVtcHRpb25Db2RlOm4sZGVzY3JpcHRpb246dH19KX19YXBwbHlDb3Vwb24oZSl7cmV0dXJuIEJyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtsZXQgdDt0cnl7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5hcHBseUNvdXBvbihlKX1jYXRjaChlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEVycm9yJiYodD17cmVhc29uOnhyLk9GRkVSX0lOVkFMSUQsbWVzc2FnZTplLm1lc3NhZ2UsaW50ZW50OkZyLk9GRkVSfSksdH19KX1nZXRHb29nbGVQYXlJbml0aWFsaXphdGlvbkRhdGEoKXtyZXR1cm4gcXQodGhpcy5nZXRQYXltZW50TWV0aG9kKCkuaW5pdGlhbGl6YXRpb25EYXRhLCgpPT5uZXcgcm4oXCJNaXNzaW5nIGluaXRpYWxpemF0aW9uIGRhdGEuXCIpKX1nZXRQYXltZW50TWV0aG9kKCl7cmV0dXJuIHF0KHRoaXMuX2dldFBheW1lbnRNZXRob2RGbiwoKT0+bmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCkpKCl9Z2V0R2F0ZXdheUlkZW50aWZpZXIoKXtyZXR1cm4gdGhpcy5fZ2F0ZXdheUlkZW50aWZpZXJ9c2V0R2F0ZXdheUlkZW50aWZpZXIoZSl7dGhpcy5fZ2F0ZXdheUlkZW50aWZpZXI9ZXx8dGhpcy5nZXRHYXRld2F5SWRlbnRpZmllcigpfV9pc1NoaXBwaW5nQWRkcmVzc1JlcXVpcmVkKCl7Y29uc3R7Z2V0Q2FydE9yVGhyb3c6ZSxnZXRTdG9yZUNvbmZpZzp0LGdldFNoaXBwaW5nQWRkcmVzczpufT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7cmV0dXJuIHZvaWQgMD09PW4oKSYmRXIoZSgpLHQoKSl9X21hcFRvQWRkcmVzc1JlcXVlc3RCb2R5KGUsdCxuLGkpe2NvbnN0e25hbWU6cixhZGRyZXNzMTpvLGFkZHJlc3MyOmEsYWRkcmVzczM6cyxsb2NhbGl0eTpkLGFkbWluaXN0cmF0aXZlQXJlYTpjLGNvdW50cnlDb2RlOmwscG9zdGFsQ29kZTp1LHBob25lTnVtYmVyOmh9PWUsW3AsbV09dGhpcy5fZ2V0Rmlyc3RBbmRMYXN0TmFtZShyKTtyZXR1cm57Zmlyc3ROYW1lOnAsbGFzdE5hbWU6bSxjb21wYW55OnQsYWRkcmVzczE6byxhZGRyZXNzMjpgJHthfSAke3N9YC50cmltKCksY2l0eTpkfHxjLHN0YXRlT3JQcm92aW5jZTpjLHN0YXRlT3JQcm92aW5jZUNvZGU6Yyxjb3VudHJ5Q29kZTpsLHBvc3RhbENvZGU6dSxwaG9uZTpofHxuLGN1c3RvbUZpZWxkczppfHxbXX19X2dldEZpcnN0QW5kTGFzdE5hbWUoZSl7Y29uc3QgdD1lLnNwbGl0KFwiIFwiKTtyZXR1cm4gMT09PXQubGVuZ3RoP1tlLFwiXCJdOlt0LnNsaWNlKDAsLTEpLmpvaW4oXCIgXCIpLHRbdC5sZW5ndGgtMV1dfV9nZXRDdXJyZW5jeUNvZGVPclRocm93KCl7cmV0dXJuIHF0KHRoaXMuX2N1cnJlbmN5Q29kZSwoKT0+bmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKSl9X2dldEdvb2dsZVBheVNoaXBwaW5nT3B0aW9uKHtpZDplLGNvc3Q6dCxkZXNjcmlwdGlvbjpuLGFkZGl0aW9uYWxEZXNjcmlwdGlvbjppfSl7dmFyIHI7Y29uc3Qgbz1udWxsPT09KHI9dGhpcy5fY3VycmVuY3lTZXJ2aWNlKXx8dm9pZCAwPT09cj92b2lkIDA6ci50b0N1c3RvbWVyQ3VycmVuY3kodCk7cmV0dXJuIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzW1wiUEktMzU0MC5nb29nbGVwYXlfbmV3X3NoaXBwaW5nX29wdGlvbnNfZGVzY3JpcHRpb25cIl0/e2lkOmUsbGFiZWw6YCR7b3x8dH0gJHtufWAsZGVzY3JpcHRpb246aX06e2lkOmUsbGFiZWw6bixkZXNjcmlwdGlvbjpvfHx0fX19ZnVuY3Rpb24gVXIoZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcInN0YXR1c0NvZGVcImluIGV9ZnVuY3Rpb24gcXIoZSl7cmV0dXJuIE9iamVjdC52YWx1ZXMoTHIpLmluY2x1ZGVzKGUpfSFmdW5jdGlvbihlKXtlLkFEWUVOX1YyPVwiZ29vZ2xlcGF5YWR5ZW52MlwiLGUuQURZRU5fVjM9XCJnb29nbGVwYXlhZHllbnYzXCIsZS5BVVRIT1JJWkVfTkVUPVwiZ29vZ2xlcGF5YXV0aG9yaXplbmV0XCIsZS5CTlo9XCJnb29nbGVwYXlibnpcIixlLkJSQUlOVFJFRT1cImdvb2dsZXBheWJyYWludHJlZVwiLGUuUEFZUEFMX0NPTU1FUkNFPVwiZ29vZ2xlcGF5cGF5cGFsY29tbWVyY2VcIixlLkJJR0NPTU1FUkNFX1BBWU1FTlRTPVwiZ29vZ2xlcGF5X2JpZ2NvbW1lcmNlX3BheW1lbnRzXCIsZS5DSEVDS09VVF9DT009XCJnb29nbGVwYXljaGVja291dGNvbVwiLGUuQ1lCRVJTT1VSQ0VfVjI9XCJnb29nbGVwYXljeWJlcnNvdXJjZXYyXCIsZS5PUkJJVEFMPVwiZ29vZ2xlcGF5b3JiaXRhbFwiLGUuU1RSSVBFPVwiZ29vZ2xlcGF5c3RyaXBlXCIsZS5TVFJJUEVfVVBFPVwiZ29vZ2xlcGF5c3RyaXBldXBlXCIsZS5TVFJJUEVfT0NTPVwiZ29vZ2xlcGF5c3RyaXBlb2NzXCIsZS5XT1JMRFBBWV9BQ0NFU1M9XCJnb29nbGVwYXl3b3JsZHBheWFjY2Vzc1wiLGUuVERfT05MSU5FX01BUlQ9XCJnb29nbGVwYXl0ZG9ubGluZW1hcnRcIn0oTHJ8fChMcj17fSkpO3ZhciBWcj1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBHcntjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yPXR9aW5pdGlhbGl6ZShlKXt2YXIgdDtyZXR1cm4gVnIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCEobnVsbD09ZT92b2lkIDA6ZS5tZXRob2RJZCl8fCFxcihlLm1ldGhvZElkKSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGlzIG5vdCBhIHZhbGlkIGtleS4nKTt0aGlzLl9tZXRob2RJZD1lLm1ldGhvZElkO2NvbnN0IG49ZVt0aGlzLl9nZXRNZXRob2RJZCgpXTtpZighbil0aHJvdyBuZXcgcm4oXCJVbmFibGUgdG8gcHJvY2VlZCB3aXRob3V0IHZhbGlkIG9wdGlvbnMuXCIpO2xldCBpLHI9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO3RyeXtpPXIuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codGhpcy5fZ2V0TWV0aG9kSWQoKSl9Y2F0Y2goZSl7cj15aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKHRoaXMuX2dldE1ldGhvZElkKCkpLGk9ci5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyh0aGlzLl9nZXRNZXRob2RJZCgpKX10cnl7eWllbGQgdGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5pbml0aWFsaXplKCgpPT5pLHRoaXMuX2dldEdvb2dsZVBheUNsaWVudE9wdGlvbnMobnVsbD09PSh0PWkuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5zdG9yZUNvdW50cnkpKX1jYXRjaChlKXtyZXR1cm59dGhpcy5fYWRkUGF5bWVudEJ1dHRvbihuKX0pfXNpZ25Jbigpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgb24oJ0luIG9yZGVyIHRvIHNpZ24gaW4gdmlhIEdvb2dsZSBQYXksIHRoZSBzaG9wcGVyIG11c3QgY2xpY2sgb24gXCJHb29nbGUgUGF5XCIgYnV0dG9uLicpKX1zaWduT3V0KCl7dmFyIGU7cmV0dXJuIFZyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PW51bGw9PT0oZT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudElkKCkpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnByb3ZpZGVySWQ7dCYmKHlpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3Iuc2lnbk91dCh0KSl9KX1leGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KGUpe3ZhciB0O3JldHVybiBudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrKXx8dm9pZCAwPT09dHx8dC5jYWxsKGUpLFByb21pc2UucmVzb2x2ZSgpfWRlaW5pdGlhbGl6ZSgpe3ZhciBlO3JldHVybiBudWxsPT09KGU9dGhpcy5fcGF5bWVudEJ1dHRvbil8fHZvaWQgMD09PWV8fGUucmVtb3ZlKCksdGhpcy5fcGF5bWVudEJ1dHRvbj12b2lkIDAsdGhpcy5fbWV0aG9kSWQ9dm9pZCAwLFByb21pc2UucmVzb2x2ZSgpfV9nZXRHb29nbGVQYXlDbGllbnRPcHRpb25zKGUpe3JldHVybntwYXltZW50RGF0YUNhbGxiYWNrczp7b25QYXltZW50RGF0YUNoYW5nZWQ6KHtjYWxsYmFja1RyaWdnZXI6dCxzaGlwcGluZ0FkZHJlc3M6bixzaGlwcGluZ09wdGlvbkRhdGE6aSxvZmZlckRhdGE6cn0pPT5Wcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7YXZhaWxhYmxlVHJpZ2dlcnM6byxhZGRyZXNzQ2hhbmdlVHJpZ2dlcnM6YSxzaGlwcGluZ09wdGlvbnNDaGFuZ2VUcmlnZ2VyczpzLG9mZmVyQ2hhbmdlVHJpZ2dlcnM6ZH09dGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5nZXRDYWxsYmFja1RyaWdnZXJzKCk7aWYoIW8uaW5jbHVkZXModCkpcmV0dXJuO2NvbnN0IGM9YS5pbmNsdWRlcyh0KT95aWVsZCB0aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yLmhhbmRsZVNoaXBwaW5nQWRkcmVzc0NoYW5nZShuKTp2b2lkIDA7cy5pbmNsdWRlcyh0KSYmKHlpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3IuaGFuZGxlU2hpcHBpbmdPcHRpb25DaGFuZ2UoaS5pZCkpO2NvbnN0e25ld09mZmVySW5mbzpsLGVycm9yOnV9PWQuaW5jbHVkZXModCk/eWllbGQgdGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5oYW5kbGVDb3Vwb25zKHIpOnt9LGg9dTt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dCgpO2NvbnN0IHA9dGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5nZXRUb3RhbFByaWNlKCkse2NvZGU6bX09dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuY3VycmVuY3k7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtuZXdUcmFuc2FjdGlvbkluZm86T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUmJntjb3VudHJ5Q29kZTplfSkse2N1cnJlbmN5Q29kZTptLHRvdGFsUHJpY2VTdGF0dXM6TXIuRklOQUwsdG90YWxQcmljZTpwfSl9LGMmJntuZXdTaGlwcGluZ09wdGlvblBhcmFtZXRlcnM6Y30pLGwmJntuZXdPZmZlckluZm86bH0pLGgmJntlcnJvcjpofSl9KX19fV9hZGRQYXltZW50QnV0dG9uKHtjb250YWluZXI6ZSxidXR0b25Db2xvcjp0LGJ1dHRvblR5cGU6bixvbkNsaWNrOmksb25FcnJvcjpyfSl7dmFyIG87dGhpcy5fcGF5bWVudEJ1dHRvbj1udWxsIT09KG89dGhpcy5fcGF5bWVudEJ1dHRvbikmJnZvaWQgMCE9PW8/bzp0aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yLmFkZFBheW1lbnRCdXR0b24oZSx7YnV0dG9uQ29sb3I6bnVsbCE9dD90OlwiZGVmYXVsdFwiLGJ1dHRvblR5cGU6bnVsbCE9bj9uOlwicGxhaW5cIixvbkNsaWNrOnRoaXMuX2hhbmRsZUNsaWNrKHIsaSl9KX1faGFuZGxlQ2xpY2soZSx0KXtyZXR1cm4gbj0+VnIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe24ucHJldmVudERlZmF1bHQoKSx0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0KCk7dHJ5e3lpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3IuaW5pdGlhbGl6ZVdpZGdldCgpLHlpZWxkIHRoaXMuX2ludGVyYWN0V2l0aFBheW1lbnRTaGVldCgpfWNhdGNoKHQpe2xldCBuPXQ7aWYoVXIodCkpe2lmKFwiQ0FOQ0VMRURcIj09PXQuc3RhdHVzQ29kZSl0aHJvdyBuZXcgTW47bj1uZXcgTGkoSlNPTi5zdHJpbmdpZnkodCkpfXRocm93IG51bGw9PWV8fGUobmV3IExpKFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmVxdWVzdGluZyB5b3VyIEdvb2dsZSBQYXkgcGF5bWVudCBkZXRhaWxzLlwiKSksbn19KX1faW50ZXJhY3RXaXRoUGF5bWVudFNoZWV0KCl7cmV0dXJuIFZyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBlPXlpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3Iuc2hvd1BheW1lbnRTaGVldCgpLHQ9dGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5tYXBUb0JpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkoZSksbj10aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yLm1hcFRvU2hpcHBpbmdBZGRyZXNzUmVxdWVzdEJvZHkoZSksaT1cIi9lbWJlZGRlZC1jaGVja291dFwiPT09d2luZG93LmxvY2F0aW9uLnBhdGhuYW1lP3RoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5saW5rcy5zaXRlTGluazp2b2lkIDA7dCYmKHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3ModCkpLG4mJih5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhuKSkseWllbGQgdGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5zZXRFeHRlcm5hbENoZWNrb3V0Rm9ybSh0aGlzLl9nZXRNZXRob2RJZCgpLGUsaSl9KX1fZ2V0TWV0aG9kSWQoKXtyZXR1cm4gcXQodGhpcy5fbWV0aG9kSWQsKCk9Pm5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKX19dmFyIEhyPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzICRye2NvbnN0cnVjdG9yKGUsdCxuLGkpe3RoaXMuX3NjcmlwdExvYWRlcj1lLHRoaXMuX2dhdGV3YXk9dCx0aGlzLl9yZXF1ZXN0U2VuZGVyPW4sdGhpcy5fZm9ybVBvc3Rlcj1pLHRoaXMuX2Jhc2VSZXF1ZXN0PXthcGlWZXJzaW9uOjIsYXBpVmVyc2lvbk1pbm9yOjB9fWluaXRpYWxpemUoZSx0LG4saSl7cmV0dXJuIEhyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0aGlzLl9wYXltZW50c0NsaWVudD15aWVsZCB0aGlzLl9zY3JpcHRMb2FkZXIuZ2V0R29vZ2xlUGF5bWVudHNDbGllbnQoZSgpLmNvbmZpZy50ZXN0TW9kZSx0KSx5aWVsZCB0aGlzLl9nYXRld2F5LmluaXRpYWxpemUoZSxuLGkpLHRoaXMuX2J1aWxkQnV0dG9uUGF5bG9hZHMoKX0pfWluaXRpYWxpemVXaWRnZXQoKXtyZXR1cm4gSHIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2J1aWxkV2lkZ2V0UGF5bG9hZHMoKSx5aWVsZCB0aGlzLl9kZXRlcm1pbmVSZWFkaW5lc3NUb1BheSgpLHRoaXMuX3ByZWZldGNoR29vZ2xlUGF5bWVudERhdGEoKX0pfWdldE5vbmNlKGUpe3JldHVybiB0aGlzLl9nYXRld2F5LmdldE5vbmNlKGUpfWV4dHJhUGF5bWVudERhdGEoKXtyZXR1cm4gSHIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9nYXRld2F5LmV4dHJhUGF5bWVudERhdGEoKX0pfWFkZFBheW1lbnRCdXR0b24oZSx0KXtjb25zdCBuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2V9YCk7aWYoIW4pcmV0dXJuO2NvbnN0IGk9dGhpcy5fZ2V0UGF5bWVudHNDbGllbnQoKS5jcmVhdGVCdXR0b24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHthbGxvd2VkUGF5bWVudE1ldGhvZHM6W3RoaXMuX2dldEJhc2VDYXJkUGF5bWVudE1ldGhvZCgpXX0pKTtyZXR1cm4gbi5hcHBlbmRDaGlsZChpKX1zaG93UGF5bWVudFNoZWV0KCl7cmV0dXJuIEhyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBlPXRoaXMuX2dldFBheW1lbnREYXRhUmVxdWVzdCgpO3JldHVybiB0aGlzLl9nZXRQYXltZW50c0NsaWVudCgpLmxvYWRQYXltZW50RGF0YShlKX0pfXNldEV4dGVybmFsQ2hlY2tvdXRYaHIoZSx0KXtyZXR1cm4gSHIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9zZXRFeHRlcm5hbENoZWNrb3V0KGUsdCl9KX1zZXRFeHRlcm5hbENoZWNrb3V0Rm9ybShlLHQsbil7cmV0dXJuIEhyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fc2V0RXh0ZXJuYWxDaGVja291dChlLHQsITAsbil9KX1tYXBUb0JpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkoZSl7cmV0dXJuIHRoaXMuX2dhdGV3YXkubWFwVG9CaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5KGUpfW1hcFRvU2hpcHBpbmdBZGRyZXNzUmVxdWVzdEJvZHkoZSl7cmV0dXJuIHRoaXMuX2dhdGV3YXkubWFwVG9TaGlwcGluZ0FkZHJlc3NSZXF1ZXN0Qm9keShlKX1wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlLHQpe3JldHVyblwicHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb25cImluIHRoaXMuX2dhdGV3YXk/dGhpcy5fZ2F0ZXdheS5wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlLHQpOlByb21pc2UucmVqZWN0KGUpfXNpZ25PdXQoZSl7cmV0dXJuIEhyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9yZXF1ZXN0U2VuZGVyLmdldChgL3JlbW90ZS1jaGVja291dC8ke2V9L3NpZ25vdXRgKX0pfWdldENhbGxiYWNrVHJpZ2dlcnMoKXtyZXR1cm4gdGhpcy5fZ2F0ZXdheS5nZXRDYWxsYmFja1RyaWdnZXJzKCl9aGFuZGxlU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGUpe3JldHVybiBIcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2dhdGV3YXkuaGFuZGxlU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGUpfSl9aGFuZGxlU2hpcHBpbmdPcHRpb25DaGFuZ2UoZSl7cmV0dXJuIEhyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9nYXRld2F5LmhhbmRsZVNoaXBwaW5nT3B0aW9uQ2hhbmdlKGUpfSl9aGFuZGxlQ291cG9ucyhlKXtyZXR1cm4gSHIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9nYXRld2F5LmhhbmRsZUNvdXBvbnMoZSl9KX1nZXRUb3RhbFByaWNlKCl7cmV0dXJuIHRoaXMuX2dhdGV3YXkuZ2V0VG90YWxQcmljZSgpfV9zZXRFeHRlcm5hbENoZWNrb3V0KGUsdCxuPSExLGkpe3JldHVybiBIcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgcj1cIi9jaGVja291dC5waHBcIixvPU9iamVjdC5hc3NpZ24oe2FjdGlvbjpcInNldF9leHRlcm5hbF9jaGVja291dFwiLHByb3ZpZGVyOmV9LHlpZWxkIHRoaXMuX2dhdGV3YXkubWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YSh0KSk7aWYobilyZXR1cm4gbmV3IFByb21pc2UoZT0+e3RoaXMuX2Zvcm1Qb3N0ZXIucG9zdEZvcm0oaT9gJHtpfS9jaGVja291dGA6cixPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbykse2NhcmRfaW5mb3JtYXRpb246SlNPTi5zdHJpbmdpZnkoby5jYXJkX2luZm9ybWF0aW9uKX0pLGUpfSk7eWllbGQgdGhpcy5fcmVxdWVzdFNlbmRlci5wb3N0KHIse2hlYWRlcnM6T2JqZWN0LmFzc2lnbih7QWNjZXB0OlwidGV4dC9odG1sXCIsXCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwifSxuaSksYm9keTpvfSl9KX1fcHJlZmV0Y2hHb29nbGVQYXltZW50RGF0YSgpe2NvbnN0IGU9dGhpcy5fZ2V0UGF5bWVudERhdGFSZXF1ZXN0KCk7ZS50cmFuc2FjdGlvbkluZm89dGhpcy5fZ2F0ZXdheS5nZXRUcmFuc2FjdGlvbkluZm8oKSx0aGlzLl9nZXRQYXltZW50c0NsaWVudCgpLnByZWZldGNoUGF5bWVudERhdGEoZSl9X2RldGVybWluZVJlYWRpbmVzc1RvUGF5KCl7cmV0dXJuIEhyKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7Y29uc3R7cmVzdWx0OmV9PXlpZWxkIHRoaXMuX2dldFBheW1lbnRzQ2xpZW50KCkuaXNSZWFkeVRvUGF5KHRoaXMuX2dldElzUmVhZHlUb1BheVJlcXVlc3QoKSk7aWYoITE9PT1lKXRocm93IG5ldyBMaShcIkdvb2dsZSBQYXkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBkZXZpY2UgYW5kIGJyb3dzZXIsIHBsZWFzZSB0cnkgYW5vdGhlciBwYXltZW50IG1ldGhvZC5cIil9Y2F0Y2goZSl7aWYoZSBpbnN0YW5jZW9mIExpKXRocm93IGU7dGhyb3cgbmV3IExpfX0pfV9idWlsZEJ1dHRvblBheWxvYWRzKCl7dGhpcy5fYmFzZUNhcmRQYXltZW50TWV0aG9kPXt0eXBlOlwiQ0FSRFwiLHBhcmFtZXRlcnM6dGhpcy5fZ2F0ZXdheS5nZXRDYXJkUGFyYW1ldGVycygpfX1fYnVpbGRXaWRnZXRQYXlsb2Fkcygpe3JldHVybiBIcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgZT10aGlzLl9nZXRCYXNlQ2FyZFBheW1lbnRNZXRob2QoKTt0aGlzLl9jYXJkUGF5bWVudE1ldGhvZD1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3Rva2VuaXphdGlvblNwZWNpZmljYXRpb246e3R5cGU6XCJQQVlNRU5UX0dBVEVXQVlcIixwYXJhbWV0ZXJzOnlpZWxkIHRoaXMuX2dhdGV3YXkuZ2V0UGF5bWVudEdhdGV3YXlQYXJhbWV0ZXJzKCl9fSksdGhpcy5fcGF5bWVudERhdGFSZXF1ZXN0PU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5fYmFzZVJlcXVlc3QpLHthbGxvd2VkUGF5bWVudE1ldGhvZHM6W3RoaXMuX2NhcmRQYXltZW50TWV0aG9kXSx0cmFuc2FjdGlvbkluZm86dGhpcy5fZ2F0ZXdheS5nZXRUcmFuc2FjdGlvbkluZm8oKSxtZXJjaGFudEluZm86dGhpcy5fZ2F0ZXdheS5nZXRNZXJjaGFudEluZm8oKX0pLHlpZWxkIHRoaXMuX2dhdGV3YXkuZ2V0UmVxdWlyZWREYXRhKCkpLHtjYWxsYmFja0ludGVudHM6dGhpcy5fZ2F0ZXdheS5nZXRDYWxsYmFja0ludGVudHMoKSxvZmZlckluZm86dGhpcy5fZ2F0ZXdheS5nZXRBcHBsaWVkQ291cG9ucygpfSksdGhpcy5faXNSZWFkeVRvUGF5UmVxdWVzdD1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5fYmFzZVJlcXVlc3QpLHthbGxvd2VkUGF5bWVudE1ldGhvZHM6W2VdfSl9KX1fZ2V0QmFzZUNhcmRQYXltZW50TWV0aG9kKCl7cmV0dXJuIHRoaXMuX2dldE9yVGhyb3codGhpcy5fYmFzZUNhcmRQYXltZW50TWV0aG9kKX1fZ2V0UGF5bWVudERhdGFSZXF1ZXN0KCl7cmV0dXJuIHRoaXMuX2dldE9yVGhyb3codGhpcy5fcGF5bWVudERhdGFSZXF1ZXN0KX1fZ2V0SXNSZWFkeVRvUGF5UmVxdWVzdCgpe3JldHVybiB0aGlzLl9nZXRPclRocm93KHRoaXMuX2lzUmVhZHlUb1BheVJlcXVlc3QpfV9nZXRQYXltZW50c0NsaWVudCgpe3JldHVybiB0aGlzLl9nZXRPclRocm93KHRoaXMuX3BheW1lbnRzQ2xpZW50KX1fZ2V0T3JUaHJvdyhlKXtyZXR1cm4gcXQoZSwoKT0+bmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCkpfX1jbGFzcyBXcntjb25zdHJ1Y3RvcihlKXt0aGlzLl9zY3JpcHRMb2FkZXI9ZSx0aGlzLl93aW5kb3c9d2luZG93fWdldEdvb2dsZVBheW1lbnRzQ2xpZW50KGU9ITEsdCl7cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe2lmKHlpZWxkIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkU2NyaXB0KFwiaHR0cHM6Ly9wYXkuZ29vZ2xlLmNvbS9ncC9wL2pzL3BheS5qc1wiKSwhdGhpcy5fd2luZG93Lmdvb2dsZSl0aHJvdyBuZXcgWHQ7cmV0dXJuIHZvaWQgMD09PXRoaXMuX3BheW1lbnRzQ2xpZW50JiYodGhpcy5fcGF5bWVudHNDbGllbnQ9bmV3IHRoaXMuX3dpbmRvdy5nb29nbGUucGF5bWVudHMuYXBpLlBheW1lbnRzQ2xpZW50KE9iamVjdC5hc3NpZ24oe2Vudmlyb25tZW50OmU/XCJURVNUXCI6XCJQUk9EVUNUSU9OXCJ9LG51bGwhPXQ/dDp7fSkpKSx0aGlzLl9wYXltZW50c0NsaWVudH0sbmV3KChyPXZvaWQgMCl8fChyPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoby5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKG8udGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2Ygcj9uOm5ldyByKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKG89by5hcHBseShuLGl8fFtdKSkubmV4dCgpKX0pO3ZhciBuLGkscixvfX1mdW5jdGlvbiBZcigpe3JldHVybiBuZXcgV3IoYSgpKX1jb25zdCBLcj1ubihlPT57Y29uc3QgdD1uKCk7cmV0dXJuIG5ldyBHcihlLG5ldyAkcihZcigpLG5ldyBqcihcImFkeWVuXCIsZSksdCxFZSgpKSl9LFt7aWQ6XCJnb29nbGVwYXlhZHllbnYyXCJ9XSksSnI9bm4oZT0+e2NvbnN0IHQ9bigpO3JldHVybiBuZXcgR3IoZSxuZXcgJHIoWXIoKSxuZXcganIoXCJhZHllblwiLGUpLHQsRWUoKSkpfSxbe2lkOlwiZ29vZ2xlcGF5YWR5ZW52M1wifV0pO2NsYXNzIFpyIGV4dGVuZHMganJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJhdXRob3JpemVuZXRcIixlKX1tYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhKGUpe2NvbnN0IHQ9T2JqZWN0LmNyZWF0ZShudWxsLHttYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhOntnZXQ6KCk9PnN1cGVyLm1hcFRvRXh0ZXJuYWxDaGVja291dERhdGF9fSk7cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe2NvbnN0IG49eWllbGQgdC5tYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhLmNhbGwodGhpcyxlKTtyZXR1cm4gbi5ub25jZT1idG9hKG4ubm9uY2UpLG59LG5ldygocj12b2lkIDApfHwocj1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBhKGUpe3RyeXtkKG8ubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChvLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIHI/bjpuZXcgcihmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChvPW8uYXBwbHkobixpfHxbXSkpLm5leHQoKSl9KTt2YXIgbixpLHIsb31nZXRQYXltZW50R2F0ZXdheVBhcmFtZXRlcnMoKXtjb25zdCBlPXRoaXMuZ2V0R29vZ2xlUGF5SW5pdGlhbGl6YXRpb25EYXRhKCk7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKCFmdW5jdGlvbihlKXtyZXR1cm5cInBheW1lbnRHYXRld2F5SWRcImluIGV9KGUpKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCl9KGUpLHtnYXRld2F5OnRoaXMuZ2V0R2F0ZXdheUlkZW50aWZpZXIoKSxnYXRld2F5TWVyY2hhbnRJZDplLnBheW1lbnRHYXRld2F5SWR9fX1jb25zdCBRcj1ubihlPT5uZXcgR3IoZSxuZXcgJHIoWXIoKSxuZXcgWnIoZSksbigpLEVlKCkpKSxbe2lkOlwiZ29vZ2xlcGF5YXV0aG9yaXplbmV0XCJ9XSksWHI9ZT0+XCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcImJvZHlcImluIGU7ZnVuY3Rpb24gZW8oZSl7aWYoIWZ1bmN0aW9uKGUpe3JldHVyblwiY2hlY2tvdXRjb21rZXlcImluIGV9KGUpKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCl9dmFyIHRvPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIG5vIGV4dGVuZHMganJ7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihcImNoZWNrb3V0bHRkXCIsZSksdGhpcy5fcmVxdWVzdFNlbmRlcj10fXByb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZSgodCxuKT0+e2lmKFhyKGUpJiZmdW5jdGlvbihlKXt2YXIgdDtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuITE7Y29uc3Qgbj1lO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZihudWxsPT09KHQ9bi50aHJlZV9kc19yZXN1bHQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmFjc191cmwpJiZcInN0cmluZ1wiPT10eXBlb2Ygbi50aHJlZV9kc19yZXN1bHQuY29kZX0oZS5ib2R5KSYmXCJ0aHJlZV9kX3NlY3VyZV9yZXF1aXJlZFwiPT09ZS5ib2R5LnRocmVlX2RzX3Jlc3VsdC5jb2RlKXJldHVybiB3aW5kb3cubG9jYXRpb24uYXNzaWduKGUuYm9keS50aHJlZV9kc19yZXN1bHQuYWNzX3VybCk7bihlKX0pfW1hcFRvRXh0ZXJuYWxDaGVja291dERhdGEoZSl7Y29uc3QgdD1PYmplY3QuY3JlYXRlKG51bGwse21hcFRvRXh0ZXJuYWxDaGVja291dERhdGE6e2dldDooKT0+c3VwZXIubWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YX19KTtyZXR1cm4gdG8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49eWllbGQgdC5tYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhLmNhbGwodGhpcyxlKTtsZXQgaTt0cnl7aT1KU09OLnBhcnNlKG4ubm9uY2UpfWNhdGNoKGUpe3Rocm93IG5ldyBybihcIlVuYWJsZSB0byBwYXJzZSByZXNwb25zZSBmcm9tIEdvb2dsZSBQYXkuXCIpfXJldHVybiBmdW5jdGlvbihlKXtpZighZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcInByb3RvY29sVmVyc2lvblwiaW4gZSYmXCJzaWduYXR1cmVcImluIGUmJlwic2lnbmVkTWVzc2FnZVwiaW4gZX0oZSkpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50VG9rZW4pfShpKSxuLm5vbmNlPXlpZWxkIHRoaXMuX3Rva2VuaXplKGkpLG59KX1nZXRQYXltZW50R2F0ZXdheVBhcmFtZXRlcnMoKXtjb25zdCBlPXRoaXMuZ2V0R29vZ2xlUGF5SW5pdGlhbGl6YXRpb25EYXRhKCk7cmV0dXJuIGVvKGUpLHtnYXRld2F5OnRoaXMuZ2V0R2F0ZXdheUlkZW50aWZpZXIoKSxnYXRld2F5TWVyY2hhbnRJZDplLmNoZWNrb3V0Y29ta2V5fX1fdG9rZW5pemUoZSl7cmV0dXJuIHRvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuZ2V0UGF5bWVudE1ldGhvZCgpLmNvbmZpZy50ZXN0TW9kZT9cImh0dHBzOi8vYXBpLnNhbmRib3guY2hlY2tvdXQuY29tL3Rva2Vuc1wiOlwiaHR0cHM6Ly9hcGkuY2hlY2tvdXQuY29tL3Rva2Vuc1wiLG49dGhpcy5nZXRHb29nbGVQYXlJbml0aWFsaXphdGlvbkRhdGEoKTtlbyhuKTtjb25zdHtib2R5Oml9PXlpZWxkIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdCh0LHtjcmVkZW50aWFsczohMSxib2R5Ont0eXBlOlwiZ29vZ2xlcGF5XCIsdG9rZW5fZGF0YTplfSxoZWFkZXJzOntBdXRob3JpemF0aW9uOm4uY2hlY2tvdXRjb21rZXksXCJDb250ZW50LVR5cGVcIjp0aS5Kc29uLFwiWC1YU1JGLVRPS0VOXCI6bnVsbH19KTtyZXR1cm4gaS50b2tlbn0pfX1jb25zdCBpbz1ubihlPT57Y29uc3QgdD1uKCk7cmV0dXJuIG5ldyBHcihlLG5ldyAkcihZcigpLG5ldyBubyhlLHQpLHQsRWUoKSkpfSxbe2lkOlwiZ29vZ2xlcGF5Y2hlY2tvdXRjb21cIn1dKTtjbGFzcyBybyBleHRlbmRzIGpye2NvbnN0cnVjdG9yKGUpe3N1cGVyKFwiY3liZXJzb3VyY2VcIixlKX1tYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhKGUpe2NvbnN0IHQ9T2JqZWN0LmNyZWF0ZShudWxsLHttYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhOntnZXQ6KCk9PnN1cGVyLm1hcFRvRXh0ZXJuYWxDaGVja291dERhdGF9fSk7cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe2NvbnN0IG49eWllbGQgdC5tYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhLmNhbGwodGhpcyxlKTtyZXR1cm4gbi5ub25jZT1idG9hKG4ubm9uY2UpLG59LG5ldygocj12b2lkIDApfHwocj1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBhKGUpe3RyeXtkKG8ubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChvLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIHI/bjpuZXcgcihmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChvPW8uYXBwbHkobixpfHxbXSkpLm5leHQoKSl9KTt2YXIgbixpLHIsb319Y29uc3Qgb289bm4oZT0+bmV3IEdyKGUsbmV3ICRyKFlyKCksbmV3IHJvKGUpLG4oKSxFZSgpKSksW3tpZDpcImdvb2dsZXBheWN5YmVyc291cmNldjJcIn1dKSxhbz1ubihlPT5uZXcgR3IoZSxuZXcgJHIoWXIoKSxuZXcgcm8oZSksbigpLEVlKCkpKSxbe2lkOlwiZ29vZ2xlcGF5Ym56XCJ9XSk7Y2xhc3Mgc28gZXh0ZW5kcyBqcntjb25zdHJ1Y3RvcihlKXtzdXBlcihcImNoYXNlXCIsZSl9bWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YShlKXtjb25zdCB0PU9iamVjdC5jcmVhdGUobnVsbCx7bWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YTp7Z2V0OigpPT5zdXBlci5tYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhfX0pO3JldHVybiBuPXRoaXMsaT12b2lkIDAsbz1mdW5jdGlvbiooKXtjb25zdCBuPXlpZWxkIHQubWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YS5jYWxsKHRoaXMsZSk7cmV0dXJuIG4ubm9uY2U9YnRvYShuLm5vbmNlKSxufSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99fWNvbnN0IGNvPW5uKGU9Pm5ldyBHcihlLG5ldyAkcihZcigpLG5ldyBzbyhlKSxuKCksRWUoKSkpLFt7aWQ6XCJnb29nbGVwYXlvcmJpdGFsXCJ9XSk7ZnVuY3Rpb24gbG8oZSl7aWYoIWZ1bmN0aW9uKGUpe3JldHVyblwic3RyaXBlQ29ubmVjdGVkQWNjb3VudFwiaW4gZSYmXCJzdHJpcGVQdWJsaXNoYWJsZUtleVwiaW4gZSYmXCJzdHJpcGVWZXJzaW9uXCJpbiBlfShlKSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpfXZhciB1bz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBobyBleHRlbmRzIGpye2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoXCJzdHJpcGVcIixlKSx0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnNjcmlwdExvYWRlcj10fW1hcFRvRXh0ZXJuYWxDaGVja291dERhdGEoZSl7Y29uc3QgdD1PYmplY3QuY3JlYXRlKG51bGwse21hcFRvRXh0ZXJuYWxDaGVja291dERhdGE6e2dldDooKT0+c3VwZXIubWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YX19KTtyZXR1cm4gdW8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49eWllbGQgdC5tYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhLmNhbGwodGhpcyxlKTtsZXQgaTt0cnl7aT1KU09OLnBhcnNlKG4ubm9uY2UpfWNhdGNoKGUpe3Rocm93IG5ldyBybihcIlVuYWJsZSB0byBwYXJzZSByZXNwb25zZSBmcm9tIEdvb2dsZSBQYXkuXCIpfXJldHVybiBmdW5jdGlvbihlKXtpZighZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcImlkXCJpbiBlfShlKSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRUb2tlbil9KGkpLG4ubm9uY2U9aS5pZCxufSl9Z2V0UGF5bWVudEdhdGV3YXlQYXJhbWV0ZXJzKCl7Y29uc3QgZT10aGlzLmdldEdvb2dsZVBheUluaXRpYWxpemF0aW9uRGF0YSgpO2xvKGUpO2NvbnN0e3N0cmlwZVZlcnNpb246dCxzdHJpcGVQdWJsaXNoYWJsZUtleTpuLHN0cmlwZUNvbm5lY3RlZEFjY291bnQ6aX09ZTtyZXR1cm57Z2F0ZXdheTp0aGlzLmdldEdhdGV3YXlJZGVudGlmaWVyKCksXCJzdHJpcGU6dmVyc2lvblwiOnQsXCJzdHJpcGU6cHVibGlzaGFibGVLZXlcIjpgJHtufS8ke2l9YH19cHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZSx0KXt2YXIgbixpO3JldHVybiB1byh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXQpdGhyb3cgbmV3IFlpKFtcInBheW1lbnRcIl0pO2lmKCFYcihlKXx8KFwib2JqZWN0XCIhPXR5cGVvZihyPWUuYm9keSl8fG51bGw9PT1yfHwhKFwidGhyZWVfZHNfcmVzdWx0XCJpbiByKXx8IShcImVycm9yc1wiaW4gcikpKXRocm93IGU7dmFyIHI7Y29uc3Qgbz10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxhPW51bGw9PT0obj1vLmdldFN0b3JlQ29uZmlnKCkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXNbXCJTVFJJUEUtNDc2LmVuYWJsZV9zdHJpcGVfZ29vZ2xlcGF5XzNkc1wiXTtpZihaKGUuYm9keS5lcnJvcnMse2NvZGU6XCJ0aHJlZV9kX3NlY3VyZV9yZXF1aXJlZFwifSkmJmEpe2NvbnN0IG49dGhpcy5nZXRHb29nbGVQYXlJbml0aWFsaXphdGlvbkRhdGEoKTtsbyhuKTtjb25zdHtzdHJpcGVQdWJsaXNoYWJsZUtleTpyLHN0cmlwZUNvbm5lY3RlZEFjY291bnQ6b309bjt0aGlzLnN0cmlwZVVQRUNsaWVudD15aWVsZCB0aGlzLmxvYWRTdHJpcGVKcyhyLG8pO2NvbnN0IGE9ZS5ib2R5LnRocmVlX2RzX3Jlc3VsdC50b2tlbjtsZXQgcyxkPSExO3RyeXtzPXlpZWxkIHRoaXMuc3RyaXBlVVBFQ2xpZW50LmNvbmZpcm1DYXJkUGF5bWVudChhKX1jYXRjaChlKXt0cnl7cz15aWVsZCB0aGlzLnN0cmlwZVVQRUNsaWVudC5yZXRyaWV2ZVBheW1lbnRJbnRlbnQoYSl9Y2F0Y2goZSl7ZD0hMH19aWYobnVsbD09cz92b2lkIDA6cy5lcnJvcil7aWYodGhpcy5fdGhyb3dEaXNwbGF5YWJsZVN0cmlwZUVycm9yKHMuZXJyb3IpLHRoaXMuX2lzQ2FuY2VsbGF0aW9uRXJyb3Iocy5lcnJvcikpdGhyb3cgbmV3IE1uO3Rocm93IG5ldyBMaX1pZighKG51bGw9PXM/dm9pZCAwOnMucGF5bWVudEludGVudCkmJiFkKXRocm93IG5ldyBxbjtyZXR1cm4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe21ldGhvZElkOnQscGF5bWVudERhdGE6e25vbmNlOihudWxsPT09KGk9bnVsbD09cz92b2lkIDA6cy5wYXltZW50SW50ZW50KXx8dm9pZCAwPT09aT92b2lkIDA6aS5pZCl8fGF9fSl9dGhyb3cgZX0pfWxvYWRTdHJpcGVKcyhlLHQpe3JldHVybiB1byh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuc3RyaXBlVVBFQ2xpZW50P3RoaXMuc3RyaXBlVVBFQ2xpZW50OnRoaXMuc2NyaXB0TG9hZGVyLmdldFN0cmlwZUNsaWVudChlLHQpfSl9X2lzQ2FuY2VsbGF0aW9uRXJyb3IoZSl7dmFyIHQsbjtyZXR1cm4gZSYmLTEhPT0obnVsbD09PShuPW51bGw9PT0odD1lLnBheW1lbnRfaW50ZW50Lmxhc3RfcGF5bWVudF9lcnJvcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQubWVzc2FnZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uaW5kZXhPZihcImNhbmNlbGVkXCIpKX1fdGhyb3dEaXNwbGF5YWJsZVN0cmlwZUVycm9yKGUpe2lmKFAoW1wiY2FyZF9lcnJvclwiLFwiaW52YWxpZF9yZXF1ZXN0X2Vycm9yXCIsXCJ2YWxpZGF0aW9uX2Vycm9yXCJdLGUudHlwZSkpdGhyb3cgbmV3IEVycm9yKGUubWVzc2FnZSl9fXZhciBwbz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBtb3tjb25zdHJ1Y3RvcihlLHQ9d2luZG93KXt0aGlzLnNjcmlwdExvYWRlcj1lLHRoaXMuc3RyaXBlV2luZG93PXR9Z2V0U3RyaXBlQ2xpZW50KGUsdCxuKXtyZXR1cm4gcG8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2xldCBpPXRoaXMuc3RyaXBlV2luZG93LmJjU3RyaXBlQ2xpZW50O3JldHVybiBpfHwoaT0oeWllbGQgdGhpcy5sb2FkKCkpKGUse3N0cmlwZUFjY291bnQ6dCxsb2NhbGU6bixiZXRhczpbXCJwYXltZW50X2VsZW1lbnRfYmV0YV8yXCIsXCJhbGlwYXlfcG1fYmV0YV8xXCIsXCJsaW5rX2RlZmF1bHRfaW50ZWdyYXRpb25fYmV0YV8xXCIsXCJzaGlwcGluZ19hZGRyZXNzX2VsZW1lbnRfYmV0YV8xXCIsXCJhZGRyZXNzX2VsZW1lbnRfYmV0YV8xXCJdLGFwaVZlcnNpb246XCIyMDIwLTAzLTAyO2FsaXBheV9iZXRhPXYxO2xpbmtfYmV0YT12MVwifSksT2JqZWN0LmFzc2lnbih0aGlzLnN0cmlwZVdpbmRvdyx7YmNTdHJpcGVDbGllbnQ6aX0pKSxpfSl9bG9hZCgpe3JldHVybiBwbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYodGhpcy5zdHJpcGVXaW5kb3cuU3RyaXBlfHwoeWllbGQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChcImh0dHBzOi8vanMuc3RyaXBlLmNvbS92My9cIikpLCF0aGlzLnN0cmlwZVdpbmRvdy5TdHJpcGUpdGhyb3cgbmV3IFh0O3JldHVybiB0aGlzLnN0cmlwZVdpbmRvdy5TdHJpcGV9KX19Y29uc3QgeW89bm4oZT0+bmV3IEdyKGUsbmV3ICRyKFlyKCksbmV3IGhvKGUsbmV3IG1vKGEoKSkpLG4oKSxFZSgpKSksW3tpZDpcImdvb2dsZXBheXN0cmlwZVwifSx7aWQ6XCJnb29nbGVwYXlzdHJpcGVvY3NcIn1dKSxnbz1ubihlPT5uZXcgR3IoZSxuZXcgJHIoWXIoKSxuZXcgaG8oZSxuZXcgbW8oYSgpKSksbigpLEVlKCkpKSxbe2lkOlwiZ29vZ2xlcGF5c3RyaXBldXBlXCJ9XSk7Y2xhc3Mgdm8gZXh0ZW5kcyBqcntjb25zdHJ1Y3RvcihlKXtzdXBlcihcIndvcmxkcGF5XCIsZSl9bWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YShlKXtjb25zdCB0PU9iamVjdC5jcmVhdGUobnVsbCx7bWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YTp7Z2V0OigpPT5zdXBlci5tYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhfX0pO3JldHVybiBuPXRoaXMsaT12b2lkIDAsbz1mdW5jdGlvbiooKXtjb25zdCBuPXlpZWxkIHQubWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YS5jYWxsKHRoaXMsZSk7cmV0dXJuIG4ubm9uY2U9YnRvYShuLm5vbmNlKSxufSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99fWNvbnN0IGZvPW5uKGU9Pm5ldyBHcihlLG5ldyAkcihZcigpLG5ldyB2byhlKSxuKCksRWUoKSkpLFt7aWQ6XCJnb29nbGVwYXl3b3JsZHBheWFjY2Vzc1wifV0pO3ZhciBTbz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBfbyBleHRlbmRzIGpye2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoXCJicmFpbnRyZWVcIixlKSx0aGlzLl9icmFpbnRyZWVTZGs9dCx0aGlzLl9tZXRob2RJZD1Mci5CUkFJTlRSRUUsdGhpcy5fc2VydmljZT1lfWluaXRpYWxpemUoZSx0LG4pe2NvbnN0IGk9T2JqZWN0LmNyZWF0ZShudWxsLHtpbml0aWFsaXplOntnZXQ6KCk9PnN1cGVyLmluaXRpYWxpemV9LGdldFBheW1lbnRNZXRob2Q6e2dldDooKT0+c3VwZXIuZ2V0UGF5bWVudE1ldGhvZH19KTtyZXR1cm4gU28odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIGkuaW5pdGlhbGl6ZS5jYWxsKHRoaXMsZSx0LG4pO2xldCByPWkuZ2V0UGF5bWVudE1ldGhvZC5jYWxsKHRoaXMpO2lmKHIuY2xpZW50VG9rZW58fChyPSh5aWVsZCB0aGlzLl9zZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKHRoaXMuX21ldGhvZElkKSkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codGhpcy5fbWV0aG9kSWQpKSwhci5jbGllbnRUb2tlbnx8IXIuaW5pdGlhbGl6YXRpb25EYXRhKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7cmV0dXJuIHRoaXMuX2JyYWludHJlZVNkay5pbml0aWFsaXplKHIuY2xpZW50VG9rZW4pLHRoaXMuX2JyYWludHJlZUdvb2dsZVBheW1lbnQ9eWllbGQgdGhpcy5fYnJhaW50cmVlU2RrLmdldEJyYWludHJlZUdvb2dsZVBheW1lbnQoKSxQcm9taXNlLnJlc29sdmUoKX0pfWdldE5vbmNlKGUpe2NvbnN0IHQ9T2JqZWN0LmNyZWF0ZShudWxsLHtnZXROb25jZTp7Z2V0OigpPT5zdXBlci5nZXROb25jZX0sZ2V0UGF5bWVudE1ldGhvZDp7Z2V0OigpPT5zdXBlci5nZXRQYXltZW50TWV0aG9kfX0pO3ZhciBuO3JldHVybiBTbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT15aWVsZCB0LmdldE5vbmNlLmNhbGwodGhpcyxlKSx7Y2xpZW50VG9rZW46cixpbml0aWFsaXphdGlvbkRhdGE6b309dC5nZXRQYXltZW50TWV0aG9kLmNhbGwodGhpcyk7aWYoIXJ8fCFvfHwhKG51bGw9PT0obj1vLmNhcmRfaW5mb3JtYXRpb24pfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmJpbikpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtjb25zdHtpc1RocmVlRFNlY3VyZUVuYWJsZWQ6YSxjYXJkX2luZm9ybWF0aW9uOntiaW46cyxpc05ldHdvcmtUb2tlbml6ZWQ6ZH19PW87aWYoYSYmIWQpe2NvbnN0IGU9eWllbGQgdGhpcy5fYnJhaW50cmVlU2RrLmdldEJyYWludHJlZVRocmVlRFMoKSx7b3JkZXJBbW91bnQ6dH09dGhpcy5fc2VydmljZS5nZXRTdGF0ZSgpLmdldE9yZGVyT3JUaHJvdygpO3JldHVybih5aWVsZCB0aGlzLl9icmFpbnRyZWVQcmVzZW50M0RTQ2hhbGxlbmdlKGUsdCxpLHMpKS5ub25jZX1yZXR1cm4gaX0pfWV4dHJhUGF5bWVudERhdGEoKXtyZXR1cm4gU28odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybntkZXZpY2VTZXNzaW9uSWQ6eWllbGQgdGhpcy5fZ2V0QnJhaW50cmVlRGV2aWNlRGF0YSgpfX0pfW1hcFRvRXh0ZXJuYWxDaGVja291dERhdGEoZSl7Y29uc3QgdD1PYmplY3QuY3JlYXRlKG51bGwse21hcFRvRXh0ZXJuYWxDaGVja291dERhdGE6e2dldDooKT0+c3VwZXIubWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YX19KTtyZXR1cm4gU28odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49eWllbGQgdC5tYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhLmNhbGwodGhpcyxlKTtsZXQgaTt0cnl7aT1KU09OLnBhcnNlKG4ubm9uY2UpfWNhdGNoKGUpe3Rocm93IG5ldyBybihcIlVuYWJsZSB0byBwYXJzZSByZXNwb25zZSBmcm9tIEdvb2dsZSBQYXkuXCIpfXJldHVybiBmdW5jdGlvbihlKXtpZighZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcImFuZHJvaWRQYXlDYXJkc1wiaW4gZX0oZSkpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50VG9rZW4pfShpKSxuLm5vbmNlPWkuYW5kcm9pZFBheUNhcmRzWzBdLm5vbmNlLG4uY2FyZF9pbmZvcm1hdGlvbi5iaW49aS5hbmRyb2lkUGF5Q2FyZHNbMF0uZGV0YWlscy5iaW4sbi5jYXJkX2luZm9ybWF0aW9uLmlzTmV0d29ya1Rva2VuaXplZD1pLmFuZHJvaWRQYXlDYXJkc1swXS5kZXRhaWxzLmlzTmV0d29ya1Rva2VuaXplZCxufSl9Z2V0Q2FyZFBhcmFtZXRlcnMoKXtyZXR1cm4gc3VwZXIuZ2V0Q2FyZFBhcmFtZXRlcnMoKX1nZXRQYXltZW50R2F0ZXdheVBhcmFtZXRlcnMoKXtjb25zdCBlPU9iamVjdC5jcmVhdGUobnVsbCx7Z2V0TWVyY2hhbnRJbmZvOntnZXQ6KCk9PnN1cGVyLmdldE1lcmNoYW50SW5mb30sZ2V0VHJhbnNhY3Rpb25JbmZvOntnZXQ6KCk9PnN1cGVyLmdldFRyYW5zYWN0aW9uSW5mb30sZ2V0UmVxdWlyZWREYXRhOntnZXQ6KCk9PnN1cGVyLmdldFJlcXVpcmVkRGF0YX19KTtyZXR1cm4gU28odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLmdldEJyYWludHJlZUdvb2dsZVBheW1lbnQoKS5jcmVhdGVQYXltZW50RGF0YVJlcXVlc3QoT2JqZWN0LmFzc2lnbih7bWVyY2hhbnRJbmZvOmUuZ2V0TWVyY2hhbnRJbmZvLmNhbGwodGhpcyksdHJhbnNhY3Rpb25JbmZvOmUuZ2V0VHJhbnNhY3Rpb25JbmZvLmNhbGwodGhpcyksY2FyZFJlcXVpcmVtZW50czp7YmlsbGluZ0FkZHJlc3NSZXF1aXJlZDohMCxiaWxsaW5nQWRkcmVzc0Zvcm1hdDpcIkZVTExcIn19LHlpZWxkIGUuZ2V0UmVxdWlyZWREYXRhLmNhbGwodGhpcykpKS5wYXltZW50TWV0aG9kVG9rZW5pemF0aW9uUGFyYW1ldGVycy5wYXJhbWV0ZXJzfSl9Z2V0QnJhaW50cmVlR29vZ2xlUGF5bWVudCgpe2lmKCF0aGlzLl9icmFpbnRyZWVHb29nbGVQYXltZW50KXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7cmV0dXJuIHRoaXMuX2JyYWludHJlZUdvb2dsZVBheW1lbnR9X2dldEJyYWludHJlZURldmljZURhdGEoKXtyZXR1cm4gU28odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e2RldmljZURhdGE6ZX09eWllbGQgdGhpcy5fYnJhaW50cmVlU2RrLmdldERhdGFDb2xsZWN0b3JPclRocm93KCk7cmV0dXJuIGV9KX1fYnJhaW50cmVlUHJlc2VudDNEU0NoYWxsZW5nZShlLHQsbixpKXtyZXR1cm4gbmV3IEppKGUudmVyaWZ5Q2FyZCh7YW1vdW50OnQsYmluOmksbm9uY2U6bixvbkxvb2t1cENvbXBsZXRlOihlLHQpPT57dCgpfX0pKS5wcm9taXNlfX1jb25zdCB3bz1ubihlPT57Y29uc3QgdD1uKCksaT13aW5kb3cscj1uZXcgcG4oZSksbz1uZXcgRW4obmV3IERuKGEoKSxpLHIpKTtyZXR1cm4gbmV3IEdyKGUsbmV3ICRyKFlyKCksbmV3IF9vKGUsbyksdCxFZSgpKSl9LFt7aWQ6XCJnb29nbGVwYXlicmFpbnRyZWVcIn1dKTt2YXIgQ289ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgSW97Y29uc3RydWN0b3IoZSl7dGhpcy5zY3JpcHRMb2FkZXI9ZSx0aGlzLndpbmRvdz13aW5kb3d9Z2V0UGF5UGFsRmFzdGxhbmVTZGsoZSx0LG4pe3JldHVybiBDbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lU2RrKXtjb25zdCBpPXRoaXMuZ2V0UGF5UGFsRmFzdGxhbmVTZGtDb25maWd1cmF0aW9uKGUsdCxuKTtpZih5aWVsZCB0aGlzLmxvYWRQYXlQYWxTZGsoaSksIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lU2RrKXRocm93IG5ldyBYdH1yZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGt9KX1nZXRQYXlQYWxHb29nbGVQYXlTZGsoZSx0LG4saSl7cmV0dXJuIENvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5fHxpKXtjb25zdCBpPXRoaXMuZ2V0UGF5UGFsR29vZ2xlUGF5U2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhlLHQsbik7eWllbGQgdGhpcy5sb2FkUGF5UGFsU2RrKGkpfWlmKCF0aGlzLndpbmRvdy5wYXlwYWxHb29nbGVQYXkpdGhyb3cgbmV3IFh0O3JldHVybiB0aGlzLndpbmRvdy5wYXlwYWxHb29nbGVQYXl9KX1nZXRQYXlQYWxBcG1zU2RrKGUsdCl7cmV0dXJuIENvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy53aW5kb3cucGF5cGFsQXBtcyl7Y29uc3Qgbj10aGlzLmdldFBheVBhbEFwbVNka0NvbmZpZ3VyYXRpb24oZSx0KTtpZih5aWVsZCB0aGlzLmxvYWRQYXlQYWxTZGsobiksIXRoaXMud2luZG93LnBheXBhbEFwbXMpdGhyb3cgbmV3IFh0fXJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxBcG1zfSl9Z2V0UGF5UGFsTWVzc2FnZXMoZSx0KXtyZXR1cm4gQ28odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlcyl7Y29uc3Qgbj10aGlzLmdldFBheVBhbFNka01lc3NhZ2VzQ29uZmlndXJhdGlvbihlLHQpO3lpZWxkIHRoaXMubG9hZFBheVBhbFNkayhuKX1pZighdGhpcy53aW5kb3cucGF5cGFsTWVzc2FnZXMpdGhyb3cgbmV3IFh0O3JldHVybiB0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlc30pfWxvYWRQYXlQYWxTZGsoe29wdGlvbnM6ZSxhdHRyaWJ1dGVzOnR9KXtyZXR1cm4gQ28odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49dGhpcy50cmFuc2Zvcm1Db25maWcoZSksaT10aGlzLnRyYW5zZm9ybUNvbmZpZyh0KSxyPWBodHRwczovL3d3dy5wYXlwYWwuY29tL3Nkay9qcz8ke25ldyBVUkxTZWFyY2hQYXJhbXMobikudG9TdHJpbmcoKX1gO3lpZWxkIHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQocix7YXN5bmM6ITAsYXR0cmlidXRlczppfSl9KX1nZXRQYXlQYWxGYXN0bGFuZVNka0NvbmZpZ3VyYXRpb24oZSx0LG4pe2NvbnN0e2NsaWVudFRva2VuOmksaW5pdGlhbGl6YXRpb25EYXRhOnJ9PWU7aWYoIXJ8fCFyLmNsaWVudElkKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3R7aW50ZW50Om8sY2xpZW50SWQ6YSxtZXJjaGFudElkOnMsYXR0cmlidXRpb25JZDpkfT1yO3JldHVybntvcHRpb25zOntcImNsaWVudC1pZFwiOmEsXCJtZXJjaGFudC1pZFwiOnMsY29tbWl0OiEwLGNvbXBvbmVudHM6W1wiZmFzdGxhbmVcIixcImJ1dHRvbnNcIixcInBheW1lbnQtZmllbGRzXCIsXCJob3N0ZWQtZmllbGRzXCIsXCJ0aHJlZS1kb21haW4tc2VjdXJlXCJdLGN1cnJlbmN5OnQsaW50ZW50Om99LGF0dHJpYnV0ZXM6e1wiZGF0YS1jbGllbnQtbWV0YWRhdGEtaWRcIjpuLnJlcGxhY2UoLy0vZyxcIlwiKSxcImRhdGEtbmFtZXNwYWNlXCI6XCJwYXlwYWxGYXN0bGFuZVNka1wiLFwiZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkXCI6ZCxcImRhdGEtc2RrLWNsaWVudC10b2tlblwiOml9fX1nZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93KGUsdCxuPSEwKXtjb25zdHtjbGllbnRUb2tlbjppLGluaXRpYWxpemF0aW9uRGF0YTpyfT1lO2lmKCFyfHwhci5jbGllbnRJZCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0e2ludGVudDpvLGNsaWVudElkOmEsbWVyY2hhbnRJZDpzLGJ1eWVyQ291bnRyeTpkLGF0dHJpYnV0aW9uSWQ6Yyxpc0hvc3RlZENoZWNrb3V0RW5hYmxlZDpsLGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU6dX09cixoPWx8fG47cmV0dXJue29wdGlvbnM6T2JqZWN0LmFzc2lnbih7XCJjbGllbnQtaWRcIjphLFwibWVyY2hhbnQtaWRcIjpzLGNvbW1pdDpoLGNvbXBvbmVudHM6W1wiZ29vZ2xlcGF5XCJdLGN1cnJlbmN5OnQsaW50ZW50Om99LHUmJntcImJ1eWVyLWNvdW50cnlcIjpkfSksYXR0cmlidXRlczp7XCJkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWRcIjpjLFwiZGF0YS1jbGllbnQtdG9rZW5cIjppLFwiZGF0YS1uYW1lc3BhY2VcIjpcInBheXBhbEdvb2dsZVBheVwifX19Z2V0UGF5UGFsQXBtU2RrQ29uZmlndXJhdGlvbihlLHQpe2NvbnN0e2luaXRpYWxpemF0aW9uRGF0YTpufT1lO2lmKCFufHwhbi5jbGllbnRJZCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0e2ludGVudDppLGNsaWVudElkOnIsbWVyY2hhbnRJZDpvLGJ1eWVyQ291bnRyeTphLGF0dHJpYnV0aW9uSWQ6cyxpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlOmQsYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczpjPVtdLGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzOmw9W119PW4sdT1sLGg9Yy5maWx0ZXIoZT0+IWwuaW5jbHVkZXMoZSkpO3JldHVybntvcHRpb25zOk9iamVjdC5hc3NpZ24oe1wiY2xpZW50LWlkXCI6cixcIm1lcmNoYW50LWlkXCI6byxcImVuYWJsZS1mdW5kaW5nXCI6dS5sZW5ndGg+MD91OnZvaWQgMCxcImRpc2FibGUtZnVuZGluZ1wiOmgubGVuZ3RoPjA/aDp2b2lkIDAsY29tbWl0OiEwLGNvbXBvbmVudHM6W1wiYnV0dG9uc1wiLFwicGF5bWVudC1maWVsZHNcIl0sY3VycmVuY3k6dCxpbnRlbnQ6aX0sZCYme1wiYnV5ZXItY291bnRyeVwiOmF9KSxhdHRyaWJ1dGVzOntcImRhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZFwiOnMsXCJkYXRhLW5hbWVzcGFjZVwiOlwicGF5cGFsQXBtc1wifX19Z2V0UGF5UGFsU2RrTWVzc2FnZXNDb25maWd1cmF0aW9uKGUsdCl7Y29uc3R7aW5pdGlhbGl6YXRpb25EYXRhOm59PWU7aWYoIW58fCFuLmNsaWVudElkKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3R7Y2xpZW50SWQ6aSxtZXJjaGFudElkOnIsYXR0cmlidXRpb25JZDpvLGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU6YSxidXllckNvdW50cnk6c309bjtyZXR1cm57b3B0aW9uczpPYmplY3QuYXNzaWduKHtcImNsaWVudC1pZFwiOmksXCJtZXJjaGFudC1pZFwiOnIsY29tcG9uZW50czpbXCJtZXNzYWdlc1wiXSxjdXJyZW5jeTp0fSxhJiZ7XCJidXllci1jb3VudHJ5XCI6c30pLGF0dHJpYnV0ZXM6e1wiZGF0YS1uYW1lc3BhY2VcIjpcInBheXBhbE1lc3NhZ2VzXCIsXCJkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWRcIjpvfX19dHJhbnNmb3JtQ29uZmlnKGUpe2xldCB0PXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKG49Pntjb25zdCBpPWVbbl07bnVsbD09aXx8XCJcIj09PWl8fEFycmF5LmlzQXJyYXkoaSkmJjA9PT1pLmxlbmd0aHx8KHQ9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtbbl06QXJyYXkuaXNBcnJheShpKT9pLmpvaW4oXCIsXCIpOml9KSl9KSx0fX1mdW5jdGlvbiBibyhlKXtpZighZnVuY3Rpb24oZSl7cmV0dXJuISFlLmluaXRpYWxpemF0aW9uRGF0YSYmXCJhdHRyaWJ1dGlvbklkXCJpbiBlLmluaXRpYWxpemF0aW9uRGF0YSYmXCJpc1Zlbm1vRW5hYmxlZFwiaW4gZS5pbml0aWFsaXphdGlvbkRhdGEmJlwiaXNHb29nbGVQYXlFbmFibGVkXCJpbiBlLmluaXRpYWxpemF0aW9uRGF0YSYmXCJpc1BheVBhbENyZWRpdEF2YWlsYWJsZVwiaW4gZS5pbml0aWFsaXphdGlvbkRhdGF9KGUpKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCl9dmFyIFBvPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIE9vIGV4dGVuZHMganJ7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihcInBheXBhbHNiXCIsZSksdGhpcy5wYXlQYWxDb21tZXJjZVNkaz10LHRoaXMuc2VydmljZT1lfWluaXRpYWxpemUoZSx0LG4pe2NvbnN0IGk9T2JqZWN0LmNyZWF0ZShudWxsLHtpbml0aWFsaXplOntnZXQ6KCk9PnN1cGVyLmluaXRpYWxpemV9LGdldFBheW1lbnRNZXRob2Q6e2dldDooKT0+c3VwZXIuZ2V0UGF5bWVudE1ldGhvZH19KTt2YXIgcixvLGEscyxkO3JldHVybiBQbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgYz1udWxsIT09KG89bnVsbD09PShyPXRoaXMuc2VydmljZS5nZXRTdGF0ZSgpLmdldFN0b3JlQ29uZmlnKCkpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmN1cnJlbmN5LmNvZGUpJiZ2b2lkIDAhPT1vP286bjtpZighYyl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO3lpZWxkIGkuaW5pdGlhbGl6ZS5jYWxsKHRoaXMsZSx0LGMpO2NvbnN0IGw9aS5nZXRQYXltZW50TWV0aG9kLmNhbGwodGhpcyk7aWYoIWwuaW5pdGlhbGl6YXRpb25EYXRhKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Ym8obCk7Y29uc3QgdT15aWVsZCB0aGlzLnBheVBhbENvbW1lcmNlU2RrLmdldFBheVBhbEdvb2dsZVBheVNkayhsLGMpO3RoaXMuZ29vZ2xlcGF5Q29uZmlnPXlpZWxkIHUuR29vZ2xlcGF5KCkuY29uZmlnKCk7Y29uc3R7YWxsb3dlZFBheW1lbnRNZXRob2RzOmh9PXRoaXMuZ29vZ2xlcGF5Q29uZmlnO3RoaXMuc2V0R2F0ZXdheUlkZW50aWZpZXIobnVsbD09PShkPW51bGw9PT0ocz1udWxsPT09KGE9aFswXSl8fHZvaWQgMD09PWE/dm9pZCAwOmEudG9rZW5pemF0aW9uU3BlY2lmaWNhdGlvbil8fHZvaWQgMD09PXM/dm9pZCAwOnMucGFyYW1ldGVycyl8fHZvaWQgMD09PWQ/dm9pZCAwOmQuZ2F0ZXdheSl9KX1nZXRQYXltZW50R2F0ZXdheVBhcmFtZXRlcnMoKXtpZih0aGlzLmdvb2dsZXBheUNvbmZpZyl7Y29uc3R7YWxsb3dlZFBheW1lbnRNZXRob2RzOmV9PXRoaXMuZ29vZ2xlcGF5Q29uZmlnLHtnYXRld2F5TWVyY2hhbnRJZDp0fT1lWzBdLnRva2VuaXphdGlvblNwZWNpZmljYXRpb24ucGFyYW1ldGVycztyZXR1cm57Z2F0ZXdheTp0aGlzLmdldEdhdGV3YXlJZGVudGlmaWVyKCksZ2F0ZXdheU1lcmNoYW50SWQ6dH19cmV0dXJue2dhdGV3YXk6dGhpcy5nZXRHYXRld2F5SWRlbnRpZmllcigpfX1tYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhKGUpe2NvbnN0IHQ9T2JqZWN0LmNyZWF0ZShudWxsLHttYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhOntnZXQ6KCk9PnN1cGVyLm1hcFRvRXh0ZXJuYWxDaGVja291dERhdGF9fSk7cmV0dXJuIFBvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXlpZWxkIHQubWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YS5jYWxsKHRoaXMsZSk7cmV0dXJuIG4ubm9uY2U9YnRvYShuLm5vbmNlKSxufSl9fWNvbnN0IEVvPW5uKGU9Pm5ldyBHcihlLG5ldyAkcihZcigpLG5ldyBPbyhlLG5ldyBJbyhhKCkpKSxuKCksRWUoKSkpLFt7aWQ6XCJnb29nbGVwYXlwYXlwYWxjb21tZXJjZVwifV0pO3ZhciBBbz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBrbyBleHRlbmRzIGpye2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoXCJnb29nbGVwYXlfYmlnY29tbWVyY2VfcGF5bWVudHNcIixlKSx0aGlzLnBheVBhbFNka0hlbHBlcj10LHRoaXMuc2VydmljZT1lfWluaXRpYWxpemUoZSx0LG4pe2NvbnN0IGk9T2JqZWN0LmNyZWF0ZShudWxsLHtpbml0aWFsaXplOntnZXQ6KCk9PnN1cGVyLmluaXRpYWxpemV9LGdldFBheW1lbnRNZXRob2Q6e2dldDooKT0+c3VwZXIuZ2V0UGF5bWVudE1ldGhvZH19KTt2YXIgcixvLGEscyxkO3JldHVybiBBbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgYz1udWxsIT09KG89bnVsbD09PShyPXRoaXMuc2VydmljZS5nZXRTdGF0ZSgpLmdldFN0b3JlQ29uZmlnKCkpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmN1cnJlbmN5LmNvZGUpJiZ2b2lkIDAhPT1vP286bjtpZighYyl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO3lpZWxkIGkuaW5pdGlhbGl6ZS5jYWxsKHRoaXMsZSx0LGMpO2NvbnN0IGw9aS5nZXRQYXltZW50TWV0aG9kLmNhbGwodGhpcyk7aWYoIWwuaW5pdGlhbGl6YXRpb25EYXRhKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Ym8obCk7Y29uc3QgdT15aWVsZCB0aGlzLnBheVBhbFNka0hlbHBlci5nZXRQYXlQYWxHb29nbGVQYXlTZGsobCxjKTt0aGlzLmdvb2dsZXBheUNvbmZpZz15aWVsZCB1Lkdvb2dsZXBheSgpLmNvbmZpZygpO2NvbnN0e2FsbG93ZWRQYXltZW50TWV0aG9kczpofT10aGlzLmdvb2dsZXBheUNvbmZpZzt0aGlzLnNldEdhdGV3YXlJZGVudGlmaWVyKG51bGw9PT0oZD1udWxsPT09KHM9bnVsbD09PShhPWhbMF0pfHx2b2lkIDA9PT1hP3ZvaWQgMDphLnRva2VuaXphdGlvblNwZWNpZmljYXRpb24pfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnBhcmFtZXRlcnMpfHx2b2lkIDA9PT1kP3ZvaWQgMDpkLmdhdGV3YXkpfSl9Z2V0UGF5bWVudEdhdGV3YXlQYXJhbWV0ZXJzKCl7aWYodGhpcy5nb29nbGVwYXlDb25maWcpe2NvbnN0e2FsbG93ZWRQYXltZW50TWV0aG9kczplfT10aGlzLmdvb2dsZXBheUNvbmZpZyx7Z2F0ZXdheU1lcmNoYW50SWQ6dH09ZVswXS50b2tlbml6YXRpb25TcGVjaWZpY2F0aW9uLnBhcmFtZXRlcnM7cmV0dXJue2dhdGV3YXk6dGhpcy5nZXRHYXRld2F5SWRlbnRpZmllcigpLGdhdGV3YXlNZXJjaGFudElkOnR9fXJldHVybntnYXRld2F5OnRoaXMuZ2V0R2F0ZXdheUlkZW50aWZpZXIoKX19bWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YShlKXtjb25zdCB0PU9iamVjdC5jcmVhdGUobnVsbCx7bWFwVG9FeHRlcm5hbENoZWNrb3V0RGF0YTp7Z2V0OigpPT5zdXBlci5tYXBUb0V4dGVybmFsQ2hlY2tvdXREYXRhfX0pO3JldHVybiBBbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj15aWVsZCB0Lm1hcFRvRXh0ZXJuYWxDaGVja291dERhdGEuY2FsbCh0aGlzLGUpO3JldHVybiBuLm5vbmNlPWJ0b2Eobi5ub25jZSksbn0pfX1jb25zdCBUbz1ubihlPT5uZXcgR3IoZSxuZXcgJHIoWXIoKSxuZXcga28oZSxuZXcgd2koYSgpKSksbigpLEVlKCkpKSxbe2lkOlwiZ29vZ2xlcGF5X2JpZ2NvbW1lcmNlX3BheW1lbnRzXCJ9XSk7ZnVuY3Rpb24gRG8oKXtjb25zdHtuYXZpZ2F0b3I6ZX09d2luZG93O2xldCB0O3JldHVybiB0PWUubGFuZ3VhZ2U/ZS5sYW5ndWFnZTplLnVzZXJMYW5ndWFnZSx7Y29sb3JfZGVwdGg6d2luZG93LnNjcmVlbi5jb2xvckRlcHRofHwyNCxqYXZhX2VuYWJsZWQ6XCJmdW5jdGlvblwiPT10eXBlb2YgZS5qYXZhRW5hYmxlZCYmZS5qYXZhRW5hYmxlZCgpLGxhbmd1YWdlOnQsc2NyZWVuX2hlaWdodDp3aW5kb3cuc2NyZWVuLmhlaWdodCxzY3JlZW5fd2lkdGg6d2luZG93LnNjcmVlbi53aWR0aCx0aW1lX3pvbmVfb2Zmc2V0OihuZXcgRGF0ZSkuZ2V0VGltZXpvbmVPZmZzZXQoKS50b1N0cmluZygpfX12YXIgTW89ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3Mgem8gZXh0ZW5kcyBqcntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKFwid29ybGRsaW5lbmFcIixlKSx0aGlzLmZvcm1Qb3N0ZXI9dH1leHRyYVBheW1lbnREYXRhKCl7cmV0dXJuIE1vKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHticm93c2VyX2luZm86RG8oKX0pfSl9cHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZSl7cmV0dXJuIE1vKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighZnVuY3Rpb24oZSl7cmV0dXJuIFhyKGUpJiYodD1lLmJvZHksRCh0KSYmXCJvYmplY3RcIj09dHlwZW9mIHQmJlwiZXJyb3JzXCJpbiB0JiZcInRocmVlX2RzX3Jlc3VsdFwiaW4gdCYmTyh0LmVycm9ycykmJloodC5lcnJvcnMse2NvZGU6XCJ0aHJlZV9kX3NlY3VyZV9yZXF1aXJlZFwifSkpO3ZhciB0fShlKSl0aHJvdyBlO2NvbnN0e3RocmVlX2RzX3Jlc3VsdDp0fT1lLmJvZHkse2Fjc191cmw6bixwYXllcl9hdXRoX3JlcXVlc3Q6aSxtZXJjaGFudF9kYXRhOnJ9PXR8fHt9O2lmKCFufHwhaXx8IXIpdGhyb3cgbmV3IFlpKFtcImZvcm1VcmxcIixcInRocmVlRFNTZXNzaW9uRGF0YVwiLFwiY3JlcVwiXSk7cmV0dXJuIG5ldyBQcm9taXNlKGU9Pnt0aGlzLmZvcm1Qb3N0ZXIucG9zdEZvcm0obix7dGhyZWVEU1Nlc3Npb25EYXRhOmksY3JlcTpyfSxlLFwiX3RvcFwiKX0pfSl9fWNvbnN0IE5vPW5uKGU9Pm5ldyBHcihlLG5ldyAkcihZcigpLG5ldyB6byhlLEVlKCkpLG4oKSxFZSgpKSksW3tpZDpcImdvb2dsZXBheXRkb25saW5lbWFydFwifV0pO3ZhciB4byxGbyxSbyxMbyxCbyxqbyxVbzshZnVuY3Rpb24oZSl7ZS5Qb3NzaWJsZT1cIlBPU1NJQkxFXCIsZS5Obz1cIk5PXCIsZS5Vbmtub3duPVwiVU5LTk9XTlwiLGUuWWVzPVwiWUVTXCJ9KHhvfHwoeG89e30pKSxmdW5jdGlvbihlKXtlLkFVVEhPUklaRT1cImF1dGhvcml6ZVwiLGUuQ0FQVFVSRT1cImNhcHR1cmVcIn0oRm98fChGbz17fSkpLGZ1bmN0aW9uKGUpe2UucGF5cGFsPVwicGF5cGFsXCIsZS5jaGVja291dD1cImNoZWNrb3V0XCIsZS5idXlub3c9XCJidXlub3dcIixlLnBheT1cInBheVwiLGUuaW5zdGFsbG1lbnQ9XCJpbnN0YWxsbWVudFwifShSb3x8KFJvPXt9KSksZnVuY3Rpb24oZSl7ZS5nb2xkPVwiZ29sZFwiLGUuYmx1ZT1cImJsdWVcIixlLnNpbHZlcj1cInNpbHZlclwiLGUuYmxhY2s9XCJibGFja1wiLGUud2hpdGU9XCJ3aGl0ZVwifShMb3x8KExvPXt9KSksZnVuY3Rpb24oZSl7ZS5waWxsPVwicGlsbFwiLGUucmVjdD1cInJlY3RcIn0oQm98fChCbz17fSkpLChqb3x8KGpvPXt9KSkuT1hYTz1cIm94eG9cIixmdW5jdGlvbihlKXtlLkFwcHJvdmVkPVwiQVBQUk9WRURcIixlLkNyZWF0ZWQ9XCJDUkVBVEVEXCIsZS5QYXllckFjdGlvblJlcXVpcmVkPVwiUEFZRVJfQUNUSU9OX1JFUVVJUkVEXCIsZS5Qb2xsaW5nU3RvcD1cIlBPTExJTkdfU1RPUFwiLGUuUG9sbGluZ0Vycm9yPVwiUE9MTElOR19FUlJPUlwifShVb3x8KFVvPXt9KSk7dmFyIHFvPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIFZve2NvbnN0cnVjdG9yKGUsdCxuLGkpe3RoaXMuZm9ybVBvc3Rlcj1lLHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT10LHRoaXMucGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyPW4sdGhpcy5wYXlwYWxDb21tZXJjZVNjcmlwdExvYWRlcj1pfWxvYWRQYXlQYWxTZGsoZSx0LG4saSl7cmV0dXJuIHFvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCByPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLG89dHx8ci5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGUsYT1yLmdldFBheW1lbnRNZXRob2RPclRocm93KGUpO3JldHVybiB0aGlzLnBheXBhbFNkaz15aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlU2NyaXB0TG9hZGVyLmdldFBheVBhbFNESyhhLG8sbixpKSx0aGlzLnBheXBhbFNka30pfWdldFBheVBhbFNka09yVGhyb3coKXtpZighdGhpcy5wYXlwYWxTZGspdGhyb3cgbmV3IFh0O3JldHVybiB0aGlzLnBheXBhbFNka31jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhlKXtyZXR1cm4gcW8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9ZS5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkoKTtpZighdCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ0NhcnQpO3RyeXtyZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnQodCl9Y2F0Y2goZSl7dGhyb3cgbmV3IGpufX0pfWNyZWF0ZU9yZGVyKGUsdCl7cmV0dXJuIHFvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuaWQse29yZGVySWQ6aX09eWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIuY3JlYXRlT3JkZXIoZSxPYmplY3QuYXNzaWduKHtjYXJ0SWQ6bn0sdCkpO3JldHVybiBpfSl9Y3JlYXRlT3JkZXJDYXJkRmllbGRzKGUsdCl7cmV0dXJuIHFvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuaWQse29yZGVySWQ6aSxzZXR1cFRva2VuOnJ9PXlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyLmNyZWF0ZU9yZGVyKGUsT2JqZWN0LmFzc2lnbih7Y2FydElkOm59LHQpKTtyZXR1cm4gT2JqZWN0LmFzc2lnbih7b3JkZXJJZDppfSxyP3tzZXR1cFRva2VuOnJ9Ont9KX0pfXVwZGF0ZU9yZGVyKCl7cmV0dXJuIHFvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBlPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHQ9ZS5nZXRDYXJ0T3JUaHJvdygpLG49ZS5nZXRDb25zaWdubWVudHNPclRocm93KClbMF07dHJ5e3lpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyLnVwZGF0ZU9yZGVyKHthdmFpbGFibGVTaGlwcGluZ09wdGlvbnM6bi5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMsY2FydElkOnQuaWQsc2VsZWN0ZWRTaGlwcGluZ09wdGlvbjpuLnNlbGVjdGVkU2hpcHBpbmdPcHRpb259KX1jYXRjaChlKXt0aHJvdyBuZXcgcW59fSl9Z2V0T3JkZXJTdGF0dXMoZSx0KXtyZXR1cm4gcW8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdHtzdGF0dXM6bn09eWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIuZ2V0T3JkZXJTdGF0dXMoZSx0KTtyZXR1cm4gbn1jYXRjaChlKXt0aHJvdyBuZXcgcW59fSl9dG9rZW5pemVQYXltZW50KGUsdCl7Y29uc3Qgbj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO2lmKCF0KXRocm93IG5ldyBqdChrdC5NaXNzaW5nT3JkZXJJZCk7cmV0dXJuIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybShcIi9jaGVja291dC5waHBcIixPYmplY3QuYXNzaWduKHtwYXltZW50X3R5cGU6XCJwYXlwYWxcIixhY3Rpb246XCJzZXRfZXh0ZXJuYWxfY2hlY2tvdXRcIixwcm92aWRlcjplLG9yZGVyX2lkOnR9LG4uc291cmNlPT09Vm4uQnV5Tm93JiZ7Y2FydF9pZDpuLmlkfSkpfXN1Ym1pdFBheW1lbnQoZSx0LG4pe3JldHVybiBxbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT17Zm9ybWF0dGVkUGF5bG9hZDp7dmF1bHRfcGF5bWVudF9pbnN0cnVtZW50Om51bGwsc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6bnVsbCxkZXZpY2VfaW5mbzpudWxsLG1ldGhvZF9pZDplLHBheXBhbF9hY2NvdW50OntvcmRlcl9pZDp0fX19O3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KE9iamVjdC5hc3NpZ24oe21ldGhvZElkOmUscGF5bWVudERhdGE6aX0sbj97Z2F0ZXdheUlkOm59Ont9KSl9KX1nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coZSl7Y29uc3QgdD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDb25zaWdubWVudHNPclRocm93KClbMF0sbj10LmF2YWlsYWJsZVNoaXBwaW5nT3B0aW9uc3x8W10saT1uLmZpbmQoZT0+ZS5pc1JlY29tbWVuZGVkKSxyPShlP24uZmluZCh0PT50LmlkPT09ZSk6bi5maW5kKGU9Pnt2YXIgbjtyZXR1cm4gZS5pZD09PShudWxsPT09KG49dC5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uKXx8dm9pZCAwPT09bj92b2lkIDA6bi5pZCl9KSl8fGl8fG5bMF07aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiWW91ciBvcmRlciBjYW4ndCBiZSBzaGlwcGVkIHRvIHRoaXMgYWRkcmVzc1wiKTtyZXR1cm4gcn1nZXRBZGRyZXNzKGUpe3JldHVybntmaXJzdE5hbWU6KG51bGw9PWU/dm9pZCAwOmUuZmlyc3ROYW1lKXx8XCJcIixsYXN0TmFtZToobnVsbD09ZT92b2lkIDA6ZS5sYXN0TmFtZSl8fFwiXCIsZW1haWw6KG51bGw9PWU/dm9pZCAwOmUuZW1haWwpfHxcIlwiLHBob25lOihudWxsPT1lP3ZvaWQgMDplLnBob25lKXx8XCJcIixjb21wYW55OlwiXCIsYWRkcmVzczE6KG51bGw9PWU/dm9pZCAwOmUuYWRkcmVzczEpfHxcIlwiLGFkZHJlc3MyOihudWxsPT1lP3ZvaWQgMDplLmFkZHJlc3MyKXx8XCJcIixjaXR5OihudWxsPT1lP3ZvaWQgMDplLmNpdHkpfHxcIlwiLGNvdW50cnlDb2RlOihudWxsPT1lP3ZvaWQgMDplLmNvdW50cnlDb2RlKXx8XCJcIixwb3N0YWxDb2RlOihudWxsPT1lP3ZvaWQgMDplLnBvc3RhbENvZGUpfHxcIlwiLHN0YXRlT3JQcm92aW5jZTpcIlwiLHN0YXRlT3JQcm92aW5jZUNvZGU6KG51bGw9PWU/dm9pZCAwOmUuc3RhdGVPclByb3ZpbmNlQ29kZSl8fFwiXCIsY3VzdG9tRmllbGRzOltdfX1nZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoe3BheWVyOmV9KXt2YXIgdCxuO3JldHVybiB0aGlzLmdldEFkZHJlc3Moe2ZpcnN0TmFtZTplLm5hbWUuZ2l2ZW5fbmFtZSxsYXN0TmFtZTplLm5hbWUuc3VybmFtZSxlbWFpbDplLmVtYWlsX2FkZHJlc3MsYWRkcmVzczE6ZS5hZGRyZXNzLmFkZHJlc3NfbGluZV8xLGFkZHJlc3MyOmUuYWRkcmVzcy5hZGRyZXNzX2xpbmVfMixjaXR5OmUuYWRkcmVzcy5hZG1pbl9hcmVhXzIsY291bnRyeUNvZGU6ZS5hZGRyZXNzLmNvdW50cnlfY29kZSxwb3N0YWxDb2RlOmUuYWRkcmVzcy5wb3N0YWxfY29kZSxzdGF0ZU9yUHJvdmluY2VDb2RlOmUuYWRkcmVzcy5hZG1pbl9hcmVhXzEscGhvbmU6bnVsbD09PShuPW51bGw9PT0odD1lLnBob25lKXx8dm9pZCAwPT09dD92b2lkIDA6dC5waG9uZV9udW1iZXIpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLm5hdGlvbmFsX251bWJlcn0pfWdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoZSl7Y29uc3R7cGF5ZXI6dCxwdXJjaGFzZV91bml0czpufT1lLHthZGRyZXNzOmksbmFtZTp7ZnVsbF9uYW1lOnJ9fT1uWzBdLnNoaXBwaW5nLFtvLC4uLmFdPXIuc3BsaXQoXCIgXCIpO3JldHVybiB0aGlzLmdldEFkZHJlc3Moe2ZpcnN0TmFtZTpvLGxhc3ROYW1lOmEuam9pbihcIiBcIiksZW1haWw6dC5lbWFpbF9hZGRyZXNzLGFkZHJlc3MxOmkuYWRkcmVzc19saW5lXzEsYWRkcmVzczI6aS5hZGRyZXNzX2xpbmVfMixjaXR5OmkuYWRtaW5fYXJlYV8yLGNvdW50cnlDb2RlOmkuY291bnRyeV9jb2RlLHBvc3RhbENvZGU6aS5wb3N0YWxfY29kZSxzdGF0ZU9yUHJvdmluY2VDb2RlOmkuYWRtaW5fYXJlYV8xfSl9Z2V0VmFsaWRCdXR0b25TdHlsZShlKXtjb25zdHtjb2xvcjp0LGhlaWdodDpuLGxhYmVsOmksc2hhcGU6cn09ZXx8e30sbz17Y29sb3I6dCYmTG9bdF0/dDp2b2lkIDAsaGVpZ2h0OnRoaXMuZ2V0VmFsaWRIZWlnaHQobiksbGFiZWw6aSYmUm9baV0/aTp2b2lkIDAsc2hhcGU6ciYmQm9bcl0/cjp2b2lkIDB9O3JldHVybiBIKG8sVCl9Z2V0VmFsaWRIZWlnaHQoZSl7cmV0dXJuIGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlP2U+NTU/NTU6ZTwyNT8yNTplOjQwfXJlbW92ZUVsZW1lbnQoZSl7Y29uc3QgdD1lJiZkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlKTt0JiYodC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKX19dmFyIEdvPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIEhve2NvbnN0cnVjdG9yKGUpe3RoaXMucmVxdWVzdFNlbmRlcj1lfWNyZWF0ZU9yZGVyKGUsdCl7cmV0dXJuIEdvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPWAvYXBpL3N0b3JlZnJvbnQvcGF5bWVudC8ke2V9YCxpPXQscj1PYmplY3QuYXNzaWduKHtcIlgtQVBJLUlOVEVSTkFMXCI6WG4sXCJDb250ZW50LVR5cGVcIjp0aS5Kc29ufSxuaSk7cmV0dXJuKHlpZWxkIHRoaXMucmVxdWVzdFNlbmRlci5wb3N0KG4se2hlYWRlcnM6cixib2R5Oml9KSkuYm9keX0pfXVwZGF0ZU9yZGVyKGUpe3JldHVybiBHbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD1lLG49T2JqZWN0LmFzc2lnbih7XCJYLUFQSS1JTlRFUk5BTFwiOlhuLFwiQ29udGVudC1UeXBlXCI6dGkuSnNvbn0sbmkpO3JldHVybih5aWVsZCB0aGlzLnJlcXVlc3RTZW5kZXIucHV0KFwiL2FwaS9zdG9yZWZyb250L2luaXRpYWxpemF0aW9uL3BheXBhbGNvbW1lcmNlXCIse2hlYWRlcnM6bixib2R5OnR9KSkuYm9keX0pfWdldE9yZGVyU3RhdHVzKGU9XCJwYXlwYWxjb21tZXJjZVwiLHQpe3JldHVybiBHbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj1gL2FwaS9zdG9yZWZyb250L2luaXRpYWxpemF0aW9uLyR7ZX1gLGk9T2JqZWN0LmFzc2lnbih7XCJYLUFQSS1JTlRFUk5BTFwiOlhuLFwiQ29udGVudC1UeXBlXCI6dGkuSnNvbn0sbmkpO3JldHVybih5aWVsZCB0aGlzLnJlcXVlc3RTZW5kZXIuZ2V0KG4sT2JqZWN0LmFzc2lnbih7aGVhZGVyczppfSx0KSkpLmJvZHl9KX19dmFyICRvPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIFdve2NvbnN0cnVjdG9yKGUpe3RoaXMuc2NyaXB0TG9hZGVyPWUsdGhpcy53aW5kb3c9d2luZG93fWdldFBheVBhbFNESyhlLHQsbixpKXtyZXR1cm4gJG8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHI9dGhpcy5nZXRQYXlQYWxTZGtTY3JpcHRDb25maWdPclRocm93KGUsdCxuKTtyZXR1cm4gdGhpcy5sb2FkUGF5UGFsU0RLKHIsaSl9KX1sb2FkUGF5UGFsU0RLKGUsdD0hMSl7cmV0dXJuICRvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy53aW5kb3cucGF5cGFsfHx0KXtjb25zdCB0PXRoaXMudHJhbnNmb3JtQ29uZmlnKGUub3B0aW9ucyksbj10aGlzLnRyYW5zZm9ybUNvbmZpZyhlLmF0dHJpYnV0ZXMpLGk9YGh0dHBzOi8vd3d3LnBheXBhbC5jb20vc2RrL2pzPyR7bmV3IFVSTFNlYXJjaFBhcmFtcyh0KS50b1N0cmluZygpfWA7eWllbGQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChpLHthc3luYzohMCxhdHRyaWJ1dGVzOm59KX1pZighdGhpcy53aW5kb3cucGF5cGFsKXRocm93IG5ldyBYdDtyZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsfSl9Z2V0UGF5UGFsU2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhlLHQsbj0hMCl7Y29uc3R7aWQ6aSxjbGllbnRUb2tlbjpyLGluaXRpYWxpemF0aW9uRGF0YTpvfT1lO2lmKCEobnVsbD09bz92b2lkIDA6by5jbGllbnRJZCkpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtjb25zdHtpbnRlbnQ6YSxjbGllbnRJZDpzLG1lcmNoYW50SWQ6ZCxidXllckNvdW50cnk6YyxhdHRyaWJ1dGlvbklkOmwsaXNWZW5tb0VuYWJsZWQ6dSxpc0hvc3RlZENoZWNrb3V0RW5hYmxlZDpoLGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlOnAsaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZTptLGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM6eT1bXSxlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczpnPVtdLGlzR29vZ2xlUGF5RW5hYmxlZDp2fT1vLGY9aHx8bixTPVwicGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkc1wiPT09aSxfPVM/W1wiY2FyZFwiXTpbXSx3PXA/W1wiY3JlZGl0XCIsXCJwYXlsYXRlclwiXTpbXSxDPW58fCFmLEk9dT9bXCJ2ZW5tb1wiXTpbXSxiPUM/ZzpbXSxQPXY/W1wiZ29vZ2xlcGF5XCJdOltdLE89bj9bXCJjYXJkLWZpZWxkc1wiXTpbXSxFPVsuLi5TP1tdOltcImNhcmRcIl0sLi4ucD9bXTpbXCJjcmVkaXRcIixcInBheWxhdGVyXCJdLC4uLnU/W106W1widmVubW9cIl0sLi4uQz95LmZpbHRlcihlPT4hZy5pbmNsdWRlcyhlKSk6eV0sQT1bLi4uXywuLi53LC4uLkksLi4uYl07cmV0dXJue29wdGlvbnM6T2JqZWN0LmFzc2lnbih7XCJjbGllbnQtaWRcIjpzLFwibWVyY2hhbnQtaWRcIjpkLFwiZW5hYmxlLWZ1bmRpbmdcIjpBLmxlbmd0aD4wP0E6dm9pZCAwLFwiZGlzYWJsZS1mdW5kaW5nXCI6RS5sZW5ndGg+MD9FOnZvaWQgMCxjb21taXQ6Zixjb21wb25lbnRzOltcImJ1dHRvbnNcIixcImhvc3RlZC1maWVsZHNcIixcInBheW1lbnQtZmllbGRzXCIsXCJsZWdhbFwiLC4uLlAsLi4uT10sY3VycmVuY3k6dCxpbnRlbnQ6YX0sbSYme1wiYnV5ZXItY291bnRyeVwiOmN9KSxhdHRyaWJ1dGVzOntcImRhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZFwiOmwsXCJkYXRhLWNsaWVudC10b2tlblwiOnJ9fX10cmFuc2Zvcm1Db25maWcoZSl7bGV0IHQ9e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2gobj0+e2NvbnN0IGk9ZVtuXTtudWxsPT1pfHxcIlwiPT09aXx8QXJyYXkuaXNBcnJheShpKSYmMD09PWkubGVuZ3RofHwodD1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tuXTpBcnJheS5pc0FycmF5KGkpP2kuam9pbihcIixcIik6aX0pKX0pLHR9fWNvbnN0IFlvPWU9Pntjb25zdHtnZXRIb3N0OnR9PWUuZ2V0U3RhdGUoKTtyZXR1cm4gbmV3IFZvKEVlKCksZSxuZXcgSG8obih7aG9zdDp0KCl9KSksbmV3IFdvKGEoKSkpfTt2YXIgS289ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgSm97Y29uc3RydWN0b3IoZSx0KXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5vbkVycm9yPVZ9aW5pdGlhbGl6ZShlKXtyZXR1cm4gS28odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheXBhbGNvbW1lcmNlOnQsbWV0aG9kSWQ6bn09ZTtpZighbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0LmNvbnRhaW5lcil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2UuY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKHQub25DbGljayYmXCJmdW5jdGlvblwiIT10eXBlb2YgdC5vbkNsaWNrKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZS5vbkNsaWNrXCIgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uJyk7dGhpcy5vbkVycm9yPXQub25FcnJvcnx8Vix0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kKG4pfHwoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG4pKTtjb25zdCBpPXlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhuKTtpJiZpLkJ1dHRvbnMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGkuQnV0dG9ucz90aGlzLnJlbmRlckJ1dHRvbihuLHQpOmNvbnNvbGUuZXJyb3IoXCJbQkMgUGF5UGFsXTogUGF5UGFsIEJ1dHRvbiBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREtcIil9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9c2lnbkluKGUsdCl7cmV0dXJuIEtvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGUsdCksUHJvbWlzZS5yZXNvbHZlKCl9KX1zaWduT3V0KGUpe3JldHVybiBLbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIoZSksUHJvbWlzZS5yZXNvbHZlKCl9KX1leGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KGUpe3ZhciB0O3JldHVybiBudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrKXx8dm9pZCAwPT09dHx8dC5jYWxsKGUpLFByb21pc2UucmVzb2x2ZSgpfXJlbmRlckJ1dHRvbihlLHQpe2NvbnN0e2NvbnRhaW5lcjpuLG9uQ2xpY2s6aSxvbkNvbXBsZXRlOnJ9PXQsbz10aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKSxhPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KGUpLHtpc0hvc3RlZENoZWNrb3V0RW5hYmxlZDpzLHBheW1lbnRCdXR0b25TdHlsZXM6ZCxpc0FwcFN3aXRjaEVuYWJsZWQ6Y309YS5pbml0aWFsaXphdGlvbkRhdGF8fHt9LHtjaGVja291dFRvcEJ1dHRvblN0eWxlczpsfT1kfHx7fSx1PU9iamVjdC5hc3NpZ24oe2NyZWF0ZU9yZGVyOigpPT50aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFwicGF5cGFsY29tbWVyY2VcIiksb25BcHByb3ZlOih7b3JkZXJJRDp0fSk9PnRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KGUsdCl9LGkmJntvbkNsaWNrOigpPT5pKCl9KSxoPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwhYyYme29uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlOmU9PnRoaXMub25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZSksb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6ZT0+dGhpcy5vblNoaXBwaW5nT3B0aW9uc0NoYW5nZShlKX0pLHtvbkFwcHJvdmU6KHQsbik9PnRoaXMub25Ib3N0ZWRDaGVja291dEFwcHJvdmUodCxuLGUscil9KSxwPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7ZnVuZGluZ1NvdXJjZTpvLkZVTkRJTkcuUEFZUEFMLHN0eWxlOnRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbCkse2hlaWdodDpkaX0pKX0sdSkscyYmaCksbT1vLkJ1dHRvbnMocCk7bS5pc0VsaWdpYmxlKCk/bS5yZW5kZXIoYCMke259YCk6dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KG4pfW9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGUsdCxuLGkpe3JldHVybiBLbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIWUub3JkZXJJRCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ09yZGVySWQpO2NvbnN0IHI9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKSxvPXlpZWxkIHQub3JkZXIuZ2V0KCk7dHJ5e2NvbnN0IHQ9dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMobyk7aWYoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKHQpLHIubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoPjApe2NvbnN0IGU9dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKG8pO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoZSkseWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpfXlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSx7cGFyYW1zOnttZXRob2RJZDpufX0pLHlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChuLGUub3JkZXJJRCksaSYmXCJmdW5jdGlvblwiPT10eXBlb2YgaSYmaSgpfWNhdGNoKGUpe3RoaXMuaGFuZGxlRXJyb3IoZSl9fSl9b25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZSl7cmV0dXJuIEtvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7Y2l0eTplLnNoaXBwaW5nQWRkcmVzcy5jaXR5LGNvdW50cnlDb2RlOmUuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLHBvc3RhbENvZGU6ZS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxzdGF0ZU9yUHJvdmluY2VDb2RlOmUuc2hpcHBpbmdBZGRyZXNzLnN0YXRlfSk7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyh0KSx5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHQpO2NvbnN0IGU9dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oZS5pZCkseWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpfWNhdGNoKGUpe3RoaXMuaGFuZGxlRXJyb3IoZSl9fSl9b25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZSl7cmV0dXJuIEtvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KGUuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi5pZCk7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbih0LmlkKSx5aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCl9Y2F0Y2goZSl7dGhpcy5oYW5kbGVFcnJvcihlKX19KX1oYW5kbGVFcnJvcihlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzLm9uRXJyb3IpdGhyb3cgZTt0aGlzLm9uRXJyb3IoZSl9fWNvbnN0IFpvPW5uKGU9Pm5ldyBKbyhlLFlvKGUpKSxbe2lkOlwicGF5cGFsY29tbWVyY2VcIn1dKTt2YXIgUW89ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgWG97Y29uc3RydWN0b3IoZSx0KXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5vbkVycm9yPVZ9aW5pdGlhbGl6ZShlKXtyZXR1cm4gUW8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheXBhbGNvbW1lcmNlY3JlZGl0OnQsbWV0aG9kSWQ6bn09ZTtpZighbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlY3JlZGl0XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0LmNvbnRhaW5lcil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXQuY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKHQub25DbGljayYmXCJmdW5jdGlvblwiIT10eXBlb2YgdC5vbkNsaWNrKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWNyZWRpdC5vbkNsaWNrXCIgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uJyk7dGhpcy5vbkVycm9yPXQub25FcnJvcnx8Vix0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kKG4pfHwoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG4pKTtjb25zdCBpPXlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhuKTtpJiZpLkJ1dHRvbnMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGkuQnV0dG9ucz90aGlzLnJlbmRlckJ1dHRvbihuLHQpOmNvbnNvbGUuZXJyb3IoXCJbQkMgUGF5UGFsXTogUGF5UGFsIEJ1dHRvbiBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREtcIil9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9c2lnbkluKGUsdCl7cmV0dXJuIFFvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoZSx0KX0pfXNpZ25PdXQoZSl7cmV0dXJuIFFvKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKGUpfSl9ZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChlKXt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayl8fHZvaWQgMD09PXR8fHQuY2FsbChlKSxQcm9taXNlLnJlc29sdmUoKX1yZW5kZXJCdXR0b24oZSx0KXtjb25zdHtjb250YWluZXI6bixvbkNvbXBsZXRlOmksb25DbGljazpyfT10LG89dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCksYT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKSx7aXNIb3N0ZWRDaGVja291dEVuYWJsZWQ6cyxwYXltZW50QnV0dG9uU3R5bGVzOmQsaXNBcHBTd2l0Y2hFbmFibGVkOmN9PWEuaW5pdGlhbGl6YXRpb25EYXRhfHx7fSx7Y2hlY2tvdXRUb3BCdXR0b25TdHlsZXM6bH09ZHx8e30sdT1PYmplY3QuYXNzaWduKHtjcmVhdGVPcmRlcjooKT0+dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcInBheXBhbGNvbW1lcmNlY3JlZGl0XCIpLG9uQXBwcm92ZTooe29yZGVySUQ6dH0pPT50aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChlLHQpfSxyJiZ7b25DbGljazooKT0+cigpfSksaD1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIWMmJntvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTplPT50aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGUpLG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlOmU9PnRoaXMub25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZSl9KSx7b25BcHByb3ZlOih0LG4pPT50aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKHQsbixlLGkpfSkscD1bby5GVU5ESU5HLlBBWUxBVEVSLG8uRlVORElORy5DUkVESVRdO2xldCBtPSExO3AuZm9yRWFjaChlPT57aWYoIW0pe2NvbnN0IHQ9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtmdW5kaW5nU291cmNlOmUsc3R5bGU6dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxsKSx7aGVpZ2h0OmRpfSkpfSx1KSxzJiZoKSxpPW8uQnV0dG9ucyh0KTtpLmlzRWxpZ2libGUoKSYmKGkucmVuZGVyKGAjJHtufWApLG09ITApfX0pLG18fHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChuKX1vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShlLHQsbixpKXtyZXR1cm4gUW8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFlLm9yZGVySUQpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdPcmRlcklkKTtjb25zdCByPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCksbz15aWVsZCB0Lm9yZGVyLmdldCgpO3RyeXtjb25zdCB0PXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKG8pO2lmKHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyh0KSxyLmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aD4wKXtjb25zdCBlPXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhvKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKGUpLHlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKX15aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30se3BhcmFtczp7bWV0aG9kSWQ6bn19KSx5aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobixlLm9yZGVySUQpLGkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGkmJmkoKX1jYXRjaChlKXt0aGlzLmhhbmRsZUVycm9yKGUpfX0pfW9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGUpe3JldHVybiBRbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEFkZHJlc3Moe2NpdHk6ZS5zaGlwcGluZ0FkZHJlc3MuY2l0eSxjb3VudHJ5Q29kZTplLnNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxwb3N0YWxDb2RlOmUuc2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGUsc3RhdGVPclByb3ZpbmNlQ29kZTplLnNoaXBwaW5nQWRkcmVzcy5zdGF0ZX0pO3RyeXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3ModCkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyh0KTtjb25zdCBlPXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKGUuaWQpLHlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKX1jYXRjaChlKXt0aGlzLmhhbmRsZUVycm9yKGUpfX0pfW9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGUpe3JldHVybiBRbyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhlLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24uaWQpO3RyeXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24odC5pZCkseWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpfWNhdGNoKGUpe3RoaXMuaGFuZGxlRXJyb3IoZSl9fSl9aGFuZGxlRXJyb3IoZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpcy5vbkVycm9yKXRocm93IGU7dGhpcy5vbkVycm9yKGUpfX1jb25zdCBlYT1ubihlPT5uZXcgWG8oZSxZbyhlKSksW3tpZDpcInBheXBhbGNvbW1lcmNlY3JlZGl0XCJ9XSk7dmFyIHRhPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIG5he2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZT10fWluaXRpYWxpemUoZSl7cmV0dXJuIHRhKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXlwYWxjb21tZXJjZXZlbm1vOnQsbWV0aG9kSWQ6bn09ZTtpZighbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW9cIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXQuY29udGFpbmVyKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZXZlbm1vLmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZih0Lm9uQ2xpY2smJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQub25DbGljayl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2V2ZW5tby5vbkNsaWNrXCIgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uJyk7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZChuKXx8KHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChuKSk7Y29uc3QgaT15aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobik7aSYmaS5CdXR0b25zJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBpLkJ1dHRvbnM/dGhpcy5yZW5kZXJCdXR0b24obix0KTpjb25zb2xlLmVycm9yKFwiW0JDIFBheVBhbF06IFBheVBhbCBCdXR0b24gY291bGQgbm90IGJlIHJlbmRlcmVkLCBkdWUgdG8gaXNzdWVzIHdpdGggbG9hZGluZyBQYXlQYWwgU0RLXCIpfSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfXNpZ25JbihlLHQpe3JldHVybiB0YSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGUsdCl9KX1zaWduT3V0KGUpe3JldHVybiB0YSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihlKX0pfWV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoZSl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD1udWxsPT1lP3ZvaWQgMDplLmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2spfHx2b2lkIDA9PT10fHx0LmNhbGwoZSksUHJvbWlzZS5yZXNvbHZlKCl9cmVuZGVyQnV0dG9uKGUsdCl7Y29uc3R7Y29udGFpbmVyOm4sb25DbGljazppfT10LHI9dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCksbz10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKSx7cGF5bWVudEJ1dHRvblN0eWxlczphfT1vLmluaXRpYWxpemF0aW9uRGF0YXx8e30se2NoZWNrb3V0VG9wQnV0dG9uU3R5bGVzOnN9PWF8fHt9LGQ9T2JqZWN0LmFzc2lnbih7ZnVuZGluZ1NvdXJjZTpyLkZVTkRJTkcuVkVOTU8sc3R5bGU6dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxzKSx7aGVpZ2h0OmRpfSkpLGNyZWF0ZU9yZGVyOigpPT50aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFwicGF5cGFsY29tbWVyY2V2ZW5tb1wiKSxvbkFwcHJvdmU6KHtvcmRlcklEOnR9KT0+dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQoZSx0KX0saSYme29uQ2xpY2s6KCk9PmkoKX0pLGM9ci5CdXR0b25zKGQpO2MuaXNFbGlnaWJsZSgpP2MucmVuZGVyKGAjJHtufWApOnRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChuKX19Y29uc3QgaWE9bm4oZT0+bmV3IG5hKGUsWW8oZSkpLFt7aWQ6XCJwYXlwYWxjb21tZXJjZXZlbm1vXCJ9XSk7ZnVuY3Rpb24gcmEoKXtyZXR1cm4gbmV3IElvKG8oKSl9dmFyIG9hLGFhLHNhLGRhLGNhLGxhLHVhOyFmdW5jdGlvbihlKXtlLkFVVEhPUklaRT1cImF1dGhvcml6ZVwiLGUuQ0FQVFVSRT1cImNhcHR1cmVcIn0ob2F8fChvYT17fSkpLGZ1bmN0aW9uKGUpe2UuU3VjY2VlZGVkPVwic3VjY2VlZGVkXCIsZS5DYW5jZWxsZWQ9XCJjYW5jZWxsZWRcIixlLkVycm9yZWQ9XCJlcnJvcmVkXCJ9KGFhfHwoYWE9e30pKSxmdW5jdGlvbihlKXtlLlBvc3NpYmxlPVwiUE9TU0lCTEVcIixlLk5vPVwiTk9cIixlLlVua25vd249XCJVTktOT1dOXCIsZS5ZZXM9XCJZRVNcIn0oc2F8fChzYT17fSkpLGZ1bmN0aW9uKGUpe2UucGF5cGFsPVwicGF5cGFsXCIsZS5jaGVja291dD1cImNoZWNrb3V0XCIsZS5idXlub3c9XCJidXlub3dcIixlLnBheT1cInBheVwiLGUuaW5zdGFsbG1lbnQ9XCJpbnN0YWxsbWVudFwifShkYXx8KGRhPXt9KSksZnVuY3Rpb24oZSl7ZS5nb2xkPVwiZ29sZFwiLGUuYmx1ZT1cImJsdWVcIixlLnNpbHZlcj1cInNpbHZlclwiLGUuYmxhY2s9XCJibGFja1wiLGUud2hpdGU9XCJ3aGl0ZVwifShjYXx8KGNhPXt9KSksZnVuY3Rpb24oZSl7ZS5waWxsPVwicGlsbFwiLGUucmVjdD1cInJlY3RcIn0obGF8fChsYT17fSkpLGZ1bmN0aW9uKGUpe2UuU1VDQ0VFREVEPVwic3VjY2VlZGVkXCIsZS5GQUlMRUQ9XCJmYWlsZWRcIixlLkNBTkNFTEVEPVwiY2FuY2VsZWRcIixlLlVOUkVDT0dOSVpFRD1cInVucmVjb2duaXplZFwifSh1YXx8KHVhPXt9KSk7dmFyIGhhPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIHBhe2NvbnN0cnVjdG9yKCl7dGhpcy53aW5kb3c9d2luZG93fWluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShlLHQsbil7cmV0dXJuIGhhKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZih0JiYod2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZmFzdGxhbmVFbnZcIixcInNhbmRib3hcIiksd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYXhvRW52XCIsXCJzYW5kYm94XCIpKSwhdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmUpe2NvbnN0IHQ9e3Jvb3Q6e2JhY2tncm91bmRDb2xvclByaW1hcnk6XCJ0cmFuc3BhcmVudFwifX07dGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmU9eWllbGQgZS5GYXN0bGFuZSh7c3R5bGVzOm58fHR9KX1yZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmV9KX1nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKXtpZighdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmUpdGhyb3cgbmV3IFh0O3JldHVybiB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZX1sb29rdXBDdXN0b21lck9yVGhyb3coZSl7cmV0dXJuIGhhKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKS5pZGVudGl0eS5sb29rdXBDdXN0b21lckJ5RW1haWwoZSl9KX10cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhlKXtyZXR1cm4gaGEodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiBlP3RoaXMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCkuaWRlbnRpdHkudHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyhlKTp7fX0pfXVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQoZSl7Y29uc3QgdD1uZXcgRGF0ZTt0LnNldERhdGUodC5nZXREYXRlKCkrMTQpO2NvbnN0IG49e2V4cGlyZXM6dCxzZWN1cmU6ITB9O0lpLnNldChcImJjLWZhc3RsYW5lLXNlc3Npb25JZFwiLGUsbil9cmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpe0lpLnJlbW92ZShcImJjLWZhc3RsYW5lLXNlc3Npb25JZFwiKX1nZXRTdG9yYWdlU2Vzc2lvbklkKCl7cmV0dXJuIElpLmdldChcImJjLWZhc3RsYW5lLXNlc3Npb25JZFwiKXx8XCJcIn1tYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhKGUsdCl7dmFyIG4saSxyO2NvbnN0e2F1dGhlbnRpY2F0aW9uU3RhdGU6byxwcm9maWxlRGF0YTphfT10LHM9bnVsbD09PShyPW51bGw9PT0oaT1udWxsPT09KG49bnVsbD09YT92b2lkIDA6YS5jYXJkKXx8dm9pZCAwPT09bj92b2lkIDA6bi5wYXltZW50U291cmNlKXx8dm9pZCAwPT09aT92b2lkIDA6aS5jYXJkKXx8dm9pZCAwPT09cj92b2lkIDA6ci5iaWxsaW5nQWRkcmVzcyxkPW51bGw9PWE/dm9pZCAwOmEuc2hpcHBpbmdBZGRyZXNzLGM9bnVsbD09YT92b2lkIDA6YS5uYW1lLGw9bnVsbD09YT92b2lkIDA6YS5jYXJkLHU9ZD90aGlzLm1hcFBheVBhbFRvQmNBZGRyZXNzKGQuYWRkcmVzcyxkLm5hbWUsZC5waG9uZU51bWJlcik6dm9pZCAwLGg9cyYmYz90aGlzLm1hcFBheVBhbFRvQmNBZGRyZXNzKHMsYyxudWxsPT1kP3ZvaWQgMDpkLnBob25lTnVtYmVyKTp2b2lkIDAscD1sP3RoaXMubWFwUGF5UGFsVG9CY0luc3RydW1lbnQoZSxsKTpbXSxtPXRoaXMuZmlsdGVyQWRkcmVzc2VzKFt1LGhdKTtyZXR1cm57YXV0aGVudGljYXRpb25TdGF0ZTpvfHx1YS5VTlJFQ09HTklaRUQsYWRkcmVzc2VzOm0sYmlsbGluZ0FkZHJlc3M6aCxzaGlwcGluZ0FkZHJlc3M6dSxpbnN0cnVtZW50czpwfX1tYXBQYXlQYWxUb0JjSW5zdHJ1bWVudChlLHQpe2NvbnN0e2lkOm4scGF5bWVudFNvdXJjZTppfT10LHticmFuZDpyLGV4cGlyeTpvLGxhc3REaWdpdHM6YX09aS5jYXJkLFtzLGRdPW8uc3BsaXQoXCItXCIpO3JldHVyblt7YmlncGF5VG9rZW46bixicmFuZDpyLGRlZmF1bHRJbnN0cnVtZW50OiExLGV4cGlyeU1vbnRoOmQsZXhwaXJ5WWVhcjpzLGlpbjpcIlwiLGxhc3Q0OmEsbWV0aG9kOmUscHJvdmlkZXI6ZSx0cnVzdGVkU2hpcHBpbmdBZGRyZXNzOiExLHVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGU6aGkuUEFOLHR5cGU6XCJjYXJkXCJ9XX1tYXBCY1RvUGF5UGFsQWRkcmVzcyhlKXtyZXR1cm57Y29tcGFueToobnVsbD09ZT92b2lkIDA6ZS5jb21wYW55KXx8XCJcIixhZGRyZXNzTGluZTE6KG51bGw9PWU/dm9pZCAwOmUuYWRkcmVzczEpfHxcIlwiLGFkZHJlc3NMaW5lMjoobnVsbD09ZT92b2lkIDA6ZS5hZGRyZXNzMil8fFwiXCIsYWRtaW5BcmVhMToobnVsbD09ZT92b2lkIDA6ZS5zdGF0ZU9yUHJvdmluY2VDb2RlKXx8KG51bGw9PWU/dm9pZCAwOmUuc3RhdGVPclByb3ZpbmNlKXx8XCJcIixhZG1pbkFyZWEyOihudWxsPT1lP3ZvaWQgMDplLmNpdHkpfHxcIlwiLHBvc3RhbENvZGU6KG51bGw9PWU/dm9pZCAwOmUucG9zdGFsQ29kZSl8fFwiXCIsY291bnRyeUNvZGU6KG51bGw9PWU/dm9pZCAwOmUuY291bnRyeUNvZGUpfHxcIlwifX1tYXBQYXlQYWxUb0JjQWRkcmVzcyhlLHQsbixpKXtjb25zdFtyLG9dPXQuZnVsbE5hbWUuc3BsaXQoXCIgXCIpLGE9KG51bGw9PW4/dm9pZCAwOm4ubmF0aW9uYWxOdW1iZXIpfHxcIlwiLHM9KG51bGw9PW4/dm9pZCAwOm4uY291bnRyeUNvZGUpfHxcIlwiO3JldHVybntpZDpEYXRlLm5vdygpLHR5cGU6XCJwYXlwYWwtYWRkcmVzc1wiLGZpcnN0TmFtZTp0LmZpcnN0TmFtZXx8cnx8XCJcIixsYXN0TmFtZTp0Lmxhc3ROYW1lfHxvfHxcIlwiLGNvbXBhbnk6ZS5jb21wYW55fHxcIlwiLGFkZHJlc3MxOmUuYWRkcmVzc0xpbmUxLGFkZHJlc3MyOmUuYWRkcmVzc0xpbmUyfHxcIlwiLGNpdHk6ZS5hZG1pbkFyZWEyLHN0YXRlT3JQcm92aW5jZTplLmFkbWluQXJlYTEsc3RhdGVPclByb3ZpbmNlQ29kZTplLmFkbWluQXJlYTEsY291bnRyeTplLmNvdW50cnlDb2RlfHxcIlwiLGNvdW50cnlDb2RlOmUuY291bnRyeUNvZGV8fFwiXCIscG9zdGFsQ29kZTplLnBvc3RhbENvZGUscGhvbmU6cythLGN1c3RvbUZpZWxkczppfHxbXX19ZmlsdGVyQWRkcmVzc2VzKGUpe3JldHVybiBlLnJlZHVjZSgoZSx0KT0+dD9lLnNvbWUoZT0+dGhpcy5pc0VxdWFsQWRkcmVzc2VzKGUsdCkpP2U6Wy4uLmUsdF06ZSxbXSl9aXNFcXVhbEFkZHJlc3NlcyhlLHQpe3JldHVybiBBKHRoaXMubm9ybWFsaXplQWRkcmVzcyhlKSx0aGlzLm5vcm1hbGl6ZUFkZHJlc3ModCkpfW5vcm1hbGl6ZUFkZHJlc3MoZSl7cmV0dXJuIEcoZSxbXCJpZFwiLFwicGhvbmVcIl0pfX1mdW5jdGlvbiBtYSgpe3JldHVybiBuZXcgcGF9ZnVuY3Rpb24geWEoZSl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGV9ZnVuY3Rpb24gZ2EoZSx0KXtpZih0fHxlKXJldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuO2NvbnN0IGk9e30scj1IKGUucm9vdCx5YSksbz1IKGUuaW5wdXQseWEpLGE9SChlLnRvZ2dsZSx5YSkscz1IKG51bGw9PT0odD1lLnRleHQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmJvZHkseWEpLGQ9SChudWxsPT09KG49ZS50ZXh0KXx8dm9pZCAwPT09bj92b2lkIDA6bi5jYXB0aW9uLHlhKSxjPWUuYnJhbmRpbmc7cmV0dXJuIE9iamVjdC5rZXlzKHIpLmxlbmd0aCYmKGkucm9vdD1yKSxPYmplY3Qua2V5cyhvKS5sZW5ndGgmJihpLmlucHV0PW8pLE9iamVjdC5rZXlzKGEpLmxlbmd0aCYmKGkudG9nZ2xlPWEpLE9iamVjdC5rZXlzKHMpLmxlbmd0aCYmKGkudGV4dD17fSxpLnRleHQuYm9keT1zKSxPYmplY3Qua2V5cyhkKS5sZW5ndGgmJihpLnRleHQ9T2JqZWN0LmFzc2lnbih7fSxpLnRleHQpLGkudGV4dC5jYXB0aW9uPWQpLGMmJihpLmJyYW5kaW5nPWMpLGl9KGZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxzLGQsYyxsLHUsaCxwLG0seSxnLHYsZixTLF8sdyxDLEk7cmV0dXJue3Jvb3Q6e2JhY2tncm91bmRDb2xvclByaW1hcnk6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVSb290U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IpfHwobnVsbD09PShuPW51bGw9PXQ/dm9pZCAwOnQucm9vdCl8fHZvaWQgMD09PW4/dm9pZCAwOm4uYmFja2dyb3VuZENvbG9yUHJpbWFyeSksZXJyb3JDb2xvcjoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZVJvb3RTZXR0aW5nc0Vycm9yQ29sb3IpfHwobnVsbD09PShpPW51bGw9PXQ/dm9pZCAwOnQucm9vdCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZXJyb3JDb2xvciksZm9udEZhbWlseToobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRGYW1pbHkpfHwobnVsbD09PShyPW51bGw9PXQ/dm9pZCAwOnQucm9vdCl8fHZvaWQgMD09PXI/dm9pZCAwOnIuZm9udEZhbWlseSksZm9udFNpemVCYXNlOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lUm9vdFNldHRpbmdzRm9udFNpemUpfHwobnVsbD09PShvPW51bGw9PXQ/dm9pZCAwOnQucm9vdCl8fHZvaWQgMD09PW8/dm9pZCAwOm8uZm9udFNpemVCYXNlKSxwYWRkaW5nOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZyl8fChudWxsPT09KGE9bnVsbD09dD92b2lkIDA6dC5yb290KXx8dm9pZCAwPT09YT92b2lkIDA6YS5wYWRkaW5nKSxwcmltYXJ5Q29sb3I6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVSb290U2V0dGluZ3NQcmltYXJ5Q29sb3IpfHwobnVsbD09PShzPW51bGw9PXQ/dm9pZCAwOnQucm9vdCl8fHZvaWQgMD09PXM/dm9pZCAwOnMucHJpbWFyeUNvbG9yKX0saW5wdXQ6e2JvcmRlclJhZGl1czoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJSYWRpdXMpfHwobnVsbD09PShkPW51bGw9PXQ/dm9pZCAwOnQuaW5wdXQpfHx2b2lkIDA9PT1kP3ZvaWQgMDpkLmJvcmRlclJhZGl1cyksYm9yZGVyQ29sb3I6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyQ29sb3IpfHwobnVsbD09PShjPW51bGw9PXQ/dm9pZCAwOnQuaW5wdXQpfHx2b2lkIDA9PT1jP3ZvaWQgMDpjLmJvcmRlckNvbG9yKSxmb2N1c0JvcmRlckNvbG9yOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lSW5wdXRTZXR0aW5nc0ZvY3VzQm9yZGVyQmFzZSl8fChudWxsPT09KGw9bnVsbD09dD92b2lkIDA6dC5pbnB1dCl8fHZvaWQgMD09PWw/dm9pZCAwOmwuZm9jdXNCb3JkZXJDb2xvciksYmFja2dyb3VuZENvbG9yOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvcil8fChudWxsPT09KHU9bnVsbD09dD92b2lkIDA6dC5pbnB1dCl8fHZvaWQgMD09PXU/dm9pZCAwOnUuYmFja2dyb3VuZENvbG9yKSxib3JkZXJXaWR0aDoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJXaWR0aCl8fChudWxsPT09KGg9bnVsbD09dD92b2lkIDA6dC5pbnB1dCl8fHZvaWQgMD09PWg/dm9pZCAwOmguYm9yZGVyV2lkdGgpLHRleHRDb2xvckJhc2U6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZSl8fChudWxsPT09KHA9bnVsbD09dD92b2lkIDA6dC5pbnB1dCl8fHZvaWQgMD09PXA/dm9pZCAwOnAudGV4dENvbG9yQmFzZSl9LHRvZ2dsZTp7Y29sb3JQcmltYXJ5OihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclByaW1hcnkpfHwobnVsbD09PShtPW51bGw9PXQ/dm9pZCAwOnQudG9nZ2xlKXx8dm9pZCAwPT09bT92b2lkIDA6bS5jb2xvclByaW1hcnkpLGNvbG9yU2Vjb25kYXJ5OihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclNlY29uZGFyeSl8fChudWxsPT09KHk9bnVsbD09dD92b2lkIDA6dC50b2dnbGUpfHx2b2lkIDA9PT15P3ZvaWQgMDp5LmNvbG9yU2Vjb25kYXJ5KX0sdGV4dDp7Ym9keTp7Y29sb3I6KG51bGw9PWU/dm9pZCAwOmUuZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzQ29sb3IpfHwobnVsbD09PSh2PW51bGw9PT0oZz1udWxsPT10P3ZvaWQgMDp0LnRleHQpfHx2b2lkIDA9PT1nP3ZvaWQgMDpnLmJvZHkpfHx2b2lkIDA9PT12P3ZvaWQgMDp2LmNvbG9yKSxmb250U2l6ZToobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NGb250U2l6ZSl8fChudWxsPT09KFM9bnVsbD09PShmPW51bGw9PXQ/dm9pZCAwOnQudGV4dCl8fHZvaWQgMD09PWY/dm9pZCAwOmYuYm9keSl8fHZvaWQgMD09PVM/dm9pZCAwOlMuZm9udFNpemUpfSxjYXB0aW9uOntjb2xvcjoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZVRleHRDYXB0aW9uU2V0dGluZ3NDb2xvcil8fChudWxsPT09KHc9bnVsbD09PShfPW51bGw9PXQ/dm9pZCAwOnQudGV4dCl8fHZvaWQgMD09PV8/dm9pZCAwOl8uY2FwdGlvbil8fHZvaWQgMD09PXc/dm9pZCAwOncuY29sb3IpLGZvbnRTaXplOihudWxsPT1lP3ZvaWQgMDplLmZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0ZvbnRTaXplKXx8KG51bGw9PT0oST1udWxsPT09KEM9bnVsbD09dD92b2lkIDA6dC50ZXh0KXx8dm9pZCAwPT09Qz92b2lkIDA6Qy5jYXB0aW9uKXx8dm9pZCAwPT09ST92b2lkIDA6SS5mb250U2l6ZSl9fSxicmFuZGluZzoobnVsbD09ZT92b2lkIDA6ZS5mYXN0bGFuZUJyYW5kaW5nU2V0dGluZ3MpfHwobnVsbD09dD92b2lkIDA6dC5icmFuZGluZyl9fShlLHQpKX12YXIgdmE9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgZmF7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMucGF5cGFsQ29tbWVyY2VTZGs9dCx0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscz1ufWluaXRpYWxpemUoZSl7dmFyIHQ7cmV0dXJuIHZhKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHttZXRob2RJZDpuLHBheXBhbGNvbW1lcmNlZmFzdGxhbmU6aX09ZTtpZighbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt0cnl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG4pO2NvbnN0IGU9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkscj1lLmdldENhcnRPclRocm93KCksbz1lLmdldFBheW1lbnRNZXRob2RPclRocm93KG4pLGE9ISEobnVsbD09PSh0PW8uaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5pc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlKSxzPXlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsRmFzdGxhbmVTZGsobyxyLmN1cnJlbmN5LmNvZGUsci5pZCk7eWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKHMsYSx0aGlzLmdldEZhc3RsYW5lU3R5bGVzKG4saSkpfWNhdGNoKGUpe31yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gdmEodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX0pfXNpZ25JbihlLHQpe3JldHVybiB2YSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGUsdCl9KX1zaWduT3V0KGUpe3JldHVybiB2YSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihlKX0pfWV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoZSl7cmV0dXJuIHZhKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZDp0LGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2s6bixtZXRob2RJZDppfT1lfHx7fTtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBuKXRocm93IG5ldyBybignVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcImNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2tcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgYW5kIGl0IG11c3QgYmUgYSBmdW5jdGlvbi4nKTtpZih0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDdXN0b21lck9yVGhyb3coKS5pc0d1ZXN0KXt0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0KCk7dHJ5e3lpZWxkIHRoaXMucnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhpKX1jYXRjaChlKXt9fW4oKX0pfXJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coZSl7cmV0dXJuIHZhKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLG49dC5nZXRDYXJ0T3JUaHJvdygpLmlkLGk9dC5nZXRDdXN0b21lcigpLHI9dC5nZXRCaWxsaW5nQWRkcmVzcygpLG89KG51bGw9PWk/dm9pZCAwOmkuZW1haWwpfHwobnVsbD09cj92b2lkIDA6ci5lbWFpbCl8fFwiXCIse2N1c3RvbWVyQ29udGV4dElkOmF9PXlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLmxvb2t1cEN1c3RvbWVyT3JUaHJvdyhvKSxzPXlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLnRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KGEpLGQ9cy5hdXRoZW50aWNhdGlvblN0YXRlPT09dWEuQ0FOQ0VMRUQ7eWllbGQgdGhpcy51cGRhdGVDdXN0b21lckRhdGFTdGF0ZShlLHMpLGQ/dGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpOnRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLnVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQobil9KX11cGRhdGVDdXN0b21lckRhdGFTdGF0ZShlLHQpe3ZhciBuO3JldHVybiB2YSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLHthdXRoZW50aWNhdGlvblN0YXRlOnIsYWRkcmVzc2VzOm8sYmlsbGluZ0FkZHJlc3M6YSxzaGlwcGluZ0FkZHJlc3M6cyxpbnN0cnVtZW50czpkfT10aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5tYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhKGUsdCk7aWYoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHthdXRoZW50aWNhdGlvblN0YXRlOnIsYWRkcmVzc2VzOm8saW5zdHJ1bWVudHM6ZH0pLGEmJih5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYSkpLHMmJmkubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoPjApe2NvbnN0IHQ9eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzKSxpPXQuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSkse2lzRmFzdGxhbmVTaGlwcGluZ09wdGlvbkF1dG9TZWxlY3RFbmFibGVkOnJ9PWkuaW5pdGlhbGl6YXRpb25EYXRhfHx7fSxvPXQuZ2V0Q29uc2lnbm1lbnRzKCl8fFtdLGE9KG51bGw9PT0obj1vWzBdKXx8dm9pZCAwPT09bj92b2lkIDA6bi5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMpfHxbXSxkPWFbMF0sYz1hLmZpbmQoZT0+ZS5pc1JlY29tbWVuZGVkKTtpZigoY3x8ZCkmJnIpe2NvbnN0IGU9KG51bGw9PWM/dm9pZCAwOmMuaWQpfHxkLmlkO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihlKX19fSl9Z2V0RmFzdGxhbmVTdHlsZXMoZSx0KXtjb25zdCBuPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KGUpLHtmYXN0bGFuZVN0eWxlczppLGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZDpyfT1uLmluaXRpYWxpemF0aW9uRGF0YXx8e307cmV0dXJuIGdhKHI/aTp7fSxudWxsPT10P3ZvaWQgMDp0LnN0eWxlcyl9fWNvbnN0IFNhPW5uKGU9Pm5ldyBmYShlLHJhKCksbWEoKSksW3tpZDpcInBheXBhbGNvbW1lcmNlYWNjZWxlcmF0ZWRjaGVja291dFwifSx7aWQ6XCJwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzXCJ9XSk7dmFyIF9hLHdhLENhLElhLGJhLFBhLE9hLEVhLEFhPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIGthe2NvbnN0cnVjdG9yKGUsdD13aW5kb3cpe3RoaXMuc2NyaXB0TG9hZGVyPWUsdGhpcy5zdHJpcGVXaW5kb3c9dH1nZXRTdHJpcGVDbGllbnQoZSx0LG4pe3JldHVybiBBYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYodGhpcy5zdHJpcGVXaW5kb3cuYmNTdHJpcGVDbGllbnQpcmV0dXJuIHRoaXMuc3RyaXBlV2luZG93LmJjU3RyaXBlQ2xpZW50O2NvbnN0IGk9eWllbGQgdGhpcy5sb2FkKCkse3N0cmlwZVB1Ymxpc2hhYmxlS2V5OnIsc3RyaXBlQ29ubmVjdGVkQWNjb3VudDpvfT1lLGE9aShyLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG8/e3N0cmlwZUFjY291bnQ6b306e30pLHQ/e2JldGFzOnR9Ont9KSxuP3thcGlWZXJzaW9uOm59Ont9KSk7cmV0dXJuIE9iamVjdC5hc3NpZ24odGhpcy5zdHJpcGVXaW5kb3cse2JjU3RyaXBlQ2xpZW50OmF9KSxhfSl9Z2V0RWxlbWVudHMoZSx0KXtyZXR1cm4gQWEodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2xldCBuPXRoaXMuc3RyaXBlV2luZG93LmJjU3RyaXBlRWxlbWVudHM7cmV0dXJuIG4/eWllbGQgdGhpcy51cGRhdGVTdHJpcGVFbGVtZW50cyh0KToobj1lLmVsZW1lbnRzKHQpLE9iamVjdC5hc3NpZ24odGhpcy5zdHJpcGVXaW5kb3cse2JjU3RyaXBlRWxlbWVudHM6bn0pKSxufSl9dXBkYXRlU3RyaXBlRWxlbWVudHMoZSl7cmV0dXJuIEFhKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuc3RyaXBlV2luZG93LmJjU3RyaXBlRWxlbWVudHM7dCYmKHQudXBkYXRlKGUpLHlpZWxkIHQuZmV0Y2hVcGRhdGVzKCkpfSl9bG9hZCgpe3JldHVybiBBYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXRoaXMuc3RyaXBlV2luZG93LlN0cmlwZSYmKHlpZWxkIHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoXCJodHRwczovL2pzLnN0cmlwZS5jb20vdjMvXCIpLCF0aGlzLnN0cmlwZVdpbmRvdy5TdHJpcGUpKXRocm93IG5ldyBYdDtyZXR1cm4gdGhpcy5zdHJpcGVXaW5kb3cuU3RyaXBlfSl9fWZ1bmN0aW9uIFRhKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmXCJpbml0aWFsaXphdGlvbkRhdGFcImluIGUmJnZvaWQgMCE9PWUuaW5pdGlhbGl6YXRpb25EYXRhJiZudWxsIT09ZS5pbml0aWFsaXphdGlvbkRhdGEmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmluaXRpYWxpemF0aW9uRGF0YSYmXCJzdHJpcGVQdWJsaXNoYWJsZUtleVwiaW4gZS5pbml0aWFsaXphdGlvbkRhdGEmJlwic3RyaXBlQ29ubmVjdGVkQWNjb3VudFwiaW4gZS5pbml0aWFsaXphdGlvbkRhdGEmJlwic2hvcHBlckxhbmd1YWdlXCJpbiBlLmluaXRpYWxpemF0aW9uRGF0YSYmdm9pZCAwIT09ZS5pbml0aWFsaXphdGlvbkRhdGEuc3RyaXBlUHVibGlzaGFibGVLZXkmJnZvaWQgMCE9PWUuaW5pdGlhbGl6YXRpb25EYXRhLnN0cmlwZUNvbm5lY3RlZEFjY291bnQmJnZvaWQgMCE9PWUuaW5pdGlhbGl6YXRpb25EYXRhLnNob3BwZXJMYW5ndWFnZX1mdW5jdGlvbiBEYShlKXtyZXR1cm5cInN0cmlwZUxpbmtBdXRoZW50aWNhdGlvblN0YXRlXCJpbiBlfSFmdW5jdGlvbihlKXtlLlNISVBQSU5HPVwic2hpcHBpbmdcIixlLkJJTExJTkc9XCJiaWxsaW5nXCJ9KF9hfHwoX2E9e30pKSxmdW5jdGlvbihlKXtlLlNQTElUPVwic3BsaXRcIixlLkZVTEw9XCJmdWxsXCIsZS5PUkdBTklaQVRJT049XCJvcmdhbml6YXRpb25cIn0od2F8fCh3YT17fSkpLGZ1bmN0aW9uKGUpe2UuQ3JlZGl0Q2FyZD1cImNhcmRcIixlLkxpbms9XCJsaW5rXCIsZS5FUFM9XCJlcHNcIixlLkdSQUJQQVk9XCJncmFicGF5XCIsZS5CQU5DT05UQUNUPVwiYmFuY29udGFjdFwiLGUuSURFQUw9XCJpZGVhbFwiLGUuQUxJUEFZPVwiYWxpcGF5XCIsZS5LTEFSTkE9XCJrbGFybmFcIixlLk9DUz1cIm9wdGltaXplZF9jaGVja291dFwifShDYXx8KENhPXt9KSksZnVuY3Rpb24oZSl7ZS5ORVZFUj1cIm5ldmVyXCIsZS5BVVRPPVwiYXV0b1wiLGUuQUxXQVlTPVwiYWx3YXlzXCIsZS5QQVlNRU5UPVwicGF5bWVudFwiLGUuSUZfUkVRVUlSRUQ9XCJpZl9yZXF1aXJlZFwifShJYXx8KElhPXt9KSksZnVuY3Rpb24oZSl7ZS5QQVlNRU5UPVwicGF5bWVudFwiLGUuQVVUSEVOVElDQVRJT049XCJsaW5rQXV0aGVudGljYXRpb25cIixlLlNISVBQSU5HPVwiYWRkcmVzc1wiLGUuRVhQUkVTU19DSEVDS09VVD1cImV4cHJlc3NDaGVja291dFwifShiYXx8KGJhPXt9KSksZnVuY3Rpb24oZSl7ZS5SRVFVSVJFU19QQVlNRU5UX01FVEhPRD1cInJlcXVpcmVzX3BheW1lbnRfbWV0aG9kXCIsZS5SRVFVSVJFU19DT05GSVJNQVRJT049XCJyZXF1aXJlc19jb25maXJtYXRpb25cIixlLlJFUVVJUkVTX0FDVElPTj1cInJlcXVpcmVzX2FjdGlvblwiLGUuUFJPQ0VTU0lORz1cInByb2Nlc3NpbmdcIixlLlNVQ0NFRURFRD1cInN1Y2NlZWRlZFwiLGUuQ0FOQ0VMRUQ9XCJjYW5jZWxlZFwifShQYXx8KFBhPXt9KSksZnVuY3Rpb24oZSl7ZS5DTElDSz1cImNsaWNrXCIsZS5DSEFOR0U9XCJjaGFuZ2VcIixlLlJFQURZPVwicmVhZHlcIixlLlNISVBQSU5HX0FERFJFU1NfQ0hBTkdFPVwic2hpcHBpbmdhZGRyZXNzY2hhbmdlXCIsZS5TSElQUElOR19SQVRFX0NIQU5HRT1cInNoaXBwaW5ncmF0ZWNoYW5nZVwiLGUuQ09ORklSTT1cImNvbmZpcm1cIixlLkNBTkNFTD1cImNhbmNlbFwiLGUuTE9BREVSX1NUQVJUPVwibG9hZGVyc3RhcnRcIn0oT2F8fChPYT17fSkpLGZ1bmN0aW9uKGUpe2UuT05fU0VTU0lPTj1cIm9uX3Nlc3Npb25cIixlLk9GRl9TRVNTSU9OPVwib2ZmX3Nlc3Npb25cIn0oRWF8fChFYT17fSkpO2NvbnN0IE1hPVtcInBheW1lbnRfZWxlbWVudF9iZXRhXzJcIixcImFsaXBheV9wbV9iZXRhXzFcIixcImxpbmtfZGVmYXVsdF9pbnRlZ3JhdGlvbl9iZXRhXzFcIixcInNoaXBwaW5nX2FkZHJlc3NfZWxlbWVudF9iZXRhXzFcIixcImFkZHJlc3NfZWxlbWVudF9iZXRhXzFcIl0semE9XCIyMDIwLTAzLTAyO2FsaXBheV9iZXRhPXYxO2xpbmtfYmV0YT12MVwiO2NsYXNzIE5he2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5zY3JpcHRMb2FkZXI9dH1pbml0aWFsaXplKGUpe3ZhciB0LG4saSxyLG87cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe2xldCBuO2lmKCFlLnN0cmlwZXVwZSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJvcHRpb25zXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0e2NvbnRhaW5lcjppLGdhdGV3YXlJZDpyLG1ldGhvZElkOm8sb25FbWFpbENoYW5nZTphLGdldFN0eWxlczpzLGlzTG9hZGluZzpkfT1lLnN0cmlwZXVwZTtPYmplY3QuZW50cmllcyhlLnN0cmlwZXVwZSkuZm9yRWFjaCgoW2UsdF0pPT57aWYoIXQpdGhyb3cgbmV3IHJuKGBVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwiJHtlfVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gKX0pLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChyLHtwYXJhbXM6e21ldGhvZDpvfX0pO2NvbnN0IGM9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksbD1jLmdldFBheW1lbnRNZXRob2RPclRocm93KG8scikse2NsaWVudFRva2VuOnV9PWw7aWYoIVRhKGwpfHwhdSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRUb2tlbik7Y29uc3R7ZW1haWw6aH09Yy5nZXRDdXN0b21lck9yVGhyb3coKSxwPWMuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJPclRocm93KCksbT0oRGEocCk/cDp7fSkuc3RyaXBlTGlua0F1dGhlbnRpY2F0aW9uU3RhdGU7aWYoIWgpe2xldCBlO2NvbnN0IHI9XCJmdW5jdGlvblwiPT10eXBlb2YgcyYmcygpO2U9cj97dmFyaWFibGVzOntjb2xvclByaW1hcnk6ci5maWVsZElubmVyU2hhZG93LGNvbG9yQmFja2dyb3VuZDpyLmZpZWxkQmFja2dyb3VuZCxjb2xvclRleHQ6ci5sYWJlbFRleHQsY29sb3JEYW5nZXI6ci5maWVsZEVycm9yVGV4dCxjb2xvclRleHRTZWNvbmRhcnk6ci5sYWJlbFRleHQsY29sb3JUZXh0UGxhY2Vob2xkZXI6ci5maWVsZFBsYWNlaG9sZGVyVGV4dH0scnVsZXM6e1wiLklucHV0XCI6e2JvcmRlckNvbG9yOnIuZmllbGRCb3JkZXIsY29sb3I6ci5maWVsZFRleHQsYm94U2hhZG93OnIuZmllbGRJbm5lclNoYWRvd319fTp7fSxuPXlpZWxkIHRoaXMuc2NyaXB0TG9hZGVyLmdldFN0cmlwZUNsaWVudChsLmluaXRpYWxpemF0aW9uRGF0YSxNYSx6YSksdGhpcy5fc3RyaXBlRWxlbWVudHM9eWllbGQgdGhpcy5zY3JpcHRMb2FkZXIuZ2V0RWxlbWVudHMobix7Y2xpZW50U2VjcmV0OnUsYXBwZWFyYW5jZTplfSk7Y29uc3R7Z2V0QmlsbGluZ0FkZHJlc3M6byxnZXRDb25zaWdubWVudHM6Y309dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksaD1jKCkscD1udWxsPT09KHQ9bnVsbD09aD92b2lkIDA6aFswXSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaWQse2VtYWlsOnl9PW8oKXx8e30sZz15P3tkZWZhdWx0VmFsdWVzOnttb2RlOl9hLlNISVBQSU5HLGVtYWlsOnl9fTp7fSx2PXRoaXMuX3N0cmlwZUVsZW1lbnRzLmdldEVsZW1lbnQoYmEuQVVUSEVOVElDQVRJT04pfHx0aGlzLl9zdHJpcGVFbGVtZW50cy5jcmVhdGUoYmEuQVVUSEVOVElDQVRJT04sZyk7di5vbihPYS5DSEFOR0UsZT0+e2lmKCEoXCJhdXRoZW50aWNhdGVkXCJpbiBlKSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ0N1c3RvbWVyKTt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe3N0cmlwZUxpbmtBdXRoZW50aWNhdGlvblN0YXRlOmUuYXV0aGVudGljYXRlZH0pLGUuY29tcGxldGU/YShlLmF1dGhlbnRpY2F0ZWQsZS52YWx1ZS5lbWFpbCk6YSghMSxcIlwiKSxkJiZkKCExKSx2b2lkIDA9PT1tJiZlLmF1dGhlbnRpY2F0ZWQmJnAmJnRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5kZWxldGVDb25zaWdubWVudChwKX0pLHYubW91bnQoYCMke2l9YCl9fSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSl9ZGVpbml0aWFsaXplKCl7dmFyIGUsdDtyZXR1cm4gbnVsbD09PSh0PW51bGw9PT0oZT10aGlzLl9zdHJpcGVFbGVtZW50cyl8fHZvaWQgMD09PWU/dm9pZCAwOmUuZ2V0RWxlbWVudChiYS5BVVRIRU5USUNBVElPTikpfHx2b2lkIDA9PT10fHx0LnVubW91bnQoKSxQcm9taXNlLnJlc29sdmUoKX1zaWduSW4oZSx0KXtyZXR1cm4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGUsdCksUHJvbWlzZS5yZXNvbHZlKCl9c2lnbk91dChlKXtyZXR1cm4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihlKSxQcm9taXNlLnJlc29sdmUoKX1leGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KGUpe3ZhciB0O3JldHVybiBudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrKXx8dm9pZCAwPT09dHx8dC5jYWxsKGUpLFByb21pc2UucmVzb2x2ZSgpfX1jb25zdCB4YT1ubihlPT5uZXcgTmEoZSxuZXcga2EoYSgpKSksW3tpZDpcInN0cmlwZXVwZVwifV0pLEZhPXtzaXplOjcwLGNvbG9yOlwiI2Q5ZDlkOVwiLGJhY2tncm91bmRDb2xvcjpcIiNmZmZmZmZcIn0sUmE9e3Bvc2l0aW9uOlwiZml4ZWRcIixcImJhY2tncm91bmQtY29sb3JcIjpcInJnYmEoMCwgMCwgMCwgMC40KVwiLFwiei1pbmRleFwiOlwiMTAwMFwifSxMYT1cImVtYmVkZGVkLWNoZWNrb3V0LWxvYWRpbmctaW5kaWNhdG9yLXJvdGF0aW9uXCI7Y2xhc3MgQmF7Y29uc3RydWN0b3IoZSl7dGhpcy5zdHlsZXM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LEZhKSxlJiZlLnN0eWxlcyksdGhpcy5jb250YWluZXJTdHlsZXM9T2JqZWN0LmFzc2lnbih7fSxlJiZlLmNvbnRhaW5lclN0eWxlcyksdGhpcy5kZWZpbmVBbmltYXRpb24oKSx0aGlzLmNvbnRhaW5lcj10aGlzLmJ1aWxkQ29udGFpbmVyKCksdGhpcy5pbmRpY2F0b3I9dGhpcy5idWlsZEluZGljYXRvcigpLHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuaW5kaWNhdG9yKX1zaG93KGUpe2lmKGUpe2NvbnN0IHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGF0dGFjaCB0aGUgbG9hZGluZyBpbmRpY2F0b3IgYmVjYXVzZSB0aGUgcGFyZW50IElEIGlzIG5vdCB2YWxpZC5cIik7dC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcil9dGhpcy5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eT1cInZpc2libGVcIix0aGlzLmNvbnRhaW5lci5zdHlsZS5vcGFjaXR5PVwiMVwifWhpZGUoKXtjb25zdCBlPSgpPT57dGhpcy5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsZSl9O3RoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsZSksdGhpcy5jb250YWluZXIuc3R5bGUub3BhY2l0eT1cIjBcIn1idWlsZENvbnRhaW5lcigpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gZS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixlLnN0eWxlLmJvdHRvbT1cIjBcIixlLnN0eWxlLmxlZnQ9XCIwXCIsZS5zdHlsZS5oZWlnaHQ9XCIxMDAlXCIsZS5zdHlsZS53aWR0aD1cIjEwMCVcIixlLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixlLnN0eWxlLnJpZ2h0PVwiMFwiLGUuc3R5bGUudG9wPVwiMFwiLGUuc3R5bGUudHJhbnNpdGlvbj1cImFsbCAyNTBtcyBlYXNlLW91dFwiLGUuc3R5bGUub3BhY2l0eT1cIjBcIix0aGlzLnNldFN0eWxlQXR0cmlidXRlKGUsdGhpcy5jb250YWluZXJTdHlsZXMpLGV9YnVpbGRJbmRpY2F0b3IoKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIGUuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsZS5zdHlsZS53aWR0aD1gJHt0aGlzLnN0eWxlcy5zaXplfXB4YCxlLnN0eWxlLmhlaWdodD1gJHt0aGlzLnN0eWxlcy5zaXplfXB4YCxlLnN0eWxlLmJvcmRlclJhZGl1cz1gJHt0aGlzLnN0eWxlcy5zaXplfXB4YCxlLnN0eWxlLmJvcmRlcj1cInNvbGlkIDFweFwiLGUuc3R5bGUuYm9yZGVyQ29sb3I9YCR7dGhpcy5zdHlsZXMuYmFja2dyb3VuZENvbG9yfSAke3RoaXMuc3R5bGVzLmJhY2tncm91bmRDb2xvcn0gJHt0aGlzLnN0eWxlcy5jb2xvcn0gJHt0aGlzLnN0eWxlcy5jb2xvcn1gLGUuc3R5bGUubWFyZ2luPVwiMCBhdXRvXCIsZS5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsZS5zdHlsZS5sZWZ0PVwiMFwiLGUuc3R5bGUucmlnaHQ9XCIwXCIsZS5zdHlsZS50b3A9XCI1MCVcIixlLnN0eWxlLnRyYW5zZm9ybT1cInRyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDBkZWcpXCIsZS5zdHlsZS50cmFuc2Zvcm1TdHlsZT1cInByZXNlcnZlLTNkXCIsZS5zdHlsZS5hbmltYXRpb249YCR7TGF9IDUwMG1zIGluZmluaXRlIGN1YmljLWJlemllcigwLjY5LCAwLjMxLCAwLjU2LCAwLjgzKWAsZX1zZXRTdHlsZUF0dHJpYnV0ZShlLHQpe09iamVjdC5rZXlzKHQpLmZvckVhY2gobj0+e2Uuc3R5bGUuc2V0UHJvcGVydHkobix0W25dKX0pfWRlZmluZUFuaW1hdGlvbigpe3ZhciBlO2lmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKExhKSlyZXR1cm47Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7dC5pZD1MYSxudWxsPT09KGU9ZG9jdW1lbnQuaGVhZCl8fHZvaWQgMD09PWV8fGUuYXBwZW5kQ2hpbGQodCksdC5zaGVldCBpbnN0YW5jZW9mIENTU1N0eWxlU2hlZXQmJnQuc2hlZXQuaW5zZXJ0UnVsZShgXFxuICAgICAgICAgICAgICAgIEBrZXlmcmFtZXMgJHtMYX0ge1xcbiAgICAgICAgICAgICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDBkZWcpOyB9XFxuICAgICAgICAgICAgICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSgzNjBkZWcpOyB9XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBgLDApfX12YXIgamE9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgVWF7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnNjcmlwdExvYWRlcj10LHRoaXMuaXNNb3VudGVkPSExfWRlaW5pdGlhbGl6ZSgpe3ZhciBlO251bGw9PT0oZT10aGlzLmNoZWNrb3V0RXZlbnRzVW5zdWJzY3JpYmUpfHx2b2lkIDA9PT1lfHxlLmNhbGwodGhpcyksdGhpcy5pc01vdW50ZWQ9ITF9aW5pdENoZWNrb3V0RXZlbnRzU3Vic2NyaXB0aW9uKGUsdCxuLGkpe3RoaXMuY2hlY2tvdXRFdmVudHNVbnN1YnNjcmliZT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3Vic2NyaWJlKCgpPT5qYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dmFyIHI7Y29uc3Qgbz1udWxsPT1pP3ZvaWQgMDppLmdldEVsZW1lbnQoYmEuUEFZTUVOVCk7aWYobyl7dHJ5e3lpZWxkIHRoaXMudXBkYXRlU3RyaXBlUGF5bWVudEludGVudChlLHQpfWNhdGNoKGUpe3JldHVybiB0aGlzLmlzTW91bnRlZCYmKG8udW5tb3VudCgpLHRoaXMuaXNNb3VudGVkPSExKSx2b2lkKGUgaW5zdGFuY2VvZiBFcnJvciYmKG51bGw9PT0ocj1uLm9uRXJyb3IpfHx2b2lkIDA9PT1yfHxyLmNhbGwobixlKSkpfXRoaXMuaXNNb3VudGVkfHwoeWllbGQgbnVsbD09aT92b2lkIDA6aS5mZXRjaFVwZGF0ZXMoKSx0aGlzLm1vdW50RWxlbWVudChvLG4uY29udGFpbmVySWQpKX19KSxlPT57dmFyIHQ7cmV0dXJuIG51bGw9PT0odD1lLmdldENoZWNrb3V0KCkpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm91dHN0YW5kaW5nQmFsYW5jZX0sZT0+e3ZhciB0O3JldHVybiBudWxsPT09KHQ9ZS5nZXRDaGVja291dCgpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jb3Vwb25zfSl9bW91bnRFbGVtZW50KGUsdCl7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCkmJihlLm1vdW50KGAjJHt0fWApLHRoaXMuaXNNb3VudGVkPSEwKX1tYXBBcHBlYXJhbmNlVmFyaWFibGVzKGUpe3JldHVybntjb2xvclByaW1hcnk6ZS5maWVsZElubmVyU2hhZG93LGNvbG9yQmFja2dyb3VuZDplLmZpZWxkQmFja2dyb3VuZCxjb2xvclRleHQ6ZS5sYWJlbFRleHQsY29sb3JEYW5nZXI6ZS5maWVsZEVycm9yVGV4dCxjb2xvclRleHRTZWNvbmRhcnk6ZS5sYWJlbFRleHQsY29sb3JUZXh0UGxhY2Vob2xkZXI6ZS5maWVsZFBsYWNlaG9sZGVyVGV4dCxjb2xvckljb246ZS5maWVsZFBsYWNlaG9sZGVyVGV4dH19bWFwSW5wdXRBcHBlYXJhbmNlUnVsZXMoZSl7cmV0dXJue2JvcmRlckNvbG9yOmUuZmllbGRCb3JkZXIsY29sb3I6ZS5maWVsZFRleHQsYm94U2hhZG93OmUuZmllbGRJbm5lclNoYWRvd319dGhyb3dTdHJpcGVFcnJvcihlKXtpZihcIm9iamVjdFwiPT10eXBlb2YodD1lKSYmbnVsbCE9PXQmJlwidHlwZVwiaW4gdCYmKHRoaXMudGhyb3dEaXNwbGF5YWJsZVN0cmlwZUVycm9yKGUpLHRoaXMuaXNDYW5jZWxsYXRpb25FcnJvcihlKSkpdGhyb3cgbmV3IE1uO3ZhciB0O3Rocm93IG5ldyBMaX10aHJvd0Rpc3BsYXlhYmxlU3RyaXBlRXJyb3IoZSl7aWYoUChbXCJjYXJkX2Vycm9yXCIsXCJpbnZhbGlkX3JlcXVlc3RfZXJyb3JcIixcInZhbGlkYXRpb25fZXJyb3JcIl0sZS50eXBlKSl0aHJvdyBuZXcgRXJyb3IoZS5tZXNzYWdlKX1pc0NhbmNlbGxhdGlvbkVycm9yKGUpe3ZhciB0O2NvbnN0IG49bnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUucGF5bWVudF9pbnRlbnQubGFzdF9wYXltZW50X2Vycm9yKXx8dm9pZCAwPT09dD92b2lkIDA6dC5tZXNzYWdlO3JldHVybiEhbiYmLTEhPT1uLmluZGV4T2YoXCJjYW5jZWxlZFwiKX10aHJvd1BheW1lbnRDb25maXJtYXRpb25Qcm9jZWVkTWVzc2FnZSgpe3Rocm93IG5ldyBMaShcIldlJ3ZlIHJlY2VpdmVkIHlvdXIgb3JkZXIgYW5kIGFyZSBwcm9jZXNzaW5nIHlvdXIgcGF5bWVudC4gT25jZSB0aGUgcGF5bWVudCBpcyB2ZXJpZmllZCwgeW91ciBvcmRlciB3aWxsIGJlIGNvbXBsZXRlZC4gV2Ugd2lsbCBzZW5kIHlvdSBhbiBlbWFpbCB3aGVuIGl0J3MgY29tcGxldGVkLiBQbGVhc2Ugbm90ZSwgdGhpcyBwcm9jZXNzIG1heSB0YWtlIGEgZmV3IG1pbnV0ZXMgZGVwZW5kaW5nIG9uIHRoZSBwcm9jZXNzaW5nIHRpbWVzIG9mIHlvdXIgY2hvc2VuIG1ldGhvZC5cIil9aXNQYXltZW50Q29tcGxldGVkKGUsdCl7cmV0dXJuIGphKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGk9bi5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKSx7ZmVhdHVyZXM6cn09bi5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzO2lmKCFpLmNsaWVudFRva2VufHwhdHx8IXJbXCJQSS02MjYuQmxvY2tfdW5uZWNlc3NhcnlfcGF5bWVudF9jb25maXJtYXRpb25fZm9yX1N0cmlwZVVQRVwiXSlyZXR1cm4hMTtjb25zdHtwYXltZW50SW50ZW50Om99PXlpZWxkIHQucmV0cmlldmVQYXltZW50SW50ZW50KGkuY2xpZW50VG9rZW4pO3JldHVybihudWxsPT1vP3ZvaWQgMDpvLnN0YXR1cyk9PT1QYS5TVUNDRUVERUR9KX1tYXBTdHJpcGVQYXltZW50RGF0YShlLHQsbj0hMSl7Y29uc3QgaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRCaWxsaW5nQWRkcmVzcygpLHtmaXJzdE5hbWU6cixsYXN0TmFtZTpvLGVtYWlsOmF9PWl8fHt9LHM9dGhpcy5fbWFwU3RyaXBlQWRkcmVzcyhpKTtpZighZSl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtpZighKGEmJnMmJnMuY2l0eSYmcy5jb3VudHJ5JiZyJiZvKSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ0JpbGxpbmdBZGRyZXNzKTtyZXR1cm57ZWxlbWVudHM6ZSxyZWRpcmVjdDpJYS5JRl9SRVFVSVJFRCxjb25maXJtUGFyYW1zOk9iamVjdC5hc3NpZ24oe3BheW1lbnRfbWV0aG9kX2RhdGE6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG4/e2FsbG93X3JlZGlzcGxheTpcImFsd2F5c1wifTp7fSkse2JpbGxpbmdfZGV0YWlsczp7ZW1haWw6YSxhZGRyZXNzOnMsbmFtZTpgJHtyfSAke299YH19KX0sdCYme3JldHVybl91cmw6dH0pfX1pc0FkZGl0aW9uYWxBY3Rpb25FcnJvcihlKXtyZXR1cm4gWihlLHtjb2RlOlwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWRcIn0pfWlzUmVkaXJlY3RBY3Rpb24oZSl7Y29uc3R7dHlwZTp0LGRhdGE6e3JlZGlyZWN0X3VybDpufX09ZTtyZXR1cm5cInJlZGlyZWN0X3RvX3VybFwiPT09dCYmISFufWlzT25QYWdlQWRkaXRpb25hbEFjdGlvbihlKXtjb25zdHt0eXBlOnQsZGF0YTp7dG9rZW46bn19PWU7cmV0dXJuXCJhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlc19wYXltZW50X21ldGhvZFwiPT09dCYmISFufXVwZGF0ZVN0cmlwZVBheW1lbnRJbnRlbnQoZSx0KXtyZXR1cm4gamEodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGUse3BhcmFtczp7bWV0aG9kOnR9fSkse2NsaWVudFRva2VuOml9PW4uZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codCk7aWYoIWkpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTt0aGlzLnNjcmlwdExvYWRlci51cGRhdGVTdHJpcGVFbGVtZW50cyh7Y2xpZW50U2VjcmV0Oml9KX0pfV9tYXBTdHJpcGVBZGRyZXNzKGUpe2lmKGUpe2NvbnN0e2NpdHk6dCxhZGRyZXNzMTpuLGFkZHJlc3MyOmksY291bnRyeUNvZGU6cixwb3N0YWxDb2RlOm8sc3RhdGVPclByb3ZpbmNlQ29kZTphfT1lO3JldHVybiBPYmplY3QuYXNzaWduKHtjaXR5OnQsY291bnRyeTpyLHBvc3RhbF9jb2RlOm8sbGluZTE6bixsaW5lMjppfSxhP3tzdGF0ZTphfTp7fSl9dGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdCaWxsaW5nQWRkcmVzcyl9fWNsYXNzIHFhe2NvbnN0cnVjdG9yKGUpe3RoaXMuX2RlY2ltYWxQbGFjZXM9ZX10b0ludGVnZXIoZSl7cmV0dXJuIE1hdGgucm91bmQoZSpNYXRoLnBvdygxMCx0aGlzLl9kZWNpbWFsUGxhY2VzKSl9fWNvbnN0IFZhPVtcIkFDXCIsXCJBRFwiLFwiQUVcIixcIkFGXCIsXCJBR1wiLFwiQUlcIixcIkFMXCIsXCJBTVwiLFwiQU9cIixcIkFRXCIsXCJBUlwiLFwiQVRcIixcIkFVXCIsXCJBV1wiLFwiQVhcIixcIkFaXCIsXCJCQVwiLFwiQkJcIixcIkJEXCIsXCJCRVwiLFwiQkZcIixcIkJHXCIsXCJCSFwiLFwiQklcIixcIkJKXCIsXCJCTFwiLFwiQk1cIixcIkJOXCIsXCJCT1wiLFwiQlFcIixcIkJSXCIsXCJCU1wiLFwiQlRcIixcIkJWXCIsXCJCV1wiLFwiQllcIixcIkJaXCIsXCJDQVwiLFwiQ0RcIixcIkNGXCIsXCJDR1wiLFwiQ0hcIixcIkNJXCIsXCJDS1wiLFwiQ0xcIixcIkNNXCIsXCJDTlwiLFwiQ09cIixcIkNSXCIsXCJDVlwiLFwiQ1dcIixcIkNZXCIsXCJDWlwiLFwiREVcIixcIkRKXCIsXCJES1wiLFwiRE1cIixcIkRPXCIsXCJEWlwiLFwiRUNcIixcIkVFXCIsXCJFR1wiLFwiRUhcIixcIkVSXCIsXCJFU1wiLFwiRVRcIixcIkZJXCIsXCJGSlwiLFwiRktcIixcIkZPXCIsXCJGUlwiLFwiR0FcIixcIkdCXCIsXCJHRFwiLFwiR0VcIixcIkdGXCIsXCJHR1wiLFwiR0hcIixcIkdJXCIsXCJHTFwiLFwiR01cIixcIkdOXCIsXCJHUFwiLFwiR1FcIixcIkdSXCIsXCJHU1wiLFwiR1RcIixcIkdVXCIsXCJHV1wiLFwiR1lcIixcIkhLXCIsXCJITlwiLFwiSFJcIixcIkhUXCIsXCJIVVwiLFwiSURcIixcIklFXCIsXCJJTFwiLFwiSU1cIixcIklOXCIsXCJJT1wiLFwiSVFcIixcIklTXCIsXCJJVFwiLFwiSkVcIixcIkpNXCIsXCJKT1wiLFwiSlBcIixcIktFXCIsXCJLR1wiLFwiS0hcIixcIktJXCIsXCJLTVwiLFwiS05cIixcIktSXCIsXCJLV1wiLFwiS1lcIixcIktaXCIsXCJMQVwiLFwiTEJcIixcIkxDXCIsXCJMSVwiLFwiTEtcIixcIkxSXCIsXCJMU1wiLFwiTFRcIixcIkxVXCIsXCJMVlwiLFwiTFlcIixcIk1BXCIsXCJNQ1wiLFwiTURcIixcIk1FXCIsXCJNRlwiLFwiTUdcIixcIk1LXCIsXCJNTFwiLFwiTU1cIixcIk1OXCIsXCJNT1wiLFwiTVFcIixcIk1SXCIsXCJNU1wiLFwiTVRcIixcIk1VXCIsXCJNVlwiLFwiTVdcIixcIk1YXCIsXCJNWVwiLFwiTVpcIixcIk5BXCIsXCJOQ1wiLFwiTkVcIixcIk5HXCIsXCJOSVwiLFwiTkxcIixcIk5PXCIsXCJOUFwiLFwiTlJcIixcIk5VXCIsXCJOWlwiLFwiT01cIixcIlBBXCIsXCJQRVwiLFwiUEZcIixcIlBHXCIsXCJQSFwiLFwiUEtcIixcIlBMXCIsXCJQTVwiLFwiUE5cIixcIlBSXCIsXCJQU1wiLFwiUFRcIixcIlBZXCIsXCJRQVwiLFwiUkVcIixcIlJPXCIsXCJSU1wiLFwiUlVcIixcIlJXXCIsXCJTQVwiLFwiU0JcIixcIlNDXCIsXCJTRFwiLFwiU0VcIixcIlNHXCIsXCJTSFwiLFwiU0lcIixcIlNKXCIsXCJTS1wiLFwiU0xcIixcIlNNXCIsXCJTTlwiLFwiU09cIixcIlNSXCIsXCJTU1wiLFwiU1RcIixcIlNWXCIsXCJTWFwiLFwiU1pcIixcIlRBXCIsXCJUQ1wiLFwiVERcIixcIlRGXCIsXCJUR1wiLFwiVEhcIixcIlRKXCIsXCJUS1wiLFwiVExcIixcIlRNXCIsXCJUTlwiLFwiVE9cIixcIlRSXCIsXCJUVFwiLFwiVFZcIixcIlRXXCIsXCJUWlwiLFwiVUFcIixcIlVHXCIsXCJVU1wiLFwiVVlcIixcIlVaXCIsXCJWQVwiLFwiVkNcIixcIlZFXCIsXCJWR1wiLFwiVk5cIixcIlZVXCIsXCJXRlwiLFwiV1NcIixcIlhLXCIsXCJZRVwiLFwiWVRcIixcIlpBXCIsXCJaTVwiLFwiWldcIixcIlpaXCJdO3ZhciBHYT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBIYXtjb25zdHJ1Y3RvcihlLHQsbixpKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnNjcmlwdExvYWRlcj10LHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlPW4sdGhpcy5sb2FkaW5nSW5kaWNhdG9yPWl9aW5pdGlhbGl6ZShlKXtyZXR1cm4gR2EodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3N0cmlwZW9jczp0fT1lfHx7fTtpZighdCl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJvcHRpb25zXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0e21ldGhvZElkOm4sZ2F0ZXdheUlkOmksY29udGFpbmVyOnJ9PXQ7aWYoIXJ8fCFufHwhaSl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtjb25zdCBvPSh5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoaSx7cGFyYW1zOnttZXRob2Q6bn19KSkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobixpKSx7bG9hZGluZ0NvbnRhaW5lcklkOmEsYnV0dG9uSGVpZ2h0OnMsb25Db21wbGV0ZTpkfT10O2lmKHRoaXMuX2xvYWRpbmdJbmRpY2F0b3JDb250YWluZXI9YSx0aGlzLl9vbkNvbXBsZXRlPWQsIVRhKG8pKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3R7aW5pdGlhbGl6YXRpb25EYXRhOmN9PW8se2NhcHR1cmVNZXRob2Q6bH09YztyZXR1cm4gdGhpcy5fY2FwdHVyZU1ldGhvZD1sLHRoaXMuX3N0cmlwZUNsaWVudD15aWVsZCB0aGlzLnNjcmlwdExvYWRlci5nZXRTdHJpcGVDbGllbnQoYykseWllbGQgdGhpcy5fbW91bnRFeHByZXNzQ2hlY2tvdXRFbGVtZW50KG4scix0aGlzLl9zdHJpcGVDbGllbnQscyksUHJvbWlzZS5yZXNvbHZlKCl9KX1zaWduSW4oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9c2lnbk91dCgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1leGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1fbW91bnRFeHByZXNzQ2hlY2tvdXRFbGVtZW50KGUsdCxuLGk9NDApe3JldHVybiBHYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgcj10aGlzLl9zaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzKCksbz1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7c2hpcHBpbmdBZGRyZXNzUmVxdWlyZWQ6cn0scj97YWxsb3dlZFNoaXBwaW5nQ291bnRyaWVzOnlpZWxkIHRoaXMuX2dldEF2YWlsYWJsZUNvdW50cmllcygpfTp7fSkscj97c2hpcHBpbmdSYXRlczpbe2lkOlwiX1wiLGFtb3VudDowLGRpc3BsYXlOYW1lOlwiUGVuZGluZyByYXRlc1wifV19Ont9KSx7YmlsbGluZ0FkZHJlc3NSZXF1aXJlZDohMCxlbWFpbFJlcXVpcmVkOiEwLHBob25lTnVtYmVyUmVxdWlyZWQ6ITAscGF5bWVudE1ldGhvZHM6e2xpbms6SWEuQVVUTyxhcHBsZVBheTpJYS5ORVZFUixnb29nbGVQYXk6SWEuTkVWRVIsYW1hem9uUGF5OklhLk5FVkVSLHBheXBhbDpJYS5ORVZFUixrbGFybmE6SWEuTkVWRVJ9LGJ1dHRvbkhlaWdodDppfSkse2NhcnRBbW91bnQ6YX09dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKSxzPU9iamVjdC5hc3NpZ24oe21vZGU6XCJwYXltZW50XCIsYW1vdW50OnRoaXMuX3RvQ2VudHMoYSksY3VycmVuY3k6dGhpcy5fZ2V0Q3VycmVuY3koKX0sdGhpcy5fY2FwdHVyZU1ldGhvZD97Y2FwdHVyZU1ldGhvZDp0aGlzLl9jYXB0dXJlTWV0aG9kfTp7fSk7dGhpcy5fc3RyaXBlRWxlbWVudHM9bi5lbGVtZW50cyhzKSx0aGlzLl9saW5rVjJFbGVtZW50PXRoaXMuX3N0cmlwZUVsZW1lbnRzLmNyZWF0ZShiYS5FWFBSRVNTX0NIRUNLT1VULG8pLHRoaXMuX2xpbmtWMkVsZW1lbnQubW91bnQoYCMke3R9YCksdGhpcy5faW5pdGlhbGl6ZUV2ZW50cyh0aGlzLl9saW5rVjJFbGVtZW50LGUpfSl9X2luaXRpYWxpemVFdmVudHMoZSx0KXt0aGlzLl9zaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzKCkmJihlLm9uKE9hLlNISVBQSU5HX0FERFJFU1NfQ0hBTkdFLGU9PkdhKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZSl9KSksZS5vbihPYS5TSElQUElOR19SQVRFX0NIQU5HRSxlPT5HYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX29uU2hpcHBpbmdSYXRlQ2hhbmdlKGUpfSkpKSxlLm9uKE9hLkNPTkZJUk0sZT0+R2EodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9vbkNvbmZpcm0oZSx0KX0pKSxlLm9uKE9hLkNBTkNFTCx0aGlzLl9vbkNhbmNlbCl9X29uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGUpe3JldHVybiBHYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoXCJhZGRyZXNzXCJpbiBlKXtjb25zdCB0PWUuYWRkcmVzcyxuPXtmaXJzdE5hbWU6XCJcIixsYXN0TmFtZTpcIlwiLHBob25lOlwiXCIsY29tcGFueTpcIlwiLGFkZHJlc3MxOlwiXCIsYWRkcmVzczI6XCJcIixjaXR5OihudWxsPT10P3ZvaWQgMDp0LmNpdHkpfHxcIlwiLGNvdW50cnlDb2RlOihudWxsPT10P3ZvaWQgMDp0LmNvdW50cnkpfHxcIlwiLHBvc3RhbENvZGU6KG51bGw9PXQ/dm9pZCAwOnQucG9zdGFsX2NvZGUpfHxcIlwiLHN0YXRlT3JQcm92aW5jZToobnVsbD09dD92b2lkIDA6dC5zdGF0ZSl8fFwiXCIsc3RhdGVPclByb3ZpbmNlQ29kZTpcIlwiLGN1c3RvbUZpZWxkczpbXX07eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhuKTtjb25zdCBpPXlpZWxkIHRoaXMuX2dldEF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucygpO3lpZWxkIHRoaXMuX3VwZGF0ZURpc3BsYXllZFByaWNlKCksZS5yZXNvbHZlKHtzaGlwcGluZ1JhdGVzOml9KX19KX1fb25DYW5jZWwoKXt0aHJvdyBuZXcgTW59X29uU2hpcHBpbmdSYXRlQ2hhbmdlKGUpe3JldHVybiBHYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoXCJzaGlwcGluZ1JhdGVcImluIGUpe2NvbnN0e3NoaXBwaW5nUmF0ZTp0fT1lO3lpZWxkIHRoaXMuX2hhbmRsZVNoaXBwaW5nT3B0aW9uQ2hhbmdlKG51bGw9PXQ/dm9pZCAwOnQuaWQpLHlpZWxkIHRoaXMuX3VwZGF0ZURpc3BsYXllZFByaWNlKCksZS5yZXNvbHZlKHt9KX19KX1fb25Db25maXJtKGUsdCl7cmV0dXJuIEdhKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZihcImJpbGxpbmdEZXRhaWxzXCJpbiBlJiZcInNoaXBwaW5nQWRkcmVzc1wiaW4gZSYmdGhpcy5fc3RyaXBlQ2xpZW50JiZ0aGlzLl9zdHJpcGVFbGVtZW50cyl7eWllbGQgdGhpcy5fdXBkYXRlU2hpcHBpbmdBbmRCaWxsaW5nQWRkcmVzcyhlKSx5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoKTtjb25zdCBuPXRoaXMuX2dldFBheW1lbnRQYXlsb2FkKHQpO3RyeXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChuKX1jYXRjaChlKXt5aWVsZCB0aGlzLl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlLHQpfX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9KX1fdXBkYXRlU2hpcHBpbmdBbmRCaWxsaW5nQWRkcmVzcyhlKXt2YXIgdCxuLGkscixvLGEscyxkO3JldHVybiBHYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgYz10aGlzLl9zaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzKCksbD0obnVsbD09PShuPW51bGw9PT0odD1lLnNoaXBwaW5nQWRkcmVzcyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubmFtZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uc3BsaXQoXCIgXCIpWzBdKXx8KG51bGw9PT0ocj1udWxsPT09KGk9ZS5iaWxsaW5nRGV0YWlscyl8fHZvaWQgMD09PWk/dm9pZCAwOmkubmFtZSl8fHZvaWQgMD09PXI/dm9pZCAwOnIuc3BsaXQoXCIgXCIpWzBdKXx8XCJcIix1PShudWxsPT09KGE9bnVsbD09PShvPWUuc2hpcHBpbmdBZGRyZXNzKXx8dm9pZCAwPT09bz92b2lkIDA6by5uYW1lKXx8dm9pZCAwPT09YT92b2lkIDA6YS5zcGxpdChcIiBcIilbMV0pfHwobnVsbD09PShkPW51bGw9PT0ocz1lLmJpbGxpbmdEZXRhaWxzKXx8dm9pZCAwPT09cz92b2lkIDA6cy5uYW1lKXx8dm9pZCAwPT09ZD92b2lkIDA6ZC5zcGxpdChcIiBcIilbMV0pfHxcIlwiO2lmKGMpe2NvbnN0IHQ9dGhpcy5fbWFwU2hpcHBpbmdBZGRyZXNzKGUuc2hpcHBpbmdBZGRyZXNzLGUuYmlsbGluZ0RldGFpbHMsbCx1KTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHQpfWNvbnN0IGg9dGhpcy5fbWFwQmlsbGluZ0FkZHJlc3MoZS5zaGlwcGluZ0FkZHJlc3MsZS5iaWxsaW5nRGV0YWlscyxsLHUpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhoKX0pfV9tYXBTaGlwcGluZ0FkZHJlc3MoZSx0LG4saSl7dmFyIHIsbyxhLHMsZCxjLGw7cmV0dXJue2ZpcnN0TmFtZTpuLGxhc3ROYW1lOmkscGhvbmU6KG51bGw9PXQ/dm9pZCAwOnQucGhvbmUpfHxcIlwiLGNvbXBhbnk6XCJcIixhZGRyZXNzMToobnVsbD09PShyPW51bGw9PWU/dm9pZCAwOmUuYWRkcmVzcyl8fHZvaWQgMD09PXI/dm9pZCAwOnIubGluZTEpfHxcIlwiLGFkZHJlc3MyOihudWxsPT09KG89bnVsbD09ZT92b2lkIDA6ZS5hZGRyZXNzKXx8dm9pZCAwPT09bz92b2lkIDA6by5saW5lMil8fFwiXCIsY2l0eToobnVsbD09PShhPW51bGw9PWU/dm9pZCAwOmUuYWRkcmVzcyl8fHZvaWQgMD09PWE/dm9pZCAwOmEuY2l0eSl8fFwiXCIsY291bnRyeUNvZGU6KG51bGw9PT0ocz1udWxsPT1lP3ZvaWQgMDplLmFkZHJlc3MpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmNvdW50cnkpfHxcIlwiLHBvc3RhbENvZGU6KG51bGw9PT0oZD1udWxsPT1lP3ZvaWQgMDplLmFkZHJlc3MpfHx2b2lkIDA9PT1kP3ZvaWQgMDpkLnBvc3RhbF9jb2RlKXx8XCJcIixzdGF0ZU9yUHJvdmluY2U6KG51bGw9PT0oYz1udWxsPT1lP3ZvaWQgMDplLmFkZHJlc3MpfHx2b2lkIDA9PT1jP3ZvaWQgMDpjLnN0YXRlKXx8XCJcIixzdGF0ZU9yUHJvdmluY2VDb2RlOihudWxsPT09KGw9bnVsbD09ZT92b2lkIDA6ZS5hZGRyZXNzKXx8dm9pZCAwPT09bD92b2lkIDA6bC5zdGF0ZSl8fFwiXCIsY3VzdG9tRmllbGRzOltdfX1fbWFwQmlsbGluZ0FkZHJlc3MoZSx0LG4saSl7dmFyIHIsbyxhLHMsZCxjO3JldHVybntlbWFpbDoobnVsbD09dD92b2lkIDA6dC5lbWFpbCl8fFwiXCIsZmlyc3ROYW1lOm4sbGFzdE5hbWU6aSxwaG9uZToobnVsbD09dD92b2lkIDA6dC5waG9uZSl8fFwiXCIsY29tcGFueTpcIlwiLGFkZHJlc3MxOihudWxsPT09KHI9bnVsbD09dD92b2lkIDA6dC5hZGRyZXNzKXx8dm9pZCAwPT09cj92b2lkIDA6ci5saW5lMSl8fFwiXCIsYWRkcmVzczI6XCJcIixjaXR5OihudWxsPT09KG89bnVsbD09dD92b2lkIDA6dC5hZGRyZXNzKXx8dm9pZCAwPT09bz92b2lkIDA6by5jaXR5KXx8XCJcIixjb3VudHJ5Q29kZToobnVsbD09PShhPW51bGw9PXQ/dm9pZCAwOnQuYWRkcmVzcyl8fHZvaWQgMD09PWE/dm9pZCAwOmEuY291bnRyeSl8fFwiXCIscG9zdGFsQ29kZToobnVsbD09PShzPW51bGw9PXQ/dm9pZCAwOnQuYWRkcmVzcyl8fHZvaWQgMD09PXM/dm9pZCAwOnMucG9zdGFsX2NvZGUpfHxcIlwiLHN0YXRlT3JQcm92aW5jZToobnVsbD09PShkPW51bGw9PXQ/dm9pZCAwOnQuYWRkcmVzcyl8fHZvaWQgMD09PWQ/dm9pZCAwOmQuc3RhdGUpfHxcIlwiLHN0YXRlT3JQcm92aW5jZUNvZGU6KG51bGw9PT0oYz1udWxsPT1lP3ZvaWQgMDplLmFkZHJlc3MpfHx2b2lkIDA9PT1jP3ZvaWQgMDpjLnN0YXRlKXx8XCJcIixjdXN0b21GaWVsZHM6W119fV9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlLHQpe3JldHVybiBHYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIVhyKGUpfHwhdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuaXNBZGRpdGlvbmFsQWN0aW9uRXJyb3IoZS5ib2R5LmVycm9ycykpdGhyb3cgZTtpZighdGhpcy5fc3RyaXBlQ2xpZW50fHwhdGhpcy5fc3RyaXBlRWxlbWVudHMpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7Y29uc3R7ZGF0YTpufT1lLmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQse3Rva2VuOml9PW4se3BheW1lbnRJbnRlbnQ6cn09eWllbGQgdGhpcy5fY29uZmlybVN0cmlwZVBheW1lbnRPclRocm93KG4sdCksbz10aGlzLl9nZXRQYXltZW50UGF5bG9hZCh0LChudWxsPT1yP3ZvaWQgMDpyLmlkKXx8aSk7dHJ5e3RoaXMuX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITApLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG8pLHlpZWxkIHRoaXMuX2NvbXBsZXRlQ2hlY2tvdXRGbG93KCl9Y2F0Y2goZSl7dGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UudGhyb3dQYXltZW50Q29uZmlybWF0aW9uUHJvY2VlZE1lc3NhZ2UoKX1maW5hbGx5e3RoaXMuX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITEpfX0pfV9jb25maXJtU3RyaXBlUGF5bWVudE9yVGhyb3coZSx0KXt2YXIgbixpLHI7cmV0dXJuIEdhKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHt0b2tlbjpvLHJlZGlyZWN0X3VybDphfT1lLHM9dGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UubWFwU3RyaXBlUGF5bWVudERhdGEodGhpcy5fc3RyaXBlRWxlbWVudHMsYSk7bGV0IGQ7dHJ5e2NvbnN0IGU9KHlpZWxkIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLmlzUGF5bWVudENvbXBsZXRlZCh0LHRoaXMuX3N0cmlwZUNsaWVudCkpP3lpZWxkIG51bGw9PT0ocj10aGlzLl9zdHJpcGVDbGllbnQpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnJldHJpZXZlUGF5bWVudEludGVudChvfHxcIlwiKTp5aWVsZCBudWxsPT09KG49dGhpcy5fc3RyaXBlQ2xpZW50KXx8dm9pZCAwPT09bj92b2lkIDA6bi5jb25maXJtUGF5bWVudCh7ZWxlbWVudHM6cy5lbGVtZW50cyxjbGllbnRTZWNyZXQ6byxyZWRpcmVjdDpJYS5JRl9SRVFVSVJFRCxjb25maXJtUGFyYW1zOntyZXR1cm5fdXJsOm51bGw9PT0oaT1zLmNvbmZpcm1QYXJhbXMpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnJldHVybl91cmx9fSk7aWYoZD1udWxsPT1lP3ZvaWQgMDplLmVycm9yLGR8fCEobnVsbD09ZT92b2lkIDA6ZS5wYXltZW50SW50ZW50KSl0aHJvdyBuZXcgTGk7cmV0dXJuIGV9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLnRocm93U3RyaXBlRXJyb3IoZCl9fSl9X2NvbXBsZXRlQ2hlY2tvdXRGbG93KCl7cmV0dXJuIEdhKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLl9vbkNvbXBsZXRlP3RoaXMuX29uQ29tcGxldGUoKTood2luZG93LmxvY2F0aW9uLnJlcGxhY2UoXCIvb3JkZXItY29uZmlybWF0aW9uXCIpLFByb21pc2UucmVzb2x2ZSgpKX0pfV9nZXRQYXltZW50UGF5bG9hZChlLHQpe3ZhciBuO2NvbnN0IGk9KG51bGw9PT0obj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0KCkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmlkKXx8XCJcIjtyZXR1cm57bWV0aG9kSWQ6ZSxwYXltZW50RGF0YTp7Zm9ybWF0dGVkUGF5bG9hZDpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe2NhcnRfaWQ6aX0sdD97Y3JlZGl0X2NhcmRfdG9rZW46e3Rva2VuOnR9fTp7fSkse2NvbmZpcm06ITEscGF5bWVudF9tZXRob2RfaWQ6Q2EuTGlua30pfX19X3Nob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MoKXtjb25zdHtnZXRDYXJ0T3JUaHJvdzplfT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx7bGluZUl0ZW1zOnR9PWUoKTtyZXR1cm4hIXQucGh5c2ljYWxJdGVtcy5sZW5ndGh9X3VwZGF0ZURpc3BsYXllZFByaWNlKCl7cmV0dXJuIEdhKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0aGlzLl9zdHJpcGVFbGVtZW50cyYmdGhpcy5fc3RyaXBlRWxlbWVudHMudXBkYXRlKHtjdXJyZW5jeTp0aGlzLl9nZXRDdXJyZW5jeSgpLG1vZGU6XCJwYXltZW50XCIsYW1vdW50OnlpZWxkIHRoaXMuX2dldFRvdGFsUHJpY2UoKX0pfSl9X2dldEN1cnJlbmN5KCl7aWYoIXRoaXMuX2N1cnJlbmN5Q29kZSl7Y29uc3R7Y29kZTplfT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5O3RoaXMuX2N1cnJlbmN5Q29kZT1lLnRvTG93ZXJDYXNlKCl9cmV0dXJuIHRoaXMuX2N1cnJlbmN5Q29kZX1fZ2V0VG90YWxQcmljZSgpe3JldHVybiBHYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dCgpO2NvbnN0e2dldENoZWNrb3V0T3JUaHJvdzplLGdldENhcnRPclRocm93OnR9PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHtkZWNpbWFsUGxhY2VzOm59PXQoKS5jdXJyZW5jeSxpPUooZSgpLm91dHN0YW5kaW5nQmFsYW5jZSxuKS50b0ZpeGVkKG4pO3JldHVybiB0aGlzLl90b0NlbnRzKCtpKX0pfV9nZXRBdmFpbGFibGVDb3VudHJpZXMoKXt2YXIgZTtyZXR1cm4gR2EodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRTaGlwcGluZ0NvdW50cmllcygpO3JldHVybigobnVsbD09PShlPXQuZ2V0U2hpcHBpbmdDb3VudHJpZXMoKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUubWFwKGU9PmUuY29kZSkpfHxbXSkuZmlsdGVyKGU9PlZhLmluY2x1ZGVzKGUpKX0pfV9nZXRBdmFpbGFibGVTaGlwcGluZ09wdGlvbnMoKXt2YXIgZSx0O3JldHVybiBHYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDb25zaWdubWVudHMoKTtpZighKG51bGw9PW4/dm9pZCAwOm5bMF0pKXJldHVybjtjb25zdCBpPW5bMF0scj0oaS5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnN8fFtdKS5tYXAodGhpcy5fZ2V0U3RyaXBlU2hpcHBpbmdPcHRpb24uYmluZCh0aGlzKSksbz1udWxsPT09KGU9aS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pZDtyZXR1cm4gbz9yLnNvcnQoZT0+ZS5pZD09PW8/LTE6MCk6eWllbGQgdGhpcy5faGFuZGxlU2hpcHBpbmdPcHRpb25DaGFuZ2UobnVsbD09PSh0PXJbMF0pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlkKSxyfSl9X2dldFN0cmlwZVNoaXBwaW5nT3B0aW9uKHtpZDplLGNvc3Q6dCxkZXNjcmlwdGlvbjpufSl7cmV0dXJue2lkOmUsZGlzcGxheU5hbWU6bixhbW91bnQ6dGhpcy5fdG9DZW50cyh0KX19X2hhbmRsZVNoaXBwaW5nT3B0aW9uQ2hhbmdlKGUpe3JldHVybiBHYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoZSYmXCJzaGlwcGluZ19vcHRpb25fdW5zZWxlY3RlZFwiIT09ZSlyZXR1cm4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKGUpfSl9X2dldEFtb3VudFRyYW5zZm9ybWVyKCl7aWYodGhpcy5fYW1vdW50VHJhbnNmb3JtZXIpcmV0dXJuIHRoaXMuX2Ftb3VudFRyYW5zZm9ybWVyO2NvbnN0e2dldENhcnQ6ZX09dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse2N1cnJlbmN5OnR9PWUoKXx8e307cmV0dXJuIHQ/bmV3IHFhKHQuZGVjaW1hbFBsYWNlcyk6dm9pZCAwfV90b0NlbnRzKGUpe2NvbnN0IHQ9TWF0aC5yb3VuZCgxMDAqZSksbj10aGlzLl9nZXRBbW91bnRUcmFuc2Zvcm1lcigpO3JldHVybiBuP24udG9JbnRlZ2VyKGUpOnR9X3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZSl7ZSYmdGhpcy5fbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj90aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLl9sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTp0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpfX1jb25zdCAkYT1ubihlPT57Y29uc3QgdD1uZXcga2EoYSgpKSxuPW5ldyBCYSh7Y29udGFpbmVyU3R5bGVzOlJhfSk7cmV0dXJuIG5ldyBIYShlLHQsbmV3IFVhKGUsdCksbil9LFt7aWQ6XCJzdHJpcGVvY3NcIn1dKTtmdW5jdGlvbiBXYShlKXtjb25zdCB0PWU7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0LnBheWxvYWQmJlwic3RyaW5nXCI9PXR5cGVvZiB0LnBheWxvYWQudG9rZW59dmFyIFlhOyFmdW5jdGlvbihlKXtlLlNpZ25JbkN1c3RvbWVyUmVxdWVzdGVkPVwiU0lHTl9JTl9DVVNUT01FUl9SRVFVRVNURURcIixlLlNpZ25JbkN1c3RvbWVyU3VjY2VlZGVkPVwiU0lHTl9JTl9DVVNUT01FUl9TVUNDRUVERURcIixlLlNpZ25JbkN1c3RvbWVyRmFpbGVkPVwiU0lHTl9JTl9DVVNUT01FUl9GQUlMRURcIixlLlNpZ25PdXRDdXN0b21lclJlcXVlc3RlZD1cIlNJR05fT1VUX0NVU1RPTUVSX1JFUVVFU1RFRFwiLGUuU2lnbk91dEN1c3RvbWVyU3VjY2VlZGVkPVwiU0lHTl9PVVRfQ1VTVE9NRVJfU1VDQ0VFREVEXCIsZS5TaWduT3V0Q3VzdG9tZXJGYWlsZWQ9XCJTSUdOX09VVF9DVVNUT01FUl9GQUlMRURcIixlLkNyZWF0ZUN1c3RvbWVyUmVxdWVzdGVkPVwiQ1JFQVRFX0NVU1RPTUVSX1JFUVVFU1RFRFwiLGUuQ3JlYXRlQ3VzdG9tZXJTdWNjZWVkZWQ9XCJDUkVBVEVfQ1VTVE9NRVJfU1VDQ0VFREVEXCIsZS5DcmVhdGVDdXN0b21lckZhaWxlZD1cIkNSRUFURV9DVVNUT01FUl9GQUlMRURcIixlLkNyZWF0ZUN1c3RvbWVyQWRkcmVzc1JlcXVlc3RlZD1cIkNSRUFURV9DVVNUT01FUl9BRERSRVNTX1JFUVVFU1RFRFwiLGUuQ3JlYXRlQ3VzdG9tZXJBZGRyZXNzU3VjY2VlZGVkPVwiQ1JFQVRFX0NVU1RPTUVSX0FERFJFU1NfU1VDQ0VFREVEXCIsZS5DcmVhdGVDdXN0b21lckFkZHJlc3NGYWlsZWQ9XCJDUkVBVEVfQ1VTVE9NRVJfQUREUkVTU19GQUlMRURcIixlLlN0cmlwZUxpbmtBdXRoZW50aWNhdGVkPVwiU1RSSVBFX0xJTktfQVVUSEVOVElDQVRFRFwifShZYXx8KFlhPXt9KSk7dmFyIEthLEphO2NsYXNzIFphe2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLl9jdXN0b21lclJlcXVlc3RTZW5kZXI9ZSx0aGlzLl9jaGVja291dEFjdGlvbkNyZWF0b3I9dCx0aGlzLl9zcGFtUHJvdGVjdGlvbkFjdGlvbkNyZWF0b3I9bn1jcmVhdGVDdXN0b21lcihlLHQpe3JldHVybiBuPT57Y29uc3QgaT1uLmdldFN0YXRlKCkuY29uZmlnLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLHtpc1N0b3JlZnJvbnRTcGFtUHJvdGVjdGlvbkVuYWJsZWQ6cn09aS5jaGVja291dFNldHRpbmdzLG89aT0+bGUodGhpcy5fY3VzdG9tZXJSZXF1ZXN0U2VuZGVyLmNyZWF0ZUFjY291bnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHt0b2tlbjppfSksdCkpLnBpcGUoSWUoKCk9PnNlKHRoaXMuX2NoZWNrb3V0QWN0aW9uQ3JlYXRvci5sb2FkQ3VycmVudENoZWNrb3V0KHQpKG4pLG1lKGwoWWEuQ3JlYXRlQ3VzdG9tZXJTdWNjZWVkZWQpKSkpKTtyZXR1cm4gc2UobWUobChZYS5DcmVhdGVDdXN0b21lclJlcXVlc3RlZCkpLHI/bGUodGhpcy5fc3BhbVByb3RlY3Rpb25BY3Rpb25DcmVhdG9yLmV4ZWN1dGUoKShuKSkucGlwZShJZShlPT57dmFyIHQ7cmV0dXJuIFdhKGUpP3NlKG1lKGUpLG8obnVsbD09PSh0PWUucGF5bG9hZCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudG9rZW4pKTptZShlKX0pKTpvKCkpLnBpcGUoZ2UoZT0+SmUoWWEuQ3JlYXRlQ3VzdG9tZXJGYWlsZWQsZSkpKX19Y3JlYXRlQWRkcmVzcyhlLHQpe3JldHVybiBzZShtZShsKFlhLkNyZWF0ZUN1c3RvbWVyQWRkcmVzc1JlcXVlc3RlZCkpLGRlKCgpPT57cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe2NvbnN0e2JvZHk6bn09eWllbGQgdGhpcy5fY3VzdG9tZXJSZXF1ZXN0U2VuZGVyLmNyZWF0ZUFkZHJlc3MoZSx0KTtyZXR1cm4gbChZYS5DcmVhdGVDdXN0b21lckFkZHJlc3NTdWNjZWVkZWQsbil9LG5ldygocj12b2lkIDApfHwocj1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBhKGUpe3RyeXtkKG8ubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChvLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIHI/bjpuZXcgcihmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChvPW8uYXBwbHkobixpfHxbXSkpLm5leHQoKSl9KTt2YXIgbixpLHIsb30pKS5waXBlKGdlKGU9PkplKFlhLkNyZWF0ZUN1c3RvbWVyQWRkcmVzc0ZhaWxlZCxlKSkpfXNpZ25JbkN1c3RvbWVyKGUsdCl7cmV0dXJuIG49Pntjb25zdCBpPW4uZ2V0U3RhdGUoKS5jaGVja291dC5nZXRDaGVja291dE9yVGhyb3coKSxyPWkuY2FydC5zb3VyY2U9PT1Wbi5CdXlOb3c/aS5pZDp2b2lkIDA7cmV0dXJuIHNlKG1lKGwoWWEuU2lnbkluQ3VzdG9tZXJSZXF1ZXN0ZWQpKSxsZSh0aGlzLl9jdXN0b21lclJlcXVlc3RTZW5kZXIuc2lnbkluQ3VzdG9tZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtjYXJ0SWQ6cn0pLHQpKS5waXBlKEllKCh7Ym9keTplfSk9PmUuZGF0YS5wZXJzaXN0ZW50Q2FydFJldHJpZXZhbEluZm9ybWF0aW9uP3NlKHRoaXMuX2NoZWNrb3V0QWN0aW9uQ3JlYXRvci5sb2FkQ2hlY2tvdXQoZS5kYXRhLnBlcnNpc3RlbnRDYXJ0UmV0cmlldmFsSW5mb3JtYXRpb24uaWQsdCkobiksbWUobChZYS5TaWduSW5DdXN0b21lclN1Y2NlZWRlZCxlLmRhdGEpKSk6c2UodGhpcy5fY2hlY2tvdXRBY3Rpb25DcmVhdG9yLmxvYWRDdXJyZW50Q2hlY2tvdXQodCkobiksbWUobChZYS5TaWduSW5DdXN0b21lclN1Y2NlZWRlZCxlLmRhdGEpKSkpKSkucGlwZShnZShlPT5KZShZYS5TaWduSW5DdXN0b21lckZhaWxlZCxlKSkpfX1zaWduT3V0Q3VzdG9tZXIoZSl7cmV0dXJuIHQ9Pntjb25zdCBuPXQuZ2V0U3RhdGUoKS5jaGVja291dC5nZXRDaGVja291dE9yVGhyb3coKSxpPW4uY2FydC5zb3VyY2U9PT1Wbi5CdXlOb3c/bi5pZDp2b2lkIDA7cmV0dXJuIHNlKG1lKGwoWWEuU2lnbk91dEN1c3RvbWVyUmVxdWVzdGVkKSksbGUodGhpcy5fY3VzdG9tZXJSZXF1ZXN0U2VuZGVyLnNpZ25PdXRDdXN0b21lcihlLGkpKS5waXBlKEllKCh7Ym9keTpufSk9PnNlKHRoaXMuX2NoZWNrb3V0QWN0aW9uQ3JlYXRvci5sb2FkQ3VycmVudENoZWNrb3V0KGUpKHQpLG1lKGwoWWEuU2lnbk91dEN1c3RvbWVyU3VjY2VlZGVkLG4uZGF0YSkpKSkpKS5waXBlKGdlKGU9PkplKFlhLlNpZ25PdXRDdXN0b21lckZhaWxlZCxlKSkpfX19Y2xhc3MgUWF7Y29uc3RydWN0b3IoZSl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lfWNyZWF0ZUFjY291bnQoZSx7dGltZW91dDp0fT17fSl7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdChcIi9hcGkvc3RvcmVmcm9udC9jdXN0b21lclwiLHt0aW1lb3V0OnQsaGVhZGVyczpydCxib2R5OmV9KX1jcmVhdGVBZGRyZXNzKGUse3RpbWVvdXQ6dH09e30pe3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoXCIvYXBpL3N0b3JlZnJvbnQvY3VzdG9tZXItYWRkcmVzc1wiLHt0aW1lb3V0OnQsaGVhZGVyczpydCxib2R5OmV9KX1zaWduSW5DdXN0b21lcihlLHt0aW1lb3V0OnR9PXt9KXtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5wb3N0KFwiL2ludGVybmFsYXBpL3YxL2NoZWNrb3V0L2N1c3RvbWVyXCIse3RpbWVvdXQ6dCxoZWFkZXJzOnJ0LGJvZHk6ZX0pfXNpZ25PdXRDdXN0b21lcih7dGltZW91dDplfT17fSx0KXtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5kZWxldGUoXCIvaW50ZXJuYWxhcGkvdjEvY2hlY2tvdXQvY3VzdG9tZXJcIixPYmplY3QuYXNzaWduKHt0aW1lb3V0OmUsaGVhZGVyczpydH0sdCYme2JvZHk6e2NhcnRJZDp0fX0pKX19IWZ1bmN0aW9uKGUpe2UuU2lnbkluRmFpbGVkPVwiQ1VTVE9NRVJfU1RSQVRFR1lfU0lHTl9JTl9GQUlMRURcIixlLlNpZ25JblJlcXVlc3RlZD1cIkNVU1RPTUVSX1NUUkFURUdZX1NJR05fSU5fUkVRVUVTVEVEXCIsZS5TaWduSW5TdWNjZWVkZWQ9XCJDVVNUT01FUl9TVFJBVEVHWV9TSUdOX0lOX1NVQ0NFRURFRFwiLGUuU2lnbk91dEZhaWxlZD1cIkNVU1RPTUVSX1NUUkFURUdZX1NJR05fT1VUX0ZBSUxFRFwiLGUuU2lnbk91dFJlcXVlc3RlZD1cIkNVU1RPTUVSX1NUUkFURUdZX1NJR05fT1VUX1JFUVVFU1RFRFwiLGUuU2lnbk91dFN1Y2NlZWRlZD1cIkNVU1RPTUVSX1NUUkFURUdZX1NJR05fT1VUX1NVQ0NFRURFRFwiLGUuRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dEZhaWxlZD1cIkNVU1RPTUVSX1NUUkFURUdZX0VYRUNVVEVfUEFZTUVOVF9NRVRIT0RfQ0hFQ0tPVVRfRkFJTEVEXCIsZS5FeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0UmVxdWVzdGVkPVwiQ1VTVE9NRVJfU1RSQVRFR1lfRVhFQ1VURV9QQVlNRU5UX01FVEhPRF9DSEVDS09VVF9SRVFVRVNURURcIixlLkV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRTdWNjZWVkZWQ9XCJDVVNUT01FUl9TVFJBVEVHWV9FWEVDVVRFX1BBWU1FTlRfTUVUSE9EX0NIRUNLT1VUX1NVQ0NFRURFRFwiLGUuSW5pdGlhbGl6ZUZhaWxlZD1cIkNVU1RPTUVSX1NUUkFURUdZX0lOSVRJQUxJWkVfRkFJTEVEXCIsZS5Jbml0aWFsaXplUmVxdWVzdGVkPVwiQ1VTVE9NRVJfU1RSQVRFR1lfSU5JVElBTElaRV9SRVFVRVNURURcIixlLkluaXRpYWxpemVTdWNjZWVkZWQ9XCJDVVNUT01FUl9TVFJBVEVHWV9JTklUSUFMSVpFX1NVQ0NFRURFRFwiLGUuRGVpbml0aWFsaXplRmFpbGVkPVwiQ1VTVE9NRVJfU1RSQVRFR1lfREVJTklUSUFMSVpFX0ZBSUxFRFwiLGUuRGVpbml0aWFsaXplUmVxdWVzdGVkPVwiQ1VTVE9NRVJfU1RSQVRFR1lfREVJTklUSUFMSVpFX1JFUVVFU1RFRFwiLGUuRGVpbml0aWFsaXplU3VjY2VlZGVkPVwiQ1VTVE9NRVJfU1RSQVRFR1lfREVJTklUSUFMSVpFX1NVQ0NFRURFRFwiLGUuV2lkZ2V0SW50ZXJhY3Rpb25TdGFydGVkPVwiQ1VTVE9NRVJfU1RSQVRFR1lfV0lER0VUX0lOVEVSQUNUSU9OX1NUQVJURURcIixlLldpZGdldEludGVyYWN0aW9uRmluaXNoZWQ9XCJDVVNUT01FUl9TVFJBVEVHWV9XSURHRVRfSU5URVJBQ1RJT05fRklOSVNIRURcIixlLldpZGdldEludGVyYWN0aW9uRmFpbGVkPVwiQ1VTVE9NRVJfU1RSQVRFR1lfV0lER0VUX0lOVEVSQUNUSU9OX0ZBSUxFRFwifShLYXx8KEthPXt9KSk7Y2xhc3MgWGF7Y29uc3RydWN0b3IoZSx0KXt0aGlzLl9zdHJhdGVneVJlZ2lzdHJ5PWUsdGhpcy5fc3RyYXRlZ3lSZWdpc3RyeVYyPXR9c2lnbkluKGUsdCl7cmV0dXJuIG9lLmNyZWF0ZShuPT57Y29uc3QgaT10JiZ0Lm1ldGhvZElkLHI9e21ldGhvZElkOml9O24ubmV4dChsKEthLlNpZ25JblJlcXVlc3RlZCx2b2lkIDAscikpLHRoaXMuX2dldFN0cmF0ZWd5KGkpLnNpZ25JbihlLHQpLnRoZW4oKCk9PntuLm5leHQobChLYS5TaWduSW5TdWNjZWVkZWQsdm9pZCAwLHIpKSxuLmNvbXBsZXRlKCl9KS5jYXRjaChlPT57bi5lcnJvcihoKEthLlNpZ25JbkZhaWxlZCxlLHIpKX0pfSl9c2lnbk91dChlKXtyZXR1cm4gb2UuY3JlYXRlKHQ9Pntjb25zdCBuPWUmJmUubWV0aG9kSWQsaT17bWV0aG9kSWQ6bn07dC5uZXh0KGwoS2EuU2lnbk91dFJlcXVlc3RlZCx2b2lkIDAsaSkpLHRoaXMuX2dldFN0cmF0ZWd5KG4pLnNpZ25PdXQoZSkudGhlbigoKT0+e3QubmV4dChsKEthLlNpZ25PdXRTdWNjZWVkZWQsdm9pZCAwLGkpKSx0LmNvbXBsZXRlKCl9KS5jYXRjaChlPT57dC5lcnJvcihoKEthLlNpZ25PdXRGYWlsZWQsZSxpKSl9KX0pfWV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoZSl7cmV0dXJuIG9lLmNyZWF0ZSh0PT57Y29uc3Qgbj1lJiZlLm1ldGhvZElkLGk9e21ldGhvZElkOm59O3QubmV4dChsKEthLkV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRSZXF1ZXN0ZWQsdm9pZCAwLGkpKSx0aGlzLl9nZXRTdHJhdGVneShuKS5leGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KGUpLnRoZW4oKCk9Pnt0Lm5leHQobChLYS5FeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0U3VjY2VlZGVkLHZvaWQgMCxpKSksdC5jb21wbGV0ZSgpfSkuY2F0Y2goZT0+e3QuZXJyb3IoaChLYS5FeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0RmFpbGVkLGUsaSkpfSl9KX1pbml0aWFsaXplKGUpe3JldHVybiB0PT5vZS5jcmVhdGUobj0+e2NvbnN0IGk9dC5nZXRTdGF0ZSgpLHI9ZSYmZS5tZXRob2RJZCxvPXttZXRob2RJZDpyfTtpZihyJiZpLmN1c3RvbWVyU3RyYXRlZ2llcy5pc0luaXRpYWxpemVkKHIpKXJldHVybiBuLmNvbXBsZXRlKCk7bi5uZXh0KGwoS2EuSW5pdGlhbGl6ZVJlcXVlc3RlZCx2b2lkIDAsbykpLHRoaXMuX2dldFN0cmF0ZWd5KHIpLmluaXRpYWxpemUoZSkudGhlbigoKT0+e24ubmV4dChsKEthLkluaXRpYWxpemVTdWNjZWVkZWQsdm9pZCAwLG8pKSxuLmNvbXBsZXRlKCl9KS5jYXRjaChlPT57bi5lcnJvcihoKEthLkluaXRpYWxpemVGYWlsZWQsZSxvKSl9KX0pfWRlaW5pdGlhbGl6ZShlKXtyZXR1cm4gdD0+b2UuY3JlYXRlKG49Pntjb25zdCBpPXQuZ2V0U3RhdGUoKSxyPWUmJmUubWV0aG9kSWQsbz17bWV0aG9kSWQ6cn07aWYociYmIWkuY3VzdG9tZXJTdHJhdGVnaWVzLmlzSW5pdGlhbGl6ZWQocikpcmV0dXJuIG4uY29tcGxldGUoKTtuLm5leHQobChLYS5EZWluaXRpYWxpemVSZXF1ZXN0ZWQsdm9pZCAwLG8pKSx0aGlzLl9nZXRTdHJhdGVneShyKS5kZWluaXRpYWxpemUoZSkudGhlbigoKT0+e24ubmV4dChsKEthLkRlaW5pdGlhbGl6ZVN1Y2NlZWRlZCx2b2lkIDAsbykpLG4uY29tcGxldGUoKX0pLmNhdGNoKGU9PntuLmVycm9yKGgoS2EuRGVpbml0aWFsaXplRmFpbGVkLGUsbykpfSl9KX13aWRnZXRJbnRlcmFjdGlvbihlLHQpe3JldHVybiBvZS5jcmVhdGUobj0+e2NvbnN0IGk9e21ldGhvZElkOnQmJnQubWV0aG9kSWR9O24ubmV4dChsKEthLldpZGdldEludGVyYWN0aW9uU3RhcnRlZCx2b2lkIDAsaSkpLGUoKS50aGVuKCgpPT57bi5uZXh0KGwoS2EuV2lkZ2V0SW50ZXJhY3Rpb25GaW5pc2hlZCx2b2lkIDAsaSkpLG4uY29tcGxldGUoKX0pLmNhdGNoKGU9PntuLmVycm9yKGgoS2EuV2lkZ2V0SW50ZXJhY3Rpb25GYWlsZWQsZSxpKSl9KX0pfV9nZXRTdHJhdGVneShlKXtsZXQgdDt0cnl7dD10aGlzLl9zdHJhdGVneVJlZ2lzdHJ5VjIuZ2V0KHtpZDplfHxcIlwifSl9Y2F0Y2gobil7dD10aGlzLl9zdHJhdGVneVJlZ2lzdHJ5LmdldChlKX1yZXR1cm4gdH19ZnVuY3Rpb24gZXMoZSx0PVtdKXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT9EdChbLi4uZSwuLi50XSk6ZnVuY3Rpb24oZSx0KXtjb25zdCBuPVIoWSh0LGU9PiFlKSksaT1SKGYodCkpO3JldHVybiBEdChbLi4uZyhlLG4pLC4uLmldKX0oZSx0KX1jbGFzcyB0c3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9yZXF1ZXN0U2VuZGVyPWV9bG9hZENoZWNrb3V0KGUse3BhcmFtczp7aW5jbHVkZTp0fT17fSx0aW1lb3V0Om59PXt9KXtjb25zdCBpPWAvYXBpL3N0b3JlZnJvbnQvY2hlY2tvdXQvJHtlfWAscj1PYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxfSxydCk7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIuZ2V0KGkse3BhcmFtczp7aW5jbHVkZTplcyhPdCx0KX0saGVhZGVyczpyLHRpbWVvdXQ6bn0pLmNhdGNoKGU9PntpZihlLnN0YXR1cz49NDAwJiZlLnN0YXR1czw1MDApdGhyb3cgbmV3IHd0KGUpO3Rocm93IGV9KX11cGRhdGVDaGVja291dChlLHQse3BhcmFtczp7aW5jbHVkZTpufT17fSx0aW1lb3V0Oml9PXt9KXtjb25zdCByPWAvYXBpL3N0b3JlZnJvbnQvY2hlY2tvdXQvJHtlfWAsbz1PYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxfSxydCk7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucHV0KHIse3BhcmFtczp7aW5jbHVkZTplcyhPdCxuKX0sYm9keTp0LGhlYWRlcnM6byx0aW1lb3V0Oml9KX19IWZ1bmN0aW9uKGUpe2UuTG9hZENoZWNrb3V0UmVxdWVzdGVkPVwiTE9BRF9DSEVDS09VVF9SRVFVRVNURURcIixlLkxvYWRDaGVja291dFN1Y2NlZWRlZD1cIkxPQURfQ0hFQ0tPVVRfU1VDQ0VFREVEXCIsZS5Mb2FkQ2hlY2tvdXRGYWlsZWQ9XCJMT0FEX0NIRUNLT1VUX0ZBSUxFRFwiLGUuVXBkYXRlQ2hlY2tvdXRSZXF1ZXN0ZWQ9XCJVUERBVEVfQ0hFQ0tPVVRfUkVRVUVTVEVEXCIsZS5VcGRhdGVDaGVja291dFN1Y2NlZWRlZD1cIlVQREFURV9DSEVDS09VVF9TVUNDRUVERURcIixlLlVwZGF0ZUNoZWNrb3V0RmFpbGVkPVwiVVBEQVRFX0NIRUNLT1VUX0ZBSUxFRFwifShKYXx8KEphPXt9KSk7dmFyIG5zO2NsYXNzIGlze2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLl9jaGVja291dFJlcXVlc3RTZW5kZXI9ZSx0aGlzLl9jb25maWdBY3Rpb25DcmVhdG9yPXQsdGhpcy5fZm9ybUZpZWxkc0FjdGlvbkNyZWF0b3I9bn1sb2FkQ2hlY2tvdXQoZSx0KXtyZXR1cm4oKT0+c2UobWUobChKYS5Mb2FkQ2hlY2tvdXRSZXF1ZXN0ZWQpKSxoZSh0aGlzLl9jb25maWdBY3Rpb25DcmVhdG9yLmxvYWRDb25maWcoe3VzZUNhY2hlOiEwLHRpbWVvdXQ6bnVsbD09dD92b2lkIDA6dC50aW1lb3V0LHBhcmFtczp7Y2hlY2tvdXRJZDplfX0pLHRoaXMuX2Zvcm1GaWVsZHNBY3Rpb25DcmVhdG9yLmxvYWRGb3JtRmllbGRzKHt1c2VDYWNoZTohMCx0aW1lb3V0Om51bGw9PXQ/dm9pZCAwOnQudGltZW91dH0pKSxkZSgoKT0+dGhpcy5fY2hlY2tvdXRSZXF1ZXN0U2VuZGVyLmxvYWRDaGVja291dChlLHQpLnRoZW4oKHtib2R5OmV9KT0+bChKYS5Mb2FkQ2hlY2tvdXRTdWNjZWVkZWQsdGhpcy5fdHJhbnNmb3JtQ3VzdG9tZXJBZGRyZXNzZXMoZSkpKSkpLnBpcGUoZ2UoZT0+SmUoSmEuTG9hZENoZWNrb3V0RmFpbGVkLGUpKSl9bG9hZERlZmF1bHRDaGVja291dChlKXtyZXR1cm4gdD0+c2UobWUobChKYS5Mb2FkQ2hlY2tvdXRSZXF1ZXN0ZWQpKSxoZSh0aGlzLl9jb25maWdBY3Rpb25DcmVhdG9yLmxvYWRDb25maWcoe3VzZUNhY2hlOiEwLHRpbWVvdXQ6bnVsbD09ZT92b2lkIDA6ZS50aW1lb3V0fSksdGhpcy5fZm9ybUZpZWxkc0FjdGlvbkNyZWF0b3IubG9hZEZvcm1GaWVsZHMoe3VzZUNhY2hlOiEwLHRpbWVvdXQ6bnVsbD09ZT92b2lkIDA6ZS50aW1lb3V0fSkpLGRlKCgpPT57cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe2NvbnN0IG49dC5nZXRTdGF0ZSgpLmNvbmZpZy5nZXRDb250ZXh0Q29uZmlnKCk7aWYoIW58fCFuLmNoZWNrb3V0SWQpdGhyb3cgbmV3IFFlKFdlLk1pc3NpbmdDaGVja291dENvbmZpZyk7Y29uc3R7Ym9keTppfT15aWVsZCB0aGlzLl9jaGVja291dFJlcXVlc3RTZW5kZXIubG9hZENoZWNrb3V0KG4uY2hlY2tvdXRJZCxlKTtyZXR1cm4gbChKYS5Mb2FkQ2hlY2tvdXRTdWNjZWVkZWQsdGhpcy5fdHJhbnNmb3JtQ3VzdG9tZXJBZGRyZXNzZXMoaSkpfSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99KSkucGlwZShnZShlPT5KZShKYS5Mb2FkQ2hlY2tvdXRGYWlsZWQsZSkpKX11cGRhdGVDaGVja291dChlLHQpe3JldHVybiBuPT5uZXcgb2UoaT0+e2NvbnN0IHI9bi5nZXRTdGF0ZSgpLmNoZWNrb3V0LmdldENoZWNrb3V0KCk7aWYoIXIpdGhyb3cgbmV3IFFlKFdlLk1pc3NpbmdDaGVja291dCk7aS5uZXh0KGwoSmEuVXBkYXRlQ2hlY2tvdXRSZXF1ZXN0ZWQpKSx0aGlzLl9jaGVja291dFJlcXVlc3RTZW5kZXIudXBkYXRlQ2hlY2tvdXQoci5pZCxlLHQpLnRoZW4oKHtib2R5OmV9KT0+e2kubmV4dChsKEphLlVwZGF0ZUNoZWNrb3V0U3VjY2VlZGVkLGUpKSxpLmNvbXBsZXRlKCl9KS5jYXRjaChlPT57aS5lcnJvcihoKEphLlVwZGF0ZUNoZWNrb3V0RmFpbGVkLGUpKX0pfSl9bG9hZEN1cnJlbnRDaGVja291dChlKXtyZXR1cm4gdD0+e2NvbnN0IG49dC5nZXRTdGF0ZSgpLmNoZWNrb3V0LmdldENoZWNrb3V0KCk7aWYoIW4pdGhyb3cgbmV3IFFlKFdlLk1pc3NpbmdDaGVja291dCk7cmV0dXJuIHRoaXMubG9hZENoZWNrb3V0KG4uaWQsZSkodCl9fV90cmFuc2Zvcm1DdXN0b21lckFkZHJlc3NlcyhlKXtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtjdXN0b21lcjpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZS5jdXN0b21lcikse2FkZHJlc3NlczplLmN1c3RvbWVyLmFkZHJlc3Nlcy5tYXAoZT0+T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtzaG91bGRTYXZlQWRkcmVzczohMX0pKX0pfSl9fSFmdW5jdGlvbihlKXtlLkxvYWRGb3JtRmllbGRzUmVxdWVzdGVkPVwiTE9BRF9GT1JNX0ZJRUxEU19SRVFVRVNURURcIixlLkxvYWRGb3JtRmllbGRzU3VjY2VlZGVkPVwiTE9BRF9GT1JNX0ZJRUxEU19TVUNDRUVERURcIixlLkxvYWRGb3JtRmllbGRzRmFpbGVkPVwiTE9BRF9GT1JNX0ZJRUxEU19GQUlMRURcIn0obnN8fChucz17fSkpO3ZhciBycztjbGFzcyBvc3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9mb3JtRmllbGRzUmVxdWVzdFNlbmRlcj1lfWxvYWRGb3JtRmllbGRzKGUpe3JldHVybiBzZShtZShsKG5zLkxvYWRGb3JtRmllbGRzUmVxdWVzdGVkKSksZGUoKCk9PntyZXR1cm4gdD10aGlzLG49dm9pZCAwLHI9ZnVuY3Rpb24qKCl7Y29uc3R7Ym9keTp0fT15aWVsZCB0aGlzLl9mb3JtRmllbGRzUmVxdWVzdFNlbmRlci5sb2FkRmllbGRzKGUpO3JldHVybiBsKG5zLkxvYWRGb3JtRmllbGRzU3VjY2VlZGVkLHQpfSxuZXcoKGk9dm9pZCAwKXx8KGk9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChyLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoci50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiBpP246bmV3IGkoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgocj1yLmFwcGx5KHQsbnx8W10pKS5uZXh0KCkpfSk7dmFyIHQsbixpLHJ9KSkucGlwZShnZShlPT5KZShucy5Mb2FkRm9ybUZpZWxkc0ZhaWxlZCxlKSkpfX0hZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLGE9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik6aTtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlhPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG4saSk7ZWxzZSBmb3IodmFyIHM9ZS5sZW5ndGgtMTtzPj0wO3MtLSkocj1lW3NdKSYmKGE9KG88Mz9yKGEpOm8+Mz9yKHQsbixhKTpyKHQsbikpfHxhKTtvPjMmJmEmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4sYSl9KFtndF0sb3MucHJvdG90eXBlLFwibG9hZEZvcm1GaWVsZHNcIixudWxsKTtjbGFzcyBhc3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9yZXF1ZXN0U2VuZGVyPWV9bG9hZEZpZWxkcyh7dGltZW91dDplfT17fSl7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIuZ2V0KFwiL2FwaS9zdG9yZWZyb250L2Zvcm0tZmllbGRzXCIse3RpbWVvdXQ6ZSxoZWFkZXJzOk9iamVjdC5hc3NpZ24oe0FjY2VwdDppdC5Kc29uVjEsXCJYLUFQSS1JTlRFUk5BTFwiOkN0fSxydCl9KX19IWZ1bmN0aW9uKGUpe2UuTG9hZFBheW1lbnRNZXRob2RSZXF1ZXN0ZWQ9XCJMT0FEX1BBWU1FTlRfTUVUSE9EX1JFUVVFU1RFRFwiLGUuTG9hZFBheW1lbnRNZXRob2RTdWNjZWVkZWQ9XCJMT0FEX1BBWU1FTlRfTUVUSE9EX1NVQ0NFRURFRFwiLGUuTG9hZFBheW1lbnRNZXRob2RGYWlsZWQ9XCJMT0FEX1BBWU1FTlRfTUVUSE9EX0ZBSUxFRFwiLGUuTG9hZFBheW1lbnRNZXRob2RzUmVxdWVzdGVkPVwiTE9BRF9QQVlNRU5UX01FVEhPRFNfUkVRVUVTVEVEXCIsZS5Mb2FkUGF5bWVudE1ldGhvZHNTdWNjZWVkZWQ9XCJMT0FEX1BBWU1FTlRfTUVUSE9EU19TVUNDRUVERURcIixlLkxvYWRQYXltZW50TWV0aG9kc0ZhaWxlZD1cIkxPQURfUEFZTUVOVF9NRVRIT0RTX0ZBSUxFRFwifShyc3x8KHJzPXt9KSk7Y29uc3Qgc3M9ZT0+ISFlO2NsYXNzIGRze2NvbnN0cnVjdG9yKGUpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZX1sb2FkUGF5bWVudE1ldGhvZHNCeUlkKGUsdCl7cmV0dXJuIG49Pm5ldyBvZShpPT57dmFyIHI7Y29uc3Qgbz1udWxsPT09KHI9bi5nZXRTdGF0ZSgpLmNhcnQuZ2V0Q2FydCgpKXx8dm9pZCAwPT09cj92b2lkIDA6ci5pZCxhPW8/T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG51bGw9PXQ/dm9pZCAwOnQucGFyYW1zKSx7Y2FydElkOm99KTpPYmplY3QuYXNzaWduKHt9LG51bGw9PXQ/dm9pZCAwOnQucGFyYW1zKTtpLm5leHQobChycy5Mb2FkUGF5bWVudE1ldGhvZHNSZXF1ZXN0ZWQpKSxQcm9taXNlLmFsbChlLm1hcChlPT57cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe3RyeXtyZXR1cm4oeWllbGQgdGhpcy5fcmVxdWVzdFNlbmRlci5sb2FkUGF5bWVudE1ldGhvZChlLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7cGFyYW1zOmF9KSkpLmJvZHl9Y2F0Y2goZSl7cmV0dXJufX0sbmV3KChyPXZvaWQgMCl8fChyPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoby5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKG8udGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2Ygcj9uOm5ldyByKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKG89by5hcHBseShuLGl8fFtdKSkubmV4dCgpKX0pO3ZhciBuLGkscixvfSkpLnRoZW4oZT0+e2NvbnN0IHQ9ZS5maWx0ZXIoc3MpO2kubmV4dChsKHJzLkxvYWRQYXltZW50TWV0aG9kc1N1Y2NlZWRlZCx0KSksaS5jb21wbGV0ZSgpfSkuY2F0Y2goZT0+e2kubmV4dChsKHJzLkxvYWRQYXltZW50TWV0aG9kc0ZhaWxlZCxlKSksaS5jb21wbGV0ZSgpfSl9KX1sb2FkUGF5bWVudE1ldGhvZHMoZSl7cmV0dXJuIHQ9Pm9lLmNyZWF0ZShuPT57Y29uc3QgaT10LmdldFN0YXRlKCkuY2FydC5nZXRDYXJ0T3JUaHJvdygpO24ubmV4dChsKHJzLkxvYWRQYXltZW50TWV0aG9kc1JlcXVlc3RlZCkpLHRoaXMuX3JlcXVlc3RTZW5kZXIubG9hZFBheW1lbnRNZXRob2RzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGFyYW1zOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxudWxsPT1lP3ZvaWQgMDplLnBhcmFtcykse2NhcnRJZDppLmlkfSl9KSkudGhlbihlPT57Y29uc3QgdD17ZGV2aWNlU2Vzc2lvbklkOmUuaGVhZGVyc1tcIngtZGV2aWNlLXNlc3Npb24taWRcIl0sc2Vzc2lvbkhhc2g6ZS5oZWFkZXJzW1wieC1zZXNzaW9uLWhhc2hcIl19LGk9ZS5ib2R5O24ubmV4dChsKHJzLkxvYWRQYXltZW50TWV0aG9kc1N1Y2NlZWRlZCxpLHQpKSxuLmNvbXBsZXRlKCl9KS5jYXRjaChlPT57bi5lcnJvcihoKHJzLkxvYWRQYXltZW50TWV0aG9kc0ZhaWxlZCxlKSl9KX0pfWxvYWRQYXltZW50TWV0aG9kKGUsdCl7cmV0dXJuIG49Pm9lLmNyZWF0ZShpPT57dmFyIHI7Y29uc3Qgbz1udWxsPT09KHI9bi5nZXRTdGF0ZSgpLmNhcnQuZ2V0Q2FydCgpKXx8dm9pZCAwPT09cj92b2lkIDA6ci5pZCxhPW8/T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG51bGw9PXQ/dm9pZCAwOnQucGFyYW1zKSx7Y2FydElkOm99KTpPYmplY3QuYXNzaWduKHt9LG51bGw9PXQ/dm9pZCAwOnQucGFyYW1zKTtpLm5leHQobChycy5Mb2FkUGF5bWVudE1ldGhvZFJlcXVlc3RlZCx2b2lkIDAse21ldGhvZElkOmV9KSksdGhpcy5fcmVxdWVzdFNlbmRlci5sb2FkUGF5bWVudE1ldGhvZChlLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7cGFyYW1zOmF9KSkudGhlbih0PT57aS5uZXh0KGwocnMuTG9hZFBheW1lbnRNZXRob2RTdWNjZWVkZWQsdC5ib2R5LHttZXRob2RJZDplfSkpLGkuY29tcGxldGUoKX0pLmNhdGNoKHQ9PntpLmVycm9yKGgocnMuTG9hZFBheW1lbnRNZXRob2RGYWlsZWQsdCx7bWV0aG9kSWQ6ZX0pKX0pfSl9fSFmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsYT1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxuKTppO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKWE9UmVmbGVjdC5kZWNvcmF0ZShlLHQsbixpKTtlbHNlIGZvcih2YXIgcz1lLmxlbmd0aC0xO3M+PTA7cy0tKShyPWVbc10pJiYoYT0obzwzP3IoYSk6bz4zP3IodCxuLGEpOnIodCxuKSl8fGEpO28+MyYmYSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbixhKX0oW2d0XSxkcy5wcm90b3R5cGUsXCJsb2FkUGF5bWVudE1ldGhvZFwiLG51bGwpO2NsYXNzIGNze2NvbnN0cnVjdG9yKGUpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZX1sb2FkUGF5bWVudE1ldGhvZHMoe3RpbWVvdXQ6ZSxwYXJhbXM6dH09e30pe3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLmdldChcIi9hcGkvc3RvcmVmcm9udC9wYXltZW50c1wiLHt0aW1lb3V0OmUsaGVhZGVyczpPYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxLFwiWC1BUEktSU5URVJOQUxcIjpDdH0scnQpLHBhcmFtczp0fSl9bG9hZFBheW1lbnRNZXRob2QoZSx7dGltZW91dDp0LHBhcmFtczpufT17fSl7Y29uc3QgaT1gL2FwaS9zdG9yZWZyb250L3BheW1lbnRzLyR7ZX1gO3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLmdldChpLHt0aW1lb3V0OnQsaGVhZGVyczpPYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxLFwiWC1BUEktSU5URVJOQUxcIjpDdH0scnQpLHBhcmFtczpufSl9fWNsYXNzIGxzIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC5cIiksdGhpcy5uYW1lPVwiUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3JcIix0aGlzLnR5cGU9XCJwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGVcIn19dmFyIHVzO2NsYXNzIGhze2NvbnN0cnVjdG9yKGUsdD13aW5kb3cpe3RoaXMuX3NjcmlwdExvYWRlcj1lLHRoaXMuX3dpbmRvdz10fWxvYWQoe3VzZU1hc3RlcnBhc3NTcmM6ZSxsYW5ndWFnZTp0LHRlc3RNb2RlOm4sY2hlY2tvdXRJZDppfSl7cmV0dXJuIHI9dGhpcyxvPXZvaWQgMCxzPWZ1bmN0aW9uKigpe2lmKGUpe2NvbnN0IGU9W2BodHRwczovLyR7bj9cInNhbmRib3guXCI6XCJcIn1zcmMubWFzdGVyY2FyZC5jb20vc3JjaS9pbnRlZ3JhdGlvbi9tZXJjaGFudC5qc2AsW2Bsb2NhbGU9JHt0fWAsYGNoZWNrb3V0aWQ9JHtpfWBdLmpvaW4oXCImXCIpXS5qb2luKFwiP1wiKTtpZih5aWVsZCB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChlKSwhdGhpcy5fd2luZG93Lm1hc3RlcnBhc3MpdGhyb3cgbmV3IGxzO3JldHVybiB0aGlzLl93aW5kb3cubWFzdGVycGFzc31pZih5aWVsZCB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChgLy8ke24/XCJzYW5kYm94LlwiOlwiXCJ9bWFzdGVycGFzcy5jb20vaW50ZWdyYXRpb24vbWVyY2hhbnQuanNgKSwhdGhpcy5fd2luZG93Lm1hc3RlcnBhc3MpdGhyb3cgbmV3IGxzO3JldHVybiB0aGlzLl93aW5kb3cubWFzdGVycGFzc30sbmV3KChhPXZvaWQgMCl8fChhPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dHJ5e2Qocy5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBpKGUpe3RyeXtkKHMudGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIHI7dC5kb25lP2UodC52YWx1ZSk6KHI9dC52YWx1ZSxyIGluc3RhbmNlb2YgYT9yOm5ldyBhKGZ1bmN0aW9uKGUpe2Uocil9KSkudGhlbihuLGkpfWQoKHM9cy5hcHBseShyLG98fFtdKSkubmV4dCgpKX0pO3ZhciByLG8sYSxzfX1jbGFzcyBwc3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9yZXF1ZXN0U2VuZGVyPWV9aW5pdGlhbGl6ZUJpbGxpbmcoZSx0LHt0aW1lb3V0Om59PXt9KXtjb25zdCBpPWAvcmVtb3RlLWNoZWNrb3V0LyR7ZX0vYmlsbGluZ2A7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIuZ2V0KGkse3BhcmFtczp0LHRpbWVvdXQ6bixoZWFkZXJzOnJ0fSl9aW5pdGlhbGl6ZVNoaXBwaW5nKGUsdCx7dGltZW91dDpufT17fSl7Y29uc3QgaT1gL3JlbW90ZS1jaGVja291dC8ke2V9L3NoaXBwaW5nYDtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5nZXQoaSx7cGFyYW1zOnQsdGltZW91dDpuLGhlYWRlcnM6cnR9KX1pbml0aWFsaXplUGF5bWVudChlLHQse3RpbWVvdXQ6bn09e30pe2NvbnN0IGk9YC9yZW1vdGUtY2hlY2tvdXQvJHtlfS9wYXltZW50YDtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5nZXQoaSx7cGFyYW1zOnQsdGltZW91dDpuLGhlYWRlcnM6cnR9KX1sb2FkU2V0dGluZ3MoZSx7dGltZW91dDp0fT17fSl7Y29uc3Qgbj1gL3JlbW90ZS1jaGVja291dC8ke2V9L3NldHRpbmdzYDtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5nZXQobix7dGltZW91dDp0LGhlYWRlcnM6cnR9KX1zaWduT3V0KGUse3RpbWVvdXQ6dH09e30pe2NvbnN0IG49YC9yZW1vdGUtY2hlY2tvdXQvJHtlfS9zaWdub3V0YDtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5nZXQobix7dGltZW91dDp0LGhlYWRlcnM6cnR9KX1nZW5lcmF0ZVRva2VuKHt0aW1lb3V0OmV9PXt9KXtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5nZXQoXCIvcmVtb3RlLWNoZWNrb3V0LXRva2VuXCIse3RpbWVvdXQ6ZSxoZWFkZXJzOnJ0fSl9dHJhY2tBdXRob3JpemF0aW9uRXZlbnQoe3RpbWVvdXQ6ZX09e30pe3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoXCIvcmVtb3RlLWNoZWNrb3V0L2V2ZW50cy9zaG9wcGVyLWNoZWNrb3V0LXNlcnZpY2UtcHJvdmlkZXItYXV0aG9yaXphdGlvbi1yZXF1ZXN0ZWRcIix7dGltZW91dDplLGhlYWRlcnM6cnR9KX1mb3JnZXRDaGVja291dCh7dGltZW91dDplfT17fSl7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdChcIi9yZW1vdGUtY2hlY2tvdXQvZm9yZ2V0LWNoZWNrb3V0XCIse3RpbWVvdXQ6ZSxoZWFkZXJzOnJ0fSl9fSFmdW5jdGlvbihlKXtlLkZvcmdldENoZWNrb3V0UmVtb3RlQ3VzdG9tZXJSZXF1ZXN0ZWQ9XCJGT1JHRVRfQ0hFQ0tPVVRfUkVNT1RFX0NVU1RPTUVSX1JFUVVFU1RFRFwiLGUuRm9yZ2V0Q2hlY2tvdXRSZW1vdGVDdXN0b21lclN1Y2NlZWRlZD1cIkZPUkdFVF9DSEVDS09VVF9SRU1PVEVfQ1VTVE9NRVJfU1VDQ0VFREVEXCIsZS5Gb3JnZXRDaGVja291dFJlbW90ZUN1c3RvbWVyRmFpbGVkPVwiRk9SR0VUX0NIRUNLT1VUX1JFTU9URV9DVVNUT01FUl9GQUlMRURcIixlLkluaXRpYWxpemVSZW1vdGVCaWxsaW5nUmVxdWVzdGVkPVwiSU5JVElBTElaRV9SRU1PVEVfQklMTElOR19SRVFVRVNURURcIixlLkluaXRpYWxpemVSZW1vdGVCaWxsaW5nU3VjY2VlZGVkPVwiSU5JVElBTElaRV9SRU1PVEVfQklMTElOR19TVUNDRUVERURcIixlLkluaXRpYWxpemVSZW1vdGVCaWxsaW5nRmFpbGVkPVwiSU5JVElBTElaRV9SRU1PVEVfQklMTElOR19GQUlMRURcIixlLkluaXRpYWxpemVSZW1vdGVTaGlwcGluZ1JlcXVlc3RlZD1cIklOSVRJQUxJWkVfUkVNT1RFX1NISVBQSU5HX1JFUVVFU1RFRFwiLGUuSW5pdGlhbGl6ZVJlbW90ZVNoaXBwaW5nU3VjY2VlZGVkPVwiSU5JVElBTElaRV9SRU1PVEVfU0hJUFBJTkdfU1VDQ0VFREVEXCIsZS5Jbml0aWFsaXplUmVtb3RlU2hpcHBpbmdGYWlsZWQ9XCJJTklUSUFMSVpFX1JFTU9URV9TSElQUElOR19GQUlMRURcIixlLkluaXRpYWxpemVSZW1vdGVQYXltZW50UmVxdWVzdGVkPVwiSU5JVElBTElaRV9SRU1PVEVfUEFZTUVOVF9SRVFVRVNURURcIixlLkluaXRpYWxpemVSZW1vdGVQYXltZW50U3VjY2VlZGVkPVwiSU5JVElBTElaRV9SRU1PVEVfUEFZTUVOVF9TVUNDRUVERURcIixlLkluaXRpYWxpemVSZW1vdGVQYXltZW50RmFpbGVkPVwiSU5JVElBTElaRV9SRU1PVEVfUEFZTUVOVF9GQUlMRURcIixlLkxvYWRSZW1vdGVTZXR0aW5nc1JlcXVlc3RlZD1cIkxPQURfUkVNT1RFX1NFVFRJTkdTX1JFUVVFU1RFRFwiLGUuTG9hZFJlbW90ZVNldHRpbmdzU3VjY2VlZGVkPVwiTE9BRF9SRU1PVEVfU0VUVElOR1NfU1VDQ0VFREVEXCIsZS5Mb2FkUmVtb3RlU2V0dGluZ3NGYWlsZWQ9XCJMT0FEX1JFTU9URV9TRVRUSU5HU19GQUlMRURcIixlLlNpZ25PdXRSZW1vdGVDdXN0b21lclJlcXVlc3RlZD1cIlNJR05fT1VUX1JFTU9URV9DVVNUT01FUl9SRVFVRVNURURcIixlLlNpZ25PdXRSZW1vdGVDdXN0b21lclN1Y2NlZWRlZD1cIlNJR05fT1VUX1JFTU9URV9DVVNUT01FUl9TVUNDRUVERURcIixlLlNpZ25PdXRSZW1vdGVDdXN0b21lckZhaWxlZD1cIlNJR05fT1VUX1JFTU9URV9DVVNUT01FUl9GQUlMRURcIixlLlVwZGF0ZVJlbW90ZUNoZWNrb3V0PVwiVVBEQVRFX1JFTU9URV9DSEVDS09VVFwifSh1c3x8KHVzPXt9KSk7dmFyIG1zO2NsYXNzIHlze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcmVtb3RlQ2hlY2tvdXRSZXF1ZXN0U2VuZGVyPWUsdGhpcy5fY2hlY2tvdXRBY3Rpb25DcmVhdG9yPXR9aW5pdGlhbGl6ZUJpbGxpbmcoZSx0LG4pe3JldHVybiBvZS5jcmVhdGUoaT0+e2kubmV4dChsKHVzLkluaXRpYWxpemVSZW1vdGVCaWxsaW5nUmVxdWVzdGVkLHZvaWQgMCx7bWV0aG9kSWQ6ZX0pKSx0aGlzLl9yZW1vdGVDaGVja291dFJlcXVlc3RTZW5kZXIuaW5pdGlhbGl6ZUJpbGxpbmcoZSx0LG4pLnRoZW4oKHtib2R5OnQ9e319KT0+e2kubmV4dChsKHVzLkluaXRpYWxpemVSZW1vdGVCaWxsaW5nU3VjY2VlZGVkLHQse21ldGhvZElkOmV9KSksaS5jb21wbGV0ZSgpfSkuY2F0Y2godD0+e2kuZXJyb3IoaCh1cy5Jbml0aWFsaXplUmVtb3RlQmlsbGluZ0ZhaWxlZCx0LHttZXRob2RJZDplfSkpfSl9KX1pbml0aWFsaXplU2hpcHBpbmcoZSx0LG4pe3JldHVybiBvZS5jcmVhdGUoaT0+e2kubmV4dChsKHVzLkluaXRpYWxpemVSZW1vdGVTaGlwcGluZ1JlcXVlc3RlZCx2b2lkIDAse21ldGhvZElkOmV9KSksdGhpcy5fcmVtb3RlQ2hlY2tvdXRSZXF1ZXN0U2VuZGVyLmluaXRpYWxpemVTaGlwcGluZyhlLHQsbikudGhlbigoe2JvZHk6dD17fX0pPT57aS5uZXh0KGwodXMuSW5pdGlhbGl6ZVJlbW90ZVNoaXBwaW5nU3VjY2VlZGVkLHQse21ldGhvZElkOmV9KSksaS5jb21wbGV0ZSgpfSkuY2F0Y2godD0+e2kuZXJyb3IoaCh1cy5Jbml0aWFsaXplUmVtb3RlU2hpcHBpbmdGYWlsZWQsdCx7bWV0aG9kSWQ6ZX0pKX0pfSl9aW5pdGlhbGl6ZVBheW1lbnQoZSx0LG4pe3JldHVybiBvZS5jcmVhdGUoaT0+e2kubmV4dChsKHVzLkluaXRpYWxpemVSZW1vdGVQYXltZW50UmVxdWVzdGVkLHZvaWQgMCx7bWV0aG9kSWQ6ZX0pKSx0aGlzLl9yZW1vdGVDaGVja291dFJlcXVlc3RTZW5kZXIuaW5pdGlhbGl6ZVBheW1lbnQoZSx0LG4pLnRoZW4oKHtib2R5OnQ9e319KT0+e2kubmV4dChsKHVzLkluaXRpYWxpemVSZW1vdGVQYXltZW50U3VjY2VlZGVkLHQse21ldGhvZElkOmV9KSksaS5jb21wbGV0ZSgpfSkuY2F0Y2godD0+e2kuZXJyb3IoaCh1cy5Jbml0aWFsaXplUmVtb3RlUGF5bWVudEZhaWxlZCx0LHttZXRob2RJZDplfSkpfSl9KX1sb2FkU2V0dGluZ3MoZSx0KXtyZXR1cm4gb2UuY3JlYXRlKG49PntuLm5leHQobCh1cy5Mb2FkUmVtb3RlU2V0dGluZ3NSZXF1ZXN0ZWQsdm9pZCAwLHttZXRob2RJZDplfSkpLHRoaXMuX3JlbW90ZUNoZWNrb3V0UmVxdWVzdFNlbmRlci5sb2FkU2V0dGluZ3MoZSx0KS50aGVuKCh7Ym9keTp0fSk9PntuLm5leHQobCh1cy5Mb2FkUmVtb3RlU2V0dGluZ3NTdWNjZWVkZWQsdCx7bWV0aG9kSWQ6ZX0pKSxuLmNvbXBsZXRlKCl9KS5jYXRjaCh0PT57bi5lcnJvcihoKHVzLkxvYWRSZW1vdGVTZXR0aW5nc0ZhaWxlZCx0LHttZXRob2RJZDplfSkpfSl9KX1zaWduT3V0KGUsdCl7cmV0dXJuIG9lLmNyZWF0ZShuPT57bi5uZXh0KGwodXMuU2lnbk91dFJlbW90ZUN1c3RvbWVyUmVxdWVzdGVkLHZvaWQgMCx7bWV0aG9kSWQ6ZX0pKSx0aGlzLl9yZW1vdGVDaGVja291dFJlcXVlc3RTZW5kZXIuc2lnbk91dChlLHQpLnRoZW4oKCk9PntuLm5leHQobCh1cy5TaWduT3V0UmVtb3RlQ3VzdG9tZXJTdWNjZWVkZWQsdm9pZCAwLHttZXRob2RJZDplfSkpLG4uY29tcGxldGUoKX0pLmNhdGNoKHQ9PntuLmVycm9yKGgodXMuU2lnbk91dFJlbW90ZUN1c3RvbWVyRmFpbGVkLHQse21ldGhvZElkOmV9KSl9KX0pfWZvcmdldENoZWNrb3V0KGUsdCl7cmV0dXJuIHNlKG1lKGwodXMuRm9yZ2V0Q2hlY2tvdXRSZW1vdGVDdXN0b21lclJlcXVlc3RlZCx2b2lkIDAse21ldGhvZElkOmV9KSksZGUoKCk9PntyZXR1cm4gbj10aGlzLGk9dm9pZCAwLG89ZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX3JlbW90ZUNoZWNrb3V0UmVxdWVzdFNlbmRlci5mb3JnZXRDaGVja291dCh0KSx5aWVsZCB0aGlzLl9jaGVja291dEFjdGlvbkNyZWF0b3IubG9hZEN1cnJlbnRDaGVja291dCgpLGwodXMuRm9yZ2V0Q2hlY2tvdXRSZW1vdGVDdXN0b21lclN1Y2NlZWRlZCx2b2lkIDAse21ldGhvZElkOmV9KX0sbmV3KChyPXZvaWQgMCl8fChyPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoby5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKG8udGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2Ygcj9uOm5ldyByKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKG89by5hcHBseShuLGl8fFtdKSkubmV4dCgpKX0pO3ZhciBuLGkscixvfSkpLnBpcGUoZ2UodD0+SmUodXMuRm9yZ2V0Q2hlY2tvdXRSZW1vdGVDdXN0b21lckZhaWxlZCx0LHttZXRob2RJZDplfSkpKX11cGRhdGVDaGVja291dChlLHQpe3JldHVybiBsKHVzLlVwZGF0ZVJlbW90ZUNoZWNrb3V0LHQse21ldGhvZElkOmV9KX19Y2xhc3MgZ3MgZXh0ZW5kcyBaZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwiWW91IGhhdmVuJ3QgY29tcGxldGUgb3VyIHNwYW0gcHJvdGVjdGlvbiBjaGFsbGVuZ2UuIFBsZWFzZSB0cnkgYWdhaW4uXCIpLHRoaXMubmFtZT1cIlNwYW1Qcm90ZWN0aW9uQ2hhbGxlbmdlTm90Q29tcGxldGVkRXJyb3JcIix0aGlzLnR5cGU9XCJzcGFtX3Byb3RlY3Rpb25fY2hhbGxlbmdlX25vdF9jb21wbGV0ZWRcIn19Y2xhc3MgdnMgZXh0ZW5kcyBaZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwiV2Ugd2VyZSBub3QgYWJsZSB0byBjb21wbGV0ZSB5b3VyIHNwYW0gcHJvdGVjdGlvbiB2ZXJpZmljYXRpb24uIFBsZWFzZSB0cnkgYWdhaW4uXCIpLHRoaXMubmFtZT1cIlNwYW1Qcm90ZWN0aW9uRmFpbGVkRXJyb3JcIix0aGlzLnR5cGU9XCJzcGFtX3Byb3RlY3Rpb25fZmFpbGVkXCJ9fSFmdW5jdGlvbihlKXtlLkluaXRpYWxpemVGYWlsZWQ9XCJTUEFNX1BST1RFQ1RJT05fSU5JVElBTElaRV9GQUlMRURcIixlLkluaXRpYWxpemVTdWNjZWVkZWQ9XCJTUEFNX1BST1RFQ1RJT05fSU5JVElBTElaRV9TVUNDRUVERURcIixlLkluaXRpYWxpemVSZXF1ZXN0ZWQ9XCJTUEFNX1BST1RFQ1RJT05fSU5JVElBTElaRV9SRVFVRVNURURcIixlLlZlcmlmeUNoZWNrb3V0UmVxdWVzdGVkPVwiU1BBTV9QUk9URUNUSU9OX0NIRUNLT1VUX1ZFUklGWV9SRVFVRVNURURcIixlLlZlcmlmeUNoZWNrb3V0U3VjY2VlZGVkPVwiU1BBTV9QUk9URUNUSU9OX0NIRUNLT1VUX1ZFUklGWV9TVUNDRUVERURcIixlLlZlcmlmeUNoZWNrb3V0RmFpbGVkPVwiU1BBTV9QUk9URUNUSU9OX0NIRUNLT1VUX1ZFUklGWV9GQUlMRURcIixlLkV4ZWN1dGVSZXF1ZXN0ZWQ9XCJTUEFNX1BST1RFQ1RJT05fRVhFQ1VURV9SRVFVRVNURURcIixlLkV4ZWN1dGVTdWNjZWVkZWQ9XCJTUEFNX1BST1RFQ1RJT05fRVhFQ1VURV9TVUNDRUVERURcIixlLkV4ZWN1dGVGYWlsZWQ9XCJTUEFNX1BST1RFQ1RJT05fRVhFQ1VURV9GQUlMRURcIn0obXN8fChtcz17fSkpO3ZhciBmcyxTcz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBfc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX2dvb2dsZVJlY2FwdGNoYT1lLHRoaXMuX3JlcXVlc3RTZW5kZXI9dH1pbml0aWFsaXplKGUpe3JldHVybiB0PT5zZShtZShsKG1zLkluaXRpYWxpemVSZXF1ZXN0ZWQsdm9pZCAwKSksZGUoKCk9PlNzKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPWU/ZS5jb250YWluZXJJZDpcInNwYW1Qcm90ZWN0aW9uQ29udGFpbmVyXCI7aWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobikmJnRoaXMuX2dvb2dsZVJlY2FwdGNoYS5yZXNldChuKSwhZSYmIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG4pKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLG4pLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSl9Y29uc3QgaT10LmdldFN0YXRlKCkuY29uZmlnLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3MuZ29vZ2xlUmVjYXB0Y2hhU2l0ZWtleTtyZXR1cm4geWllbGQgdGhpcy5fZ29vZ2xlUmVjYXB0Y2hhLmxvYWQobixpKSxsKG1zLkluaXRpYWxpemVTdWNjZWVkZWQpfSkpKS5waXBlKGdlKGU9PkplKG1zLkluaXRpYWxpemVGYWlsZWQsZSkpKX12ZXJpZnlDaGVja291dFNwYW1Qcm90ZWN0aW9uKCl7cmV0dXJuIGU9PmRlKCgpPT57Y29uc3QgdD1lLmdldFN0YXRlKCkuY2hlY2tvdXQuZ2V0Q2hlY2tvdXQoKTtpZighdCl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NoZWNrb3V0KTtyZXR1cm4gc2UobWUobChtcy5WZXJpZnlDaGVja291dFJlcXVlc3RlZCkpLGxlKHRoaXMuZXhlY3V0ZSgpKGUpKS5waXBlKEllKGU9PldhKGUpJiZlLnBheWxvYWQ/bGUodGhpcy5fcmVxdWVzdFNlbmRlci52YWxpZGF0ZSh0LmlkLGUucGF5bG9hZC50b2tlbikpLnBpcGUoSWUoKHtib2R5OnR9KT0+c2UobWUoZSksbWUobChtcy5WZXJpZnlDaGVja291dFN1Y2NlZWRlZCx0KSkpKSk6bWUoZSkpKSkucGlwZShnZShlPT5KZShtcy5WZXJpZnlDaGVja291dEZhaWxlZCxlKSkpfSl9ZXhlY3V0ZSgpe3JldHVybiBlPT5zZShtZShsKG1zLkV4ZWN1dGVSZXF1ZXN0ZWQpKSx0aGlzLmluaXRpYWxpemUoKShlKSx0aGlzLl9nb29nbGVSZWNhcHRjaGEuZXhlY3V0ZSgpLnBpcGUoYmUoMSkpLnBpcGUoSWUoKHtlcnJvcjplLHRva2VuOnR9KT0+U3ModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKGUgaW5zdGFuY2VvZiBncyl0aHJvdyBlO2lmKGV8fCF0KXRocm93IG5ldyB2cztyZXR1cm4gbChtcy5FeGVjdXRlU3VjY2VlZGVkLHt0b2tlbjp0fSl9KSkpKS5waXBlKGdlKGU9PkplKG1zLkV4ZWN1dGVGYWlsZWQsZSkpKX19Y2xhc3Mgd3N7Y29uc3RydWN0b3IoZT13aW5kb3cpe3RoaXMuX3dpbmRvdz1lfWNyZWF0ZShlKXtyZXR1cm4gbmV3IHRoaXMuX3dpbmRvdy5NdXRhdGlvbk9ic2VydmVyKGUpfX0hZnVuY3Rpb24oZSl7ZVtlLkNoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQ9MF09XCJDaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkXCIsZVtlLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ9MV09XCJDdXN0b21lck5vdEluaXRpYWxpemVkXCIsZVtlLlBheW1lbnROb3RJbml0aWFsaXplZD0yXT1cIlBheW1lbnROb3RJbml0aWFsaXplZFwiLGVbZS5TaGlwcGluZ05vdEluaXRpYWxpemVkPTNdPVwiU2hpcHBpbmdOb3RJbml0aWFsaXplZFwiLGVbZS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkPTRdPVwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZFwifShmc3x8KGZzPXt9KSk7Y2xhc3MgQ3MgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSBmcy5DdXN0b21lck5vdEluaXRpYWxpemVkOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuXCI7Y2FzZSBmcy5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLlwiO2Nhc2UgZnMuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLlwiO2Nhc2UgZnMuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuXCI7ZGVmYXVsdDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuXCJ9fShlKSksdGhpcy5zdWJ0eXBlPWUsdGhpcy5uYW1lPVwiTm90SW5pdGlhbGl6ZWRFcnJvclwiLHRoaXMudHlwZT1cIm5vdF9pbml0aWFsaXplZFwifX1jbGFzcyBJcyBleHRlbmRzIFple2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJTcGFtIHByb3RlY3Rpb24gaXMgbm90IGxvYWRlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIiksdGhpcy5uYW1lPVwiU3BhbVByb3RlY3Rpb25Ob3RMb2FkZWRFcnJvclwiLHRoaXMudHlwZT1cInNwYW1fcHJvdGVjdGlvbl9mYWlsZWRcIn19Y2xhc3MgYnN7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmdvb2dsZVJlY2FwdGNoYVNjcmlwdExvYWRlcj1lLHRoaXMubXV0YXRpb25PYnNlcnZlckZhY3Rvcnk9dCx0aGlzLl9tZW1vaXplZD1QZSgoZSx0LG4pPT57Y29uc3QgaT1uZXcgYWU7aWYoIW4pdGhyb3cgbmV3IEVycm9yO3JldHVybiB0aGlzLl93aWRnZXRJZD1lLnJlbmRlcihuLmlkLHtzaXRla2V5OnQsc2l6ZTpcImludmlzaWJsZVwiLGNhbGxiYWNrOigpPT57aS5uZXh0KHt0b2tlbjplLmdldFJlc3BvbnNlKHRoaXMuX3dpZGdldElkKX0pLGUucmVzZXQodGhpcy5fd2lkZ2V0SWQpfSxcImVycm9yLWNhbGxiYWNrXCI6KCk9PntpLm5leHQoe2Vycm9yOm5ldyB2c30pfX0pLGl9LHtpc0VxdWFsOihlLHQpPT5lPT09dH0pfWxvYWQoZSx0KXtyZXR1cm4gdGhpcy5nb29nbGVSZWNhcHRjaGFTY3JpcHRMb2FkZXIubG9hZCgpLnRoZW4obj0+e24mJih0aGlzLl9ldmVudCQ9dGhpcy5fbWVtb2l6ZWQobix0LGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpKSx0aGlzLl9yZWNhcHRjaGE9bil9KS5jYXRjaChlPT57dGhyb3cgZX0pfXJlc2V0KGUpe3ZhciB0O2NvbnN0IG49ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSk7bnVsbD09bnx8bi5yZW1vdmUoKSxudWxsPT09KHQ9dGhpcy5fcmVjYXB0Y2hhKXx8dm9pZCAwPT09dHx8dC5yZXNldCh0aGlzLl93aWRnZXRJZCl9ZXhlY3V0ZSgpe3JldHVybiBkZSgoKT0+e2NvbnN0IGU9dGhpcy5fZXZlbnQkLHQ9dGhpcy5fcmVjYXB0Y2hhO2lmKCFlfHwhdCl0aHJvdyBuZXcgQ3MoZnMuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCk7cmV0dXJuIGRlKCgpPT57Y29uc3QgZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbc3JjKj1cImJmcmFtZVwiXScpO3JldHVybiBlP21lKGUpOnllKG5ldyBJcyl9KS5waXBlKHdlKGU9PmUucGlwZSh2ZSgyNTApLEllKChlLHQpPT50PDI4P21lKGUpOnllKGUpKSkpLEllKG49Pih0aGlzLl93YXRjaFJlY2FwdGNoYUNoYWxsZW5nZVdpbmRvdyhlLG4pLHQuZXhlY3V0ZSh0aGlzLl93aWRnZXRJZCksZSkpLGdlKGU9Pm1lKHtlcnJvcjplfSkpKX0pfV93YXRjaFJlY2FwdGNoYUNoYWxsZW5nZVdpbmRvdyhlLHQpe2NvbnN0IG49dC5wYXJlbnRFbGVtZW50O2lmKCFuKXRocm93IG5ldyBJcztjb25zdCBpPW4ucGFyZW50RWxlbWVudDtpZighaSl0aHJvdyBuZXcgSXM7dGhpcy5tdXRhdGlvbk9ic2VydmVyRmFjdG9yeS5jcmVhdGUoKCk9PntcImhpZGRlblwiPT09aS5zdHlsZS52aXNpYmlsaXR5JiZlLm5leHQoe2Vycm9yOm5ldyBnc30pfSkub2JzZXJ2ZShpLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbXCJzdHlsZVwiXX0pfX1jbGFzcyBQc3tjb25zdHJ1Y3RvcihlLHQ9d2luZG93KXt0aGlzLl9zY3JpcHRMb2FkZXI9ZSx0aGlzLl93aW5kb3c9dH1sb2FkKCl7cmV0dXJuIHRoaXMuX2xvYWRQcm9taXNlfHwodGhpcy5fbG9hZFByb21pc2U9dGhpcy5fbG9hZFNjcmlwdCgpKSx0aGlzLl9sb2FkUHJvbWlzZX1fbG9hZFNjcmlwdCgpe2NvbnN0IGU9XCJpbml0UmVjYXB0Y2hhXCIsdD1bYG9ubG9hZD0ke2V9YCxcInJlbmRlcj1leHBsaWNpdFwiXS5qb2luKFwiJlwiKTtyZXR1cm4gbmV3IFByb21pc2UoKG4saSk9Pnt0aGlzLl93aW5kb3dbZV09KCk9Pm4odGhpcy5fd2luZG93LmdyZWNhcHRjaGEpLHRoaXMuX3NjcmlwdExvYWRlci5sb2FkU2NyaXB0KGAvL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkuanM/JHt0fWApLmNhdGNoKGU9Pnt0aGlzLl9sb2FkUHJvbWlzZT12b2lkIDAsaShlKX0pfSl9fWZ1bmN0aW9uIE9zKGUpe3JldHVybiBuZXcgYnMobmV3IFBzKGUpLG5ldyB3cyl9Y2xhc3MgRXN7Y29uc3RydWN0b3IoZSl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lfXZhbGlkYXRlKGUsdCx7dGltZW91dDpufT17fSl7Y29uc3QgaT1gL2FwaS9zdG9yZWZyb250L2NoZWNrb3V0cy8ke2V9L3NwYW0tcHJvdGVjdGlvbmAscj1PYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxfSxydCk7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdChpLHtib2R5Ont0b2tlbjp0fSxoZWFkZXJzOnIsdGltZW91dDpufSkuY2F0Y2goZT0+e2lmKFwiZW1wdHlfY2FydFwiPT09ZS5ib2R5LnR5cGUpdGhyb3cgbmV3IG50O3Rocm93IGV9KX19Y2xhc3MgQXN7Y29uc3RydWN0b3IoZSx0KXt0aGlzLl9zdG9yZT1lLHRoaXMuX2N1c3RvbWVyQWN0aW9uQ3JlYXRvcj10fXNpZ25JbihlLHQpe3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9jdXN0b21lckFjdGlvbkNyZWF0b3Iuc2lnbkluQ3VzdG9tZXIoZSx0KSl9c2lnbk91dChlKXtyZXR1cm4gdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fY3VzdG9tZXJBY3Rpb25DcmVhdG9yLnNpZ25PdXRDdXN0b21lcihlKSl9ZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChlKXt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayl8fHZvaWQgMD09PXR8fHQuY2FsbChlKSxQcm9taXNlLnJlc29sdmUodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSl9aW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKX19Y2xhc3Mga3MgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHxcIk5vdCBpbXBsZW1lbnRlZC5cIiksdGhpcy5uYW1lPVwiTm90SW1wbGVtZW50ZWRFcnJvclwiLHRoaXMudHlwZT1cIm5vdF9pbXBsZW1lbnRlZFwifX1mdW5jdGlvbiBUcyhlKXtyZXR1cm5gJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS9jaGVja291dC5waHA/YWN0aW9uPXNldF9leHRlcm5hbF9jaGVja291dCZwcm92aWRlcj1tYXN0ZXJwYXNzJmdhdGV3YXk9c3RyaXBlJm9yaWdpbj0ke2V9YH1jb25zdCBEcz17ZXM6W1wiZXNfZXNcIixcImVzX214XCIsXCJlc19wZVwiLFwiZXNfY29cIixcImVzX2FyXCIsXCJlc19jbFwiXSxlbjpbXCJlbl91c1wiLFwiZW5fZ2JcIixcImVuX2NhXCIsXCJlbl9lc1wiLFwiZW5fZnJcIixcImVuX2llXCIsXCJlbl9zZ1wiLFwiZW5fYXVcIixcImVuX256XCIsXCJlbl9teVwiLFwiZW5faGtcIixcImVuX3RoXCIsXCJlbl9hZVwiLFwiZW5fc2FcIixcImVuX3FhXCIsXCJlbl9rd1wiLFwiZW5femFcIl0scHQ6W1wicHRfYnJcIl0senU6W1wienVfemFcIl0sYXI6W1wiYXJfc2FcIixcImFyX2FlXCIsXCJhcl9xYVwiLFwiYXJfa3dcIl0semg6W1wiemhfc2dcIixcInpoX2hrXCJdLG1zOltcIm1zX215XCJdLHVrOltcInVrX3VhXCJdLHN2OltcInN2X3NlXCJdLGhyOltcImhyX2hyXCJdLHBsOltcInBsX3BsXCJdLG5sOltcIm5sX2JlXCJdLGl0OltcIml0X2l0XCJdLGRlOltcImRlX2RlXCJdLGZyOltcImZyX2ZyXCIsXCJmcl9jYVwiXX07ZnVuY3Rpb24gTXMoZSl7Y29uc3RbdCxuXT1lLnJlcGxhY2UoXCItXCIsXCJfXCIpLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCJfXCIpLGk9YCR7dH1fJHtufWAscj1Ec1t0XTtyZXR1cm4gcj9yLmluZGV4T2YoaSk+LTE/aTpyWzBdOlwiZW5fdXNcIn1jbGFzcyB6c3tjb25zdHJ1Y3RvcihlLHQsbixpLHIpe3RoaXMuX3N0b3JlPWUsdGhpcy5fcGF5bWVudE1ldGhvZEFjdGlvbkNyZWF0b3I9dCx0aGlzLl9yZW1vdGVDaGVja291dEFjdGlvbkNyZWF0b3I9bix0aGlzLl9tYXN0ZXJwYXNzU2NyaXB0TG9hZGVyPWksdGhpcy5fbG9jYWxlPXJ9aW5pdGlhbGl6ZShlKXtjb25zdHttYXN0ZXJwYXNzOnQsbWV0aG9kSWQ6bn09ZTtpZighdHx8IW4pdGhyb3cgbmV3IEZ0KCdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwib3B0aW9ucy5tYXN0ZXJwYXNzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50TWV0aG9kQWN0aW9uQ3JlYXRvci5sb2FkUGF5bWVudE1ldGhvZChuKSkudGhlbihlPT57aWYodGhpcy5fcGF5bWVudE1ldGhvZD1lLnBheW1lbnRNZXRob2RzLmdldFBheW1lbnRNZXRob2QobiksIXRoaXMuX3BheW1lbnRNZXRob2R8fCF0aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YS5jaGVja291dElkKXRocm93IG5ldyBRZShXZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3QgaT1lLmNhcnQuZ2V0Q2FydCgpO2lmKCFpKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2FydCk7Y29uc3R7Y29udGFpbmVyOnJ9PXQsbz17Y2hlY2tvdXRJZDp0aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YS5jaGVja291dElkLGFsbG93ZWRDYXJkVHlwZXM6dGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEuYWxsb3dlZENhcmRUeXBlcyxhbW91bnQ6aS5jYXJ0QW1vdW50LnRvU3RyaW5nKCksY3VycmVuY3k6aS5jdXJyZW5jeS5jb2RlLGNhcnRJZDppLmlkLHN1cHByZXNzU2hpcHBpbmdBZGRyZXNzOiExLGNhbGxiYWNrVXJsOlRzKFwiY2hlY2tvdXRcIil9LGE9e3VzZU1hc3RlcnBhc3NTcmM6dGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEuaXNNYXN0ZXJwYXNzU3JjRW5hYmxlZCxsYW5ndWFnZTpNcyh0aGlzLl9sb2NhbGUpLHRlc3RNb2RlOnRoaXMuX3BheW1lbnRNZXRob2QuY29uZmlnLnRlc3RNb2RlLGNoZWNrb3V0SWQ6dGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEuY2hlY2tvdXRJZH07cmV0dXJuIHRoaXMuX21hc3RlcnBhc3NTY3JpcHRMb2FkZXIubG9hZChhKS50aGVuKGU9Pnt0aGlzLl9zaWduSW5CdXR0b249dGhpcy5fY3JlYXRlU2lnbkluQnV0dG9uKHIpLHRoaXMuX3NpZ25JbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKT0+e2UuY2hlY2tvdXQobyl9KX0pfSkudGhlbigoKT0+dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIHRoaXMuX3BheW1lbnRNZXRob2Q9dm9pZCAwLHRoaXMuX3NpZ25JbkJ1dHRvbiYmdGhpcy5fc2lnbkluQnV0dG9uLnBhcmVudE5vZGUmJih0aGlzLl9zaWduSW5CdXR0b24ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9zaWduSW5CdXR0b24pLHRoaXMuX3NpZ25JbkJ1dHRvbj12b2lkIDApLFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKX1zaWduSW4oKXt0aHJvdyBuZXcga3MoJ0luIG9yZGVyIHRvIHNpZ24gaW4gdmlhIE1hc3RlcnBhc3MsIHRoZSBzaG9wcGVyIG11c3QgY2xpY2sgb24gXCJNYXN0ZXJwYXNzXCIgYnV0dG9uLicpfXNpZ25PdXQoZSl7Y29uc3QgdD10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLnBheW1lbnQuZ2V0UGF5bWVudElkKCk7cmV0dXJuIHQ/dGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fcmVtb3RlQ2hlY2tvdXRBY3Rpb25DcmVhdG9yLnNpZ25PdXQodC5wcm92aWRlcklkLGUpKTpQcm9taXNlLnJlc29sdmUodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSl9ZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChlKXt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayl8fHZvaWQgMD09PXR8fHQuY2FsbChlKSxQcm9taXNlLnJlc29sdmUodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSl9X2NyZWF0ZVNpZ25JbkJ1dHRvbihlKXtjb25zdCB0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2V9YCk7aWYoIXRoaXMuX3BheW1lbnRNZXRob2R8fCF0aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YS5jaGVja291dElkKXRocm93IG5ldyBRZShXZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7aWYoIXQpdGhyb3cgbmV3IEZ0KFwiVW5hYmxlIHRvIGNyZWF0ZSBzaWduLWluIGJ1dHRvbiB3aXRob3V0IHZhbGlkIGNvbnRhaW5lciBJRC5cIik7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7aWYobi50eXBlPVwiaW1hZ2VcIix0aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YS5pc01hc3RlcnBhc3NTcmNFbmFibGVkKXtjb25zdCBlPXRoaXMuX3BheW1lbnRNZXRob2QuY29uZmlnLnRlc3RNb2RlP1wic2FuZGJveC5cIjpcIlwiLHtjaGVja291dElkOnR9PXRoaXMuX3BheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhLGk9W2Bsb2NhbGU9JHtNcyh0aGlzLl9sb2NhbGUpfWAsXCJwYXltZW50bWV0aG9kPW1hc3Rlcix2aXNhLGFtZXgsZGlzY292ZXJcIixgY2hlY2tvdXRpZD0ke3R9YF07bi5zcmM9W2BodHRwczovLyR7ZX1zcmMubWFzdGVyY2FyZC5jb20vYXNzZXRzL2ltZy9idG4vc3JjX2Noa19idG5fMTI2eDAzMHB4LnN2Z2AsaS5qb2luKFwiJlwiKV0uam9pbihcIj9cIil9ZWxzZSBuLnNyYz1cImh0dHBzOi8vc3RhdGljLm1hc3RlcnBhc3MuY29tL2R5bi9pbWcvYnRuL2dsb2JhbC9tcF9jaGtfYnRuXzE2MHgwMzdweC5zdmdcIjtyZXR1cm4gdC5hcHBlbmRDaGlsZChuKSxufX1jbGFzcyBOc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX3N0b3JlPWUsdGhpcy5fcmVtb3RlQ2hlY2tvdXRBY3Rpb25DcmVhdG9yPXR9c2lnbkluKCl7dGhyb3cgbmV3IGtzKCdJbiBvcmRlciB0byBzaWduIGluIHZpYSBNYXN0ZXJwYXNzLCB0aGUgc2hvcHBlciBtdXN0IGNsaWNrIG9uIFwiTWFzdGVycGFzc1wiIGJ1dHRvbi4nKX1zaWduT3V0KGUpe2NvbnN0IHQ9dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKS5wYXltZW50LmdldFBheW1lbnRJZCgpO3JldHVybiB0P3RoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3JlbW90ZUNoZWNrb3V0QWN0aW9uQ3JlYXRvci5zaWduT3V0KHQucHJvdmlkZXJJZCxlKSk6UHJvbWlzZS5yZXNvbHZlKHRoaXMuX3N0b3JlLmdldFN0YXRlKCkpfWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3N0b3JlLmdldFN0YXRlKCkpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSl9ZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChlKXt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayl8fHZvaWQgMD09PXR8fHQuY2FsbChlKSxQcm9taXNlLnJlc29sdmUodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSl9fWZ1bmN0aW9uIHhzKGUpe2lmKCEvXihodHRwcz86KT9cXC9cXC8vLnRlc3QoZSkpdGhyb3cgbmV3IEZ0KFwiVGhlIHByb3ZpZGVkIFVSTCBtdXN0IGJlIGFic29sdXRlLlwiKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3QuaHJlZj1lO2NvbnN0IG49dC5wb3J0JiYtMSE9PWUuaW5kZXhPZihgJHt0Lmhvc3RuYW1lfToke3QucG9ydH1gKT90LnBvcnQ6XCJcIjtyZXR1cm57aGFzaDp0Lmhhc2gsaG9zdG5hbWU6dC5ob3N0bmFtZSxocmVmOnQuaHJlZixvcmlnaW46YCR7dC5wcm90b2NvbH0vLyR7dC5ob3N0bmFtZX0ke24/YDoke259YDpcIlwifWAscGF0aG5hbWU6dC5wYXRobmFtZSxwb3J0Om4scHJvdG9jb2w6dC5wcm90b2NvbCxzZWFyY2g6dC5zZWFyY2h9fWNsYXNzIEZzIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJVbmFibGUgdG8gcHJvY2VlZCBkdWUgdG8gbm8gZXh0ZW5zaW9uIGNvbmZpZ3VyZWQgZm9yIHRoaXMgcmVnaW9uLlwiKSx0aGlzLm5hbWU9XCJFeHRlbnNpb25Ob3RGb3VuZEVycm9yXCIsdGhpcy50eXBlPVwiZXh0ZW5zaW9uX25vdF9mb3VuZFwifX12YXIgUnMsTHM7ZnVuY3Rpb24gQnMoZSx0KXtyZXR1cm4gZS50eXBlPT09dH0hZnVuY3Rpb24oZSl7ZS5Mb2FkRXh0ZW5zaW9uc1JlcXVlc3RlZD1cIkxPQURfRVhURU5TSU9OU19SRVFVRVNURURcIixlLkxvYWRFeHRlbnNpb25zU3VjY2VlZGVkPVwiTE9BRF9FWFRFTlNJT05TX1NVQ0NFRURFRFwiLGUuTG9hZEV4dGVuc2lvbnNGYWlsZWQ9XCJMT0FEX0VYVEVOU0lPTlNfRkFJTEVEXCIsZS5SZW5kZXJFeHRlbnNpb25SZXF1ZXN0ZWQ9XCJSRU5ERVJfRVhURU5TSU9OX1JFUVVFU1RFRFwiLGUuUmVuZGVyRXh0ZW5zaW9uU3VjY2VlZGVkPVwiUkVOREVSX0VYVEVOU0lPTl9TVUNDRUVERURcIixlLlJlbmRlckV4dGVuc2lvbkZhaWxlZD1cIlJFTkRFUl9FWFRFTlNJT05fRkFJTEVEXCJ9KFJzfHwoUnM9e30pKTtjbGFzcyBqc3tjb25zdHJ1Y3RvcihlLHQsbil7dGhpcy5fdGFyZ2V0V2luZG93PXQsdGhpcy5fY29udGV4dD1uLHRoaXMuX3RhcmdldE9yaWdpbj1cIipcIj09PWU/XCIqXCI6eHMoZSkub3JpZ2lufXBvc3QoZSx0KXtjb25zdCBuPXRoaXMuX3RhcmdldFdpbmRvdztpZih3aW5kb3c9PT1uKXJldHVybjtpZighbil0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gcG9zdCBtZXNzYWdlIGJlY2F1c2UgdGFyZ2V0IHdpbmRvdyBpcyBub3Qgc2V0LlwiKTtjb25zdCBpPXQmJnVlKHdpbmRvdyxcIm1lc3NhZ2VcIikucGlwZShTZShlPT5lLm9yaWdpbj09PXRoaXMuX3RhcmdldE9yaWdpbiYmQnMoZS5kYXRhLGUuZGF0YS50eXBlKSYmLTEhPT1bdC5zdWNjZXNzVHlwZSx0LmVycm9yVHlwZV0uaW5kZXhPZihlLmRhdGEudHlwZSkpLF9lKGU9PntpZih0LmVycm9yVHlwZT09PWUuZGF0YS50eXBlKXRocm93IGUuZGF0YTtyZXR1cm4gZS5kYXRhfSksYmUoMSkpLnRvUHJvbWlzZSgpO3JldHVybiBuLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7Y29udGV4dDp0aGlzLl9jb250ZXh0fSksdGhpcy5fdGFyZ2V0T3JpZ2luKSxpfXNldFRhcmdldChlKXt0aGlzLl90YXJnZXRXaW5kb3c9ZX1zZXRDb250ZXh0KGUpe3RoaXMuX2NvbnRleHQ9ZX19ZnVuY3Rpb24gVXMoZSl7dmFyIHQ7Y29uc3Qgbj1udWxsPT09KHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtZXh0ZW5zaW9uLWlkPVwiJHtlLmlkfVwiXWApKXx8dm9pZCAwPT09dD92b2lkIDA6dC5xdWVyeVNlbGVjdG9yKFwiaWZyYW1lXCIpO2lmKCEobnVsbD09bj92b2lkIDA6bi5jb250ZW50V2luZG93KSl0aHJvdyBuZXcgRnMoYFVuYWJsZSB0byBwb3N0IGR1ZSB0byBubyBleHRlbnNpb24gcmVuZGVyZWQgZm9yIElEOiAke2UuaWR9LmApO3JldHVybiBuZXcganMoZS51cmwsbi5jb250ZW50V2luZG93KX0hZnVuY3Rpb24oZSl7ZS5FeHRlbnNpb25SZWFkeT1cIkVYVEVOU0lPTjpSRUFEWVwiLGUuRXh0ZW5zaW9uRmFpbGVkPVwiRVhURU5TSU9OOkZBSUxFRFwifShMc3x8KExzPXt9KSk7Y2xhc3MgcXMgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHxcIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGVsZW1lbnQgaXMgdW5leHBlY3RlZGx5IGRldGFjaGVkIGZyb20gdGhlIHBhZ2UuXCIpLHRoaXMubmFtZT1cIlVuZXhwZWN0ZWREZXRhY2htZW50RXJyb3JcIix0aGlzLnR5cGU9XCJ1bmV4cGVjdGVkX2RldGFjaG1lbnRcIn19dmFyIFZzO2NsYXNzIEdze2NvbnN0cnVjdG9yKGUpe3RoaXMuX211dGF0aW9uT2JzZXJ2ZXI9ZX1lbnN1cmVQcmVzZW5jZShlLHQpe3JldHVybiBuPXRoaXMsaT12b2lkIDAsbz1mdW5jdGlvbiooKXtjb25zdCBuPW5ldyBKaSh0KSxpPXRoaXMuX211dGF0aW9uT2JzZXJ2ZXIuY3JlYXRlKHQ9Pnt0LmZvckVhY2godD0+ezAhPT1BcnJheS5mcm9tKHQucmVtb3ZlZE5vZGVzKS5maWx0ZXIodD0+ZS5zb21lKGU9PnQ9PT1lfHx0LmNvbnRhaW5zKGUpKSkubGVuZ3RoJiZuLmNhbmNlbChuZXcgcXMpfSl9KTtpLm9ic2VydmUoZG9jdW1lbnQuYm9keSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KTt0cnl7Y29uc3QgZT15aWVsZCBuLnByb21pc2U7cmV0dXJuIGkuZGlzY29ubmVjdCgpLGV9Y2F0Y2goZSl7dGhyb3cgaS5kaXNjb25uZWN0KCksZX19LG5ldygocj12b2lkIDApfHwocj1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBhKGUpe3RyeXtkKG8ubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChvLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIHI/bjpuZXcgcihmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChvPW8uYXBwbHkobixpfHxbXSkpLm5leHQoKSl9KTt2YXIgbixpLHIsb319ZnVuY3Rpb24gSHMoZSx0KXtjb25zdHtpZnJhbWVSZXNpemVyOm59PUdlKDc4NSk7cmV0dXJuIG4oZSx0KX1jbGFzcyAkcyBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiVW5hYmxlIHRvIGxvYWQgYW4gZXh0ZW5zaW9uXCIpLHRoaXMubmFtZT1cIkV4dGVuc2lvbk5vdExvYWRlZEVycm9yXCIsdGhpcy50eXBlPVwiZXh0ZW5zaW9uX25vdF9sb2FkZWRcIn19IWZ1bmN0aW9uKGUpe2UuU3Vic2NyaWJlPVwiRVhURU5TSU9OX0lOVEVSTkFMOlNVQlNDUklCRVwiLGUuVW5zdWJzY3JpYmU9XCJFWFRFTlNJT05fSU5URVJOQUw6VU5TVUJTQ1JJQkVcIixlLlJlc2l6ZUlmcmFtZT1cIkVYVEVOU0lPTl9JTlRFUk5BTDpSRVNJWkVfSUZSQU1FXCJ9KFZzfHwoVnM9e30pKTtjbGFzcyBXc3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9vcHRpb25zPWV9Y3JlYXRlRnJhbWUoZSx0LG4saSl7Y29uc3Qgcj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KSx7dGltZW91dDpvPTZlNH09dGhpcy5fb3B0aW9uc3x8e307aWYoIXIpdGhyb3cgbmV3ICRzKFwiVW5hYmxlIHRvIGVtYmVkIHRoZSBpZnJhbWUgYmVjYXVzZSB0aGUgY29udGFpbmVyIGVsZW1lbnQgY291bGQgbm90IGJlIGZvdW5kLlwiKTtjb25zdCBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7cmV0dXJuIGEuc3JjPWUsYS5zdHlsZS5ib3JkZXI9XCJub25lXCIsYS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGEuc3R5bGUud2lkdGg9XCIxMDAlXCIsci5hcHBlbmRDaGlsZChhKSx0aGlzLl90b1Jlc2l6YWJsZUZyYW1lKGEsbyxuLGkpLmNhdGNoKGU9Pnt0aHJvdyByLnJlbW92ZUNoaWxkKGEpLGV9KX1fdG9SZXNpemFibGVGcmFtZShlLHQsbixpKXtyZXR1cm4gcj10aGlzLG89dm9pZCAwLHM9ZnVuY3Rpb24qKCl7Y29uc3Qgcj1uZXcgR3MobmV3IHdzKSxvPW5ldyBQcm9taXNlKChyLG8pPT57Y29uc3QgYT13aW5kb3cuc2V0VGltZW91dCgoKT0+e3RyeXtpKCl9Y2F0Y2goZSl7ZSBpbnN0YW5jZW9mIEVycm9yJiZjb25zb2xlLmVycm9yKGBFeHRlbnNpb24gcmVuZGVyaW5nIHRpbWVkIG91dCBhZnRlciAke3R9bXMsIGFuZCB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gY291bGQgbm90IGJlIGV4ZWN1dGVkLiBFcnJvcjogJHtlLm1lc3NhZ2V9YCl9byhuZXcgJHMoXCJVbmFibGUgdG8gbG9hZCB0aGUgZXh0ZW5zaW9uIGJlY2F1c2UgdGhlIGNvbnRlbnQgY291bGQgbm90IGJlIGxvYWRlZC5cIikpfSx0KSxzPXQ9PntpZih0Lm9yaWdpbj09PXhzKGUuc3JjKS5vcmlnaW4mJkJzKHQuZGF0YSxWcy5SZXNpemVJZnJhbWUpKXtlLnN0eWxlLmRpc3BsYXk9XCJcIjtjb25zdCB0PUhzKHthdXRvUmVzaXplOiExLHNjcm9sbGluZzohMSxzaXplV2lkdGg6ITEsaGVpZ2h0Q2FsY3VsYXRpb25NZXRob2Q6XCJib2R5T2Zmc2V0XCIsaW5pdENhbGxiYWNrOm59LGUpO2QoKSxyKHRbdC5sZW5ndGgtMV0pfX0sZD0oKT0+e3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHMpLHdpbmRvdy5jbGVhclRpbWVvdXQoYSl9O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHMpfSk7cmV0dXJuIHIuZW5zdXJlUHJlc2VuY2UoW2VdLG8pfSxuZXcoKGE9dm9pZCAwKXx8KGE9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXt0cnl7ZChzLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGkoZSl7dHJ5e2Qocy50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgcjt0LmRvbmU/ZSh0LnZhbHVlKToocj10LnZhbHVlLHIgaW5zdGFuY2VvZiBhP3I6bmV3IGEoZnVuY3Rpb24oZSl7ZShyKX0pKS50aGVuKG4saSl9ZCgocz1zLmFwcGx5KHIsb3x8W10pKS5uZXh0KCkpfSk7dmFyIHIsbyxhLHN9fWNsYXNzIFlze2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLl9jb250YWluZXJJZD1lLHRoaXMuX2V4dGVuc2lvbj10LHRoaXMuX2NvbmZpZz1uO2NvbnN0e2NhcnRJZDppLHBhcmVudE9yaWdpbjpyfT10aGlzLl9jb25maWc7dGhpcy5fdXJsPW5ldyBVUkwodGhpcy5fZXh0ZW5zaW9uLnVybCksdGhpcy5fdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJleHRlbnNpb25JZFwiLHRoaXMuX2V4dGVuc2lvbi5pZCksdGhpcy5fdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjYXJ0SWRcIixpKSx0aGlzLl91cmwuc2VhcmNoUGFyYW1zLnNldChcInBhcmVudE9yaWdpblwiLHIpfWF0dGFjaCgpe3ZhciBlLHQsbixpLHI7cmV0dXJuIHQ9dGhpcyxuPXZvaWQgMCxyPWZ1bmN0aW9uKigpe2lmKG51bGw9PT0oZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHRlbnNpb24taWQ9XCIke3RoaXMuX2V4dGVuc2lvbi5pZH1cIl1gKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUucXVlcnlTZWxlY3RvcihcImlmcmFtZVwiKSlyZXR1cm47Y29uc3QgdD1uZXcgV3Msbj1lPT57VXModGhpcy5fZXh0ZW5zaW9uKS5wb3N0KHt0eXBlOmV9KX07dGhpcy5faWZyYW1lPXlpZWxkIHQuY3JlYXRlRnJhbWUodGhpcy5fdXJsLnRvU3RyaW5nKCksdGhpcy5fY29udGFpbmVySWQsKCk9PntuKExzLkV4dGVuc2lvblJlYWR5KX0sKCk9PntuKExzLkV4dGVuc2lvbkZhaWxlZCl9KTtjb25zdCBpPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX2NvbnRhaW5lcklkKTtudWxsPT1pfHxpLnNldEF0dHJpYnV0ZShcImRhdGEtZXh0ZW5zaW9uLWlkXCIsdGhpcy5fZXh0ZW5zaW9uLmlkKX0sbmV3KChpPXZvaWQgMCl8fChpPVByb21pc2UpKShmdW5jdGlvbihlLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoci5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKHIudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2YgaT9uOm5ldyBpKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKHI9ci5hcHBseSh0LG58fFtdKSkubmV4dCgpKX0pfWRldGFjaCgpe3RoaXMuX2lmcmFtZSYmdGhpcy5faWZyYW1lLnBhcmVudEVsZW1lbnQmJnRoaXMuX2lmcmFtZS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX2lmcmFtZSl9fWNsYXNzIEtze2NvbnN0cnVjdG9yKGUpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZX1sb2FkRXh0ZW5zaW9ucyhlKXtyZXR1cm4oKT0+b2UuY3JlYXRlKHQ9Pnt0Lm5leHQobChScy5Mb2FkRXh0ZW5zaW9uc1JlcXVlc3RlZCkpLHRoaXMuX3JlcXVlc3RTZW5kZXIubG9hZEV4dGVuc2lvbnMoZSkudGhlbihlPT57Y29uc3Qgbj1lLmJvZHk7dC5uZXh0KGwoUnMuTG9hZEV4dGVuc2lvbnNTdWNjZWVkZWQsbikpLHQuY29tcGxldGUoKX0pLmNhdGNoKGU9Pnt0LmVycm9yKGgoUnMuTG9hZEV4dGVuc2lvbnNGYWlsZWQsZSkpfSl9KX1yZW5kZXJFeHRlbnNpb24oZSx0LG4pe3JldHVybiBpPT5vZS5jcmVhdGUocj0+e3JldHVybiBvPXRoaXMsYT12b2lkIDAsZD1mdW5jdGlvbiooKXtjb25zdCBvPWkuZ2V0U3RhdGUoKSx7aWQ6YX09by5jYXJ0LmdldENhcnRPclRocm93KCkse2xpbmtzOntjaGVja291dExpbms6c30sY2hlY2tvdXRTZXR0aW5nczp7ZmVhdHVyZXM6ZH19PW8uY29uZmlnLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpO2lmKCFkW1wiUFJPSkVDVC01MDI5LmNoZWNrb3V0X2V4dGVuc2lvblwiXSlyZXR1cm4gci5jb21wbGV0ZSgpO2NvbnN0IGM9by5leHRlbnNpb25zLmdldEV4dGVuc2lvbkJ5UmVnaW9uKHQpO3RyeXtpZighYyl0aHJvdyBuZXcgRnMoYFVuYWJsZSB0byBwcm9jZWVkIGR1ZSB0byBubyBleHRlbnNpb24gY29uZmlndXJlZCBmb3IgdGhlIHJlZ2lvbjogJHt0fS5gKTtpZihyLm5leHQobChScy5SZW5kZXJFeHRlbnNpb25SZXF1ZXN0ZWQpKSxcIndvcmtlclwiPT09Yy50eXBlKXtjb25zdCBlPWZ1bmN0aW9uKGUpe2lmKCF3aW5kb3cuV29ya2VyKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBsb2FkIHRoZSBleHRlbnNpb24ncyB3ZWIgd29ya2VyOiB5b3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBXZWIgV29ya2Vycy5cIik7dHJ5e2NvbnN0IHQ9VVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbYGltcG9ydFNjcmlwdHM9KChpKT0+KC4uLmEpPT5pKC4uLmEubWFwKCh1KT0+JycrbmV3IFVSTCh1LFwiJHtlfVwiKSkpKShpbXBvcnRTY3JpcHRzKTtpbXBvcnRTY3JpcHRzKFwiJHtlfVwiKWBdLHt0eXBlOlwidGV4dC9qYXZhc2NyaXB0XCJ9KSk7cmV0dXJuIG5ldyBXb3JrZXIodCl9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGxvYWQgdGhlIGV4dGVuc2lvbidzIHdlYiB3b3JrZXJcIil9fShjLnVybCk7bi5hZGQoYy5pZCxlKX1lbHNle2NvbnN0IHQ9bmV3IFlzKGUsYyx7Y2FydElkOmEscGFyZW50T3JpZ2luOnhzKHMpLm9yaWdpbn0pO3lpZWxkIHQuYXR0YWNoKCl9ci5uZXh0KGwoUnMuUmVuZGVyRXh0ZW5zaW9uU3VjY2VlZGVkKSksci5jb21wbGV0ZSgpfWNhdGNoKGUpe3IuZXJyb3IoaChScy5SZW5kZXJFeHRlbnNpb25GYWlsZWQsZSkpfX0sbmV3KChzPXZvaWQgMCl8fChzPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dHJ5e3IoZC5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBpKGUpe3RyeXtyKGQudGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHIodCl7dmFyIHI7dC5kb25lP2UodC52YWx1ZSk6KHI9dC52YWx1ZSxyIGluc3RhbmNlb2Ygcz9yOm5ldyBzKGZ1bmN0aW9uKGUpe2Uocil9KSkudGhlbihuLGkpfXIoKGQ9ZC5hcHBseShvLGF8fFtdKSkubmV4dCgpKX0pO3ZhciBvLGEscyxkfSl9fWNsYXNzIEpze2NvbnN0cnVjdG9yKGUpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZX1sb2FkRXh0ZW5zaW9ucyh7dGltZW91dDplLHBhcmFtczp0fT17fSl7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIuZ2V0KFwiL2FwaS9zdG9yZWZyb250L2NoZWNrb3V0LWV4dGVuc2lvbnNcIix7dGltZW91dDplLGhlYWRlcnM6T2JqZWN0LmFzc2lnbih7QWNjZXB0Oml0Lkpzb25WMX0scnQpLHBhcmFtczp0fSl9fXZhciBacyxRcztjbGFzcyBYc3tjb25zdHJ1Y3RvcihlKXt0aGlzLl93b3JrZXI9ZSx0aGlzLl9pc0xpc3RlbmluZz0hMSx0aGlzLl9saXN0ZW5lcnM9e319bGlzdGVuKCl7dGhpcy5faXNMaXN0ZW5pbmd8fCh0aGlzLl9pc0xpc3RlbmluZz0hMCx0aGlzLl93b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIix0aGlzLl9oYW5kbGVNZXNzYWdlKSl9c3RvcExpc3Rlbigpe3RoaXMuX2lzTGlzdGVuaW5nJiYodGhpcy5faXNMaXN0ZW5pbmc9ITEsdGhpcy5fd29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsdGhpcy5faGFuZGxlTWVzc2FnZSkpfWFkZExpc3RlbmVyKGUsdCl7bGV0IG49dGhpcy5fbGlzdGVuZXJzW2VdO258fCh0aGlzLl9saXN0ZW5lcnNbZV09bj1bXSksLTE9PT1uLmluZGV4T2YodCkmJm4ucHVzaCh0KX1yZW1vdmVMaXN0ZW5lcihlLHQpe2NvbnN0IG49dGhpcy5fbGlzdGVuZXJzW2VdO2lmKCFuKXJldHVybjtjb25zdCBpPW4uaW5kZXhPZih0KTtpPj0wJiZuLnNwbGljZShpLDEpfXRyaWdnZXIoZSx0KXtjb25zdCBuPXRoaXMuX2xpc3RlbmVyc1tlLnR5cGVdO24mJm4uZm9yRWFjaChuPT50P24oZSx0KTpuKGUpKX1faGFuZGxlTWVzc2FnZShlKXtjb25zdCB0PWUuZGF0YSx7Y29udGV4dDpufT10LGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufSh0LFtcImNvbnRleHRcIl0pO3RoaXMudHJpZ2dlcihpLG4pfX0hZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLGE9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik6aTtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlhPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG4saSk7ZWxzZSBmb3IodmFyIHM9ZS5sZW5ndGgtMTtzPj0wO3MtLSkocj1lW3NdKSYmKGE9KG88Mz9yKGEpOm8+Mz9yKHQsbixhKTpyKHQsbikpfHxhKTtvPjMmJmEmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4sYSl9KFtDcl0sWHMucHJvdG90eXBlLFwiX2hhbmRsZU1lc3NhZ2VcIixudWxsKTtjbGFzcyBlZHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX3dvcmtlcj1lLHRoaXMuX2NvbnRleHQ9dH1wb3N0KGUpe2lmKCF0aGlzLl93b3JrZXIpdGhyb3cgbmV3IEVycm9yKFwiV29ya2VyUG9zdGVyOiBXb3JrZXIgaXMgbm90IGluaXRpYWxpemVkIG9yIGNyZWF0aW9uIGZhaWxlZC4gQ2Fubm90IHBvc3QgbWVzc2FnZS5cIik7dGhpcy5fd29ya2VyLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7Y29udGV4dDp0aGlzLl9jb250ZXh0fSkpfX1jbGFzcyB0ZCBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiVW5hYmxlIHRvIHByb2NlZWQgZHVlIHRvIHVuc3VwcG9ydGVkIGV4dGVuc2lvbiBjb21tYW5kLlwiKSx0aGlzLm5hbWU9XCJVbnN1cHBvcnRlZEV4dGVuc2lvbkNvbW1hbmRFcnJvclwiLHRoaXMudHlwZT1cInVuc3VwcG9ydGVkX2V4dGVuc2lvbl9jb21tYW5kX2Vycm9yXCJ9fWNsYXNzIG5kIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJVbmFibGUgdG8gcHJvY2VlZCBkdWUgdG8gdW5zdXBwb3J0ZWQgZXh0ZW5zaW9uIHF1ZXJ5LlwiKSx0aGlzLm5hbWU9XCJVbnN1cHBvcnRlZEV4dGVuc2lvblF1ZXJ5RXJyb3JcIix0aGlzLnR5cGU9XCJ1bnN1cHBvcnRlZF9leHRlbnNpb25fcXVlcnlfZXJyb3JcIn19IWZ1bmN0aW9uKGUpe2UuUmVsb2FkQ2hlY2tvdXQ9XCJFWFRFTlNJT046UkVMT0FEX0NIRUNLT1VUXCIsZS5TaG93TG9hZGluZ0luZGljYXRvcj1cIkVYVEVOU0lPTjpTSE9XX0xPQURJTkdfSU5ESUNBVE9SXCIsZS5TZXRJZnJhbWVTdHlsZT1cIkVYVEVOU0lPTjpTRVRfSUZSQU1FX1NUWUxFXCIsZS5SZVJlbmRlclNoaXBwaW5nRm9ybT1cIkVYVEVOU0lPTjpSRV9SRU5ERVJfU0hJUFBJTkdfRk9STVwiLGUuUmVSZW5kZXJTaGlwcGluZ1N0ZXA9XCJFWFRFTlNJT046UkVfUkVOREVSX1NISVBQSU5HX1NURVBcIn0oWnN8fChacz17fSkpLGZ1bmN0aW9uKGUpe2UuR2V0Q29uc2lnbm1lbnRzPVwiRVhURU5TSU9OOkdFVF9DT05TSUdOTUVOVFNcIn0oUXN8fChRcz17fSkpO2NsYXNzIGlke2NvbnN0cnVjdG9yKGU9e30sdD17fSxuPXt9KXt0aGlzLl93b3JrZXJzPWUsdGhpcy5fY29tbWFuZExpc3RlbmVycz10LHRoaXMuX3F1ZXJ5TGlzdGVuZXJzPW59YWRkKGUsdCl7dGhpcy5fd29ya2Vyc1tlXT10fWxpc3RlbkZvckNvbW1hbmQoZSx0LG4pe2NvbnN0IGk9dGhpcy5fZ2V0V29ya2VyQnlJZChlKTt0aGlzLl9jb21tYW5kTGlzdGVuZXJzW2VdfHwodGhpcy5fY29tbWFuZExpc3RlbmVyc1tlXT1uZXcgWHMoaSkpO2NvbnN0IHI9dGhpcy5fY29tbWFuZExpc3RlbmVyc1tlXTtyLmxpc3RlbigpO2NvbnN0IG89dGhpcy5fdmFsaWRhdGVDb21tYW5kKHQpLGE9KHQsaSk9PnsobnVsbD09aT92b2lkIDA6aS5leHRlbnNpb25JZCk9PT1lJiZuKHQsaSl9O3JldHVybiByLmFkZExpc3RlbmVyKG8sYSksKCk9PntyLnJlbW92ZUxpc3RlbmVyKG8sYSl9fWxpc3RlbkZvclF1ZXJ5KGUsdCxuKXtjb25zdCBpPXRoaXMuX2dldFdvcmtlckJ5SWQoZSk7dGhpcy5fcXVlcnlMaXN0ZW5lcnNbZV18fCh0aGlzLl9xdWVyeUxpc3RlbmVyc1tlXT1uZXcgWHMoaSkpO2NvbnN0IHI9dGhpcy5fcXVlcnlMaXN0ZW5lcnNbZV07ci5saXN0ZW4oKTtjb25zdCBvPXRoaXMuX3ZhbGlkYXRlUXVlcnkodCksYT0odCxpKT0+eyhudWxsPT1pP3ZvaWQgMDppLmV4dGVuc2lvbklkKT09PWUmJm4odCxpKX07cmV0dXJuIHIuYWRkTGlzdGVuZXIobyxhKSwoKT0+e3IucmVtb3ZlTGlzdGVuZXIobyxhKX19c3RvcExpc3RlbihlKXt0aGlzLl9jb21tYW5kTGlzdGVuZXJzW2VdJiZ0aGlzLl9jb21tYW5kTGlzdGVuZXJzW2VdLnN0b3BMaXN0ZW4oKSx0aGlzLl9xdWVyeUxpc3RlbmVyc1tlXSYmdGhpcy5fcXVlcnlMaXN0ZW5lcnNbZV0uc3RvcExpc3RlbigpfXBvc3QoZSx0KXtpZighdGhpcy5fd29ya2Vyc1tlXSl0aHJvdyBuZXcgRXJyb3IoYFdvcmtlciB3aXRoIGV4dGVuc2lvbklkICR7ZX0gbm90IGZvdW5kYCk7bmV3IGVkKHRoaXMuX3dvcmtlcnNbZV0sZSkucG9zdCh0KX1jbGVhckNhY2hlQnlJZChlKXtkZWxldGUgdGhpcy5fd29ya2Vyc1tlXX1fZ2V0V29ya2VyQnlJZChlKXtjb25zdCB0PXRoaXMuX3dvcmtlcnNbZV07aWYoIXQpdGhyb3cgbmV3IEZzKGBXb3JrZXIgd2l0aCBleHRlbnNpb25JZCAke2V9IG5vdCBmb3VuZGApO3JldHVybiB0fV92YWxpZGF0ZUNvbW1hbmQoZSl7aWYoT2JqZWN0LnZhbHVlcyhacykuaW5jbHVkZXMoZSkpcmV0dXJuIGU7dGhyb3cgbmV3IHRkfV92YWxpZGF0ZVF1ZXJ5KGUpe2lmKE9iamVjdC52YWx1ZXMoUXMpLmluY2x1ZGVzKGUpKXJldHVybiBlO3Rocm93IG5ldyBuZH19ZnVuY3Rpb24gcmQoZSl7cmV0dXJuIHhzKDA9PT1lLmhvc3RuYW1lLmluZGV4T2YoXCJ3d3dcIik/ZS5ocmVmOmUuaHJlZi5yZXBsYWNlKGUuaG9zdG5hbWUsYHd3dy4ke2UuaG9zdG5hbWV9YCkpfXZhciBvZDtjbGFzcyBhZHtjb25zdHJ1Y3RvcihlKXt0aGlzLl9zb3VyY2VPcmlnaW5zPVt4cyhlKS5vcmlnaW4scmQoeHMoZSkpLm9yaWdpbl0sdGhpcy5faXNMaXN0ZW5pbmc9ITEsdGhpcy5fbGlzdGVuZXJzPXt9fWxpc3Rlbigpe3RoaXMuX2lzTGlzdGVuaW5nfHwodGhpcy5faXNMaXN0ZW5pbmc9ITAsd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsdGhpcy5faGFuZGxlTWVzc2FnZSkpfXN0b3BMaXN0ZW4oKXt0aGlzLl9pc0xpc3RlbmluZyYmKHRoaXMuX2lzTGlzdGVuaW5nPSExLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHRoaXMuX2hhbmRsZU1lc3NhZ2UpKX1hZGRMaXN0ZW5lcihlLHQpe2xldCBuPXRoaXMuX2xpc3RlbmVyc1tlXTtufHwodGhpcy5fbGlzdGVuZXJzW2VdPW49W10pLC0xPT09bi5pbmRleE9mKHQpJiZuLnB1c2godCl9cmVtb3ZlTGlzdGVuZXIoZSx0KXtjb25zdCBuPXRoaXMuX2xpc3RlbmVyc1tlXTtpZighbilyZXR1cm47Y29uc3QgaT1uLmluZGV4T2YodCk7aT49MCYmbi5zcGxpY2UoaSwxKX10cmlnZ2VyKGUsdCl7Y29uc3Qgbj10aGlzLl9saXN0ZW5lcnNbZS50eXBlXTtuJiZuLmZvckVhY2gobj0+dD9uKGUsdCk6bihlKSl9X2hhbmRsZU1lc3NhZ2UoZSl7aWYoLTE9PT10aGlzLl9zb3VyY2VPcmlnaW5zLmluZGV4T2YoZS5vcmlnaW4pfHwhQnMoZS5kYXRhLGUuZGF0YS50eXBlKSlyZXR1cm47Y29uc3QgdD1lLmRhdGEse2NvbnRleHQ6bn09dCxpPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0odCxbXCJjb250ZXh0XCJdKTt0aGlzLnRyaWdnZXIoaSxuKX19IWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxhPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pOmk7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpYT1SZWZsZWN0LmRlY29yYXRlKGUsdCxuLGkpO2Vsc2UgZm9yKHZhciBzPWUubGVuZ3RoLTE7cz49MDtzLS0pKHI9ZVtzXSkmJihhPShvPDM/cihhKTpvPjM/cih0LG4sYSk6cih0LG4pKXx8YSk7bz4zJiZhJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLGEpfShbQ3JdLGFkLnByb3RvdHlwZSxcIl9oYW5kbGVNZXNzYWdlXCIsbnVsbCk7Y2xhc3Mgc2R7Y29uc3RydWN0b3IoZSx0LG49e30saT17fSxyPXt9KXt0aGlzLl9zdG9yZT1lLHRoaXMuX3dvcmtlckV4dGVuc2lvbk1lc3Nlbmdlcj10LHRoaXMuX2NvbW1hbmRMaXN0ZW5lcnM9bix0aGlzLl9xdWVyeUxpc3RlbmVycz1pLHRoaXMuX3Bvc3RlcnM9cn1jbGVhckNhY2hlQnlSZWdpb24oZSl7Y29uc3QgdD10aGlzLl9nZXRFeHRlbnNpb25CeVJlZ2lvbihlKTtcIndvcmtlclwiIT09dC50eXBlP3RoaXMuY2xlYXJDYWNoZUJ5SWQodC5pZCk6dGhpcy5fd29ya2VyRXh0ZW5zaW9uTWVzc2VuZ2VyLmNsZWFyQ2FjaGVCeUlkKHQuaWQpfWNsZWFyQ2FjaGVCeUlkKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0RXh0ZW5zaW9uQnlJZChlKTtcIndvcmtlclwiIT09dC50eXBlPyh0aGlzLl9jb21tYW5kTGlzdGVuZXJzW2VdJiZkZWxldGUgdGhpcy5fY29tbWFuZExpc3RlbmVyc1tlXSx0aGlzLl9xdWVyeUxpc3RlbmVyc1tlXSYmZGVsZXRlIHRoaXMuX3F1ZXJ5TGlzdGVuZXJzW2VdLHRoaXMuX3Bvc3RlcnNbZV0mJmRlbGV0ZSB0aGlzLl9wb3N0ZXJzW2VdKTp0aGlzLl93b3JrZXJFeHRlbnNpb25NZXNzZW5nZXIuY2xlYXJDYWNoZUJ5SWQodC5pZCl9bGlzdGVuRm9yQ29tbWFuZChlLHQsbil7Y29uc3QgaT10aGlzLl9nZXRFeHRlbnNpb25CeUlkKGUpO2lmKFwid29ya2VyXCI9PT1pLnR5cGUpcmV0dXJuIHRoaXMuX3dvcmtlckV4dGVuc2lvbk1lc3Nlbmdlci5saXN0ZW5Gb3JDb21tYW5kKGUsdCxuKTt0aGlzLl9jb21tYW5kTGlzdGVuZXJzW2VdfHwodGhpcy5fY29tbWFuZExpc3RlbmVyc1tlXT1uZXcgYWQoaS51cmwpKTtjb25zdCByPXRoaXMuX2NvbW1hbmRMaXN0ZW5lcnNbZV07ci5saXN0ZW4oKTtjb25zdCBvPXRoaXMuX3ZhbGlkYXRlQ29tbWFuZCh0KSxhPSh0LGkpPT57KG51bGw9PWk/dm9pZCAwOmkuZXh0ZW5zaW9uSWQpPT09ZSYmbih0LGkpfTtyZXR1cm4gci5hZGRMaXN0ZW5lcihvLGEpLCgpPT57ci5yZW1vdmVMaXN0ZW5lcihvLGEpfX1saXN0ZW5Gb3JRdWVyeShlLHQsbil7Y29uc3QgaT10aGlzLl9nZXRFeHRlbnNpb25CeUlkKGUpO2lmKFwid29ya2VyXCI9PT1pLnR5cGUpcmV0dXJuIHRoaXMuX3dvcmtlckV4dGVuc2lvbk1lc3Nlbmdlci5saXN0ZW5Gb3JRdWVyeShlLHQsbik7dGhpcy5fcXVlcnlMaXN0ZW5lcnNbZV18fCh0aGlzLl9xdWVyeUxpc3RlbmVyc1tlXT1uZXcgYWQoaS51cmwpKTtjb25zdCByPXRoaXMuX3F1ZXJ5TGlzdGVuZXJzW2VdO3IubGlzdGVuKCk7Y29uc3Qgbz10aGlzLl92YWxpZGF0ZVF1ZXJ5KHQpLGE9KHQsaSk9PnsobnVsbD09aT92b2lkIDA6aS5leHRlbnNpb25JZCk9PT1lJiZuKHQsaSl9O3JldHVybiByLmFkZExpc3RlbmVyKG8sYSksKCk9PntyLnJlbW92ZUxpc3RlbmVyKG8sYSl9fXN0b3BMaXN0ZW4oZSl7XCJ3b3JrZXJcIiE9PXRoaXMuX2dldEV4dGVuc2lvbkJ5SWQoZSkudHlwZT8odGhpcy5fY29tbWFuZExpc3RlbmVyc1tlXSYmdGhpcy5fY29tbWFuZExpc3RlbmVyc1tlXS5zdG9wTGlzdGVuKCksdGhpcy5fcXVlcnlMaXN0ZW5lcnNbZV0mJnRoaXMuX3F1ZXJ5TGlzdGVuZXJzW2VdLnN0b3BMaXN0ZW4oKSk6dGhpcy5fd29ya2VyRXh0ZW5zaW9uTWVzc2VuZ2VyLnN0b3BMaXN0ZW4oZSl9cG9zdChlLHQpe3RyeXtjb25zdCBuPXRoaXMuX2dldEV4dGVuc2lvbkJ5SWQoZSk7aWYoXCJ3b3JrZXJcIj09PW4udHlwZSlyZXR1cm4gdm9pZCB0aGlzLl93b3JrZXJFeHRlbnNpb25NZXNzZW5nZXIucG9zdChlLHQpO3RoaXMuX3Bvc3RlcnNbZV18fCh0aGlzLl9wb3N0ZXJzW2VdPVVzKG4pKSx0aGlzLl9wb3N0ZXJzW2VdLnBvc3QodCl9Y2F0Y2gobil7dGhpcy5jbGVhckNhY2hlQnlJZChlKSxjb25zb2xlLmxvZyhgVW5hYmxlIHRvIHBvc3QgZXZlbnQgdG8gZXh0ZW5zaW9uKCR7ZX0pIGJlY2F1c2UgZXh0ZW5zaW9uIGlmcmFtZSBpcyBub3QgbW91bnRlZC5cXG5UaGUgZXZlbnQgdGhhdCBjb3VsZCBub3QgYmUgZGVsaXZlcmVkOmAsdCl9fV9nZXRFeHRlbnNpb25CeUlkKGUpe3ZhciB0O3RoaXMuX2dldEV4dGVuc2lvbnMoKTtjb25zdCBuPW51bGw9PT0odD10aGlzLl9leHRlbnNpb25zKXx8dm9pZCAwPT09dD92b2lkIDA6dC5maW5kKHQ9PnQuaWQ9PT1lKTtpZighbil0aHJvdyBuZXcgRnMoYFVuYWJsZSB0byBwcm9jZWVkIGR1ZSB0byBubyBleHRlbnNpb24gZm91bmQgZm9yIElEOiAke2V9LmApO3JldHVybiBufV9nZXRFeHRlbnNpb25CeVJlZ2lvbihlKXt2YXIgdDt0aGlzLl9nZXRFeHRlbnNpb25zKCk7Y29uc3Qgbj1udWxsPT09KHQ9dGhpcy5fZXh0ZW5zaW9ucyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZmluZCh0PT50LnJlZ2lvbj09PWUpO2lmKCFuKXRocm93IG5ldyBGcyhgVW5hYmxlIHRvIHByb2NlZWQgZHVlIHRvIG5vIGV4dGVuc2lvbiBmb3VuZCBmb3IgcmVnaW9uOiAke2V9LmApO3JldHVybiBufV9nZXRFeHRlbnNpb25zKCl7aWYodGhpcy5fZXh0ZW5zaW9ucylyZXR1cm47Y29uc3R7ZXh0ZW5zaW9uczp7Z2V0RXh0ZW5zaW9uczplfX09dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKTtpZih0aGlzLl9leHRlbnNpb25zPWUoKSwhdGhpcy5fZXh0ZW5zaW9ucyl0aHJvdyBuZXcgRnMoXCJFeHRlbnNpb24gY29uZmlndXJhdGlvbnMgbm90IGZvdW5kLlwiKX1fdmFsaWRhdGVDb21tYW5kKGUpe2lmKE9iamVjdC52YWx1ZXMoWnMpLmluY2x1ZGVzKGUpKXJldHVybiBlO3Rocm93IG5ldyB0ZH1fdmFsaWRhdGVRdWVyeShlKXtpZihPYmplY3QudmFsdWVzKFFzKS5pbmNsdWRlcyhlKSlyZXR1cm4gZTt0aHJvdyBuZXcgbmR9fWNsYXNzIGRke2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLl9zdG9yZT1lLHRoaXMuX2V4dGVuc2lvbk1lc3Nlbmdlcj10LHRoaXMuX3N1YnNjcmliZXJzPW4sdGhpcy5fc3Vic2NyaWJlZD17fSx0aGlzLl91bnN1YnNjcmliZXJzPXt9LHRoaXMuX2xpc3RlbmVycz17fX1saXN0ZW4oKXt2YXIgZTtjb25zdHtkYXRhOntnZXRFeHRlbnNpb25zOnR9fT10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpO251bGw9PT0oZT10KCkpfHx2b2lkIDA9PT1lfHxlLmZvckVhY2goZT0+e2lmKHRoaXMuX2xpc3RlbmVyc1tlLmlkXSlyZXR1cm47Y29uc3QgdD1uZXcgYWQoZS51cmwpO3QuYWRkTGlzdGVuZXIoVnMuU3Vic2NyaWJlLHRoaXMuX2hhbmRsZVN1YnNjcmliZS5iaW5kKHRoaXMpKSx0LmFkZExpc3RlbmVyKFZzLlVuc3Vic2NyaWJlLHRoaXMuX2hhbmRsZVVuc3Vic2NyaWJlLmJpbmQodGhpcykpLHQubGlzdGVuKCksdGhpcy5fbGlzdGVuZXJzW2UuaWRdPXR9KX1icm9hZGNhc3QoZSl7dmFyIHQ7Y29uc3R7ZGF0YTp7Z2V0RXh0ZW5zaW9uczpufX09dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKTtudWxsPT09KHQ9bigpKXx8dm9pZCAwPT09dHx8dC5mb3JFYWNoKHQ9Pnt0aGlzLl9zdWJzY3JpYmVkW3QuaWRdJiZ0aGlzLl9leHRlbnNpb25NZXNzZW5nZXIucG9zdCh0LmlkLGUpfSl9X2hhbmRsZVN1YnNjcmliZSh7cGF5bG9hZDp7ZXZlbnRUeXBlOmUsZXh0ZW5zaW9uSWQ6dH19KXt0aGlzLl9zdWJzY3JpYmVkW3RdPSEwLHRoaXMuX3Vuc3Vic2NyaWJlcnNbZV18fCh0aGlzLl91bnN1YnNjcmliZXJzW2VdPXRoaXMuX3N1YnNjcmliZXJzW2VdKHRoaXMuX3N0b3JlLHRoaXMpKX1faGFuZGxlVW5zdWJzY3JpYmUoe3BheWxvYWQ6e2V2ZW50VHlwZTplLGV4dGVuc2lvbklkOnR9fSl7dmFyIG4saTtkZWxldGUgdGhpcy5fc3Vic2NyaWJlZFt0XSxPYmplY3Qua2V5cyh0aGlzLl9zdWJzY3JpYmVkKS5sZW5ndGh8fChudWxsPT09KGk9KG49dGhpcy5fdW5zdWJzY3JpYmVycylbZV0pfHx2b2lkIDA9PT1pfHxpLmNhbGwobiksZGVsZXRlIHRoaXMuX3Vuc3Vic2NyaWJlcnNbZV0pfX0hZnVuY3Rpb24oZSl7ZS5Db25zaWdubWVudHNDaGFuZ2VkPVwiRVhURU5TSU9OOkNPTlNJR05NRU5UU19DSEFOR0VEXCJ9KG9kfHwob2Q9e30pKTtjb25zdCBjZD0oZSx0KT0+e3ZhciBuO2NvbnN0e2RhdGE6e2dldENvbnNpZ25tZW50czppfX09ZS5nZXRTdGF0ZSgpO2xldCByPW51bGwhPT0obj1pKCkpJiZ2b2lkIDAhPT1uP246W107cmV0dXJuIGUuc3Vic2NyaWJlKCh7ZGF0YTp7Z2V0Q29uc2lnbm1lbnRzOmV9fSk9Pnt2YXIgbjtjb25zdCBpPW51bGwhPT0obj1lKCkpJiZ2b2lkIDAhPT1uP246W107aSE9PXImJih0LmJyb2FkY2FzdCh7dHlwZTpvZC5Db25zaWdubWVudHNDaGFuZ2VkLHBheWxvYWQ6e2NvbnNpZ25tZW50czppLHByZXZpb3VzQ29uc2lnbm1lbnRzOnJ9fSkscj1pKX0sKHtkYXRhOntnZXRDb25zaWdubWVudHM6ZX19KT0+ZSgpKX07dmFyIGxkLHVkLGhkLHBkLG1kLHlkLGdkO2NsYXNzIHZke2NvbnN0cnVjdG9yKGUsdCxuPXdpbmRvdyl7dGhpcy5fc2NyaXB0TG9hZGVyPWUsdGhpcy5fc3R5bGVzaGVldExvYWRlcj10LHRoaXMuX3dpbmRvdz1ufWxvYWQoZSl7dmFyIHQsbixpLHIsbyxhO3JldHVybiBpPXRoaXMscj12b2lkIDAsYT1mdW5jdGlvbiooKXtpZih5aWVsZCBQcm9taXNlLmFsbChbdGhpcy5fc3R5bGVzaGVldExvYWRlci5sb2FkU3R5bGVzaGVldChgaHR0cHM6Ly9jaGVja291dHNob3BwZXItJHtudWxsIT09KHQ9ZS5lbnZpcm9ubWVudCkmJnZvaWQgMCE9PXQ/dDpcIlwifS5hZHllbi5jb20vY2hlY2tvdXRzaG9wcGVyL3Nkay8zLjEwLjEvYWR5ZW4uY3NzYCx7cHJlcGVuZDohMSxhdHRyaWJ1dGVzOntpbnRlZ3JpdHk6XCJzaGEzODQtOG9mZ0lDWlovazVjQzVON3hlZ3FGWk9BNzNIOVJRN0gxMzQzOUpmQVpXOEdqM3FqdUtMMmlzYVREM0dNSWhERVwiLGNyb3Nzb3JpZ2luOlwiYW5vbnltb3VzXCJ9fSksdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoYGh0dHBzOi8vY2hlY2tvdXRzaG9wcGVyLSR7bnVsbCE9PShuPWUuZW52aXJvbm1lbnQpJiZ2b2lkIDAhPT1uP246XCJcIn0uYWR5ZW4uY29tL2NoZWNrb3V0c2hvcHBlci9zZGsvMy4xMC4xL2FkeWVuLmpzYCx7YXN5bmM6ITAsYXR0cmlidXRlczp7aW50ZWdyaXR5Olwic2hhMzg0LXdHMno5elNRbzYxRUl2eVhtaUZDbyt6QjN5MFpCNGhzclhWY0FObXBQOEhMdGhqb1FKUVBCaDd0WktKU1Y4akFcIixjcm9zc29yaWdpbjpcImFub255bW91c1wifX0pXSksIXRoaXMuX3dpbmRvdy5BZHllbkNoZWNrb3V0KXRocm93IG5ldyBYdDtyZXR1cm4gbmV3IHRoaXMuX3dpbmRvdy5BZHllbkNoZWNrb3V0KGUpfSxuZXcoKG89dm9pZCAwKXx8KG89UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXt0cnl7ZChhLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoYS50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgaTt0LmRvbmU/ZSh0LnZhbHVlKTooaT10LnZhbHVlLGkgaW5zdGFuY2VvZiBvP2k6bmV3IG8oZnVuY3Rpb24oZSl7ZShpKX0pKS50aGVuKG4scyl9ZCgoYT1hLmFwcGx5KGkscnx8W10pKS5uZXh0KCkpfSl9fWZ1bmN0aW9uIGZkKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZcInN0cmluZ1wiPT10eXBlb2YgZS5kYXRhLnBheW1lbnRNZXRob2QuZW5jcnlwdGVkU2VjdXJpdHlDb2RlfHxcInN0cmluZ1wiPT10eXBlb2YgZS5kYXRhLnBheW1lbnRNZXRob2QuZW5jcnlwdGVkRXhwaXJ5TW9udGh9ZnVuY3Rpb24gU2QoZSl7cmV0dXJuIEJvb2xlYW4oZS5pbnN0cnVtZW50SWQpfSFmdW5jdGlvbihlKXtlLlRocmVlRFMyRmluZ2VycHJpbnQ9XCJ0aHJlZURTMkZpbmdlcnByaW50XCIsZS5UaHJlZURTMj1cInRocmVlRFMyXCIsZS5SZWRpcmVjdD1cInJlZGlyZWN0XCIsZS5RUkNvZGU9XCJxckNvZGVcIixlLlZvdWNoZXI9XCJ2b3VjaGVyXCIsZS5TZGs9XCJzZGtcIn0obGR8fChsZD17fSkpLGZ1bmN0aW9uKGUpe2UuVGhyZWVEUzJGaW5nZXJwcmludD1cInRocmVlRFMyRmluZ2VycHJpbnRcIixlLlRocmVlRFMyQ2hhbGxlbmdlPVwidGhyZWVEUzJDaGFsbGVuZ2VcIixlLlJlZGlyZWN0PVwicmVkaXJlY3RcIixlLlFSQ29kZT1cInFyQ29kZVwiLGUuVm91Y2hlcj1cInZvdWNoZXJcIn0odWR8fCh1ZD17fSkpLGZ1bmN0aW9uKGUpe2UuU2VjdXJlZEZpZWxkcz1cInNlY3VyZWRmaWVsZHNcIn0oaGR8fChoZD17fSkpLGZ1bmN0aW9uKGUpe2UuQUNIPVwiYWNoXCIsZS5BbGlQYXk9XCJhbGlwYXlcIixlLkJhbmNvbnRhY3Q9XCJiY21jXCIsZS5DcmVkaXRDYXJkPVwic2NoZW1lXCIsZS5LbGFybmE9XCJrbGFybmFcIixlLktsYXJuYVBheU5vdz1cImtsYXJuYV9wYXlub3dcIixlLktsYXJuYUFjY291bnQ9XCJrbGFybmFfYWNjb3VudFwiLGUuSURFQUw9XCJpZGVhbFwiLGUuR2lyb1BheT1cImdpcm9wYXlcIixlLkdvb2dsZVBheT1cInBheXdpdGhnb29nbGVcIixlLlNFUEE9XCJzZXBhZGlyZWN0ZGViaXRcIixlLlNvZm9ydD1cImRpcmVjdEViYW5raW5nXCIsZS5WaXBwcz1cInZpcHBzXCIsZS5XZUNoYXRQYXlRUj1cIndlY2hhdHBheVFSXCJ9KHBkfHwocGQ9e30pKSxmdW5jdGlvbihlKXtlLlBPU1Q9XCJQT1NUXCJ9KG1kfHwobWQ9e30pKSxmdW5jdGlvbihlKXtlLkNoYWxsZW5nZVNob3BwZXI9XCJDaGFsbGVuZ2VTaG9wcGVyXCIsZS5FcnJvcj1cIkVycm9yXCIsZS5JZGVudGlmeVNob3BwZXI9XCJJZGVudGlmeVNob3BwZXJcIn0oeWR8fCh5ZD17fSkpLGZ1bmN0aW9uKGUpe2UuQ2FyZE51bWJlcj1cImVuY3J5cHRlZENhcmROdW1iZXJcIixlLlNlY3VyaXR5Q29kZT1cImVuY3J5cHRlZFNlY3VyaXR5Q29kZVwiLGUuRXhwaXJ5RGF0ZT1cImVuY3J5cHRlZEV4cGlyeURhdGVcIn0oZ2R8fChnZD17fSkpO2NsYXNzIF9kIGV4dGVuZHMgQnR7Y29uc3RydWN0b3IoKXtzdXBlcihcIlRoZSBjdXJyZW50IG9yZGVyIGRvZXMgbm90IG5lZWQgdG8gYmUgZmluYWxpemVkIGF0IHRoaXMgc3RhZ2UuXCIpLHRoaXMubmFtZT1cIk9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvclwiLHRoaXMudHlwZT1cIm9yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWRcIn19dmFyIHdkPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIENke2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuX3NjcmlwdExvYWRlcj10fWluaXRpYWxpemUoZSl7cmV0dXJuIHdkKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHthZHllbnYyOnR9PWU7aWYoIXQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmFkeWVudjJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7dGhpcy5fcGF5bWVudEluaXRpYWxpemVPcHRpb25zPXQ7Y29uc3Qgbj10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZS5tZXRob2RJZCkse29yaWdpbktleTppLGNsaWVudEtleTpyLGVudmlyb25tZW50Om8scGF5bWVudE1ldGhvZHNSZXNwb25zZTphfT1uLmluaXRpYWxpemF0aW9uRGF0YXx8e30scz17a2V5OlwiXCIsdmFsdWU6XCJcIn07cmV0dXJuIGk/KHMua2V5PVwib3JpZ2luS2V5XCIscy52YWx1ZT1pKToocy5rZXk9XCJjbGllbnRLZXlcIixzLnZhbHVlPXJ8fFwiXCIpLHRoaXMuX2FkeWVuQ2xpZW50PXlpZWxkIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkKHtlbnZpcm9ubWVudDpvLGxvY2FsZTp0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0TG9jYWxlKCksW3Mua2V5XTpzLnZhbHVlLHBheW1lbnRNZXRob2RzUmVzcG9uc2U6YSx0cmFuc2xhdGlvbnM6e2VzOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn0sXCJlcy1BUlwiOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn0sXCJlcy1FU1wiOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn0sXCJlcy1NWFwiOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn0sXCJlcy1DTFwiOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn0sXCJlcy1DT1wiOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn0sXCJlcy1QRVwiOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn19fSksdGhpcy5fcGF5bWVudENvbXBvbmVudD15aWVsZCB0aGlzLl9tb3VudFBheW1lbnRDb21wb25lbnQobiksbi5tZXRob2QhPT1wZC5DcmVkaXRDYXJkJiZuLm1ldGhvZCE9PXBkLkJhbmNvbnRhY3R8fCh0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50PXlpZWxkIHRoaXMuX21vdW50Q2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCgpKSxQcm9taXNlLnJlc29sdmUoKX0pfWV4ZWN1dGUoZSx0KXtyZXR1cm4gd2QodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6bn09ZSxpPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0oZSxbXCJwYXltZW50XCJdKSxyPW4mJm4ucGF5bWVudERhdGEsbz1yJiZyLnNob3VsZFNhdmVJbnN0cnVtZW50LGE9ciYmci5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50O2lmKCFuKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgWWkoW1wicGF5bWVudFwiXSkpO3RoaXMuX3ZhbGlkYXRlQ2FyZERhdGEoKSx5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGksdCk7Y29uc3Qgcz10aGlzLl9jb21wb25lbnRTdGF0ZTtpZighcyl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtpZihyJiZTZChyKSl7bGV0IGU9e307aWYoZmQocykpe2NvbnN0e2VuY3J5cHRlZENhcmROdW1iZXI6dCxlbmNyeXB0ZWRTZWN1cml0eUNvZGU6bixlbmNyeXB0ZWRFeHBpcnlNb250aDppLGVuY3J5cHRlZEV4cGlyeVllYXI6cn09cy5kYXRhLnBheW1lbnRNZXRob2Q7ZT17Y3JlZGl0X2NhcmRfbnVtYmVyX2NvbmZpcm1hdGlvbjp0LGV4cGlyeV9tb250aDppLGV4cGlyeV95ZWFyOnIsdmVyaWZpY2F0aW9uX3ZhbHVlOm59fWlmKGZkKHMpfHwtMSE9PVtcImlkZWFsXCIsXCJzZXBhZGlyZWN0ZGViaXRcIixcImRpcmVjdEViYW5raW5nXCIsXCJnaXJvcGF5XCJdLmluZGV4T2Yocy5kYXRhLnBheW1lbnRNZXRob2QudHlwZSkpdHJ5e3JldHVybiB2b2lkKHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbikse3BheW1lbnREYXRhOntmb3JtYXR0ZWRQYXlsb2FkOntiaWdwYXlfdG9rZW46T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHt0b2tlbjpyLmluc3RydW1lbnRJZH0pLG9yaWdpbjp3aW5kb3cubG9jYXRpb24ub3JpZ2luLGJyb3dzZXJfaW5mbzpEbygpLHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OmF8fG51bGx9fX0pKSl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQoeWllbGQgdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZSxvLGEpKX19dHJ5e3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7bWV0aG9kSWQ6bi5tZXRob2RJZCxwYXltZW50RGF0YTp7Zm9ybWF0dGVkUGF5bG9hZDp7Y3JlZGl0X2NhcmRfdG9rZW46e3Rva2VuOkpTT04uc3RyaW5naWZ5KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxzLmRhdGEucGF5bWVudE1ldGhvZCkse29yaWdpbjp3aW5kb3cubG9jYXRpb24ub3JpZ2lufSkpfSxicm93c2VyX2luZm86RG8oKSx2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6b3x8bnVsbCxzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDphfHxudWxsfX19KX1jYXRjaChlKXt5aWVsZCB0aGlzLl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlLG8sYSl9fSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gdGhpcy5fY29tcG9uZW50U3RhdGU9dm9pZCAwLHRoaXMuX3BheW1lbnRDb21wb25lbnQmJih0aGlzLl9wYXltZW50Q29tcG9uZW50LnVubW91bnQoKSx0aGlzLl9wYXltZW50Q29tcG9uZW50PXZvaWQgMCksdGhpcy5fY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCYmKHRoaXMuX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnQudW5tb3VudCgpLHRoaXMuX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnQ9dm9pZCAwKSxQcm9taXNlLnJlc29sdmUoKX1fZ2V0QWR5ZW5DbGllbnQoKXtpZighdGhpcy5fYWR5ZW5DbGllbnQpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7cmV0dXJuIHRoaXMuX2FkeWVuQ2xpZW50fV9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKXtpZighdGhpcy5fcGF5bWVudEluaXRpYWxpemVPcHRpb25zKXRocm93IG5ldyBybignXCJvcHRpb25zLmFkeWVudjJcIiBhcmd1bWVudCB3YXMgbm90IHByb3ZpZGVkIGR1cmluZyBpbml0aWFsaXphdGlvbi4nKTtyZXR1cm4gdGhpcy5fcGF5bWVudEluaXRpYWxpemVPcHRpb25zfV9nZXRUaHJlZURTMkNoYWxsZW5nZVdpZGdldFNpemUoKXtjb25zdHthZGRpdGlvbmFsQWN0aW9uT3B0aW9uczplLHRocmVlRFMyT3B0aW9uczp0fT10aGlzLl9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKTtyZXR1cm4gZS53aWRnZXRTaXplfHwobnVsbD09dD92b2lkIDA6dC53aWRnZXRTaXplKXx8XCIwNVwifV9oYW5kbGVBY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKCh0LG4pPT57Y29uc3R7dGhyZWVEUzJDb250YWluZXJJZDppLGFkZGl0aW9uYWxBY3Rpb25PcHRpb25zOnJ9PXRoaXMuX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpLHtvbkJlZm9yZUxvYWQ6byxjb250YWluZXJJZDphLG9uTG9hZDpzLG9uQ29tcGxldGU6ZH09cixjPUpTT04ucGFyc2UoZS5hY3Rpb24pLGw9dGhpcy5fZ2V0QWR5ZW5DbGllbnQoKS5jcmVhdGVGcm9tQWN0aW9uKGMse29uQWRkaXRpb25hbERldGFpbHM6ZT0+e2NvbnN0IG49e21ldGhvZElkOmMucGF5bWVudE1ldGhvZFR5cGUscGF5bWVudERhdGE6e25vbmNlOkpTT04uc3RyaW5naWZ5KGUuZGF0YSl9fTtkJiZkKCksdChuKX0sc2l6ZTp0aGlzLl9nZXRUaHJlZURTMkNoYWxsZW5nZVdpZGdldFNpemUoKSxvbkVycm9yOmU9Pm4oZSl9KTtvJiZvKGMudHlwZT09PXVkLlRocmVlRFMyQ2hhbGxlbmdlfHxjLnR5cGU9PT11ZC5RUkNvZGUpLGwubW91bnQoYCMke2F8fGl9YCkscyYmcygoKT0+e24obmV3IE1uKSxsLnVubW91bnQoKX0pfSl9X21hcEFkeWVuUGxhY2Vob2xkZXJEYXRhKGUsdCl7aWYoIWUpcmV0dXJue307Y29uc3R7Zmlyc3ROYW1lOm4sbGFzdE5hbWU6aSxhZGRyZXNzMTpyLGFkZHJlc3MyOm8scG9zdGFsQ29kZTphLGNpdHk6cyxzdGF0ZU9yUHJvdmluY2VDb2RlOmQsY291bnRyeUNvZGU6Y309ZTtyZXR1cm57aG9sZGVyTmFtZTp0P2Ake259ICR7aX1gOlwiXCIsYmlsbGluZ0FkZHJlc3M6e3N0cmVldDpyLGhvdXNlTnVtYmVyT3JOYW1lOm8scG9zdGFsQ29kZTphLGNpdHk6cyxzdGF0ZU9yUHJvdmluY2U6ZCxjb3VudHJ5OmN9fX1fbW91bnRDYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50KCl7Y29uc3QgZT10aGlzLl9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKSx0PXRoaXMuX2dldEFkeWVuQ2xpZW50KCk7bGV0IG47cmV0dXJuIG5ldyBQcm9taXNlKChpLHIpPT57dmFyIG8sYSxzO2lmKGUuY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkKXtuPXQuY3JlYXRlKGhkLlNlY3VyZWRGaWVsZHMsT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUub3B0aW9ucykse3N0eWxlczpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbnVsbD09PShvPWUub3B0aW9ucyl8fHZvaWQgMD09PW8/dm9pZCAwOm8uc3R5bGVzKSx7cGxhY2Vob2xkZXI6T2JqZWN0LmFzc2lnbih7Y29sb3I6XCJ0cmFuc3BhcmVudFwiLGNhcmV0Q29sb3I6XCIjMDAwXCJ9LG51bGw9PT0ocz1udWxsPT09KGE9ZS5vcHRpb25zKXx8dm9pZCAwPT09YT92b2lkIDA6YS5zdHlsZXMpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnBsYWNlaG9sZGVyKX0pLG9uQ2hhbmdlOmU9PnRoaXMuX3VwZGF0ZUNvbXBvbmVudFN0YXRlKGUpLG9uRXJyb3I6dD0+ZS52YWxpZGF0ZUNhcmRGaWVsZHModCksb25GaWVsZFZhbGlkOnQ9PmUudmFsaWRhdGVDYXJkRmllbGRzKHQpfSkpO3RyeXtuLm1vdW50KGAjJHtlLmNhcmRWZXJpZmljYXRpb25Db250YWluZXJJZH1gKX1jYXRjaChlKXtyKG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKX19aShuKX0pfV9tb3VudFBheW1lbnRDb21wb25lbnQoZSl7bGV0IHQ7Y29uc3Qgbj10aGlzLl9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKSxpPXRoaXMuX2dldEFkeWVuQ2xpZW50KCk7cmV0dXJuIG5ldyBQcm9taXNlKChyLG8pPT57c3dpdGNoKGUubWV0aG9kKXtjYXNlIHBkLkNyZWRpdENhcmQ6Y2FzZSBwZC5BQ0g6Y2FzZSBwZC5CYW5jb250YWN0Ontjb25zdCByPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRCaWxsaW5nQWRkcmVzcygpLHtwcmVmaWxsQ2FyZEhvbGRlck5hbWU6YX09ZS5pbml0aWFsaXphdGlvbkRhdGE7dD1pLmNyZWF0ZShlLm1ldGhvZCxPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbi5vcHRpb25zKSx7b25DaGFuZ2U6ZT0+dGhpcy5fdXBkYXRlQ29tcG9uZW50U3RhdGUoZSksZGF0YTp0aGlzLl9tYXBBZHllblBsYWNlaG9sZGVyRGF0YShyLGEpfSkpO3RyeXt0Lm1vdW50KGAjJHtuLmNvbnRhaW5lcklkfWApfWNhdGNoKGUpe28obmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCkpfWJyZWFrfWNhc2UgcGQuSURFQUw6Y2FzZSBwZC5TRVBBOmlmKG4uaGFzVmF1bHRlZEluc3RydW1lbnRzKXRoaXMuX3VwZGF0ZUNvbXBvbmVudFN0YXRlKHtkYXRhOntwYXltZW50TWV0aG9kOnt0eXBlOmUubWV0aG9kfX19KTtlbHNle3Q9aS5jcmVhdGUoZS5tZXRob2QsT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG4ub3B0aW9ucykse29uQ2hhbmdlOmU9PnRoaXMuX3VwZGF0ZUNvbXBvbmVudFN0YXRlKGUpfSkpO3RyeXt0Lm1vdW50KGAjJHtuLmNvbnRhaW5lcklkfWApfWNhdGNoKGUpe28obmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCkpfX1icmVhaztjYXNlIHBkLkFsaVBheTpjYXNlIHBkLkdpcm9QYXk6Y2FzZSBwZC5Tb2ZvcnQ6Y2FzZSBwZC5LbGFybmE6Y2FzZSBwZC5LbGFybmFQYXlOb3c6Y2FzZSBwZC5LbGFybmFBY2NvdW50OmNhc2UgcGQuVmlwcHM6Y2FzZSBwZC5XZUNoYXRQYXlRUjp0aGlzLl91cGRhdGVDb21wb25lbnRTdGF0ZSh7ZGF0YTp7cGF5bWVudE1ldGhvZDp7dHlwZTplLm1ldGhvZH19fSl9cih0KX0pfV9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlLHQsbil7cmV0dXJuIHdkKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighWHIoZSl8fCFaKGUuYm9keS5lcnJvcnMse2NvZGU6XCJhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZFwifSkpdGhyb3cgZTtjb25zdCBpPXlpZWxkIHRoaXMuX2hhbmRsZUFjdGlvbihlLmJvZHkucHJvdmlkZXJfZGF0YSk7dHJ5e3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30saSkse3BheW1lbnREYXRhOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxpLnBheW1lbnREYXRhKSx7c2hvdWxkU2F2ZUluc3RydW1lbnQ6dCxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50Om59KX0pKX1jYXRjaChlKXtyZXR1cm4gdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZSx0LG4pfX0pfV91cGRhdGVDb21wb25lbnRTdGF0ZShlKXt0aGlzLl9jb21wb25lbnRTdGF0ZT1lfV92YWxpZGF0ZUNhcmREYXRhKCl7dmFyIGUsdDtjb25zdCBuPXRoaXMuX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpLmhhc1ZhdWx0ZWRJbnN0cnVtZW50cz90aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50OnRoaXMuX3BheW1lbnRDb21wb25lbnQ7aWYoKG51bGw9PT0oZT1udWxsPT1uP3ZvaWQgMDpuLmNvbXBvbmVudFJlZil8fHZvaWQgMD09PWU/dm9pZCAwOmUuc2hvd1ZhbGlkYXRpb24pJiZuLnN0YXRlJiYobi5jb21wb25lbnRSZWYuc2hvd1ZhbGlkYXRpb24oKSwwPT09T2JqZWN0LmtleXMobi5zdGF0ZSkubGVuZ3RofHwhbi5zdGF0ZS5pc1ZhbGlkJiYhbi5zdGF0ZS5pc3N1ZXJ8fFwic2VwYWRpcmVjdGRlYml0XCI9PT0obnVsbD09PSh0PW4ucHJvcHMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnR5cGUpJiZuLnN0YXRlLmRhdGEmJk9iamVjdC52YWx1ZXMobi5zdGF0ZS5kYXRhKS5zb21lKGU9PjA9PT1lLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCkpKXRocm93IG5ldyBLaSh0aGlzLl9tYXBDYXJkRXJyb3JzKG4uc3RhdGUuZXJyb3JzKSl9X21hcENhcmRFcnJvcnMoZT17fSl7Y29uc3QgdD17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChuPT57dFtuXT1be21lc3NhZ2U6ZVtuXSx0eXBlOm59XX0pLHR9fWNvbnN0IElkPW5uKGU9Pm5ldyBDZChlLG5ldyB2ZChhKCkscygpKSksW3tnYXRld2F5OlwiYWR5ZW52MlwifV0pO2NsYXNzIGJke2NvbnN0cnVjdG9yKGUsdCxuPXdpbmRvdyl7dGhpcy5fc2NyaXB0TG9hZGVyPWUsdGhpcy5fc3R5bGVzaGVldExvYWRlcj10LHRoaXMuX3dpbmRvdz1ufWxvYWQoZSl7dmFyIHQsbixpLHIsbyxhO3JldHVybiBpPXRoaXMscj12b2lkIDAsYT1mdW5jdGlvbiooKXtpZih5aWVsZCBQcm9taXNlLmFsbChbdGhpcy5fc3R5bGVzaGVldExvYWRlci5sb2FkU3R5bGVzaGVldChgaHR0cHM6Ly9jaGVja291dHNob3BwZXItJHtudWxsIT09KHQ9ZS5lbnZpcm9ubWVudCkmJnZvaWQgMCE9PXQ/dDpcIlwifS5hZHllbi5jb20vY2hlY2tvdXRzaG9wcGVyL3Nkay81LjcxLjEvYWR5ZW4uY3NzYCx7cHJlcGVuZDohMSxhdHRyaWJ1dGVzOntpbnRlZ3JpdHk6XCJzaGEzODQtNU12QjRSbnp2dmlBM1ZCVDRLWUFCWjRIWE5aRzVMUnFSRUVnZDQxeHQvcGYvUXZLbXNqMk85R3VOdXl3Ulh4OVwiLGNyb3Nzb3JpZ2luOlwiYW5vbnltb3VzXCJ9fSksdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoYGh0dHBzOi8vY2hlY2tvdXRzaG9wcGVyLSR7bnVsbCE9PShuPWUuZW52aXJvbm1lbnQpJiZ2b2lkIDAhPT1uP246XCJcIn0uYWR5ZW4uY29tL2NoZWNrb3V0c2hvcHBlci9zZGsvNS43MS4xL2FkeWVuLmpzYCx7YXN5bmM6ITAsYXR0cmlidXRlczp7aW50ZWdyaXR5Olwic2hhMzg0LXl2WTJ5Rk5SNFdxSWpQcVA5TXpqSStnSmltbWFKbkF2ajRyTEhLdmdKYmdGRDVmTXVmOHpJSnJGSk9XOExoaGZcIixjcm9zc29yaWdpbjpcImFub255bW91c1wifX0pXSksIXRoaXMuX3dpbmRvdy5BZHllbkNoZWNrb3V0KXRocm93IG5ldyBYdDtyZXR1cm4geWllbGQgdGhpcy5fd2luZG93LkFkeWVuQ2hlY2tvdXQoZSl9LG5ldygobz12b2lkIDApfHwobz1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3RyeXtkKGEubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChhLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBpO3QuZG9uZT9lKHQudmFsdWUpOihpPXQudmFsdWUsaSBpbnN0YW5jZW9mIG8/aTpuZXcgbyhmdW5jdGlvbihlKXtlKGkpfSkpLnRoZW4obixzKX1kKChhPWEuYXBwbHkoaSxyfHxbXSkpLm5leHQoKSl9KX19ZnVuY3Rpb24gUGQoZSl7cmV0dXJuIShcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWV8fHZvaWQgMCE9PWUuc2hvdWxkU2F2ZUluc3RydW1lbnQmJlwiYm9vbGVhblwiIT10eXBlb2YgZS5zaG91bGRTYXZlSW5zdHJ1bWVudHx8dm9pZCAwIT09ZS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50JiZcImJvb2xlYW5cIiE9dHlwZW9mIGUuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCl9dmFyIE9kPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIEVke2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuX3NjcmlwdExvYWRlcj10fWluaXRpYWxpemUoZSl7cmV0dXJuIE9kKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHthZHllbnYzOnR9PWU7aWYoIXQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmFkeWVudjNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7dGhpcy5fcGF5bWVudEluaXRpYWxpemVPcHRpb25zPXQ7Y29uc3Qgbj10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZS5tZXRob2RJZCkse2Vudmlyb25tZW50OmksY2xpZW50S2V5OnIscGF5bWVudE1ldGhvZHNSZXNwb25zZTpvLGluc3RhbGxtZW50T3B0aW9uczphfT1uLmluaXRpYWxpemF0aW9uRGF0YXx8e307cmV0dXJuIHRoaXMuX2FkeWVuQ2xpZW50PXlpZWxkIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkKHtwYXltZW50TWV0aG9kc0NvbmZpZ3VyYXRpb246T2JqZWN0LmFzc2lnbih7a2xhcm5hOnt1c2VLbGFybmFXaWRnZXQ6ITB9LGtsYXJuYV9hY2NvdW50Ont1c2VLbGFybmFXaWRnZXQ6ITB9LGtsYXJuYV9wYXlub3c6e3VzZUtsYXJuYVdpZGdldDohMH19LGE/e2NhcmQ6e2luc3RhbGxtZW50T3B0aW9uczpPYmplY3QuYXNzaWduKHtzaG93SW5zdGFsbG1lbnRBbW91bnRzOiEwfSxhKX19Ont9KSxlbnZpcm9ubWVudDppLGxvY2FsZTp0aGlzLl9nZXRMb2NhbGUoKSxjbGllbnRLZXk6cixwYXltZW50TWV0aG9kc1Jlc3BvbnNlOm8sc2hvd1BheUJ1dHRvbjohMSx0cmFuc2xhdGlvbnM6e2VzOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn0sXCJlcy1BUlwiOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn0sXCJlcy1FU1wiOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn0sXCJlcy1NWFwiOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn0sXCJlcy1DTFwiOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn0sXCJlcy1DT1wiOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn0sXCJlcy1QRVwiOntcImNyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlXCI6XCJGZWNoYSBkZSBjYWR1Y2lkYWRcIn19fSksdGhpcy5fcGF5bWVudENvbXBvbmVudD15aWVsZCB0aGlzLl9tb3VudFBheW1lbnRDb21wb25lbnQobiksbi5tZXRob2QhPT1wZC5DcmVkaXRDYXJkJiZuLm1ldGhvZCE9PXBkLkJhbmNvbnRhY3R8fCh0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50PXlpZWxkIHRoaXMuX21vdW50Q2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCgpKSxQcm9taXNlLnJlc29sdmUoKX0pfWV4ZWN1dGUoZSx0KXt2YXIgbjtyZXR1cm4gT2QodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6aX09ZSxyPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0oZSxbXCJwYXltZW50XCJdKTtpZighaSl0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiXSk7Y29uc3Qgbz1pLnBheW1lbnREYXRhLHtzaG91bGRTYXZlSW5zdHJ1bWVudDphLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6c309UGQobyk/bzp7c2hvdWxkU2F2ZUluc3RydW1lbnQ6ITEsc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDohMX07dGhpcy5fdmFsaWRhdGVDYXJkRGF0YSgpLFwia2xhcm5hXCIhPT1pLm1ldGhvZElkJiZcImtsYXJuYV9hY2NvdW50XCIhPT1pLm1ldGhvZElkJiZcImtsYXJuYV9wYXlub3dcIiE9PWkubWV0aG9kSWR8fG51bGw9PT0obj10aGlzLl9wYXltZW50Q29tcG9uZW50KXx8dm9pZCAwPT09bnx8bi5zdWJtaXQoKSx5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHIsdCk7Y29uc3QgZD10aGlzLl9jb21wb25lbnRTdGF0ZXx8e2RhdGE6e3BheW1lbnRNZXRob2Q6e3R5cGU6aS5tZXRob2RJZH19fTtpZihvJiZTZChvKSl7bGV0IGU9e307aWYoZmQoZCkpe2NvbnN0e2VuY3J5cHRlZENhcmROdW1iZXI6dCxlbmNyeXB0ZWRTZWN1cml0eUNvZGU6bixlbmNyeXB0ZWRFeHBpcnlNb250aDppLGVuY3J5cHRlZEV4cGlyeVllYXI6cn09ZC5kYXRhLnBheW1lbnRNZXRob2Q7ZT17Y3JlZGl0X2NhcmRfbnVtYmVyX2NvbmZpcm1hdGlvbjp0LGV4cGlyeV9tb250aDppLGV4cGlyeV95ZWFyOnIsdmVyaWZpY2F0aW9uX3ZhbHVlOm59fXRyeXtyZXR1cm4gdm9pZCh5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGkpLHtwYXltZW50RGF0YTp7Zm9ybWF0dGVkUGF5bG9hZDp7YmlncGF5X3Rva2VuOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7dG9rZW46by5pbnN0cnVtZW50SWR9KSxvcmlnaW46d2luZG93LmxvY2F0aW9uLm9yaWdpbixicm93c2VyX2luZm86RG8oKSxzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDpzfHxudWxsfX19KSkpfWNhdGNoKGUpe3JldHVybiB2b2lkKHlpZWxkIHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGUsYSxzKSl9fWxldCBjPUpTT04uc3RyaW5naWZ5KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxkLmRhdGEucGF5bWVudE1ldGhvZCkse3R5cGU6aS5tZXRob2RJZCxvcmlnaW46d2luZG93LmxvY2F0aW9uLm9yaWdpbn0pKTtcImJvbGV0b2JhbmNhcmlvXCI9PT1pLm1ldGhvZElkJiZmdW5jdGlvbihlKXt2YXIgdCxuO3JldHVyblwic3RyaW5nXCI9PT0oXCJvYmplY3RcIj09dHlwZW9mIGUmJnR5cGVvZiBlLmRhdGEuc29jaWFsU2VjdXJpdHlOdW1iZXIpJiZcInN0cmluZ1wiPT10eXBlb2YobnVsbD09PSh0PWUuZGF0YS5zaG9wcGVyTmFtZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZmlyc3ROYW1lKSYmXCJzdHJpbmdcIj09dHlwZW9mKG51bGw9PT0obj1lLmRhdGEuc2hvcHBlck5hbWUpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmxhc3ROYW1lKX0oZCkmJihjPUpTT04uc3RyaW5naWZ5KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7c29jaWFsU2VjdXJpdHlOdW1iZXI6ZC5kYXRhLnNvY2lhbFNlY3VyaXR5TnVtYmVyfSxkLmRhdGEuc2hvcHBlck5hbWUpLHt0eXBlOmkubWV0aG9kSWQsb3JpZ2luOndpbmRvdy5sb2NhdGlvbi5vcmlnaW59KSkpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe21ldGhvZElkOmkubWV0aG9kSWQscGF5bWVudERhdGE6e2Zvcm1hdHRlZFBheWxvYWQ6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtjcmVkaXRfY2FyZF90b2tlbjp7dG9rZW46Y319LGZkKGQpJiZkLmRhdGEuaW5zdGFsbG1lbnRzP3tpbnN0YWxsbWVudHM6e3ZhbHVlOmQuZGF0YS5pbnN0YWxsbWVudHMudmFsdWUscGxhbjpkLmRhdGEuaW5zdGFsbG1lbnRzLnBsYW58fFwicmVndWxhclwifX06e30pLHticm93c2VyX2luZm86RG8oKSx2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6YXx8bnVsbCxzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDpzfHxudWxsfSl9fSl9Y2F0Y2goZSl7eWllbGQgdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZSxhLHMpfX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBfZCl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudFN0YXRlPXZvaWQgMCx0aGlzLl9wYXltZW50Q29tcG9uZW50JiYodGhpcy5fcGF5bWVudENvbXBvbmVudC51bm1vdW50KCksdGhpcy5fcGF5bWVudENvbXBvbmVudD12b2lkIDApLHRoaXMuX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnQmJih0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50LnVubW91bnQoKSx0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50PXZvaWQgMCksUHJvbWlzZS5yZXNvbHZlKCl9X3VwZGF0ZUNvbXBvbmVudFN0YXRlKGUpe3RoaXMuX2NvbXBvbmVudFN0YXRlPWV9X2dldExvY2FsZSgpe2NvbnN0IGU9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldExvY2FsZSgpO3JldHVybiBlJiZcImVzXCI9PT1lLnN1YnN0cmluZygwLDIpP1wiZXNcIjplfV9nZXRBZHllbkNsaWVudCgpe2lmKCF0aGlzLl9hZHllbkNsaWVudCl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gdGhpcy5fYWR5ZW5DbGllbnR9X2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpe2lmKCF0aGlzLl9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMpdGhyb3cgbmV3IHJuKCdcIm9wdGlvbnMuYWR5ZW52M1wiIGFyZ3VtZW50IHdhcyBub3QgcHJvdmlkZWQgZHVyaW5nIGluaXRpYWxpemF0aW9uLicpO3JldHVybiB0aGlzLl9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnN9X2hhbmRsZUFjdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoKHQsbik9Pntjb25zdHthZGRpdGlvbmFsQWN0aW9uT3B0aW9uczppfT10aGlzLl9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKSx7b25CZWZvcmVMb2FkOnIsY29udGFpbmVySWQ6byxvbkxvYWQ6YSxvbkNvbXBsZXRlOnMsd2lkZ2V0U2l6ZTpkLG9uQWN0aW9uSGFuZGxlZDpjfT1pLGw9SlNPTi5wYXJzZShlLmFjdGlvbiksdT10aGlzLl9nZXRBZHllbkNsaWVudCgpLmNyZWF0ZUZyb21BY3Rpb24obCx7b25BY3Rpb25IYW5kbGVkOmU9PntjJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjJiZcIjNEUzJGaW5nZXJwcmludFwiIT09ZS5jb21wb25lbnRUeXBlJiZjKCl9LG9uQWRkaXRpb25hbERldGFpbHM6ZT0+e2NvbnN0IG49e21ldGhvZElkOmwucGF5bWVudE1ldGhvZFR5cGUscGF5bWVudERhdGE6e25vbmNlOkpTT04uc3RyaW5naWZ5KGUuZGF0YSl9fTtzJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBzJiZzKCksdChuKX0sY2hhbGxlbmdlV2luZG93U2l6ZTpkfHxcIjA1XCIsb25FcnJvcjplPT5uKGUpfSk7ciYmXCJmdW5jdGlvblwiPT10eXBlb2YgciYmcihsLnR5cGU9PT1sZC5UaHJlZURTMnx8bC50eXBlPT09bGQuUVJDb2RlfHxsLnR5cGU9PT1sZC5TZGspLHRoaXMuX21vdW50RWxlbWVudCh1LG8pLGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEmJmEoKCk9PntuKG5ldyBNbiksdS51bm1vdW50KCl9KX0pfV9tYXBBZHllblBsYWNlaG9sZGVyRGF0YShlLHQpe2lmKCFlKXJldHVybnt9O2NvbnN0e2ZpcnN0TmFtZTpuLGxhc3ROYW1lOmksYWRkcmVzczE6cixhZGRyZXNzMjpvLHBvc3RhbENvZGU6YSxjaXR5OnMsc3RhdGVPclByb3ZpbmNlQ29kZTpkLGNvdW50cnlDb2RlOmN9PWU7cmV0dXJue2hvbGRlck5hbWU6dD9gJHtufSAke2l9YDpcIlwiLGZpcnN0TmFtZTp0P246XCJcIixsYXN0TmFtZTp0P2k6XCJcIixiaWxsaW5nQWRkcmVzczp7c3RyZWV0OnIsaG91c2VOdW1iZXJPck5hbWU6byxwb3N0YWxDb2RlOmEsY2l0eTpzLHN0YXRlT3JQcm92aW5jZTpkLGNvdW50cnk6Y319fV9tb3VudENhcmRWZXJpZmljYXRpb25Db21wb25lbnQoKXtjb25zdCBlPXRoaXMuX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpLHQ9dGhpcy5fZ2V0QWR5ZW5DbGllbnQoKTtsZXQgbjtyZXR1cm4gbmV3IFByb21pc2UoKGkscik9Pnt2YXIgbyxhLHM7aWYoZS5jYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWQpe249dC5jcmVhdGUoaGQuU2VjdXJlZEZpZWxkcyxPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZS5vcHRpb25zKSx7c3R5bGVzOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxudWxsPT09KG89ZS5vcHRpb25zKXx8dm9pZCAwPT09bz92b2lkIDA6by5zdHlsZXMpLHtwbGFjZWhvbGRlcjpPYmplY3QuYXNzaWduKHtjb2xvcjpcInRyYW5zcGFyZW50XCIsY2FyZXRDb2xvcjpcIiMwMDBcIn0sbnVsbD09PShzPW51bGw9PT0oYT1lLm9wdGlvbnMpfHx2b2lkIDA9PT1hP3ZvaWQgMDphLnN0eWxlcyl8fHZvaWQgMD09PXM/dm9pZCAwOnMucGxhY2Vob2xkZXIpfSksb25DaGFuZ2U6ZT0+dGhpcy5fdXBkYXRlQ29tcG9uZW50U3RhdGUoZSksb25FcnJvcjp0PT5lLnZhbGlkYXRlQ2FyZEZpZWxkcyh0KSxvbkZpZWxkVmFsaWQ6dD0+ZS52YWxpZGF0ZUNhcmRGaWVsZHModCl9KSk7dHJ5e3RoaXMuX21vdW50RWxlbWVudChuLGUuY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkKX1jYXRjaChlKXtyKG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKX19aShuKX0pfV9tb3VudFBheW1lbnRDb21wb25lbnQoZSl7bGV0IHQ7Y29uc3Qgbj10aGlzLl9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKSxpPXRoaXMuX2dldEFkeWVuQ2xpZW50KCk7cmV0dXJuIG5ldyBQcm9taXNlKChyLG8pPT57Y29uc3QgYT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0QmlsbGluZ0FkZHJlc3MoKSx7cHJlZmlsbENhcmRIb2xkZXJOYW1lOnN9PWUuaW5pdGlhbGl6YXRpb25EYXRhO3Q9aS5jcmVhdGUoZS5tZXRob2QsT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbi5vcHRpb25zKSx7c2hvd0JyYW5kc1VuZGVyQ2FyZE51bWJlcjohMSxiaWxsaW5nQWRkcmVzc1JlcXVpcmVkOiExLHNob3dFbWFpbEFkZHJlc3M6ITEsb25DaGFuZ2U6ZT0+dGhpcy5fdXBkYXRlQ29tcG9uZW50U3RhdGUoZSksb25TdWJtaXQ6ZT0+dGhpcy5fdXBkYXRlQ29tcG9uZW50U3RhdGUoZSl9KSxhP3tkYXRhOnRoaXMuX21hcEFkeWVuUGxhY2Vob2xkZXJEYXRhKGEscyl9Ont9KSk7dHJ5e3RoaXMuX21vdW50RWxlbWVudCh0LG4uY29udGFpbmVySWQpfWNhdGNoKGUpe28obmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCkpfXIodCl9KX1fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZSx0LG4pe3JldHVybiBPZCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIVhyKGUpfHwhWihlLmJvZHkuZXJyb3JzLHtjb2RlOlwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWRcIn0pKXRocm93IGU7Y29uc3QgaT15aWVsZCB0aGlzLl9oYW5kbGVBY3Rpb24oZS5ib2R5LnByb3ZpZGVyX2RhdGEpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGkpLHtwYXltZW50RGF0YTpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30saS5wYXltZW50RGF0YSkse3Nob3VsZFNhdmVJbnN0cnVtZW50OnQsc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDpufSl9KSl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGUsdCxuKX19KX1fdmFsaWRhdGVDYXJkRGF0YSgpe3ZhciBlO2NvbnN0IHQ9dGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCkuaGFzVmF1bHRlZEluc3RydW1lbnRzP3RoaXMuX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnQ6dGhpcy5fcGF5bWVudENvbXBvbmVudDtpZigobnVsbD09PShlPW51bGw9PXQ/dm9pZCAwOnQuY29tcG9uZW50UmVmKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5zaG93VmFsaWRhdGlvbikmJnQuc3RhdGUmJih0LmNvbXBvbmVudFJlZi5zaG93VmFsaWRhdGlvbigpLDA9PT1PYmplY3Qua2V5cyh0LnN0YXRlKS5sZW5ndGh8fCF0LnN0YXRlLmlzVmFsaWQpKXRocm93IG5ldyBLaSh0aGlzLl9tYXBDYXJkRXJyb3JzKHQuc3RhdGUuZXJyb3JzKSl9X21hcENhcmRFcnJvcnMoZT17fSl7Y29uc3QgdD17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChuPT57dFtuXT1be21lc3NhZ2U6ZVtuXSx0eXBlOm59XX0pLHR9X21vdW50RWxlbWVudChlLHQpe2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQpJiZlLm1vdW50KGAjJHt0fWApfX1jb25zdCBBZD1ubihlPT5uZXcgRWQoZSxuZXcgYmQoYSgpLHMoKSkpLFt7Z2F0ZXdheTpcImFkeWVudjNcIn1dKTt2YXIga2QsVGQ9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgRGR7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmFmZmlybVNjcmlwdExvYWRlcj10fWluaXRpYWxpemUoZSl7cmV0dXJuIFRkKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoZS5tZXRob2RJZCk7Y29uc3QgdD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx7Y2xpZW50VG9rZW46bixjb25maWc6e3Rlc3RNb2RlOml9fT10LmdldFBheW1lbnRNZXRob2RPclRocm93KGUubWV0aG9kSWQpO2lmKCFuKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7dGhpcy5hZmZpcm09eWllbGQgdGhpcy5hZmZpcm1TY3JpcHRMb2FkZXIubG9hZChuLGkpfSl9ZXhlY3V0ZShlLHQpe3ZhciBuO3JldHVybiBUZCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT1udWxsPT09KG49ZS5wYXltZW50KXx8dm9pZCAwPT09bj92b2lkIDA6bi5tZXRob2RJZCx7dXNlU3RvcmVDcmVkaXQ6cn09ZTtpZighdGhpcy5hZmZpcm0pdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7aWYoIWkpdGhyb3cgbmV3IFlpKFtcInBheW1lbnQubWV0aG9kSWRcIl0pO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7dXNlU3RvcmVDcmVkaXQ6cn0sdCk7Y29uc3Qgbz17bWV0aG9kSWQ6aSxwYXltZW50RGF0YTp7bm9uY2U6KHlpZWxkIHRoaXMuaW5pdGlhbGl6ZUFmZmlybUNoZWNrb3V0KCkpLmNoZWNrb3V0X3Rva2VufX07eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobyl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gdGhpcy5hZmZpcm0mJih0aGlzLmFmZmlybT12b2lkIDApLFByb21pc2UucmVzb2x2ZSgpfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBfZCl9aW5pdGlhbGl6ZUFmZmlybUNoZWNrb3V0KCl7dmFyIGU7cmV0dXJuIG51bGw9PT0oZT10aGlzLmFmZmlybSl8fHZvaWQgMD09PWV8fGUuY2hlY2tvdXQodGhpcy5nZXRDaGVja291dEluZm9ybWF0aW9uKCkpLG5ldyBQcm9taXNlKChlLHQpPT57dmFyIG4saTtudWxsPT09KG49dGhpcy5hZmZpcm0pfHx2b2lkIDA9PT1ufHxuLmNoZWNrb3V0Lm9wZW4oe29uRmFpbDplPT57XCJjYW5jZWxlZFwiPT09ZS5yZWFzb24/dChuZXcgTW4pOnQobmV3IEJpKX0sb25TdWNjZXNzOnQ9PntlKHQpfX0pLG51bGw9PT0oaT10aGlzLmFmZmlybSl8fHZvaWQgMD09PWl8fGkudWkuZXJyb3Iub24oXCJjbG9zZVwiLCgpPT57dChuZXcgTW4pfSl9KX1nZXRDaGVja291dEluZm9ybWF0aW9uKCl7Y29uc3QgZT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx0PWUuZ2V0U3RvcmVDb25maWcoKSxuPWUuZ2V0Q29uc2lnbm1lbnRzKCksaT1lLmdldE9yZGVyKCkscj1lLmdldENhcnQoKTtpZighdCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ0NoZWNrb3V0Q29uZmlnKTtpZighaSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ0NoZWNrb3V0KTtjb25zdCBvPW5ldyBxYShpLmN1cnJlbmN5LmRlY2ltYWxQbGFjZXMpLGE9dGhpcy5nZXRCaWxsaW5nQWRkcmVzcygpLHM9dGhpcy5nZXRTaGlwcGluZ0FkZHJlc3MoKSxkPUVyKHIsdCkmJnM/czphO3JldHVybnttZXJjaGFudDp7dXNlcl9jb25maXJtYXRpb25fdXJsOnQubGlua3MuY2hlY2tvdXRMaW5rLHVzZXJfY2FuY2VsX3VybDp0LmxpbmtzLmNoZWNrb3V0TGluayx1c2VyX2NvbmZpcm1hdGlvbl91cmxfYWN0aW9uOlwiUE9TVFwifSxzaGlwcGluZzpkLGJpbGxpbmc6YSxpdGVtczp0aGlzLmdldEl0ZW1zKG8saSksbWV0YWRhdGE6e3NoaXBwaW5nX3R5cGU6dGhpcy5nZXRTaGlwcGluZ1R5cGUobiksbW9kZTpcIm1vZGFsXCIscGxhdGZvcm1fdHlwZTpcIkJpZ0NvbW1lcmNlXCIscGxhdGZvcm1fdmVyc2lvbjpcIlwiLHBsYXRmb3JtX2FmZmlybTpcIlwifSxkaXNjb3VudHM6dGhpcy5nZXREaXNjb3VudHMobyxpKSxvcmRlcl9pZDppLm9yZGVySWQ/aS5vcmRlcklkLnRvU3RyaW5nKCk6XCJcIixzaGlwcGluZ19hbW91bnQ6by50b0ludGVnZXIoaS5zaGlwcGluZ0Nvc3RUb3RhbCksdGF4X2Ftb3VudDpvLnRvSW50ZWdlcihpLnRheFRvdGFsKSx0b3RhbDpvLnRvSW50ZWdlcihpLm9yZGVyQW1vdW50KX19Z2V0U2hpcHBpbmdUeXBlKGUpe2lmKCFlKXJldHVyblwiXCI7Y29uc3QgdD1lWzBdO3JldHVybihudWxsPT10P3ZvaWQgMDp0LnNlbGVjdGVkU2hpcHBpbmdPcHRpb24pP3Quc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi50eXBlOlwiXCJ9Z2V0QmlsbGluZ0FkZHJlc3MoKXtjb25zdCBlPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEJpbGxpbmdBZGRyZXNzKCk7aWYoIWUpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdCaWxsaW5nQWRkcmVzcyk7cmV0dXJue25hbWU6e2ZpcnN0OmUuZmlyc3ROYW1lLGxhc3Q6ZS5sYXN0TmFtZSxmdWxsOmAke2UuZmlyc3ROYW1lfSAke2UubGFzdE5hbWV9YH0sYWRkcmVzczp7bGluZTE6ZS5hZGRyZXNzMSxsaW5lMjplLmFkZHJlc3MyLGNpdHk6ZS5jaXR5LHN0YXRlOmUuc3RhdGVPclByb3ZpbmNlQ29kZSx6aXBjb2RlOmUucG9zdGFsQ29kZSxjb3VudHJ5OmUuY291bnRyeUNvZGV9LHBob25lX251bWJlcjplLnBob25lLGVtYWlsOmUuZW1haWx9fWdldFNoaXBwaW5nQWRkcmVzcygpe2NvbnN0IGU9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0U2hpcHBpbmdBZGRyZXNzKCk7aWYoZSlyZXR1cm57bmFtZTp7Zmlyc3Q6ZS5maXJzdE5hbWUsbGFzdDplLmxhc3ROYW1lLGZ1bGw6YCR7ZS5maXJzdE5hbWV9ICR7ZS5sYXN0TmFtZX1gfSxhZGRyZXNzOntsaW5lMTplLmFkZHJlc3MxLGxpbmUyOmUuYWRkcmVzczIsY2l0eTplLmNpdHksc3RhdGU6ZS5zdGF0ZU9yUHJvdmluY2VDb2RlLHppcGNvZGU6ZS5wb3N0YWxDb2RlLGNvdW50cnk6ZS5jb3VudHJ5Q29kZX0scGhvbmVfbnVtYmVyOmUucGhvbmV9fWdldEl0ZW1zKGUsdCl7Y29uc3Qgbj1bXTtyZXR1cm4gdC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5mb3JFYWNoKHQ9PntuLnB1c2goe2Rpc3BsYXlfbmFtZTp0Lm5hbWUsc2t1OnQuc2t1LHVuaXRfcHJpY2U6ZS50b0ludGVnZXIodC5zYWxlUHJpY2UpLHF0eTp0LnF1YW50aXR5LGl0ZW1faW1hZ2VfdXJsOnQuaW1hZ2VVcmwsaXRlbV91cmw6dC51cmwsY2F0ZWdvcmllczp0aGlzLmdldENhdGVnb3JpZXModC5jYXRlZ29yaWVzKX0pfSksdC5saW5lSXRlbXMuZGlnaXRhbEl0ZW1zLmZvckVhY2godD0+e24ucHVzaCh7ZGlzcGxheV9uYW1lOnQubmFtZSxza3U6dC5za3UsdW5pdF9wcmljZTplLnRvSW50ZWdlcih0LnNhbGVQcmljZSkscXR5OnQucXVhbnRpdHksaXRlbV9pbWFnZV91cmw6dC5pbWFnZVVybCxpdGVtX3VybDp0LnVybCxjYXRlZ29yaWVzOnRoaXMuZ2V0Q2F0ZWdvcmllcyh0LmNhdGVnb3JpZXMpfSl9KSx0LmxpbmVJdGVtcy5naWZ0Q2VydGlmaWNhdGVzLmZvckVhY2godD0+e24ucHVzaCh7ZGlzcGxheV9uYW1lOnQubmFtZSxza3U6XCJcIix1bml0X3ByaWNlOmUudG9JbnRlZ2VyKHQuYW1vdW50KSxxdHk6MSxpdGVtX2ltYWdlX3VybDpcIlwiLGl0ZW1fdXJsOlwiXCJ9KX0pLHQubGluZUl0ZW1zLmN1c3RvbUl0ZW1zJiZ0LmxpbmVJdGVtcy5jdXN0b21JdGVtcy5mb3JFYWNoKHQ9PntuLnB1c2goe2Rpc3BsYXlfbmFtZTp0Lm5hbWUsc2t1OnQuc2t1LHVuaXRfcHJpY2U6ZS50b0ludGVnZXIodC5saXN0UHJpY2UpLHF0eTp0LnF1YW50aXR5LGl0ZW1faW1hZ2VfdXJsOlwiXCIsaXRlbV91cmw6XCJcIn0pfSksbn1nZXREaXNjb3VudHMoZSx0KXtjb25zdCBuPXt9O3JldHVybiB0LmNvdXBvbnMuZm9yRWFjaCh0PT57dC5kaXNjb3VudGVkQW1vdW50PjAmJihuW3QuY29kZV09e2Rpc2NvdW50X2Ftb3VudDplLnRvSW50ZWdlcih0LmRpc2NvdW50ZWRBbW91bnQpLGRpc2NvdW50X2Rpc3BsYXlfbmFtZTp0LmRpc3BsYXlOYW1lfSl9KSx0LmRpc2NvdW50QW1vdW50PjAmJihuLkRJU0NPVU5URURfQU1PVU5UPXtkaXNjb3VudF9hbW91bnQ6ZS50b0ludGVnZXIodC5kaXNjb3VudEFtb3VudCksZGlzY291bnRfZGlzcGxheV9uYW1lOlwiZGlzY291bnRcIn0pLG59Z2V0Q2F0ZWdvcmllcyhlKXtyZXR1cm4gZT9lLm1hcChlPT5lLm1hcChlPT5lLm5hbWUpKTpbW11dfX0hZnVuY3Rpb24oZSl7ZS5QUk9EPVwiLy9jZG4xLmFmZmlybS5jb20vanMvdjIvYWZmaXJtLmpzXCIsZS5TQU5EQk9YPVwiLy9jZG4xLXNhbmRib3guYWZmaXJtLmNvbS9qcy92Mi9hZmZpcm0uanNcIn0oa2R8fChrZD17fSkpO2NsYXNzIE1ke2NvbnN0cnVjdG9yKGU9d2luZG93KXt0aGlzLmFmZmlybVdpbmRvdz1lfWxvYWQoZT1cIlwiLHQpe2NvbnN0IG49dD9rZC5TQU5EQk9YOmtkLlBST0Q7aWYoZnVuY3Rpb24oZSx0LG4saSxyLG8sYSl7Y29uc3Qgcz1lW25dfHx7fSxkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobyksYz1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShvKVswXSxsPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24oKXtlW3RdLl8ucHVzaChbbixhcmd1bWVudHNdKX19O3NbaV09bChzLGksXCJzZXRcIik7Y29uc3QgdT1zW2ldO3Nbcl09e30sc1tyXS5fPVtdLHUuXz1bXSxzLl89W10sc1tyXVthXT1sKHMscixhKSxzLmpzUmVhZHk9ZnVuY3Rpb24oKXtzLl8ucHVzaChbYSxhcmd1bWVudHNdKX07bGV0IGg9MDtmb3IoY29uc3QgZT1cInNldCBhZGQgc2F2ZSBwb3N0IG9wZW4gZW1wdHkgcmVzZXQgb24gb2ZmIHRyaWdnZXIgcmVhZHkgc2V0UHJvZHVjdFwiLnNwbGl0KFwiIFwiKTtoPGUubGVuZ3RoO2grKyl1W2VbaF1dPWwocyxpLGVbaF0pO2xldCBwPTA7Zm9yKGNvbnN0IGU9W1wiZ2V0XCIsXCJ0b2tlblwiLFwidXJsXCIsXCJpdGVtc1wiXTtwPGUubGVuZ3RoO3ArKyl1W2VbcF1dPWZ1bmN0aW9uKCl7fTtkLmFzeW5jPSEwLGQuc3JjPXRbb10sYy5wYXJlbnROb2RlJiZjLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGQsYyksZGVsZXRlIHRbb10sdSh0KSxlW25dPXN9KHdpbmRvdyx7cHVibGljX2FwaV9rZXk6ZSxzY3JpcHQ6bn0sXCJhZmZpcm1cIixcImNoZWNrb3V0XCIsXCJ1aVwiLFwic2NyaXB0XCIsXCJyZWFkeVwiKSwhdGhpcy5hZmZpcm1XaW5kb3cuYWZmaXJtKXRocm93IG5ldyBYdDtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuYWZmaXJtV2luZG93LmFmZmlybSl9fWNvbnN0IHpkPW5uKGU9Pm5ldyBEZChlLG5ldyBNZCksW3tpZDpcImFmZmlybVwifV0pO2NsYXNzIE5kIGV4dGVuZHMgQnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJUaGUgY3VycmVudCBvcmRlciBjb3VsZCBub3QgYmUgZmluYWxpemVkIHN1Y2Nlc3NmdWxseVwiKSx0aGlzLm5hbWU9XCJPcmRlckZpbmFsaXphdGlvbk5vdENvbXBsZXRlZEVycm9yXCIsdGhpcy50eXBlPVwib3JkZXJfZmluYWxpemF0aW9uX25vdF9jb21wbGV0ZWRcIn19dmFyIHhkPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIEZke2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuX2FmdGVycGF5U2NyaXB0TG9hZGVyPXR9aW5pdGlhbGl6ZShlKXt2YXIgdDtyZXR1cm4geGQodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGk9bi5nZXRQYXltZW50TWV0aG9kKGUubWV0aG9kSWQsZS5nYXRld2F5SWQpLHI9KG51bGw9PT0odD1uLmdldENhcnQoKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY3VycmVuY3kuY29kZSl8fFwiXCIsbz10aGlzLl9tYXBDdXJyZW5jeVRvSVNPMihyKTtpZighaSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO3RoaXMuX2FmdGVycGF5U2RrPXlpZWxkIHRoaXMuX2FmdGVycGF5U2NyaXB0TG9hZGVyLmxvYWQoaSxvKX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiB0aGlzLl9hZnRlcnBheVNkayYmKHRoaXMuX2FmdGVycGF5U2RrPXZvaWQgMCksUHJvbWlzZS5yZXNvbHZlKCl9ZXhlY3V0ZShlLHQpe3ZhciBuO3JldHVybiB4ZCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIWUucGF5bWVudCl0aHJvdyBuZXcgWWkoW1wicGF5bWVudC5nYXRld2F5SWRcIixcInBheW1lbnQubWV0aG9kSWRcIl0pO2NvbnN0e2dhdGV3YXlJZDppLG1ldGhvZElkOnJ9PWUucGF5bWVudDtpZighaXx8IXIpdGhyb3cgbmV3IFlpKFtcInBheW1lbnQuZ2F0ZXdheUlkXCIsXCJwYXltZW50Lm1ldGhvZElkXCJdKTtjb25zdHt1c2VTdG9yZUNyZWRpdDpvfT1lO3ZvaWQgMCE9PW8mJih5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmFwcGx5U3RvcmVDcmVkaXQobykpLHlpZWxkIHRoaXMuX2xvYWRQYXltZW50TWV0aG9kKGkscix0KTtjb25zdCBhPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnZhbGlkYXRlQ2hlY2tvdXQoYS5nZXRDaGVja291dCgpLHQpO2NvbnN0IHM9KG51bGw9PT0obj1hLmdldENhcnQoKSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uY3VycmVuY3kuY29kZSl8fFwiXCIsZD10aGlzLl9tYXBDdXJyZW5jeVRvSVNPMihzKTtyZXR1cm4gdGhpcy5fcmVkaXJlY3RUb0FmdGVycGF5KGQsYS5nZXRQYXltZW50TWV0aG9kKHIsaSkpLG5ldyBQcm9taXNlKCgpPT57fSl9KX1maW5hbGl6ZShlKXt2YXIgdCxuLGk7cmV0dXJuIHhkKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCByPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxvPXIuZ2V0UGF5bWVudElkKCksYT1yLmdldENvbnRleHRDb25maWcoKTtpZighbyl0aHJvdyBuZXcganQoa3QuTWlzc2luZ0NoZWNrb3V0KTtpZighKG51bGw9PWE/dm9pZCAwOmEucGF5bWVudC50b2tlbikpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdDaGVja291dENvbmZpZyk7Y29uc3Qgcz17bWV0aG9kSWQ6by5wcm92aWRlcklkLHBheW1lbnREYXRhOntub25jZTphLnBheW1lbnQudG9rZW59fTt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt9LGUpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocyl9Y2F0Y2goZSl7aWYoeWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5mb3JnZXRDaGVja291dChvLnByb3ZpZGVySWQpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2RzKCksWHIoZSkpdGhyb3cgbmV3IE5kKG51bGw9PT0oaT1udWxsPT09KG49bnVsbD09PSh0PWUuYm9keSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZXJyb3JzKXx8dm9pZCAwPT09bj92b2lkIDA6blswXSl8fHZvaWQgMD09PWk/dm9pZCAwOmkubWVzc2FnZSl9fSl9X3JlZGlyZWN0VG9BZnRlcnBheShlLHQpe2lmKCF0aGlzLl9hZnRlcnBheVNka3x8IShudWxsPT10P3ZvaWQgMDp0LmNsaWVudFRva2VuKSl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTt0aGlzLl9hZnRlcnBheVNkay5pbml0aWFsaXplKHtjb3VudHJ5Q29kZTplfSksdGhpcy5fYWZ0ZXJwYXlTZGsucmVkaXJlY3Qoe3Rva2VuOnQuY2xpZW50VG9rZW59KX1fbWFwQ3VycmVuY3lUb0lTTzIoZSl7cmV0dXJue0FVRDpcIkFVXCIsTlpEOlwiTlpcIixDQUQ6XCJDQVwiLFVTRDpcIlVTXCJ9W2VdfHxcIkFVXCJ9X2xvYWRQYXltZW50TWV0aG9kKGUsdCxuKXt2YXIgaTtyZXR1cm4geGQodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtyZXR1cm4geWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChlLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxuKSx7cGFyYW1zOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxudWxsPT1uP3ZvaWQgMDpuLnBhcmFtcykse21ldGhvZDp0fSl9KSl9Y2F0Y2goZSl7aWYoZSBpbnN0YW5jZW9mIHFuJiY0MjI9PT0obnVsbD09PShpPWUuYm9keSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuc3RhdHVzKSl0aHJvdyBuZXcgcm4oXCJBZnRlcnBheSBjYW4ndCBwcm9jZXNzIHlvdXIgcGF5bWVudCBmb3IgdGhpcyBvcmRlciwgcGxlYXNlIHRyeSBhbm90aGVyIHBheW1lbnQgbWV0aG9kXCIpO3Rocm93IGV9fSl9fXZhciBSZCxMZDshZnVuY3Rpb24oZSl7ZS5QUk9EPVwiLy9wb3J0YWwuYWZ0ZXJwYXkuY29tL2FmdGVycGF5LWFzeW5jLmpzXCIsZS5TQU5EQk9YPVwiLy9wb3J0YWwtc2FuZGJveC5hZnRlcnBheS5jb20vYWZ0ZXJwYXktYXN5bmMuanNcIn0oUmR8fChSZD17fSkpLGZ1bmN0aW9uKGUpe2UuUFJPRD1cIi8vcG9ydGFsLmFmdGVycGF5LmNvbS9hZnRlcnBheS1hc3luYy5qc1wiLGUuU0FOREJPWD1cIi8vcG9ydGFsLnNhbmRib3guYWZ0ZXJwYXkuY29tL2FmdGVycGF5LWFzeW5jLmpzXCJ9KExkfHwoTGQ9e30pKTtjbGFzcyBCZHtjb25zdHJ1Y3RvcihlKXt0aGlzLl9zY3JpcHRMb2FkZXI9ZX1sb2FkKGUsdCl7cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe2NvbnN0IG49ZS5jb25maWcudGVzdE1vZGV8fCExLGk9dGhpcy5fZ2V0U2NyaXB0VVJJKHQsbik7cmV0dXJuIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkU2NyaXB0KGkpLnRoZW4oKCk9PntpZighZnVuY3Rpb24oZSl7cmV0dXJuXCJBZnRlclBheVwiaW4gZX0od2luZG93KSl0aHJvdyBuZXcgWHQ7cmV0dXJuIHdpbmRvdy5BZnRlclBheX0pfSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99X2dldFNjcmlwdFVSSShlLHQpe3JldHVyblwiVVNcIj09PWU/dD9MZC5TQU5EQk9YOkxkLlBST0Q6dD9SZC5TQU5EQk9YOlJkLlBST0R9fWNvbnN0IGpkPW5uKGU9Pm5ldyBGZChlLG5ldyBCZChvKCkpKSxbe2dhdGV3YXk6XCJhZnRlcnBheVwifSx7aWQ6XCJhZnRlcnBheVwifV0pO3ZhciBVZD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBxZHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yPXR9aW5pdGlhbGl6ZShlKXtyZXR1cm4gVWQodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOnQsYW1hem9ucGF5Om59PWU7aWYoIXQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7Y29uc3QgaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx7ZmVhdHVyZXM6cn09aS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLG89aS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyh0KSxhPW8uaW5pdGlhbGl6YXRpb25EYXRhfHx7fSx7cGF5bWVudFRva2VuOnM9XCJcIixyZWdpb246ZD1cIlwiLGlzQnV0dG9uTWljcm9UZXh0RGlzYWJsZWQ6Y309YTtpZih5aWVsZCB0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5pbml0aWFsaXplKG8pLHRoaXMuX2lzUmVhZHlUb1BheShzKSkobnVsbD09bj92b2lkIDA6bi5lZGl0QnV0dG9uSWQpJiZ0aGlzLl9iaW5kRWRpdEJ1dHRvbihuLmVkaXRCdXR0b25JZCxzLFwiY2hhbmdlUGF5bWVudFwiLHRoaXMuX2lzTW9kYWxGbG93KGQpKTtlbHNle2NvbnN0e2lkOmV9PXRoaXMuX2NyZWF0ZUNvbnRhaW5lcigpO2lmKHRoaXMuX2FtYXpvblBheUJ1dHRvbj10aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5yZW5kZXJBbWF6b25QYXlCdXR0b24oe2NoZWNrb3V0U3RhdGU6aSxjb250YWluZXJJZDplLGRlY291cGxlQ2hlY2tvdXRJbml0aWF0aW9uOnRoaXMuX2lzT25lVGltZVRyYW5zYWN0aW9uKHIsZC50b1VwcGVyQ2FzZSgpKSxtZXRob2RJZDp0LHBsYWNlbWVudDokdC5DaGVja291dCxpc0J1dHRvbk1pY3JvVGV4dERpc2FibGVkOmN9KSwhdGhpcy5fYW1hem9uUGF5QnV0dG9uKXRocm93IG5ldyBybihcIlVuYWJsZSB0byByZW5kZXIgdGhlIEFtYXpvbiBQYXkgYnV0dG9uIHRvIGFuIGludmFsaWQgSFRNTCBjb250YWluZXIgZWxlbWVudC5cIil9fSl9ZXhlY3V0ZShlLHQpe3JldHVybiBVZCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lO2lmKCFuKXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTtjb25zdHttZXRob2RJZDppfT1uLHI9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse2ZlYXR1cmVzOm99PXIuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncyxhPXIuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coaSkuaW5pdGlhbGl6YXRpb25EYXRhfHx7fSx7cGF5bWVudFRva2VuOnM9XCJcIixyZWdpb246ZD1cIlwifT1hO2lmKHRoaXMuX2lzUmVhZHlUb1BheShzKXx8dGhpcy5faXNPbmVUaW1lVHJhbnNhY3Rpb24obyxkLnRvVXBwZXJDYXNlKCkpKXtjb25zdCBuPXttZXRob2RJZDppLHBheW1lbnREYXRhOntub25jZTpzfHxcImFwYlwifX07eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGUsdCk7dHJ5e3JldHVybiB2b2lkKHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG4pKX1jYXRjaChlKXtpZighKFhyKGUpJiYoYz1lLmJvZHksXCJvYmplY3RcIj09dHlwZW9mIGMmJm51bGwhPT1jJiZcInN0YXR1c1wiaW4gYyYmXCJhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZFwiaW4gYyYmXCJhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZFwiPT09Yy5zdGF0dXMmJlwiZGF0YVwiaW4gYy5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCYmXCJyZWRpcmVjdF91cmxcImluIGMuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQuZGF0YSYmXCJzdHJpbmdcIj09dHlwZW9mIGMuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQuZGF0YS5yZWRpcmVjdF91cmwpKSl0aHJvdyBlO2NvbnN0e2FkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkOnR9PWUuYm9keSx7cmVkaXJlY3RfdXJsOm59PXQuZGF0YTtpZihzKXJldHVybiBuZXcgUHJvbWlzZSgoKT0+d2luZG93LmxvY2F0aW9uLmFzc2lnbihuKSk7dGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IucHJlcGFyZUNoZWNrb3V0KEpTT04ucGFyc2UobikpfX12YXIgYztyZXR1cm4gdGhpcy5fZ2V0QW1hem9uUGF5QnV0dG9uKCkuY2xpY2soKSx0aGlzLl9pc01vZGFsRmxvdyhkKT9uZXcgUHJvbWlzZSgoZSx0KT0+e2NvbnN0IG49KCk9Pnt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsbiksdChuZXcgTW4oXCJTaG9wcGVyIG5lZWRzIHRvIGxvZ2luIHRvIEFtYXpvbnBheSB0byBjb250aW51ZVwiKSl9O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIixuKX0pOm5ldyBQcm9taXNlKFYpfSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gVWQodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLmRlaW5pdGlhbGl6ZSgpLHRoaXMuX2FtYXpvblBheUJ1dHRvbj12b2lkIDB9KX1fYmluZEVkaXRCdXR0b24oZSx0LG4saSl7Y29uc3Qgcj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlKTtpZihyJiZyLnBhcmVudE5vZGUpe2lmKCFpKXtjb25zdCBlPXIuY2xvbmVOb2RlKCEwKTtyLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGUsciksZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKT0+e3RoaXMuX3Nob3dMb2FkaW5nU3Bpbm5lcigpfSl9dGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IuYmluZEJ1dHRvbihlLHQsbil9fV9pc01vZGFsRmxvdyhlKXtyZXR1cm5cInVzXCI9PT1lfV9zaG93TG9hZGluZ1NwaW5uZXIoKXtyZXR1cm4gVWQodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS53aWRnZXRJbnRlcmFjdGlvbigoKT0+bmV3IFByb21pc2UoVikpfSl9X2NyZWF0ZUNvbnRhaW5lcigpe2xldCBlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQW1hem9uUGF5QnV0dG9uXCIpO3JldHVybiBlfHwoZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGUuaWQ9XCJBbWF6b25QYXlCdXR0b25cIixlLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKSl9X2dldEFtYXpvblBheUJ1dHRvbigpe3JldHVybiBxdCh0aGlzLl9hbWF6b25QYXlCdXR0b24sKCk9Pm5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKX1faXNPbmVUaW1lVHJhbnNhY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IuaXNQaDRFbmFibGVkKGUsdCkmJmVbXCJJTlQtNjM5OS5hbWF6b25fcGF5X2FwYlwiXX1faXNSZWFkeVRvUGF5KGUpe3JldHVybiEhZX19Y29uc3QgVmQ9bm4oZT0+bmV3IHFkKGUsdG4oKSksW3tpZDpcImFtYXpvbnBheVwifV0pO3ZhciBHZCxIZD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTshZnVuY3Rpb24oZSl7ZS5TaGlwcGluZz1cIlNoaXBwaW5nXCIsZS5TdWJ0b3RhbD1cIlN1YnRvdGFsXCIsZS5TdG9yZUNyZWRpdD1cIlN0b3JlIENyZWRpdFwifShHZHx8KEdkPXt9KSk7Y2xhc3MgJGR7Y29uc3RydWN0b3IoZSx0LG4saSxyKXt0aGlzLl9yZXF1ZXN0U2VuZGVyPWUsdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZT10LHRoaXMuX3Nlc3Npb25GYWN0b3J5PW4sdGhpcy5fYnJhaW50cmVlU2RrPWksdGhpcy5fYXBwbGVQYXlTY3JpcHRMb2FkZXI9cix0aGlzLl9zaGlwcGluZ0xhYmVsPUdkLlNoaXBwaW5nLHRoaXMuX3N1YlRvdGFsTGFiZWw9R2QuU3VidG90YWwsdGhpcy5fc3RvcmVDcmVkaXRMYWJlbD1HZC5TdG9yZUNyZWRpdH1pbml0aWFsaXplKGUpe3ZhciB0LG4saSxyO3JldHVybiBIZCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIShudWxsPT1lP3ZvaWQgMDplLm1ldGhvZElkKSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdHttZXRob2RJZDpvfT1lO3lpZWxkIHRoaXMuX2FwcGxlUGF5U2NyaXB0TG9hZGVyLmxvYWRTZGsoKSx0aGlzLl9zaGlwcGluZ0xhYmVsPShudWxsPT09KHQ9ZS5hcHBsZXBheSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc2hpcHBpbmdMYWJlbCl8fEdkLlNoaXBwaW5nLHRoaXMuX3N1YlRvdGFsTGFiZWw9KG51bGw9PT0obj1lLmFwcGxlcGF5KXx8dm9pZCAwPT09bj92b2lkIDA6bi5zdWJ0b3RhbExhYmVsKXx8R2QuU3VidG90YWwsdGhpcy5fc3RvcmVDcmVkaXRMYWJlbD0obnVsbD09PShpPWUuYXBwbGVwYXkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnN0b3JlQ3JlZGl0TGFiZWwpfHxHZC5TdG9yZUNyZWRpdDtjb25zdCBhPSh5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG8pKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhvKTsobnVsbD09PShyPWEuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09cj92b2lkIDA6ci5nYXRld2F5KT09PWtuLkJSQUlOVFJFRSYmKHlpZWxkIHRoaXMuX2luaXRpYWxpemVCcmFpbnRyZWVTZGsoKSl9KX1leGVjdXRlKGUsdCl7cmV0dXJuIEhkKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7aWYoIW4pdGhyb3cgbmV3IFlpKFtcInBheW1lbnRcIl0pO2NvbnN0e21ldGhvZElkOnJ9PW4sbz1pLmdldFBheW1lbnRNZXRob2RPclRocm93KHIpLGE9dGhpcy5fZ2V0QmFzZVJlcXVlc3QoaSxvKSxzPXRoaXMuX3Nlc3Npb25GYWN0b3J5LmNyZWF0ZShhKTtyZXR1cm4geWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7dXNlU3RvcmVDcmVkaXQ6ZS51c2VTdG9yZUNyZWRpdH0sdCkscy5iZWdpbigpLG5ldyBQcm9taXNlKChlLHQpPT57dGhpcy5faGFuZGxlQXBwbGVQYXlFdmVudHMocyxvLHtyZXNvbHZlOmUscmVqZWN0OnR9KX0pfSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9X2dldEJhc2VSZXF1ZXN0KGUsdCl7Y29uc3Qgbj1lLmdldENoZWNrb3V0T3JUaHJvdygpLGk9ZS5nZXRDYXJ0T3JUaHJvdygpLHI9ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKSx7c3RvcmVQcm9maWxlOntzdG9yZUNvdW50cnlDb2RlOm8sc3RvcmVOYW1lOmF9fT1yLHtjdXJyZW5jeTp7Y29kZTpzLGRlY2ltYWxQbGFjZXM6ZH19PWkse2luaXRpYWxpemF0aW9uRGF0YTp7bWVyY2hhbnRDYXBhYmlsaXRpZXM6YyxzdXBwb3J0ZWROZXR3b3JrczpsfX09dCx7Z3JhbmRUb3RhbDp1LGlzU3RvcmVDcmVkaXRBcHBsaWVkOmgsb3V0c3RhbmRpbmdCYWxhbmNlOnB9PW4sbT1be2xhYmVsOnRoaXMuX3N1YlRvdGFsTGFiZWwsYW1vdW50OmAke24uc3VidG90YWwudG9GaXhlZChkKX1gfV07aWYobi50YXhlcy5mb3JFYWNoKGU9Pm0ucHVzaCh7bGFiZWw6ZS5uYW1lLGFtb3VudDpgJHtlLmFtb3VudC50b0ZpeGVkKGQpfWB9KSksbS5wdXNoKHtsYWJlbDp0aGlzLl9zaGlwcGluZ0xhYmVsLGFtb3VudDpgJHtuLnNoaXBwaW5nQ29zdFRvdGFsLnRvRml4ZWQoZCl9YH0pLGgpe2NvbnN0e3N0b3JlQ3JlZGl0OnR9PWUuZ2V0Q3VzdG9tZXJPclRocm93KCk7bS5wdXNoKHtsYWJlbDp0aGlzLl9zdG9yZUNyZWRpdExhYmVsLGFtb3VudDpgLSR7TWF0aC5taW4odSx0KS50b0ZpeGVkKGQpfWB9KX1yZXR1cm57Y291bnRyeUNvZGU6byxjdXJyZW5jeUNvZGU6cyxtZXJjaGFudENhcGFiaWxpdGllczpjLHN1cHBvcnRlZE5ldHdvcmtzOmwsbGluZUl0ZW1zOm0sdG90YWw6e2xhYmVsOmEsYW1vdW50OmAke3AudG9GaXhlZChkKX1gLHR5cGU6XCJmaW5hbFwifX19X2hhbmRsZUFwcGxlUGF5RXZlbnRzKGUsdCxuKXtlLm9udmFsaWRhdGVtZXJjaGFudD1uPT5IZCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0e2JvZHk6aX09eWllbGQgdGhpcy5fb25WYWxpZGF0ZU1lcmNoYW50KHQsbik7ZS5jb21wbGV0ZU1lcmNoYW50VmFsaWRhdGlvbihpKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXJjaGFudCB2YWxpZGF0aW9uIGZhaWxlZFwiKX19KSxlLm9uY2FuY2VsPSgpPT5IZCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIG4ucmVqZWN0KG5ldyBNbihcIkNvbnRpbnVlIHdpdGggYXBwbGVwYXlcIikpfSksZS5vbnBheW1lbnRhdXRob3JpemVkPWk9PnRoaXMuX29uUGF5bWVudEF1dGhvcml6ZWQoaSxlLHQsbil9X29uVmFsaWRhdGVNZXJjaGFudChlLHQpe3JldHVybiBIZCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj1bYHZhbGlkYXRpb25Vcmw9JHt0LnZhbGlkYXRpb25VUkx9YCxgbWVyY2hhbnRJZGVudGlmaWVyPSR7ZS5pbml0aWFsaXphdGlvbkRhdGEubWVyY2hhbnRJZH1gLGBkaXNwbGF5TmFtZT0ke2UuaW5pdGlhbGl6YXRpb25EYXRhLnN0b3JlTmFtZX1gLGBkb21haW5OYW1lPSR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfWBdLmpvaW4oXCImXCIpO3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoYCR7ZS5pbml0aWFsaXphdGlvbkRhdGEucGF5bWVudHNVcmx9L2FwaS9wdWJsaWMvdjEvcGF5bWVudHMvYXBwbGVwYXkvdmFsaWRhdGVfbWVyY2hhbnRgLHtjcmVkZW50aWFsczohMSxoZWFkZXJzOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uXCIsXCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFwiWC1YU1JGLVRPS0VOXCI6bnVsbH0sYm9keTpufSl9KX1fb25QYXltZW50QXV0aG9yaXplZChlLHQsbixpKXt2YXIgcjtyZXR1cm4gSGQodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3Rva2VuOm99PWUucGF5bWVudDtsZXQgYTsobnVsbD09PShyPW4uaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09cj92b2lkIDA6ci5nYXRld2F5KT09PWtuLkJSQUlOVFJFRSYmKGE9eWllbGQgdGhpcy5fZ2V0QnJhaW50cmVlRGV2aWNlRGF0YSgpKTtjb25zdCBzPXttZXRob2RJZDpuLmlkLHBheW1lbnREYXRhOntkZXZpY2VTZXNzaW9uSWQ6YSxmb3JtYXR0ZWRQYXlsb2FkOnthcHBsZV9wYXlfdG9rZW46e3BheW1lbnRfZGF0YTpvLnBheW1lbnREYXRhLHBheW1lbnRfbWV0aG9kOm8ucGF5bWVudE1ldGhvZCx0cmFuc2FjdGlvbl9pZDpvLnRyYW5zYWN0aW9uSWRlbnRpZmllcn19fX07dHJ5e3JldHVybiB5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocyksdC5jb21wbGV0ZVBheW1lbnQoQXBwbGVQYXlTZXNzaW9uLlNUQVRVU19TVUNDRVNTKSxpLnJlc29sdmUoKX1jYXRjaChlKXtyZXR1cm4gdC5jb21wbGV0ZVBheW1lbnQoQXBwbGVQYXlTZXNzaW9uLlNUQVRVU19GQUlMVVJFKSxpLnJlamVjdChuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKSl9fSl9X2dldEJyYWludHJlZURldmljZURhdGEoKXtyZXR1cm4gSGQodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdHtkZXZpY2VEYXRhOmV9PXlpZWxkIHRoaXMuX2JyYWludHJlZVNkay5nZXREYXRhQ29sbGVjdG9yT3JUaHJvdygpO3JldHVybiBlfWNhdGNoKGUpe319KX1faW5pdGlhbGl6ZUJyYWludHJlZVNkaygpe3JldHVybiBIZCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgZT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7bGV0IHQ9ZS5nZXRQYXltZW50TWV0aG9kKGtuLkJSQUlOVFJFRV9GQVNUTEFORSl8fGUuZ2V0UGF5bWVudE1ldGhvZChrbi5CUkFJTlRSRUUpO3R8fCh5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGtuLkJSQUlOVFJFRSksdD1lLmdldFBheW1lbnRNZXRob2Qoa24uQlJBSU5UUkVFKSksdCYmdC5jbGllbnRUb2tlbiYmdC5pbml0aWFsaXphdGlvbkRhdGEmJnRoaXMuX2JyYWludHJlZVNkay5pbml0aWFsaXplKHQuY2xpZW50VG9rZW4pfSl9fWNvbnN0IFdkPW5uKGU9Pntjb25zdHtnZXRIb3N0OnR9PWUuZ2V0U3RhdGUoKSxpPW5ldyBwbihlKTtyZXR1cm4gbmV3ICRkKG4oe2hvc3Q6dCgpfSksZSxuZXcgUm4sbmV3IEVuKG5ldyBEbihhKCksd2luZG93LGkpKSxuZXcgTG4obmV3IHIpKX0sW3tpZDpcImFwcGxlcGF5XCJ9XSksWWQ9e1wiYmFja2dyb3VuZC1jb2xvclwiOlwicmdiYSgwLCAwLCAwLCAwLjQpXCIsXCJ6LWluZGV4XCI6XCIxMDAwXCJ9O2Z1bmN0aW9uIEtkKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmXCJiaWdwYXlUb2tlblwiaW4gZSYmXCJkZWZhdWx0SW5zdHJ1bWVudFwiaW4gZSYmXCJwcm92aWRlclwiaW4gZSYmXCJ0cnVzdGVkU2hpcHBpbmdBZGRyZXNzXCJpbiBlJiZcIm1ldGhvZFwiaW4gZSYmXCJ0eXBlXCJpbiBlfXZhciBKZD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBaZHtjb25zdHJ1Y3RvcihlLHQsbil7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5sb2FkaW5nSW5kaWNhdG9yPW59aW5pdGlhbGl6ZShlKXt2YXIgdCxuO3JldHVybiBKZCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bWV0aG9kSWQ6aSxiaWdjb21tZXJjZV9wYXltZW50czpyfT1lfHx7fTtpZih0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzPXIsIWkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFyKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoaSk7Y29uc3Qgbz10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhpKTt0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI9ci5jb250YWluZXIuc3BsaXQoXCIjXCIpWzFdLChudWxsPT09KHQ9by5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm9yZGVySWQpP3RoaXMub3JkZXJJZD1udWxsPT09KG49by5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLm9yZGVySWQ6KHlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKGkpLHIub25Jbml0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiByLm9uSW5pdCYmci5vbkluaXQoKCk9PnRoaXMucmVuZGVyQnV0dG9uKGkscikpLCh2b2lkIDA9PT1yLnNob3VsZFJlbmRlclBheVBhbEJ1dHRvbk9uSW5pdGlhbGl6YXRpb258fHIuc2hvdWxkUmVuZGVyUGF5UGFsQnV0dG9uT25Jbml0aWFsaXphdGlvbikmJnRoaXMucmVuZGVyQnV0dG9uKGkscikpfSl9ZXhlY3V0ZShlLHQpe3JldHVybiBKZCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pLHtvbkVycm9yOnJ9PXRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHN8fHt9LG89dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlcyxhPW8mJm9bXCJQQVlQQUwtMzQzOC5oYW5kbGluZ19pbnN0cnVtZW50X2RlY2xpbmVkX2Vycm9yX3BwY1wiXTtpZighbil0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiXSk7Y29uc3R7bWV0aG9kSWQ6cyxwYXltZW50RGF0YTpkfT1uO2lmKHRoaXMuaXNQYXlQYWxWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnREYXRhKGQpJiYhdGhpcy5vcmRlcklkJiYodGhpcy5vcmRlcklkPXlpZWxkIHRoaXMuY3JlYXRlT3JkZXIoKSksIXRoaXMub3JkZXJJZCl0aHJvdyBuZXcgQmk7Y29uc3QgYz10aGlzLmlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YShkKT90aGlzLnByZXBhcmVWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnRQYXlsb2FkKHMsdGhpcy5vcmRlcklkLGQpOnRoaXMucHJlcGFyZVBheW1lbnRQYXlsb2FkKHMsdGhpcy5vcmRlcklkLGQpO3RyeXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KSx5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChjKX1jYXRjaChlKXtyZXR1cm4gdGhpcy5pc1Byb3ZpZGVyRXJyb3IoZSkmJmEmJih5aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhuLm1ldGhvZElkKSx5aWVsZCBuZXcgUHJvbWlzZSgoZSx0KT0+e3ZhciBpO3RoaXMuYmlnY29tbWVyY2VfcGF5bWVudHMmJihudWxsPT09KGk9dGhpcy5wYXlwYWxCdXR0b24pfHx2b2lkIDA9PT1pfHxpLmNsb3NlKCksdGhpcy5yZW5kZXJCdXR0b24obi5tZXRob2RJZCx0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzKSx0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcihcIklOU1RSVU1FTlRfREVDTElORURcIikscikpLHQoKX0pKSx0aGlzLmhhbmRsZUVycm9yKGUsciksUHJvbWlzZS5yZWplY3QoKX19KX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfWRlaW5pdGlhbGl6ZSgpe3ZhciBlO3JldHVybiB0aGlzLm9yZGVySWQ9dm9pZCAwLG51bGw9PT0oZT10aGlzLnBheXBhbEJ1dHRvbil8fHZvaWQgMD09PWV8fGUuY2xvc2UoKSxQcm9taXNlLnJlc29sdmUoKX1wcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChlLHQsbil7Y29uc3R7aW5zdHJ1bWVudElkOmksc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDpyfT1uLG89IXRoaXMuaXNUcnVzdGVkVmF1bHRpbmdGbG93KG4pO3JldHVybiBvP3ttZXRob2RJZDplLHBheW1lbnREYXRhOntzaG91bGRTYXZlSW5zdHJ1bWVudDpvLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6cixmb3JtYXR0ZWRQYXlsb2FkOntwYXlwYWxfYWNjb3VudDp7b3JkZXJfaWQ6dH19fX06e21ldGhvZElkOmUscGF5bWVudERhdGE6e2luc3RydW1lbnRJZDppLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6cixmb3JtYXR0ZWRQYXlsb2FkOntwYXlwYWxfYWNjb3VudDp7b3JkZXJfaWQ6dH0sYmlncGF5X3Rva2VuOnt0b2tlbjppfX19fX1wcmVwYXJlUGF5bWVudFBheWxvYWQoZSx0LG4pe2NvbnN0e3Nob3VsZFNhdmVJbnN0cnVtZW50Omk9ITEsc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDpyPSExfT1QZChuKT9uOnt9O3JldHVybnttZXRob2RJZDplLHBheW1lbnREYXRhOntzaG91bGRTYXZlSW5zdHJ1bWVudDppLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6cixmb3JtYXR0ZWRQYXlsb2FkOntwYXlwYWxfYWNjb3VudDp7b3JkZXJfaWQ6dH19fX19cmVuZGVyQnV0dG9uKGUsdCl7Y29uc3Qgbj10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpLGk9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSkse3BheW1lbnRCdXR0b25TdHlsZXM6cn09aS5pbml0aWFsaXphdGlvbkRhdGF8fHt9LHtjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXM6b309cnx8e30se2NvbnRhaW5lcjphLG9uRXJyb3I6cyxvblJlbmRlckJ1dHRvbjpkLG9uVmFsaWRhdGU6YyxzdWJtaXRGb3JtOmx9PXQsdT17ZnVuZGluZ1NvdXJjZTpuLkZVTkRJTkcuUEFZUEFMLHN0eWxlOnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKG8pLGNyZWF0ZU9yZGVyOigpPT50aGlzLmNyZWF0ZU9yZGVyKCksb25DbGljazooZSx0KT0+dGhpcy5oYW5kbGVDbGljayh0LGMpLG9uQXBwcm92ZTplPT50aGlzLmhhbmRsZUFwcHJvdmUoZSxsKSxvbkVycm9yOmU9PnRoaXMuaGFuZGxlRXJyb3IoZSxzKSxvbkNhbmNlbDooKT0+dGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCExKX07dGhpcy5wYXlwYWxCdXR0b249bi5CdXR0b25zKHUpLHRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSYmKGQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGQmJmQoKSx0aGlzLnBheXBhbEJ1dHRvbi5yZW5kZXIoYSkpfWhhbmRsZUNsaWNrKGUsdCl7cmV0dXJuIEpkKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtyZXNvbHZlOm4scmVqZWN0Oml9PWU7eWllbGQgdCgoKT0+KHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMCksbigpKSxpKX0pfWhhbmRsZUFwcHJvdmUoe29yZGVySUQ6ZX0sdCl7dGhpcy5vcmRlcklkPWUsdCgpfWhhbmRsZUVycm9yKGUsdCl7dGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCExKSx0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0KGUpfWNyZWF0ZU9yZGVyKCl7cmV0dXJuIEpkKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBlPXRoaXMuZ2V0RmllbGRzVmFsdWVzKCk7cmV0dXJuIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcImJpZ2NvbW1lcmNlX3BheW1lbnRzY2hlY2tvdXRcIix7c2hvdWxkU2F2ZUluc3RydW1lbnQ6KG51bGw9PWU/dm9pZCAwOmUuc2hvdWxkU2F2ZUluc3RydW1lbnQpfHwhMX0pfSl9Z2V0RmllbGRzVmFsdWVzKCl7Y29uc3R7Z2V0RmllbGRzVmFsdWVzOmV9PXRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHN8fHt9O3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZSgpOnZvaWQgMH1pc1RydXN0ZWRWYXVsdGluZ0Zsb3coZSl7aWYoZSYmU2QoZSkpe2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0SW5zdHJ1bWVudHMoKSxuPW51bGw9PXQ/dm9pZCAwOnQuZmluZCh0PT5LZCh0KSYmdC5iaWdwYXlUb2tlbj09PWUuaW5zdHJ1bWVudElkKTtyZXR1cm4hKEtkKG4pJiYhbi50cnVzdGVkU2hpcHBpbmdBZGRyZXNzKX1yZXR1cm4hMX10b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGUpe2UmJnRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj90aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpOnRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCl9aXNQYXlQYWxWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnREYXRhKGUpe3JldHVybiEhZSYmU2QoZSkmJlBkKGUpfWlzUHJvdmlkZXJFcnJvcihlKXt2YXIgdCxuLGk7cmV0dXJuISFmdW5jdGlvbihlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWUmJlwiZXJyb3JzXCJpbiBlfShlKSYmXCJJTlNUUlVNRU5UX0RFQ0xJTkVEXCI9PT0obnVsbD09PShpPW51bGw9PT0obj0oKG51bGw9PT0odD1udWxsPT1lP3ZvaWQgMDplLmVycm9ycyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZmlsdGVyKGU9PmUucHJvdmlkZXJfZXJyb3IpKXx8W10pWzBdKXx8dm9pZCAwPT09bj92b2lkIDA6bi5wcm92aWRlcl9lcnJvcil8fHZvaWQgMD09PWk/dm9pZCAwOmkuY29kZSl9fWNvbnN0IFFkPW5uKGU9Pm5ldyBaZChlLHNpKGUpLG5ldyBCYSh7Y29udGFpbmVyU3R5bGVzOllkfSkpLFt7aWQ6XCJiaWdjb21tZXJjZV9wYXltZW50c1wifV0pO2Z1bmN0aW9uIFhkKGUpe3JldHVybiEhZSYmKFwiYXV0aGVudGljYXRpb25TdGF0ZVwiaW4gZXx8XCJhZGRyZXNzZXNcImluIGV8fFwiaW5zdHJ1bWVudHNcImluIGUpfXZhciBlYz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyB0Y3tjb25zdHJ1Y3RvcihlLHQsbixpKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyPXQsdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzU2RrPW4sdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscz1pfWluaXRpYWxpemUoZSl7dmFyIHQsbjtyZXR1cm4gZWModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOmksYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmU6cn09ZTtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYodGhpcy5tZXRob2RJZD1pLCFyKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZih0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lPXIsIXIub25Jbml0fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiByLm9uSW5pdCl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25Jbml0XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicpO2lmKCFyLm9uQ2hhbmdlfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiByLm9uQ2hhbmdlKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZS5vbkNoYW5nZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi4nKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoaSk7Y29uc3Qgbz10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxhPW8uZ2V0Q2FydE9yVGhyb3coKSxzPW8uZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coaSkse2lzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU6ZCxpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQ6Y309cy5pbml0aWFsaXphdGlvbkRhdGF8fHt9O3RoaXMudGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZD1udWxsPT09KHQ9cy5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnRocmVlRFNWZXJpZmljYXRpb25NZXRob2QsdGhpcy5wYXlwYWxGYXN0bGFuZVNkaz15aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNTZGsuZ2V0UGF5UGFsRmFzdGxhbmVTZGsocyxhLmN1cnJlbmN5LmNvZGUsYS5pZCk7Y29uc3QgbD1BaShjP251bGw9PT0obj1udWxsPT1zP3ZvaWQgMDpzLmluaXRpYWxpemF0aW9uRGF0YSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZmFzdGxhbmVTdHlsZXM6e30sbnVsbD09cj92b2lkIDA6ci5zdHlsZXMpO3lpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKHRoaXMucGF5cGFsRmFzdGxhbmVTZGssISFkLGwpLHRoaXMuc2hvdWxkUnVuQXV0aGVudGljYXRpb25GbG93KCkmJih5aWVsZCB0aGlzLnJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coaSkpLHlpZWxkIHRoaXMuaW5pdGlhbGl6ZVBheVBhbFBheW1lbnRDb21wb25lbnQoKSxyLm9uSW5pdChlPT50aGlzLnJlbmRlclBheVBhbFBheW1lbnRDb21wb25lbnQoZSkpLHIub25DaGFuZ2UoKCk9PnRoaXMuaGFuZGxlUGF5UGFsU3RvcmVkSW5zdHJ1bWVudENoYW5nZShpKSl9KX1leGVjdXRlKGUsdCl7cmV0dXJuIGVjKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSk7aWYoIW4pdGhyb3cgbmV3IFlpKFtcInBheW1lbnRcIl0pO2NvbnN0e3BheW1lbnREYXRhOnIsbWV0aG9kSWQ6b309bixhPXImJlNkKHIpO3RyeXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KTtjb25zdCBlPWE/eWllbGQgdGhpcy5wcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChvLHIpOnlpZWxkIHRoaXMucHJlcGFyZVBheW1lbnRQYXlsb2FkKG8scik7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoZSksdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5yZW1vdmVTdG9yYWdlU2Vzc2lvbklkKCl9Y2F0Y2goZSl7aWYoZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcIm1lc3NhZ2VcImluIGUmJlwicmVzcG9uc2VcImluIGUmJlwibmFtZVwiaW4gZS5yZXNwb25zZX0oZSkmJlwiSU5WQUxJRF9SRVFVRVNUXCI9PT1lLnJlc3BvbnNlLm5hbWUpe2NvbnN0IGU9e3RyYW5zbGF0aW9uS2V5OlwicGF5bWVudC5lcnJvcnMuaW52YWxpZF9yZXF1ZXN0X2Vycm9yXCJ9O3JldHVybiB0aGlzLmhhbmRsZUVycm9yKGUpLFByb21pc2UucmVqZWN0KCl9aWYoZSBpbnN0YW5jZW9mIEVycm9yJiZcIkZhc3RsYW5lRXJyb3JcIiE9PWUubmFtZSl0aHJvdyBlO3JldHVybiBQcm9taXNlLnJlamVjdCgpfX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBfZCl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIGVjKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9KX1zaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3coKXtjb25zdCBlPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHQ9ZS5nZXRDYXJ0T3JUaHJvdygpLG49ZS5nZXRDdXN0b21lck9yVGhyb3coKSxpPWUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoKSxyPVhkKGkpP2k6e30sbz10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLmdldFN0b3JhZ2VTZXNzaW9uSWQoKTtyZXR1cm4hKCFuLmlzR3Vlc3R8fChudWxsPT1yP3ZvaWQgMDpyLmF1dGhlbnRpY2F0aW9uU3RhdGUpPT09U2kuQ0FOQ0VMRUR8fChudWxsPT1yP3ZvaWQgMDpyLmF1dGhlbnRpY2F0aW9uU3RhdGUpfHxvIT09dC5pZCl9cnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhlKXtyZXR1cm4gZWModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdCB0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLG49dC5nZXRDYXJ0T3JUaHJvdygpLGk9dC5nZXRDdXN0b21lcigpLHI9dC5nZXRCaWxsaW5nQWRkcmVzcygpLG89KG51bGw9PWk/dm9pZCAwOmkuZW1haWwpfHwobnVsbD09cj92b2lkIDA6ci5lbWFpbCl8fFwiXCIse2N1c3RvbWVyQ29udGV4dElkOmF9PXlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMubG9va3VwQ3VzdG9tZXJPclRocm93KG8pLHM9eWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy50cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhhKSx7YXV0aGVudGljYXRpb25TdGF0ZTpkLGFkZHJlc3NlczpjLGluc3RydW1lbnRzOmx9PXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMubWFwUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YShlLHMpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcih7YXV0aGVudGljYXRpb25TdGF0ZTpkLGFkZHJlc3NlczpjLGluc3RydW1lbnRzOmx9KSxzLmF1dGhlbnRpY2F0aW9uU3RhdGU9PT1TaS5DQU5DRUxFRD90aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLnJlbW92ZVN0b3JhZ2VTZXNzaW9uSWQoKTp0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLnVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQobi5pZCl9Y2F0Y2goZSl7fX0pfWluaXRpYWxpemVQYXlQYWxQYXltZW50Q29tcG9uZW50KCl7cmV0dXJuIGVjKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBlPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpLHQ9ZS5waG9uZSxuPWAke2UuZmlyc3ROYW1lfSAke2UubGFzdE5hbWV9YC50cmltKCksaT10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLmdldFBheVBhbEZhc3RsYW5lT3JUaHJvdygpLHI9e2ZpZWxkczpPYmplY3QuYXNzaWduKHtjYXJkaG9sZGVyTmFtZTp7cHJlZmlsbDpuLGVuYWJsZWQ6ITB9fSx0JiZ7cGhvbmVOdW1iZXI6e3ByZWZpbGw6dH19KX07dGhpcy5wYXlwYWxDb21wb25lbnRNZXRob2RzPXlpZWxkIGkuRmFzdGxhbmVDYXJkQ29tcG9uZW50KHIpfSl9cmVuZGVyUGF5UGFsUGF5bWVudENvbXBvbmVudChlKXtjb25zdCB0PXRoaXMuZ2V0UGF5UGFsQ29tcG9uZW50TWV0aG9kc09yVGhyb3coKTtpZighZSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byByZW5kZXIgY2FyZCBjb21wb25lbnQgYmVjYXVzZSBcImNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt0LnJlbmRlcihlKX1nZXRQYXlQYWxDb21wb25lbnRNZXRob2RzT3JUaHJvdygpe2lmKCF0aGlzLnBheXBhbENvbXBvbmVudE1ldGhvZHMpdGhyb3cgbmV3IFh0O3JldHVybiB0aGlzLnBheXBhbENvbXBvbmVudE1ldGhvZHN9cHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQoZSx0KXtyZXR1cm4gZWModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e2luc3RydW1lbnRJZDpufT10LGk9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSkscj10aGlzLmlzQmlnY29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVGhyZWVEU0F2YWlsYWJsZSgpJiZpLmNvbmZpZy5pczNkc0VuYWJsZWQ7cnx8KHlpZWxkIHRoaXMuY3JlYXRlT3JkZXIobikpO2NvbnN0IG89cj95aWVsZCB0aGlzLmdldDNEU05vbmNlKG4pOm47cmV0dXJue21ldGhvZElkOmUscGF5bWVudERhdGE6e2Zvcm1hdHRlZFBheWxvYWQ6e3BheXBhbF9mYXN0bGFuZV90b2tlbjp7b3JkZXJfaWQ6dGhpcy5vcmRlcklkLHRva2VuOm99fX19fSl9cHJlcGFyZVBheW1lbnRQYXlsb2FkKGUsdCl7cmV0dXJuIGVjKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGk9bi5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKSxyPW4uZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSksbz1gJHtpLmZpcnN0TmFtZX0gJHtpLmxhc3ROYW1lfWAudHJpbSgpLHtnZXRQYXltZW50VG9rZW46YX09dGhpcy5nZXRQYXlQYWxDb21wb25lbnRNZXRob2RzT3JUaHJvdygpLHtpZDpzfT15aWVsZCBhKHtuYW1lOntmdWxsTmFtZTpvfSxiaWxsaW5nQWRkcmVzczp0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLm1hcEJjVG9QYXlQYWxBZGRyZXNzKGkpfSksZD10aGlzLmlzQmlnY29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVGhyZWVEU0F2YWlsYWJsZSgpJiZyLmNvbmZpZy5pczNkc0VuYWJsZWQ7ZHx8KHlpZWxkIHRoaXMuY3JlYXRlT3JkZXIocykpO2NvbnN0e3Nob3VsZFNhdmVJbnN0cnVtZW50OmM9ITEsc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDpsPSExfT1QZCh0KT90Ont9LHU9ZD95aWVsZCB0aGlzLmdldDNEU05vbmNlKHMpOnM7cmV0dXJue21ldGhvZElkOmUscGF5bWVudERhdGE6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtzaG91bGRTYXZlSW5zdHJ1bWVudDpjLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6bCxmb3JtYXR0ZWRQYXlsb2FkOntwYXlwYWxfZmFzdGxhbmVfdG9rZW46e29yZGVyX2lkOnRoaXMub3JkZXJJZCx0b2tlbjp1fX19KX19KX1jcmVhdGVPcmRlcihlKXtyZXR1cm4gZWModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5pZDtpZih0aGlzLm1ldGhvZElkKXtjb25zdHtvcmRlcklkOm59PXlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIuY3JlYXRlT3JkZXIodGhpcy5tZXRob2RJZCx7Y2FydElkOnQsZmFzdGxhbmVUb2tlbjplfSk7dGhpcy5vcmRlcklkPW59fSl9Z2V0M0RTTm9uY2UoZSl7dmFyIHQ7cmV0dXJuIGVjKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGk9bi5nZXRDYXJ0T3JUaHJvdygpLHI9bi5nZXRPcmRlck9yVGhyb3coKSxvPW4uZ2V0U3RvcmVDb25maWdPclRocm93KCkubGlua3MuY2hlY2tvdXRMaW5rLGE9bnVsbD09PSh0PXRoaXMucGF5cGFsRmFzdGxhbmVTZGspfHx2b2lkIDA9PT10P3ZvaWQgMDp0LlRocmVlRG9tYWluU2VjdXJlQ2xpZW50O2lmKCFhKXRocm93IG5ldyBYdDtjb25zdCBzPXthbW91bnQ6ci5vcmRlckFtb3VudC50b0ZpeGVkKDIpLGN1cnJlbmN5OmkuY3VycmVuY3kuY29kZSxub25jZTplLHRocmVlRFNSZXF1ZXN0ZWQ6XCJTQ0FfQUxXQVlTXCI9PT10aGlzLnRocmVlRFNWZXJpZmljYXRpb25NZXRob2QsdHJhbnNhY3Rpb25Db250ZXh0OntleHBlcmllbmNlX2NvbnRleHQ6e2xvY2FsZTpcImVuLVVTXCIscmV0dXJuX3VybDpvLGNhbmNlbF91cmw6b319fTtpZih5aWVsZCBhLmlzRWxpZ2libGUocykpe2NvbnN0e2xpYWJpbGl0eVNoaWZ0OnQsYXV0aGVudGljYXRpb25TdGF0ZTpuLG5vbmNlOml9PXlpZWxkIGEuc2hvdygpO2lmKHQ9PT1Hbi5Ob3x8dD09PUduLlVua25vd24pdGhyb3cgbmV3IEJpO2lmKHlpZWxkIHRoaXMuY3JlYXRlT3JkZXIoZSksbj09PXlpLlN1Y2NlZWRlZClyZXR1cm4gaTtpZihuPT09eWkuRXJyb3JlZCl0aHJvdyBuZXcgQmk7aWYobj09PXlpLkNhbmNlbGxlZCl0aHJvdyBjb25zb2xlLmVycm9yKFwiM0RTIGNoZWNrIHdhcyBjYW5jZWxlZFwiKSxuZXcgQml9cmV0dXJuIGV9KX1oYW5kbGVQYXlQYWxTdG9yZWRJbnN0cnVtZW50Q2hhbmdlKGUpe3JldHVybiBlYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLmdldFBheVBhbEZhc3RsYW5lT3JUaHJvdygpLHtzZWxlY3Rpb25DaGFuZ2VkOm4sc2VsZWN0ZWRDYXJkOml9PXlpZWxkIHQucHJvZmlsZS5zaG93Q2FyZFNlbGVjdG9yKCk7aWYobil7Y29uc3QgdD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lcigpLG49WGQodCk/dDp7fSxyPXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMubWFwUGF5UGFsVG9CY0luc3RydW1lbnQoZSxpKVswXTtyZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxuKSx7aW5zdHJ1bWVudHM6W3JdfSkpLHJ9fSl9aXNCaWdjb21tZXJjZVBheW1lbnRzRmFzdGxhbmVUaHJlZURTQXZhaWxhYmxlKCl7cmV0dXJuIGNuKHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXMsXCJQUk9KRUNULTcwODAuYmNwX2Zhc3RsYW5lX3RocmVlX2RzXCIpfWhhbmRsZUVycm9yKGUpe3ZhciB0OyhudWxsPT09KHQ9dGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQub25FcnJvcikmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25FcnJvciYmdGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZS5vbkVycm9yKGUpfX1jb25zdCBuYz1ubihlPT57Y29uc3R7Z2V0SG9zdDp0fT1lLmdldFN0YXRlKCk7cmV0dXJuIG5ldyB0YyhlLG5ldyByaShuKHtob3N0OnQoKX0pKSxDaSgpLE9pKCkpfSxbe2lkOlwiYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmVcIn1dKSxpYz1mdW5jdGlvbih7c3R5bGVzOmV9KXtjb25zdCB0PXt9O3JldHVybiBlLmNvbG9yJiYodC5jb2xvcj1lLmNvbG9yKSxlLmxheW91dCYmKHQubGF5b3V0PWUubGF5b3V0KSwoZVtcImxvZ28tdHlwZVwiXXx8ZVtcImxvZ28tcG9zaXRpb25cIl0pJiYodC5sb2dvPXt9LGVbXCJsb2dvLXR5cGVcIl0mJih0LmxvZ28udHlwZT1lW1wibG9nby10eXBlXCJdKSxlW1wibG9nby1wb3NpdGlvblwiXSYmKHQubG9nby5wb3NpdGlvbj1lW1wibG9nby1wb3NpdGlvblwiXSkpLGUucmF0aW8mJih0LnJhdGlvPWUucmF0aW8pLChlW1widGV4dC1jb2xvclwiXXx8ZVtcInRleHQtc2l6ZVwiXSkmJih0LnRleHQ9e30sZVtcInRleHQtY29sb3JcIl0mJih0LnRleHQuY29sb3I9ZVtcInRleHQtY29sb3JcIl0pLGVbXCJ0ZXh0LXNpemVcIl0mJih0LnRleHQuc2l6ZT0rZVtcInRleHQtc2l6ZVwiXSkpLHR9O3ZhciByYz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBvY3tjb25zdHJ1Y3RvcihlLHQsbixpKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U9dCx0aGlzLmxvYWRpbmdJbmRpY2F0b3I9bix0aGlzLnBheXBhbFNka0hlbHBlcj1pfWluaXRpYWxpemUoZSl7cmV0dXJuIHJjKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHttZXRob2RJZDp0LGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyOm59PWV8fHt9O2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKHQpO2NvbnN0IGk9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkscj1pLmdldFBheW1lbnRNZXRob2RPclRocm93KHQpLHtwYXlwYWxCTlBMQ29uZmlndXJhdGlvbjpvPVtdLG9yZGVySWQ6YX09ci5pbml0aWFsaXphdGlvbkRhdGF8fHt9LHtiYW5uZXJDb250YWluZXJJZDpzLGNvbnRhaW5lcjpkfT1uO2lmKHZvaWQgMCE9PXMpe2lmKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzKSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVW5hYmxlIHRvIGNyZWF0ZSBiYW5uZXIgd2l0aG91dCB2YWxpZCBiYW5uZXIgY29udGFpbmVyIElELlwiKTtjb25zdCBlPW8mJm8uZmluZCgoe2lkOmV9KT0+XCJjaGVja291dFwiPT09ZSk7aWYoIShudWxsPT1lP3ZvaWQgMDplLnN0YXR1cykpcmV0dXJuO2NvbnN0IHQ9eWllbGQgdGhpcy5wYXlwYWxTZGtIZWxwZXIuZ2V0UGF5UGFsTWVzc2FnZXMocixpLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSk7cmV0dXJuIHRoaXMucmVuZGVyTWVzc2FnZXModCxzLGUpfWE/dGhpcy5vcmRlcklkPWE6KHlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKHQpLHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj1udWxsPT1kP3ZvaWQgMDpkLnNwbGl0KFwiI1wiKVsxXSx0aGlzLnJlbmRlckJ1dHRvbih0LG4pKX0pfWV4ZWN1dGUoZSx0KXtyZXR1cm4gcmModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6bn09ZSxpPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0oZSxbXCJwYXltZW50XCJdKTtpZighbil0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiXSk7aWYoIXRoaXMub3JkZXJJZCl0aHJvdyBuZXcgQmk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGksdCkseWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobi5tZXRob2RJZCx0aGlzLm9yZGVySWQpfSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXt2YXIgZTtyZXR1cm4gdGhpcy5vcmRlcklkPXZvaWQgMCxudWxsPT09KGU9dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucyl8fHZvaWQgMD09PWV8fGUuY2xvc2UoKSxQcm9taXNlLnJlc29sdmUoKX1yZW5kZXJCdXR0b24oZSx0KXtpZighKG51bGw9PXQ/dm9pZCAwOnQuY29udGFpbmVyKSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcImNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdCBuPXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCksaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKSx7cGF5bWVudEJ1dHRvblN0eWxlczpyfT1pLmluaXRpYWxpemF0aW9uRGF0YXx8e30se2NoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlczpvfT1yfHx7fSx7Y29udGFpbmVyOmEsb25FcnJvcjpzLG9uUmVuZGVyQnV0dG9uOmQsb25WYWxpZGF0ZTpjLHN1Ym1pdEZvcm06bH09dCx1PVtuLkZVTkRJTkcuUEFZTEFURVIsbi5GVU5ESU5HLkNSRURJVF07bGV0IGg9ITE7dS5mb3JFYWNoKGU9PntpZihoKXJldHVybjtjb25zdCB0PXtmdW5kaW5nU291cmNlOmUsc3R5bGU6dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUobyksY3JlYXRlT3JkZXI6KCk9PnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcImJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyXCIpLG9uQ2xpY2s6KGUsdCk9PnRoaXMuaGFuZGxlQ2xpY2sodCxjKSxvbkFwcHJvdmU6ZT0+dGhpcy5oYW5kbGVBcHByb3ZlKGUsbCksb25DYW5jZWw6KCk9PnRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksb25FcnJvcjplPT50aGlzLmhhbmRsZUVycm9yKGUscyl9O2lmKHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnM9bi5CdXR0b25zKHQpLHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnMuaXNFbGlnaWJsZSgpfHxlIT09bi5GVU5ESU5HLlBBWUxBVEVSKXtpZighdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucy5pc0VsaWdpYmxlKCkmJmU9PT1uLkZVTkRJTkcuQ1JFRElUKXRocm93IG5ldyBvbihgQmlnQ29tbWVyY2VQYXltZW50cyAke2V9IGlzIG5vdCBhdmFpbGFibGUgZm9yIHlvdXIgcmVnaW9uLiBQbGVhc2UgdXNlIEJpZ0NvbW1lcmNlUGF5bWVudHMgQ2hlY2tvdXQgaW5zdGVhZC5gKTtkJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBkJiZkKCksdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucy5yZW5kZXIoYSksaD0hMH19KX1oYW5kbGVDbGljayhlLHQpe3JldHVybiByYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cmVzb2x2ZTpuLHJlamVjdDppfT1lO3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJih5aWVsZCB0KCgpPT4odGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCEwKSxuKCkpLGkpKX0pfWhhbmRsZUFwcHJvdmUoe29yZGVySUQ6ZX0sdCl7dGhpcy5vcmRlcklkPWUsdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdCgpfWhhbmRsZUVycm9yKGUsdCl7dGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCExKSx0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0KGUpfXRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZSl7ZSYmdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyP3RoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik6dGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKX1yZW5kZXJNZXNzYWdlcyhlLHQsbil7Y29uc3QgaT17YW1vdW50OnRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENoZWNrb3V0T3JUaHJvdygpLm91dHN0YW5kaW5nQmFsYW5jZSxwbGFjZW1lbnQ6XCJwYXltZW50XCIsc3R5bGU6aWMobil9O2UuTWVzc2FnZXMoaSkucmVuZGVyKGAjJHt0fWApfX1jb25zdCBhYz1ubihlPT5uZXcgb2MoZSxzaShlKSxuZXcgQmEoe2NvbnRhaW5lclN0eWxlczpZZH0pLENpKCkpLFt7aWQ6XCJiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlclwifV0pO2NsYXNzIHNjIGV4dGVuZHMgcW57Y29uc3RydWN0b3IoZSl7c3VwZXIoZSx7bWVzc2FnZTpcIlRoZSByZXF1ZXN0IGhhcyB0aW1lZCBvdXQgb3IgYWJvcnRlZC5cIn0pLHRoaXMubmFtZT1cIlRpbWVvdXRFcnJvclwiLHRoaXMudHlwZT1cInRpbWVvdXRcIn19dmFyIGRjPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIGNje2NvbnN0cnVjdG9yKGUsdCxuLGk9M2UzLHI9M2U1KXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U9dCx0aGlzLmxvYWRpbmdJbmRpY2F0b3I9bix0aGlzLnBvbGxpbmdJbnRlcnZhbD1pLHRoaXMubWF4UG9sbGluZ0ludGVydmFsVGltZT1yLHRoaXMucG9sbGluZ1RpbWVyPTAsdGhpcy5zdG9wUG9sbGluZz1WfWluaXRpYWxpemUoZSl7cmV0dXJuIGRjKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtnYXRld2F5SWQ6dCxtZXRob2RJZDpuLGJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXk6aX09ZTtpZighbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdHtsZWdhbFRleHRDb250YWluZXI6cixjb250YWluZXI6byxsb2FkaW5nQ29udGFpbmVySWQ6YX09aTtpZighbyl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFyKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5sZWdhbFRleHRDb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIWEpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmxvYWRpbmdDb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI9YTtjb25zdCBzPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KG4sdCkse21lcmNoYW50SWQ6ZH09cy5pbml0aWFsaXphdGlvbkRhdGF8fHt9O2lmKCFkKXRocm93IG5ldyBybihcIlVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBtZXJjaGFudElkIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5cIik7dGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5PWkseWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobiksdGhpcy5jcmVhdGVGcmF1ZE5ldFNjcmlwdChkLG4sdCksdGhpcy5sb2FkRnJhdWRuZXRDb25maWcoKSx0aGlzLnJlbmRlckxlZ2FsVGV4dChyLG8pfSl9ZXhlY3V0ZShlLHQpe3JldHVybiBkYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pLHtnZXRGaWVsZHNWYWx1ZXM6cn09dGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5fHx7fTtpZighbil0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiXSk7aWYoIXJ8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHIpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdldEZpZWxkc1ZhbHVlc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITApO3RyeXtjb25zdCBlPXlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcImJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXNjaGVja291dFwiLHttZXRhZGF0YUlkOnRoaXMuZ3VpZH0pLHtyYXRlcGF5QmlydGhEYXRlOm8scmF0ZXBheVBob25lTnVtYmVyOmEscmF0ZXBheVBob25lQ291bnRyeUNvZGU6c309cigpLGQ9e2Zvcm1hdHRlZFBheWxvYWQ6e3ZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDpudWxsLHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50Om51bGwsZGV2aWNlX2luZm86bnVsbCxtZXRob2RfaWQ6bi5tZXRob2RJZCxyYXRlX3BheTp7YmlydGhfZGF0ZTp0aGlzLm5vcm1hbGl6ZURhdGUobykscGhvbmU6e25hdGlvbmFsX251bWJlcjphLGNvdW50cnlfY29kZTpzLnNwbGl0KFwiK1wiKVsxXX19LHBheXBhbF9hY2NvdW50OntvcmRlcl9pZDplfX19O3JldHVybiB5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KSx5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7bWV0aG9kSWQ6bi5tZXRob2RJZCxwYXltZW50RGF0YTpkfSkseWllbGQgbmV3IFByb21pc2UoKGUsdCk9Pnt0aGlzLmluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKG4ubWV0aG9kSWQsZSx0LG4uZ2F0ZXdheUlkKX0pfWNhdGNoKGUpe3JldHVybiB0aGlzLmhhbmRsZUVycm9yKGUpLG5ldyBQcm9taXNlKChlLHQpPT50KCkpfX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBfZCl9ZGVpbml0aWFsaXplKCl7Y29uc3R7bGVnYWxUZXh0Q29udGFpbmVyOmV9PXRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheXx8e30sdD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pZD1cImZyYXVkbmV0U2NyaXB0XCJdJylbMF0sbj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pZD1cImZyYXVkbmV0Q29uZmlnXCJdJylbMF07aWYodGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCksdC5yZW1vdmUoKSxuLnJlbW92ZSgpLGUpe2NvbnN0IHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSk7bnVsbD09dHx8dC5yZW1vdmUoKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9bm9ybWFsaXplRGF0ZShlKXtjb25zdCB0PXRoaXMuZm9ybWF0RGF0ZShlLmdldERhdGUoKSksbj10aGlzLmZvcm1hdERhdGUoZS5nZXRNb250aCgpKzEpO3JldHVybmAke2UuZ2V0RnVsbFllYXIoKX0tJHtufS0ke3R9YH1mb3JtYXREYXRlKGUpe3JldHVybmAke2U8MTA/MDpcIlwifSR7ZX1gfXJlbmRlckxlZ2FsVGV4dChlLHQpe2NvbnN0IG49ZSxpPXQuc3BsaXQoXCIjXCIpWzFdLHI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaSksbz1udWxsPT1yP3ZvaWQgMDpyLnBhcmVudE5vZGUsYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Euc3R5bGUubWFyZ2luQm90dG9tPVwiMjBweFwiLGEuc2V0QXR0cmlidXRlKFwiaWRcIixuKSxudWxsPT1vfHxvLnByZXBlbmQoYSk7Y29uc3Qgcz10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpLGQ9cy5MZWdhbCh7ZnVuZGluZ1NvdXJjZTpzLkxlZ2FsLkZVTkRJTkcuUEFZX1VQT05fSU5WT0lDRX0pO2lmKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuKSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcImxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnRcIiBhcmd1bWVudCBpcyBub3QgZm91bmQuJyk7ZC5yZW5kZXIoYCMke259YCl9aGFuZGxlRXJyb3IoZSl7Y29uc3R7b25FcnJvcjp0fT10aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXl8fHt9O3RoaXMucmVzZXRQb2xsaW5nTWVjaGFuaXNtKCksdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCExKSx0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0KGUpfWNyZWF0ZUZyYXVkTmV0U2NyaXB0KGUsdCxuKXtjb25zdCBpPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KHQsbikse3Rlc3RNb2RlOnJ9PWkuY29uZmlnLG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtvLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImFwcGxpY2F0aW9uL2pzb25cIiksby5zZXRBdHRyaWJ1dGUoXCJmbmNsc1wiLFwiZm5wYXJhbXMtZGVkZTdjYzUtMTVmZC00Yzc1LWE5ZjQtMzZjNDMwZWUzYTk5XCIpLG8uc2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiLFwiZnJhdWRuZXRTY3JpcHRcIiksdGhpcy5ndWlkPXRoaXMuZ2VuZXJhdGVHVUlEKCk7Y29uc3QgYT17Zjp0aGlzLmd1aWQsczpgJHtlfV9jaGVja291dC1wYWdlYCxzYW5kYm94OnJ9O28uaW5uZXJIVE1MPUpTT04uc3RyaW5naWZ5KGEpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobyl9Z2VuZXJhdGVHVUlEKCl7bGV0IGU9XCJcIjtmb3IobGV0IHQ9MDt0PDMyO3QrPTEpZSs9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiW01hdGguZmxvb3IoNjIqTWF0aC5yYW5kb20oKSldO3JldHVybiBlfWxvYWRGcmF1ZG5ldENvbmZpZygpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtlLnNldEF0dHJpYnV0ZShcImRhdGEtaWRcIixcImZyYXVkbmV0Q29uZmlnXCIpLGUuc3JjPVwiaHR0cHM6Ly9jLnBheXBhbC5jb20vZGEvci9mYi5qc1wiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSl9cmVpbml0aWFsaXplU3RyYXRlZ3koZSl7cmV0dXJuIGRjKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmRlaW5pdGlhbGl6ZSgpLHlpZWxkIHRoaXMuaW5pdGlhbGl6ZShlKX0pfWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKGUsdCxuLGkpe3JldHVybiBkYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgbmV3IFByb21pc2UoKGUsdCk9Pntjb25zdCBuPXNldFRpbWVvdXQoZSx0aGlzLnBvbGxpbmdJbnRlcnZhbCk7dGhpcy5zdG9wUG9sbGluZz0oKT0+KGNsZWFyVGltZW91dChuKSx0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITEpLHQoKSl9KTt0cnl7dGhpcy5wb2xsaW5nVGltZXIrPXRoaXMucG9sbGluZ0ludGVydmFsO2NvbnN0IHI9eWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldE9yZGVyU3RhdHVzKFwiYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtc1wiLHtwYXJhbXM6e3VzZU1ldGFkYXRhOiEwfX0pLG89cj09PUpuLlBvbGxpbmdTdG9wLGE9cj09PUpuLlBvbGxpbmdFcnJvcjtpZihvKXJldHVybiB0aGlzLmRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKSx0KCk7aWYoYSlyZXR1cm4gbigpO2lmKCFvJiZ0aGlzLnBvbGxpbmdUaW1lcjx0aGlzLm1heFBvbGxpbmdJbnRlcnZhbFRpbWUpcmV0dXJuIHlpZWxkIHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oZSx0LG4saSk7eWllbGQgdGhpcy5yZWluaXRpYWxpemVTdHJhdGVneSh7bWV0aG9kSWQ6ZSxnYXRld2F5SWQ6aSxiaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5OnRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheX0pLHRoaXMuaGFuZGxlRXJyb3IobmV3IHNjKX1jYXRjaChlKXt0aGlzLmhhbmRsZUVycm9yKGUpLG4oKX19KX1kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCl7dGhpcy5zdG9wUG9sbGluZygpLHRoaXMucG9sbGluZ1RpbWVyPTB9cmVzZXRQb2xsaW5nTWVjaGFuaXNtKCl7dGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCl9dG9nZ2xlTG9hZGluZ0luZGljYXRvcihlKXtlJiZ0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/dGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTp0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpfX1jb25zdCBsYz1ubihlPT5uZXcgY2MoZSxzaShlKSxuZXcgQmEoe2NvbnRhaW5lclN0eWxlczpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sWWQpLHtwb3NpdGlvbjpcImZpeGVkXCJ9KX0pKSxbe2dhdGV3YXk6XCJiaWdjb21tZXJjZV9wYXltZW50c19hcG1zXCIsaWQ6XCJyYXRlcGF5XCJ9XSk7dmFyIHVjOyFmdW5jdGlvbihlKXtlLkNhcmRDb2RlPVwiY2FyZENvZGVcIixlLkNhcmRDb2RlVmVyaWZpY2F0aW9uPVwiY2FyZENvZGVWZXJpZmljYXRpb25cIixlLkNhcmRFeHBpcnk9XCJjYXJkRXhwaXJ5XCIsZS5DYXJkTmFtZT1cImNhcmROYW1lXCIsZS5DYXJkTnVtYmVyPVwiY2FyZE51bWJlclwiLGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbj1cImNhcmROdW1iZXJWZXJpZmljYXRpb25cIixlLkNhcmRFeHBpcnlWZXJpZmljYXRpb249XCJjYXJkRXhwaXJ5VmVyaWZpY2F0aW9uXCJ9KHVjfHwodWM9e30pKTtjb25zdCBoYz11YztmdW5jdGlvbiBwYyhlKXtyZXR1cm4gaGMuQ2FyZE51bWJlciBpbiBlJiZoYy5DYXJkTmFtZSBpbiBlJiZoYy5DYXJkRXhwaXJ5IGluIGV9ZnVuY3Rpb24gbWMoZSl7cmV0dXJuIGhjLkNhcmROdW1iZXJWZXJpZmljYXRpb24gaW4gZSYmaGMuQ2FyZENvZGVWZXJpZmljYXRpb24gaW4gZSYmaGMuQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbiBpbiBlfXZhciB5Yz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBnY3tjb25zdHJ1Y3RvcihlLHQsbixpKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U9dCx0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNTZGs9bix0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzPWl9aW5pdGlhbGl6ZShlKXtyZXR1cm4geWModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOnQsYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHM6bn09ZSxpPW4se2Zvcm06cixvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvcjpvfT1pfHx7fTtpZighdCl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXIpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkcy5mb3JtXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3RoaXMuaG9zdGVkRm9ybU9wdGlvbnM9cix0aGlzLmlzQ3JlZGl0Q2FyZEZvcm09cGMoci5maWVsZHMpLHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm09bWMoci5maWVsZHMpJiYhdGhpcy5oYXNVbmRlZmluZWRWYWx1ZXMoKSx5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QodCkseWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsodCx2b2lkIDAsITAsITApLCh0aGlzLmlzQ3JlZGl0Q2FyZEZvcm18fHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0pJiYoeWllbGQgdGhpcy5pbml0aWFsaXplRmllbGRzKHIsbykpLHRoaXMuc2hvdWxkSW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKHQpJiYoeWllbGQgdGhpcy5pbml0aWFsaXplUGF5UGFsRmFzdGxhbmVPclRocm93KHQpKX0pfWV4ZWN1dGUoZSx0KXtyZXR1cm4geWModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6bn09ZSxpPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0oZSxbXCJwYXltZW50XCJdKSx7bWV0aG9kSWQ6cixwYXltZW50RGF0YTpvfT1ufHx7fTtpZighbnx8IXIpdGhyb3cgbmV3IFlpKFtcInBheW1lbnRcIl0pO2lmKHRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGE9byx0aGlzLmlzQ3JlZGl0Q2FyZEZvcm18fHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0peWllbGQgdGhpcy52YWxpZGF0ZUhvc3RlZEZvcm1PclRocm93KCkseWllbGQgdGhpcy5zdWJtaXRIb3N0ZWRGb3JtKCk7ZWxzZXtjb25zdHtvcmRlcklkOmV9PXlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlckNhcmRGaWVsZHMoXCJiaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkc2NoZWNrb3V0XCIsdGhpcy5nZXRJbnN0cnVtZW50UGFyYW1zKCkpO3RoaXMucmV0dXJuZWRPcmRlcklkPWV9Y29uc3QgYT10aGlzLnByZXBhcmVQYXltZW50UGF5bG9hZChyLG8sdGhpcy5yZXR1cm5lZE9yZGVySWQsdGhpcy5yZXR1cm5lZFZhdWx0ZWRUb2tlbik7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGksdCkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoYSl9KX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfWRlaW5pdGlhbGl6ZSgpe3ZhciBlLHQsbixpO3JldHVybiB5Yyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIG51bGw9PT0oZT10aGlzLmN2dkZpZWxkKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jbG9zZSgpLHlpZWxkIG51bGw9PT0odD10aGlzLmV4cGlyeUZpZWxkKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jbG9zZSgpLHlpZWxkIG51bGw9PT0obj10aGlzLm51bWJlckZpZWxkKXx8dm9pZCAwPT09bj92b2lkIDA6bi5jbG9zZSgpLHlpZWxkIG51bGw9PT0oaT10aGlzLm5hbWVGaWVsZCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuY2xvc2UoKSxQcm9taXNlLnJlc29sdmUoKX0pfXByZXBhcmVQYXltZW50UGF5bG9hZChlLHQsbixpKXtjb25zdHtzaG91bGRTYXZlSW5zdHJ1bWVudDpyPSExLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6bz0hMX09UGQodCk/dDp7fSxhPXQmJlNkKHQpP3QuaW5zdHJ1bWVudElkOnZvaWQgMCxzPUgoe3ZlcmlmaWNhdGlvbl9ub25jZTppLHRva2VuOmF9LFQpO3JldHVybnttZXRob2RJZDplLHBheW1lbnREYXRhOntzaG91bGRTYXZlSW5zdHJ1bWVudDpyLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6byxpbnN0cnVtZW50SWQ6YSxmb3JtYXR0ZWRQYXlsb2FkOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxpfHxhP3tiaWdwYXlfdG9rZW46c306e30pLG4/e2NhcmRfd2l0aF9vcmRlcjp7b3JkZXJfaWQ6bn19Ont9KX19fWluaXRpYWxpemVGaWVsZHMoZSx0KXtyZXR1cm4geWModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e2ZpZWxkczpuLHN0eWxlczppfT1lLHI9dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKSxvPXRoaXMuZ2V0RXhlY3V0ZUNhbGxiYWNrKG4pLGE9T2JqZWN0LmFzc2lnbih7c3R5bGU6dGhpcy5nZXRJbnB1dFN0eWxlcyhpKSxvbkFwcHJvdmU6KHtvcmRlcklEOmUsdmF1bHRTZXR1cFRva2VuOnQsbGlhYmlsaXR5U2hpZnQ6bn0pPT57aWYobj09PUduLk5vfHxuPT09R24uVW5rbm93bil0aHJvdyBuZXcgRXJyb3I7cmV0dXJuIHRoaXMuaGFuZGxlQXBwcm92ZSh7b3JkZXJJRDplLHZhdWx0U2V0dXBUb2tlbjp0fSl9LG9uRXJyb3I6KCk9Pnt0aHJvdyBuZXcgTGl9LGlucHV0RXZlbnRzOntvbkNoYW5nZTp0PT50aGlzLm9uQ2hhbmdlSGFuZGxlcihlLHQpLG9uRm9jdXM6dD0+dGhpcy5vbkZvY3VzSGFuZGxlcihlLHQpLG9uQmx1cjp0PT50aGlzLm9uQmx1ckhhbmRsZXIoZSx0KSxvbklucHV0U3VibWl0UmVxdWVzdDp0PT50aGlzLm9uSW5wdXRTdWJtaXRSZXF1ZXN0KGUsdCl9fSxvKTtpZih0aGlzLmNhcmRGaWVsZHM9eWllbGQgci5DYXJkRmllbGRzKGEpLCF0aGlzLmNhcmRGaWVsZHMuaXNFbGlnaWJsZSgpKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3RyeXt0aGlzLnN0eWxpemVJbnB1dENvbnRhaW5lcnMobikscGMobikmJih5aWVsZCB0aGlzLnJlbmRlckZpZWxkcyhuKSksbWMobikmJih5aWVsZCB0aGlzLnJlbmRlclZhdWx0ZWRGaWVsZHMobikpfWNhdGNoKGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQoZSl9fSl9Z2V0RXhlY3V0ZUNhbGxiYWNrKGUpe3JldHVybiBtYyhlKT90aGlzLmNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrKCk6dGhpcy5jcmVhdGVPcmRlckNhbGxiYWNrKCl9Y3JlYXRlVmF1bHRTZXR1cFRva2VuQ2FsbGJhY2soKXtyZXR1cm57Y3JlYXRlVmF1bHRTZXR1cFRva2VuOigpPT55Yyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7c2V0dXBUb2tlbjplfT0oeWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhcImJpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzY2hlY2tvdXRcIixPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5nZXRJbnN0cnVtZW50UGFyYW1zKCkpLHtzZXR1cFRva2VuOiEwfSkpKXx8e307cmV0dXJuIGV9KX19Y3JlYXRlT3JkZXJDYWxsYmFjaygpe3JldHVybntjcmVhdGVPcmRlcjooKT0+eWModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e29yZGVySWQ6ZX09KHlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlckNhcmRGaWVsZHMoXCJiaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkc2NoZWNrb3V0XCIsdGhpcy5nZXRJbnN0cnVtZW50UGFyYW1zKCkpKXx8e307cmV0dXJuIGV9KX19aGFuZGxlQXBwcm92ZSh7b3JkZXJJRDplLHZhdWx0U2V0dXBUb2tlbjp0fSl7ZSYmKHRoaXMucmV0dXJuZWRPcmRlcklkPWUpLHQmJih0aGlzLnJldHVybmVkVmF1bHRlZFRva2VuPXQpfXJlbmRlckZpZWxkcyhlKXt2YXIgdCxuLGkscjtyZXR1cm4geWModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG89dGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpOyhudWxsPT09KHQ9ZS5jYXJkQ29kZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY29udGFpbmVySWQpJiYodGhpcy5jdnZGaWVsZD1vLkNWVkZpZWxkKHtwbGFjZWhvbGRlcjpcIlwifSkseWllbGQgdGhpcy5jdnZGaWVsZC5yZW5kZXIoYCMke2UuY2FyZENvZGUuY29udGFpbmVySWR9YCkpLChudWxsPT09KG49ZS5jYXJkRXhwaXJ5KXx8dm9pZCAwPT09bj92b2lkIDA6bi5jb250YWluZXJJZCkmJih0aGlzLmV4cGlyeUZpZWxkPW8uRXhwaXJ5RmllbGQoKSx5aWVsZCB0aGlzLmV4cGlyeUZpZWxkLnJlbmRlcihgIyR7ZS5jYXJkRXhwaXJ5LmNvbnRhaW5lcklkfWApKSwobnVsbD09PShpPWUuY2FyZE5hbWUpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmNvbnRhaW5lcklkKSYmKHRoaXMubmFtZUZpZWxkPW8uTmFtZUZpZWxkKHtwbGFjZWhvbGRlcjpcIlwifSkseWllbGQgdGhpcy5uYW1lRmllbGQucmVuZGVyKGAjJHtlLmNhcmROYW1lLmNvbnRhaW5lcklkfWApKSwobnVsbD09PShyPWUuY2FyZE51bWJlcil8fHZvaWQgMD09PXI/dm9pZCAwOnIuY29udGFpbmVySWQpJiYodGhpcy5udW1iZXJGaWVsZD1vLk51bWJlckZpZWxkKHtwbGFjZWhvbGRlcjpcIlwifSkseWllbGQgdGhpcy5udW1iZXJGaWVsZC5yZW5kZXIoYCMke2UuY2FyZE51bWJlci5jb250YWluZXJJZH1gKSl9KX1yZW5kZXJWYXVsdGVkRmllbGRzKGUpe3ZhciB0LG4saTtyZXR1cm4geWModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHI9dGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpOyhudWxsPT09KHQ9ZS5jYXJkQ29kZVZlcmlmaWNhdGlvbil8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY29udGFpbmVySWQpJiYodGhpcy5jdnZGaWVsZD1yLkNWVkZpZWxkKHtwbGFjZWhvbGRlcjpcIlwifSkseWllbGQgdGhpcy5jdnZGaWVsZC5yZW5kZXIoYCMke2UuY2FyZENvZGVWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCkpLChudWxsPT09KG49ZS5jYXJkRXhwaXJ5VmVyaWZpY2F0aW9uKXx8dm9pZCAwPT09bj92b2lkIDA6bi5jb250YWluZXJJZCkmJih0aGlzLmV4cGlyeUZpZWxkPXIuRXhwaXJ5RmllbGQoKSx5aWVsZCB0aGlzLmV4cGlyeUZpZWxkLnJlbmRlcihgIyR7ZS5jYXJkRXhwaXJ5VmVyaWZpY2F0aW9uLmNvbnRhaW5lcklkfWApKSwobnVsbD09PShpPWUuY2FyZE51bWJlclZlcmlmaWNhdGlvbil8fHZvaWQgMD09PWk/dm9pZCAwOmkuY29udGFpbmVySWQpJiYodGhpcy5udW1iZXJGaWVsZD1yLk51bWJlckZpZWxkKHtwbGFjZWhvbGRlcjpcIlwifSkseWllbGQgdGhpcy5udW1iZXJGaWVsZC5yZW5kZXIoYCMke2UuY2FyZE51bWJlclZlcmlmaWNhdGlvbi5jb250YWluZXJJZH1gKSl9KX1nZXRJbnN0cnVtZW50UGFyYW1zKCl7aWYoIXRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGEpcmV0dXJue307aWYoUGQodGhpcy5leGVjdXRpb25QYXltZW50RGF0YSkpe2NvbnN0e3Nob3VsZFNhdmVJbnN0cnVtZW50OmUsc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDp0fT10aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhO3JldHVybntzaG91bGRTYXZlSW5zdHJ1bWVudDplLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6dH19aWYoU2QodGhpcy5leGVjdXRpb25QYXltZW50RGF0YSkpe2NvbnN0e2luc3RydW1lbnRJZDplfT10aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhO3JldHVybntpbnN0cnVtZW50SWQ6ZX19cmV0dXJue319Z2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQoe2VtaXR0ZWRCeTplfSl7cmV0dXJue2ZpZWxkVHlwZTp0aGlzLm1hcEZpZWxkVHlwZShlKX19c3VibWl0SG9zdGVkRm9ybSgpe3JldHVybiB5Yyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgZT10aGlzLmdldENhcmRGaWVsZHNPclRocm93KCksdD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKSxuPXtiaWxsaW5nQWRkcmVzczp7Y29tcGFueTp0LmNvbXBhbnksYWRkcmVzc0xpbmUxOnQuYWRkcmVzczEsYWRkcmVzc0xpbmUyOnQuYWRkcmVzczIsYWRtaW5BcmVhMTp0LnN0YXRlT3JQcm92aW5jZUNvZGUsYWRtaW5BcmVhMjp0LmNpdHkscG9zdGFsQ29kZTp0LnBvc3RhbENvZGUsY291bnRyeUNvZGU6dC5jb3VudHJ5Q29kZX19O3RyeXt0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtP3lpZWxkIGUuc3VibWl0KCk6eWllbGQgZS5zdWJtaXQobil9Y2F0Y2goZSl7dGhyb3cgbmV3IExpKFwiRmFpbGVkIGF1dGhlbnRpY2F0aW9uLiBQbGVhc2UgdHJ5IHRvIGF1dGhvcml6ZSBhZ2Fpbi5cIil9fSl9dmFsaWRhdGVIb3N0ZWRGb3JtT3JUaHJvdygpe3ZhciBlLHQ7cmV0dXJuIHljKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKSxpPXlpZWxkIG4uZ2V0U3RhdGUoKS50aGVuKGU9PmUpLHI9dGhpcy5nZXRWYWxpZGl0eURhdGEoaSk7aWYoIXIuaXNWYWxpZCl0aHJvdyBudWxsPT09KHQ9bnVsbD09PShlPXRoaXMuaG9zdGVkRm9ybU9wdGlvbnMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLm9uVmFsaWRhdGUpfHx2b2lkIDA9PT10fHx0LmNhbGwoZSxyKSxuZXcgS2kodGhpcy5tYXBWYWxpZGF0aW9uRXJyb3JzKHIuZXJyb3JzKSl9KX1nZXRWYWxpZGl0eURhdGEoe2ZpZWxkczplfSl7Y29uc3QgdD1PYmplY3QuYXNzaWduKHt9LGUpO2RlbGV0ZSB0LmNhcmROYW1lRmllbGQ7Y29uc3Qgbj1PYmplY3Qua2V5cyh0KTtyZXR1cm57aXNWYWxpZDpuLmV2ZXJ5KGU9Pnt2YXIgbjtyZXR1cm4gbnVsbD09PShuPXRbZV0pfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmlzVmFsaWR9KSxlcnJvcnM6bi5yZWR1Y2UoKGUsbik9Pnt2YXIgaTtjb25zdCByPXRoaXMubWFwRmllbGRUeXBlKG4pO3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse1tyXToobnVsbD09PShpPXRbbl0pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmlzVmFsaWQpP3ZvaWQgMDpbdGhpcy5nZXRJbnZhbGlkRXJyb3JCeUZpZWxkVHlwZShyKV19KX0se30pfX1nZXRJbnZhbGlkRXJyb3JCeUZpZWxkVHlwZShlKXtzd2l0Y2goZSl7Y2FzZSBoYy5DYXJkQ29kZTpjYXNlIGhjLkNhcmRDb2RlVmVyaWZpY2F0aW9uOnJldHVybntmaWVsZFR5cGU6ZSxtZXNzYWdlOlwiSW52YWxpZCBjYXJkIGNvZGVcIix0eXBlOlwiaW52YWxpZF9jYXJkX2NvZGVcIn07Y2FzZSBoYy5DYXJkTnVtYmVyOmNhc2UgaGMuQ2FyZE51bWJlclZlcmlmaWNhdGlvbjpyZXR1cm57ZmllbGRUeXBlOmUsbWVzc2FnZTpcIkludmFsaWQgY2FyZCBudW1iZXJcIix0eXBlOlwiaW52YWxpZF9jYXJkX251bWJlclwifTtjYXNlIGhjLkNhcmRFeHBpcnk6Y2FzZSBoYy5DYXJkRXhwaXJ5VmVyaWZpY2F0aW9uOnJldHVybntmaWVsZFR5cGU6ZSxtZXNzYWdlOlwiSW52YWxpZCBjYXJkIGV4cGlyeVwiLHR5cGU6XCJpbnZhbGlkX2NhcmRfZXhwaXJ5XCJ9O2RlZmF1bHQ6cmV0dXJue2ZpZWxkVHlwZTplLG1lc3NhZ2U6XCJJbnZhbGlkIGZpZWxkXCIsdHlwZTpcImludmFsaWRcIn19fW1hcFZhbGlkYXRpb25FcnJvcnMoZT17fSl7Y29uc3QgdD17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChuPT57dmFyIGkscjt0W25dPVt7bWVzc2FnZToobnVsbD09PShyPW51bGw9PT0oaT1lW25dKXx8dm9pZCAwPT09aT92b2lkIDA6aVswXSl8fHZvaWQgMD09PXI/dm9pZCAwOnIubWVzc2FnZSl8fFwiXCIsdHlwZTpufV19KSx0fW1hcEZpZWxkVHlwZShlKXtzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVybiBoYy5DYXJkTmFtZTtjYXNlXCJjYXJkTnVtYmVyRmllbGRcIjpjYXNlXCJudW1iZXJcIjpyZXR1cm4gdGhpcy5pc0NyZWRpdENhcmRGb3JtP2hjLkNhcmROdW1iZXI6aGMuQ2FyZE51bWJlclZlcmlmaWNhdGlvbjtjYXNlXCJjYXJkRXhwaXJ5RmllbGRcIjpjYXNlXCJleHBpcnlcIjpyZXR1cm4gdGhpcy5pc0NyZWRpdENhcmRGb3JtP2hjLkNhcmRFeHBpcnk6aGMuQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbjtjYXNlXCJjYXJkQ3Z2RmllbGRcIjpjYXNlXCJjdnZcIjpyZXR1cm4gdGhpcy5pc0NyZWRpdENhcmRGb3JtP2hjLkNhcmRDb2RlOmhjLkNhcmRDb2RlVmVyaWZpY2F0aW9uO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBmaWVsZCB0eXBlXCIpfX1nZXRDYXJkRmllbGRzT3JUaHJvdygpe2lmKCF0aGlzLmNhcmRGaWVsZHMpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7cmV0dXJuIHRoaXMuY2FyZEZpZWxkc31nZXRJbnB1dFN0eWxlcyhlKXt2YXIgdCxuLGk7Y29uc3Qgcj17XCJmb250LXNpemVcIjoobnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuZGVmYXVsdCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZm9udFNpemUpfHxcIjFyZW1cIixcImZvbnQtZmFtaWx5XCI6KG51bGw9PT0obj1udWxsPT1lP3ZvaWQgMDplLmRlZmF1bHQpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmZvbnRGYW1pbHkpfHxcIk1vbnRzZXJyYXQsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWZcIixcImZvbnQtd2VpZ2h0XCI6KG51bGw9PT0oaT1udWxsPT1lP3ZvaWQgMDplLmRlZmF1bHQpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmZvbnRXZWlnaHQpfHxcIjQwMFwiLG91dGxpbmU6XCJub25lXCIscGFkZGluZzpcIjlweCAxM3B4XCJ9LG89T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHIpLHtjb2xvcjpcIiMzMzMzMzNcIn0pO3JldHVybntpbnB1dDpvLFwiLmludmFsaWRcIjpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse2NvbG9yOlwicmVkXCJ9KSxcIi52YWxpZFwiOm8sXCI6Zm9jdXNcIjpvfX1zdHlsaXplSW5wdXRDb250YWluZXJzKGUpe09iamVjdC52YWx1ZXMoZXx8e30pLmZvckVhY2goZT0+e2NvbnN0IHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7KG51bGw9PWU/dm9pZCAwOmUuY29udGFpbmVySWQpfHxcIlwifWApO3QmJih0LnN0eWxlLnBhZGRpbmc9XCIwcHhcIix0LnN0eWxlLmJveFNoYWRvdz1cIm5vbmVcIix0LnN0eWxlLmJvcmRlcj1cIm5vbmVcIix0LnN0eWxlLmJhY2tncm91bmQ9XCJ0cmFuc3BhcmVudFwiLHQuc3R5bGUubWFyZ2luQm90dG9tPVwiMTBweFwiLHQuc3R5bGUubWFyZ2luTGVmdD1cIi01cHhcIil9KX1oYXNVbmRlZmluZWRWYWx1ZXMoKXtyZXR1cm4hdGhpcy5ob3N0ZWRGb3JtT3B0aW9uc3x8T2JqZWN0LnZhbHVlcyh0aGlzLmhvc3RlZEZvcm1PcHRpb25zLmZpZWxkcykuc29tZShlPT52b2lkIDA9PT1lKX1vbkNoYW5nZUhhbmRsZXIoZSx0KXt2YXIgbjtudWxsPT09KG49bnVsbD09ZT92b2lkIDA6ZS5vblZhbGlkYXRlKXx8dm9pZCAwPT09bnx8bi5jYWxsKGUsdGhpcy5nZXRWYWxpZGl0eURhdGEodCkpfW9uRm9jdXNIYW5kbGVyKGUsdCl7dmFyIG47bnVsbD09PShuPW51bGw9PWU/dm9pZCAwOmUub25Gb2N1cyl8fHZvaWQgMD09PW58fG4uY2FsbChlLHRoaXMuZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQodCkpfW9uQmx1ckhhbmRsZXIoZSx0KXt2YXIgbjtudWxsPT09KG49bnVsbD09ZT92b2lkIDA6ZS5vbkJsdXIpfHx2b2lkIDA9PT1ufHxuLmNhbGwoZSx0aGlzLmdldEZpZWxkVHlwZUJ5RW1pdHRlZEZpZWxkKHQpKX1vbklucHV0U3VibWl0UmVxdWVzdChlLHQpe3ZhciBuO251bGw9PT0obj1udWxsPT1lP3ZvaWQgMDplLm9uRW50ZXIpfHx2b2lkIDA9PT1ufHxuLmNhbGwoZSx0aGlzLmdldEZpZWxkVHlwZUJ5RW1pdHRlZEZpZWxkKHQpKX1zaG91bGRJbml0aWFsaXplUGF5UGFsRmFzdGxhbmUoZSl7dmFyIHQsbjtjb25zdCBpPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHI9aS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKSxvPWkuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoKSxhPShzPW8pJiYoXCJhdXRoZW50aWNhdGlvblN0YXRlXCJpbiBzfHxcImFkZHJlc3Nlc1wiaW4gc3x8XCJpbnN0cnVtZW50c1wiaW4gcyk/bzp7fTt2YXIgcztyZXR1cm4obnVsbD09PSh0PW51bGw9PXI/dm9pZCAwOnIuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5pc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkKSYmKG51bGw9PT0obj1udWxsPT1yP3ZvaWQgMDpyLmluaXRpYWxpemF0aW9uRGF0YSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uaXNCaWdDb21tZXJjZVBheW1lbnRzQW5hbHl0aWNzVjJFbmFibGVkKSYmIShudWxsPT1hP3ZvaWQgMDphLmF1dGhlbnRpY2F0aW9uU3RhdGUpfWluaXRpYWxpemVQYXlQYWxGYXN0bGFuZU9yVGhyb3coZSl7cmV0dXJuIHljKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7Y29uc3QgdD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxuPXQuZ2V0Q2FydE9yVGhyb3coKSxpPXQuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSkse2luaXRpYWxpemF0aW9uRGF0YTpyfT1pO2lmKCEobnVsbD09cj92b2lkIDA6ci5jb25uZWN0Q2xpZW50VG9rZW4pKXJldHVybjtjb25zdCBvPXlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1Nkay5nZXRQYXlQYWxGYXN0bGFuZVNkayhpLG4uY3VycmVuY3kuY29kZSxuLmlkKTt5aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShvLCEhKG51bGw9PXI/dm9pZCAwOnIuaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSkpfWNhdGNoKGUpe319KX19Y29uc3QgdmM9bm4oZT0+bmV3IGdjKGUsc2koZSksQ2koKSxPaSgpKSxbe2lkOlwiYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHNcIn1dKTt2YXIgZmM9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgU2N7Y29uc3RydWN0b3IoZSx0LG4saSxyPTNlMyxvPTNlNSl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzU2RrSGVscGVyPW4sdGhpcy5sb2FkaW5nSW5kaWNhdG9yPWksdGhpcy5wb2xsaW5nSW50ZXJ2YWw9cix0aGlzLm1heFBvbGxpbmdJbnRlcnZhbFRpbWU9byx0aGlzLnBvbGxpbmdUaW1lcj0wLHRoaXMuc3RvcFBvbGxpbmc9Vix0aGlzLmlzUG9sbGluZ0VuYWJsZWQ9ITF9aW5pdGlhbGl6ZShlKXtyZXR1cm4gZmModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e2dhdGV3YXlJZDp0LG1ldGhvZElkOm4sYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtczppfT1lO2lmKHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kcz1pLCFuKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighdCl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFpKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19hcG1zXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0IHI9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksbz1yLmdldFBheW1lbnRNZXRob2RPclRocm93KG4sdCkse29yZGVySWQ6YSxzaG91bGRSZW5kZXJGaWVsZHM6c309by5pbml0aWFsaXphdGlvbkRhdGF8fHt9LGQ9ci5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzO3RoaXMuaXNQb2xsaW5nRW5hYmxlZD1jbihkLFwiUEFZUEFMLTU2MjQuYmNwX2lkZWFsX3BvbGxpbmdcIiksYT90aGlzLm9yZGVySWQ9YToodGhpcy5wYXlwYWxBcG1zPXlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1Nka0hlbHBlci5nZXRQYXlQYWxBcG1zU2RrKG8sci5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGUpLHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj1pLmNvbnRhaW5lci5zcGxpdChcIiNcIilbMV0sdGhpcy5yZW5kZXJCdXR0b24obix0LGkpLHMmJnRoaXMucmVuZGVyRmllbGRzKG4saSkpfSl9ZXhlY3V0ZShlLHQpe3JldHVybiBmYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pO2lmKCFuKXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTtjb25zdHttZXRob2RJZDpyLGdhdGV3YXlJZDpvfT1uO2lmKCF0aGlzLm9yZGVySWQpdGhyb3cgbmV3IEJpO3RoaXMuaXNQb2xsaW5nRW5hYmxlZCYmXCJpZGVhbFwiPT09ciYmKHlpZWxkIG5ldyBQcm9taXNlKChlLHQpPT57dGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShyLGUsdCxvKX0pKSx0aGlzLmlzTm9uSW5zdGFudFBheW1lbnRNZXRob2Qocil8fCh5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KSkseWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocix0aGlzLm9yZGVySWQsbyl9KX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfWRlaW5pdGlhbGl6ZSgpe3ZhciBlO3JldHVybiB0aGlzLm9yZGVySWQ9dm9pZCAwLHRoaXMuaXNQb2xsaW5nRW5hYmxlZCYmdGhpcy5yZXNldFBvbGxpbmdNZWNoYW5pc20oKSxudWxsPT09KGU9dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uKXx8dm9pZCAwPT09ZXx8ZS5jbG9zZSgpLFByb21pc2UucmVzb2x2ZSgpfWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKGUsdCxuLGkpe3JldHVybiBmYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgbmV3IFByb21pc2UoKGUsdCk9Pntjb25zdCBuPXNldFRpbWVvdXQoZSx0aGlzLnBvbGxpbmdJbnRlcnZhbCk7dGhpcy5zdG9wUG9sbGluZz0oKT0+KGNsZWFyVGltZW91dChuKSx0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITEpLHQoKSl9KTt0cnl7dGhpcy5wb2xsaW5nVGltZXIrPXRoaXMucG9sbGluZ0ludGVydmFsO2NvbnN0IHI9eWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldE9yZGVyU3RhdHVzKGkpLG89cj09PUpuLkFwcHJvdmVkLGE9cj09PUpuLlBvbGxpbmdFcnJvcjtpZihvKXJldHVybiB0aGlzLmRlSW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKSx0KCk7aWYoYSlyZXR1cm4gbigpO2lmKCFvJiZ0aGlzLnBvbGxpbmdUaW1lcjx0aGlzLm1heFBvbGxpbmdJbnRlcnZhbFRpbWUpcmV0dXJuIHlpZWxkIHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oZSx0LG4saSk7eWllbGQgdGhpcy5yZWluaXRpYWxpemVTdHJhdGVneSh7bWV0aG9kSWQ6ZSxnYXRld2F5SWQ6aSxiaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzOnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc30pLHRoaXMuaGFuZGxlRXJyb3IobmV3IHNjKX1jYXRjaChlKXtuKCl9fSl9ZGVJbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpe3RoaXMuc3RvcFBvbGxpbmcoKSx0aGlzLnBvbGxpbmdUaW1lcj0wfXJlc2V0UG9sbGluZ01lY2hhbmlzbSgpe3RoaXMuZGVJbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpfXJlaW5pdGlhbGl6ZVN0cmF0ZWd5KGUpe3JldHVybiBmYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5kZWluaXRpYWxpemUoKSx5aWVsZCB0aGlzLmluaXRpYWxpemUoZSl9KX1oYW5kbGVFcnJvcihlKXtjb25zdHtvbkVycm9yOnR9PXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc3x8e307dGhpcy5pc1BvbGxpbmdFbmFibGVkJiZ0aGlzLnJlc2V0UG9sbGluZ01lY2hhbmlzbSgpLHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdChlKX1yZW5kZXJCdXR0b24oZSx0LG4pe2NvbnN0IGk9dGhpcy5nZXRQYXlwYWxBbXBzU2RrT3JUaHJvdygpLHI9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSx0KSx7YnV0dG9uU3R5bGU6b309ci5pbml0aWFsaXphdGlvbkRhdGF8fHt9LHtjb250YWluZXI6YSxvbkVycm9yOnMsb25SZW5kZXJCdXR0b246ZCxzdWJtaXRGb3JtOmN9PW4sbD17ZnVuZGluZ1NvdXJjZTplLHN0eWxlOnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKG8pLG9uSW5pdDooZSx0KT0+bi5vbkluaXRCdXR0b24odCksY3JlYXRlT3JkZXI6KCk9PnRoaXMub25DcmVhdGVPcmRlcihlLHQsbiksb25BcHByb3ZlOmU9PnRoaXMuaGFuZGxlQXBwcm92ZShlLGMpLG9uQ2FuY2VsOigpPT57dGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCExKSx0aGlzLmRlSW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKX0sb25FcnJvcjplPT57dGhpcy5kZUluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCksdGhpcy5oYW5kbGVGYWlsdXJlKGUscyl9LG9uQ2xpY2s6KGUsdCk9PmZjKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gbi5vblZhbGlkYXRlKHQucmVzb2x2ZSx0LnJlamVjdCl9KX07dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uPWkuQnV0dG9ucyhsKSx0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b24uaXNFbGlnaWJsZSgpJiYoZCYmXCJmdW5jdGlvblwiPT10eXBlb2YgZCYmZCgpLHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbi5yZW5kZXIoYSkpfW9uQ3JlYXRlT3JkZXIoZSx0LG4pe3JldHVybiBmYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7b25WYWxpZGF0ZTppfT1uO3lpZWxkIGkoKCk9Pih0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITApLCgpPT5Qcm9taXNlLnJlc29sdmUoKSksVik7Y29uc3Qgcj15aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXCJiaWdjb21tZXJjZV9wYXltZW50c19hcG1zXCIpO2lmKHRoaXMuaXNOb25JbnN0YW50UGF5bWVudE1ldGhvZChlKSl7Y29uc3Qgbj17dXNlU3RvcmVDcmVkaXQ6ITF9LGk9e3BhcmFtczp7bWV0aG9kSWQ6ZSxnYXRld2F5SWQ6dH19O3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihuLGkpLHlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KGUscix0KX1yZXR1cm4gcn0pfWhhbmRsZUFwcHJvdmUoe29yZGVySUQ6ZX0sdCl7dGhpcy5vcmRlcklkPWUsdCgpfWhhbmRsZUZhaWx1cmUoZSx0KXt0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITEpLHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQoZSl9cmVuZGVyRmllbGRzKGUsdCl7Y29uc3Qgbj10aGlzLmdldFBheXBhbEFtcHNTZGtPclRocm93KCksaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx7Zmlyc3ROYW1lOnIsbGFzdE5hbWU6byxlbWFpbDphfT1pLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpLHthcG1GaWVsZHNDb250YWluZXI6cyxhcG1GaWVsZHNTdHlsZXM6ZH09dDtpZighcyl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtc1wiIGFyZ3VtZW50IHNob3VsZCBjb250YWluIFwiYXBtRmllbGRzQ29udGFpbmVyXCIuJyk7Y29uc3QgYz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHMpO2MmJihjLmlubmVySFRNTD1cIlwiKTtjb25zdCBsPXtmdW5kaW5nU291cmNlOmUsc3R5bGU6ZHx8e30sZmllbGRzOntuYW1lOnt2YWx1ZTpgJHtyfSAke299YH0sZW1haWw6e3ZhbHVlOmF9fX07bi5QYXltZW50RmllbGRzKGwpLnJlbmRlcihzKX10b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGUpe2UmJnRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj90aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpOnRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCl9aXNOb25JbnN0YW50UGF5bWVudE1ldGhvZChlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpaW4gS259Z2V0UGF5cGFsQW1wc1Nka09yVGhyb3coKXtpZighdGhpcy5wYXlwYWxBcG1zKXRocm93IG5ldyBYdDtyZXR1cm4gdGhpcy5wYXlwYWxBcG1zfX1jb25zdCBfYz1ubihlPT5uZXcgU2MoZSxzaShlKSxDaSgpLG5ldyBCYSh7Y29udGFpbmVyU3R5bGVzOllkfSkpLFt7Z2F0ZXdheTpcImJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXNcIn1dKTt2YXIgd2M9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgQ2N7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZT10LHRoaXMubG9hZGluZ0luZGljYXRvcj1ufWluaXRpYWxpemUoZSl7dmFyIHQsbjtyZXR1cm4gd2ModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOmksYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW86cn09ZXx8e307aWYoIWkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFyKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c192ZW5tb1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoaSk7Y29uc3Qgbz10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhpKTsobnVsbD09PSh0PW8uaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5vcmRlcklkKT90aGlzLm9yZGVySWQ9bnVsbD09PShuPW8uaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09bj92b2lkIDA6bi5vcmRlcklkOih5aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhpKSx0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI9ci5jb250YWluZXIuc3BsaXQoXCIjXCIpWzFdLHRoaXMucmVuZGVyQnV0dG9uKGkscikpfSl9ZXhlY3V0ZShlLHQpe3JldHVybiB3Yyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pO2lmKCFuKXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTtpZighdGhpcy5vcmRlcklkKXRocm93IG5ldyBCaTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KSx5aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChuLm1ldGhvZElkLHRoaXMub3JkZXJJZCl9KX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfWRlaW5pdGlhbGl6ZSgpe3ZhciBlO3JldHVybiB0aGlzLm9yZGVySWQ9dm9pZCAwLG51bGw9PT0oZT10aGlzLnBheXBhbEJ1dHRvbil8fHZvaWQgMD09PWV8fGUuY2xvc2UoKSxQcm9taXNlLnJlc29sdmUoKX1yZW5kZXJCdXR0b24oZSx0KXtjb25zdCBuPXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCksaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKSx7cGF5bWVudEJ1dHRvblN0eWxlczpyfT1pLmluaXRpYWxpemF0aW9uRGF0YXx8e30se2NoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlczpvfT1yfHx7fSx7Y29udGFpbmVyOmEsb25FcnJvcjpzLG9uUmVuZGVyQnV0dG9uOmQsb25WYWxpZGF0ZTpjLHN1Ym1pdEZvcm06bH09dCx1PXtmdW5kaW5nU291cmNlOm4uRlVORElORy5WRU5NTyxzdHlsZTp0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShvKSxjcmVhdGVPcmRlcjooKT0+dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFwiYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW9fY2hlY2tvdXRcIiksb25DbGljazooZSx0KT0+dGhpcy5oYW5kbGVDbGljayh0LGMpLG9uQXBwcm92ZTplPT50aGlzLmhhbmRsZUFwcHJvdmUoZSxsKSxvbkNhbmNlbDooKT0+dGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCExKSxvbkVycm9yOmU9PnRoaXMuaGFuZGxlRXJyb3IoZSxzKX07aWYodGhpcy5wYXlwYWxCdXR0b249bi5CdXR0b25zKHUpLCF0aGlzLnBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpdGhyb3cgbmV3IG9uKFwiVmVubW8gaXMgbm90IGF2YWlsYWJsZSBmb3IgeW91ciByZWdpb24uIFBsZWFzZSBhbm90aGVyIHBheW1lbnQgbWV0aG9kIGluc3RlYWQuXCIpO2QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGQmJmQoKSx0aGlzLnBheXBhbEJ1dHRvbi5yZW5kZXIoYSl9aGFuZGxlQ2xpY2soZSx0KXtyZXR1cm4gd2ModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3Jlc29sdmU6bixyZWplY3Q6aX09ZTt5aWVsZCB0KCgpPT4odGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCEwKSxuKCkpLGkpfSl9aGFuZGxlQXBwcm92ZSh7b3JkZXJJRDplfSx0KXt0aGlzLm9yZGVySWQ9ZSx0KCksdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCExKX1oYW5kbGVFcnJvcihlLHQpe3RoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdChlKX10b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGUpe2UmJnRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj90aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpOnRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCl9fWNvbnN0IEljPW5uKGU9Pm5ldyBDYyhlLHNpKGUpLG5ldyBCYSh7c3R5bGVzOntiYWNrZ3JvdW5kQ29sb3I6XCJibGFja1wifX0pKSxbe2lkOlwiYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW9cIn1dKTtjbGFzcyBiY3tpbml0aWFsaXplKGUpe3RoaXMuX2JsdWVTbmFwU2RrPWV9aW5pdGlhbGl6ZTNkcyhlLHQpe3JldHVybiBuPXRoaXMsaT12b2lkIDAsbz1mdW5jdGlvbiooKXtjb25zdCBuPXRoaXMuX2dldEJsdWVTbmFwU2RrKCk7cmV0dXJuIG5ldyBQcm9taXNlKChpLHIpPT57bi50aHJlZURzUGF5bWVudHNTZXR1cChlLGU9PlwiMVwiPT09ZS5jb2RlP2koZS50aHJlZURTZWN1cmUudGhyZWVEU2VjdXJlUmVmZXJlbmNlSWQpOnIobmV3IExpKSksbi50aHJlZURzUGF5bWVudHNTdWJtaXREYXRhKHQpfSl9LG5ldygocj12b2lkIDApfHwocj1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBhKGUpe3RyeXtkKG8ubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChvLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIHI/bjpuZXcgcihmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChvPW8uYXBwbHkobixpfHxbXSkpLm5leHQoKSl9KTt2YXIgbixpLHIsb31fZ2V0Qmx1ZVNuYXBTZGsoKXtyZXR1cm4gcXQodGhpcy5fYmx1ZVNuYXBTZGssKCk9Pm5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKX19ZnVuY3Rpb24gUGMoZSl7cmV0dXJuIGhjLkNhcmROdW1iZXIgaW4gZX1mdW5jdGlvbiBPYyhlKXtyZXR1cm4gaGMuQ2FyZENvZGVWZXJpZmljYXRpb24gaW4gZXx8aGMuQ2FyZE51bWJlclZlcmlmaWNhdGlvbiBpbiBlfXZhciBFYyxBYyxrYyxUYyxEYyxNYz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyB6Y3tjb25zdHJ1Y3RvcihlLHQsbixpKXt0aGlzLl9zY3JpcHRMb2FkZXI9ZSx0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5fYmx1ZVNuYXBEaXJlY3RIb3N0ZWRGb3JtPW4sdGhpcy5fYmx1ZVNuYXBEaXJlY3QzZHM9aX1pbml0aWFsaXplKGUpe3JldHVybiBNYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bWV0aG9kSWQ6dCxnYXRld2F5SWQ6bixjcmVkaXRDYXJkOml9PWU7aWYoIW58fCFpKXRocm93IG5ldyBybjtjb25zdCByPXlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2Qobix7cGFyYW1zOnttZXRob2Q6dCxiaWdwYXlUb2tlbjppLmJpZ3BheVRva2VufX0pLHtjb25maWc6e3Rlc3RNb2RlOm8saXMzZHNFbmFibGVkOmF9LGNsaWVudFRva2VuOnN9PXIuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codCxuKTt0aGlzLl9ibHVlU25hcFNkaz15aWVsZCB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZChvKSx0aGlzLl9wYXltZW50RmllbGRzVG9rZW49cyx0aGlzLl9zaG91bGRVc2VIb3N0ZWRGaWVsZHM9UGMoaS5mb3JtLmZpZWxkcyl8fE9jKGkuZm9ybS5maWVsZHMpJiYhIWkuZm9ybS5maWVsZHMuY2FyZE51bWJlclZlcmlmaWNhdGlvbix0aGlzLl9zaG91bGRVc2VIb3N0ZWRGaWVsZHMmJih0aGlzLl9ibHVlU25hcERpcmVjdEhvc3RlZEZvcm0uaW5pdGlhbGl6ZSh0aGlzLl9ibHVlU25hcFNkayxpLmZvcm0uZmllbGRzKSx5aWVsZCB0aGlzLl9ibHVlU25hcERpcmVjdEhvc3RlZEZvcm0uYXR0YWNoKHRoaXMuX2dldFBheW1lbnRGaWVsZHNUb2tlbigpLGksYSkpfSl9ZXhlY3V0ZShlKXtyZXR1cm4gTWModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFlLnBheW1lbnQpdGhyb3cgbmV3IFlpKFtcInBheW1lbnRcIl0pO2lmKCF0aGlzLl9ibHVlU25hcFNkayl0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiXSk7Y29uc3R7cGF5bWVudERhdGE6dH09ZS5wYXltZW50LHtzaG91bGRTYXZlSW5zdHJ1bWVudDpuLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6aX09UGQodCk/dDp7c2hvdWxkU2F2ZUluc3RydW1lbnQ6ITEsc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDohMX0scj10aGlzLl9nZXRQYXltZW50RmllbGRzVG9rZW4oKTtsZXQgbztjb25zdHtpczNkc0VuYWJsZWQ6YX09dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KGUucGF5bWVudC5tZXRob2RJZCxlLnBheW1lbnQuZ2F0ZXdheUlkKS5jb25maWcscz10aGlzLl9zaG91bGRVc2VIb3N0ZWRGaWVsZHM/eWllbGQgdGhpcy5fYmx1ZVNuYXBEaXJlY3RIb3N0ZWRGb3JtLnZhbGlkYXRlKCkuc3VibWl0KGE/dGhpcy5fZ2V0Qmx1ZVNuYXBEaXJlY3RUaHJlZURTZWN1cmVEYXRhKCk6dm9pZCAwLCEoUGQodCkmJlNkKHQpKSk6dm9pZCAwO2lmKHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoKSxQZCh0KSYmU2QodCkmJnRoaXMuX3BheW1lbnRGaWVsZHNUb2tlbiYmdC5pbnN0cnVtZW50SWQpe2lmKGEpe3RoaXMuX2JsdWVTbmFwRGlyZWN0M2RzLmluaXRpYWxpemUodGhpcy5fYmx1ZVNuYXBTZGspO2NvbnN0e2xhc3Q0OmUsYnJhbmQ6bn09dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcmRJbnN0cnVtZW50T3JUaHJvdyh0Lmluc3RydW1lbnRJZCksaT1PYmplY3QuYXNzaWduKHtsYXN0NERpZ2l0czplLGNjVHlwZTpuLnRvVXBwZXJDYXNlKCl9LHRoaXMuX2dldEJsdWVTbmFwRGlyZWN0VGhyZWVEU2VjdXJlRGF0YSgpKTtvPXlpZWxkIHRoaXMuX2JsdWVTbmFwRGlyZWN0M2RzLmluaXRpYWxpemUzZHModGhpcy5fcGF5bWVudEZpZWxkc1Rva2VuLGkpfXlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZS5wYXltZW50KSx7cGF5bWVudERhdGE6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe2luc3RydW1lbnRJZDp0Lmluc3RydW1lbnRJZH0sdGhpcy5fc2hvdWxkVXNlSG9zdGVkRmllbGRzP3tub25jZTpyfTp7fSksbz97ZGV2aWNlU2Vzc2lvbklkOm99Ont9KSx7c2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDohIWl9KX0pKX1lbHNlIHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZS5wYXltZW50KSx7cGF5bWVudERhdGE6e2Zvcm1hdHRlZFBheWxvYWQ6e2NyZWRpdF9jYXJkX3Rva2VuOnt0b2tlbjpKU09OLnN0cmluZ2lmeSh7cGZUb2tlbjpyLGNhcmRIb2xkZXJOYW1lOnMmJnMuY2FyZEhvbGRlck5hbWV9KX0sdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50Om4sc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6aX19fSkpfSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gdGhpcy5fc2hvdWxkVXNlSG9zdGVkRmllbGRzJiZ0aGlzLl9ibHVlU25hcERpcmVjdEhvc3RlZEZvcm0uZGV0YWNoKCksUHJvbWlzZS5yZXNvbHZlKCl9X2dldEJsdWVTbmFwRGlyZWN0VGhyZWVEU2VjdXJlRGF0YSgpe3ZhciBlO2NvbnN0e2dldEJpbGxpbmdBZGRyZXNzOnQsZ2V0U2hpcHBpbmdBZGRyZXNzOm4sZ2V0Q3VzdG9tZXI6aSxnZXRDaGVja291dE9yVGhyb3c6cixnZXRDYXJ0T3JUaHJvdzpvfT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksYT10KCkscz1uKCksZD0obnVsbD09PShlPWkoKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuZW1haWwpfHwobnVsbD09YT92b2lkIDA6YS5lbWFpbCksYz0obnVsbD09YT92b2lkIDA6YS5waG9uZSl8fChudWxsPT1zP3ZvaWQgMDpzLnBob25lKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7YW1vdW50OnIoKS5vdXRzdGFuZGluZ0JhbGFuY2UsY3VycmVuY3k6bygpLmN1cnJlbmN5LmNvZGV9LGQmJntlbWFpbDpkfSksYyYme3Bob25lOmN9KSxhJiZ7YmlsbGluZ0ZpcnN0TmFtZTphLmZpcnN0TmFtZSxiaWxsaW5nTGFzdE5hbWU6YS5sYXN0TmFtZSxiaWxsaW5nQ291bnRyeTphLmNvdW50cnlDb2RlLGJpbGxpbmdDaXR5OmEuY2l0eSxiaWxsaW5nQWRkcmVzczpgJHthLmFkZHJlc3MxfSAke2EuYWRkcmVzczJ9YC50cmltKCksYmlsbGluZ1ppcDphLnBvc3RhbENvZGV9KSxzJiZ7c2hpcHBpbmdGaXJzdE5hbWU6cy5maXJzdE5hbWUsc2hpcHBpbmdMYXN0TmFtZTpzLmxhc3ROYW1lLHNoaXBwaW5nQ291bnRyeTpzLmNvdW50cnlDb2RlLHNoaXBwaW5nQ2l0eTpzLmNpdHksc2hpcHBpbmdBZGRyZXNzOmAke3MuYWRkcmVzczF9ICR7cy5hZGRyZXNzMn1gLnRyaW0oKSxzaGlwcGluZ1ppcDpzLnBvc3RhbENvZGV9KX1fZ2V0UGF5bWVudEZpZWxkc1Rva2VuKCl7cmV0dXJuIHF0KHRoaXMuX3BheW1lbnRGaWVsZHNUb2tlbiwoKT0+bmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50VG9rZW4pKX19IWZ1bmN0aW9uKGUpe2UuQU1FWD1cImFtZXJpY2FuLWV4cHJlc3NcIixlLkNISU5BX1VOSU9OX1BBWT1cInVuaW9ucGF5XCIsZS5ESU5FUlM9XCJkaW5lcnMtY2x1YlwiLGUuRElTQ09WRVI9XCJkaXNjb3ZlclwiLGUuSkNCPVwiamNiXCIsZS5NQVNURVJDQVJEPVwibWFzdGVyY2FyZFwiLGUuVU5LTk9XTj1cInVua25vd25cIixlLlZJU0E9XCJ2aXNhXCJ9KEVjfHwoRWM9e30pKSxmdW5jdGlvbihlKXtlLk9OX0JMVVI9XCJvbkJsdXJcIixlLk9OX1NVQk1JVD1cIm9uU3VibWl0XCJ9KEFjfHwoQWM9e30pKSxmdW5jdGlvbihlKXtlLkVNUFRZPVwiZW1wdHlcIixlLklOVkFMSUQ9XCJpbnZhbGlkXCIsZS5USFJFRV9EU19OT1RfRU5BQkxFRD1cIjNEIFNlY3VyZSBpcyBub3QgZW5hYmxlZFwifShrY3x8KGtjPXt9KSksZnVuY3Rpb24oZSl7ZS5DQ19OT1RfU1VQT1JURUQ9XCIyMjAxM1wiLGUuRVJST1JfNDAzPVwiNDAzXCIsZS5FUlJPUl80MDQ9XCI0MDRcIixlLkVSUk9SXzUwMD1cIjUwMFwiLGUuSU5WQUxJRF9PUl9FTVBUWT1cIjEwXCIsZS5TRVNTSU9OX0VYUElSRUQ9XCI0MDBcIixlLlRIUkVFX0RTX0FVVEhfRkFJTEVEPVwiMTQxMDFcIixlLlRIUkVFX0RTX0NMSUVOVF9FUlJPUj1cIjE0MTAzXCIsZS5USFJFRV9EU19NSVNTSU5HX0ZJRUxEUz1cIjE0MTAyXCIsZS5USFJFRV9EU19OT1RfRU5BQkxFRD1cIjE0MTAwXCIsZS5UT0tFTl9FWFBJUkVEPVwiMTQwNDBcIixlLlRPS0VOX05PVF9BU1NPQ0lBVEVEPVwiMTQwNDJcIixlLlRPS0VOX05PVF9GT1VORD1cIjE0MDQxXCJ9KFRjfHwoVGM9e30pKSxmdW5jdGlvbihlKXtlLkNhcmRDb2RlPVwiY3Z2XCIsZS5DYXJkRXhwaXJ5PVwiZXhwXCIsZS5DYXJkTmFtZT1cIm5vY1wiLGUuQ2FyZE51bWJlcj1cImNjblwifShEY3x8KERjPXt9KSk7Y29uc3QgTmM9e1tEYy5DYXJkTnVtYmVyXTpoYy5DYXJkTnVtYmVyLFtEYy5DYXJkRXhwaXJ5XTpoYy5DYXJkRXhwaXJ5LFtEYy5DYXJkTmFtZV06aGMuQ2FyZE5hbWUsW0RjLkNhcmRDb2RlXTpoYy5DYXJkQ29kZX0seGM9e2VtcHR5OntbaGMuQ2FyZE51bWJlcl06e2ZpZWxkVHlwZTpcImNhcmROdW1iZXJcIixtZXNzYWdlOlwiQ3JlZGl0IGNhcmQgbnVtYmVyIGlzIHJlcXVpcmVkXCIsdHlwZTpcInJlcXVpcmVkXCJ9LFtoYy5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uXTp7ZmllbGRUeXBlOlwiY2FyZE51bWJlclwiLG1lc3NhZ2U6XCJDcmVkaXQgY2FyZCBudW1iZXIgaXMgcmVxdWlyZWRcIix0eXBlOlwicmVxdWlyZWRcIn0sW2hjLkNhcmRFeHBpcnldOntmaWVsZFR5cGU6XCJjYXJkRXhwaXJ5XCIsbWVzc2FnZTpcIkV4cGlyYXRpb24gZGF0ZSBpcyByZXF1aXJlZFwiLHR5cGU6XCJyZXF1aXJlZFwifSxbaGMuQ2FyZENvZGVdOntmaWVsZFR5cGU6XCJjYXJkQ29kZVwiLG1lc3NhZ2U6XCJDVlYgaXMgcmVxdWlyZWRcIix0eXBlOlwicmVxdWlyZWRcIn0sW2hjLkNhcmROYW1lXTp7ZmllbGRUeXBlOlwiY2FyZE5hbWVcIixtZXNzYWdlOlwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkXCIsdHlwZTpcInJlcXVpcmVkXCJ9fSxpbnZhbGlkOntbaGMuQ2FyZE51bWJlcl06e2ZpZWxkVHlwZTpcImNhcmROdW1iZXJcIixtZXNzYWdlOlwiQ3JlZGl0IGNhcmQgbnVtYmVyIG11c3QgYmUgdmFsaWRcIix0eXBlOlwiaW52YWxpZF9jYXJkX251bWJlclwifSxbaGMuQ2FyZE51bWJlclZlcmlmaWNhdGlvbl06e2ZpZWxkVHlwZTpcImNhcmROdW1iZXJcIixtZXNzYWdlOlwiQ3JlZGl0IGNhcmQgbnVtYmVyIG11c3QgYmUgdmFsaWRcIix0eXBlOlwiaW52YWxpZF9jYXJkX251bWJlclwifSxbaGMuQ2FyZEV4cGlyeV06e2ZpZWxkVHlwZTpcImNhcmRFeHBpcnlcIixtZXNzYWdlOlwiRXhwaXJhdGlvbiBkYXRlIG11c3QgYmUgYSB2YWxpZCBmdXR1cmUgZGF0ZSBpbiBNTSAvIFlZIGZvcm1hdFwiLHR5cGU6XCJpbnZhbGlkX2NhcmRfZXhwaXJ5XCJ9LFtoYy5DYXJkQ29kZV06e2ZpZWxkVHlwZTpcImNhcmRDb2RlXCIsbWVzc2FnZTpcIkNWViBtdXN0IGJlIHZhbGlkXCIsdHlwZTpcImludmFsaWRfY2FyZF9jb2RlXCJ9LFtoYy5DYXJkTmFtZV06e2ZpZWxkVHlwZTpcImNhcmROYW1lXCIsbWVzc2FnZTpcIkZ1bGwgbmFtZSBpcyByZXF1aXJlZFwiLHR5cGU6XCJyZXF1aXJlZFwifX19O2NsYXNzIEZje2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fbmFtZU9uQ2FyZElucHV0PWUsdGhpcy5faG9zdGVkSW5wdXRWYWxpZGF0b3I9dH1pbml0aWFsaXplKGUsdCl7dGhpcy5fYmx1ZVNuYXBTZGs9ZSx0JiYoUGModCk/dGhpcy5faG9zdGVkSW5wdXRWYWxpZGF0b3IuaW5pdGlhbGl6ZSgpOk9jKHQpJiZ0LmNhcmROdW1iZXJWZXJpZmljYXRpb24mJnRoaXMuX2hvc3RlZElucHV0VmFsaWRhdG9yLmluaXRpYWxpemVWYWxpZGF0aW9uRmllbGRzKCkpfWF0dGFjaChlLHQsbil7dmFyIGkscixvLGEscz10LmZvcm0se2ZpZWxkczpkfT1zLGM9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShzLFtcImZpZWxkc1wiXSk7cmV0dXJuIHZvaWQgMD09PW4mJihuPSExKSxpPXRoaXMscj12b2lkIDAsYT1mdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuX2dldEJsdWVTbmFwU2RrKCk7aWYoIVBjKGQpJiYhT2MoZCkpdGhyb3cgbmV3IHJuKFwiRmllbGQgb3B0aW9ucyBtdXN0IGJlIG9mIHR5cGUgSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcFwiKTtyZXR1cm4gdGhpcy5fb25WYWxpZGF0ZT1jLm9uVmFsaWRhdGUsUGMoZCkmJnRoaXMuX3NldEN1c3RvbUJsdWVTbmFwQXR0cmlidXRlcyhkKSxPYyhkKSYmdGhpcy5fc2V0Q3VzdG9tU3RvcmVkQ2FyZHNCbHVlU25hcEF0dHJpYnV0ZXMoZCksbmV3IFByb21pc2UoaT0+e2NvbnN0IHI9dGhpcy5fZ2V0SG9zdGVkUGF5bWVudEZpZWxkc09wdGlvbnMoZSxkLGMsaSxuKTt0Lmhvc3RlZFBheW1lbnRGaWVsZHNDcmVhdGUociksUGMoZCkmJnRoaXMuX25hbWVPbkNhcmRJbnB1dC5hdHRhY2gocixkLmNhcmROYW1lLmFjY2Vzc2liaWxpdHlMYWJlbCxkLmNhcmROYW1lLnBsYWNlaG9sZGVyKX0pfSxuZXcoKG89dm9pZCAwKXx8KG89UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXt0cnl7ZChhLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoYS50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgaTt0LmRvbmU/ZSh0LnZhbHVlKTooaT10LnZhbHVlLGkgaW5zdGFuY2VvZiBvP2k6bmV3IG8oZnVuY3Rpb24oZSl7ZShpKX0pKS50aGVuKG4scyl9ZCgoYT1hLmFwcGx5KGkscnx8W10pKS5uZXh0KCkpfSl9dmFsaWRhdGUoKXt2YXIgZTtjb25zdCB0PXRoaXMuX2hvc3RlZElucHV0VmFsaWRhdG9yLnZhbGlkYXRlKCk7aWYobnVsbD09PShlPXRoaXMuX29uVmFsaWRhdGUpfHx2b2lkIDA9PT1lfHxlLmNhbGwodGhpcyx0KSwhdC5pc1ZhbGlkKXtjb25zdCBlPU9iamVjdC5lbnRyaWVzKHQuZXJyb3JzKS5yZWR1Y2UoKGUsW3Qsbl0pPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse1t0XTpuLm1hcCgoe21lc3NhZ2U6ZSx0eXBlOnR9KT0+KHttZXNzYWdlOmUsdHlwZTp0fSkpfSkse30pO3Rocm93IG5ldyBLaShlKX1yZXR1cm4gdGhpc31zdWJtaXQoZSx0PSExKXtyZXR1cm4gbmV3IFByb21pc2UoKG4saSk9PnRoaXMuX2dldEJsdWVTbmFwU2RrKCkuaG9zdGVkUGF5bWVudEZpZWxkc1N1Ym1pdERhdGEoZT0+dGhpcy5faXNCbHVlU25hcERpcmVjdENhbGxiYWNrRXJyb3IoZSk/aShuZXcgTGkoZS5zdGF0dXNDb2RlPT09VGMuVEhSRUVfRFNfQVVUSF9GQUlMRUQ/ZS5lcnJvclswXS5lcnJvckRlc2NyaXB0aW9uOmBTdWJtaXNzaW9uIGZhaWxlZCB3aXRoIHN0YXR1czogJHtlLnN0YXR1c0NvZGV9IGFuZCBlcnJvcnM6ICR7SlNPTi5zdHJpbmdpZnkoZS5lcnJvcil9YCkpOm4oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUuY2FyZERhdGEpLHQ/e2NhcmRIb2xkZXJOYW1lOnRoaXMuX25hbWVPbkNhcmRJbnB1dC5nZXRWYWx1ZSgpfTp7fSkpLGUpKX1kZXRhY2goKXt0aGlzLl9uYW1lT25DYXJkSW5wdXQuZGV0YWNoKCl9X2lzQmx1ZVNuYXBEaXJlY3RDYWxsYmFja0Vycm9yKGUpe3JldHVyblwiZXJyb3JcImluIGV9X2dldEhvc3RlZFBheW1lbnRGaWVsZHNPcHRpb25zKGUsdCx7b25Gb2N1czpuLG9uQmx1cjppLG9uVmFsaWRhdGU6cixvbkNhcmRUeXBlQ2hhbmdlOm8sb25FbnRlcjphLHN0eWxlczpzfSxkLGMpe3ZhciBsO3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7dG9rZW46ZSxvbkZpZWxkRXZlbnRIYW5kbGVyOntzZXR1cENvbXBsZXRlOigpPT5kKCksb25Gb2N1czp0aGlzLl91c2V0VWlFdmVudENhbGxiYWNrKG4pLG9uQmx1cjp0aGlzLl91c2V0VWlFdmVudENhbGxiYWNrKGkpLG9uRXJyb3I6dGhpcy5faGFuZGxlRXJyb3Iociksb25UeXBlOihlLHQpPT5udWxsPT1vP3ZvaWQgMDpvKHtjYXJkVHlwZTpFY1t0XX0pLG9uRW50ZXI6dGhpcy5fdXNldFVpRXZlbnRDYWxsYmFjayhhKSxvblZhbGlkOmU9Pm51bGw9PXI/dm9pZCAwOnIodGhpcy5faG9zdGVkSW5wdXRWYWxpZGF0b3IudmFsaWRhdGUoe3RhZ0lkOmV9KSl9fSxQYyh0KSYme2NjblBsYWNlSG9sZGVyOnQuY2FyZE51bWJlci5wbGFjZWhvbGRlcnx8XCJcIixjdnZQbGFjZUhvbGRlcjoobnVsbD09PShsPXQuY2FyZENvZGUpfHx2b2lkIDA9PT1sP3ZvaWQgMDpsLnBsYWNlaG9sZGVyKXx8XCJcIixleHBQbGFjZUhvbGRlcjp0LmNhcmRFeHBpcnkucGxhY2Vob2xkZXJ8fFwiTU0gLyBZWVwifSkscyYme3N0eWxlOnRoaXMuX21hcFN0eWxlcyhzKX0pLHtcIjNEU1wiOmN9KX1fbWFwU3R5bGVzKHtkZWZhdWx0OmUsZXJyb3I6dCxmb2N1czpufSl7cmV0dXJuIE9iamVjdC5lbnRyaWVzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUmJntpbnB1dDplfSksdCYme1wiLmludmFsaWRcIjp0fSksbiYme1wiOmZvY3VzXCI6bn0pKS5yZWR1Y2UoKGUsW3Qsbl0pPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse1t0XTpPYmplY3QuZW50cmllcyhuKS5yZWR1Y2UoKGUsW3Qsbl0pPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse1t4KHQpXTpufSkse30pfSkse30pfV9oYW5kbGVFcnJvcihlKXtyZXR1cm4odCxuLGkscik9PntpZihuPT09VGMuSU5WQUxJRF9PUl9FTVBUWSYmdCYmZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJltrYy5FTVBUWSxrYy5JTlZBTElEXS5pbmNsdWRlcyhlKX0oaSkpcmV0dXJuIG51bGw9PWU/dm9pZCAwOmUodGhpcy5faG9zdGVkSW5wdXRWYWxpZGF0b3IudmFsaWRhdGUoe3RhZ0lkOnQsZXJyb3JEZXNjcmlwdGlvbjppfSkpO3Rocm93IG5ldyBMaShgQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoe3RhZ0lkOnQsZXJyb3JDb2RlOm4sZXJyb3JEZXNjcmlwdGlvbjppLGV2ZW50T3JpZ2luOnJ9KX1gKX19X3VzZXRVaUV2ZW50Q2FsbGJhY2soZSl7cmV0dXJuIHQ9PntlJiZlKHtmaWVsZFR5cGU6TmNbdF19KX19X2dldEJsdWVTbmFwU2RrKCl7cmV0dXJuIHF0KHRoaXMuX2JsdWVTbmFwU2RrLCgpPT5uZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKSl9X3NldEN1c3RvbUJsdWVTbmFwQXR0cmlidXRlcyhlKXtjb25zdHtjYXJkTnVtYmVyOnQsY2FyZEV4cGlyeTpuLGNhcmRDb2RlOmksY2FyZE5hbWU6cn09ZSxvPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuY29udGFpbmVySWQpLGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobi5jb250YWluZXJJZCkscz1pJiZkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpLmNvbnRhaW5lcklkKSxkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHIuY29udGFpbmVySWQpO2lmKCEobyYmYSYmcyYmZCkpdGhyb3cgbmV3IHJuKFwiVW5hYmxlIHRvIGNyZWF0ZSBob3N0ZWQgcGF5bWVudCBmaWVsZHMgdG8gaW52YWxpZCBIVE1MIGNvbnRhaW5lciBlbGVtZW50cy5cIik7by5kYXRhc2V0LmJsdWVzbmFwPURjLkNhcmROdW1iZXIsYS5kYXRhc2V0LmJsdWVzbmFwPURjLkNhcmRFeHBpcnkscy5kYXRhc2V0LmJsdWVzbmFwPURjLkNhcmRDb2RlLGQuZGF0YXNldC5ibHVlc25hcD1EYy5DYXJkTmFtZX1fc2V0Q3VzdG9tU3RvcmVkQ2FyZHNCbHVlU25hcEF0dHJpYnV0ZXMoZSl7Y29uc3R7Y2FyZE51bWJlclZlcmlmaWNhdGlvbjp0LGNhcmRDb2RlVmVyaWZpY2F0aW9uOm59PWUsaT10JiZkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0LmNvbnRhaW5lcklkKSxyPW4mJmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG4uY29udGFpbmVySWQpOyhpfHxyKSYmKGkmJihpLmRhdGFzZXQuYmx1ZXNuYXA9RGMuQ2FyZE51bWJlciksciYmKHIuZGF0YXNldC5ibHVlc25hcD1EYy5DYXJkQ29kZSkpfX1jbGFzcyBSY3tjb25zdHJ1Y3Rvcigpe3RoaXMuX2Vycm9ycz17fX1pbml0aWFsaXplKCl7dGhpcy5fZXJyb3JzPXtjYXJkTnVtYmVyOlt4Yy5lbXB0eS5jYXJkTnVtYmVyXSxjYXJkRXhwaXJ5Olt4Yy5lbXB0eS5jYXJkRXhwaXJ5XSxjYXJkQ29kZTpbeGMuZW1wdHkuY2FyZENvZGVdLGNhcmROYW1lOlt4Yy5lbXB0eS5jYXJkTmFtZV19fWluaXRpYWxpemVWYWxpZGF0aW9uRmllbGRzKCl7dGhpcy5fZXJyb3JzPXtjYXJkTnVtYmVyVmVyaWZpY2F0aW9uOlt4Yy5lbXB0eS5jYXJkTnVtYmVyXX19dmFsaWRhdGUoZSl7cmV0dXJuIGUmJnRoaXMuX3VwZGF0ZUVycm9ycyhlLnRhZ0lkLGUuZXJyb3JEZXNjcmlwdGlvbikse2lzVmFsaWQ6T2JqZWN0LnZhbHVlcyh0aGlzLl9lcnJvcnMpLmV2ZXJ5KGU9PjA9PT1lLmxlbmd0aCksZXJyb3JzOnRoaXMuX2Vycm9yc319X3VwZGF0ZUVycm9ycyhlLHQpe2NvbnN0IG49dGhpcy5fZXJyb3JzLmNhcmROdW1iZXJWZXJpZmljYXRpb24/aGMuQ2FyZE51bWJlclZlcmlmaWNhdGlvbjpOY1tlXTt0aGlzLl9lcnJvcnNbbl09dD9beGNbdF1bbl1dOltdfX1jbGFzcyBMY3thdHRhY2goe3N0eWxlOmUsb25GaWVsZEV2ZW50SGFuZGxlcjp7b25Gb2N1czp0LG9uQmx1cjpuLG9uVmFsaWQ6aSxvbkVycm9yOnIsb25FbnRlcjpvfT17fX0sYSxzKXt2YXIgZDt0aGlzLl9zdHlsZT1lLHRoaXMuX2NyZWF0ZSgpLHRoaXMuX2dldElucHV0KCkuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdGhpcy5faGFuZGxlRm9jdXModCkpLHRoaXMuX2dldElucHV0KCkuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0aGlzLl9oYW5kbGVCbHVyKG4saSxyKSksdGhpcy5fZ2V0SW5wdXQoKS5hZGRFdmVudExpc3RlbmVyKFwiZW50ZXJcIix0aGlzLl9oYW5kbGVFbnRlcihvKSksYSYmdGhpcy5fZ2V0SW5wdXQoKS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsYSkscyYmKHRoaXMuX2dldElucHV0KCkucGxhY2Vob2xkZXI9cyksbnVsbD09PShkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJsdWVzbmFwPVwibm9jXCJdJykpfHx2b2lkIDA9PT1kfHxkLmFwcGVuZENoaWxkKHRoaXMuX2dldElucHV0KCkpfWdldFZhbHVlKCl7cmV0dXJuIHRoaXMuX2dldElucHV0KCkudmFsdWV9ZGV0YWNoKCl7dGhpcy5faW5wdXQmJih0aGlzLl9pbnB1dC5yZW1vdmUoKSx0aGlzLl9pbnB1dD12b2lkIDApfV9oYW5kbGVGb2N1cyhlKXtyZXR1cm4oKT0+e3ZhciB0O3RoaXMuX2FwcGx5U3R5bGVzKG51bGw9PT0odD10aGlzLl9zdHlsZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnRbXCI6Zm9jdXNcIl0pLG51bGw9PWV8fGUoRGMuQ2FyZE5hbWUpfX1faGFuZGxlQmx1cihlLHQsbil7cmV0dXJuKHt0YXJnZXQ6aX0pPT57dmFyIHIsbztudWxsPT1lfHxlKERjLkNhcmROYW1lKSxpIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmKC9cXHd7MSwyMDB9Ly50ZXN0KGkudmFsdWUpPyh0aGlzLl9hcHBseVN0eWxlcyhudWxsPT09KHI9dGhpcy5fc3R5bGUpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmlucHV0KSxudWxsPT10fHx0KERjLkNhcmROYW1lKSk6KHRoaXMuX2FwcGx5U3R5bGVzKG51bGw9PT0obz10aGlzLl9zdHlsZSl8fHZvaWQgMD09PW8/dm9pZCAwOm9bXCIuaW52YWxpZFwiXSksbnVsbD09bnx8bihEYy5DYXJkTmFtZSxUYy5JTlZBTElEX09SX0VNUFRZLGtjLkVNUFRZLEFjLk9OX0JMVVIpKSl9fV9oYW5kbGVFbnRlcihlKXtyZXR1cm4oKT0+bnVsbD09ZT92b2lkIDA6ZShEYy5DYXJkTmFtZSl9X2FwcGx5U3R5bGVzKGU9e30pe2NvbnN0IHQ9e2NvbG9yOmUuY29sb3IsZm9udEZhbWlseTplW1wiZm9udC1mYW1pbHlcIl0sZm9udFNpemU6ZVtcImZvbnQtc2l6ZVwiXSxmb250V2VpZ2h0OmVbXCJmb250LXdlaWdodFwiXX0sbj1PYmplY3Qua2V5cyh0KTtuLmV2ZXJ5KGU9PltcImNvbG9yXCIsXCJmb250RmFtaWx5XCIsXCJmb250U2l6ZVwiLFwiZm9udFdlaWdodFwiXS5pbmNsdWRlcyhlKSkmJm4uZm9yRWFjaChlPT57dFtlXSYmKHRoaXMuX2dldElucHV0KCkuc3R5bGVbZV09dFtlXXx8XCJcIil9KX1fY29uZmlndXJlSW5wdXQoKXt0aGlzLl9nZXRJbnB1dCgpLmF1dG9jb21wbGV0ZT1cImNjLW5hbWVcIix0aGlzLl9nZXRJbnB1dCgpLmlkPURjLkNhcmROYW1lLHRoaXMuX2dldElucHV0KCkuaW5wdXRNb2RlPVwidGV4dFwiLHRoaXMuX2dldElucHV0KCkubWF4TGVuZ3RoPTIwMCx0aGlzLl9nZXRJbnB1dCgpLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cInRyYW5zcGFyZW50XCIsdGhpcy5fZ2V0SW5wdXQoKS5zdHlsZS5ib3JkZXI9XCIwXCIsdGhpcy5fZ2V0SW5wdXQoKS5zdHlsZS5oZWlnaHQ9XCIxMDAlXCIsdGhpcy5fZ2V0SW5wdXQoKS5zdHlsZS5tYXJnaW49XCIwXCIsdGhpcy5fZ2V0SW5wdXQoKS5zdHlsZS5vdXRsaW5lPVwibm9uZVwiLHRoaXMuX2dldElucHV0KCkuc3R5bGUucGFkZGluZz1cIjBcIix0aGlzLl9nZXRJbnB1dCgpLnN0eWxlLndpZHRoPVwiMTAwJVwiLHRoaXMuX2dldElucHV0KCkudHlwZT1cInRleHRcIn1fZ2V0SW5wdXQoKXtyZXR1cm4gcXQodGhpcy5faW5wdXQsKCk9Pm5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKX1fY3JlYXRlKCl7dmFyIGU7dGhpcy5faW5wdXQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLHRoaXMuX2NvbmZpZ3VyZUlucHV0KCksdGhpcy5fYXBwbHlTdHlsZXMobnVsbD09PShlPXRoaXMuX3N0eWxlKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pbnB1dCl9fXZhciBCYzshZnVuY3Rpb24oZSl7ZS5QUk9EVUNUSU9OPVwiaHR0cHM6Ly9wYXkuYmx1ZXNuYXAuY29tL3dlYi1zZGsvNS9ibHVlc25hcC5qc1wiLGUuU0FOREJPWD1cImh0dHBzOi8vc2FuZHBheS5ibHVlc25hcC5jb20vd2ViLXNkay81L2JsdWVzbmFwLmpzXCJ9KEJjfHwoQmM9e30pKTtjbGFzcyBqY3tjb25zdHJ1Y3RvcihlLHQ9d2luZG93KXt0aGlzLl9zY3JpcHRMb2FkZXI9ZSx0aGlzLl93aW5kb3c9dH1sb2FkKGU9ITEpe3JldHVybiB0PXRoaXMsbj12b2lkIDAscj1mdW5jdGlvbiooKXtpZih0aGlzLl93aW5kb3cuYmx1ZXNuYXApcmV0dXJuIHRoaXMuX3dpbmRvdy5ibHVlc25hcDtpZih5aWVsZCB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChlP0JjLlNBTkRCT1g6QmMuUFJPRFVDVElPTiksIXRoaXMuX3dpbmRvdy5ibHVlc25hcCl0aHJvdyBuZXcgWHQ7cmV0dXJuIHRoaXMuX3dpbmRvdy5ibHVlc25hcH0sbmV3KChpPXZvaWQgMCl8fChpPVByb21pc2UpKShmdW5jdGlvbihlLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoci5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKHIudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2YgaT9uOm5ldyBpKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKHI9ci5hcHBseSh0LG58fFtdKSkubmV4dCgpKX0pO3ZhciB0LG4saSxyfX1jb25zdCBVYz1ubihlPT5uZXcgemMobmV3IGpjKGEoKSksZSxuZXcgRmMobmV3IExjLG5ldyBSYyksbmV3IGJjKSxbe2lkOlwiY3JlZGl0X2NhcmRcIixnYXRld2F5OlwiYmx1ZXNuYXBkaXJlY3RcIn1dKTtjbGFzcyBxY3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWV9ZXhlY3V0ZShlKXtyZXR1cm4gdD10aGlzLG49dm9pZCAwLHI9ZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLl9mb3JtYXRlUGF5bWVudFBheWxvYWQoZSk7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcigpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQodCl9Y2F0Y2goZSl7aWYodGhpcy5faXNCbHVlU25hcERpcmVjdFJlZGlyZWN0UmVzcG9uc2UoZSkpe2NvbnN0IHQ9ZS5ib2R5LnByb3ZpZGVyX2RhdGEmJkpTT04ucGFyc2UoZS5ib2R5LnByb3ZpZGVyX2RhdGEpO2xldCBuPWUuYm9keS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZC5kYXRhLnJlZGlyZWN0X3VybDtpZihmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuITE7Y29uc3QgdD1lO3JldHVybiEhdC5tZXJjaGFudGlkJiZcInN0cmluZ1wiPT10eXBlb2YgdC5tZXJjaGFudGlkfSh0KSl7Y29uc3QgZT1uZXcgVVJMU2VhcmNoUGFyYW1zKHQpLnRvU3RyaW5nKCk7bj1gJHtufSYke2V9YH1yZXR1cm4gbmV3IFByb21pc2UoKCk9PndpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKG4pKX1yZXR1cm4gUHJvbWlzZS5yZWplY3QoZSl9fSxuZXcoKGk9dm9pZCAwKXx8KGk9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChyLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoci50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiBpP246bmV3IGkoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgocj1yLmFwcGx5KHQsbnx8W10pKS5uZXh0KCkpfSk7dmFyIHQsbixpLHJ9aW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1fZm9ybWF0ZVBheW1lbnRQYXlsb2FkKHtwYXltZW50OmV9KXtpZighZSl0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiXSk7cmV0dXJuIGUucGF5bWVudERhdGEmJlNkKGUucGF5bWVudERhdGEpJiZQZChlLnBheW1lbnREYXRhKT9PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3BheW1lbnREYXRhOntpbnN0cnVtZW50SWQ6ZS5wYXltZW50RGF0YS5pbnN0cnVtZW50SWQsc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDohIWUucGF5bWVudERhdGEuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudH19KToodD1lLnBheW1lbnREYXRhLEJvb2xlYW4oXCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPT10JiZcImFjY291bnROdW1iZXJcImluIHQmJlwiYWNjb3VudFR5cGVcImluIHQmJlwic2hvcHBlclBlcm1pc3Npb25cImluIHQmJlwicm91dGluZ051bWJlclwiaW4gdCk/T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtwYXltZW50RGF0YTp7Zm9ybWF0dGVkUGF5bG9hZDp7ZWNwOk9iamVjdC5hc3NpZ24oe2FjY291bnRfbnVtYmVyOmUucGF5bWVudERhdGEuYWNjb3VudE51bWJlcixhY2NvdW50X3R5cGU6ZS5wYXltZW50RGF0YS5hY2NvdW50VHlwZSxzaG9wcGVyX3Blcm1pc3Npb246ZS5wYXltZW50RGF0YS5zaG9wcGVyUGVybWlzc2lvbixyb3V0aW5nX251bWJlcjplLnBheW1lbnREYXRhLnJvdXRpbmdOdW1iZXJ9LGUucGF5bWVudERhdGEuY29tcGFueU5hbWU/e2NvbXBhbnlfbmFtZTplLnBheW1lbnREYXRhLmNvbXBhbnlOYW1lfTp7fSksdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OmUucGF5bWVudERhdGEuc2hvdWxkU2F2ZUluc3RydW1lbnQsc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6ZS5wYXltZW50RGF0YS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50fX19KToobj1lLnBheW1lbnREYXRhLEJvb2xlYW4oXCJvYmplY3RcIj09dHlwZW9mIG4mJm51bGwhPT1uJiZcImliYW5cImluIG4mJlwiZmlyc3ROYW1lXCJpbiBuJiZcImxhc3ROYW1lXCJpbiBuJiZcInNob3BwZXJQZXJtaXNzaW9uXCJpbiBuKT9PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3BheW1lbnREYXRhOntmb3JtYXR0ZWRQYXlsb2FkOntzZXBhX2RpcmVjdF9kZWJpdDp7aWJhbjplLnBheW1lbnREYXRhLmliYW4sZmlyc3RfbmFtZTplLnBheW1lbnREYXRhLmZpcnN0TmFtZSxsYXN0X25hbWU6ZS5wYXltZW50RGF0YS5sYXN0TmFtZSxzaG9wcGVyX3Blcm1pc3Npb246ZS5wYXltZW50RGF0YS5zaG9wcGVyUGVybWlzc2lvbn0sdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OmUucGF5bWVudERhdGEuc2hvdWxkU2F2ZUluc3RydW1lbnQsc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6ZS5wYXltZW50RGF0YS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50fX19KTpmdW5jdGlvbihlKXtyZXR1cm4gQm9vbGVhbihcIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWUmJlwiYmljXCJpbiBlKX0oZS5wYXltZW50RGF0YSk/T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtwYXltZW50RGF0YTp7Zm9ybWF0dGVkUGF5bG9hZDp7aWRlYWw6e2JpYzplLnBheW1lbnREYXRhLmJpY319fX0pOmZ1bmN0aW9uKGUpe3JldHVybiBCb29sZWFuKFwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmXCJpYmFuXCJpbiBlJiYhKFwiZmlyc3ROYW1lXCJpbiBlKSYmIShcImxhc3ROYW1lXCJpbiBlKSYmIShcInNob3BwZXJQZXJtaXNzaW9uXCJpbiBlKSl9KGUucGF5bWVudERhdGEpP09iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGF5bWVudERhdGE6e2Zvcm1hdHRlZFBheWxvYWQ6e3BheV9ieV9iYW5rOntpYmFuOmUucGF5bWVudERhdGEuaWJhbn19fX0pOnttZXRob2RJZDplLm1ldGhvZElkfSkpO3ZhciB0LG59X2lzQmx1ZVNuYXBEaXJlY3RSZWRpcmVjdFJlc3BvbnNlKGUpe3ZhciB0O2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4hMTtjb25zdCBuPWU7aWYoIW4uYm9keSlyZXR1cm4hMTtjb25zdCBpPW4uYm9keTtyZXR1cm5cImFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkXCI9PT1pLnN0YXR1cyYmISEobnVsbD09PSh0PWkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmRhdGEucmVkaXJlY3RfdXJsKX19Y29uc3QgVmM9bm4oZT0+bmV3IHFjKGUpLFt7Z2F0ZXdheTpcImJsdWVzbmFwZGlyZWN0XCJ9XSk7dmFyIEdjOyFmdW5jdGlvbihlKXtlLkFDS05PV0xFREdFPVwiQUNLTk9XTEVER0VcIixlLkZJTkFMSVpFPVwiRklOQUxJWkVcIixlLklOSVRJQUxJWkU9XCJJTklUSUFMSVpFXCJ9KEdjfHwoR2M9e30pKTtjb25zdCBIYz1HYzt2YXIgJGM9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgV2N7Y29uc3RydWN0b3IoZSl7dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZT1lfWV4ZWN1dGUoZSx0KXtyZXR1cm4gJGModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6bn09ZTtpZighbil0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiXSk7aWYoIXRoaXMuX2luaXRpYWxpemVPcHRpb25zKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO2NvbnN0e29uTG9hZDppLHN0eWxlOnJ9PXRoaXMuX2luaXRpYWxpemVPcHRpb25zLG89dGhpcy5fY3JlYXRlSWZyYW1lKFwiYmx1ZXNuYXB2Ml9ob3N0ZWRfcGF5bWVudF9wYWdlXCIsciksYT1uZXcgSmkobmV3IFByb21pc2UoVikpO2kobywoKT0+YS5jYW5jZWwobmV3IE1uKSkseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihlLHQpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZU9mZnNpdGVQYXltZW50KHttZXRob2RJZDpuLm1ldGhvZElkLGdhdGV3YXlJZDpuLmdhdGV3YXlJZCxzaG91bGRTYXZlSW5zdHJ1bWVudDohMSx0YXJnZXQ6by5uYW1lLHByb21pc2U6YS5wcm9taXNlfSl9KX1maW5hbGl6ZShlKXtyZXR1cm4gJGModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLG49dC5nZXRPcmRlcigpLGk9dC5nZXRQYXltZW50U3RhdHVzKCk7aWYoIW58fGkhPT1IYy5BQ0tOT1dMRURHRSYmaSE9PUhjLkZJTkFMSVpFKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpO3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZmluYWxpemVPcmRlcihlKX0pfWluaXRpYWxpemUoZSl7cmV0dXJuICRjKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0aGlzLl9pbml0aWFsaXplT3B0aW9ucz1lJiZlLmJsdWVzbmFwdjIseWllbGQgUHJvbWlzZS5yZXNvbHZlKCl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9X2NyZWF0ZUlmcmFtZShlLHQpe2NvbnN0IG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtpZihuLnNldEF0dHJpYnV0ZShcInNhbmRib3hcIixcImFsbG93LXRvcC1uYXZpZ2F0aW9uIGFsbG93LXNjcmlwdHMgYWxsb3ctZm9ybXMgYWxsb3ctc2FtZS1vcmlnaW5cIiksbi5uYW1lPWUsdCl7Y29uc3R7Ym9yZGVyOmUsaGVpZ2h0Omksd2lkdGg6cn09dDtuLnN0eWxlLmJvcmRlcj1udWxsIT1lP2U6XCJcIixuLnN0eWxlLmhlaWdodD1udWxsIT1pP2k6XCJcIixuLnN0eWxlLndpZHRoPW51bGwhPXI/cjpcIlwifXJldHVybiBufX1jb25zdCBZYz1ubihlPT5uZXcgV2MoZSksW3tnYXRld2F5OlwiYmx1ZXNuYXB2MlwifV0pO2NsYXNzIEtje2NvbnN0cnVjdG9yKGUpe3RoaXMuc3RvcmFnZT1lfXNhdmVFeHRyYUl0ZW1zRGF0YShlLHQpe2NvbnN0IG49Wy4uLnQucGh5c2ljYWxJdGVtcywuLi50LmRpZ2l0YWxJdGVtc10ucmVkdWNlKChlLHQpPT4oZVt0LnByb2R1Y3RJZF09e2JyYW5kOnQuYnJhbmQ/dC5icmFuZDpcIlwiLGNhdGVnb3J5OnQuY2F0ZWdvcnlOYW1lcz90LmNhdGVnb3J5TmFtZXMuam9pbihcIiwgXCIpOlwiXCJ9LGUpLHt9KTt0cnl7cmV0dXJuIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHRoaXMuZ2V0U3RvcmFnZUtleShlKSxKU09OLnN0cmluZ2lmeShuKSksbn1jYXRjaChlKXtyZXR1cm57fX19cmVhZEV4dHJhSXRlbXNEYXRhKGUpe3RyeXtjb25zdCB0PXRoaXMuc3RvcmFnZS5nZXRJdGVtKHRoaXMuZ2V0U3RvcmFnZUtleShlKSk7aWYoIXQpcmV0dXJuIG51bGw7Y29uc3Qgbj1KU09OLnBhcnNlKHQpO3JldHVybiBmdW5jdGlvbihlKXtpZighRChlKSlyZXR1cm4hMTtjb25zdCB0PU9iamVjdC52YWx1ZXMoZSkuc29tZShlPT4hRChlKXx8IShcImJyYW5kXCJpbiBlKXx8IShcImNhdGVnb3J5XCJpbiBlKSk7cmV0dXJuIEJvb2xlYW4oIXQpfShuKT9uOm51bGx9Y2F0Y2goZSl7cmV0dXJuIG51bGx9fWNsZWFyRXh0cmFJdGVtRGF0YShlKXt0cnl7dGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5nZXRTdG9yYWdlS2V5KGUpKX1jYXRjaChlKXt9fWdldFN0b3JhZ2VLZXkoZSl7cmV0dXJuIGU/YE9SREVSX0lURU1TXyR7ZX1gOlwiXCJ9fWZ1bmN0aW9uIEpjKGUpe3JldHVybiBCb29sZWFuKGUuaGFzT3duUHJvcGVydHkoXCJhbmFseXRpY3NcIikpfWZ1bmN0aW9uIFpjKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmXCJzaG91bGRDcmVhdGVBY2NvdW50XCJpbiBlfWNsYXNzIFFjIGV4dGVuZHMgQnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmVycm9yQ29kZT1lLHRoaXMubmFtZT1cIkJvbHRQYXltZW50c0ZpZWxkRXJyb3JcIix0aGlzLnR5cGU9XCJib2x0X3BheW1lbnRzX2ZpZWxkX2Vycm9yXCIsdGhpcy5ib2R5PXtlcnJvcnM6W1FjLmdldEVycm9yKGUpXX19c3RhdGljIGdldEVycm9yKGUpe3N3aXRjaChlKXtjYXNlXCIxMDAwXCI6Y2FzZVwiMjAwMFwiOmNhc2VcIjMwMDBcIjpyZXR1cm57Y29kZTpcImludmFsaWRfbnVtYmVyXCJ9O2Nhc2VcIjEwMDFcIjpjYXNlXCIyMDAxXCI6Y2FzZVwiMzAwMVwiOnJldHVybntjb2RlOlwiaW52YWxpZF9leHBpcnlfZGF0ZVwifTtjYXNlXCIxMDAyXCI6Y2FzZVwiMjAwMlwiOnJldHVybntjb2RlOlwiaW52YWxpZF9jdmNcIn07Y2FzZVwiMTAwM1wiOnJldHVybntjb2RlOlwiaW52YWxpZF96aXBcIn07Y2FzZVwiMjAwM1wiOnJldHVybntjb2RlOlwiaW5jb3JyZWN0X3ppcFwifTtkZWZhdWx0OnJldHVybntjb2RlOlwiZ2VuZXJhbF9lcnJvclwifX19fXZhciBYYz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBlbHtjb25zdHJ1Y3RvcihlLHQsbil7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5ib2x0U2NyaXB0TG9hZGVyPXQsdGhpcy5hbmFseXRpY3NFeHRyYUl0ZW1zTWFuYWdlcj1uLHRoaXMudXNlQm9sdENsaWVudD0hMSx0aGlzLnVzZUJvbHRFbWJlZGRlZD0hMX1pbml0aWFsaXplKGUpe3JldHVybiBYYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7Ym9sdDp0LG1ldGhvZElkOm59PWUse2NvbnRhaW5lcklkOmksb25QYXltZW50U2VsZWN0OnIsdXNlQmlnQ29tbWVyY2VDaGVja291dDpvfT10fHx7fTtpZighbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIW8pcmV0dXJuIHZvaWQodGhpcy5ib2x0Q2xpZW50PXlpZWxkIHRoaXMuYm9sdFNjcmlwdExvYWRlci5sb2FkQm9sdENsaWVudCgpKTtjb25zdCBhPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KGUubWV0aG9kSWQpLHtpbml0aWFsaXphdGlvbkRhdGE6cyxjb25maWc6ZH09YSx7cHVibGlzaGFibGVLZXk6YyxkZXZlbG9wZXJDb25maWc6bCxlbWJlZGRlZE9uZUNsaWNrRW5hYmxlZDp1fT1zfHx7fSx7dGVzdE1vZGU6aH09ZDtpZighYyl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2lmKHRoaXMuYm9sdENsaWVudD15aWVsZCB0aGlzLmJvbHRTY3JpcHRMb2FkZXIubG9hZEJvbHRDbGllbnQoYyxoLGwpLHRoaXMudXNlQm9sdENsaWVudD0hdSx0aGlzLnVzZUJvbHRFbWJlZGRlZD0hIXUsdGhpcy51c2VCb2x0RW1iZWRkZWQpe2lmKCFpKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5ib2x0LmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFyKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5ib2x0Lm9uUGF5bWVudFNlbGVjdFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt0aGlzLmJvbHRFbWJlZGRlZD15aWVsZCB0aGlzLmJvbHRTY3JpcHRMb2FkZXIubG9hZEJvbHRFbWJlZGRlZChjLGgsbCksdGhpcy5tb3VudEJvbHRFbWJlZGRlZEZpZWxkKGkpLHIoeWllbGQgdGhpcy5oYXNCb2x0QWNjb3VudCgpKX19KX1kZWluaXRpYWxpemUoKXt2YXIgZTtyZXR1cm4gbnVsbD09PShlPXRoaXMuZW1iZWRkZWRGaWVsZCl8fHZvaWQgMD09PWV8fGUudW5tb3VudCgpLHRoaXMuYm9sdENsaWVudD12b2lkIDAsdGhpcy5ib2x0RW1iZWRkZWQ9dm9pZCAwLFByb21pc2UucmVzb2x2ZSgpfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBfZCl9ZXhlY3V0ZShlLHQpe3JldHVybiBYYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dGhpcy5zZXRFeHRyYUl0ZW1zRm9yQW5hbHl0aWNzKCk7Y29uc3R7cGF5bWVudDpufT1lLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pLHttZXRob2RJZDpyLHBheW1lbnREYXRhOm99PW58fHt9O2xldCBhO2lmKCFlLnBheW1lbnQpdGhyb3cgbmV3IFlpKFtcInBheW1lbnRcIl0pO2lmKCFyKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7aWYoIW98fCFmdW5jdGlvbihlKXtyZXR1cm4gQm9vbGVhbihEKGUpJiYoXCJzaG91bGRTYXZlSW5zdHJ1bWVudFwiaW4gZXx8XCJub25jZVwiaW4gZXx8WmMoZSkpKX0obykpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50KTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KSxhPXRoaXMudXNlQm9sdENsaWVudD95aWVsZCB0aGlzLmdldEJvbHRDbGllbnRQYXltZW50UGF5bG9hZChyLG8sdCk6dGhpcy51c2VCb2x0RW1iZWRkZWQ/eWllbGQgdGhpcy5nZXRCb2x0RW1iZWRkZWRQYXltZW50UGF5bG9hZChyLG8pOnlpZWxkIHRoaXMuZ2V0Qm9sdEZ1bGxDaGVja291dFBheW1lbnRQYXlsb2FkKHIsbykseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoYSl9KX1nZXRCb2x0Q2xpZW50UGF5bWVudFBheWxvYWQoZSx0LG4pe3JldHVybiBYYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGUsbik7Y29uc3QgaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxyPWkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSkuY2xpZW50VG9rZW4se2lzU3RvcmVDcmVkaXRBcHBsaWVkOm99PWkuZ2V0Q2hlY2tvdXRPclRocm93KCkse3Nob3VsZFNhdmVJbnN0cnVtZW50OmF9PXQscz10aGlzLmdldEJvbHRDbGllbnRPclRocm93KCk7aWYoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmFwcGx5U3RvcmVDcmVkaXQobyksIXIpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtjb25zdCBkPXlpZWxkIG5ldyBQcm9taXNlKChlLHQpPT57Y29uc3Qgbj17c3VjY2VzczoobixpKT0+e24ucmVmZXJlbmNlP2Uobik6dChuZXcgTGkoXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRyYW5zYWN0aW9uIHJlZmVyZW5jZSBpcyB1bmF2YWlsYWJsZS4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIikpLGkoKX0sY2xvc2U6KCk9Pnt0KG5ldyBNbil9fTtzLmNvbmZpZ3VyZSh7b3JkZXJUb2tlbjpyfSx7fSxuKS5vcGVuKCl9KTtyZXR1cm57bWV0aG9kSWQ6ZSxwYXltZW50RGF0YTp7bm9uY2U6ZC5yZWZlcmVuY2Usc2hvdWxkU2F2ZUluc3RydW1lbnQ6YX19fSl9Z2V0Qm9sdEVtYmVkZGVkUGF5bWVudFBheWxvYWQoZSx0KXt2YXIgbjtyZXR1cm4gWGModGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFaYyh0KSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnQpO2NvbnN0IGk9dGhpcy52YWxpZGF0ZVRva2VuaXplUmVzdWx0T3JUaHJvdyh5aWVsZCBudWxsPT09KG49dGhpcy5lbWJlZGRlZEZpZWxkKXx8dm9pZCAwPT09bj92b2lkIDA6bi50b2tlbml6ZSgpKTtyZXR1cm57bWV0aG9kSWQ6ZSxwYXltZW50RGF0YTp7Zm9ybWF0dGVkUGF5bG9hZDp7Y3JlZGl0X2NhcmRfdG9rZW46e3Rva2VuOmkudG9rZW4sbGFzdF9mb3VyX2RpZ2l0czppLmxhc3Q0LGlpbjppLmJpbixleHBpcmF0aW9uX21vbnRoOitpLmV4cGlyYXRpb24uc3BsaXQoXCItXCIpWzFdLGV4cGlyYXRpb25feWVhcjoraS5leHBpcmF0aW9uLnNwbGl0KFwiLVwiKVswXX0scHJvdmlkZXJfZGF0YTp7Y3JlYXRlX2FjY291bnQ6ISF0LnNob3VsZENyZWF0ZUFjY291bnQsZW1iZWRkZWRfY2hlY2tvdXQ6ITB9fX19fSl9Z2V0Qm9sdEZ1bGxDaGVja291dFBheW1lbnRQYXlsb2FkKGUsdCl7cmV0dXJuIFhjKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNldEJvbHRPcmRlcklkKCk7Y29uc3Qgbj10aGlzLmdldEJvbHRDbGllbnRPclRocm93KCksaT15aWVsZCBuLmdldFRyYW5zYWN0aW9uUmVmZXJlbmNlKCk7aWYoIWkpdGhyb3cgbmV3IEJpO3JldHVybnttZXRob2RJZDplLHBheW1lbnREYXRhOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7bm9uY2U6aX0pfX0pfWdldEJvbHRDbGllbnRPclRocm93KCl7aWYoIXRoaXMuYm9sdENsaWVudCl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gdGhpcy5ib2x0Q2xpZW50fWdldEJvbHRFbWJlZGRlZE9yVGhyb3coKXtpZighdGhpcy5ib2x0RW1iZWRkZWQpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7cmV0dXJuIHRoaXMuYm9sdEVtYmVkZGVkfWhhc0JvbHRBY2NvdW50KCl7cmV0dXJuIFhjKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBlPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHQ9ZS5nZXRDdXN0b21lcigpLG49ZS5nZXRCaWxsaW5nQWRkcmVzcygpLGk9KG51bGw9PXQ/dm9pZCAwOnQuZW1haWwpfHwobnVsbD09bj92b2lkIDA6bi5lbWFpbCl8fFwiXCIscj10aGlzLmdldEJvbHRDbGllbnRPclRocm93KCk7dHJ5e3JldHVybiB5aWVsZCByLmhhc0JvbHRBY2NvdW50KGkpfWNhdGNoKGUpe3Rocm93IG5ldyBCaX19KX1zZXRCb2x0T3JkZXJJZCgpe3JldHVybiBYYyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgZT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRPcmRlck9yVGhyb3coKSx0PXRoaXMuZ2V0Qm9sdENsaWVudE9yVGhyb3coKTt0cnl7eWllbGQgdC5zZXRPcmRlcklkKGUub3JkZXJJZCl9Y2F0Y2goZSl7dGhyb3cgbmV3IEJpfX0pfW1vdW50Qm9sdEVtYmVkZGVkRmllbGQoZSl7Y29uc3QgdD10aGlzLmdldEJvbHRFbWJlZGRlZE9yVGhyb3coKS5jcmVhdGUoXCJwYXltZW50X2ZpZWxkXCIse3N0eWxlczp7YmFja2dyb3VuZENvbG9yOlwiI2ZmZlwifSxyZW5kZXJTZXBhcmF0ZUZpZWxkczohMH0pO3QubW91bnQoYCMke2V9YCksdGhpcy5lbWJlZGRlZEZpZWxkPXR9dmFsaWRhdGVUb2tlbml6ZVJlc3VsdE9yVGhyb3coZSl7aWYoIWUpdGhyb3cgbmV3IEJpO2lmKGUgaW5zdGFuY2VvZiBFcnJvcil0aHJvdyBuZXcgUWMoZS5tZXNzYWdlKTtjb25zdHt0b2tlbjp0LGxhc3Q0Om4sYmluOmksZXhwaXJhdGlvbjpyfT1lLG89K24sYT0raSxzPStgJHtyfWAuc3BsaXQoXCItXCIpWzFdLGQ9K2Ake3J9YC5zcGxpdChcIi1cIilbMF07aWYoIXR8fE51bWJlci5pc05hTihvKXx8TnVtYmVyLmlzTmFOKGEpfHxOdW1iZXIuaXNOYU4ocyl8fE51bWJlci5pc05hTihkKSl0aHJvdyBuZXcgWWk7cmV0dXJuIGV9c2V0RXh0cmFJdGVtc0ZvckFuYWx5dGljcygpe2NvbnN0IGU9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksdD1lLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLG49ZS5nZXRDYXJ0T3JUaHJvdygpO2lmKHQuY2hlY2tvdXRTZXR0aW5ncy5pc0FuYWx5dGljc0VuYWJsZWQmJkpjKHdpbmRvdykpe2NvbnN0e2lkOmUsbGluZUl0ZW1zOnR9PW47dGhpcy5hbmFseXRpY3NFeHRyYUl0ZW1zTWFuYWdlci5zYXZlRXh0cmFJdGVtc0RhdGEoZSx0KX19fWNvbnN0IHRsPW5uKGU9Pm5ldyBlbChlLG5ldyAkaShhKCkpLG5ldyBLYyhrZSkpLFt7aWQ6XCJib2x0XCJ9XSk7ZnVuY3Rpb24gbmwoZSl7cmV0dXJuISFlJiZcImFjY291bnROdW1iZXJcImluIGUmJlwicm91dGluZ051bWJlclwiaW4gZSYmXCJvd25lcnNoaXBUeXBlXCJpbiBlJiZcImFjY291bnRUeXBlXCJpbiBlfXZhciBpbD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBybHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYnJhaW50cmVlU2RrPXR9aW5pdGlhbGl6ZShlKXtyZXR1cm4gaWwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOnQsYnJhaW50cmVlYWNoOm59PWV8fHt9O2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt0aGlzLmdldE1hbmRhdGVUZXh0PW51bGw9PW4/dm9pZCAwOm4uZ2V0TWFuZGF0ZVRleHQseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKHQpO2NvbnN0IGk9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codCkse2NsaWVudFRva2VuOnIsaW5pdGlhbGl6YXRpb25EYXRhOm99PWk7aWYoIXJ8fCFvKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7dGhpcy5icmFpbnRyZWVTZGsuaW5pdGlhbGl6ZShyKTt0cnl7dGhpcy51c0JhbmtBY2NvdW50PXlpZWxkIHRoaXMuYnJhaW50cmVlU2RrLmdldFVzQmFua0FjY291bnQoKX1jYXRjaChlKXt0aGlzLmhhbmRsZUJyYWludHJlZUVycm9yKGUpfX0pfWV4ZWN1dGUoZSx0KXtyZXR1cm4gaWwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6bn09ZSxpPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0oZSxbXCJwYXltZW50XCJdKTtpZighbil0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiXSk7Y29uc3Qgcj1TZChuLnBheW1lbnREYXRhfHx7fSksbz1yP3lpZWxkIHRoaXMudG9rZW5pemVQYXltZW50Rm9yVmF1bHRlZEluc3RydW1lbnQobik6eWllbGQgdGhpcy50b2tlbml6ZVBheW1lbnQobiksYT1yP3lpZWxkIHRoaXMucHJlcGFyZVBheW1lbnREYXRhRm9yVmF1bHRlZEluc3RydW1lbnQobyxuKTp5aWVsZCB0aGlzLnByZXBhcmVQYXltZW50RGF0YShvLG4pO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihpLHQpLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KGEpfSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gaWwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLmJyYWludHJlZVNkay5kZWluaXRpYWxpemUoKSxQcm9taXNlLnJlc29sdmUoKX0pfXRva2VuaXplUGF5bWVudCh7cGF5bWVudERhdGE6ZX0pe3JldHVybiBpbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLmdldFVzQmFua0FjY291bnRPclRocm93KCk7aWYoIW5sKGUpKXRocm93IG5ldyBZaShbXCJwYXltZW50LnBheW1lbnREYXRhXCJdKTtjb25zdCBuPVNkKGUpP1wiVGhlIGRhdGEgYXJlIHVzZWQgZm9yIHN0b3JlZCBpbnN0cnVtZW50IHZlcmlmaWNhdGlvblwiOlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuZ2V0TWFuZGF0ZVRleHQmJnRoaXMuZ2V0TWFuZGF0ZVRleHQoKTtpZighbil0aHJvdyBuZXcgcm4oXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGdldE1hbmRhdGVUZXh0IGlzIG5vdCBwcm92aWRlZCBvciByZXR1cm5lZCB1bmRlZmluZWQgdmFsdWUuXCIpO3RyeXtjb25zdHtub25jZTppfT15aWVsZCB0LnRva2VuaXplKHtiYW5rRGV0YWlsczp0aGlzLmdldEJhbmtEZXRhaWxzKGUpLG1hbmRhdGVUZXh0Om59KTtyZXR1cm4gaX1jYXRjaChlKXt0aGlzLmhhbmRsZUJyYWludHJlZUVycm9yKGUpfX0pfXRva2VuaXplUGF5bWVudEZvclZhdWx0ZWRJbnN0cnVtZW50KGUpe3JldHVybiBpbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bWV0aG9kSWQ6dCxwYXltZW50RGF0YTpuPXt9fT1lLGk9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse2NvbmZpZzpyfT1pLmdldFBheW1lbnRNZXRob2RPclRocm93KHQpO2lmKCFyLmlzVmF1bHRpbmdFbmFibGVkKXRocm93IG5ldyBybihcIlZhdWx0aW5nIGlzIGRpc2FibGVkIGJ1dCBhIHZhdWx0ZWQgaW5zdHJ1bWVudCB3YXMgYmVpbmcgdXNlZCBmb3IgdGhpcyB0cmFuc2FjdGlvblwiKTtyZXR1cm4gbmwobik/dGhpcy50b2tlbml6ZVBheW1lbnQoZSk6bnVsbH0pfXByZXBhcmVQYXltZW50RGF0YShlLHQpe3JldHVybiBpbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bWV0aG9kSWQ6bixwYXltZW50RGF0YTppPXt9fT10O2lmKCFubChpKSl0aHJvdyBuZXcgWWkoW1wicGF5bWVudC5wYXltZW50RGF0YVwiXSk7Y29uc3R7ZGV2aWNlRGF0YTpyfT15aWVsZCB0aGlzLmJyYWludHJlZVNkay5nZXREYXRhQ29sbGVjdG9yT3JUaHJvdygpLHtzaG91bGRTYXZlSW5zdHJ1bWVudDpvLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6YSxyb3V0aW5nTnVtYmVyOnMsYWNjb3VudE51bWJlcjpkfT1pO3JldHVybnttZXRob2RJZDpuLHBheW1lbnREYXRhOntkZXZpY2VTZXNzaW9uSWQ6cixzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OmEsc2hvdWxkU2F2ZUluc3RydW1lbnQ6byxmb3JtYXR0ZWRQYXlsb2FkOnt0b2tlbml6ZWRfYmFua19hY2NvdW50Ontpc3N1ZXI6cyxtYXNrZWRfYWNjb3VudF9udW1iZXI6ZC5zdWJzdHIoLTQpLHRva2VuOmV9fX19fSl9cHJlcGFyZVBheW1lbnREYXRhRm9yVmF1bHRlZEluc3RydW1lbnQoZSx0KXtyZXR1cm4gaWwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOm4scGF5bWVudERhdGE6aT17fX09dDtpZighU2QoaSl8fCFQZChpKSl0aHJvdyBuZXcgWWkoW1wicGF5bWVudC5wYXltZW50RGF0YVwiXSk7Y29uc3R7ZGV2aWNlRGF0YTpyfT15aWVsZCB0aGlzLmJyYWludHJlZVNkay5nZXREYXRhQ29sbGVjdG9yT3JUaHJvdygpLHtpbnN0cnVtZW50SWQ6byxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OmF9PWk7cmV0dXJue21ldGhvZElkOm4scGF5bWVudERhdGE6T2JqZWN0LmFzc2lnbih7ZGV2aWNlU2Vzc2lvbklkOnIsaW5zdHJ1bWVudElkOm8sc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDphfSxlJiZ7bm9uY2U6ZX0pfX0pfWdldEJhbmtEZXRhaWxzKGUpe2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCksbj1lLm93bmVyc2hpcFR5cGUudG9Mb3dlckNhc2UoKSxpPWUuYWNjb3VudFR5cGUudG9Mb3dlckNhc2UoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHthY2NvdW50TnVtYmVyOmUuYWNjb3VudE51bWJlcixyb3V0aW5nTnVtYmVyOmUucm91dGluZ051bWJlcixvd25lcnNoaXBUeXBlOm59LFwicGVyc29uYWxcIj09PW4/e2ZpcnN0TmFtZTplLmZpcnN0TmFtZSxsYXN0TmFtZTplLmxhc3ROYW1lfTp7YnVzaW5lc3NOYW1lOmUuYnVzaW5lc3NOYW1lfSkse2FjY291bnRUeXBlOmksYmlsbGluZ0FkZHJlc3M6e3N0cmVldEFkZHJlc3M6dC5hZGRyZXNzMSxleHRlbmRlZEFkZHJlc3M6dC5hZGRyZXNzMixsb2NhbGl0eTp0LmNpdHkscmVnaW9uOnQuc3RhdGVPclByb3ZpbmNlQ29kZSxwb3N0YWxDb2RlOnQucG9zdGFsQ29kZX19KX1nZXRVc0JhbmtBY2NvdW50T3JUaHJvdygpe2lmKCF0aGlzLnVzQmFua0FjY291bnQpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7cmV0dXJuIHRoaXMudXNCYW5rQWNjb3VudH1oYW5kbGVCcmFpbnRyZWVFcnJvcihlKXtpZighQ24oZSkpdGhyb3cgZTt0aHJvdyBuZXcgTGkoZS5tZXNzYWdlKX19Y29uc3Qgb2w9bm4oZT0+bmV3IHJsKGUsKGU9Pntjb25zdCB0PW5ldyBwbihlKSxuPW5ldyBEbihhKCksd2luZG93LHQpO3JldHVybiBuZXcgRW4obil9KShlKSksW3tpZDpcImJyYWludHJlZWFjaFwifV0pO2NsYXNzIGFse2NvbnN0cnVjdG9yKGUpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdz13aW5kb3d9cmVuZGVyKGUsdCxuKXtjb25zdCBpPXQmJmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQpO2lmKHRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5wYXlwYWwmJmkpe2NvbnN0IHI9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksbz1yLmdldENhcnRPclRocm93KCksYT1yLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpLHM9ci5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKTtpZighcy5pbml0aWFsaXphdGlvbkRhdGEpcmV0dXJuO2NvbnN0e3BheXBhbEJOUExDb25maWd1cmF0aW9uOmQ9W119PXMuaW5pdGlhbGl6YXRpb25EYXRhLGM9bj09PWlyLlBBWU1FTlQ/XCJjaGVja291dFwiOm4sbD1kJiZkLmZpbmQoKHtpZDplfSk9PmU9PT1jKTtpZighbHx8IWwuc3RhdHVzKXJldHVybjtuPT09aXIuQ0FSVCYmKGkucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1wcC1zdHlsZS1sb2dvLXR5cGVcIiksaS5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXBwLXN0eWxlLWxvZ28tcG9zaXRpb25cIiksaS5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXBwLXN0eWxlLXRleHQtY29sb3JcIiksaS5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXBwLXN0eWxlLXRleHQtc2l6ZVwiKSksdGhpcy5icmFpbnRyZWVIb3N0V2luZG93LnBheXBhbC5NZXNzYWdlcyh7YW1vdW50Om8uY2FydEFtb3VudCxidXllckNvdW50cnk6YS5jb3VudHJ5Q29kZSxwbGFjZW1lbnQ6bixzdHlsZTp0aGlzLmdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcobCl9KS5yZW5kZXIoYCMke3R9YCl9fWdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcoe3N0eWxlczplfSl7Y29uc3QgdD17fTtyZXR1cm4gZS5jb2xvciYmKHQuY29sb3I9ZS5jb2xvciksZS5sYXlvdXQmJih0LmxheW91dD1lLmxheW91dCksKGVbXCJsb2dvLXR5cGVcIl18fGVbXCJsb2dvLXBvc2l0aW9uXCJdKSYmKHQubG9nbz17fSxlW1wibG9nby10eXBlXCJdJiYodC5sb2dvLnR5cGU9ZVtcImxvZ28tdHlwZVwiXSksZVtcImxvZ28tcG9zaXRpb25cIl0mJih0LmxvZ28ucG9zaXRpb249ZVtcImxvZ28tcG9zaXRpb25cIl0pKSxlLnJhdGlvJiYodC5yYXRpbz1lLnJhdGlvKSwoZVtcInRleHQtY29sb3JcIl18fGVbXCJ0ZXh0LXNpemVcIl0pJiYodC50ZXh0PXt9LGVbXCJ0ZXh0LWNvbG9yXCJdJiYodC50ZXh0LmNvbG9yPWVbXCJ0ZXh0LWNvbG9yXCJdKSxlW1widGV4dC1zaXplXCJdJiYodC50ZXh0LnNpemU9K2VbXCJ0ZXh0LXNpemVcIl0pKSx0fX1jbGFzcyBzbHtjb25zdHJ1Y3RvcihlKXtjb25zdHtlbGVtZW50OnQsY2xvc2VFbGVtZW50Om4sbWFpbkVsZW1lbnQ6aX09dGhpcy5fY3JlYXRlRWxlbWVudHMoZSk7dGhpcy5fZWxlbWVudD10LHRoaXMuX2Nsb3NlRWxlbWVudD1uLHRoaXMuX21haW5FbGVtZW50PWl9c2hvdyhlKXt0aGlzLl9tYWluRWxlbWVudC5wYXJlbnRFbGVtZW50fHwodGhpcy5fcmVnaXN0ZXJDbGljayhlKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX21haW5FbGVtZW50KSxzZXRUaW1lb3V0KCgpPT50aGlzLl9lbGVtZW50LnN0eWxlLm9wYWNpdHk9XCIxXCIpKX1yZW1vdmUoKXt0aGlzLl9tYWluRWxlbWVudC5wYXJlbnRFbGVtZW50JiYodGhpcy5fdW5yZWdpc3RlckNsaWNrJiZ0aGlzLl91bnJlZ2lzdGVyQ2xpY2soKSx0aGlzLl9yZW1vdmVBZnRlclRyYW5zaXRpb24oKSxzZXRUaW1lb3V0KCgpPT50aGlzLl9lbGVtZW50LnN0eWxlLm9wYWNpdHk9XCIwXCIpKX1fY3JlYXRlRWxlbWVudHMoZSl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHtiYWNrZ3JvdW5kOm49XCJyZ2JhKDAsIDAsIDAsIDAuOClcIixpZDppPVwiY2hlY2tvdXRPdmVybGF5XCIsdHJhbnNpdGlvbkR1cmF0aW9uOnI9NDAwLGhhc0Nsb3NlQnV0dG9uOm89ITEsaW5uZXJIdG1sOmE9bnVsbH09ZXx8e307bGV0IHMsZCxjLGwsdT10O2lmKGkmJih0LmlkPWkpLGEpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtsPWAke2l9LS1vdmVybGF5VGV4dGAsZS5jbGFzc05hbWU9bCxlLmFwcGVuZENoaWxkKGEpLHQuYXBwZW5kQ2hpbGQoZSl9cmV0dXJuIG8mJihjPWAke2l9LS1jbG9zZWAscz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHMuY2xhc3NOYW1lPWMsZD1gJHtpfS0tbGF5b3V0YCx1PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdS5jbGFzc05hbWU9ZCx1LmFwcGVuZENoaWxkKHQpLHUuYXBwZW5kQ2hpbGQocykpLHUuYXBwZW5kQ2hpbGQoZnVuY3Rpb24oZSl7Y29uc3R7aWQ6dCxiYWNrZ3JvdW5kOm4sdHJhbnNpdGlvbkR1cmF0aW9uOmksY2xhc3NMYXlvdXQ6cixjbGFzc092ZXJsYXlUZXh0Om8sY2xhc3NDbG9zZTphfT1lLHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpLGQ9cj9gLCAuJHtyfWA6XCJcIjtyZXR1cm4gcy5pZD1gJHt0fS0tc3R5bGVzYCxzLnR5cGU9XCJ0ZXh0L2Nzc1wiLHMuaW5uZXJUZXh0PWBcXG4gICAgICAgICMke3R9JHtkfSB7XFxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XFxuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xcbiAgICAgICAgICAgIGxlZnQ6IDA7XFxuICAgICAgICAgICAgdG9wOiAwO1xcbiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcXG4gICAgICAgICAgICB6LWluZGV4OiAyMTQ3NDgzNjQ3O1xcbiAgICAgICAgfVxcbiAgICAgICAgIyR7dH0ge1xcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgJHtpfW1zIGVhc2Utb3V0O1xcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICR7bn07XFxuICAgICAgICAgICAgb3BhY2l0eTogMDtcXG4gICAgICAgIH1cXG4gICAgYCxvJiYocy5pbm5lclRleHQrPWBcXG4gICAgICAgICAgICAgIyR7dH0ge1xcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAjJHt0fSAuJHtvfSB7XFxuICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcXG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAzMzBweDtcXG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxLjJlbTtcXG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICAgICAgICAgICB9XFxuICAgICAgICBgKSxhJiYocy5pbm5lclRleHQrPWBcXG4gICAgICAgICAgICAjJHt0fSB7XFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC4ke3J9IC4ke2F9IHtcXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xcbiAgICAgICAgICAgICAgICByaWdodDogMTZweDtcXG4gICAgICAgICAgICAgICAgdG9wOiAxNnB4O1xcbiAgICAgICAgICAgICAgICB3aWR0aDogMTZweDtcXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxNnB4O1xcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XFxuICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgICAgICAgICAgICAgei1pbmRleDogMzE0NzQ4MzY0NztcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgLiR7cn0gLiR7YX06OmFmdGVyLCAuJHtyfSAuJHthfTo6YmVmb3JlIHtcXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICAgICAgICAgICAgICBsZWZ0OiA4cHg7XFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnO1xcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE2cHg7XFxuICAgICAgICAgICAgICAgIHdpZHRoOiAycHg7XFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC4ke3J9IC4ke2F9OjphZnRlciB7XFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKC00NWRlZyk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC4ke3J9IC4ke2F9OjpiZWZvcmUge1xcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgYCksc30oe2lkOmksYmFja2dyb3VuZDpuLHRyYW5zaXRpb25EdXJhdGlvbjpyLGNsYXNzTGF5b3V0OmQsY2xhc3NPdmVybGF5VGV4dDpsLGNsYXNzQ2xvc2U6Y30pKSx7ZWxlbWVudDp0LGNsb3NlRWxlbWVudDpzLG1haW5FbGVtZW50OnV9fV9hZGRFdmVudExpc3RlbmVyKGUsdCl7ZSYmdCYmZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0KX1fcmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpe2UmJnQmJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdCl9X3JlZ2lzdGVyQ2xpY2soZSl7aWYodGhpcy5fdW5yZWdpc3RlckNsaWNrJiZ0aGlzLl91bnJlZ2lzdGVyQ2xpY2soKSxlKXtjb25zdHtvbkNsaWNrOnQsb25DbGlja0Nsb3NlOm59PWU7dGhpcy5fYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl9lbGVtZW50LHQpLHRoaXMuX2FkZEV2ZW50TGlzdGVuZXIodGhpcy5fY2xvc2VFbGVtZW50LG4pLHRoaXMuX3VucmVnaXN0ZXJDbGljaz0oKT0+e3RoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5fZWxlbWVudCx0KSx0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuX2Nsb3NlRWxlbWVudCxuKSx0aGlzLl91bnJlZ2lzdGVyQ2xpY2s9dm9pZCAwfX19X3JlbW92ZUFmdGVyVHJhbnNpdGlvbigpe2NvbnN0IGU9dD0+e1wib3BhY2l0eVwiPT09dC5wcm9wZXJ0eU5hbWUmJih0aGlzLl9tYWluRWxlbWVudC5wYXJlbnRFbGVtZW50JiZ0aGlzLl9tYWluRWxlbWVudC5yZW1vdmUoKSx0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsZSkpfTt0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsZSl9fWNvbnN0IGRsPXtcImJhY2tncm91bmQtY29sb3JcIjpcInJnYmEoMCwgMCwgMCwgMC40KVwiLFwiei1pbmRleFwiOlwiMTAwMFwifTtmdW5jdGlvbiBjbChlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWUmJlwibmFtZVwiaW4gZSYmXCJCcmFpbnRyZWVFcnJvclwiPT09ZS5uYW1lfWZ1bmN0aW9uIGxsKGUpe3JldHVybntyZWNpcGllbnROYW1lOmAke2UuZmlyc3ROYW1lfSAke2UubGFzdE5hbWV9YCxsaW5lMTplLmFkZHJlc3MxLGxpbmUyOmUuYWRkcmVzczIsY2l0eTplLmNpdHksc3RhdGU6ZS5zdGF0ZU9yUHJvdmluY2VDb2RlLHBvc3RhbENvZGU6ZS5wb3N0YWxDb2RlLGNvdW50cnlDb2RlOmUuY291bnRyeUNvZGUscGhvbmU6ZS5waG9uZX19dmFyIHVsPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIGhse2NvbnN0cnVjdG9yKGUsdCxuLGkpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5icmFpbnRyZWVNZXNzYWdlcz1uLHRoaXMubG9hZGluZ0luZGljYXRvcj1pLHRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdz13aW5kb3d9aW5pdGlhbGl6ZShlKXtyZXR1cm4gdWwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e2JyYWludHJlZTp0LG1ldGhvZElkOm59PWU7aWYodGhpcy5icmFpbnRyZWU9dCx0aGlzLnBheW1lbnRNZXRob2QmJnRoaXMucGF5bWVudE1ldGhvZC5ub25jZXx8KHRoaXMucGF5bWVudE1ldGhvZD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhuKSksdGhpcy5wYXltZW50TWV0aG9kLmNsaWVudFRva2VuJiYobnVsbD09dD92b2lkIDA6dC5iYW5uZXJDb250YWluZXJJZCkpcmV0dXJuIHlpZWxkIHRoaXMubG9hZFBheXBhbCgpLHRoaXMubG9hZFBheXBhbENoZWNrb3V0SW5zdGFuY2UoKTtpZih0aGlzLnBheW1lbnRNZXRob2QuY2xpZW50VG9rZW4pcmV0dXJuIHRoaXMubG9hZFBheXBhbCgpO2NvbnN0IGk9eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG4pO2lmKHRoaXMucGF5bWVudE1ldGhvZD1pLmdldFBheW1lbnRNZXRob2RPclRocm93KG4pLG51bGw9PXQ/dm9pZCAwOnQuYmFubmVyQ29udGFpbmVySWQpcmV0dXJuIHRoaXMubG9hZFBheXBhbENoZWNrb3V0SW5zdGFuY2UoKTtpZighdGhpcy5wYXltZW50TWV0aG9kLmNsaWVudFRva2VuKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7cmV0dXJuIHRoaXMubG9hZFBheXBhbCgpfSl9ZXhlY3V0ZShlLHQpe3ZhciBuO3JldHVybiB1bCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDppfT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pLHtvbkVycm9yOm99PXRoaXMuYnJhaW50cmVlfHx7fSxhPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXMscz1hJiZhW1wiUEFZUEFMLTM1MjEuaGFuZGxpbmdfZGVjbGluZWRfZXJyb3JfYnJhaW50cmVlXCJdO2lmKCFpKXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTt0cnl7Y29uc3QgZT15aWVsZCB0aGlzLnByZXBhcmVQYXltZW50RGF0YShpLHIudXNlU3RvcmVDcmVkaXQpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihyLHQpLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KGUpfWNhdGNoKGUpe3RoaXMuaXNQcm92aWRlckVycm9yKGUpJiZzJiYoeWllbGQgdGhpcy5sb2FkUGF5cGFsKCksbnVsbD09PShuPXRoaXMucGF5cGFsQnV0dG9uUmVuZGVyKXx8dm9pZCAwPT09bnx8bi5jbG9zZSgpLHlpZWxkIHRoaXMubG9hZFBheXBhbENoZWNrb3V0SW5zdGFuY2UoKSx5aWVsZCBuZXcgUHJvbWlzZSgoZSx0KT0+e28mJlwiZnVuY3Rpb25cIj09dHlwZW9mIG8mJm8obmV3IEVycm9yKFwiSU5TVFJVTUVOVF9ERUNMSU5FRFwiKSksdCgpfSkpLHRoaXMuaGFuZGxlRXJyb3IoZSl9fSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXt2YXIgZTtyZXR1cm4gdGhpcy5icmFpbnRyZWVUb2tlbml6ZVBheWxvYWQ9dm9pZCAwLG51bGw9PT0oZT10aGlzLnBheXBhbEJ1dHRvblJlbmRlcil8fHZvaWQgMD09PWV8fGUuY2xvc2UoKSx0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS50ZWFyZG93bigpfXByZXBhcmVQYXltZW50RGF0YShlLHQpe3ZhciBuO3JldHVybiB1bCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxyPWkuZ2V0T3V0c3RhbmRpbmdCYWxhbmNlKHQpLG89aS5nZXRTdG9yZUNvbmZpZygpO2lmKCFyKXRocm93IG5ldyBqdChrdC5NaXNzaW5nQ2hlY2tvdXQpO2lmKCFvKXRocm93IG5ldyBqdChrdC5NaXNzaW5nQ2hlY2tvdXRDb25maWcpO2lmKCF0aGlzLnBheW1lbnRNZXRob2QpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7Y29uc3R7Y3VycmVuY3k6YSxzdG9yZVByb2ZpbGU6e3N0b3JlTGFuZ3VhZ2U6c319PW8se25vbmNlOmQsY29uZmlnOntpc1ZhdWx0aW5nRW5hYmxlZDpjfX09dGhpcy5wYXltZW50TWV0aG9kLHttZXRob2RJZDpsLHBheW1lbnREYXRhOnU9e319PWUsaD0obnVsbD09PShuPXRoaXMuYnJhaW50cmVlVG9rZW5pemVQYXlsb2FkKXx8dm9pZCAwPT09bj92b2lkIDA6bi5ub25jZSl8fGQ7aWYoaCl7Y29uc3QgdD15aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobCk7cmV0dXJuIHRoaXMucGF5bWVudE1ldGhvZD10LmdldFBheW1lbnRNZXRob2QobCksT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtwYXltZW50RGF0YTp0aGlzLmZvcm1hdHRlZFBheWxvYWQoaCl9KX1pZihTZCh1KXx8KHA9dSxCb29sZWFuKHAuaW5zdHJ1bWVudElkKSYmIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwLFwiY2NOdW1iZXJcIikmJiFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocCxcImNjQ3Z2XCIpKSl7aWYoIWMpdGhyb3cgbmV3IHJuKFwiVmF1bHRpbmcgaXMgZGlzYWJsZWQgYnV0IGEgdmF1bHRlZCBpbnN0cnVtZW50IHdhcyBiZWluZyB1c2VkIGZvciB0aGlzIHRyYW5zYWN0aW9uXCIpO3JldHVybiBQcm9taXNlLnJlc29sdmUoZSl9dmFyIHA7aWYoIVBkKHUpKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudCk7Y29uc3R7c2hvdWxkU2F2ZUluc3RydW1lbnQ6bSxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50Onl9PXU7aWYobSYmIWMpdGhyb3cgbmV3IHJuKFwiVmF1bHRpbmcgaXMgZGlzYWJsZWQgYnV0IHNob3VsZFNhdmVJbnN0cnVtZW50IGlzIHNldCB0byB0cnVlXCIpO2NvbnN0IGc9aS5nZXRTaGlwcGluZ0FkZHJlc3MoKSx2PWc/bGwoZyk6dm9pZCAwO3JldHVybiBQcm9taXNlLmFsbChbdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UucGF5cGFsKHthbW91bnQ6cixsb2NhbGU6cyxjdXJyZW5jeTphLmNvZGUsb2ZmZXJDcmVkaXQ6XCJicmFpbnRyZWVwYXlwYWxjcmVkaXRcIj09PXRoaXMucGF5bWVudE1ldGhvZC5pZCxzaGlwcGluZ0FkZHJlc3NPdmVycmlkZTp2LHNob3VsZFNhdmVJbnN0cnVtZW50Om18fCExLHNoaXBwaW5nQWRkcmVzc0VkaXRhYmxlOiExfSksdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2Vzc2lvbklkKCldKS50aGVuKChbe25vbmNlOnQsZGV0YWlsczpufT17fSxpXSk9Pk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGF5bWVudERhdGE6dGhpcy5mb3JtYXR0ZWRQYXlsb2FkKHQsbiYmbi5lbWFpbCxpLG0seSl9KSl9KX1mb3JtYXR0ZWRQYXlsb2FkKGUsdCxuLGkscil7cmV0dXJue2Zvcm1hdHRlZFBheWxvYWQ6e3ZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDppfHxudWxsLHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OnJ8fG51bGwsZGV2aWNlX2luZm86bnx8bnVsbCxwYXlwYWxfYWNjb3VudDp7dG9rZW46ZSxlbWFpbDp0fHxudWxsfX19fWxvYWRQYXlwYWxDaGVja291dEluc3RhbmNlKCl7cmV0dXJuIHVsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtjbGllbnRUb2tlbjplLGluaXRpYWxpemF0aW9uRGF0YTp0LGlkOm59PXRoaXMucGF5bWVudE1ldGhvZHx8e307aWYoIWUpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTt0cnl7dGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZShlKTtjb25zdCBpPXtjdXJyZW5jeTp0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGUsaW50ZW50Om51bGw9PXQ/dm9pZCAwOnQuaW50ZW50LGlzQ3JlZGl0RW5hYmxlZDpudWxsPT10P3ZvaWQgMDp0LmlzQ3JlZGl0RW5hYmxlZH0scj1cImJyYWludHJlZXBheXBhbGNyZWRpdFwiPT09bnx8IShudWxsPT10P3ZvaWQgMDp0LmlzQ3JlZGl0RW5hYmxlZCk7eWllbGQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5cGFsQ2hlY2tvdXQoaSxlPT57dmFyIHQ7ciYmbiYmKG51bGw9PT0odD10aGlzLmJyYWludHJlZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuYmFubmVyQ29udGFpbmVySWQpJiZ0aGlzLnJlbmRlclBheVBhbE1lc3NhZ2VzKG4sdGhpcy5icmFpbnRyZWUuYmFubmVyQ29udGFpbmVySWQpLHRoaXMucmVuZGVyUGF5UGFsQnV0dG9uKGUpfSx0aGlzLmhhbmRsZUVycm9yKX1jYXRjaChlKXt0aGlzLmhhbmRsZUVycm9yKGUpfX0pfXJlbmRlclBheVBhbE1lc3NhZ2VzKGUsdCl7dGhpcy5icmFpbnRyZWVNZXNzYWdlcy5yZW5kZXIoZSx0LGlyLlBBWU1FTlQpfXJlbmRlclBheVBhbEJ1dHRvbihlKXtjb25zdHtvblBheW1lbnRFcnJvcjp0LHN1Ym1pdEZvcm06bixvblJlbmRlckJ1dHRvbjppLGNvbnRhaW5lcklkOnIsb25FcnJvcjpvfT10aGlzLmJyYWludHJlZXx8e307aWYoIXIpcmV0dXJuO2lmKCF0aGlzLnBheW1lbnRNZXRob2QpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7dGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPXIuc3BsaXQoXCIjXCIpWzFdO2NvbnN0e2lkOmEsY29uZmlnOnt0ZXN0TW9kZTpzfX09dGhpcy5wYXltZW50TWV0aG9kLHtwYXlwYWw6ZH09dGhpcy5icmFpbnRyZWVIb3N0V2luZG93LGM9bnVsbD09ZD92b2lkIDA6ZC5GVU5ESU5HLlBBWVBBTDtkJiZjPyh0aGlzLnBheXBhbEJ1dHRvblJlbmRlcj1kLkJ1dHRvbnMoe2VudjpzP1wic2FuZGJveFwiOlwicHJvZHVjdGlvblwiLGNvbW1pdDohMSxmdW5kaW5nU291cmNlOmMsb25DbGljazooKT0+e3RoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMCl9LGNyZWF0ZU9yZGVyOigpPT50aGlzLnNldHVwUGF5bWVudChlLGEsdCksb25BcHByb3ZlOnQ9PnVsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0aGlzLmJyYWludHJlZVRva2VuaXplUGF5bG9hZD15aWVsZCB0aGlzLnRva2VuaXplUGF5bWVudE9yVGhyb3codCxlKSxuJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiZuKCl9KSxvbkNhbmNlbDooKT0+e3RoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSl9LG9uRXJyb3I6ZT0+e3RoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksbnVsbD09b3x8byhlKX19KSxpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiZpKCksdGhpcy5wYXlwYWxCdXR0b25SZW5kZXIuaXNFbGlnaWJsZSgpJiZ0aGlzLnBheXBhbEJ1dHRvblJlbmRlci5yZW5kZXIoYCR7cn1gKSk6dGhpcy5yZW1vdmVFbGVtZW50KHIuc3BsaXQoXCIjXCIpWzFdKX1zZXR1cFBheW1lbnQoZSx0LG4pe3JldHVybiB1bCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTt0cnl7Y29uc3Qgbj1pLmdldEN1c3RvbWVyKCkscj1pLmdldFBheW1lbnRNZXRob2RPclRocm93KHQpLG89aS5nZXRDaGVja291dE9yVGhyb3coKS5vdXRzdGFuZGluZ0JhbGFuY2UsYT1pLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmN1cnJlbmN5LmNvZGUscz1pLmdldFNoaXBwaW5nQWRkcmVzcygpfHwobnVsbD09bj92b2lkIDA6bi5hZGRyZXNzZXNbMF0pLGQ9cz9sbChzKTp2b2lkIDA7cmV0dXJuIHlpZWxkIGUuY3JlYXRlUGF5bWVudCh7ZmxvdzpcImNoZWNrb3V0XCIsZW5hYmxlU2hpcHBpbmdBZGRyZXNzOiEwLHNoaXBwaW5nQWRkcmVzc0VkaXRhYmxlOiExLHNoaXBwaW5nQWRkcmVzc092ZXJyaWRlOmQsYW1vdW50Om8sY3VycmVuY3k6YSxvZmZlckNyZWRpdDohMSxpbnRlbnQ6ci5pbml0aWFsaXphdGlvbkRhdGEuaW50ZW50fSl9Y2F0Y2goZSl7dGhyb3cgbiYmKGNsKGUpfHxlIGluc3RhbmNlb2YgQnQpJiZuKGUpLGV9fSl9dG9rZW5pemVQYXltZW50T3JUaHJvdyhlLHQsbil7cmV0dXJuIHVsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7cmV0dXJuIHlpZWxkIHQudG9rZW5pemVQYXltZW50KGUpfWNhdGNoKGUpe3Rocm93IG4mJihjbChlKXx8ZSBpbnN0YW5jZW9mIEJ0KSYmbihlKSxlfX0pfWxvYWRQYXlwYWwoKXtyZXR1cm4gdWwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e2NsaWVudFRva2VuOmUsaW5pdGlhbGl6YXRpb25EYXRhOnR9PXRoaXMucGF5bWVudE1ldGhvZHx8e307aWYoIWV8fCF0KXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7dHJ5e3RoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmluaXRpYWxpemUoZSkseWllbGQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5cGFsKCl9Y2F0Y2goZSl7dGhpcy5oYW5kbGVFcnJvcihlKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9KX1oYW5kbGVFcnJvcihlKXtpZighY2woZSkpdGhyb3cgZTtpZihcIlBBWVBBTF9QT1BVUF9DTE9TRURcIj09PWUuY29kZSl0aHJvdyBuZXcgTW4oZS5tZXNzYWdlKTt0aHJvdyBuZXcgTGkoZS5tZXNzYWdlKX1pc1Byb3ZpZGVyRXJyb3IoZSl7dmFyIHQsbixpO3JldHVybiEhZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcImVycm9yc1wiaW4gZX0oZSkmJlwiMjA0NlwiPT09KG51bGw9PT0oaT1udWxsPT09KG49KChudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5lcnJvcnMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmZpbHRlcihlPT5lLnByb3ZpZGVyX2Vycm9yKSl8fFtdKVswXSl8fHZvaWQgMD09PW4/dm9pZCAwOm4ucHJvdmlkZXJfZXJyb3IpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmNvZGUpfXJlbW92ZUVsZW1lbnQoZSl7Y29uc3QgdD1lJiZkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlKTt0JiZ0LnJlbW92ZSgpfXRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZSl7ZSYmdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyP3RoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik6dGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKX19Y29uc3QgcGw9bm4oZT0+e2NvbnN0IHQ9d2luZG93LG49bmV3IHNsLGk9bmV3IHBuKGUpLHI9bmV3IG9yKG5ldyBEbihhKCksdCxpKSx0LG4pLG89bmV3IGFsKGUpO3JldHVybiBuZXcgaGwoZSxyLG8sbmV3IEJhKHtjb250YWluZXJTdHlsZXM6ZGx9KSl9LFt7aWQ6XCJicmFpbnRyZWVwYXlwYWxcIn0se2lkOlwiYnJhaW50cmVlcGF5cGFsY3JlZGl0XCJ9XSk7Y2xhc3MgbWx7Y29uc3RydWN0b3IoZSl7dGhpcy5yZXF1ZXN0U2VuZGVyPWV9Z2V0T3JkZXJTdGF0dXMoZT1cImJyYWludHJlZWxvY2FsbWV0aG9kc1wiLHQpe3JldHVybiBuPXRoaXMsaT12b2lkIDAsbz1mdW5jdGlvbiooKXtjb25zdCBuPWAvYXBpL3N0b3JlZnJvbnQvaW5pdGlhbGl6YXRpb24vJHtlfWAsaT1PYmplY3QuYXNzaWduKHtcIlgtQVBJLUlOVEVSTkFMXCI6WG4sXCJDb250ZW50LVR5cGVcIjp0aS5Kc29ufSxuaSk7cmV0dXJuKHlpZWxkIHRoaXMucmVxdWVzdFNlbmRlci5nZXQobixPYmplY3QuYXNzaWduKHtoZWFkZXJzOml9LHQpKSkuYm9keX0sbmV3KChyPXZvaWQgMCl8fChyPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoby5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKG8udGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2Ygcj9uOm5ldyByKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKG89by5hcHBseShuLGl8fFtdKSkubmV4dCgpKX0pO3ZhciBuLGkscixvfX12YXIgeWw9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgZ2x7Y29uc3RydWN0b3IoZSx0LG4saSxyPTNlMyxvPTNlNSl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5icmFpbnRyZWVTZGs9dCx0aGlzLmJyYWludHJlZVJlcXVlc3RTZW5kZXI9bix0aGlzLmxvYWRpbmdJbmRpY2F0b3I9aSx0aGlzLnBvbGxpbmdJbnRlcnZhbD1yLHRoaXMubWF4UG9sbGluZ0ludGVydmFsVGltZT1vLHRoaXMuaXNMUE1zVXBkYXRlRXhwZXJpbWVudEVuYWJsZWQ9ITEsdGhpcy5wb2xsaW5nVGltZXI9MCx0aGlzLnN0b3BQb2xsaW5nPVYsdGhpcy5pc1BvbGxpbmdFbmFibGVkPSExfWluaXRpYWxpemUoZSl7cmV0dXJuIHlsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtnYXRld2F5SWQ6dCxtZXRob2RJZDpuLGJyYWludHJlZWxvY2FsbWV0aG9kczppfT1lO2lmKHRoaXMuZ2F0ZXdheUlkPXQsIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5nYXRld2F5SWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIWkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJyYWludHJlZWxvY2FsbWV0aG9kc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt0aGlzLmJyYWludHJlZWxvY2FsbWV0aG9kcz1pLHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj1pLmNvbnRhaW5lci5zcGxpdChcIiNcIilbMV0seWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKHQpO2NvbnN0IHI9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksbz1yLmdldFBheW1lbnRNZXRob2RPclRocm93KHQpLHtjbGllbnRUb2tlbjphLGNvbmZpZzpzLGluaXRpYWxpemF0aW9uRGF0YTpkfT1vLGM9ci5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzO2lmKHRoaXMuaXNQb2xsaW5nRW5hYmxlZD1jbihjLFwiUEFZUEFMLTUyNTguYnJhaW50cmVlX2xvY2FsX21ldGhvZHNfcG9sbGluZ1wiKSx0aGlzLmlzTFBNc1VwZGF0ZUV4cGVyaW1lbnRFbmFibGVkPWNuKGMsXCJQQVlQQUwtNDg1My5hZGRfbmV3X3BheW1lbnRfZmxvd19mb3JfYnJhaW50cmVlX2xwbXNcIiksIWF8fCFkfHwhcy5tZXJjaGFudElkKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7dHJ5e3RoaXMuYnJhaW50cmVlU2RrLmluaXRpYWxpemUoYSksdGhpcy5pc05vbkluc3RhbnRQYXltZW50TWV0aG9kKG4pfHwodGhpcy5icmFpbnRyZWVMb2NhbFBheW1lbnQ9eWllbGQgdGhpcy5icmFpbnRyZWVTZGsuZ2V0QnJhaW50cmVlTG9jYWxQYXltZW50KHMubWVyY2hhbnRJZCkpfWNhdGNoKGUpe3RoaXMuaGFuZGxlRXJyb3IoZSl9fSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXtyZXR1cm4geWwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITEpLFByb21pc2UucmVzb2x2ZSgpfSl9ZXhlY3V0ZShlLHQpe3JldHVybiB5bCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pO2lmKCFuKXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTtjb25zdHttZXRob2RJZDpyfT1uO3RoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMCksdGhpcy5pc05vbkluc3RhbnRQYXltZW50TWV0aG9kKHIpP3lpZWxkIHRoaXMuZXhlY3V0ZVdpdGhOb3RJbnN0YW50TFBNKHIpOnlpZWxkIHRoaXMuZXhlY3V0ZVdpdGhJbnN0YW50TFBNKHIsaSx0KX0pfWV4ZWN1dGVXaXRoTm90SW5zdGFudExQTShlKXtyZXR1cm4geWwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdCB0PXlpZWxkIHRoaXMuZ2V0TFBNc0Jhc2ljUGF5bWVudERhdGEoKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoKSx5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7bWV0aG9kSWQ6ZSxwYXltZW50RGF0YTpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse2Zvcm1hdHRlZFBheWxvYWQ6e21ldGhvZDplfX0pfSl9Y2F0Y2goZSl7aWYodGhpcy5pc0JyYWludHJlZVJlZGlyZWN0RXJyb3IoZSkpe2NvbnN0IHQ9ZS5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkLmRhdGEucmVkaXJlY3RfdXJsO3JldHVybiBuZXcgUHJvbWlzZSgoZSxuKT0+e3dpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHQpLHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksbigpfSl9cmV0dXJuIHRoaXMuaGFuZGxlRXJyb3IoZSksUHJvbWlzZS5yZWplY3QoZSl9fSl9ZXhlY3V0ZVdpdGhJbnN0YW50TFBNKGUsdCxuKXtyZXR1cm4geWwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0aGlzLmJyYWludHJlZUxvY2FsUGF5bWVudCl0aHJvdyBuZXcgQmk7eWllbGQgbmV3IFByb21pc2UoKGkscik9Pnt2YXIgbztudWxsPT09KG89dGhpcy5icmFpbnRyZWVMb2NhbFBheW1lbnQpfHx2b2lkIDA9PT1vfHxvLnN0YXJ0UGF5bWVudCh0aGlzLmdldEluc3RhbnRMUE1Db25maWcoZSx0LG4pLHRoaXMuZ2V0SW5zdGFudExQTUNhbGxiYWNrKGkscixlLHQsbikpfSl9KX1nZXRMUE1zQmFzaWNQYXltZW50RGF0YSgpe3JldHVybiB5bCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7ZGV2aWNlRGF0YTplfT15aWVsZCB0aGlzLmJyYWludHJlZVNkay5nZXREYXRhQ29sbGVjdG9yT3JUaHJvdygpO3JldHVybntkZXZpY2VTZXNzaW9uSWQ6ZX19KX1nZXRJbnN0YW50TFBNQ29uZmlnKGUsdCxuKXtjb25zdCBpPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHI9aS5nZXRDYXJ0T3JUaHJvdygpLG89aS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKSx7Zmlyc3ROYW1lOmEsbGFzdE5hbWU6cyxjb3VudHJ5Q29kZTpkfT1vLHtjdXJyZW5jeTpjLGVtYWlsOmwsbGluZUl0ZW1zOnV9PXIsaD11LnBoeXNpY2FsSXRlbXMubGVuZ3RoPjAscD1pLmdldENoZWNrb3V0T3JUaHJvdygpLm91dHN0YW5kaW5nQmFsYW5jZSxtPWkuZ2V0U3RvcmVDb25maWdPclRocm93KCkubGlua3MuY2hlY2tvdXRMaW5rO3JldHVybntwYXltZW50VHlwZTplLGFtb3VudDpwLGZhbGxiYWNrOnt1cmw6bSxidXR0b25UZXh0OlwiQ29tcGxldGUgUGF5bWVudFwifSxjdXJyZW5jeUNvZGU6Yy5jb2RlLHNoaXBwaW5nQWRkcmVzc1JlcXVpcmVkOmgsZW1haWw6bCxnaXZlbk5hbWU6YSxzdXJuYW1lOnMsYWRkcmVzczp7Y291bnRyeUNvZGU6ZH0sb25QYXltZW50U3RhcnQ6KGkscik9PnlsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy5pc0xQTXNVcGRhdGVFeHBlcmltZW50RW5hYmxlZClyZXR1cm4gdGhpcy5vcmRlcklkPWkucGF5bWVudElkLHZvaWQgcigpO2NvbnN0IG89eWllbGQgdGhpcy5nZXRMUE1zQmFzaWNQYXltZW50RGF0YSgpLGE9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG8pLHtmb3JtYXR0ZWRQYXlsb2FkOnttZXRob2Q6ZSxbYCR7ZX1fYWNjb3VudGBdOntvcmRlcl9pZDppLnBheW1lbnRJZH19fSk7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih0LG4pLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHttZXRob2RJZDplLHBheW1lbnREYXRhOmF9KX1jYXRjaCh0KXtpZih0aGlzLmlzQnJhaW50cmVlT3JkZXJTYXZlZFJlc3BvbnNlKHQpJiZ0LmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQuZGF0YS5vcmRlcl9pZF9zYXZlZF9zdWNjZXNzZnVsbHkpcmV0dXJuIHIoKSx0aGlzLmlzUG9sbGluZ0VuYWJsZWQ/bmV3IFByb21pc2UoKHQsbik9Pnt0aGlzLmluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKGUsdCxuLHRoaXMuZ2F0ZXdheUlkKX0pOnZvaWQgMDt0aHJvdyB0fX0pfX1nZXRJbnN0YW50TFBNQ2FsbGJhY2soZSx0LG4saSxyKXtjb25zdCBvPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCk7cmV0dXJuKGEscyk9PnlsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZihhKXJldHVyblwiTE9DQUxfUEFZTUVOVF9XSU5ET1dfQ0xPU0VEXCI9PT1hLmNvZGU/KHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksdGhpcy5yZXNldFBvbGxpbmdNZWNoYW5pc20oKSx0KCkpOih0aGlzLmlzUG9sbGluZ0VuYWJsZWQmJnRoaXMucmVzZXRQb2xsaW5nTWVjaGFuaXNtKCksdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCExKSx0KG5ldyBCaSkpO2NvbnN0IGQ9eWllbGQgdGhpcy5nZXRMUE1zQmFzaWNQYXltZW50RGF0YSgpLGM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGQpLHtmb3JtYXR0ZWRQYXlsb2FkOnttZXRob2Q6bixbYCR7bn1fYWNjb3VudGBdOk9iamVjdC5hc3NpZ24oe2VtYWlsOm8uZW1haWwsdG9rZW46cy5ub25jZX0sdGhpcy5pc0xQTXNVcGRhdGVFeHBlcmltZW50RW5hYmxlZD97fTp7b3JkZXJfaWQ6dGhpcy5vcmRlcklkfSl9fSk7dHJ5e3JldHVybiB0aGlzLmlzTFBNc1VwZGF0ZUV4cGVyaW1lbnRFbmFibGVkfHwoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGkscikpLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHttZXRob2RJZDpuLHBheW1lbnREYXRhOmN9KSxlKHZvaWQgMCl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuaGFuZGxlRXJyb3IoZSksdChlKX19KX10b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGUpe2UmJnRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj90aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpOnRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCl9aGFuZGxlRXJyb3IoZSl7Y29uc3R7b25FcnJvcjp0fT10aGlzLmJyYWludHJlZWxvY2FsbWV0aG9kc3x8e307dGhpcy5pc1BvbGxpbmdFbmFibGVkJiZ0aGlzLnJlc2V0UG9sbGluZ01lY2hhbmlzbSgpLHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdChlKX1pc05vbkluc3RhbnRQYXltZW50TWV0aG9kKGUpe3JldHVybiBlLnRvVXBwZXJDYXNlKClpbiB2bn1pc0JyYWludHJlZVJlZGlyZWN0RXJyb3IoZSl7dmFyIHQ7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiExO2NvbnN0e2JvZHk6bn09ZTtyZXR1cm4hIW4mJiEhKG51bGw9PT0odD1uLmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkKXx8dm9pZCAwPT09dD92b2lkIDA6dC5kYXRhLnJlZGlyZWN0X3VybCl9aXNCcmFpbnRyZWVPcmRlclNhdmVkUmVzcG9uc2UoZSl7dmFyIHQ7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiExO2NvbnN0e2JvZHk6bn09ZTtyZXR1cm4hIW4mJihudWxsPT09KHQ9bi5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZGF0YS5oYXNPd25Qcm9wZXJ0eShcIm9yZGVyX2lkX3NhdmVkX3N1Y2Nlc3NmdWxseVwiKSl9aW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oZSx0LG4saSl7cmV0dXJuIHlsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCBuZXcgUHJvbWlzZSgoZSx0KT0+e2NvbnN0IG49c2V0VGltZW91dChlLHRoaXMucG9sbGluZ0ludGVydmFsKTt0aGlzLnN0b3BQb2xsaW5nPSgpPT4oY2xlYXJUaW1lb3V0KG4pLHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksdCgpKX0pO3RyeXt0aGlzLnBvbGxpbmdUaW1lcis9dGhpcy5wb2xsaW5nSW50ZXJ2YWw7Y29uc3Qgcj15aWVsZCB0aGlzLmJyYWludHJlZVJlcXVlc3RTZW5kZXIuZ2V0T3JkZXJTdGF0dXMoaSx7cGFyYW1zOnt1c2VNZXRhZGF0YTohMX19KSxvPXIuc3RhdHVzPT09Z24uUGVuZGluZyxhPXIuc3RhdHVzPT09Z24uQ29tcGxldGVkLHM9ci5zdGF0dXM9PT1nbi5GYWlsZWQ7aWYoYSlyZXR1cm4gdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCksdCgpO2lmKHMpcmV0dXJuIG4oKTtpZighYSYmbyYmdGhpcy5wb2xsaW5nVGltZXI8dGhpcy5tYXhQb2xsaW5nSW50ZXJ2YWxUaW1lKXJldHVybiB5aWVsZCB0aGlzLmluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKGUsdCxuLGkpO3lpZWxkIHRoaXMucmVpbml0aWFsaXplU3RyYXRlZ3koe21ldGhvZElkOmUsZ2F0ZXdheUlkOmksYnJhaW50cmVlbG9jYWxtZXRob2RzOnRoaXMuYnJhaW50cmVlbG9jYWxtZXRob2RzfSksdGhpcy5oYW5kbGVFcnJvcihuZXcgc2MpfWNhdGNoKGUpe24oKX19KX1kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCl7dGhpcy5zdG9wUG9sbGluZygpLHRoaXMucG9sbGluZ1RpbWVyPTB9cmVzZXRQb2xsaW5nTWVjaGFuaXNtKCl7dGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCl9cmVpbml0aWFsaXplU3RyYXRlZ3koZSl7cmV0dXJuIHlsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmRlaW5pdGlhbGl6ZSgpLHlpZWxkIHRoaXMuaW5pdGlhbGl6ZShlKX0pfX1jb25zdCB2bD1ubihlPT57Y29uc3QgdD13aW5kb3csaT1uZXcgcG4oZSkscj1uZXcgRW4obmV3IERuKGEoKSx0LGkpKSxvPW4oKSxzPW5ldyBtbChvKTtyZXR1cm4gbmV3IGdsKGUscixzLG5ldyBCYSh7c3R5bGVzOntiYWNrZ3JvdW5kQ29sb3I6XCJibGFja1wifX0pKX0sW3tnYXRld2F5OlwiYnJhaW50cmVlbG9jYWxtZXRob2RzXCJ9XSk7ZnVuY3Rpb24gZmwoZSl7cmV0dXJuISFlJiYoXCJhdXRoZW50aWNhdGlvblN0YXRlXCJpbiBlfHxcImFkZHJlc3Nlc1wiaW4gZXx8XCJpbnN0cnVtZW50c1wiaW4gZSl9dmFyIFNsPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIF9se2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmJyYWludHJlZUZhc3RsYW5lVXRpbHM9dCx0aGlzLmJyYWludHJlZVNkaz1ufWluaXRpYWxpemUoZSl7dmFyIHQ7cmV0dXJuIFNsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHttZXRob2RJZDpuLGJyYWludHJlZWZhc3RsYW5lOml9PWU7aWYoIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFpKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5icmFpbnRyZWVmYXN0bGFuZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighaS5vbkluaXR8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGkub25Jbml0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5icmFpbnRyZWVmYXN0bGFuZS5vbkluaXRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uJyk7aWYoIWkub25DaGFuZ2V8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGkub25DaGFuZ2UpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJyYWludHJlZWZhc3RsYW5lLm9uQ2hhbmdlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChuKTtjb25zdCByPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLG89ci5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhuKSx7aW5pdGlhbGl6YXRpb25EYXRhOmEsY2xpZW50VG9rZW46c309b3x8e30se2lzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZDpkfT1hfHx7fSxjPWNuKHIuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlcyxcIlBST0pFQ1QtNzA4MC5icmFpbnRyZWVfZmFzdGxhbmVfdGhyZWVfZHNcIik7dGhpcy5pczNEU0VuYWJsZWQ9by5jb25maWcuaXMzZHNFbmFibGVkLHMmJmMmJnRoaXMuYnJhaW50cmVlU2RrLmluaXRpYWxpemUocyk7Y29uc3QgbD1wcihkP251bGw9PT0odD1vLmluaXRpYWxpemF0aW9uRGF0YSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZmFzdGxhbmVTdHlsZXM6dm9pZCAwLGkuc3R5bGVzKTt5aWVsZCB0aGlzLmJyYWludHJlZUZhc3RsYW5lVXRpbHMuaW5pdGlhbGl6ZUJyYWludHJlZUZhc3RsYW5lT3JUaHJvdyhuLGwpLHRoaXMuc2hvdWxkUnVuQXV0aGVudGljYXRpb25GbG93KCkmJih5aWVsZCB0aGlzLmJyYWludHJlZUZhc3RsYW5lVXRpbHMucnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdygpKSx5aWVsZCB0aGlzLmluaXRpYWxpemVDYXJkQ29tcG9uZW50KCksdGhpcy5vbkVycm9yPWkub25FcnJvcixpLm9uSW5pdChlPT50aGlzLnJlbmRlckJyYWludHJlZUNhcmRDb21wb25lbnQoZSkpLGkub25DaGFuZ2UoKCk9PnRoaXMuaGFuZGxlQnJhaW50cmVlU3RvcmVkSW5zdHJ1bWVudENoYW5nZShuKSl9KX1leGVjdXRlKGUsdCl7cmV0dXJuIFNsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSk7aWYoIW4pdGhyb3cgbmV3IFlpKFtcInBheW1lbnRcIl0pO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihpLHQpO2NvbnN0IHI9eWllbGQgdGhpcy5wcmVwYXJlUGF5bWVudFBheWxvYWQobi5tZXRob2RJZCk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQociksdGhpcy5icmFpbnRyZWVGYXN0bGFuZVV0aWxzLnJlbW92ZVNlc3Npb25JZEZyb21Db29raWVzKCl9KX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBTbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuYnJhaW50cmVlQ2FyZENvbXBvbmVudD12b2lkIDAsUHJvbWlzZS5yZXNvbHZlKCl9KX1pbml0aWFsaXplQ2FyZENvbXBvbmVudCgpe3JldHVybiBTbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgZT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx7cGhvbmU6dCxmaXJzdE5hbWU6bixsYXN0TmFtZTppfT1lLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpLHI9YCR7bn0gJHtpfWAsbz17c3R5bGVzOnt9LGZpZWxkczpPYmplY3QuYXNzaWduKHtjYXJkaG9sZGVyTmFtZTp7cHJlZmlsbDpyLGVuYWJsZWQ6ITB9fSx0JiZ7cGhvbmVOdW1iZXI6e3ByZWZpbGw6dH19KX0sYT10aGlzLmJyYWludHJlZUZhc3RsYW5lVXRpbHMuZ2V0QnJhaW50cmVlRmFzdGxhbmVDb21wb25lbnRPclRocm93KCk7dGhpcy5icmFpbnRyZWVDYXJkQ29tcG9uZW50PXlpZWxkIGEobyl9KX1yZW5kZXJCcmFpbnRyZWVDYXJkQ29tcG9uZW50KGUpe2NvbnN0IHQ9dGhpcy5nZXRCcmFpbnRyZWVDYXJkQ29tcG9uZW50T3JUaHJvdygpO2lmKCFlKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwiY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3QucmVuZGVyKGUpfXByZXBhcmVQYXltZW50UGF5bG9hZChlKXt2YXIgdCxuO3JldHVybiBTbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxyPWkuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCksbz1gJHtyLmZpcnN0TmFtZX0gJHtyLmxhc3ROYW1lfWAsYT10aGlzLmdldFBheVBhbEluc3RydW1lbnRzKClbMF0scz15aWVsZCB0aGlzLmJyYWludHJlZUZhc3RsYW5lVXRpbHMuZ2V0RGV2aWNlU2Vzc2lvbklkKCksZD1jbihpLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXMsXCJQUk9KRUNULTcwODAuYnJhaW50cmVlX2Zhc3RsYW5lX3RocmVlX2RzXCIpO2lmKGEpe2NvbnN0IHQ9dGhpcy5pczNEU0VuYWJsZWQmJmQ/eWllbGQgdGhpcy5nZXQzRFMoYS5iaWdwYXlUb2tlbiwobnVsbD09YT92b2lkIDA6YS5paW4pfHxcIlwiKTp2b2lkIDA7cmV0dXJue21ldGhvZElkOmUscGF5bWVudERhdGE6e2RldmljZVNlc3Npb25JZDpzLGZvcm1hdHRlZFBheWxvYWQ6e3BheXBhbF9mYXN0bGFuZV90b2tlbjp7dG9rZW46dHx8YS5iaWdwYXlUb2tlbn19fX19Y29uc3R7Z2V0UGF5bWVudFRva2VuOmN9PXRoaXMuZ2V0QnJhaW50cmVlQ2FyZENvbXBvbmVudE9yVGhyb3coKSxsPXlpZWxkIGMoe25hbWU6e2Z1bGxOYW1lOm99LGJpbGxpbmdBZGRyZXNzOnRoaXMubWFwVG9QYXlQYWxBZGRyZXNzKHIpfSksdT0obnVsbD09PShuPW51bGw9PT0odD1sLnBheW1lbnRTb3VyY2UuY2FyZCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuYmluRGV0YWlscyl8fHZvaWQgMD09PW4/dm9pZCAwOm4uYmluKXx8XCJcIixoPXRoaXMuaXMzRFNFbmFibGVkJiZkP3lpZWxkIHRoaXMuZ2V0M0RTKGwuaWQsdSk6dm9pZCAwO3JldHVybnttZXRob2RJZDplLHBheW1lbnREYXRhOntkZXZpY2VTZXNzaW9uSWQ6cyxub25jZTpofHxsLmlkfX19KX1nZXQzRFMoZSx0KXtyZXR1cm4gU2wodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksaT15aWVsZCB0aGlzLmJyYWludHJlZVNkay5nZXRCcmFpbnRyZWVUaHJlZURTKCkscj1uLmdldE9yZGVyT3JUaHJvdygpO3JldHVybiBuZXcgUHJvbWlzZSgobixvKT0+e2kudmVyaWZ5Q2FyZCh7YW1vdW50Om51bGw9PXI/dm9pZCAwOnIub3JkZXJBbW91bnQsbm9uY2U6ZSxiaW46dCxvbkxvb2t1cENvbXBsZXRlOihlLHQpPT57aS5vbihcImN1c3RvbWVyLWNhbmNlbGVkXCIsKCk9PntcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9uRXJyb3ImJnRoaXMub25FcnJvcihuZXcgTW4pLG8obmV3IE1uKX0pLHQoKX19LChlLHQpPT4oZSYmXCJUSFJFRURTX1ZFUklGWV9DQVJEX0NBTkNFTEVEX0JZX01FUkNIQU5UXCI9PT1lLmNvZGUmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9uRXJyb3ImJnRoaXMub25FcnJvcihuZXcgTW4pLG8obmV3IE1uKSksbih0Lm5vbmNlKSkpfSl9KX1tYXBUb1BheVBhbEFkZHJlc3MoZSl7cmV0dXJue3N0cmVldEFkZHJlc3M6KG51bGw9PWU/dm9pZCAwOmUuYWRkcmVzczEpfHxcIlwiLGxvY2FsaXR5OihudWxsPT1lP3ZvaWQgMDplLmNpdHkpfHxcIlwiLHJlZ2lvbjoobnVsbD09ZT92b2lkIDA6ZS5zdGF0ZU9yUHJvdmluY2VDb2RlKXx8KG51bGw9PWU/dm9pZCAwOmUuc3RhdGVPclByb3ZpbmNlKXx8XCJcIixwb3N0YWxDb2RlOihudWxsPT1lP3ZvaWQgMDplLnBvc3RhbENvZGUpfHxcIlwiLGNvdW50cnlDb2RlQWxwaGEyOihudWxsPT1lP3ZvaWQgMDplLmNvdW50cnlDb2RlKXx8XCJcIn19c2hvdWxkUnVuQXV0aGVudGljYXRpb25GbG93KCl7Y29uc3QgZT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx0PWUuZ2V0Q2FydE9yVGhyb3coKSxuPWUuZ2V0Q3VzdG9tZXJPclRocm93KCksaT1lLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCkscj1mbChpKT9pOnt9LG89dGhpcy5icmFpbnRyZWVGYXN0bGFuZVV0aWxzLmdldFNlc3Npb25JZEZyb21Db29raWVzKCk7cmV0dXJuISghbi5pc0d1ZXN0fHwobnVsbD09cj92b2lkIDA6ci5hdXRoZW50aWNhdGlvblN0YXRlKT09PWZuLkNBTkNFTEVEfHwobnVsbD09cj92b2lkIDA6ci5hdXRoZW50aWNhdGlvblN0YXRlKXx8byE9PXQuaWQpfWdldEJyYWludHJlZUNhcmRDb21wb25lbnRPclRocm93KCl7aWYoIXRoaXMuYnJhaW50cmVlQ2FyZENvbXBvbmVudCl0aHJvdyBuZXcgWHQ7cmV0dXJuIHRoaXMuYnJhaW50cmVlQ2FyZENvbXBvbmVudH1nZXRQYXlQYWxJbnN0cnVtZW50cygpe2NvbnN0IGU9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJPclRocm93KCk7cmV0dXJuKGZsKGUpP2U6e30pLmluc3RydW1lbnRzfHxbXX1oYW5kbGVCcmFpbnRyZWVTdG9yZWRJbnN0cnVtZW50Q2hhbmdlKGUpe3JldHVybiBTbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLmJyYWludHJlZUZhc3RsYW5lVXRpbHMuZ2V0QnJhaW50cmVlRmFzdGxhbmVPclRocm93KCkse3NlbGVjdGlvbkNoYW5nZWQ6bixzZWxlY3RlZENhcmQ6aX09eWllbGQgdC5wcm9maWxlLnNob3dDYXJkU2VsZWN0b3IoKTtpZihuKXtjb25zdCB0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCksbj1mbCh0KT90Ont9LHI9dGhpcy5icmFpbnRyZWVGYXN0bGFuZVV0aWxzLm1hcFBheVBhbFRvQmNJbnN0cnVtZW50KGUsW2ldKTtpZihyJiZyLmxlbmd0aD4wKXJldHVybiB5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG4pLHtpbnN0cnVtZW50czpbLi4ucl19KSksclswXX19KX19Y29uc3Qgd2w9bm4oZT0+e2NvbnN0IHQ9d2luZG93LG49bmV3IHBuKGUpLGk9bmV3IG9yKG5ldyBEbihhKCksdCxuKSx0KSxyPW5ldyB2cihlLGkpLG89bmV3IERuKGEoKSx0LG4pLHM9bmV3IEVuKG8pO3JldHVybiBuZXcgX2woZSxyLHMpfSxbe2lkOlwiYnJhaW50cmVlYWNjZWxlcmF0ZWRjaGVja291dFwifV0pO3ZhciBDbD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBJbHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlPXR9aW5pdGlhbGl6ZShlKXtyZXR1cm4gQ2wodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOnR9PWU7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKHQpO2NvbnN0IG49dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7dGhpcy52ZW5tb09wdGlvbnM9ZS5icmFpbnRyZWV2ZW5tbztjb25zdCBpPW4uZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codCk7eWllbGQgdGhpcy5pbml0aWFsaXplQnJhaW50cmVlVmVubW8oaSl9KX1leGVjdXRlKGUpe3JldHVybiBDbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDp0fT1lLG49ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pO2lmKCF0KXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTt0cnl7Y29uc3QgZT15aWVsZCB0aGlzLnByZXBhcmVQYXltZW50RGF0YSh0KTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIobikseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoZSl9Y2F0Y2goZSl7dGhpcy5oYW5kbGVFcnJvcihlKX19KX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBDbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLnRlYXJkb3duKCksUHJvbWlzZS5yZXNvbHZlKCl9KX1oYW5kbGVFcnJvcihlKXtpZighQ24oZSkpdGhyb3cgZTtpZihcIlBBWVBBTF9QT1BVUF9DTE9TRURcIj09PWUuY29kZSl0aHJvdyBuZXcgTW4oZS5tZXNzYWdlKTt0aHJvdyBuZXcgTGkoZS5tZXNzYWdlKX1pbml0aWFsaXplQnJhaW50cmVlVmVubW8oZSl7dmFyIHQ7cmV0dXJuIENsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtjbGllbnRUb2tlbjpufT1lO2lmKCFuKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3QgaT1jbih0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzLFwiUEFZUEFMLTU0MDYuYnJhaW50cmVlX3Zlbm1vX3dlYl9mYWxsYmFja19zdXBwb3J0XCIpO3RyeXt0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5pbml0aWFsaXplKG4pLHRoaXMuYnJhaW50cmVlVmVubW9DaGVja291dD15aWVsZCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXRWZW5tb0NoZWNrb3V0KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx2b2lkIDAhPT0obnVsbD09PSh0PXRoaXMudmVubW9PcHRpb25zKXx8dm9pZCAwPT09dD92b2lkIDA6dC5hbGxvd0Rlc2t0b3ApP3thbGxvd0Rlc2t0b3A6dGhpcy52ZW5tb09wdGlvbnMuYWxsb3dEZXNrdG9wfTp7fSksaT97bW9iaWxlV2ViRmFsbEJhY2s6aX06e30pKX1jYXRjaChlKXt0aGlzLmhhbmRsZUVycm9yKGUpfX0pfXByZXBhcmVQYXltZW50RGF0YShlKXtyZXR1cm4gQ2wodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse25vbmNlOm59PXQuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZS5tZXRob2RJZCk7aWYobilyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtwYXltZW50RGF0YTp0aGlzLmZvcm1hdHRlZFBheWxvYWQobil9KTtjb25zdCBpPXlpZWxkIHRoaXMuYnJhaW50cmVlVmVubW9Ub2tlbml6ZSgpLHI9eWllbGQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2Vzc2lvbklkKCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGF5bWVudERhdGE6dGhpcy5mb3JtYXR0ZWRQYXlsb2FkKGkubm9uY2UsaS5kZXRhaWxzLmVtYWlsLHIpfSl9KX1mb3JtYXR0ZWRQYXlsb2FkKGUsdCxuKXtyZXR1cm57Zm9ybWF0dGVkUGF5bG9hZDp7dmF1bHRfcGF5bWVudF9pbnN0cnVtZW50Om51bGwsc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6bnVsbCxkZXZpY2VfaW5mbzpufHxudWxsLHBheXBhbF9hY2NvdW50Ont0b2tlbjplLGVtYWlsOnR8fG51bGx9fX19YnJhaW50cmVlVmVubW9Ub2tlbml6ZSgpe3JldHVybiBuZXcgUHJvbWlzZSgoZSx0KT0+e3ZhciBuO251bGw9PT0obj10aGlzLmJyYWludHJlZVZlbm1vQ2hlY2tvdXQpfHx2b2lkIDA9PT1ufHxuLnRva2VuaXplKChuLGkpPT57aWYobilyZXR1cm4gdChuKTtlKGkpfSl9KX19Y29uc3QgYmw9bm4oZT0+e2NvbnN0IHQ9d2luZG93LG49YSgpLGk9bmV3IHBuKGUpLHI9bmV3IERuKG4sdCxpKSxvPW5ldyBvcihyLHQpO3JldHVybiBuZXcgSWwoZSxvKX0sW3tpZDpcImJyYWludHJlZXZlbm1vXCJ9XSk7dmFyIFBsPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIE9se2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZT10LHRoaXMuYnJhaW50cmVlSG9zdGVkRm9ybT1ufWluaXRpYWxpemUoZSl7cmV0dXJuIFBsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHttZXRob2RJZDp0LGdhdGV3YXlJZDpuLGJyYWludHJlZTppfT1lO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZCh0KTtjb25zdCByPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO3RoaXMucGF5bWVudE1ldGhvZD1yLmdldFBheW1lbnRNZXRob2RPclRocm93KHQpO2NvbnN0e2NsaWVudFRva2VuOm99PXRoaXMucGF5bWVudE1ldGhvZDtpZighbyl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO3RoaXMudGhyZWVEU2VjdXJlPW51bGw9PWk/dm9pZCAwOmkudGhyZWVEU2VjdXJlO3RyeXt0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5pbml0aWFsaXplKG8sdGhpcy50aHJlZURTZWN1cmUpLHRoaXMuaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQodCxuKSYmKG51bGw9PWk/dm9pZCAwOmkuZm9ybSkmJih5aWVsZCB0aGlzLmJyYWludHJlZUhvc3RlZEZvcm0uaW5pdGlhbGl6ZShpLmZvcm0saS51bnN1cHBvcnRlZENhcmRCcmFuZHMsbyksdGhpcy5pc0hvc3RlZEZvcm1Jbml0aWFsaXplZD10aGlzLmJyYWludHJlZUhvc3RlZEZvcm0uaXNJbml0aWFsaXplZCgpKSx0aGlzLmlzM2RzRW5hYmxlZD10aGlzLnBheW1lbnRNZXRob2QuY29uZmlnLmlzM2RzRW5hYmxlZCx0aGlzLmRldmljZVNlc3Npb25JZD15aWVsZCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXRTZXNzaW9uSWQoKSx0aGlzLnNob3VsZEluaXRpYWxpemVCcmFpbnRyZWVGYXN0bGFuZSgpJiYoeWllbGQgdGhpcy5pbml0aWFsaXplQnJhaW50cmVlRmFzdGxhbmVPclRocm93KHQpKX1jYXRjaChlKXtyZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlKX19KX1leGVjdXRlKGUpe3JldHVybiBQbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDp0fT1lLG49ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pO2lmKCF0KXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTt0aGlzLmlzSG9zdGVkRm9ybUluaXRpYWxpemVkJiZ0aGlzLmJyYWludHJlZUhvc3RlZEZvcm0udmFsaWRhdGUoKSx5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIobik7Y29uc3QgaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxyPWkuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCksbz1pLmdldE9yZGVyT3JUaHJvdygpLm9yZGVyQW1vdW50O3RyeXtjb25zdCBlPXRoaXMuaXNIb3N0ZWRGb3JtSW5pdGlhbGl6ZWQ/eWllbGQgdGhpcy5wcmVwYXJlSG9zdGVkUGF5bWVudERhdGEodCxyLG8pOnlpZWxkIHRoaXMucHJlcGFyZVBheW1lbnREYXRhKHQscixvKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse3BheW1lbnREYXRhOmV9KSl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMucHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZSx0LG8pfX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBfZCl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIFBsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5pc0hvc3RlZEZvcm1Jbml0aWFsaXplZD0hMSx5aWVsZCBQcm9taXNlLmFsbChbdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UudGVhcmRvd24oKSx0aGlzLmJyYWludHJlZUhvc3RlZEZvcm0uZGVpbml0aWFsaXplKCldKSxQcm9taXNlLnJlc29sdmUoKX0pfWhhbmRsZUVycm9yKGUpe2lmKGNsKGUpKXRocm93IG5ldyBMaShlLm1lc3NhZ2UpO3Rocm93IGV9cHJlcGFyZVBheW1lbnREYXRhKGUsdCxuKXtyZXR1cm4gUGwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnREYXRhOml9PWUscj17ZGV2aWNlU2Vzc2lvbklkOnRoaXMuZGV2aWNlU2Vzc2lvbklkfTtpZih0aGlzLmlzU3VibWl0dGluZ1dpdGhTdG9yZWRDYXJkKGUpKXJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sciksaSk7Y29uc3R7c2hvdWxkU2F2ZUluc3RydW1lbnQ6bz0hMSxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OmE9ITF9PVBkKGkpP2k6e30se25vbmNlOnN9PXRoaXMuc2hvdWxkUGVyZm9ybTNEU1ZlcmlmaWNhdGlvbihlKT95aWVsZCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS52ZXJpZnlDYXJkKGUsdCxuKTp5aWVsZCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS50b2tlbml6ZUNhcmQoZSx0KTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHIpLHtub25jZTpzLHNob3VsZFNhdmVJbnN0cnVtZW50Om8sc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDphfSl9KX1wcmVwYXJlSG9zdGVkUGF5bWVudERhdGEoZSx0LG4pe3JldHVybiBQbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudERhdGE6aX09ZSxyPXtkZXZpY2VTZXNzaW9uSWQ6dGhpcy5kZXZpY2VTZXNzaW9uSWR9O2lmKHRoaXMuaXNTdWJtaXR0aW5nV2l0aFN0b3JlZENhcmQoZSkpe2NvbnN0e25vbmNlOmV9PXlpZWxkIHRoaXMuYnJhaW50cmVlSG9zdGVkRm9ybS50b2tlbml6ZUZvclN0b3JlZENhcmRWZXJpZmljYXRpb24oKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sciksaSkse25vbmNlOmV9KX1jb25zdHtzaG91bGRTYXZlSW5zdHJ1bWVudDpvPSExLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6YT0hMX09UGQoaSk/aTp7fSx7bm9uY2U6c309dGhpcy5zaG91bGRQZXJmb3JtM0RTVmVyaWZpY2F0aW9uKGUpP3lpZWxkIHRoaXMudmVyaWZ5Q2FyZFdpdGhIb3N0ZWRGb3JtKHQsbik6eWllbGQgdGhpcy5icmFpbnRyZWVIb3N0ZWRGb3JtLnRva2VuaXplKHQpO3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3Nob3VsZFNhdmVJbnN0cnVtZW50Om8sc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDphLG5vbmNlOnN9KX0pfXZlcmlmeUNhcmRXaXRoSG9zdGVkRm9ybShlLHQpe3JldHVybiBQbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj15aWVsZCB0aGlzLmJyYWludHJlZUhvc3RlZEZvcm0udG9rZW5pemUoZSk7cmV0dXJuIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmNoYWxsZW5nZTNEU1ZlcmlmaWNhdGlvbihuLHQpfSl9cHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZSx0LG4pe3JldHVybiBQbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIVhyKGUpfHwhWihlLmJvZHkuZXJyb3JzLHtjb2RlOlwidGhyZWVfZF9zZWN1cmVfcmVxdWlyZWRcIn0pKXJldHVybiB0aGlzLmhhbmRsZUVycm9yKGUpO3RyeXtjb25zdHtwYXllcl9hdXRoX3JlcXVlc3Q6aX09ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcIm5hbWVcImluIGUmJlwiYm9keVwiaW4gZSYmXCJzdGF0dXNcImluIGUuYm9keSYmXCJ0aHJlZV9kc19yZXN1bHRcImluIGUuYm9keSYmXCJwYXllcl9hdXRoX3JlcXVlc3RcImluIGUuYm9keS50aHJlZV9kc19yZXN1bHQmJlwiZXJyb3JzXCJpbiBlLmJvZHl9KGUpJiZlLmJvZHkudGhyZWVfZHNfcmVzdWx0fHx7fSx7cGF5bWVudERhdGE6cn09dCxvPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO2lmKCFyfHwhU2QocikpdGhyb3cgbmV3IFlpKFtcImluc3RydW1lbnRJZFwiXSk7Y29uc3QgYT1vLmdldENhcmRJbnN0cnVtZW50T3JUaHJvdyhyLmluc3RydW1lbnRJZCkse25vbmNlOnN9PXlpZWxkIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmNoYWxsZW5nZTNEU1ZlcmlmaWNhdGlvbih7bm9uY2U6aXx8XCJcIixiaW46YS5paW59LG4pO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7cGF5bWVudERhdGE6e2RldmljZVNlc3Npb25JZDp0aGlzLmRldmljZVNlc3Npb25JZCxub25jZTpzfX0pKX1jYXRjaChlKXtyZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlKX19KX1pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChlLHQpe3JldHVybiEhZSYmITA9PT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlLHQpLmNvbmZpZy5pc0hvc3RlZEZvcm1FbmFibGVkfWlzU3VibWl0dGluZ1dpdGhTdG9yZWRDYXJkKGUpe3JldHVybiEoIWUucGF5bWVudERhdGF8fCFTZChlLnBheW1lbnREYXRhKSl9c2hvdWxkUGVyZm9ybTNEU1ZlcmlmaWNhdGlvbihlKXtyZXR1cm4hKCF0aGlzLmlzM2RzRW5hYmxlZHx8dGhpcy5pc1N1Ym1pdHRpbmdXaXRoU3RvcmVkQ2FyZChlKSl9c2hvdWxkSW5pdGlhbGl6ZUJyYWludHJlZUZhc3RsYW5lKCl7dmFyIGU7Y29uc3QgdD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lck9yVGhyb3coKSxuPWZsKHQpP3Q6e307cmV0dXJuKG51bGw9PT0oZT10aGlzLnBheW1lbnRNZXRob2QpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmluaXRpYWxpemF0aW9uRGF0YS5pc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkKSYmIShudWxsPT1uP3ZvaWQgMDpuLmF1dGhlbnRpY2F0aW9uU3RhdGUpfWluaXRpYWxpemVCcmFpbnRyZWVGYXN0bGFuZU9yVGhyb3coZSl7cmV0dXJuIFBsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLG49dC5nZXRDYXJ0T3JUaHJvdygpLGk9dC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKSx7Y2xpZW50VG9rZW46cixjb25maWc6b309aTtpZighcil0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO3RoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmluaXRpYWxpemUocix0aGlzLnRocmVlRFNlY3VyZSkseWllbGQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QnJhaW50cmVlRmFzdGxhbmUobi5pZCxvLnRlc3RNb2RlKX0pfX1mdW5jdGlvbiBFbChlKXtyZXR1cm5cImNhcmROdW1iZXJcImluIGV9ZnVuY3Rpb24gQWwoZSl7aWYoIUNuKGUpKXJldHVybiExO2NvbnN0e2RldGFpbHM6dH09ZTtyZXR1cm4gdm9pZCAwPT09dHx8XCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPT10JiZ2b2lkIDA9PT10LmludmFsaWRGaWVsZEtleXN8fChuPXQsQXJyYXkuaXNBcnJheShuKSYmbi5ldmVyeShlPT5cInN0cmluZ1wiPT10eXBlb2YgZSkpO3ZhciBufXZhciBrbCxUbD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTshZnVuY3Rpb24oZSl7ZVtlLkNyZWRpdENhcmQ9MF09XCJDcmVkaXRDYXJkXCIsZVtlLlN0b3JlZENhcmRWZXJpZmljYXRpb249MV09XCJTdG9yZWRDYXJkVmVyaWZpY2F0aW9uXCJ9KGtsfHwoa2w9e30pKTtjbGFzcyBEbHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyPWUsdGhpcy5icmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcj10LHRoaXMuaXNJbml0aWFsaXplZEhvc3RlZEZvcm09ITEsdGhpcy5oYW5kbGVCbHVyPWU9Pnt2YXIgdCxuO251bGw9PT0obj1udWxsPT09KHQ9dGhpcy5mb3JtT3B0aW9ucyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQub25CbHVyKXx8dm9pZCAwPT09bnx8bi5jYWxsKHQse2ZpZWxkVHlwZTp0aGlzLm1hcEZpZWxkVHlwZShlLmVtaXR0ZWRCeSksZXJyb3JzOnRoaXMubWFwRXJyb3JzKGUuZmllbGRzKX0pfSx0aGlzLmhhbmRsZUZvY3VzPWU9Pnt2YXIgdCxuO251bGw9PT0obj1udWxsPT09KHQ9dGhpcy5mb3JtT3B0aW9ucyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQub25Gb2N1cyl8fHZvaWQgMD09PW58fG4uY2FsbCh0LHtmaWVsZFR5cGU6dGhpcy5tYXBGaWVsZFR5cGUoZS5lbWl0dGVkQnkpfSl9LHRoaXMuaGFuZGxlQ2FyZFR5cGVDaGFuZ2U9ZT0+e3ZhciB0LG47Y29uc3QgaT0xPT09ZS5jYXJkcy5sZW5ndGg/ZS5jYXJkc1swXS50eXBlLnJlcGxhY2UoL15tYXN0ZXItY2FyZCQvLFwibWFzdGVyY2FyZFwiKTp2b2lkIDA7bnVsbD09PShuPW51bGw9PT0odD10aGlzLmZvcm1PcHRpb25zKXx8dm9pZCAwPT09dD92b2lkIDA6dC5vbkNhcmRUeXBlQ2hhbmdlKXx8dm9pZCAwPT09bnx8bi5jYWxsKHQse2NhcmRUeXBlOml9KX0sdGhpcy5oYW5kbGVJbnB1dFN1Ym1pdFJlcXVlc3Q9ZT0+e3ZhciB0LG47bnVsbD09PShuPW51bGw9PT0odD10aGlzLmZvcm1PcHRpb25zKXx8dm9pZCAwPT09dD92b2lkIDA6dC5vbkVudGVyKXx8dm9pZCAwPT09bnx8bi5jYWxsKHQse2ZpZWxkVHlwZTp0aGlzLm1hcEZpZWxkVHlwZShlLmVtaXR0ZWRCeSl9KX0sdGhpcy5oYW5kbGVWYWxpZGl0eUNoYW5nZT1lPT57dmFyIHQsbjtudWxsPT09KG49bnVsbD09PSh0PXRoaXMuZm9ybU9wdGlvbnMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm9uVmFsaWRhdGUpfHx2b2lkIDA9PT1ufHxuLmNhbGwodCx7aXNWYWxpZDp0aGlzLmlzVmFsaWRGb3JtKGUpLGVycm9yczp0aGlzLm1hcFZhbGlkYXRpb25FcnJvcnMoZS5maWVsZHMpfSl9fWluaXRpYWxpemUoZSx0LG4pe3ZhciBpLHIsbyxhLHM7cmV0dXJuIFRsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0aGlzLmNsaWVudFRva2VuPW4sdGhpcy5mb3JtT3B0aW9ucz1lLHRoaXMudHlwZT1FbChlLmZpZWxkcyk/a2wuQ3JlZGl0Q2FyZDprbC5TdG9yZWRDYXJkVmVyaWZpY2F0aW9uO2NvbnN0IGQ9dGhpcy5tYXBGaWVsZE9wdGlvbnMoZS5maWVsZHMsdCk7RShkKT90aGlzLmlzSW5pdGlhbGl6ZWRIb3N0ZWRGb3JtPSExOih0aGlzLmNhcmRGaWVsZHM9eWllbGQgdGhpcy5jcmVhdGVIb3N0ZWRGaWVsZHMoe2ZpZWxkczpkLHN0eWxlczplLnN0eWxlcyYmdGhpcy5tYXBTdHlsZU9wdGlvbnMoZS5zdHlsZXMpfSksbnVsbD09PShpPXRoaXMuY2FyZEZpZWxkcyl8fHZvaWQgMD09PWl8fGkub24oXCJibHVyXCIsdGhpcy5oYW5kbGVCbHVyKSxudWxsPT09KHI9dGhpcy5jYXJkRmllbGRzKXx8dm9pZCAwPT09cnx8ci5vbihcImZvY3VzXCIsdGhpcy5oYW5kbGVGb2N1cyksbnVsbD09PShvPXRoaXMuY2FyZEZpZWxkcyl8fHZvaWQgMD09PW98fG8ub24oXCJjYXJkVHlwZUNoYW5nZVwiLHRoaXMuaGFuZGxlQ2FyZFR5cGVDaGFuZ2UpLG51bGw9PT0oYT10aGlzLmNhcmRGaWVsZHMpfHx2b2lkIDA9PT1hfHxhLm9uKFwidmFsaWRpdHlDaGFuZ2VcIix0aGlzLmhhbmRsZVZhbGlkaXR5Q2hhbmdlKSxudWxsPT09KHM9dGhpcy5jYXJkRmllbGRzKXx8dm9pZCAwPT09c3x8cy5vbihcImlucHV0U3VibWl0UmVxdWVzdFwiLHRoaXMuaGFuZGxlSW5wdXRTdWJtaXRSZXF1ZXN0KSx0aGlzLmlzSW5pdGlhbGl6ZWRIb3N0ZWRGb3JtPSEwKX0pfWlzSW5pdGlhbGl6ZWQoKXtyZXR1cm4hIXRoaXMuaXNJbml0aWFsaXplZEhvc3RlZEZvcm19ZGVpbml0aWFsaXplKCl7dmFyIGU7cmV0dXJuIFRsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0aGlzLmlzSW5pdGlhbGl6ZWRIb3N0ZWRGb3JtJiYodGhpcy5pc0luaXRpYWxpemVkSG9zdGVkRm9ybT0hMSx5aWVsZCBudWxsPT09KGU9dGhpcy5jYXJkRmllbGRzKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS50ZWFyZG93bigpKX0pfXZhbGlkYXRlKCl7aWYoIXRoaXMuY2FyZEZpZWxkcyl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtjb25zdCBlPXRoaXMuY2FyZEZpZWxkcy5nZXRTdGF0ZSgpO2lmKCF0aGlzLmlzVmFsaWRGb3JtKGUpKXt0aGlzLmhhbmRsZVZhbGlkaXR5Q2hhbmdlKGUpO2NvbnN0IHQ9dGhpcy5tYXBWYWxpZGF0aW9uRXJyb3JzKGUuZmllbGRzKTt0aHJvdyBuZXcgS2kodCl9fXRva2VuaXplKGUpe3ZhciB0LG4saSxyLG87cmV0dXJuIFRsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy5jYXJkRmllbGRzKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3RyeXtjb25zdCByPXlpZWxkIHRoaXMuY2FyZEZpZWxkcy50b2tlbml6ZShIKHtiaWxsaW5nQWRkcmVzczplJiZ0aGlzLm1hcEJpbGxpbmdBZGRyZXNzKGUpfSxUKSk7cmV0dXJuIG51bGw9PT0obj1udWxsPT09KHQ9dGhpcy5mb3JtT3B0aW9ucyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQub25WYWxpZGF0ZSl8fHZvaWQgMD09PW58fG4uY2FsbCh0LHtpc1ZhbGlkOiEwLGVycm9yczp7fX0pLHtub25jZTpyLm5vbmNlLGJpbjpudWxsPT09KGk9ci5kZXRhaWxzKXx8dm9pZCAwPT09aT92b2lkIDA6aS5iaW59fWNhdGNoKGUpe2lmKEFsKGUpKXtjb25zdCB0PXRoaXMubWFwVG9rZW5pemVFcnJvcihlKTtpZih0KXRocm93IG51bGw9PT0obz1udWxsPT09KHI9dGhpcy5mb3JtT3B0aW9ucyl8fHZvaWQgMD09PXI/dm9pZCAwOnIub25WYWxpZGF0ZSl8fHZvaWQgMD09PW98fG8uY2FsbChyLHtpc1ZhbGlkOiExLGVycm9yczp0fSksbmV3IEtpKHQpfXRocm93IGV9fSl9dG9rZW5pemVGb3JTdG9yZWRDYXJkVmVyaWZpY2F0aW9uKCl7dmFyIGUsdCxuLGkscjtyZXR1cm4gVGwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0aGlzLmNhcmRGaWVsZHMpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7dHJ5e2NvbnN0IGk9eWllbGQgdGhpcy5jYXJkRmllbGRzLnRva2VuaXplKCk7cmV0dXJuIG51bGw9PT0odD1udWxsPT09KGU9dGhpcy5mb3JtT3B0aW9ucyl8fHZvaWQgMD09PWU/dm9pZCAwOmUub25WYWxpZGF0ZSl8fHZvaWQgMD09PXR8fHQuY2FsbChlLHtpc1ZhbGlkOiEwLGVycm9yczp7fX0pLHtub25jZTppLm5vbmNlLGJpbjpudWxsPT09KG49aS5kZXRhaWxzKXx8dm9pZCAwPT09bj92b2lkIDA6bi5iaW59fWNhdGNoKGUpe2lmKEFsKGUpKXtjb25zdCB0PXRoaXMubWFwVG9rZW5pemVFcnJvcihlLCEwKTtpZih0KXRocm93IG51bGw9PT0ocj1udWxsPT09KGk9dGhpcy5mb3JtT3B0aW9ucyl8fHZvaWQgMD09PWk/dm9pZCAwOmkub25WYWxpZGF0ZSl8fHZvaWQgMD09PXJ8fHIuY2FsbChpLHtpc1ZhbGlkOiExLGVycm9yczp0fSksbmV3IEtpKHQpfXRocm93IGV9fSl9Y3JlYXRlSG9zdGVkRmllbGRzKGUpe3JldHVybiBUbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLmdldENsaWVudCgpLG49eWllbGQgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZEhvc3RlZEZpZWxkcygpLGk9dGhpcy5icmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlci5nZXRTREtWZXJzaW9uKCk9PT1sbj9PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3ByZXZlbnRDdXJzb3JKdW1wczohMH0pOmU7cmV0dXJuIG4uY3JlYXRlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxpKSx7Y2xpZW50OnR9KSl9KX1nZXRDbGllbnQoKXtyZXR1cm4gVGwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0aGlzLmNsaWVudFRva2VuKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO2lmKCF0aGlzLmNsaWVudCl7Y29uc3QgZT15aWVsZCB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkQ2xpZW50KCk7dGhpcy5jbGllbnQ9ZS5jcmVhdGUoe2F1dGhvcml6YXRpb246dGhpcy5jbGllbnRUb2tlbn0pfXJldHVybiB0aGlzLmNsaWVudH0pfW1hcEJpbGxpbmdBZGRyZXNzKGUpe3JldHVybntjb3VudHJ5TmFtZTplLmNvdW50cnkscG9zdGFsQ29kZTplLnBvc3RhbENvZGUsc3RyZWV0QWRkcmVzczplLmFkZHJlc3MyP2Ake2UuYWRkcmVzczF9ICR7ZS5hZGRyZXNzMn1gOmUuYWRkcmVzczF9fW1hcEZpZWxkT3B0aW9ucyhlLHQpe2lmKEVsKGUpKXtjb25zdCBuPXt9O3JldHVybiBudWxsPT10fHx0LmZvckVhY2goZT0+eyhlPT5PYmplY3QudmFsdWVzKHduKS5pbmNsdWRlcyhlKSkoZSkmJihuW2VdPSExKX0pLEgoe251bWJlcjpPYmplY3QuYXNzaWduKHtjb250YWluZXI6YCMke2UuY2FyZE51bWJlci5jb250YWluZXJJZH1gLHBsYWNlaG9sZGVyOmUuY2FyZE51bWJlci5wbGFjZWhvbGRlcixpbnRlcm5hbExhYmVsOmUuY2FyZE51bWJlci5hY2Nlc3NpYmlsaXR5TGFiZWx9LE9iamVjdC5rZXlzKG4pLmxlbmd0aD4wP3tzdXBwb3J0ZWRDYXJkQnJhbmRzOm59Ont9KSxleHBpcmF0aW9uRGF0ZTp7Y29udGFpbmVyOmAjJHtlLmNhcmRFeHBpcnkuY29udGFpbmVySWR9YCxwbGFjZWhvbGRlcjplLmNhcmRFeHBpcnkucGxhY2Vob2xkZXIsaW50ZXJuYWxMYWJlbDplLmNhcmRFeHBpcnkuYWNjZXNzaWJpbGl0eUxhYmVsfSxjdnY6ZS5jYXJkQ29kZSYme2NvbnRhaW5lcjpgIyR7ZS5jYXJkQ29kZS5jb250YWluZXJJZH1gLHBsYWNlaG9sZGVyOmUuY2FyZENvZGUucGxhY2Vob2xkZXIsaW50ZXJuYWxMYWJlbDplLmNhcmRDb2RlLmFjY2Vzc2liaWxpdHlMYWJlbH0sY2FyZGhvbGRlck5hbWU6e2NvbnRhaW5lcjpgIyR7ZS5jYXJkTmFtZS5jb250YWluZXJJZH1gLHBsYWNlaG9sZGVyOmUuY2FyZE5hbWUucGxhY2Vob2xkZXIsaW50ZXJuYWxMYWJlbDplLmNhcmROYW1lLmFjY2Vzc2liaWxpdHlMYWJlbH19LFQpfXJldHVybiBIKHtudW1iZXI6ZS5jYXJkTnVtYmVyVmVyaWZpY2F0aW9uJiZ7Y29udGFpbmVyOmAjJHtlLmNhcmROdW1iZXJWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCxwbGFjZWhvbGRlcjplLmNhcmROdW1iZXJWZXJpZmljYXRpb24ucGxhY2Vob2xkZXJ9LGN2djplLmNhcmRDb2RlVmVyaWZpY2F0aW9uJiZ7Y29udGFpbmVyOmAjJHtlLmNhcmRDb2RlVmVyaWZpY2F0aW9uLmNvbnRhaW5lcklkfWAscGxhY2Vob2xkZXI6ZS5jYXJkQ29kZVZlcmlmaWNhdGlvbi5wbGFjZWhvbGRlcn19LFQpfW1hcFN0eWxlT3B0aW9ucyhlKXtjb25zdCB0PShlPXt9KT0+SCh7Y29sb3I6ZS5jb2xvcixcImZvbnQtZmFtaWx5XCI6ZS5mb250RmFtaWx5LFwiZm9udC1zaXplXCI6ZS5mb250U2l6ZSxcImZvbnQtd2VpZ2h0XCI6ZS5mb250V2VpZ2h0fSxUKTtyZXR1cm57aW5wdXQ6dChlLmRlZmF1bHQpLFwiLmludmFsaWRcIjp0KGUuZXJyb3IpLFwiOmZvY3VzXCI6dChlLmZvY3VzKX19bWFwRmllbGRUeXBlKGUpe3N3aXRjaChlKXtjYXNlXCJudW1iZXJcIjpyZXR1cm4gdGhpcy50eXBlPT09a2wuU3RvcmVkQ2FyZFZlcmlmaWNhdGlvbj9Qbi5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uOlBuLkNhcmROdW1iZXI7Y2FzZVwiZXhwaXJhdGlvbkRhdGVcIjpyZXR1cm4gUG4uQ2FyZEV4cGlyeTtjYXNlXCJjdnZcIjpyZXR1cm4gdGhpcy50eXBlPT09a2wuU3RvcmVkQ2FyZFZlcmlmaWNhdGlvbj9Qbi5DYXJkQ29kZVZlcmlmaWNhdGlvbjpQbi5DYXJkQ29kZTtjYXNlXCJjYXJkaG9sZGVyTmFtZVwiOnJldHVybiBQbi5DYXJkTmFtZTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgZmllbGQgdHlwZVwiKX19bWFwRXJyb3JzKGUpe2NvbnN0IHQ9e307aWYoZSlmb3IoY29uc3RbbixpXW9mIE9iamVjdC5lbnRyaWVzKGUpKWlmKGkmJnRoaXMuaXNWYWxpZFBhcmFtKG4pKXtjb25zdHtpc1ZhbGlkOmUsaXNFbXB0eTpyLGlzUG90ZW50aWFsbHlWYWxpZDpvfT1pO3Rbbl09e2lzVmFsaWQ6ZSxpc0VtcHR5OnIsaXNQb3RlbnRpYWxseVZhbGlkOm99fXJldHVybiB0fW1hcFZhbGlkYXRpb25FcnJvcnMoZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLnJlZHVjZSgodCxuKT0+e3ZhciBpO3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1t0aGlzLm1hcEZpZWxkVHlwZShuKV06KG51bGw9PT0oaT1lW25dKXx8dm9pZCAwPT09aT92b2lkIDA6aS5pc1ZhbGlkKT92b2lkIDA6W3RoaXMuY3JlYXRlSW52YWxpZEVycm9yKHRoaXMubWFwRmllbGRUeXBlKG4pKV19KX0se30pfW1hcFRva2VuaXplRXJyb3IoZSx0PSExKXt2YXIgbixpO2lmKFwiSE9TVEVEX0ZJRUxEU19GSUVMRFNfRU1QVFlcIj09PWUuY29kZSl7Y29uc3QgZT1bdGhpcy5jcmVhdGVSZXF1aXJlZEVycm9yKHRoaXMubWFwRmllbGRUeXBlKFwiY3Z2XCIpKV07cmV0dXJuIHQ/e1t0aGlzLm1hcEZpZWxkVHlwZShcImN2dlwiKV06ZX06e1t0aGlzLm1hcEZpZWxkVHlwZShcImN2dlwiKV06ZSxbdGhpcy5tYXBGaWVsZFR5cGUoXCJleHBpcmF0aW9uRGF0ZVwiKV06W3RoaXMuY3JlYXRlUmVxdWlyZWRFcnJvcih0aGlzLm1hcEZpZWxkVHlwZShcImV4cGlyYXRpb25EYXRlXCIpKV0sW3RoaXMubWFwRmllbGRUeXBlKFwibnVtYmVyXCIpXTpbdGhpcy5jcmVhdGVSZXF1aXJlZEVycm9yKHRoaXMubWFwRmllbGRUeXBlKFwibnVtYmVyXCIpKV0sW3RoaXMubWFwRmllbGRUeXBlKFwiY2FyZGhvbGRlck5hbWVcIildOlt0aGlzLmNyZWF0ZVJlcXVpcmVkRXJyb3IodGhpcy5tYXBGaWVsZFR5cGUoXCJjYXJkaG9sZGVyTmFtZVwiKSldfX1yZXR1cm4gbnVsbD09PShpPW51bGw9PT0obj1lLmRldGFpbHMpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmludmFsaWRGaWVsZEtleXMpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnJlZHVjZSgoZSx0KT0+e2NvbnN0IG49dGhpcy5tYXBGaWVsZFR5cGUodCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7W25dOlt0aGlzLmNyZWF0ZUludmFsaWRFcnJvcihuKV19KX0se30pfWNyZWF0ZVJlcXVpcmVkRXJyb3IoZSl7dmFyIHQ7cmV0dXJue2ZpZWxkVHlwZTplLG1lc3NhZ2U6bnVsbCE9PSh0PXtbUG4uQ2FyZENvZGVdOlwiQ1ZWIGlzIHJlcXVpcmVkXCIsW1BuLkNhcmRDb2RlVmVyaWZpY2F0aW9uXTpcIkNWViBpcyByZXF1aXJlZFwiLFtQbi5DYXJkTnVtYmVyXTpcIkNyZWRpdCBjYXJkIG51bWJlciBpcyByZXF1aXJlZFwiLFtQbi5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uXTpcIkNyZWRpdCBjYXJkIG51bWJlciBpcyByZXF1aXJlZFwiLFtQbi5DYXJkRXhwaXJ5XTpcIkV4cGlyYXRpb24gZGF0ZSBpcyByZXF1aXJlZFwiLFtQbi5DYXJkTmFtZV06XCJGdWxsIG5hbWUgaXMgcmVxdWlyZWRcIn1bZV0pJiZ2b2lkIDAhPT10P3Q6XCJGaWVsZCBpcyByZXF1aXJlZFwiLHR5cGU6XCJyZXF1aXJlZFwifX1jcmVhdGVJbnZhbGlkRXJyb3IoZSl7dmFyIHQsbixpLHI7Y29uc3Qgbz17W1BuLkNhcmRDb2RlXTp7bWVzc2FnZTpcIkludmFsaWQgY2FyZCBjb2RlXCIsdHlwZTpcImludmFsaWRfY2FyZF9jb2RlXCJ9LFtQbi5DYXJkQ29kZVZlcmlmaWNhdGlvbl06e21lc3NhZ2U6XCJJbnZhbGlkIGNhcmQgY29kZVwiLHR5cGU6XCJpbnZhbGlkX2NhcmRfY29kZVwifSxbUG4uQ2FyZE51bWJlcl06e21lc3NhZ2U6XCJJbnZhbGlkIGNhcmQgbnVtYmVyXCIsdHlwZTpcImludmFsaWRfY2FyZF9udW1iZXJcIn0sW1BuLkNhcmROdW1iZXJWZXJpZmljYXRpb25dOnttZXNzYWdlOlwiSW52YWxpZCBjYXJkIG51bWJlclwiLHR5cGU6XCJpbnZhbGlkX2NhcmRfbnVtYmVyXCJ9LFtQbi5DYXJkRXhwaXJ5XTp7bWVzc2FnZTpcIkludmFsaWQgY2FyZCBleHBpcnlcIix0eXBlOlwiaW52YWxpZF9jYXJkX2V4cGlyeVwifSxbUG4uQ2FyZE5hbWVdOnttZXNzYWdlOlwiSW52YWxpZCBjYXJkIG5hbWVcIix0eXBlOlwiaW52YWxpZF9jYXJkX25hbWVcIn19O3JldHVybntmaWVsZFR5cGU6ZSxtZXNzYWdlOm51bGwhPT0obj1udWxsPT09KHQ9b1tlXSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubWVzc2FnZSkmJnZvaWQgMCE9PW4/bjpcIkludmFsaWQgZmllbGRcIix0eXBlOm51bGwhPT0ocj1udWxsPT09KGk9b1tlXSl8fHZvaWQgMD09PWk/dm9pZCAwOmkudHlwZSkmJnZvaWQgMCE9PXI/cjpcImludmFsaWRcIn19aXNWYWxpZEZvcm0oZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUuZmllbGRzKS5ldmVyeSh0PT57dmFyIG47cmV0dXJuIG51bGw9PT0obj1lLmZpZWxkc1t0XSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uaXNWYWxpZH0pfWlzVmFsaWRQYXJhbShlKXtyZXR1cm5bXCJudW1iZXJcIixcImN2dlwiLFwiZXhwaXJhdGlvbkRhdGVcIixcInBvc3RhbENvZGVcIixcImNhcmRob2xkZXJOYW1lXCIsXCJjYXJkVHlwZVwiXS5pbmNsdWRlcyhlKX19Y29uc3QgTWw9bm4oZT0+e2NvbnN0IHQ9d2luZG93LG49bmV3IHBuKGUpLGk9bmV3IERuKGEoKSx0LG4pLHI9bmV3IG9yKGksdCksbz1uZXcgRGwoaSxuKTtyZXR1cm4gbmV3IE9sKGUscixvKX0sW3tpZDpcImJyYWludHJlZVwifV0pO3ZhciB6bCxObD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfSx4bD1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59O2NsYXNzIEZse2NvbnN0cnVjdG9yKGUpe3RoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZX1leGVjdXRlKGUsdCl7dmFyIG4saTtyZXR1cm4gdGhpcy5faXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQobnVsbD09PShuPWUucGF5bWVudCl8fHZvaWQgMD09PW4/dm9pZCAwOm4ubWV0aG9kSWQsbnVsbD09PShpPWUucGF5bWVudCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZ2F0ZXdheUlkKSYmdGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybT90aGlzLl9leGVjdXRlV2l0aEhvc3RlZEZvcm0oZSx0KTp0aGlzLl9leGVjdXRlV2l0aG91dEhvc3RlZEZvcm0oZSx0KX1pbml0aWFsaXplKGUpe2lmKCF0aGlzLl9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChudWxsPT1lP3ZvaWQgMDplLm1ldGhvZElkLG51bGw9PWU/dm9pZCAwOmUuZ2F0ZXdheUlkKXx8IXRoaXMuX2lzSG9zdGVkRmllbGRBdmFpbGFibGUoZSkpcmV0dXJuIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm09ITEsUHJvbWlzZS5yZXNvbHZlKCk7Y29uc3QgdD1lJiZlLmNyZWRpdENhcmQmJmUuY3JlZGl0Q2FyZC5mb3JtLG49dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHtwYXltZW50U2V0dGluZ3M6e2JpZ3BheUJhc2VVcmw6aT1cIlwifT17fX09bi5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKTtpZighdCl0aHJvdyBuZXcgcm47Y29uc3Qgcj10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUhvc3RlZEZvcm0oaSx0KTtyZXR1cm4gci5hdHRhY2goKS50aGVuKCgpPT4odGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybT0hMCx0aGlzLl9ob3N0ZWRGb3JtPXIsUHJvbWlzZS5yZXNvbHZlKCkpKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gdGhpcy5faG9zdGVkRm9ybSYmdGhpcy5faG9zdGVkRm9ybS5kZXRhY2goKSxQcm9taXNlLnJlc29sdmUoKX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfV9leGVjdXRlV2l0aG91dEhvc3RlZEZvcm0oZSx0KXtyZXR1cm4gTmwodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6bn09ZSxpPXhsKGUsW1wicGF5bWVudFwiXSkscj1uJiZuLnBheW1lbnREYXRhO2lmKCFufHwhcil0aHJvdyBuZXcgWWkoW1wicGF5bWVudC5wYXltZW50RGF0YVwiXSk7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihpLHQpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbikse3BheW1lbnREYXRhOnJ9KSl9KX1fZXhlY3V0ZVdpdGhIb3N0ZWRGb3JtKGUsdCl7cmV0dXJuIE5sKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT14bChlLFtcInBheW1lbnRcIl0pLHI9dGhpcy5faG9zdGVkRm9ybTtpZighcil0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtpZighbnx8IW4ubWV0aG9kSWQpdGhyb3cgbmV3IFlpKFtcInBheW1lbnQubWV0aG9kSWRcIl0pO3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KSx5aWVsZCByLnZhbGlkYXRlKCkudGhlbigoKT0+ci5zdWJtaXQobikpfSl9X2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKGUsdCl7cmV0dXJuISFlJiYhMD09PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlLHQpLmNvbmZpZy5pc0hvc3RlZEZvcm1FbmFibGVkfV9pc0hvc3RlZEZpZWxkQXZhaWxhYmxlKGUpe3JldHVybiFpZShlJiZlLmNyZWRpdENhcmQmJmUuY3JlZGl0Q2FyZC5mb3JtLmZpZWxkcykuZXZlcnkoVCl9fSFmdW5jdGlvbihlKXtlLk9mZnNpdGVSZWRpcmVjdD1cIm9mZnNpdGVfcmVkaXJlY3RcIn0oemx8fCh6bD17fSkpO2NsYXNzIFJsIGV4dGVuZHMgRmx7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWV9ZmluYWxpemUoZSl7Y29uc3QgdD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtyZXR1cm4gdC5nZXRPcmRlcigpJiZ0LmdldFBheW1lbnRTdGF0dXMoKT09PUhjLkZJTkFMSVpFJiZ0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZmluYWxpemVPcmRlcihlKSxQcm9taXNlLnJlamVjdChuZXcgX2QpfV9leGVjdXRlV2l0aEhvc3RlZEZvcm0oZSx0KXtyZXR1cm4gbj10aGlzLGk9dm9pZCAwLG89ZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pLHI9dGhpcy5faG9zdGVkRm9ybTtpZighcil0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtpZighbnx8IW4ubWV0aG9kSWQpdGhyb3cgbmV3IFlpKFtcInBheW1lbnQubWV0aG9kSWRcIl0pO3RyeXt5aWVsZCByLnZhbGlkYXRlKCkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGksdCkseWllbGQgci5zdWJtaXQobil9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuX3Byb2Nlc3NSZXNwb25zZShlKX10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZEN1cnJlbnRPcmRlcigpfSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99X3Byb2Nlc3NSZXNwb25zZShlKXtpZighWHIoZSkpcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO2NvbnN0IHQ9ZS5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkO3JldHVybiB0JiZ0LnR5cGU9PT16bC5PZmZzaXRlUmVkaXJlY3Q/dGhpcy5fcGVyZm9ybVJlZGlyZWN0KHQpOlByb21pc2UucmVqZWN0KGUpfV9wZXJmb3JtUmVkaXJlY3QoZSl7cmV0dXJuIG5ldyBQcm9taXNlKCgpPT57d2luZG93LmxvY2F0aW9uLnJlcGxhY2UoZS5kYXRhLnJlZGlyZWN0X3VybCl9KX19Y2xhc3MgTGwgZXh0ZW5kcyBSbHtfZXhlY3V0ZVdpdGhvdXRIb3N0ZWRGb3JtKGUsdCl7cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6bn09ZSxpPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0oZSxbXCJwYXltZW50XCJdKSxyPW4mJm4ucGF5bWVudERhdGE7aWYoIW58fCFyKXRocm93IG5ldyBZaShbXCJwYXltZW50LnBheW1lbnREYXRhXCJdKTt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGksdCk7dHJ5e3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbikse3BheW1lbnREYXRhOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSx7Zm9ybWF0dGVkUGF5bG9hZDp0aGlzLl9jcmVhdGVGb3JtYXR0ZWRQYXlsb2FkKG4ubWV0aG9kSWQscil9KX0pKX1jYXRjaChlKXtyZXR1cm4gdGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKGUpfX0sbmV3KChyPXZvaWQgMCl8fChyPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoby5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKG8udGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2Ygcj9uOm5ldyByKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKG89by5hcHBseShuLGl8fFtdKSkubmV4dCgpKX0pO3ZhciBuLGkscixvfV9jcmVhdGVGb3JtYXR0ZWRQYXlsb2FkKGUsdCl7aWYoXCJmYXdyeVwiPT09ZSYmXCJjdXN0b21lck1vYmlsZVwiaW4gdCYmXCJjdXN0b21lckVtYWlsXCJpbiB0KXtjb25zdCBlPXQ7cmV0dXJue2N1c3RvbWVyTW9iaWxlOmUuY3VzdG9tZXJNb2JpbGUsY3VzdG9tZXJFbWFpbDplLmN1c3RvbWVyRW1haWx9fX19Y29uc3QgQmw9bm4oZT0+bmV3IExsKGUpLFt7Z2F0ZXdheTpcImNoZWNrb3V0Y29tXCIsaWQ6XCJmYXdyeVwifV0pO2Z1bmN0aW9uIGpsKGUpe3JldHVybiBYcihlKSYmWihlLmJvZHkuZXJyb3JzLHtjb2RlOlwidGhyZWVfZF9zZWN1cmVfcmVxdWlyZWRcIn0pfXZhciBVbD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfSxxbD1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59O2NsYXNzIFZsIGV4dGVuZHMgRmx7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmZvcm1Qb3N0ZXI9dH1maW5hbGl6ZShlKXtjb25zdCB0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO3JldHVybiB0LmdldE9yZGVyKCkmJnQuZ2V0UGF5bWVudFN0YXR1cygpPT09SGMuRklOQUxJWkUmJnRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5maW5hbGl6ZU9yZGVyKGUpLFByb21pc2UucmVqZWN0KG5ldyBfZCl9X2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShlLHQpe3JldHVybiBVbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lLGk9cWwoZSxbXCJwYXltZW50XCJdKSxyPW4mJm4ucGF5bWVudERhdGE7aWYoIW58fCFyKXRocm93IG5ldyBZaShbXCJwYXltZW50LnBheW1lbnREYXRhXCJdKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KTt0cnl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG4pLHtwYXltZW50RGF0YTpyfSkpfWNhdGNoKGUpe3JldHVybiBqbChlKT90aGlzLl9oYW5kbGVUaHJlZURTZWN1cmUoZSk6UHJvbWlzZS5yZWplY3QoZSl9fSl9X2V4ZWN1dGVXaXRoSG9zdGVkRm9ybShlLHQpe3JldHVybiBVbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lLGk9cWwoZSxbXCJwYXltZW50XCJdKSxyPXRoaXMuX2hvc3RlZEZvcm07aWYoIXIpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7aWYoIW58fCFuLm1ldGhvZElkKXRocm93IG5ldyBZaShbXCJwYXltZW50Lm1ldGhvZElkXCJdKTt0cnl7eWllbGQgci52YWxpZGF0ZSgpLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihpLHQpLHlpZWxkIHIuc3VibWl0KG4pfWNhdGNoKGUpe3JldHVybiBqbChlKT90aGlzLl9oYW5kbGVUaHJlZURTZWN1cmUoZSk6UHJvbWlzZS5yZWplY3QoZSl9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDdXJyZW50T3JkZXIoKX0pfV9oYW5kbGVUaHJlZURTZWN1cmUoZSl7Y29uc3R7YWNzX3VybDp0LHBheWVyX2F1dGhfcmVxdWVzdDpuLGNhbGxiYWNrX3VybDppLG1lcmNoYW50X2RhdGE6cn09ZS5ib2R5LnRocmVlX2RzX3Jlc3VsdDtyZXR1cm4gbmV3IFByb21pc2UoKCk9PnRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybSh0LHtQYVJlcTpufHxudWxsLFRlcm1Vcmw6aXx8bnVsbCxNRDpyfHxudWxsfSkpfX1jb25zdCBHbD1ubihlPT5uZXcgVmwoZSxFZSgpKSxbe2dhdGV3YXk6XCJjaGVja291dGNvbVwiLGlkOlwiY3JlZGl0X2NhcmRcIn0se2dhdGV3YXk6XCJjaGVja291dGNvbVwiLGlkOlwiY2FyZFwifV0pO2NsYXNzIEhsIGV4dGVuZHMgUmx7X2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShlLHQpe3JldHVybiBuPXRoaXMsaT12b2lkIDAsbz1mdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSkscj1udWxsPT1uP3ZvaWQgMDpuLnBheW1lbnREYXRhO2lmKCFufHwhcil0aHJvdyBuZXcgWWkoW1wicGF5bWVudC5wYXltZW50RGF0YVwiXSk7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihpLHQpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG4pLHtwYXltZW50RGF0YTpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse2Zvcm1hdHRlZFBheWxvYWQ6dGhpcy5fY3JlYXRlRm9ybWF0dGVkUGF5bG9hZChuLm1ldGhvZElkLHIpfSl9KSl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuX3Byb2Nlc3NSZXNwb25zZShlKX19LG5ldygocj12b2lkIDApfHwocj1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBhKGUpe3RyeXtkKG8ubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChvLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIHI/bjpuZXcgcihmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChvPW8uYXBwbHkobixpfHxbXSkpLm5leHQoKSl9KTt2YXIgbixpLHIsb31fY3JlYXRlRm9ybWF0dGVkUGF5bG9hZChlLHQpe2NvbnN0IG49e2liYW46XCJcIixiaWM6XCJcIn0se2liYW46aSxiaWM6cn09XCJpYmFuXCJpbiB0JiZcImJpY1wiaW4gdD90Om47cmV0dXJuXCJzZXBhXCI9PT1lJiZkb2N1bWVudCYmKG4uaWJhbj1pLG4uYmljPXIpLG59fWNvbnN0ICRsPW5uKGU9Pm5ldyBIbChlKSxbe2dhdGV3YXk6XCJjaGVja291dGNvbVwiLGlkOlwic2VwYVwifV0pO2NsYXNzIFdsIGV4dGVuZHMgUmx7X2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShlLHQpe3JldHVybiBuPXRoaXMsaT12b2lkIDAsbz1mdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSkscj1udWxsPT1uP3ZvaWQgMDpuLnBheW1lbnREYXRhO2lmKCFufHwhcil0aHJvdyBuZXcgWWkoW1wicGF5bWVudC5wYXltZW50RGF0YVwiXSk7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihpLHQpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG4pLHtwYXltZW50RGF0YTpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse2Zvcm1hdHRlZFBheWxvYWQ6dGhpcy5fY3JlYXRlRm9ybWF0dGVkUGF5bG9hZChuLm1ldGhvZElkLHIpfSl9KSl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuX3Byb2Nlc3NSZXNwb25zZShlKX19LG5ldygocj12b2lkIDApfHwocj1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBhKGUpe3RyeXtkKG8ubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChvLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIHI/bjpuZXcgcihmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChvPW8uYXBwbHkobixpfHxbXSkpLm5leHQoKSl9KTt2YXIgbixpLHIsb31fY3JlYXRlRm9ybWF0dGVkUGF5bG9hZChlLHQpe2lmKFwiaWRlYWxcIj09PWUmJlwiYmljXCJpbiB0KXJldHVybntiaWM6dC5iaWN9fX1jb25zdCBZbD1ubihlPT5uZXcgV2woZSksW3tnYXRld2F5OlwiY2hlY2tvdXRjb21cIixpZDpcImlkZWFsXCJ9XSk7Y29uc3QgS2w9W1wiYm9sZXRvXCIsXCJveHhvXCIsXCJxcGF5XCIsXCJpZGVhbFwiXTtjbGFzcyBKbCBleHRlbmRzIFJse19leGVjdXRlV2l0aG91dEhvc3RlZEZvcm0oZSx0KXtyZXR1cm4gbj10aGlzLGk9dm9pZCAwLG89ZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pLHI9bnVsbD09bj92b2lkIDA6bi5wYXltZW50RGF0YTtpZighbnx8IXIpdGhyb3cgbmV3IFlpKFtcInBheW1lbnQucGF5bWVudERhdGFcIl0pO3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KTt0cnl7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxuKSx7cGF5bWVudERhdGE6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHIpLHtmb3JtYXR0ZWRQYXlsb2FkOnRoaXMuX2NyZWF0ZUZvcm1hdHRlZFBheWxvYWQobi5tZXRob2RJZCxyKX0pfSkpfWNhdGNoKGUpe3JldHVybiB0aGlzLl9wcm9jZXNzUmVzcG9uc2UoZSl9fSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99X2NyZWF0ZUZvcm1hdHRlZFBheWxvYWQoZSx0KXtjb25zdCBuPXtjY0RvY3VtZW50OlwiXCJ9LGk9XCJjY0RvY3VtZW50XCJpbiB0P3QuY2NEb2N1bWVudDpcIlwiO3JldHVybi0xIT09S2wuaW5kZXhPZihlKSYmaSYmKG4uY2NEb2N1bWVudD1pKSxufX1jb25zdCBabD1ubihlPT5uZXcgSmwoZSksW3tnYXRld2F5OlwiY2hlY2tvdXRjb21cIn1dKTt2YXIgUWw9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgWGx7Y29uc3RydWN0b3IoZSx0KXt0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5fY2xlYXJwYXlTY3JpcHRMb2FkZXI9dH1pbml0aWFsaXplKGUpe3JldHVybiBRbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7Z2V0UGF5bWVudE1ldGhvZE9yVGhyb3c6dH09dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLG49dChlLm1ldGhvZElkLGUuZ2F0ZXdheUlkKTt0aGlzLl9jbGVhcnBheVNkaz15aWVsZCB0aGlzLl9jbGVhcnBheVNjcmlwdExvYWRlci5sb2FkKG4pfSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIHRoaXMuX2NsZWFycGF5U2RrPXZvaWQgMCxQcm9taXNlLnJlc29sdmUoKX1leGVjdXRlKGUsdCl7cmV0dXJuIFFsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtnYXRld2F5SWQ6bixtZXRob2RJZDppfT1lLnBheW1lbnR8fHt9O2lmKCFufHwhaSl0aHJvdyBuZXcgWWkoW1wicGF5bWVudC5nYXRld2F5SWRcIixcInBheW1lbnQubWV0aG9kSWRcIl0pO2NvbnN0IHI9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHtpc1N0b3JlQ3JlZGl0QXBwbGllZDpvfT1yLmdldENoZWNrb3V0T3JUaHJvdygpO3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuYXBwbHlTdG9yZUNyZWRpdChvKSx5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnZhbGlkYXRlQ2hlY2tvdXQoci5nZXRDaGVja291dCgpLHQpO2NvbnN0e2NvdW50cnlDb2RlOmF9PXIuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7aWYoIXRoaXMuX2lzQ291bnRyeVN1cHBvcnRlZChhKSl0aHJvdyBuZXcgcm4oXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgY291bnRyeSBpcyBub3Qgc3VwcG9ydGVkLlwiKTtyZXR1cm4geWllbGQgdGhpcy5fbG9hZFBheW1lbnRNZXRob2QobixpLHQpLHlpZWxkIHRoaXMuX3JlZGlyZWN0VG9DbGVhcnBheShhLHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kKGksbikpLG5ldyBQcm9taXNlKFYpfSl9ZmluYWxpemUoZSl7dmFyIHQsbixpO3JldHVybiBRbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgcj10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksbz1yLmdldFBheW1lbnRJZCgpLGE9ci5nZXRDb250ZXh0Q29uZmlnKCk7aWYoIW8pdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdDaGVja291dCk7aWYoIWF8fCFhLnBheW1lbnQudG9rZW4pdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdDaGVja291dENvbmZpZyk7Y29uc3Qgcz17bWV0aG9kSWQ6by5wcm92aWRlcklkLHBheW1lbnREYXRhOntub25jZTphLnBheW1lbnQudG9rZW59fTt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt9LGUpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocyl9Y2F0Y2goZSl7aWYoeWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5mb3JnZXRDaGVja291dChvLnByb3ZpZGVySWQpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2RzKCksWHIoZSkpdGhyb3cgbmV3IE5kKG51bGw9PT0oaT1udWxsPT09KG49bnVsbD09PSh0PWUuYm9keSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZXJyb3JzKXx8dm9pZCAwPT09bj92b2lkIDA6blswXSl8fHZvaWQgMD09PWk/dm9pZCAwOmkubWVzc2FnZSl9fSl9X3JlZGlyZWN0VG9DbGVhcnBheShlLHQpe3JldHVybiBRbCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXRoaXMuX2NsZWFycGF5U2RrfHwhdHx8IXQuY2xpZW50VG9rZW4pdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7cmV0dXJuIHRoaXMuX2NsZWFycGF5U2RrLmluaXRpYWxpemUoe2NvdW50cnlDb2RlOmV9KSx0aGlzLl9jbGVhcnBheVNkay5yZWRpcmVjdCh7dG9rZW46dC5jbGllbnRUb2tlbn0pLFByb21pc2UucmVzb2x2ZSgpfSl9X2lzQ291bnRyeVN1cHBvcnRlZChlKXtyZXR1cm5cIkdCXCI9PT1lfV9sb2FkUGF5bWVudE1ldGhvZChlLHQsbil7dmFyIGk7cmV0dXJuIFFsKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7cmV0dXJuIHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoZSxPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbikse3BhcmFtczpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbnVsbD09bj92b2lkIDA6bi5wYXJhbXMpLHttZXRob2Q6dH0pfSkpfWNhdGNoKGUpe2lmKGUgaW5zdGFuY2VvZiBxbiYmNDIyPT09KG51bGw9PT0oaT1lLmJvZHkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnN0YXR1cykpdGhyb3cgbmV3IHJuKFwiQ2xlYXJwYXkgY2FuJ3QgcHJvY2VzcyB5b3VyIHBheW1lbnQgZm9yIHRoaXMgb3JkZXIsIHBsZWFzZSB0cnkgYW5vdGhlciBwYXltZW50IG1ldGhvZFwiKTt0aHJvdyBlfX0pfX1jbGFzcyBldXtjb25zdHJ1Y3RvcihlLHQ9d2luZG93KXt0aGlzLl9zY3JpcHRMb2FkZXI9ZSx0aGlzLl93aW5kb3c9dH1sb2FkKGUpe3JldHVybiB0PXRoaXMsbj12b2lkIDAscj1mdW5jdGlvbiooKXtpZih5aWVsZCB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZFNjcmlwdCh0aGlzLl9nZXRTY3JpcHRVcmwoZS5jb25maWcudGVzdE1vZGUpKSwhdGhpcy5fd2luZG93LkFmdGVyUGF5KXRocm93IG5ldyBYdDtyZXR1cm4gdGhpcy5fd2luZG93LkFmdGVyUGF5fSxuZXcoKGk9dm9pZCAwKXx8KGk9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChyLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoci50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiBpP246bmV3IGkoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgocj1yLmFwcGx5KHQsbnx8W10pKS5uZXh0KCkpfSk7dmFyIHQsbixpLHJ9X2dldFNjcmlwdFVybChlKXtyZXR1cm4gZT9cIi8vcG9ydGFsLnNhbmRib3guY2xlYXJwYXkuY28udWsvYWZ0ZXJwYXktYXN5bmMuanNcIjpcIi8vcG9ydGFsLmNsZWFycGF5LmNvLnVrL2FmdGVycGF5LWFzeW5jLmpzXCJ9fWNvbnN0IHR1PW5uKGU9Pm5ldyBYbChlLG5ldyBldShhKCkpKSxbe2dhdGV3YXk6XCJjbGVhcnBheVwifSx7aWQ6XCJjbGVhcnBheVwifV0pLG51PW5uKGU9Pm5ldyBGbChlKSxbe2RlZmF1bHQ6ITB9XSk7dmFyIGl1PWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIHJ1e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuX2NhcmRpbmFsQ2xpZW50PXR9cHJlcGFyZShlKXtyZXR1cm4gaXUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2NhcmRpbmFsQ2xpZW50LmxvYWQoZS5pZCxlLmNvbmZpZy50ZXN0TW9kZSkseWllbGQgdGhpcy5fY2FyZGluYWxDbGllbnQuY29uZmlndXJlKHlpZWxkIHRoaXMuX2dldENsaWVudFRva2VuKGUpKX0pfXN0YXJ0KGUsdCxuLGkpe3JldHVybiBpdSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7Z2V0Q2FyZEluc3RydW1lbnQ6cixnZXRQYXltZW50TWV0aG9kT3JUaHJvdzpvfT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse3BheW1lbnQ6e21ldGhvZElkOmE9XCJcIixwYXltZW50RGF0YTpzPXt9fT17fX09dCxkPVNkKHMpJiZyKHMuaW5zdHJ1bWVudElkKSxjPWQ/ZC5paW46aSYmaS5nZXRCaW4oKTtjJiYoeWllbGQgdGhpcy5fY2FyZGluYWxDbGllbnQucnVuQmluUHJvY2VzcyhjKSk7dHJ5e3JldHVybiB5aWVsZCBlKHEodCx7cGF5bWVudDp7cGF5bWVudERhdGE6e3RocmVlRFNlY3VyZTp7dG9rZW46byhhKS5jbGllbnRUb2tlbn19fX0pLG4pfWNhdGNoKGUpe2lmKCFYcihlKXx8IVooZS5ib2R5LmVycm9ycyx7Y29kZTpcInRocmVlX2Rfc2VjdXJlX3JlcXVpcmVkXCJ9KSl0aHJvdyBlO2NvbnN0IG49eWllbGQgdGhpcy5fY2FyZGluYWxDbGllbnQuZ2V0VGhyZWVEU2VjdXJlRGF0YShlLmJvZHkudGhyZWVfZHNfcmVzdWx0LHRoaXMuX2dldE9yZGVyRGF0YSgpKTtpZighaSlyZXR1cm4gdm9pZCh5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocSh0LnBheW1lbnQse3BheW1lbnREYXRhOnt0aHJlZURTZWN1cmU6bn19KSkpO3lpZWxkIGkuc3VibWl0KHEodC5wYXltZW50LHtwYXltZW50RGF0YTp7dGhyZWVEU2VjdXJlOm59fSkpfX0pfV9nZXRDbGllbnRUb2tlbihlKXtyZXR1cm4gaXUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiBlLmNsaWVudFRva2VuP2UuY2xpZW50VG9rZW46KHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoZS5pZCksdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KGUuaWQpLmNsaWVudFRva2VufHxcIlwiKX0pfV9nZXRPcmRlckRhdGEoKXtjb25zdCBlPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx0PWUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCksbj1lLmdldFNoaXBwaW5nQWRkcmVzcygpLGk9ZS5nZXRDaGVja291dE9yVGhyb3coKSxyPWUuZ2V0T3JkZXJPclRocm93KCk7cmV0dXJue2JpbGxpbmdBZGRyZXNzOnQsc2hpcHBpbmdBZGRyZXNzOm4sY3VycmVuY3lDb2RlOmkuY2FydC5jdXJyZW5jeS5jb2RlLGlkOnIub3JkZXJJZC50b1N0cmluZygpLGFtb3VudDppLmNhcnQuY2FydEFtb3VudH19fWNvbnN0IG91PVsxMDAwMDQsMTAxMCwxMDExLDEwMjBdO3ZhciBhdSxzdSxkdSxjdSxsdSx1dSxodTshZnVuY3Rpb24oZSl7ZS5TZXR1cENvbXBsZXRlZD1cInBheW1lbnRzLnNldHVwQ29tcGxldGVcIixlLlZhbGlkYXRlZD1cInBheW1lbnRzLnZhbGlkYXRlZFwifShhdXx8KGF1PXt9KSksZnVuY3Rpb24oZSl7ZS5Jbml0PVwiaW5pdFwiLGUuQ29tcGxldGU9XCJjb21wbGV0ZVwiLGUuQ29uZmlybT1cImNvbmZpcm1cIn0oc3V8fChzdT17fSkpLGZ1bmN0aW9uKGUpe2UuU3VjY2Vzcz1cIlNVQ0NFU1NcIixlLk5vQWN0aW9uPVwiTk9BQ1RJT05cIixlLkZhaWx1cmU9XCJGQUlMVVJFXCIsZS5FcnJvcj1cIkVSUk9SXCJ9KGR1fHwoZHU9e30pKSxmdW5jdGlvbihlKXtlLkNDQT1cIkNDQVwiLGUuUGF5cGFsPVwiUGF5cGFsXCIsZS5XYWxsZXQ9XCJXYWxsZXRcIixlLlZpc2FDaGVja291dD1cIlZpc2FDaGVja291dFwiLGUuQXBwbGVQYXk9XCJBcHBsZVBheVwiLGUuRGlzY292ZXJXYWxsZXQ9XCJEaXNjb3ZlcldhbGxldFwifShjdXx8KGN1PXt9KSksZnVuY3Rpb24oZSl7ZS5CaW5Qcm9jZXNzPVwiYmluLnByb2Nlc3NcIn0obHV8fChsdT17fSkpLGZ1bmN0aW9uKGUpe2UuQ0NBPVwiY2NhXCJ9KHV1fHwodXU9e30pKSxmdW5jdGlvbihlKXtlLlllcz1cIllcIixlLk5vPVwiTlwifShodXx8KGh1PXt9KSk7Y2xhc3MgcHV7Y29uc3RydWN0b3IoZSl7dGhpcy5fc2NyaXB0TG9hZGVyPWUsdGhpcy5fcHJvdmlkZXI9XCJcIix0aGlzLl90ZXN0TW9kZT0hMSx0aGlzLl9jb25maWd1cmF0aW9uVG9rZW49XCJcIn1sb2FkKGUsdD0hMSl7cmV0dXJuIHRoaXMuX3Byb3ZpZGVyPWUsdGhpcy5fdGVzdE1vZGU9dCx0aGlzLl9zZGt8fCh0aGlzLl9zZGs9dGhpcy5fc2NyaXB0TG9hZGVyLmxvYWQoZSx0KSksdGhpcy5fc2RrLnRoZW4oVil9Y29uZmlndXJlKGUpe2lmKHRoaXMuX2NvbmZpZ3VyYXRpb25Ub2tlbil7aWYodGhpcy5fY29uZmlndXJhdGlvblRva2VuPT09ZSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7dGhpcy5fc2RrPXRoaXMuX3NjcmlwdExvYWRlci5sb2FkKGAke3RoaXMuX3Byb3ZpZGVyfS4ke0RhdGUubm93KCl9YCx0aGlzLl90ZXN0TW9kZSl9cmV0dXJuIHRoaXMuX2dldENsaWVudFNESygpLnRoZW4odD0+bmV3IFByb21pc2UoKG4saSk9Pnt0Lm9uKGF1LlNldHVwQ29tcGxldGVkLCgpPT57dC5vZmYoYXUuU2V0dXBDb21wbGV0ZWQpLHQub2ZmKGF1LlZhbGlkYXRlZCksdGhpcy5fY29uZmlndXJhdGlvblRva2VuPWUsbigpfSksdC5vbihhdS5WYWxpZGF0ZWQsZT0+e3Qub2ZmKGF1LlNldHVwQ29tcGxldGVkKSx0Lm9mZihhdS5WYWxpZGF0ZWQpLGUuQWN0aW9uQ29kZT09PWR1LkVycm9yJiYoUChvdSxlLkVycm9yTnVtYmVyKSYmaShuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpKSxpKG5ldyBMaShlLkVycm9yRGVzY3JpcHRpb24pKSl9KSx0LnNldHVwKHN1LkluaXQse2p3dDplfSl9KSl9cnVuQmluUHJvY2VzcyhlKXtyZXR1cm4gdGhpcy5fZ2V0Q2xpZW50U0RLKCkudGhlbih0PT50LnRyaWdnZXIobHUuQmluUHJvY2VzcyxlKS5jYXRjaChWKSkudGhlbihlPT57aWYoIWV8fCFlLlN0YXR1cyl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKX0pfWdldFRocmVlRFNlY3VyZURhdGEoZSx0KXtyZXR1cm4gdGhpcy5fZ2V0Q2xpZW50U0RLKCkudGhlbihuPT5uZXcgUHJvbWlzZSgoaSxyKT0+e24ub24oYXUuVmFsaWRhdGVkLChlLHQpPT57aWYobi5vZmYoYXUuVmFsaWRhdGVkKSwhdClyZXR1cm4gcihuZXcgTGkoZS5FcnJvckRlc2NyaXB0aW9uP2UuRXJyb3JEZXNjcmlwdGlvbjpcIkFuIGVycm9yIHdhcyBlbmNvdW50ZXJlZCB3aGlsZSBwcm9jZXNzaW5nIHRoZSB0cmFuc2FjdGlvbi5cIikpO2lmKCFlLkFjdGlvbkNvZGUpcmV0dXJuIGkoe3Rva2VuOnR9KTtzd2l0Y2goZS5BY3Rpb25Db2RlKXtjYXNlIGR1LlN1Y2Nlc3M6cmV0dXJuIGkoe3Rva2VuOnR9KTtjYXNlIGR1Lk5vQWN0aW9uOnJldHVybiBlLkVycm9yTnVtYmVyPjA/cihuZXcgTGkoZS5FcnJvckRlc2NyaXB0aW9uKSk6ZS5QYXltZW50JiZlLlBheW1lbnQuRXh0ZW5kZWREYXRhJiZlLlBheW1lbnQuRXh0ZW5kZWREYXRhLlNpZ25hdHVyZVZlcmlmaWNhdGlvbj09PWh1Llllcz9pKHt0b2tlbjp0fSk6cihuZXcgTGkoXCJUcmFuc2FjdGlvbiBzaWduYXR1cmUgY291bGQgbm90IGJlIHZhbGlkYXRlZC5cIikpO2Nhc2UgZHUuRmFpbHVyZTpyZXR1cm4gcihuZXcgTGkoXCJVc2VyIGZhaWxlZCBhdXRoZW50aWNhdGlvbiBvciBhbiBlcnJvciB3YXMgZW5jb3VudGVyZWQgd2hpbGUgcHJvY2Vzc2luZyB0aGUgdHJhbnNhY3Rpb24uXCIpKTtjYXNlIGR1LkVycm9yOnJldHVybiByKG5ldyBMaShlLkVycm9yRGVzY3JpcHRpb24pKX19KTtjb25zdCBvPXtBY3NVcmw6ZS5hY3NfdXJsLFBheWxvYWQ6ZS5tZXJjaGFudF9kYXRhfSxhPXRoaXMuX21hcFRvUGFydGlhbE9yZGVyKHQsZS5wYXllcl9hdXRoX3JlcXVlc3QpO24uY29udGludWUodXUuQ0NBLG8sYSl9KSl9X21hcFRvUGFydGlhbE9yZGVyKGUsdCl7Y29uc3Qgbj17QmlsbGluZ0FkZHJlc3M6dGhpcy5fbWFwVG9DYXJkaW5hbEFkZHJlc3MoZS5iaWxsaW5nQWRkcmVzcyl9O3JldHVybiBlLnBheW1lbnREYXRhJiYobi5BY2NvdW50PXRoaXMuX21hcFRvQ2FyZGluYWxBY2NvdW50KGUucGF5bWVudERhdGEpKSxlLmJpbGxpbmdBZGRyZXNzLmVtYWlsJiYobi5FbWFpbDE9ZS5iaWxsaW5nQWRkcmVzcy5lbWFpbCksZS5zaGlwcGluZ0FkZHJlc3MmJihuLlNoaXBwaW5nQWRkcmVzcz10aGlzLl9tYXBUb0NhcmRpbmFsQWRkcmVzcyhlLnNoaXBwaW5nQWRkcmVzcykpLHtDb25zdW1lcjpuLE9yZGVyRGV0YWlsczp7T3JkZXJOdW1iZXI6ZS5pZCxBbW91bnQ6ZS5hbW91bnQsQ3VycmVuY3lDb2RlOmUuY3VycmVuY3lDb2RlLE9yZGVyQ2hhbm5lbDpcIlNcIixUcmFuc2FjdGlvbklkOnR9fX1fbWFwVG9DYXJkaW5hbEFjY291bnQoZSl7cmV0dXJue0FjY291bnROdW1iZXI6TnVtYmVyKGUuY2NOdW1iZXIpLEV4cGlyYXRpb25Nb250aDpOdW1iZXIoZS5jY0V4cGlyeS5tb250aCksRXhwaXJhdGlvblllYXI6TnVtYmVyKGUuY2NFeHBpcnkueWVhciksTmFtZU9uQWNjb3VudDplLmNjTmFtZSxDYXJkQ29kZTpOdW1iZXIoZS5jY0N2dil9fV9tYXBUb0NhcmRpbmFsQWRkcmVzcyhlKXtjb25zdCB0PXtGaXJzdE5hbWU6ZS5maXJzdE5hbWUsTGFzdE5hbWU6ZS5sYXN0TmFtZSxBZGRyZXNzMTplLmFkZHJlc3MxLENpdHk6ZS5jaXR5LFN0YXRlOmUuc3RhdGVPclByb3ZpbmNlLFBvc3RhbENvZGU6ZS5wb3N0YWxDb2RlLENvdW50cnlDb2RlOmUuY291bnRyeUNvZGV9O3JldHVybiBlLmFkZHJlc3MyJiYodC5BZGRyZXNzMj1lLmFkZHJlc3MyKSxlLnBob25lJiYodC5QaG9uZTE9ZS5waG9uZSksdH1fZ2V0Q2xpZW50U0RLKCl7aWYoIXRoaXMuX3Nkayl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gdGhpcy5fc2RrfX1jbGFzcyBtdXtjb25zdHJ1Y3RvcihlLHQ9d2luZG93KXt0aGlzLl9zY3JpcHRMb2FkZXI9ZSx0aGlzLl93aW5kb3c9dH1sb2FkKGUsdCl7Y29uc3Qgbj10P1wiaHR0cHM6Ly9zb25nYmlyZHN0YWcuY2FyZGluYWxjb21tZXJjZS5jb20vZWRnZS92MS9zb25nYmlyZC5qc1wiOlwiaHR0cHM6Ly9zb25nYmlyZC5jYXJkaW5hbGNvbW1lcmNlLmNvbS9lZGdlL3YxL3NvbmdiaXJkLmpzXCI7cmV0dXJuIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkU2NyaXB0KGAke259P3Y9JHtlfWApLnRoZW4oKCk9PntpZighdGhpcy5fd2luZG93LkNhcmRpbmFsKXRocm93IG5ldyBYdDtyZXR1cm4gdGhpcy5fd2luZG93LkNhcmRpbmFsfSl9fXZhciB5dT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBndSBleHRlbmRzIEZse2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSksdGhpcy5fdGhyZWVEU2VjdXJlRmxvdz10fWluaXRpYWxpemUoZSl7Y29uc3QgdD1PYmplY3QuY3JlYXRlKG51bGwse2luaXRpYWxpemU6e2dldDooKT0+c3VwZXIuaW5pdGlhbGl6ZX19KTtyZXR1cm4geXUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHQuaW5pdGlhbGl6ZS5jYWxsKHRoaXMsZSk7Y29uc3R7Z2V0UGF5bWVudE1ldGhvZE9yVGhyb3c6bn09dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGk9bihlLm1ldGhvZElkKTtpLmNvbmZpZy5pczNkc0VuYWJsZWQmJih5aWVsZCB0aGlzLl90aHJlZURTZWN1cmVGbG93LnByZXBhcmUoaSkpfSl9ZXhlY3V0ZShlLHQpe2NvbnN0IG49T2JqZWN0LmNyZWF0ZShudWxsLHtleGVjdXRlOntnZXQ6KCk9PnN1cGVyLmV4ZWN1dGV9fSk7cmV0dXJuIHl1KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50OnttZXRob2RJZDppPVwiXCJ9PXt9fT1lLHtnZXRQYXltZW50TWV0aG9kT3JUaHJvdzpyfT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7cmV0dXJuIHIoaSkuY29uZmlnLmlzM2RzRW5hYmxlZD90aGlzLl90aHJlZURTZWN1cmVGbG93LnN0YXJ0KG4uZXhlY3V0ZS5iaW5kKHRoaXMpLGUsdCx0aGlzLl9ob3N0ZWRGb3JtKTpuLmV4ZWN1dGUuY2FsbCh0aGlzLGUsdCl9KX19Y29uc3QgdnU9bm4oZT0+bmV3IGd1KGUsbmV3IHJ1KGUsbmV3IHB1KG5ldyBtdShhKCkpKSkpLFt7aWQ6XCJjeWJlcnNvdXJjZVwifV0pO3ZhciBmdT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBTdXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLl9jYXJkaW5hbENsaWVudD10fXByZXBhcmUoZSl7cmV0dXJuIGZ1KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9jYXJkaW5hbENsaWVudC5sb2FkKGUuaWQsZS5jb25maWcudGVzdE1vZGUpfSl9c3RhcnQoZSx0LG4saSl7dmFyIHIsbyxhLHM7cmV0dXJuIGZ1KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtnZXRDYXJkSW5zdHJ1bWVudDpkfT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse3BheW1lbnQ6Yz17bWV0aG9kSWQ6XCJcIn19PXQse3BheW1lbnREYXRhOmw9e319PWM7dHJ5e3JldHVybiB5aWVsZCBlKHQsbil9Y2F0Y2goZSl7aWYoWHIoZSkmJlwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWRcIj09PShudWxsPT09KHI9ZS5ib2R5KXx8dm9pZCAwPT09cj92b2lkIDA6ci5zdGF0dXMpKXtjb25zdCB0PW51bGw9PT0oYT1udWxsPT09KG89ZS5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkKXx8dm9pZCAwPT09bz92b2lkIDA6by5kYXRhKXx8dm9pZCAwPT09YT92b2lkIDA6YS50b2tlbixuPW51bGw9PT0ocz1lLmJvZHkudGhyZWVfZHNfcmVzdWx0KXx8dm9pZCAwPT09cz92b2lkIDA6cy5wYXllcl9hdXRoX3JlcXVlc3Q7eWllbGQgdGhpcy5fY2FyZGluYWxDbGllbnQuY29uZmlndXJlKHQpO2NvbnN0IHI9dGhpcy5fZ2V0QmluKGwsZCxpKTtyJiYoeWllbGQgdGhpcy5fY2FyZGluYWxDbGllbnQucnVuQmluUHJvY2VzcyhyKSk7dHJ5e3JldHVybiB5aWVsZCB0aGlzLl9zdWJtaXRQYXltZW50KGMse3hpZDpufSxpKX1jYXRjaChlKXtpZihYcihlKSYmWihlLmJvZHkuZXJyb3JzLHtjb2RlOlwidGhyZWVfZF9zZWN1cmVfcmVxdWlyZWRcIn0pKXtjb25zdCB0PWUuYm9keS50aHJlZV9kc19yZXN1bHQsbj1udWxsPT10P3ZvaWQgMDp0LnBheWVyX2F1dGhfcmVxdWVzdDtyZXR1cm4geWllbGQgdGhpcy5fY2FyZGluYWxDbGllbnQuZ2V0VGhyZWVEU2VjdXJlRGF0YSh0LHRoaXMuX2dldE9yZGVyRGF0YSgpKSx0aGlzLl9zdWJtaXRQYXltZW50KGMse3Rva2VuOm59LGkpfXRocm93IGV9fXRocm93IGV9fSl9X2dldE9yZGVyRGF0YSgpe2NvbnN0IGU9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHQ9ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKSxuPWUuZ2V0U2hpcHBpbmdBZGRyZXNzKCkse2NhcnQ6e2N1cnJlbmN5Ontjb2RlOml9LGNhcnRBbW91bnQ6cn19PWUuZ2V0Q2hlY2tvdXRPclRocm93KCk7cmV0dXJue2JpbGxpbmdBZGRyZXNzOnQsc2hpcHBpbmdBZGRyZXNzOm4sY3VycmVuY3lDb2RlOmksaWQ6ZS5nZXRPcmRlck9yVGhyb3coKS5vcmRlcklkLnRvU3RyaW5nKCksYW1vdW50OnJ9fV9zdWJtaXRQYXltZW50KGUsdCxuKXtyZXR1cm4gZnUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IGk9cSh7fSxlLHtwYXltZW50RGF0YTp7dGhyZWVEU2VjdXJlOnR9fSk7bnx8KHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChpKSkseWllbGQgbnVsbD09bj92b2lkIDA6bi5zdWJtaXQoaSl9KX1fZ2V0QmluKGUsdCxuKXtjb25zdCBpPVNkKGUpJiZ0KGUuaW5zdHJ1bWVudElkKSxyPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZTtyZXR1cm4hU2QodCkmJlwic3RyaW5nXCI9PXR5cGVvZiB0LmNjTmFtZSYmXCJzdHJpbmdcIj09dHlwZW9mIHQuY2NOdW1iZXImJlwib2JqZWN0XCI9PXR5cGVvZiB0LmNjRXhwaXJ5JiZcInN0cmluZ1wiPT10eXBlb2YgdC5jY0V4cGlyeS5tb250aCYmXCJzdHJpbmdcIj09dHlwZW9mIHQuY2NFeHBpcnkueWVhcn0oZSkmJmUuY2NOdW1iZXIsbz1uP24uZ2V0QmluKCk6cjtyZXR1cm4oaT9pLmlpbjpvKXx8XCJcIn19dmFyIF91PWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIHd1IGV4dGVuZHMgRmx7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLl90aHJlZURTZWN1cmVGbG93PXR9aW5pdGlhbGl6ZShlKXtjb25zdCB0PU9iamVjdC5jcmVhdGUobnVsbCx7aW5pdGlhbGl6ZTp7Z2V0OigpPT5zdXBlci5pbml0aWFsaXplfX0pO3JldHVybiBfdSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdC5pbml0aWFsaXplLmNhbGwodGhpcyxlKTtjb25zdHtnZXRQYXltZW50TWV0aG9kT3JUaHJvdzpufT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksaT1uKGUubWV0aG9kSWQpO2kuY29uZmlnLmlzM2RzRW5hYmxlZCYmKHlpZWxkIHRoaXMuX3RocmVlRFNlY3VyZUZsb3cucHJlcGFyZShpKSl9KX1leGVjdXRlKGUsdCl7Y29uc3Qgbj1PYmplY3QuY3JlYXRlKG51bGwse2V4ZWN1dGU6e2dldDooKT0+c3VwZXIuZXhlY3V0ZX19KTtyZXR1cm4gX3UodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6e21ldGhvZElkOmk9XCJcIn09e319PWUse2dldFBheW1lbnRNZXRob2RPclRocm93OnJ9PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtyZXR1cm4gcihpKS5jb25maWcuaXMzZHNFbmFibGVkP3RoaXMuX3RocmVlRFNlY3VyZUZsb3cuc3RhcnQobi5leGVjdXRlLmJpbmQodGhpcyksZSx0LHRoaXMuX2hvc3RlZEZvcm0pOm4uZXhlY3V0ZS5jYWxsKHRoaXMsZSx0KX0pfX1jb25zdCBDdT1ubihlPT5uZXcgd3UoZSxuZXcgU3UoZSxuZXcgcHUobmV3IG11KGEoKSkpKSksW3tpZDpcImN5YmVyc291cmNldjJcIn1dKTtjbGFzcyBJdXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX2Zvcm1Qb3N0ZXI9ZSx0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPXR9ZXhlY3V0ZShlLHQpe3JldHVybiBuPXRoaXMsaT12b2lkIDAsbz1mdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSkscj1uJiZuLnBheW1lbnREYXRhO2lmKCFufHwhcil0aHJvdyBuZXcgWWkoW1wicGF5bWVudC5wYXltZW50RGF0YVwiXSk7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihpLHQpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG4pLHtwYXltZW50RGF0YTpyfSkpfWNhdGNoKGUpe2lmKCFYcihlKXx8XCJvYmplY3RcIiE9dHlwZW9mKG89ZS5ib2R5KXx8bnVsbD09PW98fCEoXCJhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZFwiaW4gbyl8fCF0aGlzLl9pc0FkZGl0aW9uYWxBY3Rpb25SZXF1aXJlZChlLmJvZHkpKXJldHVybiBQcm9taXNlLnJlamVjdChlKTtjb25zdHtib2R5OnthZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZDp7ZGF0YTp7cmVkaXJlY3RfdXJsOnR9fX19PWU7cmV0dXJuIG5ldyBQcm9taXNlKCgpPT57dGhpcy5yZWRpcmVjdFVybCh0KX0pfXZhciBvfSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1pbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1yZWRpcmVjdFVybChlKXtyZXR1cm4gdGhpcy5fZm9ybVBvc3Rlci5wb3N0Rm9ybShlLHt9KX1faXNBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWQoZSl7Y29uc3R7YWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ6dCxzdGF0dXM6bn09ZTtyZXR1cm5cImFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkXCI9PT1uJiZ0JiZcIm9mZnNpdGVfcmVkaXJlY3RcIj09PXQudHlwZX19Y29uc3QgYnU9bm4oZT0+bmV3IEl1KEVlKCksZSksW3tpZDpcImxheWJ1eVwifV0pO2Z1bmN0aW9uIFB1KGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmXCJlcnJvcnNcImluIGUmJkFycmF5LmlzQXJyYXkoZS5lcnJvcnMpJiZcImNvZGVcImluIGUuZXJyb3JzWzBdJiZcInN0cmluZ1wiPT10eXBlb2YgZS5lcnJvcnNbMF0uY29kZSYmXCJwcm92aWRlcl9kYXRhXCJpbiBlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5wcm92aWRlcl9kYXRhfXZhciBPdT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBFdSBleHRlbmRzIGpye2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoXCJhZHllblwiLGUpLHRoaXMuX3NjcmlwdExvYWRlcj10LHRoaXMuX3NlcnZpY2U9ZX1pbml0aWFsaXplKGUsdCxuKXtjb25zdCBpPU9iamVjdC5jcmVhdGUobnVsbCx7aW5pdGlhbGl6ZTp7Z2V0OigpPT5zdXBlci5pbml0aWFsaXplfSxnZXRQYXltZW50TWV0aG9kOntnZXQ6KCk9PnN1cGVyLmdldFBheW1lbnRNZXRob2R9fSk7cmV0dXJuIE91KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCBpLmluaXRpYWxpemUuY2FsbCh0aGlzLGUsdCxuKTtjb25zdCByPWkuZ2V0UGF5bWVudE1ldGhvZC5jYWxsKHRoaXMpLG89dGhpcy5fc2VydmljZS5nZXRTdGF0ZSgpLmdldFN0b3JlQ29uZmlnKCk7aWYoIW8pdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdDaGVja291dENvbmZpZyk7cmV0dXJuIHRoaXMuX2FkeWVuQ2xpZW50PXlpZWxkIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkKHtlbnZpcm9ubWVudDpyLmNvbmZpZy50ZXN0TW9kZT9cInRlc3RcIjpcImxpdmVcIixsb2NhbGU6by5zdG9yZVByb2ZpbGUuc3RvcmVMYW5ndWFnZX0pLFByb21pc2UucmVzb2x2ZSgpfSl9Z2V0Tm9uY2UoZSl7Y29uc3QgdD1PYmplY3QuY3JlYXRlKG51bGwse2dldE5vbmNlOntnZXQ6KCk9PnN1cGVyLmdldE5vbmNlfSxnZXRQYXltZW50TWV0aG9kOntnZXQ6KCk9PnN1cGVyLmdldFBheW1lbnRNZXRob2R9fSk7cmV0dXJuIE91KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXlpZWxkIHQuZ2V0Tm9uY2UuY2FsbCh0aGlzLGUpLGk9dC5nZXRQYXltZW50TWV0aG9kLmNhbGwodGhpcyk7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHt0eXBlOmkubWV0aG9kLGdvb2dsZVBheVRva2VuOm4sYnJvd3Nlcl9pbmZvOkRvKCl9KX0pfXByb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGUpe3JldHVybiBPdSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIVhyKGUpfHwhUHUoZS5ib2R5KSl0aHJvdyBlO2NvbnN0IHQ9eWllbGQgdGhpcy5faGFuZGxlQWN0aW9uKGUuYm9keS5wcm92aWRlcl9kYXRhKTt0cnl7cmV0dXJuIHlpZWxkIHRoaXMuX3NlcnZpY2Uuc3VibWl0UGF5bWVudCh0KX1jYXRjaChlKXtyZXR1cm4gdGhpcy5wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlKX19KX1faGFuZGxlQWN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZSgodCxuKT0+e2NvbnN0IGk9SlNPTi5wYXJzZShlLmFjdGlvbik7dGhpcy5fZ2V0QWR5ZW5DbGllbnQoKS5jcmVhdGVGcm9tQWN0aW9uKGkse29uQWRkaXRpb25hbERldGFpbHM6ZT0+e2NvbnN0IG49e21ldGhvZElkOmkucGF5bWVudE1ldGhvZFR5cGUscGF5bWVudERhdGE6e25vbmNlOkpTT04uc3RyaW5naWZ5KGUuZGF0YSl9fTt0KG4pfSxzaXplOlwiMDVcIixvbkVycm9yOmU9Pm4oZSl9KS5tb3VudChcImJvZHlcIiksbihuZXcgTW4pfSl9X2dldEFkeWVuQ2xpZW50KCl7aWYoIXRoaXMuX2FkeWVuQ2xpZW50KXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3JldHVybiB0aGlzLl9hZHllbkNsaWVudH19dmFyIEF1PWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIGt1e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3I9dCx0aGlzLl9sb2FkaW5nSW5kaWNhdG9yPW5ldyBCYSh7Y29udGFpbmVyU3R5bGVzOlJhfSl9aW5pdGlhbGl6ZShlKXt2YXIgdDtyZXR1cm4gQXUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCEobnVsbD09ZT92b2lkIDA6ZS5tZXRob2RJZCl8fCFxcihlLm1ldGhvZElkKSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGlzIG5vdCBhIHZhbGlkIGtleS4nKTt0aGlzLl9tZXRob2RJZD1lLm1ldGhvZElkO2NvbnN0IG49ZVt0aGlzLl9nZXRNZXRob2RJZCgpXTtpZighKG51bGw9PW4/dm9pZCAwOm4ud2FsbGV0QnV0dG9uKSl0aHJvdyBuZXcgcm4oXCJVbmFibGUgdG8gcHJvY2VlZCB3aXRob3V0IHZhbGlkIG9wdGlvbnMuXCIpO2NvbnN0e3dhbGxldEJ1dHRvbjppLGxvYWRpbmdDb250YWluZXJJZDpyfT1uLG89ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShuLFtcIndhbGxldEJ1dHRvblwiLFwibG9hZGluZ0NvbnRhaW5lcklkXCJdKTt0aGlzLl9sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPXIseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZCh0aGlzLl9nZXRNZXRob2RJZCgpKTtjb25zdCBhPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyh0aGlzLl9nZXRNZXRob2RJZCgpKTt5aWVsZCB0aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yLmluaXRpYWxpemUoKCk9PmEsdGhpcy5fZ2V0R29vZ2xlUGF5Q2xpZW50T3B0aW9ucyhudWxsPT09KHQ9YS5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnN0b3JlQ291bnRyeSkpLHRoaXMuX2FkZFBheW1lbnRCdXR0b24oaSxvKX0pfWV4ZWN1dGUoe3BheW1lbnQ6ZX0pe3JldHVybiBBdSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIShudWxsPT1lP3ZvaWQgMDplLm1ldGhvZElkKSl0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiXSk7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcigpO2NvbnN0IHQ9eWllbGQgdGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5nZXROb25jZShlLm1ldGhvZElkKSxuPXlpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3IuZXh0cmFQYXltZW50RGF0YSgpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtwYXltZW50RGF0YTpPYmplY3QuYXNzaWduKHtub25jZTp0fSxuKX0pKX1jYXRjaCh0KXt5aWVsZCB0aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yLnByb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKHQsZS5tZXRob2RJZCl9fSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXt2YXIgZTtyZXR1cm4gdGhpcy5fY2xpY2tMaXN0ZW5lciYmKG51bGw9PT0oZT10aGlzLl9wYXltZW50QnV0dG9uKXx8dm9pZCAwPT09ZXx8ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9jbGlja0xpc3RlbmVyKSksdGhpcy5fcGF5bWVudEJ1dHRvbj12b2lkIDAsdGhpcy5fY2xpY2tMaXN0ZW5lcj12b2lkIDAsdGhpcy5fbWV0aG9kSWQ9dm9pZCAwLFByb21pc2UucmVzb2x2ZSgpfV9hZGRQYXltZW50QnV0dG9uKGUsdCl7aWYodGhpcy5fcGF5bWVudEJ1dHRvbilyZXR1cm47Y29uc3Qgbj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlKTtpZighbil0aHJvdyBuZXcgcm4oXCJVbmFibGUgdG8gcHJvY2VlZCB3aXRob3V0IGEgd2FsbGV0QnV0dG9uLlwiKTt0aGlzLl9wYXltZW50QnV0dG9uPW4sdGhpcy5fY2xpY2tMaXN0ZW5lcj10aGlzLl9oYW5kbGVDbGljayh0KSx0aGlzLl9wYXltZW50QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2NsaWNrTGlzdGVuZXIpfV9oYW5kbGVDbGljayh7b25QYXltZW50U2VsZWN0OmUsb25FcnJvcjp0fSl7cmV0dXJuIG49PkF1KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtuLnByZXZlbnREZWZhdWx0KCk7dHJ5e3lpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3IuaW5pdGlhbGl6ZVdpZGdldCgpLHlpZWxkIHRoaXMuX2ludGVyYWN0V2l0aFBheW1lbnRTaGVldCgpfWNhdGNoKGUpe2xldCBuPWU7aWYodGhpcy5fdG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksVXIoZSkpe2lmKFwiQ0FOQ0VMRURcIj09PWUuc3RhdHVzQ29kZSl0aHJvdyBuZXcgTW47bj1uZXcgTGkoSlNPTi5zdHJpbmdpZnkoZSkpfXRocm93IG51bGw9PXR8fHQobmV3IExpKFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmVxdWVzdGluZyB5b3VyIEdvb2dsZSBQYXkgcGF5bWVudCBkZXRhaWxzLlwiKSksbn1udWxsPT1lfHxlKCl9KX1faW50ZXJhY3RXaXRoUGF5bWVudFNoZWV0KCl7cmV0dXJuIEF1KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBlPXlpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3Iuc2hvd1BheW1lbnRTaGVldCgpO3RoaXMuX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITApO2NvbnN0IHQ9dGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5tYXBUb0JpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkoZSk7dCYmKHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3ModCkpLHlpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3Iuc2V0RXh0ZXJuYWxDaGVja291dFhocih0aGlzLl9nZXRNZXRob2RJZCgpLGUpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KCkseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZCh0aGlzLl9nZXRNZXRob2RJZCgpKSx0aGlzLl90b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCExKX0pfV9nZXRNZXRob2RJZCgpe3JldHVybiBxdCh0aGlzLl9tZXRob2RJZCwoKT0+bmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCkpfV9nZXRJc1NpZ25lZEluT3JUaHJvdygpe3JldHVybiBBdSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e3JldHVybiEhKHlpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3IuZ2V0Tm9uY2UodGhpcy5fZ2V0TWV0aG9kSWQoKSkpfWNhdGNoKGUpe2lmKGUgaW5zdGFuY2VvZiBqdCYmZS5zdWJ0eXBlPT09a3QuTWlzc2luZ1BheW1lbnRUb2tlbilyZXR1cm4hMTt0aHJvdyBlfX0pfV9oYW5kbGVPZmZlclRyaWdnZXIoZSl7cmV0dXJuIEF1KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtsZXQgdD0hMSxuPVwiU2lnbiBpbiB0byBHb29nbGUgUGF5IGZpcnN0IHRvIGFwcGx5IG9yIHJlbW92ZSBwcm9tbyBjb2Rlcy5cIjt0cnl7dD15aWVsZCB0aGlzLl9nZXRJc1NpZ25lZEluT3JUaHJvdygpfWNhdGNoKGUpe2UgaW5zdGFuY2VvZiBqdCYmKG49ZS5tZXNzYWdlKX1pZih0KXtjb25zdHtuZXdPZmZlckluZm86dCxlcnJvcjpufT15aWVsZCB0aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yLmhhbmRsZUNvdXBvbnMoZSk7cmV0dXJue25ld09mZmVySW5mbzp0LGVycm9yOm59fXJldHVybntlcnJvcjp7cmVhc29uOnhyLk9GRkVSX0lOVkFMSUQsbWVzc2FnZTpuLGludGVudDpGci5PRkZFUn19fSl9X2dldEdvb2dsZVBheUNsaWVudE9wdGlvbnMoZSl7cmV0dXJue3BheW1lbnREYXRhQ2FsbGJhY2tzOntvblBheW1lbnREYXRhQ2hhbmdlZDooe2NhbGxiYWNrVHJpZ2dlcjp0LG9mZmVyRGF0YTpufSk9PkF1KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBpPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzW1wiUEktMjg3NS5nb29nbGVwYXlfY291cG9uc19oYW5kbGluZ1wiXXx8ITE7aWYodCE9PUZyLklOSVRJQUxJWkUmJighaXx8dCE9PUZyLk9GRkVSKSlyZXR1cm47Y29uc3R7b2ZmZXJDaGFuZ2VUcmlnZ2VyczpyfT10aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yLmdldENhbGxiYWNrVHJpZ2dlcnMoKSx7bmV3T2ZmZXJJbmZvOm8sZXJyb3I6YX09ci5pbmNsdWRlcyh0KT95aWVsZCB0aGlzLl9oYW5kbGVPZmZlclRyaWdnZXIobik6e30scz1hO3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KCk7Y29uc3R7Z2V0Q2hlY2tvdXRPclRocm93OmQsZ2V0Q2FydE9yVGhyb3c6Y309dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHtjb2RlOmwsZGVjaW1hbFBsYWNlczp1fT1jKCkuY3VycmVuY3ksaD1KKGQoKS5vdXRzdGFuZGluZ0JhbGFuY2UsdSkudG9GaXhlZCh1KTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtuZXdUcmFuc2FjdGlvbkluZm86T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUmJntjb3VudHJ5Q29kZTplfSkse2N1cnJlbmN5Q29kZTpsLHRvdGFsUHJpY2VTdGF0dXM6TXIuRklOQUwsdG90YWxQcmljZTpofSl9LG8mJntuZXdPZmZlckluZm86b30pLHMmJntlcnJvcjpzfSl9KX19fV90b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGUpe2UmJnRoaXMuX2xvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/dGhpcy5fbG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMuX2xvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpOnRoaXMuX2xvYWRpbmdJbmRpY2F0b3IuaGlkZSgpfX1jb25zdCBUdT1ubihlPT5uZXcga3UoZSxuZXcgJHIoWXIoKSxuZXcgRXUoZSxuZXcgdmQoYSgpLHMoKSkpLG4oKSxFZSgpKSksW3tpZDpcImdvb2dsZXBheWFkeWVudjJcIn1dKTt2YXIgRHU9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgTXUgZXh0ZW5kcyBqcntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKFwiYWR5ZW5cIixlKSx0aGlzLl9zY3JpcHRMb2FkZXI9dCx0aGlzLl9zZXJ2aWNlPWV9aW5pdGlhbGl6ZShlLHQsbil7Y29uc3QgaT1PYmplY3QuY3JlYXRlKG51bGwse2luaXRpYWxpemU6e2dldDooKT0+c3VwZXIuaW5pdGlhbGl6ZX0sZ2V0UGF5bWVudE1ldGhvZDp7Z2V0OigpPT5zdXBlci5nZXRQYXltZW50TWV0aG9kfX0pO3JldHVybiBEdSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgaS5pbml0aWFsaXplLmNhbGwodGhpcyxlLHQsbik7Y29uc3Qgcj1pLmdldFBheW1lbnRNZXRob2QuY2FsbCh0aGlzKSxvPXRoaXMuX3NlcnZpY2UuZ2V0U3RhdGUoKS5nZXRTdG9yZUNvbmZpZygpO2lmKCFvKXRocm93IG5ldyBqdChrdC5NaXNzaW5nQ2hlY2tvdXRDb25maWcpO3JldHVybiB0aGlzLl9hZHllbkNsaWVudD15aWVsZCB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZCh7ZW52aXJvbm1lbnQ6ci5jb25maWcudGVzdE1vZGU/XCJ0ZXN0XCI6XCJsaXZlXCIsbG9jYWxlOm8uc3RvcmVQcm9maWxlLnN0b3JlTGFuZ3VhZ2V9KSxQcm9taXNlLnJlc29sdmUoKX0pfXByb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGUpe3JldHVybiBEdSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIVhyKGUpfHwhUHUoZS5ib2R5KSl0aHJvdyBlO2NvbnN0IHQ9eWllbGQgdGhpcy5faGFuZGxlQWN0aW9uKGUuYm9keS5wcm92aWRlcl9kYXRhKTt0cnl7cmV0dXJuIHlpZWxkIHRoaXMuX3NlcnZpY2Uuc3VibWl0UGF5bWVudCh0KX1jYXRjaChlKXtyZXR1cm4gdGhpcy5wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlKX19KX1nZXROb25jZShlKXtjb25zdCB0PU9iamVjdC5jcmVhdGUobnVsbCx7Z2V0Tm9uY2U6e2dldDooKT0+c3VwZXIuZ2V0Tm9uY2V9LGdldFBheW1lbnRNZXRob2Q6e2dldDooKT0+c3VwZXIuZ2V0UGF5bWVudE1ldGhvZH19KTtyZXR1cm4gRHUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49eWllbGQgdC5nZXROb25jZS5jYWxsKHRoaXMsZSksaT10LmdldFBheW1lbnRNZXRob2QuY2FsbCh0aGlzKTtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoe3R5cGU6aS5tZXRob2QsZ29vZ2xlUGF5VG9rZW46bixicm93c2VyX2luZm86RG8oKX0pfSl9X2hhbmRsZUFjdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoKHQsbik9Pntjb25zdCBpPUpTT04ucGFyc2UoZS5hY3Rpb24pO3RoaXMuX2dldEFkeWVuQ2xpZW50KCkuY3JlYXRlRnJvbUFjdGlvbihpLHtvbkFkZGl0aW9uYWxEZXRhaWxzOmU9Pntjb25zdCBuPXttZXRob2RJZDppLnBheW1lbnRNZXRob2RUeXBlLHBheW1lbnREYXRhOntub25jZTpKU09OLnN0cmluZ2lmeShlLmRhdGEpfX07dChuKX0sc2l6ZTpcIjA1XCIsb25FcnJvcjplPT5uKGUpfSkubW91bnQoXCJib2R5XCIpLG4obmV3IE1uKX0pfV9nZXRBZHllbkNsaWVudCgpe2lmKCF0aGlzLl9hZHllbkNsaWVudCl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gdGhpcy5fYWR5ZW5DbGllbnR9fWNvbnN0IHp1PW5uKGU9Pm5ldyBrdShlLG5ldyAkcihZcigpLG5ldyBNdShlLG5ldyBiZChhKCkscygpKSksbigpLEVlKCkpKSxbe2lkOlwiZ29vZ2xlcGF5YWR5ZW52M1wifV0pLE51PW5uKGU9Pm5ldyBrdShlLG5ldyAkcihZcigpLG5ldyBacihlKSxuKCksRWUoKSkpLFt7aWQ6XCJnb29nbGVwYXlhdXRob3JpemVuZXRcIn1dKSx4dT1ubihlPT57Y29uc3QgdD1uKCk7cmV0dXJuIG5ldyBrdShlLG5ldyAkcihZcigpLG5ldyBubyhlLHQpLHQsRWUoKSkpfSxbe2lkOlwiZ29vZ2xlcGF5Y2hlY2tvdXRjb21cIn1dKSxGdT1ubihlPT5uZXcga3UoZSxuZXcgJHIoWXIoKSxuZXcgcm8oZSksbigpLEVlKCkpKSxbe2lkOlwiZ29vZ2xlcGF5Y3liZXJzb3VyY2V2MlwifSx7aWQ6XCJnb29nbGVwYXlibnpcIn1dKSxSdT1ubihlPT5uZXcga3UoZSxuZXcgJHIoWXIoKSxuZXcgc28oZSksbigpLEVlKCkpKSxbe2lkOlwiZ29vZ2xlcGF5b3JiaXRhbFwifV0pLEx1PW5uKGU9Pm5ldyBrdShlLG5ldyAkcihZcigpLG5ldyBobyhlLG5ldyBtbyhhKCkpKSxuKCksRWUoKSkpLFt7aWQ6XCJnb29nbGVwYXlzdHJpcGVcIn0se2lkOlwiZ29vZ2xlcGF5c3RyaXBldXBlXCJ9LHtpZDpcImdvb2dsZXBheXN0cmlwZW9jc1wifV0pLEJ1PW5uKGU9Pm5ldyBrdShlLG5ldyAkcihZcigpLG5ldyB2byhlKSxuKCksRWUoKSkpLFt7aWQ6XCJnb29nbGVwYXl3b3JsZHBheWFjY2Vzc1wifV0pLGp1PW5uKGU9Pntjb25zdCB0PW4oKSxpPXdpbmRvdyxyPW5ldyBwbihlKSxvPW5ldyBFbihuZXcgRG4oYSgpLGkscikpO3JldHVybiBuZXcga3UoZSxuZXcgJHIoWXIoKSxuZXcgX28oZSxvKSx0LEVlKCkpKX0sW3tpZDpcImdvb2dsZXBheWJyYWludHJlZVwifV0pO3ZhciBVdSxxdTshZnVuY3Rpb24oZSl7ZS5BcHByb3ZlZD1cIkFQUFJPVkVEXCIsZS5QYXllckFjdGlvblJlcXVpcmVkPVwiUEFZRVJfQUNUSU9OX1JFUVVJUkVEXCJ9KFV1fHwoVXU9e30pKSxmdW5jdGlvbihlKXtlLkFVVEhPUklaRT1cImF1dGhvcml6ZVwiLGUuQ0FQVFVSRT1cImNhcHR1cmVcIn0ocXV8fChxdT17fSkpO3ZhciBWdT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBHdSBleHRlbmRzIGt1e2NvbnN0cnVjdG9yKGUsdCxuLGkpe3N1cGVyKGUsdCksdGhpcy5fcGF5UGFsQ29tbWVyY2VTZGs9bix0aGlzLl9yZXF1ZXN0U2VuZGVyPWl9ZXhlY3V0ZSh7cGF5bWVudDplfSl7cmV0dXJuIFZ1KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighKG51bGw9PWU/dm9pZCAwOmUubWV0aG9kSWQpKXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTtjb25zdCB0PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxuPXQuZ2V0Q2FydE9yVGhyb3coKS5pZCx7aW5pdGlhbGl6YXRpb25EYXRhOml9PXQuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codGhpcy5fZ2V0TWV0aG9kSWQoKSkse29yZGVySWQ6cn09eWllbGQgdGhpcy5nZXRPcmRlcklkKG4pLHtjYXJkX2luZm9ybWF0aW9uOm99PWl8fHt9LGE9eWllbGQgdGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5nZXROb25jZShlLm1ldGhvZElkKSxzPXt0b2tlbml6YXRpb25EYXRhOnt0eXBlOlwiUEFZTUVOVF9HQVRFV0FZXCIsdG9rZW46YXRvYihhKX0saW5mbzp7Y2FyZE5ldHdvcms6KG51bGw9PW8/dm9pZCAwOm8udHlwZSl8fFwiXCIsY2FyZERldGFpbHM6KG51bGw9PW8/dm9pZCAwOm8ubnVtYmVyKXx8XCJcIn0sdHlwZTpcIkNBUkRcIn07eWllbGQgdGhpcy5jb25maXJtT3JkZXIocixzKSx5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKCk7dHJ5e2NvbnN0IHQ9e2Zvcm1hdHRlZFBheWxvYWQ6e21ldGhvZF9pZDplLm1ldGhvZElkLHBheXBhbF9hY2NvdW50OntvcmRlcl9pZDpyfX19O3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7bWV0aG9kSWQ6ZS5tZXRob2RJZCxwYXltZW50RGF0YTp0fSl9Y2F0Y2goZSl7eWllbGQgdGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlKX19KX1jb25maXJtT3JkZXIoZSx0KXtyZXR1cm4gVnUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGk9bi5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyh0aGlzLl9nZXRNZXRob2RJZCgpKTtpZighaS5pbml0aWFsaXphdGlvbkRhdGEpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtjb25zdCByPW4uZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlLG89eWllbGQgdGhpcy5fcGF5UGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsR29vZ2xlUGF5U2RrKGksciwhMCkse3N0YXR1czphfT15aWVsZCBvLkdvb2dsZXBheSgpLmNvbmZpcm1PcmRlcih7b3JkZXJJZDplLHBheW1lbnRNZXRob2REYXRhOnR9KTtpZihhPT09VXUuUGF5ZXJBY3Rpb25SZXF1aXJlZClyZXR1cm4geWllbGQgby5Hb29nbGVwYXkoKS5pbml0aWF0ZVBheWVyQWN0aW9uKHtvcmRlcklkOmV9KSxQcm9taXNlLnJlc29sdmUoKTtpZihhIT09VXUuQXBwcm92ZWQpdGhyb3cgbmV3IHJuKFwiUGF5bWVudCBpcyBub3QgYXBwcm92ZWQuXCIpO3JldHVybiBQcm9taXNlLnJlc29sdmUoKX0pfWdldE9yZGVySWQoZSl7cmV0dXJuIFZ1KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXtjYXJ0SWQ6ZSxzaG91bGRTYXZlSW5zdHJ1bWVudDohMX0se2JvZHk6bn09eWllbGQgdGhpcy5fcmVxdWVzdFNlbmRlci5wb3N0KFwiL2FwaS9zdG9yZWZyb250L3BheW1lbnRzL2dvb2dsZXBheXBheXBhbGNvbW1lcmNlY2hlY2tvdXRcIix7aGVhZGVyczpPYmplY3QuYXNzaWduKHtcIlgtQVBJLUlOVEVSTkFMXCI6WG4sXCJDb250ZW50LVR5cGVcIjp0aS5Kc29ufSxuaSksYm9keTp0fSk7cmV0dXJuIG59KX19Y29uc3QgSHU9bm4oZT0+e2NvbnN0IHQ9bmV3IElvKGEoKSk7cmV0dXJuIG5ldyBHdShlLG5ldyAkcihZcigpLG5ldyBPbyhlLHQpLG4oKSxFZSgpKSx0LG4oKSl9LFt7aWQ6XCJnb29nbGVwYXlwYXlwYWxjb21tZXJjZVwifV0pO3ZhciAkdSxXdTshZnVuY3Rpb24oZSl7ZS5BcHByb3ZlZD1cIkFQUFJPVkVEXCIsZS5QYXllckFjdGlvblJlcXVpcmVkPVwiUEFZRVJfQUNUSU9OX1JFUVVJUkVEXCJ9KCR1fHwoJHU9e30pKSxmdW5jdGlvbihlKXtlLkFVVEhPUklaRT1cImF1dGhvcml6ZVwiLGUuQ0FQVFVSRT1cImNhcHR1cmVcIn0oV3V8fChXdT17fSkpO3ZhciBZdT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBLdSBleHRlbmRzIGt1e2NvbnN0cnVjdG9yKGUsdCxuLGkpe3N1cGVyKGUsdCksdGhpcy5fcGF5UGFsU2RrSGVscGVyPW4sdGhpcy5fcmVxdWVzdFNlbmRlcj1pfWV4ZWN1dGUoe3BheW1lbnQ6ZX0pe3JldHVybiBZdSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIShudWxsPT1lP3ZvaWQgMDplLm1ldGhvZElkKSl0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiXSk7Y29uc3QgdD10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksbj10LmdldENhcnRPclRocm93KCkuaWQse2luaXRpYWxpemF0aW9uRGF0YTppfT10LmdldFBheW1lbnRNZXRob2RPclRocm93KHRoaXMuX2dldE1ldGhvZElkKCkpLHtvcmRlcklkOnJ9PXlpZWxkIHRoaXMuZ2V0T3JkZXJJZChuKSx7Y2FyZF9pbmZvcm1hdGlvbjpvfT1pfHx7fSxhPXlpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3IuZ2V0Tm9uY2UoZS5tZXRob2RJZCkscz17dG9rZW5pemF0aW9uRGF0YTp7dHlwZTpcIlBBWU1FTlRfR0FURVdBWVwiLHRva2VuOmF0b2IoYSl9LGluZm86e2NhcmROZXR3b3JrOihudWxsPT1vP3ZvaWQgMDpvLnR5cGUpfHxcIlwiLGNhcmREZXRhaWxzOihudWxsPT1vP3ZvaWQgMDpvLm51bWJlcil8fFwiXCJ9LHR5cGU6XCJDQVJEXCJ9O3lpZWxkIHRoaXMuY29uZmlybU9yZGVyKHIscykseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcigpO3RyeXtjb25zdCB0PXtmb3JtYXR0ZWRQYXlsb2FkOnttZXRob2RfaWQ6ZS5tZXRob2RJZCxwYXlwYWxfYWNjb3VudDp7b3JkZXJfaWQ6cn19fTt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe21ldGhvZElkOmUubWV0aG9kSWQscGF5bWVudERhdGE6dH0pfWNhdGNoKGUpe3lpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3IucHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZSl9fSl9Y29uZmlybU9yZGVyKGUsdCl7cmV0dXJuIFl1KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxpPW4uZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codGhpcy5fZ2V0TWV0aG9kSWQoKSk7aWYoIWkuaW5pdGlhbGl6YXRpb25EYXRhKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3Qgcj1uLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSxvPXlpZWxkIHRoaXMuX3BheVBhbFNka0hlbHBlci5nZXRQYXlQYWxHb29nbGVQYXlTZGsoaSxyLCEwKSx7c3RhdHVzOmF9PXlpZWxkIG8uR29vZ2xlcGF5KCkuY29uZmlybU9yZGVyKHtvcmRlcklkOmUscGF5bWVudE1ldGhvZERhdGE6dH0pO2lmKGE9PT0kdS5QYXllckFjdGlvblJlcXVpcmVkKXJldHVybiB5aWVsZCBvLkdvb2dsZXBheSgpLmluaXRpYXRlUGF5ZXJBY3Rpb24oe29yZGVySWQ6ZX0pLFByb21pc2UucmVzb2x2ZSgpO2lmKGEhPT0kdS5BcHByb3ZlZCl0aHJvdyBuZXcgcm4oXCJQYXltZW50IGlzIG5vdCBhcHByb3ZlZC5cIik7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfSl9Z2V0T3JkZXJJZChlKXtyZXR1cm4gWXUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9e2NhcnRJZDplLHNob3VsZFNhdmVJbnN0cnVtZW50OiExfSx7Ym9keTpufT15aWVsZCB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoXCIvYXBpL3N0b3JlZnJvbnQvcGF5bWVudHMvZ29vZ2xlcGF5X2JpZ2NvbW1lcmNlX3BheW1lbnRzY2hlY2tvdXRcIix7aGVhZGVyczpPYmplY3QuYXNzaWduKHtcIlgtQVBJLUlOVEVSTkFMXCI6WG4sXCJDb250ZW50LVR5cGVcIjp0aS5Kc29ufSxuaSksYm9keTp0fSk7cmV0dXJuIG59KX19Y29uc3QgSnU9bm4oZT0+e2NvbnN0IHQ9bmV3IHdpKGEoKSk7cmV0dXJuIG5ldyBLdShlLG5ldyAkcihZcigpLG5ldyBrbyhlLHQpLG4oKSxFZSgpKSx0LG4oKSl9LFt7aWQ6XCJnb29nbGVwYXlfYmlnY29tbWVyY2VfcGF5bWVudHNcIn1dKSxadT1ubihlPT5uZXcga3UoZSxuZXcgJHIoWXIoKSxuZXcgem8oZSxFZSgpKSxuKCksRWUoKSkpLFt7aWQ6XCJnb29nbGVwYXl0ZG9ubGluZW1hcnRcIn1dKTtjbGFzcyBRdSBleHRlbmRzIEJ0e2NvbnN0cnVjdG9yKGUsdCxuKXtzdXBlcihufHxcIlBheW1lbnQgY2Fubm90IGJlIHByb2Nlc3NlZCBmb3IgdGhpcyBvcmRlciwgcGxlYXNlIHNlbGVjdCBhbm90aGVyIHBheW1lbnQgbWV0aG9kXCIpLHRoaXMudHlwZT1cImN1c3RvbV9wcm92aWRlcl9leGVjdXRlX2Vycm9yXCIsdGhpcy5uYW1lPXQsdGhpcy5zdWJ0eXBlPWV9fWNsYXNzIFh1e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5mb3JtUG9zdGVyPXR9ZXhlY3V0ZShlLHQpe3ZhciBuLGkscixvLGE7cmV0dXJuIGk9dGhpcyxyPXZvaWQgMCxhPWZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6aX09ZSxyPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0oZSxbXCJwYXltZW50XCJdKTtpZighKG51bGw9PWk/dm9pZCAwOmkubWV0aG9kSWQpKXRocm93IG5ldyBZaShbXCJwYXltZW50Lm1ldGhvZElkXCJdKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoaS5tZXRob2RJZCx0KTtjb25zdCBvPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KGkubWV0aG9kSWQpO2lmKCEobnVsbD09PShuPW8uaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09bj92b2lkIDA6bi5wcm9jZXNzYWJsZSkpdGhyb3cgbmV3IFF1KFwicGF5bWVudC5odW1tX25vdF9wcm9jZXNzYWJsZV9lcnJvclwiLFwiaHVtbU5vdFByb2Nlc3NhYmxlRXJyb3JcIik7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHIsdCk7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHttZXRob2RJZDppLm1ldGhvZElkfSl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuaXNPZmZzaXRlUmVkaXJlY3RSZXNwb25zZShlKT90aGlzLmhhbmRsZU9mZnNpdGVSZWRpcmVjdFJlc3BvbnNlKGUpOlByb21pc2UucmVqZWN0KGUpfX0sbmV3KChvPXZvaWQgMCl8fChvPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dHJ5e2QoYS5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGEudGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIGk7dC5kb25lP2UodC52YWx1ZSk6KGk9dC52YWx1ZSxpIGluc3RhbmNlb2Ygbz9pOm5ldyBvKGZ1bmN0aW9uKGUpe2UoaSl9KSkudGhlbihuLHMpfWQoKGE9YS5hcHBseShpLHJ8fFtdKSkubmV4dCgpKX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBfZCl9aW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9aGFuZGxlT2Zmc2l0ZVJlZGlyZWN0UmVzcG9uc2UoZSl7Y29uc3QgdD1lLmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQuZGF0YS5yZWRpcmVjdF91cmwsbj1lLmJvZHkucHJvdmlkZXJfZGF0YTtyZXR1cm4gbmV3IFByb21pc2UoZT0+e3RoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybSh0LEpTT04ucGFyc2UobiksZSl9KX1pc09mZnNpdGVSZWRpcmVjdFJlc3BvbnNlKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4hMTtjb25zdCB0PWU7aWYoIXQuYm9keSlyZXR1cm4hMTtjb25zdCBuPXQuYm9keTtyZXR1cm5cImFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkXCI9PT1uLnN0YXR1cyYmISFuLmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkJiZcIm9mZnNpdGVfcmVkaXJlY3RcIj09PW4uYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQudHlwZSYmXCJzdHJpbmdcIj09dHlwZW9mIG4ucHJvdmlkZXJfZGF0YX19Y29uc3QgZWg9bm4oZT0+bmV3IFh1KGUsRWUoKSksW3tpZDpcImh1bW1cIn1dKSx0aD1bXCJBVFwiLFwiQkVcIixcIkNBXCIsXCJDSFwiLFwiQ1pcIixcIkRFXCIsXCJES1wiLFwiRVNcIixcIkZJXCIsXCJGUlwiLFwiR0JcIixcIkdSXCIsXCJJRVwiLFwiSVRcIixcIk5MXCIsXCJOT1wiLFwiTlpcIixcIlBMXCIsXCJQVFwiLFwiU0VcIl0sbmg9W1wiQVVcIl07dmFyIGloPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIHJoe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5rbGFybmFTY3JpcHRMb2FkZXI9dH1pbml0aWFsaXplKGUpe3JldHVybiBpaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dGhpcy5rbGFybmFDcmVkaXQ9eWllbGQgdGhpcy5rbGFybmFTY3JpcHRMb2FkZXIubG9hZCgpLHRoaXMudW5zdWJzY3JpYmU9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1YnNjcmliZSh0PT57dC5pc1BheW1lbnRNZXRob2RJbml0aWFsaXplZCh7bWV0aG9kSWQ6ZS5tZXRob2RJZCxnYXRld2F5SWQ6ZS5nYXRld2F5SWR9KSYmdGhpcy5sb2FkV2lkZ2V0KGUpfSxlPT57Y29uc3QgdD1lLmdldENoZWNrb3V0KCk7cmV0dXJuIHQmJnQub3V0c3RhbmRpbmdCYWxhbmNlfSxlPT57Y29uc3QgdD1lLmdldENoZWNrb3V0KCk7cmV0dXJuIHQmJnQuY291cG9uc30pLHlpZWxkIHRoaXMubG9hZFdpZGdldChlKX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiB0aGlzLnVuc3Vic2NyaWJlJiZ0aGlzLnVuc3Vic2NyaWJlKCksUHJvbWlzZS5yZXNvbHZlKCl9ZXhlY3V0ZShlLHQpe3JldHVybiBpaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIWUucGF5bWVudCl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJwYXlsb2FkLnBheW1lbnRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7Y29uc3Qgbj1lLnBheW1lbnQse3BheW1lbnREYXRhOml9PW4scj1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KG4sW1wicGF5bWVudERhdGFcIl0pLHthdXRob3JpemF0aW9uX3Rva2VuOm99PXlpZWxkIHRoaXMuYXV0aG9yaXplKCk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KHIubWV0aG9kSWQse2F1dGhvcml6YXRpb25Ub2tlbjpvfSkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGF5bWVudDpyLHVzZVN0b3JlQ3JlZGl0OmUudXNlU3RvcmVDcmVkaXR9KSx0KX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBfZCl9bG9hZFdpZGdldChlKXtyZXR1cm4gaWgodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFlLmtsYXJuYSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBsb2FkIHdpZGdldCBiZWNhdXNlIFwib3B0aW9ucy5rbGFybmFcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7Y29uc3R7bWV0aG9kSWQ6dCxrbGFybmE6e2NvbnRhaW5lcjpuLG9uTG9hZDppfX09ZTtyZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKHQpLG5ldyBQcm9taXNlKGU9Pntjb25zdCByPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2QodCk7aWYoIXIpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtpZighdGhpcy5rbGFybmFDcmVkaXR8fCFyLmNsaWVudFRva2VuKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3RoaXMua2xhcm5hQ3JlZGl0LmluaXQoe2NsaWVudF90b2tlbjpyLmNsaWVudFRva2VufSksdGhpcy5rbGFybmFDcmVkaXQubG9hZCh7Y29udGFpbmVyOm59LHQ9PntpJiZpKHQpLGUodCl9KX0pfSl9Z2V0VXBkYXRlU2Vzc2lvbkRhdGEoZSx0KXtpZighUChbLi4udGgsLi4ubmhdLGUuY291bnRyeUNvZGUpKXJldHVybnt9O2NvbnN0IG49e2JpbGxpbmdfYWRkcmVzczp0aGlzLm1hcFRvS2xhcm5hQWRkcmVzcyhlLGUuZW1haWwpfTtyZXR1cm4gdCYmKG4uc2hpcHBpbmdfYWRkcmVzcz10aGlzLm1hcFRvS2xhcm5hQWRkcmVzcyh0LGUuZW1haWwpKSxufW5lZWRzU3RhdGVDb2RlKGUpe3JldHVybiBQKG5oLGUpfW1hcFRvS2xhcm5hQWRkcmVzcyhlLHQpe2NvbnN0IG49e3N0cmVldF9hZGRyZXNzOmUuYWRkcmVzczEsY2l0eTplLmNpdHksY291bnRyeTplLmNvdW50cnlDb2RlLGdpdmVuX25hbWU6ZS5maXJzdE5hbWUsZmFtaWx5X25hbWU6ZS5sYXN0TmFtZSxwb3N0YWxfY29kZTplLnBvc3RhbENvZGUscmVnaW9uOnRoaXMubmVlZHNTdGF0ZUNvZGUoZS5jb3VudHJ5Q29kZSk/ZS5zdGF0ZU9yUHJvdmluY2VDb2RlOmUuc3RhdGVPclByb3ZpbmNlLGVtYWlsOnR9O3JldHVybiBlLmFkZHJlc3MyJiYobi5zdHJlZXRfYWRkcmVzczI9ZS5hZGRyZXNzMiksZS5waG9uZSYmKG4ucGhvbmU9ZS5waG9uZSksbn1hdXRob3JpemUoKXtyZXR1cm4gbmV3IFByb21pc2UoKGUsdCk9Pntjb25zdCBuPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGk9bi5nZXRCaWxsaW5nQWRkcmVzcygpLHI9bi5nZXRTaGlwcGluZ0FkZHJlc3MoKTtpZighaSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ0JpbGxpbmdBZGRyZXNzKTtpZighdGhpcy5rbGFybmFDcmVkaXQpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7Y29uc3Qgbz10aGlzLmdldFVwZGF0ZVNlc3Npb25EYXRhKGkscik7dGhpcy5rbGFybmFDcmVkaXQuYXV0aG9yaXplKG8sbj0+bi5hcHByb3ZlZD9lKG4pOm4uc2hvd19mb3JtP3QobmV3IE1uKTp2b2lkIHQobmV3IEJpKSl9KX19Y2xhc3Mgb2h7Y29uc3RydWN0b3IoZSx0PXdpbmRvdyl7dGhpcy5zY3JpcHRMb2FkZXI9ZSx0aGlzLmtsYXJuYVdpbmRvdz10fWxvYWQoKXt2YXIgZSx0LG4saSxyLG87cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe2lmKChudWxsPT09KGU9dGhpcy5rbGFybmFXaW5kb3cuS2xhcm5hKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5DcmVkaXQpfHwoeWllbGQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChcIi8vY3JlZGl0LmtsYXJuYWNkbi5uZXQvbGliL3YxL2FwaS5qc1wiKSksIShudWxsPT09KHQ9dGhpcy5rbGFybmFXaW5kb3cuS2xhcm5hKXx8dm9pZCAwPT09dD92b2lkIDA6dC5DcmVkaXQpKXRocm93IG5ldyBYdDtyZXR1cm4gdGhpcy5rbGFybmFXaW5kb3cuS2xhcm5hLkNyZWRpdH0sbmV3KChyPXZvaWQgMCl8fChyPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoby5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKG8udGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2Ygcj9uOm5ldyByKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKG89by5hcHBseShuLGl8fFtdKSkubmV4dCgpKX0pfX1jb25zdCBhaD1ubihlPT5uZXcgcmgoZSxuZXcgb2goYSgpKSksW3tpZDpcImtsYXJuYVwifV0pO3ZhciBzaD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBkaHtjb25zdHJ1Y3RvcihlLHQsbil7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5rbGFybmF2MlNjcmlwdExvYWRlcj10LHRoaXMua2xhcm5hdjJUb2tlblVwZGF0ZXI9bn1pbml0aWFsaXplKGUpe3JldHVybiBzaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dGhpcy5rbGFybmFQYXltZW50cz15aWVsZCB0aGlzLmtsYXJuYXYyU2NyaXB0TG9hZGVyLmxvYWQoKSx0aGlzLnVuc3Vic2NyaWJlPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJzY3JpYmUodD0+e3QuaXNQYXltZW50TWV0aG9kSW5pdGlhbGl6ZWQoe21ldGhvZElkOmUubWV0aG9kSWQsZ2F0ZXdheUlkOmUuZ2F0ZXdheUlkfSkmJnRoaXMubG9hZFBheW1lbnRzV2lkZ2V0KGUpfSxlPT57Y29uc3QgdD1lLmdldENoZWNrb3V0KCk7cmV0dXJuIHQmJnQub3V0c3RhbmRpbmdCYWxhbmNlfSxlPT57Y29uc3QgdD1lLmdldENoZWNrb3V0KCk7cmV0dXJuIHQmJnQuY291cG9uc30pLHlpZWxkIHRoaXMubG9hZFBheW1lbnRzV2lkZ2V0KGUpfSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIHRoaXMudW5zdWJzY3JpYmUmJnRoaXMudW5zdWJzY3JpYmUoKSxQcm9taXNlLnJlc29sdmUoKX1leGVjdXRlKGUsdCl7cmV0dXJuIHNoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighZS5wYXltZW50KXRocm93IG5ldyBybignVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcInBheWxvYWQucGF5bWVudFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdCBuPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0oZS5wYXltZW50LFtdKSx7Z2F0ZXdheUlkOmksbWV0aG9kSWQ6cn09bjtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJwYXlsb2FkLnBheW1lbnQuZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0IG89dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse2lkOmF9PW8uZ2V0Q2FydE9yVGhyb3coKSx7Y2xpZW50VG9rZW46c309by5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhyKTt5aWVsZCB0aGlzLmtsYXJuYXYyVG9rZW5VcGRhdGVyLmtsYXJuYU9yZGVySW5pdGlhbGl6YXRpb24oYSxzKTtjb25zdCBkPXRoaXMuaXNLbGFybmFTaW5nbGVSYWRpb0J1dHRvbkVuYWJsZWQoKT9pOnIse2F1dGhvcml6YXRpb25fdG9rZW46Y309eWllbGQgdGhpcy5hdXRob3JpemVPclRocm93KGQscik7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KGkse2F1dGhvcml6YXRpb25Ub2tlbjpjfSkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGF5bWVudDpuLHVzZVN0b3JlQ3JlZGl0OmUudXNlU3RvcmVDcmVkaXR9KSx0KX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBfZCl9bG9hZFBheW1lbnRzV2lkZ2V0KGUpe3JldHVybiBzaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIWUua2xhcm5hdjIpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gbG9hZCB3aWRnZXQgYmVjYXVzZSBcIm9wdGlvbnMua2xhcm5hdjJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7Y29uc3R7bWV0aG9kSWQ6dCxnYXRld2F5SWQ6bixrbGFybmF2Mjp7Y29udGFpbmVyOmksb25Mb2FkOnJ9fT1lO2lmKCFuKXRocm93IG5ldyBybignVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcInBheWxvYWQucGF5bWVudC5nYXRld2F5SWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7Y29uc3Qgbz10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxhPXtwYXJhbXM6by5nZXRDYXJ0T3JUaHJvdygpLmlkfTtyZXR1cm4geWllbGQgdGhpcy5rbGFybmF2MlRva2VuVXBkYXRlci51cGRhdGVDbGllbnRUb2tlbihuLHtwYXJhbXM6YX0pLmNhdGNoKCgpPT57dGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKX0pLG5ldyBQcm9taXNlKGU9Pntjb25zdCBuPW8uZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codCk7aWYoIXRoaXMua2xhcm5hUGF5bWVudHN8fCFuLmNsaWVudFRva2VuKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3RoaXMua2xhcm5hUGF5bWVudHMuaW5pdCh7Y2xpZW50X3Rva2VuOm4uY2xpZW50VG9rZW59KSx0aGlzLmtsYXJuYVBheW1lbnRzLmxvYWQoe2NvbnRhaW5lcjppLHBheW1lbnRfbWV0aG9kX2NhdGVnb3J5OnRoaXMuaXNLbGFybmFTaW5nbGVSYWRpb0J1dHRvbkVuYWJsZWQoKT9uLmdhdGV3YXk6dH0sdD0+e3ImJnIodCksZSh0KX0pfSl9KX1nZXRVcGRhdGVTZXNzaW9uRGF0YShlLHQsbil7aWYoIVAoWy4uLnRoLC4uLm5oXSx0LmNvdW50cnlDb2RlKSlyZXR1cm57fTtjb25zdCBpPXtiaWxsaW5nX2FkZHJlc3M6dGhpcy5tYXBUb0tsYXJuYUFkZHJlc3MoZSx0LHQuZW1haWwpfTtyZXR1cm4gbiYmKGkuc2hpcHBpbmdfYWRkcmVzcz10aGlzLm1hcFRvS2xhcm5hQWRkcmVzcyhlLG4sdC5lbWFpbCkpLGl9bmVlZHNTdGF0ZUNvZGUoZSl7cmV0dXJuIFAobmgsZSl9bWFwVG9LbGFybmFBZGRyZXNzKGUsdCxuKXtjb25zdCBpPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHtjaGVja291dFNldHRpbmdzOnJ9PWkuZ2V0U3RvcmVDb25maWdPclRocm93KCksbz1pLmdldFBheW1lbnRNZXRob2RPclRocm93KGUpLHtlbmFibGVCaWxsaWU6YX09by5pbml0aWFsaXphdGlvbkRhdGF8fHt9LHM9e3N0cmVldF9hZGRyZXNzOnQuYWRkcmVzczEsY2l0eTp0LmNpdHksY291bnRyeTp0LmNvdW50cnlDb2RlLGdpdmVuX25hbWU6dC5maXJzdE5hbWUsZmFtaWx5X25hbWU6dC5sYXN0TmFtZSxwb3N0YWxfY29kZTp0LnBvc3RhbENvZGUscmVnaW9uOnRoaXMubmVlZHNTdGF0ZUNvZGUodC5jb3VudHJ5Q29kZSk/dC5zdGF0ZU9yUHJvdmluY2VDb2RlOnQuc3RhdGVPclByb3ZpbmNlLGVtYWlsOm59O3JldHVybiB0LmFkZHJlc3MyJiYocy5zdHJlZXRfYWRkcmVzczI9dC5hZGRyZXNzMiksdC5waG9uZSYmKHMucGhvbmU9dC5waG9uZSksdC5jb21wYW55JiZhJiZjbihyLmZlYXR1cmVzLFwiUEktMzkxNS5iMmJfcGF5bWVudF9zZXNzaW9uX2Zvcl9rbGFybmFcIikmJihzLm9yZ2FuaXphdGlvbl9uYW1lPXQuY29tcGFueSksc31hdXRob3JpemVPclRocm93KGUsdCl7cmV0dXJuIHNoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KCk7Y29uc3Qgbj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxpPW4uZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCkscj1uLmdldFNoaXBwaW5nQWRkcmVzcygpLG89dGhpcy5nZXRVcGRhdGVTZXNzaW9uRGF0YSh0LGkscik7cmV0dXJuIG5ldyBQcm9taXNlKCh0LG4pPT57aWYoIXRoaXMua2xhcm5hUGF5bWVudHMpcmV0dXJuIG4obmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCkpO3RoaXMua2xhcm5hUGF5bWVudHMuYXV0aG9yaXplKHtwYXltZW50X21ldGhvZF9jYXRlZ29yeTplfSxvLGU9PmUuYXBwcm92ZWQ/dChlKTplLnNob3dfZm9ybT9uKG5ldyBNbik6dm9pZCBuKG5ldyBCaSkpfSl9KX1pc0tsYXJuYVNpbmdsZVJhZGlvQnV0dG9uRW5hYmxlZCgpe2NvbnN0e2ZlYXR1cmVzOmV9PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3M7cmV0dXJuIGVbXCJQSS00MDI1LmtsYXJuYV9zaW5nbGVfcmFkaW9fYnV0dG9uXCJdfX1jbGFzcyBjaHtjb25zdHJ1Y3RvcihlLHQ9d2luZG93KXt0aGlzLnNjcmlwdExvYWRlcj1lLHRoaXMua2xhcm5hV2luZG93PXR9bG9hZCgpe3ZhciBlLHQsbixpLHIsbztyZXR1cm4gbj10aGlzLGk9dm9pZCAwLG89ZnVuY3Rpb24qKCl7aWYoKG51bGw9PT0oZT10aGlzLmtsYXJuYVdpbmRvdy5LbGFybmEpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLlBheW1lbnRzKXx8KHlpZWxkIHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoXCJodHRwczovL3gua2xhcm5hY2RuLm5ldC9rcC9saWIvdjEvYXBpLmpzXCIpKSwhKG51bGw9PT0odD10aGlzLmtsYXJuYVdpbmRvdy5LbGFybmEpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LlBheW1lbnRzKSl0aHJvdyBuZXcgWHQ7cmV0dXJuIHRoaXMua2xhcm5hV2luZG93LktsYXJuYS5QYXltZW50c30sbmV3KChyPXZvaWQgMCl8fChyPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoby5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKG8udGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2Ygcj9uOm5ldyByKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKG89by5hcHBseShuLGl8fFtdKSkubmV4dCgpKX0pfX1jbGFzcyBsaHtjb25zdHJ1Y3RvcihlKXt0aGlzLnJlcXVlc3RTZW5kZXI9ZX11cGRhdGVDbGllbnRUb2tlbihlLHt0aW1lb3V0OnQscGFyYW1zOm59PXt9KXtjb25zdCBpPWAvYXBpL3N0b3JlZnJvbnQvcGF5bWVudHMvJHtlfWA7cmV0dXJuIHRoaXMucmVxdWVzdFNlbmRlci5nZXQoaSx7dGltZW91dDp0LGhlYWRlcnM6T2JqZWN0LmFzc2lnbih7QWNjZXB0OnRpLkpzb25WMSxcIlgtQVBJLUlOVEVSTkFMXCI6WG59LG5pKSxwYXJhbXM6bn0pfWtsYXJuYU9yZGVySW5pdGlhbGl6YXRpb24oZSx0KXtyZXR1cm4gbj10aGlzLGk9dm9pZCAwLG89ZnVuY3Rpb24qKCl7Y29uc3Qgbj17aGVhZGVyczpPYmplY3QuYXNzaWduKHtBY2NlcHQ6dGkuSnNvblYxLFwiWC1BUEktSU5URVJOQUxcIjpYbn0sbmkpLGJvZHk6e2NhcnRJZDplLGNsaWVudFRva2VuOnR9fTt5aWVsZCB0aGlzLnJlcXVlc3RTZW5kZXIucHV0KFwiL2FwaS9zdG9yZWZyb250L2luaXRpYWxpemF0aW9uL2tsYXJuYVwiLG4pfSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99fWNvbnN0IHVoPW5uKGU9Pntjb25zdHtnZXRIb3N0OnR9PWUuZ2V0U3RhdGUoKSxpPW4oe2hvc3Q6dCgpfSk7cmV0dXJuIG5ldyBkaChlLG5ldyBjaChhKCkpLG5ldyBsaChpKSl9LFt7Z2F0ZXdheTpcImtsYXJuYVwifV0pO2NsYXNzIGhoe2NvbnN0cnVjdG9yKGUpe3RoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZX1leGVjdXRlKGUsdCl7cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGUsdCksUHJvbWlzZS5yZXNvbHZlKCl9LG5ldygocj12b2lkIDApfHwocj1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBhKGUpe3RyeXtkKG8ubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChvLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIHI/bjpuZXcgcihmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChvPW8uYXBwbHkobixpfHxbXSkpLm5leHQoKSl9KTt2YXIgbixpLHIsb31maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfX1jb25zdCBwaD1ubihlPT5uZXcgaGgoZSksW3tpZDpcInRlc3RnYXRld2F5XCJ9XSk7dmFyIG1oLHloPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9OyFmdW5jdGlvbihlKXtlLkNSRURJVF9DQVJEPVwiY3JlZGl0X2NhcmRcIn0obWh8fChtaD17fSkpO2NvbnN0IGdoPVtcImtsYXJuYXBheWxhdGVyXCIsXCJrbGFybmFzbGljZWl0XCJdO2NsYXNzIHZoe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5tb2xsaWVTY3JpcHRMb2FkZXI9ZSx0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9dH1pbml0aWFsaXplKGUpe3JldHVybiB5aCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bW9sbGllOnQsbWV0aG9kSWQ6bixnYXRld2F5SWQ6aX09ZTtpZighdCl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubW9sbGllXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFufHwhaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm1ldGhvZElkXCIgYW5kL29yIFwiZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0IHI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2xsaWUtY29tcG9uZW50cy1jb250cm9sbGVyXCIpO3YocixlPT5lLnJlbW92ZSgpKTtjb25zdCBvPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGE9by5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKTt0aGlzLmluaXRpYWxpemVPcHRpb25zPXQ7Y29uc3Qgcz1vLmdldFBheW1lbnRNZXRob2RPclRocm93KG4saSkse2NvbmZpZzp7bWVyY2hhbnRJZDpkLHRlc3RNb2RlOmN9fT1zO2lmKHRoaXMubG9jYWxlPW8uZ2V0TG9jYWxlKCksIWQpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtyZXR1cm4gdGhpcy5pc0NyZWRpdENhcmQobikmJnQuZm9ybSYmdGhpcy5zaG91bGRTaG93VFNWSG9zdGVkRm9ybShuLGkpP3RoaXMuaG9zdGVkRm9ybT15aWVsZCB0aGlzLm1vdW50Q2FyZFZlcmlmaWNhdGlvbmZpZWxkcyh0LmZvcm0pOnRoaXMuaXNDcmVkaXRDYXJkKG4pJiYodGhpcy5tb2xsaWVDbGllbnQ9eWllbGQgdGhpcy5sb2FkTW9sbGllSnMoZCxhLnN0b3JlUHJvZmlsZS5zdG9yZUxhbmd1YWdlLGMpLHRoaXMubW91bnRFbGVtZW50cygpKSx0aGlzLnVuc3Vic2NyaWJlPSgpPT57aWYodGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuaXNQYXltZW50TWV0aG9kSW5pdGlhbGl6ZWQoe21ldGhvZElkOmUubWV0aG9kSWQsZ2F0ZXdheUlkOmUuZ2F0ZXdheUlkfSkpe2NvbnN0IGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7aX0tJHtufS1wYXJhZ3JhcGhgKTtlJiZlLnJlbW92ZSgpLHQuZGlzYWJsZUJ1dHRvbighMSksdGhpcy5sb2FkUGF5bWVudE1ldGhvZHNBbGxvd2VkKHQsbixpKX19LHRoaXMudW5zdWJzY3JpYmUoKSx0aGlzLmxvYWRQYXltZW50TWV0aG9kc0FsbG93ZWQodCxuLGkpLFByb21pc2UucmVzb2x2ZSgpfSl9ZXhlY3V0ZShlLHQpe3JldHVybiB5aCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pLHI9bnVsbD09bj92b2lkIDA6bi5wYXltZW50RGF0YTtpZighbnx8IW4uZ2F0ZXdheUlkfHwhcil0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiLFwiZ2F0ZXdheUlkXCIsXCJwYXltZW50RGF0YVwiXSk7dHJ5e3JldHVybiB5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KSxTZChyKT95aWVsZCB0aGlzLmV4ZWN1dGVXaXRoVmF1bHRlZChuKTp0aGlzLmlzQ3JlZGl0Q2FyZChuLm1ldGhvZElkKT95aWVsZCB0aGlzLmV4ZWN1dGVXaXRoQ0Mobik6eWllbGQgdGhpcy5leGVjdXRlV2l0aEFQTShuKX1jYXRjaChlKXt5aWVsZCB0aGlzLnByb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGUpfX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfWRlaW5pdGlhbGl6ZShlKXtpZih0aGlzLnVuc3Vic2NyaWJlJiZ0aGlzLnVuc3Vic2NyaWJlKCksdGhpcy5ob3N0ZWRGb3JtJiZ0aGlzLmhvc3RlZEZvcm0uZGV0YWNoKCksZSYmZS5tZXRob2RJZCYmZS5nYXRld2F5SWQmJiF0aGlzLmhvc3RlZEZvcm0pe2NvbnN0IHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7ZS5nYXRld2F5SWR9LSR7ZS5tZXRob2RJZH1gKTt0JiZ0LnJlbW92ZSgpfWVsc2UgZSYmZS5tZXRob2RJZCYmdGhpcy5pc0NyZWRpdENhcmQoZS5tZXRob2RJZCkmJnRoaXMuY2FyZEhvbGRlckVsZW1lbnQmJnRoaXMuY2FyZE51bWJlckVsZW1lbnQmJnRoaXMudmVyaWZpY2F0aW9uQ29kZUVsZW1lbnQmJnRoaXMuZXhwaXJ5RGF0ZUVsZW1lbnQmJih0aGlzLmNhcmRIb2xkZXJFbGVtZW50LnVubW91bnQoKSx0aGlzLmNhcmRIb2xkZXJFbGVtZW50PXZvaWQgMCx0aGlzLmNhcmROdW1iZXJFbGVtZW50LnVubW91bnQoKSx0aGlzLmNhcmROdW1iZXJFbGVtZW50PXZvaWQgMCx0aGlzLnZlcmlmaWNhdGlvbkNvZGVFbGVtZW50LnVubW91bnQoKSx0aGlzLnZlcmlmaWNhdGlvbkNvZGVFbGVtZW50PXZvaWQgMCx0aGlzLmV4cGlyeURhdGVFbGVtZW50LnVubW91bnQoKSx0aGlzLmV4cGlyeURhdGVFbGVtZW50PXZvaWQgMCk7cmV0dXJuIHRoaXMubW9sbGllQ2xpZW50PXZvaWQgMCxQcm9taXNlLnJlc29sdmUoKX1leGVjdXRlV2l0aENDKGUpe3JldHVybiB5aCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD1lLnBheW1lbnREYXRhLHtzaG91bGRTYXZlSW5zdHJ1bWVudDpuPSExLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6aT0hMX09UGQodCk/dDp7fSx7dG9rZW46cixlcnJvcjpvfT15aWVsZCB0aGlzLmdldE1vbGxpZUNsaWVudCgpLmNyZWF0ZVRva2VuKCk7aWYobylyZXR1cm4gUHJvbWlzZS5yZWplY3Qobyk7Y29uc3QgYT17Y3JlZGl0X2NhcmRfdG9rZW46e3Rva2VuOnJ9LHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDpuLHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OmksYnJvd3Nlcl9pbmZvOkRvKCksc2hvcHBlcl9sb2NhbGU6dGhpcy5nZXRTaG9wcGVyTG9jYWxlKCl9O3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGF5bWVudERhdGE6e2Zvcm1hdHRlZFBheWxvYWQ6YX19KSl9KX1leGVjdXRlV2l0aFZhdWx0ZWQoZSl7cmV0dXJuIHloKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZih0aGlzLmlzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKGUubWV0aG9kSWQsZS5nYXRld2F5SWQpKXtjb25zdCB0PXRoaXMuaG9zdGVkRm9ybTtpZighdCl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTt5aWVsZCB0LnZhbGlkYXRlKCkseWllbGQgdC5zdWJtaXQoZSkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDdXJyZW50T3JkZXIoKX1lbHNlIHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KGUpfSl9ZXhlY3V0ZVdpdGhBUE0oZSl7cmV0dXJuIHloKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PWUucGF5bWVudERhdGEsbj10JiZcImlzc3VlclwiaW4gdD90Lmlzc3VlcjpcIlwiO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGF5bWVudERhdGE6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtmb3JtYXR0ZWRQYXlsb2FkOntpc3N1ZXI6bixzaG9wcGVyX2xvY2FsZTp0aGlzLmdldFNob3BwZXJMb2NhbGUoKX19KX0pKX0pfWlzQ3JlZGl0Q2FyZChlKXtyZXR1cm4gZT09PW1oLkNSRURJVF9DQVJEfXNob3VsZFNob3dUU1ZIb3N0ZWRGb3JtKGUsdCl7cmV0dXJuIHRoaXMuaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQoZSx0KSYmdGhpcy5pc0hvc3RlZEZpZWxkQXZhaWxhYmxlKCl9bW91bnRDYXJkVmVyaWZpY2F0aW9uZmllbGRzKGUpe3JldHVybiBuZXcgUHJvbWlzZSgodCxuKT0+eWgodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdCBuPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFN0b3JlQ29uZmlnKCksaT1udWxsPT1uP3ZvaWQgMDpuLnBheW1lbnRTZXR0aW5ncy5iaWdwYXlCYXNlVXJsO2lmKCFpKXRocm93IG5ldyBqdChrdC5NaXNzaW5nQ2hlY2tvdXRDb25maWcpO2NvbnN0IHI9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUhvc3RlZEZvcm0oaSxlKTt5aWVsZCByLmF0dGFjaCgpLHQocil9Y2F0Y2goZSl7bihlKX19KSl9aXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQoZSx0KXtjb25zdHtnZXRQYXltZW50TWV0aG9kT3JUaHJvdzpufT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtyZXR1cm4hMD09PW4oZSx0KS5jb25maWcuaXNIb3N0ZWRGb3JtRW5hYmxlZH1pc0hvc3RlZEZpZWxkQXZhaWxhYmxlKCl7dmFyIGU7cmV0dXJuISEobnVsbD09PShlPXRoaXMuZ2V0SW5pdGlhbGl6ZU9wdGlvbnMoKS5mb3JtKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5maWVsZHMpfXByb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGUpe2lmKCFYcihlKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7aWYoWihlLmJvZHkuZXJyb3JzLHtjb2RlOlwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWRcIn0pKXtjb25zdHthZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZDp7ZGF0YTp7cmVkaXJlY3RfdXJsOnR9fX09ZS5ib2R5O3JldHVybiBuZXcgUHJvbWlzZSgoKT0+d2luZG93LmxvY2F0aW9uLnJlcGxhY2UodCkpfXJldHVybiBQcm9taXNlLnJlamVjdChlKX1nZXRJbml0aWFsaXplT3B0aW9ucygpe2lmKCF0aGlzLmluaXRpYWxpemVPcHRpb25zKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3JldHVybiB0aGlzLmluaXRpYWxpemVPcHRpb25zfWxvYWRNb2xsaWVKcyhlLHQsbj0hMSl7cmV0dXJuIHRoaXMubW9sbGllQ2xpZW50P1Byb21pc2UucmVzb2x2ZSh0aGlzLm1vbGxpZUNsaWVudCk6dGhpcy5tb2xsaWVTY3JpcHRMb2FkZXIubG9hZChlLHQsbil9Z2V0TW9sbGllQ2xpZW50KCl7aWYoIXRoaXMubW9sbGllQ2xpZW50KXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3JldHVybiB0aGlzLm1vbGxpZUNsaWVudH1nZXRTaG9wcGVyTG9jYWxlKCl7aWYoIXRoaXMubG9jYWxlKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3JldHVybiB0aGlzLmxvY2FsZX1tb3VudEVsZW1lbnRzKCl7Y29uc3R7Y29udGFpbmVySWQ6ZSxjYXJkTnVtYmVySWQ6dCxjYXJkQ3ZjSWQ6bixjYXJkRXhwaXJ5SWQ6aSxjYXJkSG9sZGVySWQ6cixzdHlsZXM6b309dGhpcy5nZXRJbml0aWFsaXplT3B0aW9ucygpO2xldCBhO2UmJihhPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpKSxzZXRUaW1lb3V0KCgpPT57aWYoIWV8fFwibm9uZVwiIT09KG51bGw9PWE/dm9pZCAwOmEuc3R5bGUuZGlzcGxheSkpe2NvbnN0IGU9dGhpcy5nZXRNb2xsaWVDbGllbnQoKTt0aGlzLmNhcmRIb2xkZXJFbGVtZW50PWUuY3JlYXRlQ29tcG9uZW50KFwiY2FyZEhvbGRlclwiLHtzdHlsZXM6b30pLHRoaXMuY2FyZEhvbGRlckVsZW1lbnQubW91bnQoYCMke3J9YCksdGhpcy5jYXJkTnVtYmVyRWxlbWVudD1lLmNyZWF0ZUNvbXBvbmVudChcImNhcmROdW1iZXJcIix7c3R5bGVzOm99KSx0aGlzLmNhcmROdW1iZXJFbGVtZW50Lm1vdW50KGAjJHt0fWApLHRoaXMudmVyaWZpY2F0aW9uQ29kZUVsZW1lbnQ9ZS5jcmVhdGVDb21wb25lbnQoXCJ2ZXJpZmljYXRpb25Db2RlXCIse3N0eWxlczpvfSksdGhpcy52ZXJpZmljYXRpb25Db2RlRWxlbWVudC5tb3VudChgIyR7bn1gKSx0aGlzLmV4cGlyeURhdGVFbGVtZW50PWUuY3JlYXRlQ29tcG9uZW50KFwiZXhwaXJ5RGF0ZVwiLHtzdHlsZXM6b30pLHRoaXMuZXhwaXJ5RGF0ZUVsZW1lbnQubW91bnQoYCMke2l9YCl9fSwwKX1sb2FkUGF5bWVudE1ldGhvZHNBbGxvd2VkKGUsdCxuKXt2YXIgaTtpZihnaC5pbmNsdWRlcyh0KSl7Y29uc3Qgcj1udWxsPT09KGk9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5saW5lSXRlbXMpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmRpZ2l0YWxJdGVtcztpZihyJiZyLmxlbmd0aD4wKXtjb25zdHtjb250YWluZXJJZDppfT10aGlzLmdldEluaXRpYWxpemVPcHRpb25zKCk7aWYoaSl7Y29uc3Qgcj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpKTtpZihyKXtjb25zdCBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO2kuc2V0QXR0cmlidXRlKFwiaWRcIixgJHtufS0ke3R9LXBhcmFncmFwaGApLGUudW5zdXBwb3J0ZWRNZXRob2RNZXNzYWdlJiYoaS5pbm5lclRleHQ9ZS51bnN1cHBvcnRlZE1ldGhvZE1lc3NhZ2Usci5hcHBlbmRDaGlsZChpKSxlLmRpc2FibGVCdXR0b24oITApKX19fX19fWNsYXNzIGZoe2NvbnN0cnVjdG9yKGUsdD13aW5kb3cpe3RoaXMuc2NyaXB0TG9hZGVyPWUsdGhpcy5tb2xsaWVIb3N0V2luZG93PXR9bG9hZChlLHQsbil7cmV0dXJuIGk9dGhpcyxyPXZvaWQgMCxhPWZ1bmN0aW9uKigpe2lmKHlpZWxkIHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoXCJodHRwczovL2pzLm1vbGxpZS5jb20vdjEvbW9sbGllLmpzXCIpLCFmdW5jdGlvbihlKXtyZXR1cm5cIk1vbGxpZVwiaW4gZX0odGhpcy5tb2xsaWVIb3N0V2luZG93KSl0aHJvdyBuZXcgWHQ7cmV0dXJuIHRoaXMubW9sbGllSG9zdFdpbmRvdy5Nb2xsaWUoZSx7bG9jYWxlOnQsdGVzdG1vZGU6bn0pfSxuZXcoKG89dm9pZCAwKXx8KG89UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXt0cnl7ZChhLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoYS50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgaTt0LmRvbmU/ZSh0LnZhbHVlKTooaT10LnZhbHVlLGkgaW5zdGFuY2VvZiBvP2k6bmV3IG8oZnVuY3Rpb24oZSl7ZShpKX0pKS50aGVuKG4scyl9ZCgoYT1hLmFwcGx5KGkscnx8W10pKS5uZXh0KCkpfSk7dmFyIGkscixvLGF9fWNvbnN0IFNoPW5uKGU9Pm5ldyB2aChuZXcgZmgoYSgpKSxlKSxbe2dhdGV3YXk6XCJtb2xsaWVcIn0se2dhdGV3YXk6XCJtb2xsaWVcIixpZDpcImFwcGxlcGF5XCJ9XSk7dmFyIF9oPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NvbnN0IHdoPVwibW9uZXJpcy1wYXltZW50LWlmcmFtZVwiO2NsYXNzIENoe2NvbnN0cnVjdG9yKGUpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lfWluaXRpYWxpemUoZSl7cmV0dXJuIF9oKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHttb25lcmlzOm4sbWV0aG9kSWQ6aX09ZTtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFuKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tb25lcmlzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3RoaXMuaW5pdGlhbGl6ZU9wdGlvbnM9bjtjb25zdHtjb25maWc6cixpbml0aWFsaXphdGlvbkRhdGE6b309dC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhpKTtpZighKG51bGw9PW8/dm9pZCAwOm8ucHJvZmlsZUlkKSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO3JldHVybiBuLmZvcm0mJnRoaXMuc2hvdWxkU2hvd1RTVkhvc3RlZEZvcm0oaSkmJih0aGlzLmhvc3RlZEZvcm09eWllbGQgdGhpcy5tb3VudENhcmRWZXJpZmljYXRpb25maWVsZHMobi5mb3JtKSksdGhpcy5pZnJhbWV8fCh0aGlzLmlmcmFtZT10aGlzLmNyZWF0ZUlmcmFtZShuLmNvbnRhaW5lcklkLG8sISFyLnRlc3RNb2RlKSksUHJvbWlzZS5yZXNvbHZlKCl9KX1leGVjdXRlKGUsdCl7cmV0dXJuIF9oKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSk7aWYoIW4pdGhyb3cgbmV3IFlpKFtcInBheW1lbnRcIl0pO2NvbnN0e2lzU3RvcmVDcmVkaXRBcHBsaWVkOnJ9PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENoZWNrb3V0T3JUaHJvdygpO2lmKHImJih5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuYXBwbHlTdG9yZUNyZWRpdChyKSkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGksdCksIW4ucGF5bWVudERhdGF8fCFTZChuLnBheW1lbnREYXRhKSlyZXR1cm4gdGhpcy5leGVjdXRlV2l0aENDKG4pO3lpZWxkIHRoaXMuZXhlY3V0ZVdpdGhWYXVsdGVkKG4pfSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gdGhpcy5ob3N0ZWRGb3JtJiZ0aGlzLmhvc3RlZEZvcm0uZGV0YWNoKCksdGhpcy53aW5kb3dFdmVudExpc3RlbmVyJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsdGhpcy53aW5kb3dFdmVudExpc3RlbmVyKSx0aGlzLndpbmRvd0V2ZW50TGlzdGVuZXI9dm9pZCAwKSx0aGlzLmlmcmFtZSYmdGhpcy5pZnJhbWUucGFyZW50Tm9kZSYmKHRoaXMuaWZyYW1lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5pZnJhbWUpLHRoaXMuaWZyYW1lPXZvaWQgMCksUHJvbWlzZS5yZXNvbHZlKCl9ZXhlY3V0ZVdpdGhDQyhlKXtyZXR1cm4gX2godGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZS5tZXRob2RJZCkuY29uZmlnLnRlc3RNb2RlLG49ZS5wYXltZW50RGF0YXx8e30saT1QZChuKT9uOntzaG91bGRTYXZlSW5zdHJ1bWVudDohMSxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OiExfSx7c2hvdWxkU2F2ZUluc3RydW1lbnQ6cixzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50Om99PWksYT15aWVsZCBuZXcgUHJvbWlzZSgoZSxuKT0+e2lmKCF0aGlzLmlmcmFtZSl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtjb25zdCBpPXRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3c7aWYobnVsbD09PWkpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7aS5wb3N0TWVzc2FnZShcInRva2VuaXplXCIsdGhpcy5tb25lcmlzVVJMKCEhdCkpLHRoaXMud2luZG93RXZlbnRMaXN0ZW5lcj1pPT57aWYoXCJzdHJpbmdcIj09dHlwZW9mIGkuZGF0YSYmaS5vcmlnaW49PT1gaHR0cHM6Ly8ke3Q/XCJlc3FhXCI6XCJ3d3czXCJ9Lm1vbmVyaXMuY29tYCl0cnl7ZSh0aGlzLmhhbmRsZU1vbmVyaXNSZXNwb25zZShpKSl9Y2F0Y2goZSl7bihlKX19LHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHRoaXMud2luZG93RXZlbnRMaXN0ZW5lcil9KTt2b2lkIDAhPT1hJiYoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe21ldGhvZElkOmUubWV0aG9kSWQscGF5bWVudERhdGE6e25vbmNlOmEsc2hvdWxkU2F2ZUluc3RydW1lbnQ6cixzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50Om99fSkpfSl9ZXhlY3V0ZVdpdGhWYXVsdGVkKGUpe3JldHVybiBfaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYodGhpcy5ob3N0ZWRGb3JtKXtjb25zdCB0PXRoaXMuaG9zdGVkRm9ybTtyZXR1cm4geWllbGQgdC52YWxpZGF0ZSgpLHlpZWxkIHQuc3VibWl0KGUpLHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ3VycmVudE9yZGVyKCl9cmV0dXJuIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KGUpfSl9c2hvdWxkU2hvd1RTVkhvc3RlZEZvcm0oZSl7cmV0dXJuIHRoaXMuaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQoZSkmJnRoaXMuaXNIb3N0ZWRGaWVsZEF2YWlsYWJsZSgpfWlzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKGUpe2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSk7cmV0dXJuIEJvb2xlYW4odC5jb25maWcuaXNIb3N0ZWRGb3JtRW5hYmxlZCl9aXNIb3N0ZWRGaWVsZEF2YWlsYWJsZSgpe3ZhciBlO2NvbnN0IHQ9dGhpcy5nZXRJbml0aWFsaXplT3B0aW9ucygpLG49SChudWxsPT09KGU9dC5mb3JtKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5maWVsZHMsRSk7cmV0dXJuIUUobil9Z2V0SW5pdGlhbGl6ZU9wdGlvbnMoKXtpZighdGhpcy5pbml0aWFsaXplT3B0aW9ucyl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gdGhpcy5pbml0aWFsaXplT3B0aW9uc31tb3VudENhcmRWZXJpZmljYXRpb25maWVsZHMoZSl7dmFyIHQ7cmV0dXJuIF9oKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPW51bGw9PT0odD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRTdG9yZUNvbmZpZygpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5wYXltZW50U2V0dGluZ3MuYmlncGF5QmFzZVVybDtpZighbil0aHJvdyBuZXcganQoa3QuTWlzc2luZ0NoZWNrb3V0Q29uZmlnKTtjb25zdCBpPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVIb3N0ZWRGb3JtKG4sZSk7cmV0dXJuIHlpZWxkIGkuYXR0YWNoKCksaX0pfWNyZWF0ZUlmcmFtZShlLHQsbixpKXtjb25zdCByPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpO2lmKCFyKXRocm93IG5ldyBybihcIlVuYWJsZSB0byBjcmVhdGUgaWZyYW1lIHdpdGhvdXQgdmFsaWQgY29udGFpbmVyIElELlwiKTtjb25zdCBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIiksYT17aWQ6dC5wcm9maWxlSWQscG1tc2c6ITAsZGlzcGxheV9sYWJlbHM6MSxlbmFibGVfZXhwOjEsZW5hYmxlX2N2ZDoxLGNzc19ib2R5OihudWxsPT1pP3ZvaWQgMDppLmNzc0JvZHkpfHxcImZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLHNhbnMtc2VyaWY7YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XCIsY3NzX3RleHRib3g6KG51bGw9PWk/dm9pZCAwOmkuY3NzVGV4dGJveCl8fFwiYm9yZGVyLXJhZGl1czo0cHg7Ym9yZGVyOiAycHggc29saWQgcmdiKDAwLDAwLDAwKTt3aWR0aDogMTAwJTtmb250LXdlaWdodDogNjAwO3BhZGRpbmc6IDhweCA4cHg7b3V0bGluZTogMDtcIixjc3NfdGV4dGJveF9wYW46KG51bGw9PWk/dm9pZCAwOmkuY3NzVGV4dGJveENhcmROdW1iZXIpfHxcIndpZHRoOiAyNDBweDtcIixjc3NfdGV4dGJveF9leHA6KG51bGw9PWk/dm9pZCAwOmkuY3NzVGV4dGJveEV4cGlyeURhdGUpfHxcIm1hcmdpbi1ib3R0b206IDA7d2lkdGg6IGNhbGMoMzAlIC0gMTJweCk7XCIsY3NzX3RleHRib3hfY3ZkOihudWxsPT1pP3ZvaWQgMDppLmNzc1RleHRib3hDVlYpfHxcIm1hcmdpbi1ib3R0b206IDA7d2lkdGg6IGNhbGMoMzAlIC0gMTJweCk7XCIsY3NzX2lucHV0X2xhYmVsOihudWxsPT1pP3ZvaWQgMDppLmNzc0lucHV0TGFiZWwpfHxcImZvbnQtc2l6ZTogMTBweDtwb3NpdGlvbjogcmVsYXRpdmU7dG9wOiA4cHg7bGVmdDogNnB4O2JhY2tncm91bmQ6IHJnYigyNTUsMjU1LDI1NSk7cGFkZGluZzogM3B4IDJweDtjb2xvcjogcmdiKDY2LDY2LDY2KTtmb250LXdlaWdodDogNjAwO3otaW5kZXg6IDI7XCIscGFuX2xhYmVsOnQuY3JlZGl0Q2FyZExhYmVsfHxcIkNyZWRpdCBDYXJkIE51bWJlclwiLGV4cF9sYWJlbDp0LmV4cGlyeURhdGVMYWJlbHx8XCJFeHBpcmF0aW9uXCIsY3ZkX2xhYmVsOnQuY3ZkTGFiZWx8fFwiQ1ZEXCJ9LHM9QihhLChlLHQpPT5gJHt0fT0ke2V9YCkuam9pbihcIiZcIik7cmV0dXJuIG8ud2lkdGg9XCIxMDAlXCIsby5oZWlnaHQ9XCIxMDAlXCIsby5uYW1lPXdoLG8uaWQ9d2gsby5zdHlsZS5ib3JkZXI9XCJub25lXCIsby5zcmM9YCR7dGhpcy5tb25lcmlzVVJMKG4pfT8ke3N9YCxvLmFsbG93PVwicGF5bWVudFwiLHIuYXBwZW5kQ2hpbGQobyksb31oYW5kbGVNb25lcmlzUmVzcG9uc2UoZSl7Y29uc3QgdD1KU09OLnBhcnNlKGUuZGF0YSk7aWYoXCIwMDFcIiE9PXQucmVzcG9uc2VDb2RlWzBdKXRocm93IG5ldyBFcnJvcih0LmVycm9yTWVzc2FnZSk7cmV0dXJuIHQuZGF0YUtleX1tb25lcmlzVVJMKGUpe3JldHVybmBodHRwczovLyR7ZT9cImVzcWFcIjpcInd3dzNcIn0ubW9uZXJpcy5jb20vSFBQdG9rZW4vaW5kZXgucGhwYH19Y29uc3QgSWg9bm4oZT0+bmV3IENoKGUpLFt7aWQ6XCJtb25lcmlzXCJ9XSk7Y2xhc3MgYmh7Y29uc3RydWN0b3IoZSl7dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZT1lfWV4ZWN1dGUoZSx0KXtyZXR1cm4gbj10aGlzLGk9dm9pZCAwLG89ZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihHKGUsXCJwYXltZW50XCIpLHQpfSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1pbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX19Y29uc3QgUGg9bm4oZT0+bmV3IGJoKGUpLFt7aWQ6XCJub3BheW1lbnRkYXRhcmVxdWlyZWRcIn1dKTtjbGFzcyBPaHtjb25zdHJ1Y3RvcihlKXt0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWV9ZXhlY3V0ZShlLHQpe3JldHVybiBuPXRoaXMsaT12b2lkIDAsbz1mdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3BheW1lbnQ6ZS5wYXltZW50P3ttZXRob2RJZDplLnBheW1lbnQubWV0aG9kSWR9OnZvaWQgMH0pLHQpLFByb21pc2UucmVzb2x2ZSgpfSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1pbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX19Y29uc3QgRWg9bm4oZT0+bmV3IE9oKGUpLFt7dHlwZTpcIlBBWU1FTlRfVFlQRV9PRkZMSU5FXCJ9XSk7dmFyIEFoPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIGtoe2NvbnN0cnVjdG9yKGUpe3RoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZX1leGVjdXRlKGUsdCl7cmV0dXJuIEFoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSkscj10aGlzLl9zaG91bGRTdWJtaXRGdWxsUGF5bG9hZChuKT9lOmksbz1uJiZuLnBheW1lbnREYXRhLGE9byYmU2QobykmJm8uaW5zdHJ1bWVudElkfHx2b2lkIDAscz1vJiZQZChvKSYmby5zaG91bGRTYXZlSW5zdHJ1bWVudHx8dm9pZCAwLGQ9byYmUGQobykmJm8uc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudHx8dm9pZCAwO2lmKCFuKXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTtjb25zdHttZXRob2RJZDpjLGdhdGV3YXlJZDpsfT1uO3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIocix0KSx5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmluaXRpYWxpemVPZmZzaXRlUGF5bWVudCh7bWV0aG9kSWQ6YyxnYXRld2F5SWQ6bCxpbnN0cnVtZW50SWQ6YSxzaG91bGRTYXZlSW5zdHJ1bWVudDpzLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6ZH0pfSl9ZmluYWxpemUoZSl7cmV0dXJuIEFoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxuPXQuZ2V0T3JkZXIoKSxpPXQuZ2V0UGF5bWVudFN0YXR1cygpO2lmKCFufHxpIT09SGMuQUNLTk9XTEVER0UmJmkhPT1IYy5GSU5BTElaRSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKTt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmZpbmFsaXplT3JkZXIoZSl9KX1pbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1fc2hvdWxkU3VibWl0RnVsbFBheWxvYWQoZSl7cmV0dXJuISFlJiYoXCJhZHllblwiPT09ZS5nYXRld2F5SWR8fFwiYmFyY2xheWNhcmRcIj09PWUuZ2F0ZXdheUlkKX19Y29uc3QgVGg9bm4oZT0+bmV3IGtoKGUpLFt7dHlwZTpcIlBBWU1FTlRfVFlQRV9IT1NURURcIn1dKSxEaD17XCJiYWNrZ3JvdW5kLWNvbG9yXCI6XCJyZ2JhKDAsIDAsIDAsIDAuNClcIixcInotaW5kZXhcIjpcIjEwMDBcIn0sTWg9ZnVuY3Rpb24oe3N0eWxlczplfSl7Y29uc3QgdD17fTtyZXR1cm4gZS5jb2xvciYmKHQuY29sb3I9ZS5jb2xvciksZS5sYXlvdXQmJih0LmxheW91dD1lLmxheW91dCksKGVbXCJsb2dvLXR5cGVcIl18fGVbXCJsb2dvLXBvc2l0aW9uXCJdKSYmKHQubG9nbz17fSxlW1wibG9nby10eXBlXCJdJiYodC5sb2dvLnR5cGU9ZVtcImxvZ28tdHlwZVwiXSksZVtcImxvZ28tcG9zaXRpb25cIl0mJih0LmxvZ28ucG9zaXRpb249ZVtcImxvZ28tcG9zaXRpb25cIl0pKSxlLnJhdGlvJiYodC5yYXRpbz1lLnJhdGlvKSwoZVtcInRleHQtY29sb3JcIl18fGVbXCJ0ZXh0LXNpemVcIl0pJiYodC50ZXh0PXt9LGVbXCJ0ZXh0LWNvbG9yXCJdJiYodC50ZXh0LmNvbG9yPWVbXCJ0ZXh0LWNvbG9yXCJdKSxlW1widGV4dC1zaXplXCJdJiYodC50ZXh0LnNpemU9K2VbXCJ0ZXh0LXNpemVcIl0pKSx0fTt2YXIgemg9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgTmh7Y29uc3RydWN0b3IoZSx0LG4saSl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZT10LHRoaXMucGF5cGFsQ29tbWVyY2VTZGs9bix0aGlzLmxvYWRpbmdJbmRpY2F0b3I9aX1pbml0aWFsaXplKGUpe3ZhciB0O3JldHVybiB6aCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bWV0aG9kSWQ6bixwYXlwYWxjb21tZXJjZTppfT1lfHx7fTtpZih0aGlzLnBheXBhbGNvbW1lcmNlPWksIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFpKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2Qobik7Y29uc3Qgcj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxvPXIuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobikse2NvbnRhaW5lcjphLGJhbm5lckNvbnRhaW5lcklkOnN9PWkse29yZGVySWQ6ZCxwYXlwYWxCTlBMQ29uZmlndXJhdGlvbjpjPVtdLGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlOmx9PW8uaW5pdGlhbGl6YXRpb25EYXRhfHx7fTtpZih2b2lkIDAhPT1zKXtpZighZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocykpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBjcmVhdGUgYmFubmVyIHdpdGhvdXQgdmFsaWQgYmFubmVyIGNvbnRhaW5lciBJRC5cIik7Y29uc3QgZT1udWxsPT1jP3ZvaWQgMDpjLmZpbmQoKHtpZDplfSk9PlwiY2hlY2tvdXRcIj09PWUpO2lmKGx8fCEobnVsbD09ZT92b2lkIDA6ZS5zdGF0dXMpKXJldHVybjtjb25zdCB0PXlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsTWVzc2FnZXMobyxyLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSk7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG51bGw9PXQ/dm9pZCAwOnQuTWVzc2FnZXMpP3RoaXMucmVuZGVyTWVzc2FnZXModCxzLGUpOnZvaWQgY29uc29sZS5lcnJvcihcIltCQyBQYXlQYWxDb21tZXJjZSBQYXlMYXRlcl06IGJhbm5lciBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREtcIil9ZD90aGlzLm9yZGVySWQ9bnVsbD09PSh0PW8uaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5vcmRlcklkOih0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI9bnVsbD09YT92b2lkIDA6YS5zcGxpdChcIiNcIilbMV0seWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG4pLGkub25Jbml0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBpLm9uSW5pdCYmaS5vbkluaXQoKCk9PnRoaXMucmVuZGVyQnV0dG9uKG4saSkpLCh2b2lkIDA9PT1pLnNob3VsZFJlbmRlclBheVBhbEJ1dHRvbk9uSW5pdGlhbGl6YXRpb258fGkuc2hvdWxkUmVuZGVyUGF5UGFsQnV0dG9uT25Jbml0aWFsaXphdGlvbikmJnRoaXMucmVuZGVyQnV0dG9uKG4saSkpfSl9ZXhlY3V0ZShlLHQpe3ZhciBuLGk7cmV0dXJuIHpoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50OnJ9PWUsbz1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSkse29uRXJyb3I6YX09dGhpcy5wYXlwYWxjb21tZXJjZXx8e30scz10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzLGQ9cyYmc1tcIlBBWVBBTC0zNDM4LmhhbmRsaW5nX2luc3RydW1lbnRfZGVjbGluZWRfZXJyb3JfcHBjXCJdO2lmKCFyKXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTtjb25zdHttZXRob2RJZDpjLHBheW1lbnREYXRhOmx9PXI7aWYodGhpcy5pc1BheVBhbFZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudERhdGEobCkmJiF0aGlzLm9yZGVySWQmJih0aGlzLm9yZGVySWQ9eWllbGQgdGhpcy5jcmVhdGVPcmRlcigpKSwhdGhpcy5vcmRlcklkKXRocm93IG5ldyBCaTtjb25zdCB1PXRoaXMuaXNQYXlQYWxWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnREYXRhKGwpP3RoaXMucHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQoYyx0aGlzLm9yZGVySWQsbCk6dGhpcy5wcmVwYXJlUGF5bWVudFBheWxvYWQoYyx0aGlzLm9yZGVySWQsbCk7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvLHQpLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHUpfWNhdGNoKGUpe2lmKGZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBYcihlKSYmXCJvZmZzaXRlX3JlZGlyZWN0XCI9PT0obnVsbD09PSh0PWUuYm9keS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudHlwZSl9KGUpKXtjb25zdCB0PW51bGw9PT0oaT1udWxsPT09KG49ZS5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkKXx8dm9pZCAwPT09bj92b2lkIDA6bi5kYXRhKXx8dm9pZCAwPT09aT92b2lkIDA6aS5yZWRpcmVjdF91cmw7cmV0dXJuIG5ldyBQcm9taXNlKCgpPT53aW5kb3cubG9jYXRpb24ucmVwbGFjZSh0KSl9cmV0dXJuIHRoaXMuaXNQcm92aWRlckVycm9yKGUpJiZkJiYoeWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKHIubWV0aG9kSWQpLHlpZWxkIG5ldyBQcm9taXNlKChlLHQpPT57dmFyIG47dGhpcy5wYXlwYWxjb21tZXJjZSYmKG51bGw9PT0obj10aGlzLnBheXBhbEJ1dHRvbil8fHZvaWQgMD09PW58fG4uY2xvc2UoKSx0aGlzLnJlbmRlckJ1dHRvbihyLm1ldGhvZElkLHRoaXMucGF5cGFsY29tbWVyY2UpLHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKFwiSU5TVFJVTUVOVF9ERUNMSU5FRFwiKSxhKSksdCgpfSkpLHRoaXMuaGFuZGxlRXJyb3IoZSxhKSxQcm9taXNlLnJlamVjdCgpfX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBfZCl9ZGVpbml0aWFsaXplKCl7dmFyIGU7cmV0dXJuIHRoaXMub3JkZXJJZD12b2lkIDAsbnVsbD09PShlPXRoaXMucGF5cGFsQnV0dG9uKXx8dm9pZCAwPT09ZXx8ZS5jbG9zZSgpLFByb21pc2UucmVzb2x2ZSgpfXByZXBhcmVWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnRQYXlsb2FkKGUsdCxuKXtjb25zdHtpbnN0cnVtZW50SWQ6aSxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OnJ9PW4sbz0hdGhpcy5pc1RydXN0ZWRWYXVsdGluZ0Zsb3cobik7cmV0dXJuIG8/e21ldGhvZElkOmUscGF5bWVudERhdGE6e3Nob3VsZFNhdmVJbnN0cnVtZW50Om8sc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDpyLGZvcm1hdHRlZFBheWxvYWQ6e3BheXBhbF9hY2NvdW50OntvcmRlcl9pZDp0fX19fTp7bWV0aG9kSWQ6ZSxwYXltZW50RGF0YTp7aW5zdHJ1bWVudElkOmksc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDpyLGZvcm1hdHRlZFBheWxvYWQ6e3BheXBhbF9hY2NvdW50OntvcmRlcl9pZDp0fSxiaWdwYXlfdG9rZW46e3Rva2VuOml9fX19fXByZXBhcmVQYXltZW50UGF5bG9hZChlLHQsbil7Y29uc3R7c2hvdWxkU2F2ZUluc3RydW1lbnQ6aT0hMSxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OnI9ITF9PVBkKG4pP246e307cmV0dXJue21ldGhvZElkOmUscGF5bWVudERhdGE6e3Nob3VsZFNhdmVJbnN0cnVtZW50Omksc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDpyLGZvcm1hdHRlZFBheWxvYWQ6e3BheXBhbF9hY2NvdW50OntvcmRlcl9pZDp0fX19fX1yZW5kZXJCdXR0b24oZSx0KXtjb25zdCBuPXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpLGk9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSkse3BheW1lbnRCdXR0b25TdHlsZXM6cn09aS5pbml0aWFsaXphdGlvbkRhdGF8fHt9LHtjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXM6b309cnx8e30se2NvbnRhaW5lcjphLG9uRXJyb3I6cyxvblJlbmRlckJ1dHRvbjpkLG9uVmFsaWRhdGU6YyxzdWJtaXRGb3JtOmx9PXQ7aWYoIWEpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJjb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7Y29uc3QgdT17ZnVuZGluZ1NvdXJjZTpuLkZVTkRJTkcuUEFZUEFMLHN0eWxlOnRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShvKSxjcmVhdGVPcmRlcjooKT0+dGhpcy5jcmVhdGVPcmRlcigpLG9uQ2xpY2s6KGUsdCk9PnRoaXMuaGFuZGxlQ2xpY2sodCxjKSxvbkFwcHJvdmU6ZT0+dGhpcy5oYW5kbGVBcHByb3ZlKGUsbCksb25FcnJvcjplPT50aGlzLmhhbmRsZUVycm9yKGUscyksb25DYW5jZWw6KCk9PnRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSl9O3RoaXMucGF5cGFsQnV0dG9uPW4uQnV0dG9ucyh1KSx0aGlzLnBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkmJihkJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBkJiZkKCksdGhpcy5wYXlwYWxCdXR0b24ucmVuZGVyKGEpKX1oYW5kbGVDbGljayhlLHQpe3JldHVybiB6aCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cmVzb2x2ZTpuLHJlamVjdDppfT1lO3lpZWxkIG51bGw9PXQ/dm9pZCAwOnQoKCk9Pih0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITApLG4oKSksaSl9KX1oYW5kbGVBcHByb3ZlKHtvcmRlcklEOmV9LHQpe3RoaXMub3JkZXJJZD1lLG51bGw9PXR8fHQoKX1oYW5kbGVFcnJvcihlLHQpe3RoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdChlKX1jcmVhdGVPcmRlcigpe3JldHVybiB6aCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgZT10aGlzLmdldEZpZWxkc1ZhbHVlcygpO3JldHVybiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFwicGF5cGFsY29tbWVyY2VjaGVja291dFwiLHtzaG91bGRTYXZlSW5zdHJ1bWVudDoobnVsbD09ZT92b2lkIDA6ZS5zaG91bGRTYXZlSW5zdHJ1bWVudCl8fCExfSl9KX1nZXRGaWVsZHNWYWx1ZXMoKXtjb25zdHtnZXRGaWVsZHNWYWx1ZXM6ZX09dGhpcy5wYXlwYWxjb21tZXJjZXx8e307cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZT9lKCk6dm9pZCAwfWlzVHJ1c3RlZFZhdWx0aW5nRmxvdyhlKXtpZihlJiZTZChlKSl7Y29uc3QgdD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRJbnN0cnVtZW50cygpLG49bnVsbD09dD92b2lkIDA6dC5maW5kKHQ9PktkKHQpJiZ0LmJpZ3BheVRva2VuPT09ZS5pbnN0cnVtZW50SWQpO3JldHVybiEoS2QobikmJiFuLnRydXN0ZWRTaGlwcGluZ0FkZHJlc3MpfXJldHVybiExfXRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZSl7ZSYmdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyP3RoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik6dGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKX1pc1BheVBhbFZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudERhdGEoZSl7cmV0dXJuISFlJiZTZChlKSYmUGQoZSl9cmVuZGVyTWVzc2FnZXMoZSx0LG4pe2NvbnN0IGk9e2Ftb3VudDp0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDaGVja291dE9yVGhyb3coKS5vdXRzdGFuZGluZ0JhbGFuY2UscGxhY2VtZW50OlwicGF5bWVudFwiLHN0eWxlOk1oKG4pfTtlLk1lc3NhZ2VzKGkpLnJlbmRlcihgIyR7dH1gKX1pc1Byb3ZpZGVyRXJyb3IoZSl7dmFyIHQsbixpO3JldHVybiEhZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcImVycm9yc1wiaW4gZX0oZSkmJlwiSU5TVFJVTUVOVF9ERUNMSU5FRFwiPT09KG51bGw9PT0oaT1udWxsPT09KG49KChudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5lcnJvcnMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmZpbHRlcihlPT5lLnByb3ZpZGVyX2Vycm9yKSl8fFtdKVswXSl8fHZvaWQgMD09PW4/dm9pZCAwOm4ucHJvdmlkZXJfZXJyb3IpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmNvZGUpfX1jb25zdCB4aD1ubihlPT5uZXcgTmgoZSxZbyhlKSxuZXcgSW8oYSgpKSxuZXcgQmEoe2NvbnRhaW5lclN0eWxlczpEaH0pKSxbe2lkOlwicGF5cGFsY29tbWVyY2VcIn1dKTt2YXIgRmg9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgUmh7Y29uc3RydWN0b3IoZSx0LG4saSl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZT10LHRoaXMubG9hZGluZ0luZGljYXRvcj1uLHRoaXMucGF5cGFsQ29tbWVyY2VTZGs9aX1pbml0aWFsaXplKGUpe3JldHVybiBGaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bWV0aG9kSWQ6dCxwYXlwYWxjb21tZXJjZTpuLHBheXBhbGNvbW1lcmNlY3JlZGl0Oml9PWV8fHt9LHI9aXx8bjtpZighdCl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXIpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZCh0KTtjb25zdCBvPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGE9by5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyh0KSx7cGF5cGFsQk5QTENvbmZpZ3VyYXRpb246cz1bXSxvcmRlcklkOmR9PWEuaW5pdGlhbGl6YXRpb25EYXRhfHx7fSx7YmFubmVyQ29udGFpbmVySWQ6Yyxjb250YWluZXI6bH09cjtpZih2b2lkIDAhPT1jKXtpZighZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYykpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBjcmVhdGUgYmFubmVyIHdpdGhvdXQgdmFsaWQgYmFubmVyIGNvbnRhaW5lciBJRC5cIik7Y29uc3QgZT1zJiZzLmZpbmQoKHtpZDplfSk9PlwiY2hlY2tvdXRcIj09PWUpO2lmKCEobnVsbD09ZT92b2lkIDA6ZS5zdGF0dXMpKXJldHVybjtjb25zdCB0PXlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsTWVzc2FnZXMoYSxvLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSk7cmV0dXJuIHRoaXMucmVuZGVyTWVzc2FnZXModCxjLGUpfWQ/dGhpcy5vcmRlcklkPWQ6KHlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayh0KSx0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI9bnVsbD09bD92b2lkIDA6bC5zcGxpdChcIiNcIilbMV0sdGhpcy5yZW5kZXJCdXR0b24odCxyKSl9KX1leGVjdXRlKGUsdCl7cmV0dXJuIEZoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSk7aWYoIW4pdGhyb3cgbmV3IFlpKFtcInBheW1lbnRcIl0pO2lmKCF0aGlzLm9yZGVySWQpdGhyb3cgbmV3IEJpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihpLHQpLHlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChuLm1ldGhvZElkLHRoaXMub3JkZXJJZCl9KX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfWRlaW5pdGlhbGl6ZSgpe3ZhciBlO3JldHVybiB0aGlzLm9yZGVySWQ9dm9pZCAwLG51bGw9PT0oZT10aGlzLnBheXBhbEJ1dHRvbil8fHZvaWQgMD09PWV8fGUuY2xvc2UoKSxQcm9taXNlLnJlc29sdmUoKX1yZW5kZXJCdXR0b24oZSx0KXtpZighKG51bGw9PXQ/dm9pZCAwOnQuY29udGFpbmVyKSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcImNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdCBuPXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpLGk9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSkse3BheW1lbnRCdXR0b25TdHlsZXM6cn09aS5pbml0aWFsaXphdGlvbkRhdGF8fHt9LHtjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXM6b309cnx8e30se2NvbnRhaW5lcjphLG9uRXJyb3I6cyxvblJlbmRlckJ1dHRvbjpkLG9uVmFsaWRhdGU6YyxzdWJtaXRGb3JtOmx9PXQsdT1bbi5GVU5ESU5HLlBBWUxBVEVSLG4uRlVORElORy5DUkVESVRdO2xldCBoPSExO3UuZm9yRWFjaChlPT57aWYoaClyZXR1cm47Y29uc3QgdD17ZnVuZGluZ1NvdXJjZTplLHN0eWxlOnRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShvKSxjcmVhdGVPcmRlcjooKT0+dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcInBheXBhbGNvbW1lcmNlY3JlZGl0Y2hlY2tvdXRcIiksb25DbGljazooZSx0KT0+dGhpcy5oYW5kbGVDbGljayh0LGMpLG9uQXBwcm92ZTplPT50aGlzLmhhbmRsZUFwcHJvdmUoZSxsKSxvbkNhbmNlbDooKT0+dGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCExKSxvbkVycm9yOmU9PnRoaXMuaGFuZGxlRXJyb3IoZSxzKX07aWYodGhpcy5wYXlwYWxCdXR0b249bi5CdXR0b25zKHQpLHRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKXx8ZSE9PW4uRlVORElORy5QQVlMQVRFUil7aWYoIXRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSYmZT09PW4uRlVORElORy5DUkVESVQpdGhyb3cgbmV3IG9uKGBQYXlQYWwgJHtlfSBpcyBub3QgYXZhaWxhYmxlIGZvciB5b3VyIHJlZ2lvbi4gUGxlYXNlIHVzZSBQYXlQYWwgQ2hlY2tvdXQgaW5zdGVhZC5gKTtkJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBkJiZkKCksdGhpcy5wYXlwYWxCdXR0b24ucmVuZGVyKGEpLGg9ITB9fSl9aGFuZGxlQ2xpY2soZSx0KXtyZXR1cm4gRmgodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3Jlc29sdmU6bixyZWplY3Q6aX09ZTt0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiYoeWllbGQgdCgoKT0+KHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMCksbigpKSxpKSl9KX1oYW5kbGVBcHByb3ZlKHtvcmRlcklEOmV9LHQpe3RoaXMub3JkZXJJZD1lLHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQoKX1oYW5kbGVFcnJvcihlLHQpe3RoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdChlKX10b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGUpe2UmJnRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj90aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpOnRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCl9cmVuZGVyTWVzc2FnZXMoZSx0LG4pe2NvbnN0IGk9e2Ftb3VudDp0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDaGVja291dE9yVGhyb3coKS5vdXRzdGFuZGluZ0JhbGFuY2UscGxhY2VtZW50OlwicGF5bWVudFwiLHN0eWxlOk1oKG4pfTtlLk1lc3NhZ2VzKGkpLnJlbmRlcihgIyR7dH1gKX19Y29uc3QgTGg9bm4oZT0+bmV3IFJoKGUsWW8oZSksbmV3IEJhKHtjb250YWluZXJTdHlsZXM6RGh9KSxyYSgpKSxbe2lkOlwicGF5cGFsY29tbWVyY2VjcmVkaXRcIn1dKTt2YXIgQmg9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3Mgamh7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U9dCx0aGlzLmxvYWRpbmdJbmRpY2F0b3I9bn1pbml0aWFsaXplKGUpe3ZhciB0LG47cmV0dXJuIEJoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHttZXRob2RJZDppLHBheXBhbGNvbW1lcmNlOnIscGF5cGFsY29tbWVyY2V2ZW5tbzpvfT1lfHx7fSxhPW98fHI7aWYoIWkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFhKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZXZlbm1vXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChpKTtjb25zdCBzPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KGkpOyhudWxsPT09KHQ9cy5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm9yZGVySWQpP3RoaXMub3JkZXJJZD1udWxsPT09KG49cy5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLm9yZGVySWQ6KHlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhpKSx0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI9YS5jb250YWluZXIuc3BsaXQoXCIjXCIpWzFdLHRoaXMucmVuZGVyQnV0dG9uKGksYSkpfSl9ZXhlY3V0ZShlLHQpe3JldHVybiBCaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pO2lmKCFuKXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTtpZighdGhpcy5vcmRlcklkKXRocm93IG5ldyBCaTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KSx5aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobi5tZXRob2RJZCx0aGlzLm9yZGVySWQpfSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXt2YXIgZTtyZXR1cm4gdGhpcy5vcmRlcklkPXZvaWQgMCxudWxsPT09KGU9dGhpcy5wYXlwYWxCdXR0b24pfHx2b2lkIDA9PT1lfHxlLmNsb3NlKCksUHJvbWlzZS5yZXNvbHZlKCl9cmVuZGVyQnV0dG9uKGUsdCl7Y29uc3Qgbj10aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKSxpPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KGUpLHtwYXltZW50QnV0dG9uU3R5bGVzOnJ9PWkuaW5pdGlhbGl6YXRpb25EYXRhfHx7fSx7Y2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzOm99PXJ8fHt9LHtjb250YWluZXI6YSxvbkVycm9yOnMsb25SZW5kZXJCdXR0b246ZCxvblZhbGlkYXRlOmMsc3VibWl0Rm9ybTpsfT10LHU9e2Z1bmRpbmdTb3VyY2U6bi5GVU5ESU5HLlZFTk1PLHN0eWxlOnRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShvKSxjcmVhdGVPcmRlcjooKT0+dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcInBheXBhbGNvbW1lcmNldmVubW9jaGVja291dFwiKSxvbkNsaWNrOihlLHQpPT50aGlzLmhhbmRsZUNsaWNrKHQsYyksb25BcHByb3ZlOmU9PnRoaXMuaGFuZGxlQXBwcm92ZShlLGwpLG9uQ2FuY2VsOigpPT50aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITEpLG9uRXJyb3I6ZT0+dGhpcy5oYW5kbGVFcnJvcihlLHMpfTtpZih0aGlzLnBheXBhbEJ1dHRvbj1uLkJ1dHRvbnModSksIXRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSl0aHJvdyBuZXcgb24oXCJQYXlQYWwgVmVubW8gaXMgbm90IGF2YWlsYWJsZSBmb3IgeW91ciByZWdpb24uIFBsZWFzZSB1c2UgUGF5UGFsIENoZWNrb3V0IGluc3RlYWQuXCIpO2QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGQmJmQoKSx0aGlzLnBheXBhbEJ1dHRvbi5yZW5kZXIoYSl9aGFuZGxlQ2xpY2soZSx0KXtyZXR1cm4gQmgodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3Jlc29sdmU6bixyZWplY3Q6aX09ZTt5aWVsZCB0KCgpPT4odGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCEwKSxuKCkpLGkpfSl9aGFuZGxlQXBwcm92ZSh7b3JkZXJJRDplfSx0KXt0aGlzLm9yZGVySWQ9ZSx0KCksdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCExKX1oYW5kbGVFcnJvcihlLHQpe3RoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdChlKX10b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGUpe2UmJnRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj90aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpOnRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCl9fWNvbnN0IFVoPW5uKGU9Pm5ldyBqaChlLFlvKGUpLG5ldyBCYSh7c3R5bGVzOntiYWNrZ3JvdW5kQ29sb3I6XCJibGFja1wifX0pKSxbe2lkOlwicGF5cGFsY29tbWVyY2V2ZW5tb1wifV0pO3ZhciBxaD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBWaHtjb25zdHJ1Y3RvcihlLHQsbixpLHI9M2UzLG89M2U1KXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5wYXlwYWxDb21tZXJjZVNkaz1uLHRoaXMubG9hZGluZ0luZGljYXRvcj1pLHRoaXMucG9sbGluZ0ludGVydmFsPXIsdGhpcy5tYXhQb2xsaW5nSW50ZXJ2YWxUaW1lPW8sdGhpcy5wb2xsaW5nVGltZXI9MCx0aGlzLnN0b3BQb2xsaW5nPVYsdGhpcy5pc1BvbGxpbmdFbmFibGVkPSExfWluaXRpYWxpemUoZSl7cmV0dXJuIHFoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtnYXRld2F5SWQ6dCxtZXRob2RJZDpuLHBheXBhbGNvbW1lcmNlOmkscGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHM6cn09ZSxvPXJ8fGk7aWYodGhpcy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcz1yLCFuKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighdCl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFvKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdCBhPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHM9YS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhuLHQpLHtvcmRlcklkOmQsc2hvdWxkUmVuZGVyRmllbGRzOmN9PXMuaW5pdGlhbGl6YXRpb25EYXRhfHx7fSxsPWEuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlczt0aGlzLmlzUG9sbGluZ0VuYWJsZWQ9Y24obCxcIlBBWVBBTC01MTkyLnBheXBhbF9jb21tZXJjZV9pZGVhbF9wb2xsaW5nXCIpLGQ/dGhpcy5vcmRlcklkPWQ6KHRoaXMucGF5cGFsQXBtcz15aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlU2RrLmdldFBheVBhbEFwbXNTZGsocyxhLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSksdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPW8uY29udGFpbmVyLnNwbGl0KFwiI1wiKVsxXSx0aGlzLnJlbmRlckJ1dHRvbihuLHQsbyksYyYmdGhpcy5yZW5kZXJGaWVsZHMobixvKSl9KX1leGVjdXRlKGUsdCl7cmV0dXJuIHFoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSk7aWYoIW4pdGhyb3cgbmV3IFlpKFtcInBheW1lbnRcIl0pO2NvbnN0e21ldGhvZElkOnIsZ2F0ZXdheUlkOm99PW47aWYoIXRoaXMub3JkZXJJZCl0aHJvdyBuZXcgQmk7dGhpcy5pc1BvbGxpbmdFbmFibGVkJiZcImlkZWFsXCI9PT1yJiYoeWllbGQgbmV3IFByb21pc2UoKGUsdCk9Pnt0aGlzLmluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKHIsZSx0LG8pfSkpLHRoaXMuaXNOb25JbnN0YW50UGF5bWVudE1ldGhvZChyKXx8KHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihpLHQpKSx5aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocix0aGlzLm9yZGVySWQsbyl9KX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfWRlaW5pdGlhbGl6ZSgpe3ZhciBlO3JldHVybiB0aGlzLm9yZGVySWQ9dm9pZCAwLHRoaXMuaXNQb2xsaW5nRW5hYmxlZCYmdGhpcy5yZXNldFBvbGxpbmdNZWNoYW5pc20oKSxudWxsPT09KGU9dGhpcy5wYXlwYWxCdXR0b24pfHx2b2lkIDA9PT1lfHxlLmNsb3NlKCksUHJvbWlzZS5yZXNvbHZlKCl9aW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oZSx0LG4saSl7cmV0dXJuIHFoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCBuZXcgUHJvbWlzZSgoZSx0KT0+e2NvbnN0IG49c2V0VGltZW91dChlLHRoaXMucG9sbGluZ0ludGVydmFsKTt0aGlzLnN0b3BQb2xsaW5nPSgpPT4oY2xlYXJUaW1lb3V0KG4pLHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksdCgpKX0pO3RyeXt0aGlzLnBvbGxpbmdUaW1lcis9dGhpcy5wb2xsaW5nSW50ZXJ2YWw7Y29uc3Qgcj15aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldE9yZGVyU3RhdHVzKGkpLG89cj09PVVvLkFwcHJvdmVkLGE9cj09PVVvLlBvbGxpbmdFcnJvcjtpZihvKXJldHVybiB0aGlzLmRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKSx0KCk7aWYoYSlyZXR1cm4gbigpO2lmKCFvJiZ0aGlzLnBvbGxpbmdUaW1lcjx0aGlzLm1heFBvbGxpbmdJbnRlcnZhbFRpbWUpcmV0dXJuIHlpZWxkIHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oZSx0LG4saSk7eWllbGQgdGhpcy5yZWluaXRpYWxpemVTdHJhdGVneSh7bWV0aG9kSWQ6ZSxnYXRld2F5SWQ6aSxwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kczp0aGlzLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzfSksdGhpcy5oYW5kbGVFcnJvcihuZXcgc2MpfWNhdGNoKGUpe24oKX19KX1kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCl7dGhpcy5zdG9wUG9sbGluZygpLHRoaXMucG9sbGluZ1RpbWVyPTB9cmVzZXRQb2xsaW5nTWVjaGFuaXNtKCl7dGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCl9cmVpbml0aWFsaXplU3RyYXRlZ3koZSl7cmV0dXJuIHFoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmRlaW5pdGlhbGl6ZSgpLHlpZWxkIHRoaXMuaW5pdGlhbGl6ZShlKX0pfWhhbmRsZUVycm9yKGUpe2NvbnN0e29uRXJyb3I6dH09dGhpcy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kc3x8e307dGhpcy5pc1BvbGxpbmdFbmFibGVkJiZ0aGlzLnJlc2V0UG9sbGluZ01lY2hhbmlzbSgpLHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdChlKX1yZW5kZXJCdXR0b24oZSx0LG4pe2NvbnN0IGk9dGhpcy5nZXRQYXlwYWxBbXBzU2RrT3JUaHJvdygpLHI9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSx0KSx7YnV0dG9uU3R5bGU6b309ci5pbml0aWFsaXphdGlvbkRhdGF8fHt9LHtjb250YWluZXI6YSxvbkVycm9yOnMsb25SZW5kZXJCdXR0b246ZCxzdWJtaXRGb3JtOmN9PW4sbD17ZnVuZGluZ1NvdXJjZTplLHN0eWxlOnRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShvKSxvbkluaXQ6KGUsdCk9Pm4ub25Jbml0QnV0dG9uKHQpLGNyZWF0ZU9yZGVyOigpPT50aGlzLm9uQ3JlYXRlT3JkZXIoZSx0LG4pLG9uQXBwcm92ZTplPT50aGlzLmhhbmRsZUFwcHJvdmUoZSxjKSxvbkNhbmNlbDooKT0+e3RoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMSksdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCl9LG9uRXJyb3I6ZT0+e3RoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpLHRoaXMuaGFuZGxlRmFpbHVyZShlLHMpfSxvbkNsaWNrOihlLHQpPT5xaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIG4ub25WYWxpZGF0ZSh0LnJlc29sdmUsdC5yZWplY3QpfSl9O3RoaXMucGF5cGFsQnV0dG9uPWkuQnV0dG9ucyhsKSx0aGlzLnBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkmJihkJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBkJiZkKCksdGhpcy5wYXlwYWxCdXR0b24ucmVuZGVyKGEpKX1vbkNyZWF0ZU9yZGVyKGUsdCxuKXtyZXR1cm4gcWgodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e29uVmFsaWRhdGU6aX09bjt5aWVsZCBpKCgpPT4odGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCEwKSwoKT0+UHJvbWlzZS5yZXNvbHZlKCkpLFYpO2NvbnN0IHI9eWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcInBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzY2hlY2tvdXRcIik7aWYodGhpcy5pc05vbkluc3RhbnRQYXltZW50TWV0aG9kKGUpKXtjb25zdCBuPXt1c2VTdG9yZUNyZWRpdDohMX0saT17cGFyYW1zOnttZXRob2RJZDplLGdhdGV3YXlJZDp0fX07eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG4saSkseWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KGUscix0KX1yZXR1cm4gcn0pfWhhbmRsZUFwcHJvdmUoe29yZGVySUQ6ZX0sdCl7dGhpcy5vcmRlcklkPWUsdCgpfWhhbmRsZUZhaWx1cmUoZSx0KXt0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITEpLHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQoZSl9cmVuZGVyRmllbGRzKGUsdCl7Y29uc3Qgbj10aGlzLmdldFBheXBhbEFtcHNTZGtPclRocm93KCksaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx7Zmlyc3ROYW1lOnIsbGFzdE5hbWU6byxlbWFpbDphfT1pLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpLHthcG1GaWVsZHNDb250YWluZXI6cyxhcG1GaWVsZHNTdHlsZXM6ZH09dDtpZighcyl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHNcIiBhcmd1bWVudCBzaG91bGQgY29udGFpbiBcImFwbUZpZWxkc0NvbnRhaW5lclwiLicpO2NvbnN0IGM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzKTtjJiYoYy5pbm5lckhUTUw9XCJcIik7Y29uc3QgbD17ZnVuZGluZ1NvdXJjZTplLHN0eWxlOmR8fHt9LGZpZWxkczp7bmFtZTp7dmFsdWU6YCR7cn0gJHtvfWB9LGVtYWlsOnt2YWx1ZTphfX19O24uUGF5bWVudEZpZWxkcyhsKS5yZW5kZXIocyl9dG9nZ2xlTG9hZGluZ0luZGljYXRvcihlKXtlJiZ0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/dGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTp0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpfWlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QoZSl7cmV0dXJuIGUudG9VcHBlckNhc2UoKWluIGpvfWdldFBheXBhbEFtcHNTZGtPclRocm93KCl7aWYoIXRoaXMucGF5cGFsQXBtcyl0aHJvdyBuZXcgWHQ7cmV0dXJuIHRoaXMucGF5cGFsQXBtc319Y29uc3QgR2g9bm4oZT0+bmV3IFZoKGUsWW8oZSkscmEoKSxuZXcgQmEoe2NvbnRhaW5lclN0eWxlczpEaH0pKSxbe2dhdGV3YXk6XCJwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kc1wifV0pO2Z1bmN0aW9uIEhoKGUpe3JldHVybiEhZSYmKFwiYXV0aGVudGljYXRpb25TdGF0ZVwiaW4gZXx8XCJhZGRyZXNzZXNcImluIGV8fFwiaW5zdHJ1bWVudHNcImluIGUpfXZhciAkaD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBXaHtjb25zdHJ1Y3RvcihlLHQsbixpKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5wYXlwYWxDb21tZXJjZVNkaz1uLHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzPWl9aW5pdGlhbGl6ZShlKXtyZXR1cm4gJGgodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOnQscGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkczpuLHBheXBhbGNvbW1lcmNlOml9PWUscj1ufHxpLHtmb3JtOm8sb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3I6YX09cnx8e307aWYoIXQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFvKXRocm93IG5ldyBybignVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcy5mb3JtXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3RoaXMuaG9zdGVkRm9ybU9wdGlvbnM9byx0aGlzLmlzQ3JlZGl0Q2FyZEZvcm09cGMoby5maWVsZHMpLHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm09bWMoby5maWVsZHMpJiYhdGhpcy5oYXNVbmRlZmluZWRWYWx1ZXMoKSx5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QodCkseWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKHQsdm9pZCAwLCEwLCEwKSwodGhpcy5pc0NyZWRpdENhcmRGb3JtfHx0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSYmKHlpZWxkIHRoaXMuaW5pdGlhbGl6ZUZpZWxkcyhvLGEpKSx0aGlzLnNob3VsZEluaXRpYWxpemVQYXlQYWxGYXN0bGFuZSh0KSYmKHlpZWxkIHRoaXMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lT3JUaHJvdyh0KSl9KX1leGVjdXRlKGUsdCl7cmV0dXJuICRoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSkse21ldGhvZElkOnIscGF5bWVudERhdGE6b309bnx8e307aWYoIW58fCFyKXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTtpZih0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhPW8sdGhpcy5pc0NyZWRpdENhcmRGb3JtfHx0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKXlpZWxkIHRoaXMudmFsaWRhdGVIb3N0ZWRGb3JtT3JUaHJvdygpLHlpZWxkIHRoaXMuc3VibWl0SG9zdGVkRm9ybSgpO2Vsc2V7Y29uc3R7b3JkZXJJZDplfT15aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhcInBheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHNjaGVja291dFwiLHRoaXMuZ2V0SW5zdHJ1bWVudFBhcmFtcygpKTt0aGlzLnJldHVybmVkT3JkZXJJZD1lfWNvbnN0IGE9dGhpcy5wcmVwYXJlUGF5bWVudFBheWxvYWQocixvLHRoaXMucmV0dXJuZWRPcmRlcklkLHRoaXMucmV0dXJuZWRWYXVsdGVkVG9rZW4pO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihpLHQpLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KGEpfSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXt2YXIgZSx0LG4saTtyZXR1cm4gJGgodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCBudWxsPT09KGU9dGhpcy5jdnZGaWVsZCl8fHZvaWQgMD09PWU/dm9pZCAwOmUuY2xvc2UoKSx5aWVsZCBudWxsPT09KHQ9dGhpcy5leHBpcnlGaWVsZCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY2xvc2UoKSx5aWVsZCBudWxsPT09KG49dGhpcy5udW1iZXJGaWVsZCl8fHZvaWQgMD09PW4/dm9pZCAwOm4uY2xvc2UoKSx5aWVsZCBudWxsPT09KGk9dGhpcy5uYW1lRmllbGQpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmNsb3NlKCksUHJvbWlzZS5yZXNvbHZlKCl9KX1wcmVwYXJlUGF5bWVudFBheWxvYWQoZSx0LG4saSl7Y29uc3R7c2hvdWxkU2F2ZUluc3RydW1lbnQ6cj0hMSxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50Om89ITF9PVBkKHQpP3Q6e30sYT10JiZTZCh0KT90Lmluc3RydW1lbnRJZDp2b2lkIDAscz1IKHt2ZXJpZmljYXRpb25fbm9uY2U6aSx0b2tlbjphfSxUKTtyZXR1cm57bWV0aG9kSWQ6ZSxwYXltZW50RGF0YTp7c2hvdWxkU2F2ZUluc3RydW1lbnQ6cixzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50Om8saW5zdHJ1bWVudElkOmEsZm9ybWF0dGVkUGF5bG9hZDpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30saXx8YT97YmlncGF5X3Rva2VuOnN9Ont9KSxuP3tjYXJkX3dpdGhfb3JkZXI6e29yZGVyX2lkOm59fTp7fSl9fX1pbml0aWFsaXplRmllbGRzKGUsdCl7cmV0dXJuICRoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtmaWVsZHM6bixzdHlsZXM6aX09ZSxyPXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpLG89dGhpcy5nZXRFeGVjdXRlQ2FsbGJhY2sobiksYT1PYmplY3QuYXNzaWduKHtzdHlsZTp0aGlzLmdldElucHV0U3R5bGVzKGkpLG9uQXBwcm92ZTooe29yZGVySUQ6ZSx2YXVsdFNldHVwVG9rZW46dCxsaWFiaWxpdHlTaGlmdDpufSk9PntpZihuPT09eG8uTm98fG49PT14by5Vbmtub3duKXRocm93IG5ldyBFcnJvcjtyZXR1cm4gdGhpcy5oYW5kbGVBcHByb3ZlKHtvcmRlcklEOmUsdmF1bHRTZXR1cFRva2VuOnR9KX0sb25FcnJvcjooKT0+e3Rocm93IG5ldyBMaX0saW5wdXRFdmVudHM6e29uQ2hhbmdlOnQ9PnRoaXMub25DaGFuZ2VIYW5kbGVyKGUsdCksb25Gb2N1czp0PT50aGlzLm9uRm9jdXNIYW5kbGVyKGUsdCksb25CbHVyOnQ9PnRoaXMub25CbHVySGFuZGxlcihlLHQpLG9uSW5wdXRTdWJtaXRSZXF1ZXN0OnQ9PnRoaXMub25JbnB1dFN1Ym1pdFJlcXVlc3QoZSx0KX19LG8pO2lmKHRoaXMuY2FyZEZpZWxkcz15aWVsZCByLkNhcmRGaWVsZHMoYSksIXRoaXMuY2FyZEZpZWxkcy5pc0VsaWdpYmxlKCkpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7dHJ5e3RoaXMuc3R5bGl6ZUlucHV0Q29udGFpbmVycyhuKSxwYyhuKSYmKHlpZWxkIHRoaXMucmVuZGVyRmllbGRzKG4pKSxtYyhuKSYmKHlpZWxkIHRoaXMucmVuZGVyVmF1bHRlZEZpZWxkcyhuKSl9Y2F0Y2goZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdChlKX19KX1nZXRFeGVjdXRlQ2FsbGJhY2soZSl7cmV0dXJuIG1jKGUpP3RoaXMuY3JlYXRlVmF1bHRTZXR1cFRva2VuQ2FsbGJhY2soKTp0aGlzLmNyZWF0ZU9yZGVyQ2FsbGJhY2soKX1jcmVhdGVWYXVsdFNldHVwVG9rZW5DYWxsYmFjaygpe3JldHVybntjcmVhdGVWYXVsdFNldHVwVG9rZW46KCk9PiRoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtzZXR1cFRva2VuOmV9PSh5aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhcInBheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHNjaGVja291dFwiLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLmdldEluc3RydW1lbnRQYXJhbXMoKSkse3NldHVwVG9rZW46ITB9KSkpfHx7fTtyZXR1cm4gZX0pfX1jcmVhdGVPcmRlckNhbGxiYWNrKCl7cmV0dXJue2NyZWF0ZU9yZGVyOigpPT4kaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7b3JkZXJJZDplfT0oeWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlckNhcmRGaWVsZHMoXCJwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzY2hlY2tvdXRcIix0aGlzLmdldEluc3RydW1lbnRQYXJhbXMoKSkpfHx7fTtyZXR1cm4gZX0pfX1oYW5kbGVBcHByb3ZlKHtvcmRlcklEOmUsdmF1bHRTZXR1cFRva2VuOnR9KXtlJiYodGhpcy5yZXR1cm5lZE9yZGVySWQ9ZSksdCYmKHRoaXMucmV0dXJuZWRWYXVsdGVkVG9rZW49dCl9cmVuZGVyRmllbGRzKGUpe3ZhciB0LG4saSxyO3JldHVybiAkaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbz10aGlzLmdldENhcmRGaWVsZHNPclRocm93KCk7KG51bGw9PT0odD1lLmNhcmRDb2RlKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jb250YWluZXJJZCkmJih0aGlzLmN2dkZpZWxkPW8uQ1ZWRmllbGQoe3BsYWNlaG9sZGVyOlwiXCJ9KSx5aWVsZCB0aGlzLmN2dkZpZWxkLnJlbmRlcihgIyR7ZS5jYXJkQ29kZS5jb250YWluZXJJZH1gKSksKG51bGw9PT0obj1lLmNhcmRFeHBpcnkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNvbnRhaW5lcklkKSYmKHRoaXMuZXhwaXJ5RmllbGQ9by5FeHBpcnlGaWVsZCgpLHlpZWxkIHRoaXMuZXhwaXJ5RmllbGQucmVuZGVyKGAjJHtlLmNhcmRFeHBpcnkuY29udGFpbmVySWR9YCkpLChudWxsPT09KGk9ZS5jYXJkTmFtZSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuY29udGFpbmVySWQpJiYodGhpcy5uYW1lRmllbGQ9by5OYW1lRmllbGQoe3BsYWNlaG9sZGVyOlwiXCJ9KSx5aWVsZCB0aGlzLm5hbWVGaWVsZC5yZW5kZXIoYCMke2UuY2FyZE5hbWUuY29udGFpbmVySWR9YCkpLChudWxsPT09KHI9ZS5jYXJkTnVtYmVyKXx8dm9pZCAwPT09cj92b2lkIDA6ci5jb250YWluZXJJZCkmJih0aGlzLm51bWJlckZpZWxkPW8uTnVtYmVyRmllbGQoe3BsYWNlaG9sZGVyOlwiXCJ9KSx5aWVsZCB0aGlzLm51bWJlckZpZWxkLnJlbmRlcihgIyR7ZS5jYXJkTnVtYmVyLmNvbnRhaW5lcklkfWApKX0pfXJlbmRlclZhdWx0ZWRGaWVsZHMoZSl7dmFyIHQsbixpO3JldHVybiAkaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgcj10aGlzLmdldENhcmRGaWVsZHNPclRocm93KCk7KG51bGw9PT0odD1lLmNhcmRDb2RlVmVyaWZpY2F0aW9uKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jb250YWluZXJJZCkmJih0aGlzLmN2dkZpZWxkPXIuQ1ZWRmllbGQoe3BsYWNlaG9sZGVyOlwiXCJ9KSx5aWVsZCB0aGlzLmN2dkZpZWxkLnJlbmRlcihgIyR7ZS5jYXJkQ29kZVZlcmlmaWNhdGlvbi5jb250YWluZXJJZH1gKSksKG51bGw9PT0obj1lLmNhcmRFeHBpcnlWZXJpZmljYXRpb24pfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNvbnRhaW5lcklkKSYmKHRoaXMuZXhwaXJ5RmllbGQ9ci5FeHBpcnlGaWVsZCgpLHlpZWxkIHRoaXMuZXhwaXJ5RmllbGQucmVuZGVyKGAjJHtlLmNhcmRFeHBpcnlWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCkpLChudWxsPT09KGk9ZS5jYXJkTnVtYmVyVmVyaWZpY2F0aW9uKXx8dm9pZCAwPT09aT92b2lkIDA6aS5jb250YWluZXJJZCkmJih0aGlzLm51bWJlckZpZWxkPXIuTnVtYmVyRmllbGQoe3BsYWNlaG9sZGVyOlwiXCJ9KSx5aWVsZCB0aGlzLm51bWJlckZpZWxkLnJlbmRlcihgIyR7ZS5jYXJkTnVtYmVyVmVyaWZpY2F0aW9uLmNvbnRhaW5lcklkfWApKX0pfWdldEluc3RydW1lbnRQYXJhbXMoKXtpZighdGhpcy5leGVjdXRpb25QYXltZW50RGF0YSlyZXR1cm57fTtpZihQZCh0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhKSl7Y29uc3R7c2hvdWxkU2F2ZUluc3RydW1lbnQ6ZSxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OnR9PXRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGE7cmV0dXJue3Nob3VsZFNhdmVJbnN0cnVtZW50OmUsc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDp0fX1pZihTZCh0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhKSl7Y29uc3R7aW5zdHJ1bWVudElkOmV9PXRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGE7cmV0dXJue2luc3RydW1lbnRJZDplfX1yZXR1cm57fX1nZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZCh7ZW1pdHRlZEJ5OmV9KXtyZXR1cm57ZmllbGRUeXBlOnRoaXMubWFwRmllbGRUeXBlKGUpfX1zdWJtaXRIb3N0ZWRGb3JtKCl7cmV0dXJuICRoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBlPXRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKSx0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpLG49e2JpbGxpbmdBZGRyZXNzOntjb21wYW55OnQuY29tcGFueSxhZGRyZXNzTGluZTE6dC5hZGRyZXNzMSxhZGRyZXNzTGluZTI6dC5hZGRyZXNzMixhZG1pbkFyZWExOnQuc3RhdGVPclByb3ZpbmNlQ29kZSxhZG1pbkFyZWEyOnQuY2l0eSxwb3N0YWxDb2RlOnQucG9zdGFsQ29kZSxjb3VudHJ5Q29kZTp0LmNvdW50cnlDb2RlfX07dHJ5e3RoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0/eWllbGQgZS5zdWJtaXQoKTp5aWVsZCBlLnN1Ym1pdChuKX1jYXRjaChlKXt0aHJvdyBuZXcgTGkoXCJGYWlsZWQgYXV0aGVudGljYXRpb24uIFBsZWFzZSB0cnkgdG8gYXV0aG9yaXplIGFnYWluLlwiKX19KX12YWxpZGF0ZUhvc3RlZEZvcm1PclRocm93KCl7dmFyIGUsdDtyZXR1cm4gJGgodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49dGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpLGk9eWllbGQgbi5nZXRTdGF0ZSgpLnRoZW4oZT0+ZSkscj10aGlzLmdldFZhbGlkaXR5RGF0YShpKTtpZighci5pc1ZhbGlkKXRocm93IG51bGw9PT0odD1udWxsPT09KGU9dGhpcy5ob3N0ZWRGb3JtT3B0aW9ucyl8fHZvaWQgMD09PWU/dm9pZCAwOmUub25WYWxpZGF0ZSl8fHZvaWQgMD09PXR8fHQuY2FsbChlLHIpLG5ldyBLaSh0aGlzLm1hcFZhbGlkYXRpb25FcnJvcnMoci5lcnJvcnMpKX0pfWdldFZhbGlkaXR5RGF0YSh7ZmllbGRzOmV9KXtjb25zdCB0PU9iamVjdC5hc3NpZ24oe30sZSk7ZGVsZXRlIHQuY2FyZE5hbWVGaWVsZDtjb25zdCBuPU9iamVjdC5rZXlzKHQpO3JldHVybntpc1ZhbGlkOm4uZXZlcnkoZT0+e3ZhciBuO3JldHVybiBudWxsPT09KG49dFtlXSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uaXNWYWxpZH0pLGVycm9yczpuLnJlZHVjZSgoZSxuKT0+e3ZhciBpO2NvbnN0IHI9dGhpcy5tYXBGaWVsZFR5cGUobik7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7W3JdOihudWxsPT09KGk9dFtuXSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuaXNWYWxpZCk/dm9pZCAwOlt0aGlzLmdldEludmFsaWRFcnJvckJ5RmllbGRUeXBlKHIpXX0pfSx7fSl9fWdldEludmFsaWRFcnJvckJ5RmllbGRUeXBlKGUpe3N3aXRjaChlKXtjYXNlIGhjLkNhcmRDb2RlOmNhc2UgaGMuQ2FyZENvZGVWZXJpZmljYXRpb246cmV0dXJue2ZpZWxkVHlwZTplLG1lc3NhZ2U6XCJJbnZhbGlkIGNhcmQgY29kZVwiLHR5cGU6XCJpbnZhbGlkX2NhcmRfY29kZVwifTtjYXNlIGhjLkNhcmROdW1iZXI6Y2FzZSBoYy5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uOnJldHVybntmaWVsZFR5cGU6ZSxtZXNzYWdlOlwiSW52YWxpZCBjYXJkIG51bWJlclwiLHR5cGU6XCJpbnZhbGlkX2NhcmRfbnVtYmVyXCJ9O2Nhc2UgaGMuQ2FyZEV4cGlyeTpjYXNlIGhjLkNhcmRFeHBpcnlWZXJpZmljYXRpb246cmV0dXJue2ZpZWxkVHlwZTplLG1lc3NhZ2U6XCJJbnZhbGlkIGNhcmQgZXhwaXJ5XCIsdHlwZTpcImludmFsaWRfY2FyZF9leHBpcnlcIn07ZGVmYXVsdDpyZXR1cm57ZmllbGRUeXBlOmUsbWVzc2FnZTpcIkludmFsaWQgZmllbGRcIix0eXBlOlwiaW52YWxpZFwifX19bWFwVmFsaWRhdGlvbkVycm9ycyhlPXt9KXtjb25zdCB0PXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKG49Pnt2YXIgaSxyO3Rbbl09W3ttZXNzYWdlOihudWxsPT09KHI9bnVsbD09PShpPWVbbl0pfHx2b2lkIDA9PT1pP3ZvaWQgMDppWzBdKXx8dm9pZCAwPT09cj92b2lkIDA6ci5tZXNzYWdlKXx8XCJcIix0eXBlOm59XX0pLHR9bWFwRmllbGRUeXBlKGUpe3N3aXRjaChlKXtjYXNlXCJuYW1lXCI6cmV0dXJuIGhjLkNhcmROYW1lO2Nhc2VcImNhcmROdW1iZXJGaWVsZFwiOmNhc2VcIm51bWJlclwiOnJldHVybiB0aGlzLmlzQ3JlZGl0Q2FyZEZvcm0/aGMuQ2FyZE51bWJlcjpoYy5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uO2Nhc2VcImNhcmRFeHBpcnlGaWVsZFwiOmNhc2VcImV4cGlyeVwiOnJldHVybiB0aGlzLmlzQ3JlZGl0Q2FyZEZvcm0/aGMuQ2FyZEV4cGlyeTpoYy5DYXJkRXhwaXJ5VmVyaWZpY2F0aW9uO2Nhc2VcImNhcmRDdnZGaWVsZFwiOmNhc2VcImN2dlwiOnJldHVybiB0aGlzLmlzQ3JlZGl0Q2FyZEZvcm0/aGMuQ2FyZENvZGU6aGMuQ2FyZENvZGVWZXJpZmljYXRpb247ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGZpZWxkIHR5cGVcIil9fWdldENhcmRGaWVsZHNPclRocm93KCl7aWYoIXRoaXMuY2FyZEZpZWxkcyl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gdGhpcy5jYXJkRmllbGRzfWdldElucHV0U3R5bGVzKGUpe3ZhciB0LG4saTtjb25zdCByPXtcImZvbnQtc2l6ZVwiOihudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5kZWZhdWx0KXx8dm9pZCAwPT09dD92b2lkIDA6dC5mb250U2l6ZSl8fFwiMXJlbVwiLFwiZm9udC1mYW1pbHlcIjoobnVsbD09PShuPW51bGw9PWU/dm9pZCAwOmUuZGVmYXVsdCl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZm9udEZhbWlseSl8fFwiTW9udHNlcnJhdCwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZlwiLFwiZm9udC13ZWlnaHRcIjoobnVsbD09PShpPW51bGw9PWU/dm9pZCAwOmUuZGVmYXVsdCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZm9udFdlaWdodCl8fFwiNDAwXCIsb3V0bGluZTpcIm5vbmVcIixwYWRkaW5nOlwiOXB4IDEzcHhcIn0sbz1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse2NvbG9yOlwiIzMzMzMzM1wifSk7cmV0dXJue2lucHV0Om8sXCIuaW52YWxpZFwiOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSx7Y29sb3I6XCJyZWRcIn0pLFwiLnZhbGlkXCI6byxcIjpmb2N1c1wiOm99fXN0eWxpemVJbnB1dENvbnRhaW5lcnMoZSl7T2JqZWN0LnZhbHVlcyhlfHx7fSkuZm9yRWFjaChlPT57Y29uc3QgdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHsobnVsbD09ZT92b2lkIDA6ZS5jb250YWluZXJJZCl8fFwiXCJ9YCk7dCYmKHQuc3R5bGUucGFkZGluZz1cIjBweFwiLHQuc3R5bGUuYm94U2hhZG93PVwibm9uZVwiLHQuc3R5bGUuYm9yZGVyPVwibm9uZVwiLHQuc3R5bGUuYmFja2dyb3VuZD1cInRyYW5zcGFyZW50XCIsdC5zdHlsZS5tYXJnaW5Cb3R0b209XCIxMHB4XCIsdC5zdHlsZS5tYXJnaW5MZWZ0PVwiLTVweFwiKX0pfWhhc1VuZGVmaW5lZFZhbHVlcygpe3JldHVybiF0aGlzLmhvc3RlZEZvcm1PcHRpb25zfHxPYmplY3QudmFsdWVzKHRoaXMuaG9zdGVkRm9ybU9wdGlvbnMuZmllbGRzKS5zb21lKGU9PnZvaWQgMD09PWUpfW9uQ2hhbmdlSGFuZGxlcihlLHQpe3ZhciBuO251bGw9PT0obj1udWxsPT1lP3ZvaWQgMDplLm9uVmFsaWRhdGUpfHx2b2lkIDA9PT1ufHxuLmNhbGwoZSx0aGlzLmdldFZhbGlkaXR5RGF0YSh0KSl9b25Gb2N1c0hhbmRsZXIoZSx0KXt2YXIgbjtudWxsPT09KG49bnVsbD09ZT92b2lkIDA6ZS5vbkZvY3VzKXx8dm9pZCAwPT09bnx8bi5jYWxsKGUsdGhpcy5nZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZCh0KSl9b25CbHVySGFuZGxlcihlLHQpe3ZhciBuO251bGw9PT0obj1udWxsPT1lP3ZvaWQgMDplLm9uQmx1cil8fHZvaWQgMD09PW58fG4uY2FsbChlLHRoaXMuZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQodCkpfW9uSW5wdXRTdWJtaXRSZXF1ZXN0KGUsdCl7dmFyIG47bnVsbD09PShuPW51bGw9PWU/dm9pZCAwOmUub25FbnRlcil8fHZvaWQgMD09PW58fG4uY2FsbChlLHRoaXMuZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQodCkpfXNob3VsZEluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShlKXt2YXIgdCxuO2NvbnN0IGk9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkscj1pLmdldFBheW1lbnRNZXRob2RPclRocm93KGUpLG89aS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lcigpLGE9SGgobyk/bzp7fTtyZXR1cm4obnVsbD09PSh0PW51bGw9PXI/dm9pZCAwOnIuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5pc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkKSYmKG51bGw9PT0obj1udWxsPT1yP3ZvaWQgMDpyLmluaXRpYWxpemF0aW9uRGF0YSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uaXNQYXlQYWxDb21tZXJjZUFuYWx5dGljc1YyRW5hYmxlZCkmJiEobnVsbD09YT92b2lkIDA6YS5hdXRoZW50aWNhdGlvblN0YXRlKX1pbml0aWFsaXplUGF5UGFsRmFzdGxhbmVPclRocm93KGUpe3JldHVybiAkaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksbj10LmdldENhcnRPclRocm93KCksaT10LmdldFBheW1lbnRNZXRob2RPclRocm93KGUpLHtpbml0aWFsaXphdGlvbkRhdGE6cn09aTtpZighKG51bGw9PXI/dm9pZCAwOnIuY29ubmVjdENsaWVudFRva2VuKSlyZXR1cm47Y29uc3Qgbz15aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlU2RrLmdldFBheVBhbEZhc3RsYW5lU2RrKGksbi5jdXJyZW5jeS5jb2RlLG4uaWQpO3lpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShvLCEhKG51bGw9PXI/dm9pZCAwOnIuaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSkpfWNhdGNoKGUpe319KX19Y29uc3QgWWg9bm4oZT0+bmV3IFdoKGUsWW8oZSkscmEoKSxtYSgpKSxbe2lkOlwicGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkc1wifV0pO3ZhciBLaD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBKaHtjb25zdHJ1Y3RvcihlLHQsbixpPTNlMyxyPTNlNSl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZT10LHRoaXMubG9hZGluZ0luZGljYXRvcj1uLHRoaXMucG9sbGluZ0ludGVydmFsPWksdGhpcy5tYXhQb2xsaW5nSW50ZXJ2YWxUaW1lPXIsdGhpcy5wb2xsaW5nVGltZXI9MCx0aGlzLnN0b3BQb2xsaW5nPVZ9aW5pdGlhbGl6ZShlKXtyZXR1cm4gS2godGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e2dhdGV3YXlJZDp0LG1ldGhvZElkOm4scGF5cGFsY29tbWVyY2VyYXRlcGF5Oml9PWU7aWYoIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5nYXRld2F5SWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIWkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlcmF0ZXBheVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdHtsZWdhbFRleHRDb250YWluZXI6cixjb250YWluZXI6byxsb2FkaW5nQ29udGFpbmVySWQ6YX09aTtpZighbyl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFyKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5sZWdhbFRleHRDb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIWEpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmxvYWRpbmdDb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI9YTtjb25zdCBzPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KG4sdCkse21lcmNoYW50SWQ6ZH09cy5pbml0aWFsaXphdGlvbkRhdGF8fHt9O2lmKCFkKXRocm93IG5ldyBybihcIlVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBtZXJjaGFudElkIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5cIik7dGhpcy5wYXlwYWxjb21tZXJjZXJhdGVwYXk9aSx5aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobiksdGhpcy5jcmVhdGVGcmF1ZE5ldFNjcmlwdChkLG4sdCksdGhpcy5sb2FkRnJhdWRuZXRDb25maWcoKSx0aGlzLnJlbmRlckxlZ2FsVGV4dChyLG8pfSl9ZXhlY3V0ZShlLHQpe3JldHVybiBLaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpufT1lLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pLHtnZXRGaWVsZHNWYWx1ZXM6cn09dGhpcy5wYXlwYWxjb21tZXJjZXJhdGVwYXl8fHt9O2lmKCFuKXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTtpZighcnx8XCJmdW5jdGlvblwiIT10eXBlb2Ygcil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuZ2V0RmllbGRzVmFsdWVzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3RoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcighMCk7dHJ5e2NvbnN0IGU9eWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcInBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzY2hlY2tvdXRcIix7bWV0YWRhdGFJZDp0aGlzLmd1aWR9KSx7cmF0ZXBheUJpcnRoRGF0ZTpvLHJhdGVwYXlQaG9uZU51bWJlcjphLHJhdGVwYXlQaG9uZUNvdW50cnlDb2RlOnN9PXIoKSxkPXtmb3JtYXR0ZWRQYXlsb2FkOnt2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6bnVsbCxzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDpudWxsLGRldmljZV9pbmZvOm51bGwsbWV0aG9kX2lkOm4ubWV0aG9kSWQscmF0ZV9wYXk6e2JpcnRoX2RhdGU6dGhpcy5ub3JtYWxpemVEYXRlKG8pLHBob25lOntuYXRpb25hbF9udW1iZXI6YSxjb3VudHJ5X2NvZGU6cy5zcGxpdChcIitcIilbMV19fSxwYXlwYWxfYWNjb3VudDp7b3JkZXJfaWQ6ZX19fTtyZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGksdCkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe21ldGhvZElkOm4ubWV0aG9kSWQscGF5bWVudERhdGE6ZH0pLHlpZWxkIG5ldyBQcm9taXNlKChlLHQpPT57dGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShuLm1ldGhvZElkLGUsdCxuLmdhdGV3YXlJZCl9KX1jYXRjaChlKXtyZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlKSxuZXcgUHJvbWlzZSgoZSx0KT0+dCgpKX19KX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfWRlaW5pdGlhbGl6ZSgpe2NvbnN0e2xlZ2FsVGV4dENvbnRhaW5lcjplfT10aGlzLnBheXBhbGNvbW1lcmNlcmF0ZXBheXx8e30sdD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pZD1cImZyYXVkbmV0U2NyaXB0XCJdJylbMF0sbj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pZD1cImZyYXVkbmV0Q29uZmlnXCJdJylbMF07aWYodGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCksdC5yZW1vdmUoKSxuLnJlbW92ZSgpLGUpe2NvbnN0IHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSk7bnVsbD09dHx8dC5yZW1vdmUoKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9bm9ybWFsaXplRGF0ZShlKXtjb25zdCB0PXRoaXMuZm9ybWF0RGF0ZShlLmdldERhdGUoKSksbj10aGlzLmZvcm1hdERhdGUoZS5nZXRNb250aCgpKzEpO3JldHVybmAke2UuZ2V0RnVsbFllYXIoKX0tJHtufS0ke3R9YH1mb3JtYXREYXRlKGUpe3JldHVybmAke2U8MTA/MDpcIlwifSR7ZX1gfXJlbmRlckxlZ2FsVGV4dChlLHQpe2NvbnN0IG49ZSxpPXQuc3BsaXQoXCIjXCIpWzFdLHI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaSksbz1udWxsPT1yP3ZvaWQgMDpyLnBhcmVudE5vZGUsYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Euc3R5bGUubWFyZ2luQm90dG9tPVwiMjBweFwiLGEuc2V0QXR0cmlidXRlKFwiaWRcIixuKSxudWxsPT1vfHxvLnByZXBlbmQoYSk7Y29uc3Qgcz10aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKSxkPXMuTGVnYWwoe2Z1bmRpbmdTb3VyY2U6cy5MZWdhbC5GVU5ESU5HLlBBWV9VUE9OX0lOVk9JQ0V9KTtpZighZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobikpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJsZWdhbFRleHRDb250YWluZXJFbGVtZW50XCIgYXJndW1lbnQgaXMgbm90IGZvdW5kLicpO2QucmVuZGVyKGAjJHtufWApfWhhbmRsZUVycm9yKGUpe2NvbnN0e29uRXJyb3I6dH09dGhpcy5wYXlwYWxjb21tZXJjZXJhdGVwYXl8fHt9O3RoaXMucmVzZXRQb2xsaW5nTWVjaGFuaXNtKCksdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCExKSx0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0KGUpfWNyZWF0ZUZyYXVkTmV0U2NyaXB0KGUsdCxuKXtjb25zdCBpPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KHQsbikse3Rlc3RNb2RlOnJ9PWkuY29uZmlnLG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtvLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImFwcGxpY2F0aW9uL2pzb25cIiksby5zZXRBdHRyaWJ1dGUoXCJmbmNsc1wiLFwiZm5wYXJhbXMtZGVkZTdjYzUtMTVmZC00Yzc1LWE5ZjQtMzZjNDMwZWUzYTk5XCIpLG8uc2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiLFwiZnJhdWRuZXRTY3JpcHRcIiksdGhpcy5ndWlkPXRoaXMuZ2VuZXJhdGVHVUlEKCk7Y29uc3QgYT17Zjp0aGlzLmd1aWQsczpgJHtlfV9jaGVja291dC1wYWdlYCxzYW5kYm94OnJ9O28uaW5uZXJIVE1MPUpTT04uc3RyaW5naWZ5KGEpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobyl9Z2VuZXJhdGVHVUlEKCl7bGV0IGU9XCJcIjtmb3IobGV0IHQ9MDt0PDMyO3QrPTEpZSs9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiW01hdGguZmxvb3IoNjIqTWF0aC5yYW5kb20oKSldO3JldHVybiBlfWxvYWRGcmF1ZG5ldENvbmZpZygpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtlLnNldEF0dHJpYnV0ZShcImRhdGEtaWRcIixcImZyYXVkbmV0Q29uZmlnXCIpLGUuc3JjPVwiaHR0cHM6Ly9jLnBheXBhbC5jb20vZGEvci9mYi5qc1wiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSl9cmVpbml0aWFsaXplU3RyYXRlZ3koZSl7cmV0dXJuIEtoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmRlaW5pdGlhbGl6ZSgpLHlpZWxkIHRoaXMuaW5pdGlhbGl6ZShlKX0pfWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKGUsdCxuLGkpe3JldHVybiBLaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgbmV3IFByb21pc2UoKGUsdCk9Pntjb25zdCBuPXNldFRpbWVvdXQoZSx0aGlzLnBvbGxpbmdJbnRlcnZhbCk7dGhpcy5zdG9wUG9sbGluZz0oKT0+KGNsZWFyVGltZW91dChuKSx0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoITEpLHQoKSl9KTt0cnl7dGhpcy5wb2xsaW5nVGltZXIrPXRoaXMucG9sbGluZ0ludGVydmFsO2NvbnN0IHI9eWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRPcmRlclN0YXR1cyhcInBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzXCIse3BhcmFtczp7dXNlTWV0YWRhdGE6ITB9fSksbz1yPT09VW8uUG9sbGluZ1N0b3AsYT1yPT09VW8uUG9sbGluZ0Vycm9yO2lmKG8pcmV0dXJuIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpLHQoKTtpZihhKXJldHVybiBuKCk7aWYoIW8mJnRoaXMucG9sbGluZ1RpbWVyPHRoaXMubWF4UG9sbGluZ0ludGVydmFsVGltZSlyZXR1cm4geWllbGQgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShlLHQsbixpKTt5aWVsZCB0aGlzLnJlaW5pdGlhbGl6ZVN0cmF0ZWd5KHttZXRob2RJZDplLGdhdGV3YXlJZDppLHBheXBhbGNvbW1lcmNlcmF0ZXBheTp0aGlzLnBheXBhbGNvbW1lcmNlcmF0ZXBheX0pLHRoaXMuaGFuZGxlRXJyb3IobmV3IHNjKX1jYXRjaChlKXt0aGlzLmhhbmRsZUVycm9yKGUpLG4oKX19KX1kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCl7dGhpcy5zdG9wUG9sbGluZygpLHRoaXMucG9sbGluZ1RpbWVyPTB9cmVzZXRQb2xsaW5nTWVjaGFuaXNtKCl7dGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCl9dG9nZ2xlTG9hZGluZ0luZGljYXRvcihlKXtlJiZ0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/dGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTp0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpfX1jb25zdCBaaD1ubihlPT5uZXcgSmgoZSxZbyhlKSxuZXcgQmEoe2NvbnRhaW5lclN0eWxlczpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sRGgpLHtwb3NpdGlvbjpcImZpeGVkXCJ9KX0pKSxbe2dhdGV3YXk6XCJwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kc1wiLGlkOlwicmF0ZXBheVwifV0pO2Z1bmN0aW9uIFFoKGUpe3JldHVybiEhZSYmKFwiYXV0aGVudGljYXRpb25TdGF0ZVwiaW4gZXx8XCJhZGRyZXNzZXNcImluIGV8fFwiaW5zdHJ1bWVudHNcImluIGUpfXZhciBYaD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBlcHtjb25zdHJ1Y3RvcihlLHQsbixpKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnBheXBhbENvbW1lcmNlUmVxdWVzdFNlbmRlcj10LHRoaXMucGF5cGFsQ29tbWVyY2VTZGs9bix0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscz1pfWluaXRpYWxpemUoZSl7dmFyIHQsbjtyZXR1cm4gWGgodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOmkscGF5cGFsY29tbWVyY2VmYXN0bGFuZTpyfT1lO2lmKHRoaXMubWV0aG9kSWQ9aSx0aGlzLnBheXBhbGNvbW1lcmNlZmFzdGxhbmU9ciwhaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXIpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlZmFzdGxhbmVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXIub25Jbml0fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiByLm9uSW5pdCl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkluaXRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uJyk7aWYoIXIub25DaGFuZ2V8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHIub25DaGFuZ2UpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlZmFzdGxhbmUub25DaGFuZ2VcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uJyk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGkpO2NvbnN0IG89dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksYT1vLmdldENhcnRPclRocm93KCkscz1vLmdldFBheW1lbnRNZXRob2RPclRocm93KGkpLHtpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlOmQsaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkOmN9PXMuaW5pdGlhbGl6YXRpb25EYXRhfHx7fTt0aGlzLnRocmVlRFNWZXJpZmljYXRpb25NZXRob2Q9bnVsbD09PSh0PXMuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC50aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kLHRoaXMucGF5cGFsRmFzdGxhbmVTZGs9eWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZVNkay5nZXRQYXlQYWxGYXN0bGFuZVNkayhzLGEuY3VycmVuY3kuY29kZSxhLmlkKTtjb25zdCBsPWdhKGM/bnVsbD09PShuPW51bGw9PXM/dm9pZCAwOnMuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09bj92b2lkIDA6bi5mYXN0bGFuZVN0eWxlczp7fSxudWxsPT1yP3ZvaWQgMDpyLnN0eWxlcyk7eWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKHRoaXMucGF5cGFsRmFzdGxhbmVTZGssISFkLGwpLHRoaXMuc2hvdWxkUnVuQXV0aGVudGljYXRpb25GbG93KCkmJih5aWVsZCB0aGlzLnJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coaSkpLHlpZWxkIHRoaXMuaW5pdGlhbGl6ZVBheVBhbFBheW1lbnRDb21wb25lbnQoKSxyLm9uSW5pdChlPT50aGlzLnJlbmRlclBheVBhbFBheW1lbnRDb21wb25lbnQoZSkpLHIub25DaGFuZ2UoKCk9PnRoaXMuaGFuZGxlUGF5UGFsU3RvcmVkSW5zdHJ1bWVudENoYW5nZShpKSl9KX1leGVjdXRlKGUsdCl7cmV0dXJuIFhoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSk7aWYoIW4pdGhyb3cgbmV3IFlpKFtcInBheW1lbnRcIl0pO2NvbnN0e3BheW1lbnREYXRhOnIsbWV0aG9kSWQ6b309bixhPXImJlNkKHIpO3RyeXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KTtjb25zdCBlPWE/eWllbGQgdGhpcy5wcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChvLHIpOnlpZWxkIHRoaXMucHJlcGFyZVBheW1lbnRQYXlsb2FkKG8scik7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoZSksdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpfWNhdGNoKGUpe2lmKGZ1bmN0aW9uKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmXCJtZXNzYWdlXCJpbiBlJiZcInJlc3BvbnNlXCJpbiBlJiZcImJvZHlcImluIGUucmVzcG9uc2UmJlwibmFtZVwiaW4gZS5yZXNwb25zZS5ib2R5fShlKSYmXCJJTlZBTElEX1JFUVVFU1RcIj09PWUucmVzcG9uc2UuYm9keS5uYW1lKXtjb25zdCBlPXt0cmFuc2xhdGlvbktleTpcInBheW1lbnQuZXJyb3JzLmludmFsaWRfcmVxdWVzdF9lcnJvclwifTtyZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlKSxQcm9taXNlLnJlamVjdCgpfWlmKGUgaW5zdGFuY2VvZiBFcnJvciYmXCJGYXN0bGFuZUVycm9yXCIhPT1lLm5hbWUpdGhyb3cgZTtyZXR1cm4gUHJvbWlzZS5yZWplY3QoKX19KX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgX2QpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBYaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfSl9c2hvdWxkUnVuQXV0aGVudGljYXRpb25GbG93KCl7Y29uc3QgZT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx0PWUuZ2V0Q2FydE9yVGhyb3coKSxuPWUuZ2V0Q3VzdG9tZXJPclRocm93KCksaT1lLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCkscj1RaChpKT9pOnt9LG89dGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMuZ2V0U3RvcmFnZVNlc3Npb25JZCgpO3JldHVybiEoIW4uaXNHdWVzdHx8KG51bGw9PXI/dm9pZCAwOnIuYXV0aGVudGljYXRpb25TdGF0ZSk9PT11YS5DQU5DRUxFRHx8KG51bGw9PXI/dm9pZCAwOnIuYXV0aGVudGljYXRpb25TdGF0ZSl8fG8hPT10LmlkKX1ydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KGUpe3JldHVybiBYaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksbj10LmdldENhcnRPclRocm93KCksaT10LmdldEN1c3RvbWVyKCkscj10LmdldEJpbGxpbmdBZGRyZXNzKCksbz0obnVsbD09aT92b2lkIDA6aS5lbWFpbCl8fChudWxsPT1yP3ZvaWQgMDpyLmVtYWlsKXx8XCJcIix7Y3VzdG9tZXJDb250ZXh0SWQ6YX09eWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMubG9va3VwQ3VzdG9tZXJPclRocm93KG8pLHM9eWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMudHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coYSkse2F1dGhlbnRpY2F0aW9uU3RhdGU6ZCxhZGRyZXNzZXM6YyxpbnN0cnVtZW50czpsfT10aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5tYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhKGUscyk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHthdXRoZW50aWNhdGlvblN0YXRlOmQsYWRkcmVzc2VzOmMsaW5zdHJ1bWVudHM6bH0pLHMuYXV0aGVudGljYXRpb25TdGF0ZT09PXVhLkNBTkNFTEVEP3RoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLnJlbW92ZVN0b3JhZ2VTZXNzaW9uSWQoKTp0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy51cGRhdGVTdG9yYWdlU2Vzc2lvbklkKG4uaWQpfWNhdGNoKGUpe319KX1pbml0aWFsaXplUGF5UGFsUGF5bWVudENvbXBvbmVudCgpe3JldHVybiBYaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgZT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKSx0PWUucGhvbmUsbj1gJHtlLmZpcnN0TmFtZX0gJHtlLmxhc3ROYW1lfWAudHJpbSgpLGk9dGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCkscj17ZmllbGRzOk9iamVjdC5hc3NpZ24oe2NhcmRob2xkZXJOYW1lOntwcmVmaWxsOm4sZW5hYmxlZDohMH19LHQmJntwaG9uZU51bWJlcjp7cHJlZmlsbDp0fX0pfTt0aGlzLnBheXBhbENvbXBvbmVudE1ldGhvZHM9eWllbGQgaS5GYXN0bGFuZUNhcmRDb21wb25lbnQocil9KX1yZW5kZXJQYXlQYWxQYXltZW50Q29tcG9uZW50KGUpe2NvbnN0IHQ9dGhpcy5nZXRQYXlQYWxDb21wb25lbnRNZXRob2RzT3JUaHJvdygpO2lmKCFlKXRocm93IG5ldyBybignVW5hYmxlIHRvIHJlbmRlciBjYXJkIGNvbXBvbmVudCBiZWNhdXNlIFwiY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3QucmVuZGVyKGUpfWdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93KCl7aWYoIXRoaXMucGF5cGFsQ29tcG9uZW50TWV0aG9kcyl0aHJvdyBuZXcgWHQ7cmV0dXJuIHRoaXMucGF5cGFsQ29tcG9uZW50TWV0aG9kc31wcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChlLHQpe3JldHVybiBYaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7aW5zdHJ1bWVudElkOm59PXQsaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKSxyPXRoaXMuaXNQYXlwYWxDb21tZXJjZUZhc3RsYW5lVGhyZWVEU0F2YWlsYWJsZSgpJiZpLmNvbmZpZy5pczNkc0VuYWJsZWQ7cnx8KHlpZWxkIHRoaXMuY3JlYXRlT3JkZXIobikpO2NvbnN0IG89cj95aWVsZCB0aGlzLmdldDNEU05vbmNlKG4pOm47cmV0dXJue21ldGhvZElkOmUscGF5bWVudERhdGE6e2Zvcm1hdHRlZFBheWxvYWQ6e3BheXBhbF9mYXN0bGFuZV90b2tlbjp7b3JkZXJfaWQ6dGhpcy5vcmRlcklkLHRva2VuOm99fX19fSl9cHJlcGFyZVBheW1lbnRQYXlsb2FkKGUsdCl7cmV0dXJuIFhoKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGk9bi5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKSxyPW4uZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSksbz1gJHtpLmZpcnN0TmFtZX0gJHtpLmxhc3ROYW1lfWAudHJpbSgpLHtnZXRQYXltZW50VG9rZW46YX09dGhpcy5nZXRQYXlQYWxDb21wb25lbnRNZXRob2RzT3JUaHJvdygpLHtpZDpzfT15aWVsZCBhKHtuYW1lOntmdWxsTmFtZTpvfSxiaWxsaW5nQWRkcmVzczp0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5tYXBCY1RvUGF5UGFsQWRkcmVzcyhpKX0pLGQ9dGhpcy5pc1BheXBhbENvbW1lcmNlRmFzdGxhbmVUaHJlZURTQXZhaWxhYmxlKCkmJnIuY29uZmlnLmlzM2RzRW5hYmxlZDtkfHwoeWllbGQgdGhpcy5jcmVhdGVPcmRlcihzKSk7Y29uc3QgYz1kP3lpZWxkIHRoaXMuZ2V0M0RTTm9uY2Uocyk6cyx7c2hvdWxkU2F2ZUluc3RydW1lbnQ6bD0hMSxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OnU9ITF9PVBkKHQpP3Q6e307cmV0dXJue21ldGhvZElkOmUscGF5bWVudERhdGE6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtzaG91bGRTYXZlSW5zdHJ1bWVudDpsLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6dSxmb3JtYXR0ZWRQYXlsb2FkOntwYXlwYWxfZmFzdGxhbmVfdG9rZW46e29yZGVyX2lkOnRoaXMub3JkZXJJZCx0b2tlbjpjfX19KX19KX1jcmVhdGVPcmRlcihlKXtyZXR1cm4gWGgodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5pZDtpZih0aGlzLm1ldGhvZElkKXtjb25zdHtvcmRlcklkOm59PXlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyLmNyZWF0ZU9yZGVyKHRoaXMubWV0aG9kSWQse2NhcnRJZDp0LGZhc3RsYW5lVG9rZW46ZX0pO3RoaXMub3JkZXJJZD1ufX0pfWdldDNEU05vbmNlKGUpe3ZhciB0O3JldHVybiBYaCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxpPW4uZ2V0Q2FydE9yVGhyb3coKSxyPW4uZ2V0T3JkZXJPclRocm93KCksbz1uLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmxpbmtzLmNoZWNrb3V0TGluayxhPW51bGw9PT0odD10aGlzLnBheXBhbEZhc3RsYW5lU2RrKXx8dm9pZCAwPT09dD92b2lkIDA6dC5UaHJlZURvbWFpblNlY3VyZUNsaWVudDtpZighYSl0aHJvdyBuZXcgWHQ7Y29uc3Qgcz17YW1vdW50OnIub3JkZXJBbW91bnQudG9GaXhlZCgyKSxjdXJyZW5jeTppLmN1cnJlbmN5LmNvZGUsbm9uY2U6ZSx0aHJlZURTUmVxdWVzdGVkOlwiU0NBX0FMV0FZU1wiPT09dGhpcy50aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kLHRyYW5zYWN0aW9uQ29udGV4dDp7ZXhwZXJpZW5jZV9jb250ZXh0Ontsb2NhbGU6XCJlbi1VU1wiLHJldHVybl91cmw6byxjYW5jZWxfdXJsOm99fX07aWYoeWllbGQgYS5pc0VsaWdpYmxlKHMpKXtjb25zdHtsaWFiaWxpdHlTaGlmdDp0LGF1dGhlbnRpY2F0aW9uU3RhdGU6bixub25jZTppfT15aWVsZCBhLnNob3coKTtpZih0PT09eG8uTm98fHQ9PT14by5Vbmtub3duKXRocm93IG5ldyBCaTtpZih5aWVsZCB0aGlzLmNyZWF0ZU9yZGVyKGUpLG49PT1hYS5TdWNjZWVkZWQpcmV0dXJuIGk7aWYobj09PWFhLkVycm9yZWQpdGhyb3cgbmV3IEJpO2lmKG49PT1hYS5DYW5jZWxsZWQpdGhyb3cgY29uc29sZS5lcnJvcihcIjNEUyBjaGVjayB3YXMgY2FuY2VsZWRcIiksbmV3IEJpfXJldHVybiBlfSl9aGFuZGxlUGF5UGFsU3RvcmVkSW5zdHJ1bWVudENoYW5nZShlKXtyZXR1cm4gWGgodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCkse3NlbGVjdGlvbkNoYW5nZWQ6bixzZWxlY3RlZENhcmQ6aX09eWllbGQgdC5wcm9maWxlLnNob3dDYXJkU2VsZWN0b3IoKTtpZihuKXtjb25zdCB0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCksbj1RaCh0KT90Ont9LHI9dGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMubWFwUGF5UGFsVG9CY0luc3RydW1lbnQoZSxpKVswXTtyZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxuKSx7aW5zdHJ1bWVudHM6W3JdfSkpLHJ9fSl9aXNQYXlwYWxDb21tZXJjZUZhc3RsYW5lVGhyZWVEU0F2YWlsYWJsZSgpe3JldHVybiBjbih0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzLFwiUFJPSkVDVC03MDgwLnBheXBhbGNvbW1lcmNlX2Zhc3RsYW5lX3RocmVlX2RzXCIpfWhhbmRsZUVycm9yKGUpe3ZhciB0OyhudWxsPT09KHQ9dGhpcy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lKXx8dm9pZCAwPT09dD92b2lkIDA6dC5vbkVycm9yKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uRXJyb3ImJnRoaXMucGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkVycm9yKGUpfX1jb25zdCB0cD1ubihlPT57Y29uc3R7Z2V0SG9zdDp0fT1lLmdldFN0YXRlKCk7cmV0dXJuIG5ldyBlcChlLG5ldyBIbyhuKHtob3N0OnQoKX0pKSxyYSgpLG1hKCkpfSxbe2lkOlwicGF5cGFsY29tbWVyY2VhY2NlbGVyYXRlZGNoZWNrb3V0XCJ9XSk7dmFyIG5wPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIGlwIGV4dGVuZHMgRmx7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnRocmVlRFNlY3VyZUZsb3c9dH1pbml0aWFsaXplKGUpe2NvbnN0IHQ9T2JqZWN0LmNyZWF0ZShudWxsLHtpbml0aWFsaXplOntnZXQ6KCk9PnN1cGVyLmluaXRpYWxpemV9fSk7cmV0dXJuIG5wKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0LmluaXRpYWxpemUuY2FsbCh0aGlzLGUpO2NvbnN0IG49dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZS5tZXRob2RJZCk7bi5jb25maWcuaXMzZHNFbmFibGVkJiYoeWllbGQgdGhpcy50aHJlZURTZWN1cmVGbG93LnByZXBhcmUobikpfSl9ZXhlY3V0ZShlLHQpe2NvbnN0IG49T2JqZWN0LmNyZWF0ZShudWxsLHtleGVjdXRlOntnZXQ6KCk9PnN1cGVyLmV4ZWN1dGV9fSk7cmV0dXJuIG5wKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50OnttZXRob2RJZDppPVwiXCJ9PXt9fT1lLHI9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7cmV0dXJuIHIuZ2V0UGF5bWVudFN0YXR1cygpPT09SGMuQUNLTk9XTEVER0U/KHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3BheW1lbnQ6e21ldGhvZElkOml9fSksdCksUHJvbWlzZS5yZXNvbHZlKCkpOnIuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coaSkuY29uZmlnLmlzM2RzRW5hYmxlZD90aGlzLnRocmVlRFNlY3VyZUZsb3cuc3RhcnQobi5leGVjdXRlLmJpbmQodGhpcyksZSx0LHRoaXMuX2hvc3RlZEZvcm0pOm4uZXhlY3V0ZS5jYWxsKHRoaXMsZSx0KX0pfX1jb25zdCBycD1ubihlPT5uZXcgaXAoZSxuZXcgcnUoZSxuZXcgcHUobmV3IG11KGEoKSkpKSksW3tpZDpcInBheXBhbFwifV0pO2NsYXNzIG9wIGV4dGVuZHMgRmx7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLl9mb3JtUG9zdGVyPXR9ZXhlY3V0ZShlLHQpe2NvbnN0e3BheW1lbnQ6bn09ZTtpZighbil0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtjb25zdHtwYXltZW50RGF0YTppfT1uO2lmKCFpKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudCk7aWYodGhpcy5faXNUaHJlZURTVHdvRXhwZXJpbWVudE9uKCkpe2NvbnN0IHQ9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGkpLHticm93c2VyX2luZm86RG8oKX0pO2UucGF5bWVudCYmKGUucGF5bWVudC5wYXltZW50RGF0YT10KX1yZXR1cm4gc3VwZXIuZXhlY3V0ZShlLHQpLmNhdGNoKGU9PlhyKGUpJiZaKGUuYm9keS5lcnJvcnMse2NvZGU6XCJ0aHJlZV9kX3NlY3VyZV9yZXF1aXJlZFwifSk/bmV3IFByb21pc2UoKCk9PntsZXQgdDt0PXRoaXMuX2lzVGhyZWVEU1R3b0V4cGVyaW1lbnRPbigpJiYhZS5ib2R5LnRocmVlX2RzX3Jlc3VsdC5tZXJjaGFudF9kYXRhP3tjcmVxOmUuYm9keS50aHJlZV9kc19yZXN1bHQucGF5ZXJfYXV0aF9yZXF1ZXN0fTp7UGFSZXE6ZS5ib2R5LnRocmVlX2RzX3Jlc3VsdC5wYXllcl9hdXRoX3JlcXVlc3QsVGVybVVybDplLmJvZHkudGhyZWVfZHNfcmVzdWx0LmNhbGxiYWNrX3VybCxNRDplLmJvZHkudGhyZWVfZHNfcmVzdWx0Lm1lcmNoYW50X2RhdGF9LHRoaXMuX2Zvcm1Qb3N0ZXIucG9zdEZvcm0oZS5ib2R5LnRocmVlX2RzX3Jlc3VsdC5hY3NfdXJsLHQsdm9pZCAwLFwiX3RvcFwiKX0pOlByb21pc2UucmVqZWN0KGUpKX1maW5hbGl6ZShlKXtjb25zdCB0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO3JldHVybiB0LmdldE9yZGVyKCkmJnQuZ2V0UGF5bWVudFN0YXR1cygpPT09SGMuRklOQUxJWkUmJnRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5maW5hbGl6ZU9yZGVyKGUpLHN1cGVyLmZpbmFsaXplKCl9X2lzVGhyZWVEU1R3b0V4cGVyaW1lbnRPbigpe3JldHVybiEwPT09dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlc1tcIklOVC00OTk0Lk9wYXlvXzNEUzJcIl19fWNvbnN0IGFwPW5uKGU9Pm5ldyBvcChlLEVlKCkpLFt7aWQ6XCJzYWdlcGF5XCJ9XSk7Y2xhc3Mgc3AgZXh0ZW5kcyBJdXtyZWRpcmVjdFVybChlKXt3aW5kb3cubG9jYXRpb24ucmVwbGFjZShlKX19Y29uc3QgZHA9bm4oZT0+bmV3IHNwKEVlKCksZSksW3tpZDpcInNlenpsZVwifV0pO3ZhciBjcDshZnVuY3Rpb24oZSl7ZS5DSEFSR0U9XCJDSEFSR0VcIixlLlNUT1JFPVwiU1RPUkVcIn0oY3B8fChjcD17fSkpO3ZhciBscD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyB1cHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX3NjcmlwdExvYWRlcj1lLHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9dH1pbml0aWFsaXplKHt0ZXN0TW9kZTplLGFwcGxpY2F0aW9uSWQ6dCxsb2NhdGlvbklkOm59KXtyZXR1cm4gbHAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IGk9eWllbGQgdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWQoZSk7dGhpcy5fcGF5bWVudHM9aS5wYXltZW50cyh0LG4pfSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIGxwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0aGlzLl9mb3JtVmFsaWRhdGlvblN1YnNjcmlwdGlvbiYmdGhpcy5fZm9ybVZhbGlkYXRpb25TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKSx0aGlzLl9jYXJkJiYoeWllbGQgdGhpcy5fY2FyZC5kZXN0cm95KCkpLHRoaXMuX2Zvcm1WYWxpZGF0aW9uU3Vic2NyaXB0aW9uPXZvaWQgMCx0aGlzLl9jYXJkPXZvaWQgMCx0aGlzLl9wYXltZW50cz12b2lkIDB9KX1pbml0aWFsaXplQ2FyZCh7Y29udGFpbmVySWQ6ZSxzdHlsZTp0LG9uVmFsaWRhdGlvbkNoYW5nZTpufSl7cmV0dXJuIGxwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwb3N0YWxDb2RlOml9PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRCaWxsaW5nQWRkcmVzcygpfHx7fTt0aGlzLl9jYXJkPXlpZWxkIHRoaXMuX2dldFBheW1lbnRzKCkuY2FyZCgpLHlpZWxkIHRoaXMuX2NhcmQuYXR0YWNoKGAjJHtlfWApO3RyeXt5aWVsZCB0aGlzLl9jYXJkLmNvbmZpZ3VyZSh7cG9zdGFsQ29kZTppLHN0eWxlOnR9KX1jYXRjaChlKXt9biYmKHRoaXMuX2Zvcm1WYWxpZGF0aW9uU3Vic2NyaXB0aW9uPXRoaXMuX3N1YnNjcmliZVRvRm9ybVZhbGlkYXRpb24odGhpcy5fY2FyZCxuKSl9KX10b2tlbml6ZSgpe3JldHVybiBscCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgZT15aWVsZCB0aGlzLl9nZXRDYXJkKCkudG9rZW5pemUoKTtpZihcIk9LXCIhPT1lLnN0YXR1c3x8IWUudG9rZW4pe2xldCB0PWBUb2tlbml6YXRpb24gZmFpbGVkIHdpdGggc3RhdHVzOiAke2Uuc3RhdHVzfWA7dGhyb3cgZS5lcnJvcnMmJih0Kz1gIGFuZCBlcnJvcnM6ICR7SlNPTi5zdHJpbmdpZnkoZS5lcnJvcnMpfWApLG5ldyBRdShcInBheW1lbnQuZXJyb3JzLmNhcmRfZXJyb3JcIixcIlNxdWFyZVYyVG9rZW5pemF0aW9uRXJyb3JcIix0KX1yZXR1cm4gZS50b2tlbn0pfXZlcmlmeUJ1eWVyKGUsdCl7cmV0dXJuIGxwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdD09PWNwLkNIQVJHRT90aGlzLl9jaGFyZ2VWZXJpZnlCdXllcihlKTp0aGlzLl9zdG9yZVZlcmlmeUJ1eWVyKGUpfSl9X2dldFBheW1lbnRzKCl7cmV0dXJuIHF0KHRoaXMuX3BheW1lbnRzLCgpPT5uZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKSl9X3N1YnNjcmliZVRvRm9ybVZhbGlkYXRpb24oZSx0KXtjb25zdCBuPVtcImNhcmROdW1iZXJcIixcImN2dlwiXSxpPW5ldyBTZXQobikscj1bXCJmb2N1c0NsYXNzQWRkZWRcIixcImZvY3VzQ2xhc3NSZW1vdmVkXCIsXCJlcnJvckNsYXNzQWRkZWRcIixcImVycm9yQ2xhc3NSZW1vdmVkXCIsXCJjYXJkQnJhbmRDaGFuZ2VkXCIsXCJwb3N0YWxDb2RlQ2hhbmdlZFwiXS5tYXAodD0+dWUoZSx0KSk7cmV0dXJuIGhlKC4uLnIpLnBpcGUoX2UoZT0+e2NvbnN0e2RldGFpbDp7ZmllbGQ6dCxjdXJyZW50U3RhdGU6e2lzQ29tcGxldGVseVZhbGlkOnJ9fX09ZTtyZXR1cm4gbi5pbmNsdWRlcyh0KSYmaVtyP1wiZGVsZXRlXCI6XCJhZGRcIl0odCksMD09PWkuc2l6ZX0pLGZlKCkpLnN1YnNjcmliZSh0KX1fZ2V0Q2FyZCgpe3JldHVybiBxdCh0aGlzLl9jYXJkLCgpPT5uZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKSl9X21hcFRvU3F1YXJlQmlsbGluZ0NvbnRhY3Qoe2ZpcnN0TmFtZTplLGxhc3ROYW1lOnQsYWRkcmVzczE6bixhZGRyZXNzMjppLGNpdHk6cixzdGF0ZU9yUHJvdmluY2VDb2RlOm8scG9zdGFsQ29kZTphLGNvdW50cnlDb2RlOnMsZW1haWw6ZCxwaG9uZTpjfSl7cmV0dXJue2dpdmVuTmFtZTplLGZhbWlseU5hbWU6dCxhZGRyZXNzTGluZXM6W24saV0sY2l0eTpyLHN0YXRlOm8scG9zdGFsQ29kZTphLGNvdW50cnlDb2RlOnMsZW1haWw6ZCxwaG9uZTpjfX1fY2hhcmdlVmVyaWZ5QnV5ZXIoZSl7cmV0dXJuIGxwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtnZXRDaGVja291dE9yVGhyb3c6dCxnZXRCaWxsaW5nQWRkcmVzc09yVGhyb3c6bn09dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHtvdXRzdGFuZGluZ0JhbGFuY2U6aSxjYXJ0OnJ9PXQoKSxvPXthbW91bnQ6aS50b1N0cmluZygpLGJpbGxpbmdDb250YWN0OnRoaXMuX21hcFRvU3F1YXJlQmlsbGluZ0NvbnRhY3QobigpKSxjdXJyZW5jeUNvZGU6ci5jdXJyZW5jeS5jb2RlLGludGVudDpjcC5DSEFSR0V9LGE9eWllbGQgdGhpcy5fZ2V0UGF5bWVudHMoKS52ZXJpZnlCdXllcihlLG8pO3JldHVybiBhP2EudG9rZW46XCJcIn0pfV9zdG9yZVZlcmlmeUJ1eWVyKGUpe3JldHVybiBscCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7Z2V0QmlsbGluZ0FkZHJlc3NPclRocm93OnR9PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxuPXtiaWxsaW5nQ29udGFjdDp0aGlzLl9tYXBUb1NxdWFyZUJpbGxpbmdDb250YWN0KHQoKSksaW50ZW50OmNwLlNUT1JFfSxpPXlpZWxkIHRoaXMuX2dldFBheW1lbnRzKCkudmVyaWZ5QnV5ZXIoZSxuKTtyZXR1cm4gaT9pLnRva2VuOlwiXCJ9KX19dmFyIGhwPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIHBwe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuX3NxdWFyZVYyUGF5bWVudFByb2Nlc3Nvcj10fWluaXRpYWxpemUoZSl7dmFyIHQ7cmV0dXJuIGhwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighKG51bGw9PT0odD1udWxsPT1lP3ZvaWQgMDplLnNxdWFyZXYyKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jb250YWluZXJJZCkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwiY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7Y29uc3R7bWV0aG9kSWQ6bixzcXVhcmV2MjppfT1lLHtjb25maWc6e3Rlc3RNb2RlOnJ9LGluaXRpYWxpemF0aW9uRGF0YTpvfT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobikse2FwcGxpY2F0aW9uSWQ6YSxsb2NhdGlvbklkOnN9PW98fHt9O2lmKCFhKXRocm93IG5ldyBCaTt5aWVsZCB0aGlzLl9zcXVhcmVWMlBheW1lbnRQcm9jZXNzb3IuaW5pdGlhbGl6ZSh7YXBwbGljYXRpb25JZDphLGxvY2F0aW9uSWQ6cyx0ZXN0TW9kZTpyfSkseWllbGQgdGhpcy5fc3F1YXJlVjJQYXltZW50UHJvY2Vzc29yLmluaXRpYWxpemVDYXJkKGkpfSl9ZXhlY3V0ZSh7cGF5bWVudDplfSl7cmV0dXJuIGhwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighZSl0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiXSk7Y29uc3R7bWV0aG9kSWQ6dCxwYXltZW50RGF0YTpufT1lLHtzaG91bGRTYXZlSW5zdHJ1bWVudDppLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6cn09UGQobik/bjp7c2hvdWxkU2F2ZUluc3RydW1lbnQ6ITEsc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDohMX07eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcigpO2NvbnN0IG89biYmU2Qobik/eWllbGQgdGhpcy5fZ2V0VmF1bHRlZEluc3RydW1lbnRQYXlsb2FkKHQsbik6eWllbGQgdGhpcy5fZ2V0Q2FyZFBheWxvYWQodCxpKTt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtwYXltZW50RGF0YTp7Zm9ybWF0dGVkUGF5bG9hZDpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbykse3ZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDppfHwhMSxzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDpyfHwhMX0pfX0pKX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBfZCl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIHRoaXMuX3NxdWFyZVYyUGF5bWVudFByb2Nlc3Nvci5kZWluaXRpYWxpemUoKX1zaG91bGRWZXJpZnkoKXtjb25zdHtmZWF0dXJlczplfT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncztyZXR1cm4gZVtcIlBST0pFQ1QtMzgyOC5hZGRfM2RzX3N1cHBvcnRfb25fc3F1YXJldjJcIl19X2dldENhcmRQYXlsb2FkKGUsdCl7cmV0dXJuIGhwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtnZXRQYXltZW50TWV0aG9kT3JUaHJvdzpufT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse2luaXRpYWxpemF0aW9uRGF0YTppfT1uKGUpLHI9eWllbGQgdGhpcy5fc3F1YXJlVjJQYXltZW50UHJvY2Vzc29yLnRva2VuaXplKCk7aWYoaSYmXCJpc1NxdWFyZVYyQXBpVjJFbmFibGVkXCJpbiBpPyFpLmlzU3F1YXJlVjJBcGlWMkVuYWJsZWQ6IXRoaXMuc2hvdWxkVmVyaWZ5KCkpcmV0dXJue2NyZWRpdF9jYXJkX3Rva2VuOnt0b2tlbjpyfX07bGV0IG89e25vbmNlOnIsdG9rZW46eWllbGQgdGhpcy5fc3F1YXJlVjJQYXltZW50UHJvY2Vzc29yLnZlcmlmeUJ1eWVyKHIsY3AuQ0hBUkdFKX07aWYodCl7Y29uc3QgZT15aWVsZCB0aGlzLl9zcXVhcmVWMlBheW1lbnRQcm9jZXNzb3IudG9rZW5pemUoKTtvPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxvKSx7c3RvcmVfY2FyZF9ub25jZTplLHN0b3JlX2NhcmRfdG9rZW46eWllbGQgdGhpcy5fc3F1YXJlVjJQYXltZW50UHJvY2Vzc29yLnZlcmlmeUJ1eWVyKGUsY3AuU1RPUkUpfSl9cmV0dXJue2NyZWRpdF9jYXJkX3Rva2VuOnt0b2tlbjpKU09OLnN0cmluZ2lmeShvKX19fSl9X2dldFZhdWx0ZWRJbnN0cnVtZW50UGF5bG9hZChlLHQpe3JldHVybiBocCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7Z2V0UGF5bWVudE1ldGhvZE9yVGhyb3c6bn09dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHtpbml0aWFsaXphdGlvbkRhdGE6aX09bihlKSx7aW5zdHJ1bWVudElkOnJ9PXQsbz0oaSYmXCJpc1NxdWFyZVYyQXBpVjJFbmFibGVkXCJpbiBpP2kuaXNTcXVhcmVWMkFwaVYyRW5hYmxlZDp0aGlzLnNob3VsZFZlcmlmeSgpKT95aWVsZCB0aGlzLl9zcXVhcmVWMlBheW1lbnRQcm9jZXNzb3IudmVyaWZ5QnV5ZXIoeWllbGQgdGhpcy5fZ2V0U3F1YXJlQ2FyZElkT3JUaHJvdyhlLHIpLGNwLkNIQVJHRSk6dm9pZCAwO3JldHVybntiaWdwYXlfdG9rZW46T2JqZWN0LmFzc2lnbih7dG9rZW46cn0sbyYme3RocmVlX2Rfc2VjdXJlOnt0b2tlbjpvfX0pfX0pfV9nZXRTcXVhcmVDYXJkSWRPclRocm93KGUsdCl7cmV0dXJuIGhwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoZSx7cGFyYW1zOnttZXRob2Q6ZSxiaWdwYXlUb2tlbjp0fX0pLHtpbml0aWFsaXphdGlvbkRhdGE6aX09bi5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKSx7Y2FyZElkOnJ9PWl8fHt9O2lmKCFyKXRocm93IG5ldyBZaShbXCJjYXJkSWRcIl0pO3JldHVybiByfSl9fXZhciBtcDshZnVuY3Rpb24oZSl7ZS5MSVZFPVwiaHR0cHM6Ly93ZWIuc3F1YXJlY2RuLmNvbS92MS9zcXVhcmUuanNcIixlLlNBTkRCT1g9XCJodHRwczovL3NhbmRib3gud2ViLnNxdWFyZWNkbi5jb20vdjEvc3F1YXJlLmpzXCJ9KG1wfHwobXA9e30pKTtjbGFzcyB5cHtjb25zdHJ1Y3RvcihlKXt0aGlzLl9zY3JpcHRMb2FkZXI9ZX1sb2FkKGU9ITEpe3JldHVybiB0PXRoaXMsbj12b2lkIDAscj1mdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoZT9tcC5TQU5EQk9YOm1wLkxJVkUpLGZ1bmN0aW9uKGUpe2lmKCFmdW5jdGlvbihlKXtyZXR1cm5cIlNxdWFyZVwiaW4gZX0oZSkpdGhyb3cgbmV3IFh0fSh3aW5kb3cpLHdpbmRvdy5TcXVhcmV9LG5ldygoaT12b2lkIDApfHwoaT1Qcm9taXNlKSkoZnVuY3Rpb24oZSxvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKHIubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChyLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIGk/bjpuZXcgaShmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChyPXIuYXBwbHkodCxufHxbXSkpLm5leHQoKSl9KTt2YXIgdCxuLGkscn19Y29uc3QgZ3A9bm4oZT0+bmV3IHBwKGUsbmV3IHVwKG5ldyB5cChhKCkpLGUpKSxbe2lkOlwic3F1YXJldjJcIn1dKTtmdW5jdGlvbiB2cChlKXtyZXR1cm4gbnVsbCE9PWUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImNhcmROdW1iZXJFbGVtZW50T3B0aW9uc1wiaW4gZSYmXCJjYXJkQ3ZjRWxlbWVudE9wdGlvbnNcImluIGUmJlwiY2FyZEV4cGlyeUVsZW1lbnRPcHRpb25zXCJpbiBlJiZ2b2lkIDAhPT1lLmNhcmROdW1iZXJFbGVtZW50T3B0aW9ucyYmdm9pZCAwIT09ZS5jYXJkQ3ZjRWxlbWVudE9wdGlvbnMmJnZvaWQgMCE9PWUuY2FyZEV4cGlyeUVsZW1lbnRPcHRpb25zfXZhciBmcCxTcCxfcCx3cDshZnVuY3Rpb24oZSl7ZS5Tb2xpZD1cInNvbGlkXCIsZS5EZWZhdWx0PVwiZGVmYXVsdFwifShmcHx8KGZwPXt9KSksZnVuY3Rpb24oZSl7ZS5BbGlwYXk9XCJhbGlwYXlcIixlLkNhcmRDdmM9XCJjYXJkQ3ZjXCIsZS5DYXJkRXhwaXJ5PVwiY2FyZEV4cGlyeVwiLGUuQ2FyZE51bWJlcj1cImNhcmROdW1iZXJcIixlLkNyZWRpdENhcmQ9XCJjYXJkXCIsZS5JREVBTD1cImlkZWFsQmFua1wiLGUuU2VwYT1cImliYW5cIn0oU3B8fChTcD17fSkpLGZ1bmN0aW9uKGUpe2UuQWxpcGF5PVwiYWxpcGF5XCIsZS5DcmVkaXRDYXJkPVwiY2FyZFwiLGUuSURFQUw9XCJpZGVhbFwiLGUuU2VwYT1cInNlcGFfZGViaXRcIn0oX3B8fChfcD17fSkpLGZ1bmN0aW9uKGUpe2UuQXV0aEZhaWx1cmU9XCJhdXRoX2ZhaWx1cmVcIn0od3B8fCh3cD17fSkpO2NsYXNzIENwIGV4dGVuZHMgQnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZT09PXdwLkF1dGhGYWlsdXJlP1wiVXNlciBkaWQgbm90IGF1dGhlbnRpY2F0ZVwiOlwiVGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHByb2Nlc3NpbmcgeW91ciBwYXltZW50LiBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3QgdXMuXCIpLHRoaXMudHlwZT1cInN0cmlwZXYzX2Vycm9yXCIsdGhpcy5zdWJ0eXBlPWV9fXZhciBJcD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjb25zdCBicD1bU3AuQWxpcGF5LFNwLklERUFMXTtjbGFzcyBQcHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuc2NyaXB0TG9hZGVyPXR9aW5pdGlhbGl6ZShlKXtyZXR1cm4gSXAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3N0cmlwZXYzOnQsbWV0aG9kSWQ6bixnYXRld2F5SWQ6aX09ZTtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcImdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt0aGlzLmluaXRpYWxpemVPcHRpb25zPXQsdGhpcy5pc0RlaW5pdGlhbGl6ZT0hMTtjb25zdCByPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KG4pLHtpbml0aWFsaXphdGlvbkRhdGE6e3N0cmlwZVB1Ymxpc2hhYmxlS2V5Om8sc3RyaXBlQ29ubmVjdGVkQWNjb3VudDphLHVzZUluZGl2aWR1YWxDYXJkRmllbGRzOnMsYWxsb3dSZWRpc3BsYXlGb3JTdG9yZWRJbnN0cnVtZW50czpkfX09cjt0aGlzLl9hbGxvd1JlZGlzcGxheUZvclN0b3JlZEluc3RydW1lbnRzPWQ7Y29uc3QgYz10aGlzLmdldEluaXRpYWxpemVPcHRpb25zKCkuZm9ybTt0aGlzLnVzZUluZGl2aWR1YWxDYXJkRmllbGRzPXMsdGhpcy5zdHJpcGVWM0NsaWVudD15aWVsZCB0aGlzLmxvYWRTdHJpcGVKcyhvLGEpLHRoaXMuaXNDcmVkaXRDYXJkKG4pJiZ0aGlzLnNob3VsZFNob3dUU1ZIb3N0ZWRGb3JtKG4saSkmJmM/dGhpcy5ob3N0ZWRGb3JtPXlpZWxkIHRoaXMubW91bnRDYXJkVmVyaWZpY2F0aW9uRmllbGRzKGMpOnRoaXMuc3RyaXBlRWxlbWVudD15aWVsZCB0aGlzLm1vdW50Q2FyZEZpZWxkcyhuKX0pfWV4ZWN1dGUoZSx0KXt2YXIgbixpO3JldHVybiBJcCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDpyfT1lLG89ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pO2xldCBhLHM7aWYoIXJ8fCFyLnBheW1lbnREYXRhKXRocm93IG5ldyBZaShbXCJwYXltZW50LnBheW1lbnREYXRhXCJdKTtjb25zdHtwYXltZW50RGF0YTpkLGdhdGV3YXlJZDpjLG1ldGhvZElkOmx9PXIse3Nob3VsZFNhdmVJbnN0cnVtZW50OnUsc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDpofT1QZChkKT9kOntzaG91bGRTYXZlSW5zdHJ1bWVudDohMSxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OiExfSxwPVAoYnAsbCkse2lzU3RvcmVDcmVkaXRBcHBsaWVkOm19PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENoZWNrb3V0T3JUaHJvdygpO20mJih5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuYXBwbHlTdG9yZUNyZWRpdChtKSk7dHJ5e3AmJih5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIobyx0KSksYyYmKHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChjLHtwYXJhbXM6e21ldGhvZDpsfX0pKTtjb25zdCBlPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO2lmKFNkKGQpKXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIobyx0KTtjb25zdHtpbnN0cnVtZW50SWQ6bn09ZCxpPWUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coci5tZXRob2RJZCkuY2xpZW50VG9rZW47aWYoIWkpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtyZXR1cm4geWllbGQgdGhpcy5leGVjdXRlV2l0aFZhdWx0ZWQocixuLGgsaSl9Y29uc3QgbT1lLmdldFBheW1lbnRNZXRob2RPclRocm93KGwpLHk9eWllbGQgdGhpcy5jb25maXJtU3RyaXBlUGF5bWVudChtKSx7Y2xpZW50VG9rZW46ZyxtZXRob2Q6dn09bSx7aWQ6Zn09bnVsbCE9PShpPW51bGwhPT0obj15LnBheW1lbnRJbnRlbnQpJiZ2b2lkIDAhPT1uP246eS5wYXltZW50TWV0aG9kKSYmdm9pZCAwIT09aT9pOntpZDpcIlwifTtzPXkuZXJyb3IsYT17Y3JlZGl0X2NhcmRfdG9rZW46e3Rva2VuOmZ9LHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDp1LGNvbmZpcm06ITEsc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6aH0sdj09PVNwLkNyZWRpdENhcmQmJihhLmNsaWVudF90b2tlbj1nKSxwfHwoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG8sdCkpO2NvbnN0IFM9dGhpcy5idWlsZFBheW1lbnRQYXlsb2FkKGwsYSxoKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChTKX1jYXRjaChlKXt5aWVsZCB0aGlzLnByb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKHRoaXMuaGFuZGxlRW1wdHlQYXltZW50SW50ZW50RXJyb3IoZSxzKSxsLHUsaCl9fSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gdGhpcy5ob3N0ZWRGb3JtJiZ0aGlzLmhvc3RlZEZvcm0uZGV0YWNoKCksdGhpcy5pc0RlaW5pdGlhbGl6ZT0hMCx0aGlzLnVubW91bnRFbGVtZW50KCksUHJvbWlzZS5yZXNvbHZlKCl9YnVpbGRQYXltZW50UGF5bG9hZChlLHQsbil7cmV0dXJue21ldGhvZElkOmUscGF5bWVudERhdGE6bj97Zm9ybWF0dGVkUGF5bG9hZDpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse3NldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50Om59KX06e2Zvcm1hdHRlZFBheWxvYWQ6dH19fWlzQ2FuY2VsbGF0aW9uRXJyb3IoZSl7dmFyIHQsbjtyZXR1cm4gZSYmLTEhPT0obnVsbD09PShuPW51bGw9PT0odD1lLnBheW1lbnRfaW50ZW50Lmxhc3RfcGF5bWVudF9lcnJvcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQubWVzc2FnZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uaW5kZXhPZihcImNhbmNlbGVkXCIpKX1pc0F1dGhFcnJvcihlKXtyZXR1cm5cInBheW1lbnRfaW50ZW50X2F1dGhlbnRpY2F0aW9uX2ZhaWx1cmVcIj09PShudWxsPT1lP3ZvaWQgMDplLmNvZGUpfWlzQ3JlZGl0Q2FyZChlKXtyZXR1cm4gZT09PV9wLkNyZWRpdENhcmR9aXNIb3N0ZWRGaWVsZEF2YWlsYWJsZSgpe3ZhciBlO2NvbnN0IHQ9dGhpcy5nZXRJbml0aWFsaXplT3B0aW9ucygpLG49SChudWxsPT09KGU9dC5mb3JtKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5maWVsZHMsRSk7cmV0dXJuIUUobil9aXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQoZSx0KXtjb25zdHtnZXRQYXltZW50TWV0aG9kT3JUaHJvdzpufT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxpPW4oZSx0KTtyZXR1cm4gQm9vbGVhbihpLmNvbmZpZy5pc0hvc3RlZEZvcm1FbmFibGVkKX1jb25maXJtU3RyaXBlUGF5bWVudChlKXtyZXR1cm4gSXAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e2NsaWVudFRva2VuOnQsbWV0aG9kOm4scmV0dXJuVXJsOml9PWU7aWYoIXQpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtzd2l0Y2gobil7Y2FzZSBTcC5BbGlwYXk6cmV0dXJuIHRoaXMuZ2V0U3RyaXBlSnMoKS5jb25maXJtQWxpcGF5UGF5bWVudCh0LHtyZXR1cm5fdXJsOml9LHtoYW5kbGVBY3Rpb25zOiExfSk7Y2FzZSBTcC5JREVBTDp7Y29uc3QgZT10aGlzLm1hcFN0cmlwZVBheW1lbnREYXRhKF9wLklERUFMLGkpO3JldHVybiB0aGlzLmdldFN0cmlwZUpzKCkuY29uZmlybUlkZWFsUGF5bWVudCh0LGUse2hhbmRsZUFjdGlvbnM6ITF9KX1jYXNlIFNwLlNlcGE6e2NvbnN0IGU9dGhpcy5tYXBTdHJpcGVQYXltZW50RGF0YShfcC5TZXBhKTtyZXR1cm4gdGhpcy5nZXRTdHJpcGVKcygpLmNvbmZpcm1TZXBhRGViaXRQYXltZW50KHQsZSl9ZGVmYXVsdDp7Y29uc3QgZT10aGlzLnVzZUluZGl2aWR1YWxDYXJkRmllbGRzP3RoaXMuZ2V0U3RyaXBlQ2FyZEVsZW1lbnRzKClbMF06dGhpcy5nZXRTdHJpcGVFbGVtZW50KCksdD10aGlzLm1hcFN0cmlwZUJpbGxpbmdEZXRhaWxzKHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEJpbGxpbmdBZGRyZXNzKCksdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q3VzdG9tZXIoKSksbj10aGlzLl9hbGxvd1JlZGlzcGxheUZvclN0b3JlZEluc3RydW1lbnRzO3JldHVybiB0aGlzLmdldFN0cmlwZUpzKCkuY3JlYXRlUGF5bWVudE1ldGhvZChPYmplY3QuYXNzaWduKHt0eXBlOl9wLkNyZWRpdENhcmQsY2FyZDplLGJpbGxpbmdfZGV0YWlsczp0fSxuP3thbGxvd19yZWRpc3BsYXk6XCJhbHdheXNcIn06e30pKX19fSl9ZXhlY3V0ZVdpdGhWYXVsdGVkKGUsdCxuLGkpe3ZhciByO3JldHVybiBJcCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbz17YmlncGF5X3Rva2VuOnt0b2tlbjp0fSxjb25maXJtOiEwLGNsaWVudF90b2tlbjppLHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50Om59O2lmKHRoaXMuaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQoZS5tZXRob2RJZCxlLmdhdGV3YXlJZCkmJnRoaXMuaG9zdGVkRm9ybSl7Y29uc3QgdD10aGlzLmhvc3RlZEZvcm07cmV0dXJuIGUucGF5bWVudERhdGEmJlNkKGUucGF5bWVudERhdGEpJiYoZS5wYXltZW50RGF0YT1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZS5wYXltZW50RGF0YSkse2luc3RydW1lbnRJZDpKU09OLnN0cmluZ2lmeSh7dG9rZW46KG51bGw9PT0ocj1lLnBheW1lbnREYXRhKXx8dm9pZCAwPT09cj92b2lkIDA6ci5pbnN0cnVtZW50SWQpfHxcIlwiLGNsaWVudF90b2tlbjppfSl9KSkseWllbGQgdC52YWxpZGF0ZSgpLHlpZWxkIHQuc3VibWl0KGUpLHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ3VycmVudE9yZGVyKCl9Y29uc3QgYT10aGlzLmJ1aWxkUGF5bWVudFBheWxvYWQoZS5tZXRob2RJZCxvLG4pO3JldHVybiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChhKX0pfWdldEluaXRpYWxpemVPcHRpb25zKCl7aWYoIXRoaXMuaW5pdGlhbGl6ZU9wdGlvbnMpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7cmV0dXJuIHRoaXMuaW5pdGlhbGl6ZU9wdGlvbnN9Z2V0U3RyaXBlQ2FyZEVsZW1lbnRzKCl7aWYoIXRoaXMuc3RyaXBlQ2FyZEVsZW1lbnRzKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3JldHVybiB0aGlzLnN0cmlwZUNhcmRFbGVtZW50c31nZXRTdHJpcGVFbGVtZW50KCl7aWYoIXRoaXMuc3RyaXBlRWxlbWVudCl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gdGhpcy5zdHJpcGVFbGVtZW50fWdldFN0cmlwZUpzKCl7aWYoIXRoaXMuc3RyaXBlVjNDbGllbnQpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7cmV0dXJuIHRoaXMuc3RyaXBlVjNDbGllbnR9aGFuZGxlRW1wdHlQYXltZW50SW50ZW50RXJyb3IoZSx0KXtyZXR1cm4gWHIoZSkmJlooZS5ib2R5LmVycm9ycyx7Y29kZTpcInJlcXVpcmVkX2ZpZWxkXCJ9KSYmdD9uZXcgRXJyb3IodC5tZXNzYWdlKTplfWxvYWRTdHJpcGVKcyhlLHQpe3JldHVybiBJcCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuc3RyaXBlVjNDbGllbnQ/UHJvbWlzZS5yZXNvbHZlKHRoaXMuc3RyaXBlVjNDbGllbnQpOnRoaXMuc2NyaXB0TG9hZGVyLmxvYWQoZSx0LHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldExvY2FsZSgpKX0pfW1hcFN0cmlwZUFkZHJlc3MoZSl7aWYoZSl7Y29uc3R7Y2l0eTp0LGNvdW50cnlDb2RlOm4sYWRkcmVzczE6aSxhZGRyZXNzMjpyLHBvc3RhbENvZGU6byxzdGF0ZU9yUHJvdmluY2VDb2RlOmF9PWU7cmV0dXJue2NpdHk6dCxjb3VudHJ5Om4sbGluZTE6aSxsaW5lMjpyLHBvc3RhbF9jb2RlOm8sc3RhdGU6YX19cmV0dXJue2xpbmUxOlwiXCJ9fW1hcFN0cmlwZUJpbGxpbmdEZXRhaWxzKGUsdCl7Y29uc3R7Zmlyc3ROYW1lOm4sbGFzdE5hbWU6aX09ZXx8dHx8e2ZpcnN0TmFtZTpcIkd1ZXN0XCIsbGFzdE5hbWU6XCJcIn0scj1gJHtufSAke2l9YC50cmltKCkse29wdGlvbnM6b309dGhpcy5nZXRJbml0aWFsaXplT3B0aW9ucygpO2lmKHRoaXMudXNlSW5kaXZpZHVhbENhcmRGaWVsZHMmJnZwKG8pKXtjb25zdHt6aXBDb2RlRWxlbWVudE9wdGlvbnM6dH09bztpZih0KXtjb25zdCBuPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuY29udGFpbmVySWQpP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuY29udGFpbmVySWQpLnZhbHVlOlwiXCI7biYmZSYmKGU9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtwb3N0YWxDb2RlOm59KSl9fWNvbnN0IGE9e2FkZHJlc3M6dGhpcy5tYXBTdHJpcGVBZGRyZXNzKGUpfTtpZih0JiZ0LmFkZHJlc3Nlc1swXSYmZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcImlkXCJpbiBlJiZ2b2lkIDAhPT1lLmlkfSh0LmFkZHJlc3Nlc1swXSkpe2NvbnN0IGU9dC5hZGRyZXNzZXNbMF0se2VtYWlsOm59PXQse3Bob25lOml9PWU7cmV0dXJuIGk/T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGEpLHtlbWFpbDpuLG5hbWU6cixwaG9uZTppfSk6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGEpLHtlbWFpbDpuLG5hbWU6cn0pfWlmKGUpe2NvbnN0e2VtYWlsOnQscGhvbmU6bn09ZTtyZXR1cm4gbj9PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYSkse2VtYWlsOnQsbmFtZTpyLHBob25lOm59KTpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYSkse2VtYWlsOnQsbmFtZTpyfSl9cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxhKSx7bmFtZTpyfSl9bWFwU3RyaXBlUGF5bWVudERhdGEoZSx0KXtjb25zdCBuPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEN1c3RvbWVyKCksaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRCaWxsaW5nQWRkcmVzcygpLHI9e3BheW1lbnRfbWV0aG9kOntbZV06dGhpcy5nZXRTdHJpcGVFbGVtZW50KCksYmlsbGluZ19kZXRhaWxzOnRoaXMubWFwU3RyaXBlQmlsbGluZ0RldGFpbHMoaSxuKX19O3JldHVybiBlPT09X3AuSURFQUw/T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHIpLHtyZXR1cm5fdXJsOnR9KTpyfW1vdW50Q2FyZEZpZWxkcyhlKXtjb25zdHtvcHRpb25zOnQsY29udGFpbmVySWQ6bn09dGhpcy5nZXRJbml0aWFsaXplT3B0aW9ucygpO2xldCBpO3JldHVybiBuZXcgUHJvbWlzZSgocixvKT0+e3N3aXRjaCh0aGlzLnN0cmlwZUVsZW1lbnRzfHwodGhpcy5zdHJpcGVFbGVtZW50cz10aGlzLmdldFN0cmlwZUpzKCkuZWxlbWVudHMoKSksZSl7Y2FzZSBTcC5DcmVkaXRDYXJkOmlmKHRoaXMudXNlSW5kaXZpZHVhbENhcmRGaWVsZHMmJnZwKHQpKXtjb25zdHtjYXJkTnVtYmVyRWxlbWVudE9wdGlvbnM6ZSxjYXJkRXhwaXJ5RWxlbWVudE9wdGlvbnM6bixjYXJkQ3ZjRWxlbWVudE9wdGlvbnM6cn09dCxhPXRoaXMuc3RyaXBlRWxlbWVudHMuZ2V0RWxlbWVudChTcC5DYXJkTnVtYmVyKXx8dGhpcy5zdHJpcGVFbGVtZW50cy5jcmVhdGUoU3AuQ2FyZE51bWJlcixlKSxzPXRoaXMuc3RyaXBlRWxlbWVudHMuZ2V0RWxlbWVudChTcC5DYXJkRXhwaXJ5KXx8dGhpcy5zdHJpcGVFbGVtZW50cy5jcmVhdGUoU3AuQ2FyZEV4cGlyeSxuKSxkPXRoaXMuc3RyaXBlRWxlbWVudHMuZ2V0RWxlbWVudChTcC5DYXJkQ3ZjKXx8dGhpcy5zdHJpcGVFbGVtZW50cy5jcmVhdGUoU3AuQ2FyZEN2YyxyKTt0aGlzLnN0cmlwZUNhcmRFbGVtZW50cz1bYSxzLGRdLGk9dGhpcy5zdHJpcGVDYXJkRWxlbWVudHNbMF07dHJ5e2EubW91bnQoYCMke2UuY29udGFpbmVySWR9YCkscy5tb3VudChgIyR7bi5jb250YWluZXJJZH1gKSxkLm1vdW50KGAjJHtyLmNvbnRhaW5lcklkfWApfWNhdGNoKGUpe3RoaXMuaXNEZWluaXRpYWxpemV8fG8obmV3IHJuKFwiVW5hYmxlIHRvIG1vdW50IFN0cmlwZSBjb21wb25lbnQgd2l0aG91dCB2YWxpZCBjb250YWluZXIgSUQuXCIpKX19ZWxzZXtpPXRoaXMuc3RyaXBlRWxlbWVudHMuZ2V0RWxlbWVudChlKXx8dGhpcy5zdHJpcGVFbGVtZW50cy5jcmVhdGUoZSx0KTt0cnl7aS5tb3VudChgIyR7bn1gKX1jYXRjaChlKXt0aGlzLmlzRGVpbml0aWFsaXplfHxvKG5ldyBybihcIlVuYWJsZSB0byBtb3VudCBTdHJpcGUgY29tcG9uZW50IHdpdGhvdXQgdmFsaWQgY29udGFpbmVyIElELlwiKSl9fWJyZWFrO2Nhc2UgU3AuSURFQUw6Y2FzZSBTcC5TZXBhOmk9dGhpcy5zdHJpcGVFbGVtZW50cy5nZXRFbGVtZW50KGUpfHx0aGlzLnN0cmlwZUVsZW1lbnRzLmNyZWF0ZShlLHQpO3RyeXtpLm1vdW50KGAjJHtufWApfWNhdGNoKGUpe3RoaXMuaXNEZWluaXRpYWxpemV8fG8obmV3IHJuKFwiVW5hYmxlIHRvIG1vdW50IFN0cmlwZSBjb21wb25lbnQgd2l0aG91dCB2YWxpZCBjb250YWluZXIgSUQuXCIpKX1jYXNlIFNwLkFsaXBheTp9cihpKX0pfW1vdW50Q2FyZFZlcmlmaWNhdGlvbkZpZWxkcyhlKXtyZXR1cm4gSXAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0U3RvcmVDb25maWcoKTtpZighdCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ0NoZWNrb3V0Q29uZmlnKTtjb25zdCBuPXQucGF5bWVudFNldHRpbmdzLmJpZ3BheUJhc2VVcmwsaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlSG9zdGVkRm9ybShuLGUpO3JldHVybiB5aWVsZCBpLmF0dGFjaCgpLGl9KX1wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlLHQsbj0hMSxpPSExKXtyZXR1cm4gSXAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFYcihlKSl0aHJvdyBlO2NvbnN0IHI9WihlLmJvZHkuZXJyb3JzLHtjb2RlOlwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWRcIn0pLG89WihlLmJvZHkuZXJyb3JzLHtjb2RlOlwidGhyZWVfZF9zZWN1cmVfcmVxdWlyZWRcIn0pO2lmKHIpe2NvbnN0IHQ9ZS5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkO2lmKHQmJlwicmVkaXJlY3RfdG9fdXJsXCI9PT10LnR5cGUpcmV0dXJuIG5ldyBQcm9taXNlKCgpPT57dC5kYXRhLnJlZGlyZWN0X3VybCYmd2luZG93LmxvY2F0aW9uLnJlcGxhY2UodC5kYXRhLnJlZGlyZWN0X3VybCl9KX1pZihvKXtjb25zdCByPWUuYm9keS50aHJlZV9kc19yZXN1bHQudG9rZW4sbz0hMTtsZXQgYSxzPSExO3RyeXthPXlpZWxkIHRoaXMuZ2V0U3RyaXBlSnMoKS5jb25maXJtQ2FyZFBheW1lbnQocil9Y2F0Y2goZSl7cz0hMH1pZihudWxsPT1hP3ZvaWQgMDphLmVycm9yKXtpZih0aGlzLmlzQ2FuY2VsbGF0aW9uRXJyb3IoYS5lcnJvcikpdGhyb3cgbmV3IE1uO2lmKHRoaXMuaXNBdXRoRXJyb3IoYS5lcnJvcikpdGhyb3cgbmV3IENwKHdwLkF1dGhGYWlsdXJlKTt0aHJvdyBuZXcgRXJyb3IoYS5lcnJvci5tZXNzYWdlKX1jb25zdCBkPXtjcmVkaXRfY2FyZF90b2tlbjp7dG9rZW46dGhpcy5nZXRQYXltZW50VG9rZW4obnVsbD09YT92b2lkIDA6YS5wYXltZW50SW50ZW50LHIscyl9LHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDpuLGNvbmZpcm06b30sYz10aGlzLmJ1aWxkUGF5bWVudFBheWxvYWQodCxkLGkpO3RyeXtyZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoYyl9Y2F0Y2goZSl7dGhyb3cgdGhpcy5oYW5kbGVFbXB0eVBheW1lbnRJbnRlbnRFcnJvcihlLG51bGw9PWE/dm9pZCAwOmEuZXJyb3IpfX10aHJvdyBlfSl9Z2V0UGF5bWVudFRva2VuKGUsdCxuKXtyZXR1cm4hZXx8bj90OmUuaWR9c2hvdWxkU2hvd1RTVkhvc3RlZEZvcm0oZSx0KXtyZXR1cm4gdGhpcy5pc0hvc3RlZEZpZWxkQXZhaWxhYmxlKCkmJnRoaXMuaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQoZSx0KX11bm1vdW50RWxlbWVudCgpe3RoaXMuc3RyaXBlRWxlbWVudCYmKHRoaXMuc3RyaXBlRWxlbWVudC51bm1vdW50KCksdGhpcy5zdHJpcGVFbGVtZW50PXZvaWQgMCl9fWNsYXNzIE9we2NvbnN0cnVjdG9yKGUsdD13aW5kb3cpe3RoaXMuc2NyaXB0TG9hZGVyPWUsdGhpcy5zdHJpcGVXaW5kb3c9dH1sb2FkKGUsdCxuKXtyZXR1cm4gdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChcImh0dHBzOi8vanMuc3RyaXBlLmNvbS92My9cIikudGhlbigoKT0+e2lmKCF0aGlzLnN0cmlwZVdpbmRvdy5TdHJpcGUpdGhyb3cgbmV3IFh0O3JldHVybiB0aGlzLnN0cmlwZVdpbmRvdy5TdHJpcGUoZSx7c3RyaXBlQWNjb3VudDp0LGxvY2FsZTpuLGJldGFzOltcInBheW1lbnRfaW50ZW50X2JldGFfM1wiLFwiYWxpcGF5X3BtX2JldGFfMVwiXSxhcGlWZXJzaW9uOlwiMjAyMC0wMy0wMjthbGlwYXlfYmV0YT12MVwifSl9KX19Y29uc3QgRXA9bm4oZT0+bmV3IFBwKGUsbmV3IE9wKGEoKSkpLFt7Z2F0ZXdheTpcInN0cmlwZXYzXCJ9XSksQXA9e2FyOltcImFyXCJdLGJnOltcImJnXCJdLGNzOltcImNzXCJdLGRhOltcImRhXCJdLGRlOltcImRlXCJdLGVsOltcImVsXCJdLGVuOltcImVuXCIsXCJlbi1HQlwiXSxlczpbXCJlc1wiLFwiZXMtNDE5XCJdLGV0OltcImV0XCJdLGZpOltcImZpXCJdLGZpbDpbXCJmaWxcIl0sZnI6W1wiZnJcIixcImZyLUNBXCJdLGhlOltcImhlXCJdLGhyOltcImhyXCJdLGh1OltcImh1XCJdLGlkOltcImlkXCJdLGl0OltcIml0XCJdLGphOltcImphXCJdLGtvOltcImtvXCJdLGx0OltcImx0XCJdLGx2OltcImx2XCJdLG1zOltcIm1zXCJdLG10OltcIm10XCJdLG5iOltcIm5iXCJdLG5sOltcIm5sXCJdLHBsOltcInBsXCJdLHB0OltcInB0XCIsXCJwdC1CUlwiXSxybzpbXCJyb1wiXSxydTpbXCJydVwiXSxzazpbXCJza1wiXSxzbDpbXCJzbFwiXSxzdjpbXCJzdlwiXSx0aDpbXCJ0aFwiXSx0cjpbXCJ0clwiXSx2aTpbXCJ2aVwiXSx6aDpbXCJ6aFwiLFwiemgtSEtcIixcInpoLVRXXCJdfTtmdW5jdGlvbiBrcChlKXtjb25zdFt0LG5dPWUucmVwbGFjZSgvXy9nLFwiLVwiKS50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiLVwiKSxpPUFwW3RdO2lmKCFpKXJldHVyblwiYXV0b1wiO2NvbnN0IHI9bj9gJHt0fS0ke24udG9VcHBlckNhc2UoKX1gOnQ7cmV0dXJuIGkuaW5kZXhPZihyKT4tMT9yOmlbMF19dmFyIFRwPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIERwe2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnNjcmlwdExvYWRlcj10LHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlPW59aW5pdGlhbGl6ZShlKXtyZXR1cm4gVHAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3N0cmlwZXVwZTp0LG1ldGhvZElkOm4sZ2F0ZXdheUlkOml9PWU7aWYoIShudWxsPT10P3ZvaWQgMDp0LmNvbnRhaW5lcklkKSl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcImdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtyZXR1cm4gdGhpcy5fbG9hZFN0cmlwZUVsZW1lbnQodCxpLG4pLmNhdGNoKGU9Pnt2YXIgbjtyZXR1cm4gbnVsbD09PShuPXQub25FcnJvcil8fHZvaWQgMD09PW4/dm9pZCAwOm4uY2FsbCh0LGUpfSksdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdENoZWNrb3V0RXZlbnRzU3Vic2NyaXB0aW9uKGksbix0LHRoaXMuX3N0cmlwZUVsZW1lbnRzKSxQcm9taXNlLnJlc29sdmUoKX0pfWV4ZWN1dGUoZSx0KXtyZXR1cm4gVHAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6bn09ZSxpPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0oZSxbXCJwYXltZW50XCJdKTtpZighbnx8IW4ucGF5bWVudERhdGEpdGhyb3cgbmV3IFlpKFtcInBheW1lbnQucGF5bWVudERhdGFcIl0pO2lmKCF0aGlzLl9zdHJpcGVVUEVDbGllbnQpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7Y29uc3R7cGF5bWVudERhdGE6cixtZXRob2RJZDpvLGdhdGV3YXlJZDphfT1uLHtzaG91bGRTYXZlSW5zdHJ1bWVudDpzPSExLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6ZD0hMX09UGQocik/cjp7fSxjPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHtpc1N0b3JlQ3JlZGl0QXBwbGllZDpsfT1jLmdldENoZWNrb3V0T3JUaHJvdygpLHU9Yy5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lck9yVGhyb3coKSxoPShEYSh1KT91Ont9KS5zdHJpcGVMaW5rQXV0aGVudGljYXRpb25TdGF0ZTtpZihsJiYoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmFwcGx5U3RvcmVDcmVkaXQobCkpLGEpe3lpZWxkIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVN0cmlwZVBheW1lbnRJbnRlbnQoYSxvKTtjb25zdHtlbWFpbDplfT1jLmdldEN1c3RvbWVyT3JUaHJvdygpO2lmKHZvaWQgMCE9PWgmJiFlKXtjb25zdCBlPWMuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGUpfX1pZih5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KSxTZChyKSl7Y29uc3R7aW5zdHJ1bWVudElkOmV9PXI7cmV0dXJuIHZvaWQoeWllbGQgdGhpcy5fZXhlY3V0ZVdpdGhWYXVsdGVkKG4ubWV0aG9kSWQsZSxkKSl9eWllbGQgdGhpcy5fZXhlY3V0ZVdpdGhTdHJpcGVDb25maXJtYXRpb24obi5tZXRob2RJZCwhaCYmcyxkKX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBfZCl9ZGVpbml0aWFsaXplKCl7dmFyIGUsdDtyZXR1cm4gbnVsbD09PSh0PW51bGw9PT0oZT10aGlzLl9zdHJpcGVFbGVtZW50cyl8fHZvaWQgMD09PWU/dm9pZCAwOmUuZ2V0RWxlbWVudChiYS5QQVlNRU5UKSl8fHZvaWQgMD09PXR8fHQudW5tb3VudCgpLHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLmRlaW5pdGlhbGl6ZSgpLHRoaXMuX3N0cmlwZUVsZW1lbnRzPXZvaWQgMCx0aGlzLl9zdHJpcGVVUEVDbGllbnQ9dm9pZCAwLFByb21pc2UucmVzb2x2ZSgpfV9leGVjdXRlV2l0aFN0cmlwZUNvbmZpcm1hdGlvbihlLHQsbil7cmV0dXJuIFRwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBpPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHtjbGllbnRUb2tlbjpyfT1pLmdldFBheW1lbnRNZXRob2RPclRocm93KGUpLG89dGhpcy5fZ2V0UGF5bWVudFBheWxvYWQoZSxyfHxcIlwiLHQsbik7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG8pfWNhdGNoKGkpe3lpZWxkIHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uV2l0aFN0cmlwZUNvbmZpcm1hdGlvbihpLGUsdCxuKX19KX1fZXhlY3V0ZVdpdGhWYXVsdGVkKGUsdCxuKXt2YXIgaTtyZXR1cm4gVHAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHI9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksbz1yLmdldFBheW1lbnRNZXRob2RPclRocm93KGUpLGE9bnVsbD09PShpPXIuZ2V0Q2FydCgpKXx8dm9pZCAwPT09aT92b2lkIDA6aS5pZDt0cnl7Y29uc3QgaT17bWV0aG9kSWQ6ZSxwYXltZW50RGF0YTp7Zm9ybWF0dGVkUGF5bG9hZDp7Y2FydF9pZDphLGJpZ3BheV90b2tlbjp7dG9rZW46dH0sY29uZmlybTohMSxjbGllbnRfdG9rZW46by5jbGllbnRUb2tlbixzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDpufX19O3JldHVybiB5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChpKX1jYXRjaCh0KXtyZXR1cm4gdGhpcy5fcHJvY2Vzc1ZhdWx0ZWRBZGRpdGlvbmFsQWN0aW9uKHQsZSxuKX19KX1fbG9hZFN0cmlwZUVsZW1lbnQoZSx0LG4pe3JldHVybiBUcCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7Y29udGFpbmVySWQ6aSxzdHlsZTpyLHJlbmRlcjpvLGluaXRTdHJpcGVFbGVtZW50VXBkYXRlVHJpZ2dlcjphfT1lLHM9eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKHQse3BhcmFtczp7bWV0aG9kOm59fSksZD1zLmdldFBheW1lbnRNZXRob2RPclRocm93KG4pLHtjaGVja291dFNldHRpbmdzOmN9PXMuZ2V0U3RvcmVDb25maWdPclRocm93KCk7aWYoIVRhKGQpKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3R7Y2xpZW50VG9rZW46bCxpbml0aWFsaXphdGlvbkRhdGE6dX09ZCx7c2hvcHBlckxhbmd1YWdlOmgsYWxsb3dSZWRpc3BsYXlGb3JTdG9yZWRJbnN0cnVtZW50czpwPSExfT11O2lmKHRoaXMuX2FsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHM9cCwhbCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2xldCBtO2lmKHRoaXMuX3N0cmlwZVVQRUNsaWVudD15aWVsZCB0aGlzLl9sb2FkU3RyaXBlSnModSksdGhpcy5faXNTdHJpcGVFbGVtZW50VXBkYXRlRW5hYmxlZD0hIWMuZmVhdHVyZXNbXCJQSS0xNjc5LnRyaWdnZXJfdXBkYXRlX3N0cmlwZV9wYXltZW50X2VsZW1lbnRcIl0mJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEscil7Y29uc3QgZT1yO209e3ZhcmlhYmxlczp0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5tYXBBcHBlYXJhbmNlVmFyaWFibGVzKHIpLHJ1bGVzOntcIi5JbnB1dFwiOnRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLm1hcElucHV0QXBwZWFyYW5jZVJ1bGVzKGUpfX19dGhpcy5fc3RyaXBlRWxlbWVudHM9eWllbGQgdGhpcy5zY3JpcHRMb2FkZXIuZ2V0RWxlbWVudHModGhpcy5fc3RyaXBlVVBFQ2xpZW50LHtjbGllbnRTZWNyZXQ6bCxsb2NhbGU6a3AoaCksYXBwZWFyYW5jZTptfSk7Y29uc3R7Z2V0QmlsbGluZ0FkZHJlc3M6eSxnZXRTaGlwcGluZ0FkZHJlc3M6Z309cyx7cG9zdGFsQ29kZTp2fT1nKCl8fHkoKXx8e30sZj10aGlzLl9zdHJpcGVFbGVtZW50cy5nZXRFbGVtZW50KGJhLlBBWU1FTlQpfHx0aGlzLl9zdHJpcGVFbGVtZW50cy5jcmVhdGUoYmEuUEFZTUVOVCxPYmplY3QuYXNzaWduKHtmaWVsZHM6e2JpbGxpbmdEZXRhaWxzOntlbWFpbDpJYS5ORVZFUixhZGRyZXNzOntjb3VudHJ5OklhLk5FVkVSLGNpdHk6SWEuTkVWRVIscG9zdGFsQ29kZTp2P0lhLk5FVkVSOklhLkFVVE99fX0sd2FsbGV0czp7YXBwbGVQYXk6SWEuTkVWRVIsZ29vZ2xlUGF5OklhLk5FVkVSfX0sdGhpcy5fZ2V0U3RyaXBlRWxlbWVudFRlcm1zKCkpKTt0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5tb3VudEVsZW1lbnQoZixpKSxmLm9uKE9hLlJFQURZLCgpPT57bygpfSksZi5vbihPYS5DSEFOR0UsZT0+eyhudWxsPT1lP3ZvaWQgMDplLnZhbHVlKSYmXCJ0eXBlXCJpbiBlLnZhbHVlJiZ0aGlzLl91cGRhdGVTdHJpcGVMaW5rU3RhdGVCeUVsZW1lbnRUeXBlKGUudmFsdWUudHlwZSl9KSx0aGlzLl9pc1N0cmlwZUVsZW1lbnRVcGRhdGVFbmFibGVkJiYobnVsbD09YXx8YSh0aGlzLl91cGRhdGVTdHJpcGVFbGVtZW50LmJpbmQodGhpcykpKX0pfV9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbldpdGhTdHJpcGVDb25maXJtYXRpb24oZSx0LG49ITEsaT0hMSl7cmV0dXJuIFRwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighWHIoZSl8fCF0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5pc0FkZGl0aW9uYWxBY3Rpb25FcnJvcihlLmJvZHkuZXJyb3JzKSl0aHJvdyBlO2lmKCF0aGlzLl9zdHJpcGVVUEVDbGllbnR8fCF0aGlzLl9zdHJpcGVFbGVtZW50cyl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtjb25zdHtkYXRhOnJ9PWUuYm9keS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCx7dG9rZW46b309cix7cGF5bWVudEludGVudDphfT15aWVsZCB0aGlzLl9jb25maXJtU3RyaXBlUGF5bWVudE9yVGhyb3codCxyKSxzPXRoaXMuX2dldFBheW1lbnRQYXlsb2FkKHQsKG51bGw9PWE/dm9pZCAwOmEuaWQpfHxvLG4saSk7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHMpfWNhdGNoKGUpe3RoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLnRocm93UGF5bWVudENvbmZpcm1hdGlvblByb2NlZWRNZXNzYWdlKCl9fSl9X2NvbmZpcm1TdHJpcGVQYXltZW50T3JUaHJvdyhlLHQpe3ZhciBuLGk7cmV0dXJuIFRwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHt0b2tlbjpyLHJlZGlyZWN0X3VybDpvfT10LGE9dGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UubWFwU3RyaXBlUGF5bWVudERhdGEodGhpcy5fc3RyaXBlRWxlbWVudHMsbywhIXRoaXMuX2FsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHMpO2xldCBzO3RyeXtjb25zdCB0PSh5aWVsZCB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5pc1BheW1lbnRDb21wbGV0ZWQoZSx0aGlzLl9zdHJpcGVVUEVDbGllbnQpKT95aWVsZCBudWxsPT09KGk9dGhpcy5fc3RyaXBlVVBFQ2xpZW50KXx8dm9pZCAwPT09aT92b2lkIDA6aS5yZXRyaWV2ZVBheW1lbnRJbnRlbnQocnx8XCJcIik6eWllbGQgbnVsbD09PShuPXRoaXMuX3N0cmlwZVVQRUNsaWVudCl8fHZvaWQgMD09PW4/dm9pZCAwOm4uY29uZmlybVBheW1lbnQoYSk7aWYocz1udWxsPT10P3ZvaWQgMDp0LmVycm9yLHN8fCEobnVsbD09dD92b2lkIDA6dC5wYXltZW50SW50ZW50KSl0aHJvdyBuZXcgTGk7cmV0dXJuIHR9Y2F0Y2goZSl7dGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UudGhyb3dTdHJpcGVFcnJvcihzKX19KX1fcHJvY2Vzc1ZhdWx0ZWRBZGRpdGlvbmFsQWN0aW9uKGUsdCxuPSExKXt2YXIgaTtyZXR1cm4gVHAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0fHwhWHIoZSl8fCFaKGUuYm9keS5lcnJvcnMse2NvZGU6XCJ0aHJlZV9kX3NlY3VyZV9yZXF1aXJlZFwifSkpdGhyb3cgZTtpZighdGhpcy5fc3RyaXBlVVBFQ2xpZW50fHwhdGhpcy5fc3RyaXBlRWxlbWVudHMpdGhyb3cgbmV3IFZ0KFR0LlBheW1lbnROb3RJbml0aWFsaXplZCk7Y29uc3Qgcj1lLmJvZHkudGhyZWVfZHNfcmVzdWx0LnRva2VuO2xldCBvLGE9ITE7dHJ5e289eWllbGQgdGhpcy5fc3RyaXBlVVBFQ2xpZW50LmNvbmZpcm1DYXJkUGF5bWVudChyKX1jYXRjaChlKXt0cnl7bz15aWVsZCB0aGlzLl9zdHJpcGVVUEVDbGllbnQucmV0cmlldmVQYXltZW50SW50ZW50KHIpfWNhdGNoKGUpe2E9ITB9fWlmKChudWxsPT1vP3ZvaWQgMDpvLmVycm9yKSYmdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UudGhyb3dTdHJpcGVFcnJvcihvLmVycm9yKSwhKG51bGw9PW8/dm9pZCAwOm8ucGF5bWVudEludGVudCkmJiFhKXRocm93IG5ldyBxbjtjb25zdCBzPXRoaXMuX2dldFBheW1lbnRQYXlsb2FkKHQsYT9yOm51bGw9PT0oaT1udWxsPT1vP3ZvaWQgMDpvLnBheW1lbnRJbnRlbnQpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmlkLCExLG4pO3JldHVybiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChzKX0pfV9sb2FkU3RyaXBlSnMoZSl7cmV0dXJuIFRwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fc3RyaXBlVVBFQ2xpZW50P3RoaXMuX3N0cmlwZVVQRUNsaWVudDp0aGlzLnNjcmlwdExvYWRlci5nZXRTdHJpcGVDbGllbnQoZSxNYSx6YSl9KX1fZ2V0UGF5bWVudFBheWxvYWQoZSx0LG49ITEsaT0hMSl7dmFyIHI7cmV0dXJue21ldGhvZElkOmUscGF5bWVudERhdGE6e2Zvcm1hdHRlZFBheWxvYWQ6e2NhcnRfaWQ6KG51bGw9PT0ocj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0KCkpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmlkKXx8XCJcIixjcmVkaXRfY2FyZF90b2tlbjp7dG9rZW46dH0sY29uZmlybTohMSx2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6bixzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDppfX19fV91cGRhdGVTdHJpcGVFbGVtZW50KHtzaG91bGRTaG93VGVybXM6ZX0pe3ZhciB0O2NvbnN0IG49bnVsbD09PSh0PXRoaXMuX3N0cmlwZUVsZW1lbnRzKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXRFbGVtZW50KGJhLlBBWU1FTlQpO251bGw9PW58fG4udXBkYXRlKE9iamVjdC5hc3NpZ24oe30sdGhpcy5fZ2V0U3RyaXBlRWxlbWVudFRlcm1zKGUpKSl9X2dldFN0cmlwZUVsZW1lbnRUZXJtcyhlKXtsZXQgdD1JYS5BVVRPO3JldHVybiB0aGlzLl9pc1N0cmlwZUVsZW1lbnRVcGRhdGVFbmFibGVkJiYodD1lP0lhLkFVVE86SWEuTkVWRVIpLHt0ZXJtczp7Y2FyZDp0fX19X3VwZGF0ZVN0cmlwZUxpbmtTdGF0ZUJ5RWxlbWVudFR5cGUoZSl7Y29uc3QgdD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lck9yVGhyb3coKSxuPWU9PT1DYS5MaW5rOyFEYSh0KSYmbiYmdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHtzdHJpcGVMaW5rQXV0aGVudGljYXRpb25TdGF0ZTpufSl9fWNvbnN0IE1wPW5uKGU9Pntjb25zdCB0PW5ldyBrYShhKCkpO3JldHVybiBuZXcgRHAoZSx0LG5ldyBVYShlLHQpKX0sW3tnYXRld2F5Olwic3RyaXBldXBlXCJ9LHtnYXRld2F5Olwic3RyaXBldXBlXCIsaWQ6XCJrbGFybmFcIn1dKTt2YXIgenA9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgTnB7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuc2NyaXB0TG9hZGVyPXQsdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2U9bn1pbml0aWFsaXplKGUpe3ZhciB0O3JldHVybiB6cCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7c3RyaXBlb2NzOm4sbWV0aG9kSWQ6aSxnYXRld2F5SWQ6cn09ZTtpZighKG51bGw9PW4/dm9pZCAwOm4uY29udGFpbmVySWQpKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO2lmKCFyKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwiZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3RyeXt5aWVsZCB0aGlzLl9pbml0aWFsaXplU3RyaXBlRWxlbWVudChuLHIsaSl9Y2F0Y2goZSl7ZSBpbnN0YW5jZW9mIEVycm9yJiYobnVsbD09PSh0PW4ub25FcnJvcil8fHZvaWQgMD09PXR8fHQuY2FsbChuLGUpKX10aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5pbml0Q2hlY2tvdXRFdmVudHNTdWJzY3JpcHRpb24ocixpLG4sdGhpcy5zdHJpcGVFbGVtZW50cyl9KX1leGVjdXRlKGUsdCl7cmV0dXJuIHpwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSkse21ldGhvZElkOnIsZ2F0ZXdheUlkOm99PW58fHt9O2lmKCF0aGlzLnN0cmlwZUNsaWVudCl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtpZighb3x8IXIpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJnYXRld2F5SWRcIiBvciBcIm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0IGE9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse2lzU3RvcmVDcmVkaXRBcHBsaWVkOnN9PWEuZ2V0Q2hlY2tvdXRPclRocm93KCk7cyYmKHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5hcHBseVN0b3JlQ3JlZGl0KHMpKSx5aWVsZCB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS51cGRhdGVTdHJpcGVQYXltZW50SW50ZW50KG8scikseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGksdCk7Y29uc3R7Y2xpZW50VG9rZW46ZH09YS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhyKSxjPXRoaXMuX2dldFBheW1lbnRQYXlsb2FkKHIsZHx8XCJcIik7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KGMpfWNhdGNoKGUpe3lpZWxkIHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGUscil9fSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXt2YXIgZTtjb25zdCB0PW51bGw9PT0oZT10aGlzLnN0cmlwZUVsZW1lbnRzKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nZXRFbGVtZW50KGJhLlBBWU1FTlQpO3JldHVybiBudWxsPT10fHx0LnVubW91bnQoKSxudWxsPT10fHx0LmRlc3Ryb3koKSx0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5kZWluaXRpYWxpemUoKSx0aGlzLnN0cmlwZUVsZW1lbnRzPXZvaWQgMCx0aGlzLnN0cmlwZUNsaWVudD12b2lkIDAsUHJvbWlzZS5yZXNvbHZlKCl9X2luaXRpYWxpemVTdHJpcGVFbGVtZW50KGUsdCxuKXtyZXR1cm4genAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2xldCBpPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KG4pO2lmKChudWxsPT1pP3ZvaWQgMDppLmNsaWVudFRva2VuKXx8KGk9KHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZCh0LHtwYXJhbXM6e21ldGhvZDpufX0pKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhuKSksIVRhKGkpKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3R7Y2xpZW50VG9rZW46cixpbml0aWFsaXphdGlvbkRhdGE6b309aSx7c2hvcHBlckxhbmd1YWdlOmEsY3VzdG9tZXJTZXNzaW9uVG9rZW46cyxlbmFibGVMaW5rOmR9PW87aWYoIXIpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTt0aGlzLnN0cmlwZUNsaWVudD15aWVsZCB0aGlzLl9sb2FkU3RyaXBlSnMobyk7Y29uc3R7YXBwZWFyYW5jZTpjLGNvbnRhaW5lcklkOmwsZm9udHM6dSxsYXlvdXQ6aCxyZW5kZXI6cCxwYXltZW50TWV0aG9kU2VsZWN0Om0saGFuZGxlQ2xvc2VQYXltZW50TWV0aG9kOnksdG9nZ2xlUHJlbG9hZGVyOmd9PWU7dGhpcy5zdHJpcGVFbGVtZW50cz15aWVsZCB0aGlzLnNjcmlwdExvYWRlci5nZXRFbGVtZW50cyh0aGlzLnN0cmlwZUNsaWVudCx7Y2xpZW50U2VjcmV0OnIsY3VzdG9tZXJTZXNzaW9uQ2xpZW50U2VjcmV0OnMsbG9jYWxlOmtwKGEpLGFwcGVhcmFuY2U6Yyxmb250czp1fSk7Y29uc3R7Z2V0QmlsbGluZ0FkZHJlc3M6dixnZXRTaGlwcGluZ0FkZHJlc3M6Zn09dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksUz12KCkse3Bvc3RhbENvZGU6X309ZigpfHxTfHx7fSx3PXRoaXMuc3RyaXBlRWxlbWVudHMuZ2V0RWxlbWVudChiYS5QQVlNRU5UKXx8dGhpcy5zdHJpcGVFbGVtZW50cy5jcmVhdGUoYmEuUEFZTUVOVCx7ZmllbGRzOntiaWxsaW5nRGV0YWlsczp7ZW1haWw6SWEuTkVWRVIsYWRkcmVzczp7Y291bnRyeTpJYS5ORVZFUixjaXR5OklhLk5FVkVSLHBvc3RhbENvZGU6Xz9JYS5ORVZFUjpJYS5BVVRPfX19LHdhbGxldHM6e2FwcGxlUGF5OklhLk5FVkVSLGdvb2dsZVBheTpJYS5ORVZFUixsaW5rOmQ/SWEuQVVUTzpJYS5ORVZFUn0sbGF5b3V0Omgsc2F2ZVBheW1lbnRNZXRob2Q6e21heFZpc2libGVQYXltZW50TWV0aG9kczoyMH0sZGVmYXVsdFZhbHVlczp7YmlsbGluZ0RldGFpbHM6e2VtYWlsOihudWxsPT1TP3ZvaWQgMDpTLmVtYWlsKXx8XCJcIn19fSk7dGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UubW91bnRFbGVtZW50KHcsbCksdy5vbihPYS5MT0FERVJfU1RBUlQsKCk9PntudWxsPT1nfHxnKCExKX0pLHcub24oT2EuUkVBRFksKCk9PntwKCl9KSx3Lm9uKE9hLkNIQU5HRSxlPT57dGhpcy5fb25TdHJpcGVFbGVtZW50Q2hhbmdlKGUsdCxuLG0pfSksbnVsbD09eXx8eSh0aGlzLl9jb2xsYXBzZVN0cmlwZUVsZW1lbnQuYmluZCh0aGlzKSl9KX1fbG9hZFN0cmlwZUpzKGUpe3JldHVybiB6cCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuc3RyaXBlQ2xpZW50P3RoaXMuc3RyaXBlQ2xpZW50OnRoaXMuc2NyaXB0TG9hZGVyLmdldFN0cmlwZUNsaWVudChlKX0pfV9jb2xsYXBzZVN0cmlwZUVsZW1lbnQoKXt2YXIgZTtjb25zdCB0PW51bGw9PT0oZT10aGlzLnN0cmlwZUVsZW1lbnRzKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nZXRFbGVtZW50KGJhLlBBWU1FTlQpO251bGw9PXR8fHQuY29sbGFwc2UoKX1fZ2V0UGF5bWVudFBheWxvYWQoZSx0LG4pe3ZhciBpO2NvbnN0IHI9KG51bGw9PT0oaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0KCkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmlkKXx8XCJcIix7Y2FyZDpvLHVzX2JhbmtfYWNjb3VudDphfT1ufHx7fSxzPXRoaXMuX3Nob3VsZFNhdmVJbnN0cnVtZW50KG8pfHx0aGlzLl9zaG91bGRTYXZlSW5zdHJ1bWVudChhKSxkPXRoaXMuX2dldFRva2VuaXplZE9wdGlvbnModCxuKTtyZXR1cm57bWV0aG9kSWQ6ZSxwYXltZW50RGF0YTp7Zm9ybWF0dGVkUGF5bG9hZDpPYmplY3QuYXNzaWduKHtjYXJ0X2lkOnIsY29uZmlybTohMSxtZXRob2Q6dGhpcy5zZWxlY3RlZE1ldGhvZElkLHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDpzfSxkKX19fV9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlLHQpe3JldHVybiB6cCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIVhyKGUpfHwhdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuaXNBZGRpdGlvbmFsQWN0aW9uRXJyb3IoZS5ib2R5LmVycm9ycykpdGhyb3cgZTtpZighdGhpcy5zdHJpcGVDbGllbnR8fCF0aGlzLnN0cmlwZUVsZW1lbnRzKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO2NvbnN0e2RhdGE6bn09ZS5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkLHt0b2tlbjppfT1uLHtwYXltZW50SW50ZW50OnJ9PXlpZWxkIHRoaXMuX2NvbmZpcm1TdHJpcGVQYXltZW50T3JUaHJvdyh0LG4pLHtjbGllbnRfc2VjcmV0Om8scGF5bWVudF9tZXRob2Rfb3B0aW9uczphfT1yfHx7fSxzPXRoaXMuX2dldFBheW1lbnRQYXlsb2FkKHQsb3x8aSxhKTt0cnl7cmV0dXJuIHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHMpfWNhdGNoKGUpe3RoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLnRocm93UGF5bWVudENvbmZpcm1hdGlvblByb2NlZWRNZXNzYWdlKCl9fSl9X2NvbmZpcm1TdHJpcGVQYXltZW50T3JUaHJvdyhlLHQpe3ZhciBuLGk7cmV0dXJuIHpwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHt0b2tlbjpyLHJlZGlyZWN0X3VybDpvfT10LGE9dGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UubWFwU3RyaXBlUGF5bWVudERhdGEodGhpcy5zdHJpcGVFbGVtZW50cyxvKTtsZXQgczt0cnl7Y29uc3QgdD0oeWllbGQgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuaXNQYXltZW50Q29tcGxldGVkKGUsdGhpcy5zdHJpcGVDbGllbnQpKT95aWVsZCBudWxsPT09KGk9dGhpcy5zdHJpcGVDbGllbnQpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnJldHJpZXZlUGF5bWVudEludGVudChyfHxcIlwiKTp5aWVsZCBudWxsPT09KG49dGhpcy5zdHJpcGVDbGllbnQpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNvbmZpcm1QYXltZW50KGEpO2lmKHM9bnVsbD09dD92b2lkIDA6dC5lcnJvcixzfHwhKG51bGw9PXQ/dm9pZCAwOnQucGF5bWVudEludGVudCkpdGhyb3cgbmV3IExpO3JldHVybiB0fWNhdGNoKGUpe3JldHVybiB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS50aHJvd1N0cmlwZUVycm9yKHMpfX0pfV9vblN0cmlwZUVsZW1lbnRDaGFuZ2UoZSx0LG4saSl7KGU9Plwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmXCJ2YWx1ZVwiaW4gZSYmXCJjb2xsYXBzZWRcImluIGUpKGUpJiYhZS5jb2xsYXBzZWQmJih0aGlzLnNlbGVjdGVkTWV0aG9kSWQ9ZS52YWx1ZS50eXBlLG51bGw9PWl8fGkoYCR7dH0tJHtufWApKX1fc2hvdWxkU2F2ZUluc3RydW1lbnQoZSl7Y29uc3QgdD1udWxsPT1lP3ZvaWQgMDplLnNldHVwX2Z1dHVyZV91c2FnZTtyZXR1cm4gdD09PUVhLk9OX1NFU1NJT058fHQ9PT1FYS5PRkZfU0VTU0lPTn1fZ2V0VG9rZW5pemVkT3B0aW9ucyhlLHQpe3JldHVybiB0aGlzLl9zaG91bGRTYXZlSW5zdHJ1bWVudChudWxsPT10P3ZvaWQgMDp0LnVzX2JhbmtfYWNjb3VudCk/e3Rva2VuaXplZF9hY2g6e3Rva2VuOmV9fTp7Y3JlZGl0X2NhcmRfdG9rZW46e3Rva2VuOmV9fX19Y29uc3QgeHA9bm4oZT0+e2NvbnN0IHQ9bmV3IGthKGEoKSk7cmV0dXJuIG5ldyBOcChlLHQsbmV3IFVhKGUsdCkpfSxbe2dhdGV3YXk6XCJzdHJpcGVvY3NcIixpZDpcIm9wdGltaXplZF9jaGVja291dFwifV0pO3ZhciBGcDshZnVuY3Rpb24oZSl7ZS5DQVJEX05VTUJFUj1cImNhcmQtbnVtYmVyXCIsZS5DVlY9XCJjdnZcIixlLkVYUElSWT1cImV4cGlyeVwifShGcHx8KEZwPXt9KSk7dmFyIFJwPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIExwe2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnRkT25saW5lTWFydFNjcmlwdExvYWRlcj10LHRoaXMuZm9ybVBvc3Rlcj1uLHRoaXMudGRJbnB1dHM9W3tpZDpcImNjTnVtYmVyXCIsZmllbGRUeXBlOkZwLkNBUkRfTlVNQkVSfSx7aWQ6XCJjY0N2dlwiLGZpZWxkVHlwZTpGcC5DVlZ9LHtpZDpcImNjRXhwaXJ5XCIsZmllbGRUeXBlOkZwLkVYUElSWX1dfWluaXRpYWxpemUoZSl7cmV0dXJuIFJwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHttZXRob2RJZDp0fT1lO2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt0aGlzLnRkT25saW5lTWFydENsaWVudD15aWVsZCB0aGlzLmxvYWRURE9ubGluZU1hcnRKcygpLHRoaXMubW91bnRIb3N0ZWRGaWVsZHModCl9KX1leGVjdXRlKGUsdCl7cmV0dXJuIFJwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Om59PWUsaT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSk7aWYoIW4pdGhyb3cgbmV3IFlpKFtcInBheW1lbnRcIl0pO2lmKCFuLm1ldGhvZElkKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3Qgcj15aWVsZCB0aGlzLmdldFBheW1lbnRQYXlsb2FkT3JUaHJvdyhuKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoaSx0KTt0cnl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocil9Y2F0Y2goZSl7eWllbGQgdGhpcy5wcm9jZXNzV2l0aEFkZGl0aW9uYWxBY3Rpb24oZSl9fSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gdGhpcy50ZE9ubGluZU1hcnRDbGllbnQ9dm9pZCAwLHRoaXMudGRJbnB1dHMuZm9yRWFjaCgoe2lucHV0RWxlbWVudDplfSk9PntudWxsPT1lfHxlLnVubW91bnQoKX0pLFByb21pc2UucmVzb2x2ZSgpfWdldFBheW1lbnRQYXlsb2FkT3JUaHJvdyhlKXtyZXR1cm4gUnAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOnQscGF5bWVudERhdGE6bn09ZSx7c2hvdWxkU2F2ZUluc3RydW1lbnQ6aT0hMSxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OnI9ITF9PVBkKG4pP246e30sbz17YnJvd3Nlcl9pbmZvOkRvKCksc2hvdWxkU2F2ZUluc3RydW1lbnQ6aSxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OnJ9O2lmKFBkKG4pJiZTZChuKSYmbi5pbnN0cnVtZW50SWQpe2NvbnN0IGU9ISF0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmxpbmVJdGVtcy5kaWdpdGFsSXRlbXMubGVuZ3RoLGk9IXRoaXMuaXNUcnVzdGVkVmF1bHRpbmdJbnN0cnVtZW50KG4uaW5zdHJ1bWVudElkKXx8ZTtyZXR1cm57bWV0aG9kSWQ6dCxwYXltZW50RGF0YTpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxvKSx7aW5zdHJ1bWVudElkOm4uaW5zdHJ1bWVudElkfSksaT97bm9uY2U6bi5pbnN0cnVtZW50SWR9Ont9KX19bGV0IGE7dHJ5e2E9eWllbGQgdGhpcy5nZXRUb2tlbk9yVGhyb3coKX1jYXRjaChlKXt0aGlzLnRocm93VG9rZW5pemF0aW9uRXJyb3IoZSl9cmV0dXJue21ldGhvZElkOnQscGF5bWVudERhdGE6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG8pLHtub25jZTphfSl9fSl9bW91bnRIb3N0ZWRGaWVsZHMoZSl7Y29uc3QgdD10aGlzLmdldEhvc3RlZEZpZWxkc09wdGlvbnMoKSxuPXRoaXMuZ2V0VERPbmxpbmVNYXJ0Q2xpZW50T3JUaHJvdygpO3RoaXMudGRJbnB1dHMuZm9yRWFjaChpPT57Y29uc3Qgcj1gJHtlfS0ke2kuaWR9YDtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyKSYmKGkuaW5wdXRFbGVtZW50PW4uY3JlYXRlKGkuZmllbGRUeXBlLHQpLGkuaW5wdXRFbGVtZW50Lm1vdW50KGAjJHtyfWApKX0pfWxvYWRURE9ubGluZU1hcnRKcygpe3JldHVybiBScCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMudGRPbmxpbmVNYXJ0Q2xpZW50P3RoaXMudGRPbmxpbmVNYXJ0Q2xpZW50OnRoaXMudGRPbmxpbmVNYXJ0U2NyaXB0TG9hZGVyLmxvYWQoKX0pfWdldFRva2VuT3JUaHJvdygpe3JldHVybiBuZXcgUHJvbWlzZSgoZSx0KT0+e3RoaXMuZ2V0VERPbmxpbmVNYXJ0Q2xpZW50T3JUaHJvdygpLmNyZWF0ZVRva2VuKG49Pntjb25zdHtlcnJvcjppLHRva2VuOnJ9PW47aWYoaXx8IXIpcmV0dXJuIHQoaSk7ZShyKX0pfSl9Z2V0VERPbmxpbmVNYXJ0Q2xpZW50T3JUaHJvdygpe2lmKCF0aGlzLnRkT25saW5lTWFydENsaWVudCl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gdGhpcy50ZE9ubGluZU1hcnRDbGllbnR9cHJvY2Vzc1dpdGhBZGRpdGlvbmFsQWN0aW9uKGUpe3JldHVybiBScCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIWZ1bmN0aW9uKGUpe3JldHVybiBYcihlKSYmKHQ9ZS5ib2R5LEQodCkmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZcImVycm9yc1wiaW4gdCYmXCJ0aHJlZV9kc19yZXN1bHRcImluIHQmJk8odC5lcnJvcnMpJiZaKHQuZXJyb3JzLHtjb2RlOlwidGhyZWVfZF9zZWN1cmVfcmVxdWlyZWRcIn0pKTt2YXIgdH0oZSkpdGhyb3cgZTtjb25zdHt0aHJlZV9kc19yZXN1bHQ6dH09ZS5ib2R5LHthY3NfdXJsOm4scGF5ZXJfYXV0aF9yZXF1ZXN0OmksbWVyY2hhbnRfZGF0YTpyfT10fHx7fTtpZighbnx8IWl8fCFyKXRocm93IG5ldyBZaShbXCJmb3JtVXJsXCIsXCJ0aHJlZURTU2Vzc2lvbkRhdGFcIixcImNyZXFcIl0pO3JldHVybiBuZXcgUHJvbWlzZShlPT57dGhpcy5mb3JtUG9zdGVyLnBvc3RGb3JtKG4se3RocmVlRFNTZXNzaW9uRGF0YTppLGNyZXE6cn0sZSxcIl90b3BcIil9KX0pfXRocm93VG9rZW5pemF0aW9uRXJyb3IoZSl7aWYoIWZ1bmN0aW9uKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmXCJmaWVsZFwiaW4gZSYmXCJ0eXBlXCJpbiBlJiZcIm1lc3NhZ2VcImluIGV9KGUpKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudFRva2VuKTt0aHJvdyBuZXcgRXJyb3IoZS5tZXNzYWdlKX1nZXRIb3N0ZWRGaWVsZHNPcHRpb25zKCl7cmV0dXJue3N0eWxlOntlcnJvcjp7Y29sb3I6XCIjZDE0MzQzXCJ9fSxjbGFzc2VzOntlcnJvcjpcImZvcm0taW5wdXQtLWVycm9yXCJ9fX1pc1RydXN0ZWRWYXVsdGluZ0luc3RydW1lbnQoZSl7Y29uc3QgdD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRJbnN0cnVtZW50cygpLG49bnVsbD09dD92b2lkIDA6dC5maW5kKHQ9PktkKHQpJiZ0LmJpZ3BheVRva2VuPT09ZSk7cmV0dXJuIShLZChuKSYmIW4udHJ1c3RlZFNoaXBwaW5nQWRkcmVzcyl9fWNsYXNzIEJwe2NvbnN0cnVjdG9yKGUsdD13aW5kb3cpe3RoaXMuc2NyaXB0TG9hZGVyPWUsdGhpcy50ZE9ubGluZU1hcnRXaW5kb3c9dH1sb2FkKCl7cmV0dXJuIGU9dGhpcyx0PXZvaWQgMCxpPWZ1bmN0aW9uKigpe2lmKHRoaXMudGRPbmxpbmVNYXJ0V2luZG93LmN1c3RvbWNoZWNrb3V0fHwoeWllbGQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChcImh0dHBzOi8vbGlicy5uYS5iYW1ib3JhLmNvbS9jdXN0b21jaGVja291dC8xL2N1c3RvbWNoZWNrb3V0LmpzXCIpKSwhdGhpcy50ZE9ubGluZU1hcnRXaW5kb3cuY3VzdG9tY2hlY2tvdXQpdGhyb3cgbmV3IFh0O3JldHVybiB0aGlzLnRkT25saW5lTWFydFdpbmRvdy5jdXN0b21jaGVja291dCgpfSxuZXcoKG49dm9pZCAwKXx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSk7dmFyIGUsdCxuLGl9fWNvbnN0IGpwPW5uKGU9Pm5ldyBMcChlLG5ldyBCcChhKCkpLEVlKCkpLFt7aWQ6XCJ0ZG9ubGluZW1hcnRcIn1dKTt2YXIgVXA9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y29uc3QgcXA9XCJQYXltZW50IGNhbm5vdCBjb250aW51ZVwiO2xldCBWcDtjbGFzcyBHcCBleHRlbmRzIEZse2luaXRpYWxpemUoZSl7Y29uc3QgdD1PYmplY3QuY3JlYXRlKG51bGwse2luaXRpYWxpemU6e2dldDooKT0+c3VwZXIuaW5pdGlhbGl6ZX19KTtyZXR1cm4gVXAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKHRoaXMuX2luaXRpYWxpemVPcHRpb25zPWUmJmUud29ybGRwYXksIXRoaXMuX2luaXRpYWxpemVPcHRpb25zKXRocm93IG5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3JldHVybiB0LmluaXRpYWxpemUuY2FsbCh0aGlzLGUpfSl9ZXhlY3V0ZShlLHQpe2NvbnN0IG49T2JqZWN0LmNyZWF0ZShudWxsLHtleGVjdXRlOntnZXQ6KCk9PnN1cGVyLmV4ZWN1dGV9fSk7cmV0dXJuIFVwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Oml9PWU7aWYoVnA9dGhpcy5fc3VibWl0QWRkaXRpb25hbEFjdGlvbigpLCFpKXRocm93IG5ldyBZaShbXCJwYXltZW50XCJdKTt0cnl7cmV0dXJuIHlpZWxkIG4uZXhlY3V0ZS5jYWxsKHRoaXMsZSx0KX1jYXRjaChlKXtyZXR1cm4gdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZSxpKX19KX1fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZSx0KXtyZXR1cm4gVXAodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiBYcihlKSYmWihlLmJvZHkuZXJyb3JzLHtjb2RlOlwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWRcIn0pP25ldyBQcm9taXNlKChuLGkpPT57Y29uc3Qgcj1lPT5VcCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUuZGF0YXx8IXRoaXMuX2lzVmFsaWRKc29uV2l0aFNlc3Npb25JZChlLmRhdGEpKXJldHVybiBpKG5ldyBFcnJvcihxcCkpO3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHIpLG8ucmVtb3ZlKCk7Y29uc3QgYT1KU09OLnBhcnNlKGUuZGF0YSkscz1xKHt9LHQse3BheW1lbnREYXRhOnt0aHJlZURTZWN1cmU6e3Rva2VuOmEuU2Vzc2lvbklkfX19KTt0cnl7bih5aWVsZCBWcChzKSl9Y2F0Y2goZSl7aWYoIVhyKGUpfHwhWihlLmJvZHkuZXJyb3JzLHtjb2RlOlwidGhyZWVfZF9zZWN1cmVfcmVxdWlyZWRcIn0pKXJldHVybiBpKGUpO2lmKCF0aGlzLl9pbml0aWFsaXplT3B0aW9ucylyZXR1cm4gaShuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKSk7Y29uc3R7b25Mb2FkOnR9PXRoaXMuX2luaXRpYWxpemVPcHRpb25zLG49dGhpcy5fY3JlYXRlSWZyYW1lKGUuYm9keS50aHJlZV9kc19yZXN1bHQpO3RyeXt0KG4sKCk9PmkobmV3IEVycm9yKFwiUGF5bWVudCB3YXMgY2FuY2VsbGVkXCIpKSl9Y2F0Y2goZSl7aShuZXcgRXJyb3IocXApKX19fSk7bGV0IG87d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIscik7dHJ5e289dGhpcy5fY3JlYXRlSGlkZGVuSWZyYW1lKGUuYm9keSl9Y2F0Y2goZSl7dGhyb3cgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsciksbmV3IEVycm9yKHFwKX19KTpQcm9taXNlLnJlamVjdChlKX0pfV9jcmVhdGVIaWRkZW5JZnJhbWUoZSl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO2lmKGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCksIXQuY29udGVudFdpbmRvdyl0aHJvdyBuZXcgRXJyb3I7dC5pZD1cIndvcmxkcGF5X2hvc3RlZF9oaWRkZW5fcGF5bWVudF9wYWdlXCIsdC5oZWlnaHQ9XCIwcHhcIix0LndpZHRoPVwiMHB4XCI7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKSxpPVwiY29sbGVjdGlvbkZvcm1cIjtuLmlkPWksbi5uYW1lPVwiZGV2aWNlZGF0YVwiLG4ubWV0aG9kPVwicG9zdFwiO2NvbnN0IHI9ZS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZC5kYXRhLnJlZGlyZWN0X3VybDtuLmFjdGlvbj1yO2NvbnN0IG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO28ubmFtZT1cIkJpblwiLG8udHlwZT1cImhpZGRlblwiLG8udmFsdWU9ZS5wcm92aWRlcl9kYXRhLnNvdXJjZV9pZCxuLmFwcGVuZENoaWxkKG8pO2NvbnN0IGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2EubmFtZT1cIkpXVFwiLGEudHlwZT1cImhpZGRlblwiLGEudmFsdWU9ZS5wcm92aWRlcl9kYXRhLmRhdGEsbi5hcHBlbmRDaGlsZChhKTtjb25zdCBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7cy50eXBlPVwic3VibWl0XCIscy5pZD1cImJ0bnN1Ym1pdFwiLG4uYXBwZW5kQ2hpbGQocyksbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaChcIkZpcmVmb3hcIik/dC5zcmNkb2M9bi5vdXRlckhUTUw6dC5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobik7Y29uc3QgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO3JldHVybiBkLmlubmVySFRNTD1gXFxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJyR7aX0nKS5zdWJtaXQoKTtcXG4gICAgICAgIGAsdC5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZCksdH1fY3JlYXRlSWZyYW1lKGUpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7dC5pZD1cImNoYWxsZW5nZUZvcm1cIix0Lm1ldGhvZD1cIlBPU1RcIix0LmFjdGlvbj1lLmFjc191cmw7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7bi5uYW1lPVwiSldUXCIsbi50eXBlPVwiaGlkZGVuXCIsbi52YWx1ZT1lLnBheWVyX2F1dGhfcmVxdWVzdCx0LmFwcGVuZENoaWxkKG4pO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2kubmFtZT1cIk1EXCIsaS50eXBlPVwiaGlkZGVuXCIsaS52YWx1ZT1gbWVyY2hhbnRTZXNzaW9uSWQ9JHtlLm1lcmNoYW50X2RhdGF9YCx0LmFwcGVuZENoaWxkKGkpO2NvbnN0IHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtyLnR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIixyLmlubmVySFRNTD1cIndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYWxsZW5nZUZvcm0nKS5zdWJtaXQoKTsgfVwiO2NvbnN0IG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtyZXR1cm4gby5uYW1lPVwid29ybGRwYXlfaG9zdGVkX3BheW1lbnRfcGFnZVwiLG8uaGVpZ2h0PVwiNDAwXCIsby53aWR0aD1cIjEwMCVcIixvLnNyY2RvYz1gJHt0Lm91dGVySFRNTH0gJHtyLm91dGVySFRNTH1gLG99X3N1Ym1pdEFkZGl0aW9uYWxBY3Rpb24oKXtpZih0aGlzLl9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtKXtpZighdGhpcy5faG9zdGVkRm9ybSl0aHJvdyBuZXcgVnQoVHQuUGF5bWVudE5vdEluaXRpYWxpemVkKTtjb25zdCBlPXRoaXMuX2hvc3RlZEZvcm07cmV0dXJuIHQ9PlVwKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCBlLnN1Ym1pdCh0KX0pfXJldHVybiBlPT5VcCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KGUpfSl9X2lzVmFsaWRKc29uV2l0aFNlc3Npb25JZChlKXt0cnl7cmV0dXJuISFKU09OLnBhcnNlKGUpLlNlc3Npb25JZH1jYXRjaChlKXtyZXR1cm4hMX19fWNvbnN0IEhwPW5uKGU9Pm5ldyBHcChlKSxbe2lkOlwid29ybGRwYXlhY2Nlc3NcIn1dKTtjbGFzcyAkcHtjb25zdHJ1Y3RvcihlKXt0aGlzLl9yZXF1ZXN0U2VuZGVyPWV9c2F2ZUV4dGVybmFsSWQoZSx0KXtyZXR1cm4gbj10aGlzLGk9dm9pZCAwLG89ZnVuY3Rpb24qKCl7Y29uc3Qgbj1gL2FwaS9zdG9yZWZyb250L3BheW1lbnQvJHtlfS9zYXZlLWV4dGVybmFsLWlkYCxpPXtoZWFkZXJzOk9iamVjdC5hc3NpZ24oe0FjY2VwdDp0aS5Kc29uVjEsXCJYLUFQSS1JTlRFUk5BTFwiOlhufSxuaSksYm9keTp7ZXh0ZXJuYWxJZDp0LHByb3ZpZGVyOmV9fTt5aWVsZCB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QobixpKX0sbmV3KChyPXZvaWQgMCl8fChyPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoby5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKG8udGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2Ygcj9uOm5ldyByKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKG89by5hcHBseShuLGl8fFtdKSkubmV4dCgpKX0pO3ZhciBuLGkscixvfX1jbGFzcyBXcHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuc3RvcmVmcm9udFBheW1lbnRSZXF1ZXN0U2VuZGVyPXR9aW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1leGVjdXRlKGUsdCl7cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6bn09ZSxpPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn0oZSxbXCJwYXltZW50XCJdKTtpZighbil0aHJvdyBuZXcgWWkoW1wicGF5bWVudFwiXSk7Y29uc3R7bWV0aG9kSWQ6cn09bix7Z2V0UGF5bWVudE1ldGhvZE9yVGhyb3c6b309eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKHIsdCkse2NsaWVudFRva2VuOmEsaW5pdGlhbGl6YXRpb25EYXRhOnN9PW8ociksZD1udWxsPT1zP3ZvaWQgMDpzLnJlZGlyZWN0VXJsO2lmKCFhfHwhZCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0e2lkOmN9PUpTT04ucGFyc2UoYSk7aWYoIWMpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50VG9rZW4pO2NvbnN0e2lzU3RvcmVDcmVkaXRBcHBsaWVkOmx9PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENoZWNrb3V0T3JUaHJvdygpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5hcHBseVN0b3JlQ3JlZGl0KGwpLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5pbml0aWFsaXplUGF5bWVudChyLHt1c2VTdG9yZUNyZWRpdDpsfSkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGksdCkseWllbGQgdGhpcy5fcHJlcGFyZUZvclJlZmVycmVkUmVnaXN0cmF0aW9uKHIsYyk7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHttZXRob2RJZDpyLHBheW1lbnREYXRhOntub25jZTpjfX0pfWNhdGNoKGUpe2lmKFhyKGUpJiZcImFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkXCI9PT1lLmJvZHkuc3RhdHVzKXJldHVybiBuZXcgUHJvbWlzZSgoKT0+d2luZG93LmxvY2F0aW9uLnJlcGxhY2UoZCkpO3Rocm93IGV9fSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF9kKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9X3ByZXBhcmVGb3JSZWZlcnJlZFJlZ2lzdHJhdGlvbihlLHQpe3JldHVybiB0aGlzLnN0b3JlZnJvbnRQYXltZW50UmVxdWVzdFNlbmRlci5zYXZlRXh0ZXJuYWxJZChlLHQpfX1jb25zdCBZcD1ubihlPT57Y29uc3R7Z2V0SG9zdDp0fT1lLmdldFN0YXRlKCksaT1uKHtob3N0OnQoKX0pLHI9bmV3ICRwKGkpO3JldHVybiBuZXcgV3AoZSxyKX0sW3tpZDpcInppcFwifSx7aWQ6XCJxdWFkcGF5XCJ9XSk7dmFyIEtwLEpwOyFmdW5jdGlvbihlKXtlLkxvYWRDb3VudHJpZXNSZXF1ZXN0ZWQ9XCJMT0FEX0NPVU5UUklFU19SRVFVRVNURURcIixlLkxvYWRDb3VudHJpZXNTdWNjZWVkZWQ9XCJMT0FEX0NPVU5UUklFU19TVUNDRUVERURcIixlLkxvYWRDb3VudHJpZXNGYWlsZWQ9XCJMT0FEX0NPVU5UUklFU19GQUlMRURcIn0oS3B8fChLcD17fSkpO2NsYXNzIFpwe2NvbnN0cnVjdG9yKGUpe3RoaXMuX2NvdW50cnlSZXF1ZXN0U2VuZGVyPWV9bG9hZENvdW50cmllcyhlKXtyZXR1cm4gb2UuY3JlYXRlKHQ9Pnt0Lm5leHQobChLcC5Mb2FkQ291bnRyaWVzUmVxdWVzdGVkKSksdGhpcy5fY291bnRyeVJlcXVlc3RTZW5kZXIubG9hZENvdW50cmllcyhlKS50aGVuKGU9Pnt0Lm5leHQobChLcC5Mb2FkQ291bnRyaWVzU3VjY2VlZGVkLGUuYm9keS5kYXRhKSksdC5jb21wbGV0ZSgpfSkuY2F0Y2goZT0+e3QuZXJyb3IoaChLcC5Mb2FkQ291bnRyaWVzRmFpbGVkLGUpKX0pfSl9fWNsYXNzIFFwe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lLHRoaXMuX2NvbmZpZz10fWxvYWRDb3VudHJpZXMoe3RpbWVvdXQ6ZX09e30pe2NvbnN0IHQ9T2JqZWN0LmFzc2lnbih7XCJBY2NlcHQtTGFuZ3VhZ2VcIjp0aGlzLl9jb25maWcubG9jYWxlfSxydCk7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIuZ2V0KFwiL2ludGVybmFsYXBpL3YxL3N0b3JlL2NvdW50cmllc1wiLHtoZWFkZXJzOnQsdGltZW91dDplfSl9fWNsYXNzIFhwIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJZb3VyIGNoZWNrb3V0IGNvdWxkIG5vdCBiZSBwcm9jZXNzZWQgYmVjYXVzZSBzb21lIGRldGFpbHMgaGF2ZSBjaGFuZ2VkLiBQbGVhc2UgcmV2aWV3IHlvdXIgb3JkZXIgYW5kIHRyeSBhZ2Fpbi5cIiksdGhpcy5uYW1lPVwiQ2FydENvbnNpc3RlbmN5RXJyb3JcIix0aGlzLnR5cGU9XCJjYXJ0X2NvbnNpc3RlbmN5XCJ9fWNsYXNzIGVtIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJUaGUgdGF4IHByb3ZpZGVyIGlzIHVuYXZhaWxhYmxlLlwiKSx0aGlzLm5hbWU9XCJPcmRlclRheFByb3ZpZGVyVW5hdmFpbGFibGVFcnJvclwiLHRoaXMudHlwZT1cInRheF9wcm92aWRlcl91bmF2YWlsYWJsZVwifX1jbGFzcyB0bSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMubmFtZT1cIk1pc3NpbmdTaGlwcGluZ01ldGhvZEVycm9yXCIsdGhpcy50eXBlPVwibWlzc2luZ19zaGlwcGluZ19tZXRob2RcIn19Y2xhc3Mgbm0gZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLm5hbWU9XCJJbnZhbGlkU2hpcHBpbmdBZGRyZXNzRXJyb3JcIix0aGlzLnR5cGU9XCJpbnZhbGlkX3NoaXBwaW5nX2FkZHJlc3NcIn19Y2xhc3MgaW17Y29uc3RydWN0b3IoZSl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lfWxvYWRPcmRlcihlLHt0aW1lb3V0OnR9PXt9KXtjb25zdCBuPWAvYXBpL3N0b3JlZnJvbnQvb3JkZXJzLyR7ZX1gLGk9T2JqZWN0LmFzc2lnbih7QWNjZXB0Oml0Lkpzb25WMX0scnQpO3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLmdldChuLHtwYXJhbXM6e2luY2x1ZGU6RHQoW1wicGF5bWVudHNcIixcImxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLnNvY2lhbE1lZGlhXCIsXCJsaW5lSXRlbXMucGh5c2ljYWxJdGVtcy5vcHRpb25zXCIsXCJsaW5lSXRlbXMucGh5c2ljYWxJdGVtcy5jYXRlZ29yaWVzXCIsXCJsaW5lSXRlbXMuZGlnaXRhbEl0ZW1zLnNvY2lhbE1lZGlhXCIsXCJsaW5lSXRlbXMuZGlnaXRhbEl0ZW1zLm9wdGlvbnNcIixcImxpbmVJdGVtcy5kaWdpdGFsSXRlbXMuY2F0ZWdvcmllc1wiXSl9LGhlYWRlcnM6aSx0aW1lb3V0OnR9KX1zdWJtaXRPcmRlcihlLHtoZWFkZXJzOnQsdGltZW91dDpufT17fSl7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdChcIi9pbnRlcm5hbGFwaS92MS9jaGVja291dC9vcmRlclwiLHtib2R5OmUsaGVhZGVyczpIKE9iamVjdC5hc3NpZ24oe1wiWC1DaGVja291dC1WYXJpYW50XCI6dCYmdC5jaGVja291dFZhcmlhbnR9LHJ0KSxUKSx0aW1lb3V0Om59KS5jYXRjaChlPT57aWYoXCJ0YXhfcHJvdmlkZXJfdW5hdmFpbGFibGVcIj09PWUuYm9keS50eXBlKXRocm93IG5ldyBlbTtpZihcImNhcnRfaGFzX2NoYW5nZWRcIj09PWUuYm9keS50eXBlKXRocm93IG5ldyBYcDtpZihcIm1pc3Npbmdfc2hpcHBpbmdfbWV0aG9kXCI9PT1lLmJvZHkudHlwZSl0aHJvdyBuZXcgdG0oZS5ib2R5LmRldGFpbCk7aWYoXCJpbnZhbGlkX3NoaXBwaW5nX2FkZHJlc3NcIj09PWUuYm9keS50eXBlKXRocm93IG5ldyBubShlLmJvZHkuZGV0YWlsKTtpZihcImVtcHR5X2NhcnRcIj09PWUuYm9keS50eXBlKXRocm93IG5ldyBudDt0aHJvdyBlfSl9ZmluYWxpemVPcmRlcihlLHt0aW1lb3V0OnR9PXt9KXtjb25zdCBuPWAvaW50ZXJuYWxhcGkvdjEvY2hlY2tvdXQvb3JkZXIvJHtlfWA7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdChuLHt0aW1lb3V0OnQsaGVhZGVyczpydH0pfX1jbGFzcyBybSBleHRlbmRzIFple2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJZb3UgaGF2ZW4ndCBjb21wbGV0ZSBvdXIgc3BhbSBjaGVjay4gUGxlYXNlIHRyeSBhZ2Fpbi5cIiksdGhpcy5uYW1lPVwiU3BhbVByb3RlY3Rpb25Ob3RDb21wbGV0ZWRFcnJvclwiLHRoaXMudHlwZT1cInNwYW1fcHJvdGVjdGlvbl9ub3RfY29tcGxldGVkXCJ9fSFmdW5jdGlvbihlKXtlLkxvYWRPcmRlclJlcXVlc3RlZD1cIkxPQURfT1JERVJfUkVRVUVTVEVEXCIsZS5Mb2FkT3JkZXJTdWNjZWVkZWQ9XCJMT0FEX09SREVSX1NVQ0NFRURFRFwiLGUuTG9hZE9yZGVyRmFpbGVkPVwiTE9BRF9PUkRFUl9GQUlMRURcIixlLkxvYWRPcmRlclBheW1lbnRzUmVxdWVzdGVkPVwiTE9BRF9PUkRFUl9QQVlNRU5UU19SRVFVRVNURURcIixlLkxvYWRPcmRlclBheW1lbnRzU3VjY2VlZGVkPVwiTE9BRF9PUkRFUl9QQVlNRU5UU19TVUNDRUVERURcIixlLkxvYWRPcmRlclBheW1lbnRzRmFpbGVkPVwiTE9BRF9PUkRFUl9QQVlNRU5UU19GQUlMRURcIixlLlN1Ym1pdE9yZGVyUmVxdWVzdGVkPVwiU1VCTUlUX09SREVSX1JFUVVFU1RFRFwiLGUuU3VibWl0T3JkZXJTdWNjZWVkZWQ9XCJTVUJNSVRfT1JERVJfU1VDQ0VFREVEXCIsZS5TdWJtaXRPcmRlckZhaWxlZD1cIlNVQk1JVF9PUkRFUl9GQUlMRURcIixlLkZpbmFsaXplT3JkZXJSZXF1ZXN0ZWQ9XCJGSU5BTElaRV9PUkRFUl9SRVFVRVNURURcIixlLkZpbmFsaXplT3JkZXJTdWNjZWVkZWQ9XCJGSU5BTElaRV9PUkRFUl9TVUNDRUVERURcIixlLkZpbmFsaXplT3JkZXJGYWlsZWQ9XCJGSU5BTElaRV9PUkRFUl9GQUlMRURcIn0oSnB8fChKcD17fSkpO3ZhciBvbSxhbTtjbGFzcyBzbXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX29yZGVyUmVxdWVzdFNlbmRlcj1lLHRoaXMuX2NoZWNrb3V0VmFsaWRhdG9yPXR9bG9hZE9yZGVyKGUsdCl7cmV0dXJuIG5ldyBvZShuPT57bi5uZXh0KGwoSnAuTG9hZE9yZGVyUmVxdWVzdGVkKSksdGhpcy5fb3JkZXJSZXF1ZXN0U2VuZGVyLmxvYWRPcmRlcihlLHQpLnRoZW4oZT0+e24ubmV4dChsKEpwLkxvYWRPcmRlclN1Y2NlZWRlZCxlLmJvZHkpKSxuLmNvbXBsZXRlKCl9KS5jYXRjaChlPT57bi5lcnJvcihoKEpwLkxvYWRPcmRlckZhaWxlZCxlKSl9KX0pfWxvYWRPcmRlclBheW1lbnRzKGUsdCl7cmV0dXJuIG5ldyBvZShuPT57bi5uZXh0KGwoSnAuTG9hZE9yZGVyUGF5bWVudHNSZXF1ZXN0ZWQpKSx0aGlzLl9vcmRlclJlcXVlc3RTZW5kZXIubG9hZE9yZGVyKGUsdCkudGhlbihlPT57bi5uZXh0KGwoSnAuTG9hZE9yZGVyUGF5bWVudHNTdWNjZWVkZWQsZS5ib2R5KSksbi5jb21wbGV0ZSgpfSkuY2F0Y2goZT0+e24uZXJyb3IoaChKcC5Mb2FkT3JkZXJQYXltZW50c0ZhaWxlZCxlKSl9KX0pfWxvYWRDdXJyZW50T3JkZXIoZSl7cmV0dXJuIHQ9PmRlKCgpPT57Y29uc3Qgbj10aGlzLl9nZXRDdXJyZW50T3JkZXJJZCh0LmdldFN0YXRlKCkpO2lmKCFuKXRocm93IG5ldyBRZShXZS5NaXNzaW5nT3JkZXJJZCk7cmV0dXJuIHRoaXMubG9hZE9yZGVyKG4sZSl9KX1zdWJtaXRPcmRlcihlLHQpe3JldHVybiBuPT5zZShtZShsKEpwLlN1Ym1pdE9yZGVyUmVxdWVzdGVkKSksZGUoKCk9Pntjb25zdCBpPW4uZ2V0U3RhdGUoKSxyPWkuY29uZmlnLmdldEV4dGVybmFsU291cmNlKCksbz1pLmNvbmZpZy5nZXRWYXJpYW50SWRlbnRpZmljYXRpb25Ub2tlbigpLGE9aS5jaGVja291dC5nZXRDaGVja291dCgpO2lmKCFhKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXQpO2lmKGEuc2hvdWxkRXhlY3V0ZVNwYW1DaGVjayl0aHJvdyBuZXcgcm07cmV0dXJuIGxlKHRoaXMuX2NoZWNrb3V0VmFsaWRhdG9yLnZhbGlkYXRlKGEsdCkudGhlbigoKT0+dGhpcy5fb3JkZXJSZXF1ZXN0U2VuZGVyLnN1Ym1pdE9yZGVyKHRoaXMuX21hcFRvT3JkZXJSZXF1ZXN0Qm9keShudWxsIT1lP2U6e30sYS5pZCxhLmN1c3RvbWVyTWVzc2FnZSxyKSxPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse2hlYWRlcnM6e2NoZWNrb3V0VmFyaWFudDpvfX0pKSkpLnBpcGUoSWUoZT0+c2UodGhpcy5sb2FkT3JkZXIoZS5ib2R5LmRhdGEub3JkZXIub3JkZXJJZCx0KSxtZShsKEpwLlN1Ym1pdE9yZGVyU3VjY2VlZGVkLGUuYm9keS5kYXRhLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlLmJvZHkubWV0YSkse3Rva2VuOmUuaGVhZGVycy50b2tlbn0pKSkpKSl9KS5waXBlKGdlKGU9PkplKEpwLlN1Ym1pdE9yZGVyRmFpbGVkLGUpKSkpfWZpbmFsaXplT3JkZXIoZSx0KXtyZXR1cm4gc2UobWUobChKcC5GaW5hbGl6ZU9yZGVyUmVxdWVzdGVkKSksbGUodGhpcy5fb3JkZXJSZXF1ZXN0U2VuZGVyLmZpbmFsaXplT3JkZXIoZSx0KSkucGlwZShJZShuPT5zZSh0aGlzLmxvYWRPcmRlcihlLHQpLG1lKGwoSnAuRmluYWxpemVPcmRlclN1Y2NlZWRlZCxuLmJvZHkuZGF0YSkpKSkpKS5waXBlKGdlKGU9PkplKEpwLkZpbmFsaXplT3JkZXJGYWlsZWQsZSkpKX1fZ2V0Q3VycmVudE9yZGVySWQoZSl7Y29uc3QgdD1lLm9yZGVyLmdldE9yZGVyKCksbj1lLmNoZWNrb3V0LmdldENoZWNrb3V0KCk7cmV0dXJuIHQmJnQub3JkZXJJZHx8biYmbi5vcmRlcklkfV9tYXBUb09yZGVyUmVxdWVzdEJvZHkoZSx0LG4saSl7Y29uc3R7cGF5bWVudDpyfT1lLG89ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pO3JldHVybiByP09iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxvKSx7Y2FydElkOnQsY3VzdG9tZXJNZXNzYWdlOm4sZXh0ZXJuYWxTb3VyY2U6aSxwYXltZW50OntwYXltZW50RGF0YTpyLnBheW1lbnREYXRhLG5hbWU6ci5tZXRob2RJZCxnYXRld2F5OnIuZ2F0ZXdheUlkfX0pOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxvKSx7Y2FydElkOnQsY3VzdG9tZXJNZXNzYWdlOm4sZXh0ZXJuYWxTb3VyY2U6aX0pfX1mdW5jdGlvbiBkbShlKXtjb25zdCB0PVRlKCk7cmV0dXJuIGUuc3Vic2NyaWJlKGU9Pntjb25zdCBuPWUuY29uZmlnLmdldFN0b3JlQ29uZmlnKCk7biYmdC5zZXRIb3N0KG4ucGF5bWVudFNldHRpbmdzLmJpZ3BheUJhc2VVcmwpfSxlPT5lLmNvbmZpZy5nZXRTdG9yZUNvbmZpZygpKSx0fWZ1bmN0aW9uIGNtKGUsdD0kZSxuPXt1c2VGYWxsYmFjazohMX0pe2NvbnN0e3VzZUZhbGxiYWNrOml9PW4scj1uZXcgTHQoaSk7Zm9yKGNvbnN0WyxuXW9mIE9iamVjdC5lbnRyaWVzKHQpKWlmKHh0KG4pKWZvcihjb25zdCB0IG9mIG4ucmVzb2x2ZUlkcylyLnJlZ2lzdGVyKHQsKCk9Pm4oZSkpO3JldHVybiByfWNsYXNzIGxtIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoKXtzdXBlcihcIlRoZSBjdXJyZW50IG9yZGVyIGRvZXMgbm90IG5lZWQgdG8gYmUgZmluYWxpemVkIGF0IHRoaXMgc3RhZ2UuXCIpLHRoaXMubmFtZT1cIk9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvclwiLHRoaXMudHlwZT1cIm9yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWRcIn19IWZ1bmN0aW9uKGUpe2UuRXhlY3V0ZUZhaWxlZD1cIlBBWU1FTlRfU1RSQVRFR1lfRVhFQ1VURV9GQUlMRURcIixlLkV4ZWN1dGVSZXF1ZXN0ZWQ9XCJQQVlNRU5UX1NUUkFURUdZX0VYRUNVVEVfUkVRVUVTVEVEXCIsZS5FeGVjdXRlU3VjY2VlZGVkPVwiUEFZTUVOVF9TVFJBVEVHWV9FWEVDVVRFX1NVQ0NFRURFRFwiLGUuRmluYWxpemVGYWlsZWQ9XCJQQVlNRU5UX1NUUkFURUdZX0ZJTkFMSVpFX0ZBSUxFRFwiLGUuRmluYWxpemVSZXF1ZXN0ZWQ9XCJQQVlNRU5UX1NUUkFURUdZX0ZJTkFMSVpFX1JFUVVFU1RFRFwiLGUuRmluYWxpemVTdWNjZWVkZWQ9XCJQQVlNRU5UX1NUUkFURUdZX0ZJTkFMSVpFX1NVQ0NFRURFRFwiLGUuSW5pdGlhbGl6ZUZhaWxlZD1cIlBBWU1FTlRfU1RSQVRFR1lfSU5JVElBTElaRV9GQUlMRURcIixlLkluaXRpYWxpemVSZXF1ZXN0ZWQ9XCJQQVlNRU5UX1NUUkFURUdZX0lOSVRJQUxJWkVfUkVRVUVTVEVEXCIsZS5Jbml0aWFsaXplU3VjY2VlZGVkPVwiUEFZTUVOVF9TVFJBVEVHWV9JTklUSUFMSVpFX1NVQ0NFRURFRFwiLGUuRGVpbml0aWFsaXplRmFpbGVkPVwiUEFZTUVOVF9TVFJBVEVHWV9ERUlOSVRJQUxJWkVfRkFJTEVEXCIsZS5EZWluaXRpYWxpemVSZXF1ZXN0ZWQ9XCJQQVlNRU5UX1NUUkFURUdZX0RFSU5JVElBTElaRV9SRVFVRVNURURcIixlLkRlaW5pdGlhbGl6ZVN1Y2NlZWRlZD1cIlBBWU1FTlRfU1RSQVRFR1lfREVJTklUSUFMSVpFX1NVQ0NFRURFRFwiLGUuV2lkZ2V0SW50ZXJhY3Rpb25TdGFydGVkPVwiUEFZTUVOVF9TVFJBVEVHWV9XSURHRVRfSU5URVJBQ1RJT05fU1RBUlRFRFwiLGUuV2lkZ2V0SW50ZXJhY3Rpb25GaW5pc2hlZD1cIlBBWU1FTlRfU1RSQVRFR1lfV0lER0VUX0lOVEVSQUNUSU9OX0ZJTklTSEVEXCIsZS5XaWRnZXRJbnRlcmFjdGlvbkZhaWxlZD1cIlBBWU1FTlRfU1RSQVRFR1lfV0lER0VUX0lOVEVSQUNUSU9OX0ZBSUxFRFwifShvbXx8KG9tPXt9KSksZnVuY3Rpb24oZSl7ZS5BRFlFTlYyPVwiYWR5ZW52MlwiLGUuQURZRU5WMl9HT09HTEVQQVk9XCJnb29nbGVwYXlhZHllbnYyXCIsZS5BRFlFTlYzPVwiYWR5ZW52M1wiLGUuQURZRU5WM19HT09HTEVQQVk9XCJnb29nbGVwYXlhZHllbnYzXCIsZS5BRkZJUk09XCJhZmZpcm1cIixlLkFGVEVSUEFZPVwiYWZ0ZXJwYXlcIixlLkFVVEhPUklaRU5FVF9HT09HTEVfUEFZPVwiZ29vZ2xlcGF5YXV0aG9yaXplbmV0XCIsZS5BTUFaT05QQVk9XCJhbWF6b25wYXlcIixlLkFQUExFUEFZPVwiYXBwbGVwYXlcIixlLkJBUkNMQVlTPVwiYmFyY2xheXNcIixlLkJMVUVTTkFQVjI9XCJibHVlc25hcHYyXCIsZS5CT0xUPVwiYm9sdFwiLGUuQ0JBX01QR1M9XCJjYmFfbXBnc1wiLGUuQ0hFQ0tPVVRDT009XCJjaGVja291dGNvbVwiLGUuQ0hFQ0tPVVRDT01fQVBNPVwiY2hlY2tvdXRjb21hcG1cIixlLkNIRUNLT1VUQ09NX0ZBV1JZPVwiY2hlY2tvdXRjb21mYXdyeVwiLGUuQ0hFQ0tPVVRDT01fU0VQQT1cImNoZWNrb3V0Y29tc2VwYVwiLGUuQ0hFQ0tPVVRDT01fSURFQUw9XCJjaGVja291dGNvbWlkZWFsXCIsZS5DUkVESVRfQ0FSRD1cImNyZWRpdGNhcmRcIixlLkNIRUNLT1VUQ09NX0dPT0dMRV9QQVk9XCJnb29nbGVwYXljaGVja291dGNvbVwiLGUuQ0xFQVJQQVk9XCJjbGVhcnBheVwiLGUuQ09OVkVSR0U9XCJjb252ZXJnZVwiLGUuQ1lCRVJTT1VSQ0U9XCJjeWJlcnNvdXJjZVwiLGUuQ1lCRVJTT1VSQ0VWMj1cImN5YmVyc291cmNldjJcIixlLkJOWj1cImJuelwiLGUuQk5aX0dPT0dMRVBBWT1cImdvb2dsZXBheWJuelwiLGUuQ1lCRVJTT1VSQ0VWMl9HT09HTEVfUEFZPVwiZ29vZ2xlcGF5Y3liZXJzb3VyY2V2MlwiLGUuSFVNTT1cImh1bW1cIixlLktMQVJOQT1cImtsYXJuYVwiLGUuS0xBUk5BVjI9XCJrbGFybmF2MlwiLGUuTEFZQlVZPVwibGF5YnV5XCIsZS5MRUdBQ1k9XCJsZWdhY3lcIixlLk1PTExJRT1cIm1vbGxpZVwiLGUuTU9ORVJJUz1cIm1vbmVyaXNcIixlLk5PX1BBWU1FTlRfREFUQV9SRVFVSVJFRD1cIm5vcGF5bWVudGRhdGFyZXF1aXJlZFwiLGUuT0ZGTElORT1cIm9mZmxpbmVcIixlLk9GRlNJVEU9XCJvZmZzaXRlXCIsZS5PUkJJVEFMX0dPT0dMRV9QQVk9XCJnb29nbGVwYXlvcmJpdGFsXCIsZS5QQVlQQUxfRVhQUkVTUz1cInBheXBhbGV4cHJlc3NcIixlLlBBWVBBTF9FWFBSRVNTX0NSRURJVD1cInBheXBhbGV4cHJlc3NjcmVkaXRcIixlLlBBWVBBTF9DT01NRVJDRT1cInBheXBhbGNvbW1lcmNlXCIsZS5QQVlQQUxfQ09NTUVSQ0VfQ1JFRElUPVwicGF5cGFsY29tbWVyY2VjcmVkaXRcIixlLlBBWVBBTF9DT01NRVJDRV9DUkVESVRfQ0FSRD1cInBheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHNcIixlLlBBWVBBTF9DT01NRVJDRV9BTFRFUk5BVElWRV9NRVRIT0RTPVwicGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHNcIixlLlBBWVBBTF9DT01NRVJDRV9WRU5NTz1cInBheXBhbGNvbW1lcmNldmVubW9cIixlLlBQU0RLPVwiUEFZTUVOVF9UWVBFX1NES1wiLGUuUVVBRFBBWT1cInF1YWRwYXlcIixlLlNBR0VfUEFZPVwic2FnZXBheVwiLGUuU1FVQVJFPVwic3F1YXJldjJcIixlLlNUUklQRVYzPVwic3RyaXBldjNcIixlLlNUUklQRV9VUEU9XCJzdHJpcGV1cGVcIixlLlNUUklQRV9VUEVfR09PR0xFX1BBWT1cImdvb2dsZXBheXN0cmlwZXVwZVwiLGUuQlJBSU5UUkVFPVwiYnJhaW50cmVlXCIsZS5CUkFJTlRSRUVfUEFZUEFMPVwiYnJhaW50cmVlcGF5cGFsXCIsZS5CUkFJTlRSRUVfVkVOTU89XCJicmFpbnRyZWV2ZW5tb1wiLGUuQlJBSU5UUkVFX1BBWVBBTF9DUkVESVQ9XCJicmFpbnRyZWVwYXlwYWxjcmVkaXRcIixlLkJSQUlOVFJFRV9WSVNBX0NIRUNLT1VUPVwiYnJhaW50cmVldmlzYWNoZWNrb3V0XCIsZS5CUkFJTlRSRUVfR09PR0xFX1BBWT1cImdvb2dsZXBheWJyYWludHJlZVwiLGUuV0VfUEFZPVwid2VwYXlcIixlLldPUkxEUEFZQUNDRVNTPVwid29ybGRwYXlhY2Nlc3NcIixlLldPUkxEUEFZQUNDRVNTX0dPT0dMRV9QQVk9XCJnb29nbGVwYXl3b3JsZHBheWFjY2Vzc1wiLGUuTUFTVEVSUEFTUz1cIm1hc3RlcnBhc3NcIixlLlNUUklQRV9HT09HTEVfUEFZPVwiZ29vZ2xlcGF5c3RyaXBlXCIsZS5TRVpaTEU9XCJzZXp6bGVcIixlLlpJUD1cInppcFwifShhbXx8KGFtPXt9KSk7Y29uc3QgdW09YW07Y2xhc3MgaG17d2lkZ2V0SW50ZXJhY3Rpb24oZSx0KXtjb25zdCBuPXttZXRob2RJZDp0JiZ0Lm1ldGhvZElkfTtyZXR1cm4gc2UobWUobChvbS5XaWRnZXRJbnRlcmFjdGlvblN0YXJ0ZWQsdm9pZCAwLG4pKSxkZSgoKT0+ZSgpLnRoZW4oKCk9Pmwob20uV2lkZ2V0SW50ZXJhY3Rpb25GaW5pc2hlZCx2b2lkIDAsbikpKSkucGlwZShnZShlPT5KZShvbS5XaWRnZXRJbnRlcmFjdGlvbkZhaWxlZCxlLG4pKSl9fWNsYXNzIHBte2NvbnN0cnVjdG9yKGUsdCxuLGkpe3RoaXMuX3N0cmF0ZWd5UmVnaXN0cnk9ZSx0aGlzLl9zdHJhdGVneVJlZ2lzdHJ5VjI9dCx0aGlzLl9vcmRlckFjdGlvbkNyZWF0b3I9bix0aGlzLl9zcGFtUHJvdGVjdGlvbkFjdGlvbkNyZWF0b3I9aSx0aGlzLl9wYXltZW50U3RyYXRlZ3lXaWRnZXRBY3Rpb25DcmVhdG9yPW5ldyBobX1leGVjdXRlKGUsdCl7Y29uc3R7cGF5bWVudDpuPXt9LHVzZVN0b3JlQ3JlZGl0Oml9PWUscj17bWV0aG9kSWQ6bi5tZXRob2RJZH07cmV0dXJuIG89Pntjb25zdHtjaGVja291dDphfT1vLmdldFN0YXRlKCkse3Nob3VsZEV4ZWN1dGVTcGFtQ2hlY2s6c309YS5nZXRDaGVja291dE9yVGhyb3coKTtyZXR1cm4gc2Uocz90aGlzLl9zcGFtUHJvdGVjdGlvbkFjdGlvbkNyZWF0b3IudmVyaWZ5Q2hlY2tvdXRTcGFtUHJvdGVjdGlvbigpKG8pOmNlKCksbWUobChvbS5FeGVjdXRlUmVxdWVzdGVkLHZvaWQgMCxyKSksZGUoKCk9Pntjb25zdCBhPW8uZ2V0U3RhdGUoKTtsZXQgcztpZihhLnBheW1lbnQuaXNQYXltZW50RGF0YVJlcXVpcmVkKGkpKXtjb25zdCBlPWEucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZChuLm1ldGhvZElkLG4uZ2F0ZXdheUlkKTtpZighZSl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ1BheW1lbnRNZXRob2QpO3M9dGhpcy5fZ2V0U3RyYXRlZ3koZSl9ZWxzZSBzPXRoaXMuX3N0cmF0ZWd5UmVnaXN0cnlWMi5nZXQoe2lkOnVtLk5PX1BBWU1FTlRfREFUQV9SRVFVSVJFRH0pO3JldHVybiBzLmV4ZWN1dGUoZSxPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse21ldGhvZElkOm4ubWV0aG9kSWQsZ2F0ZXdheUlkOm4uZ2F0ZXdheUlkfSkpLnRoZW4oKCk9Pmwob20uRXhlY3V0ZVN1Y2NlZWRlZCx2b2lkIDAscikpfSkpLnBpcGUoZ2UoZT0+SmUob20uRXhlY3V0ZUZhaWxlZCxlLHIpKSl9fWZpbmFsaXplKGUpe3JldHVybiB0PT5zZShtZShsKG9tLkZpbmFsaXplUmVxdWVzdGVkKSksdGhpcy5fbG9hZE9yZGVyUGF5bWVudHNJZk5lZWRlZCh0LGUpLGRlKCgpPT57cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe2NvbnN0IG49dC5nZXRTdGF0ZSgpLHtwcm92aWRlcklkOmk9XCJcIixnYXRld2F5SWQ6cj1cIlwifT1uLnBheW1lbnQuZ2V0UGF5bWVudElkKCl8fHt9LG89bi5wYXltZW50TWV0aG9kcy5nZXRQYXltZW50TWV0aG9kKGkscik7aWYoIW8pdGhyb3cgbmV3IGxtO2NvbnN0IGE9dGhpcy5fZ2V0U3RyYXRlZ3kobyk7cmV0dXJuIHlpZWxkIGEuZmluYWxpemUoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHttZXRob2RJZDpvLmlkLGdhdGV3YXlJZDpvLmdhdGV3YXl9KSksbChvbS5GaW5hbGl6ZVN1Y2NlZWRlZCx2b2lkIDAse21ldGhvZElkOm8uaWR9KX0sbmV3KChyPXZvaWQgMCl8fChyPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoby5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKG8udGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2Ygcj9uOm5ldyByKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKG89by5hcHBseShuLGl8fFtdKSkubmV4dCgpKX0pO3ZhciBuLGkscixvfSkpLnBpcGUoZ2UoZT0+e2NvbnN0IG49dC5nZXRTdGF0ZSgpLnBheW1lbnQuZ2V0UGF5bWVudElkKCk7cmV0dXJuIEplKG9tLkZpbmFsaXplRmFpbGVkLGUse21ldGhvZElkOm4mJm4ucHJvdmlkZXJJZH0pfSkpfWluaXRpYWxpemUoZSl7Y29uc3R7bWV0aG9kSWQ6dCxnYXRld2F5SWQ6bn09ZTtyZXR1cm4gaT0+ZGUoKCk9Pntjb25zdCByPWkuZ2V0U3RhdGUoKSxvPXIucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZCh0LG4pO2lmKCFvKXRocm93IG5ldyBRZShXZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7aWYodCYmci5wYXltZW50U3RyYXRlZ2llcy5pc0luaXRpYWxpemVkKHttZXRob2RJZDp0LGdhdGV3YXlJZDpufSkpcmV0dXJuIGNlKCk7Y29uc3QgYT10aGlzLl9nZXRTdHJhdGVneShvKS5pbml0aWFsaXplKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7bWV0aG9kSWQ6dCxnYXRld2F5SWQ6bn0pKTtyZXR1cm4gc2UobWUobChvbS5Jbml0aWFsaXplUmVxdWVzdGVkLHZvaWQgMCx7bWV0aG9kSWQ6dCxnYXRld2F5SWQ6bn0pKSxhLnRoZW4oKCk9Pmwob20uSW5pdGlhbGl6ZVN1Y2NlZWRlZCx2b2lkIDAse21ldGhvZElkOnQsZ2F0ZXdheUlkOm59KSkpfSkucGlwZShnZShlPT5KZShvbS5Jbml0aWFsaXplRmFpbGVkLGUse21ldGhvZElkOnQsZ2F0ZXdheUlkOm59KSkpfWRlaW5pdGlhbGl6ZShlKXtjb25zdHttZXRob2RJZDp0LGdhdGV3YXlJZDpufT1lO3JldHVybiBpPT5kZSgoKT0+e2NvbnN0IHI9aS5nZXRTdGF0ZSgpLG89ci5wYXltZW50TWV0aG9kcy5nZXRQYXltZW50TWV0aG9kKHQsbik7aWYoIW8pdGhyb3cgbmV3IFFlKFdlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtpZih0JiYhci5wYXltZW50U3RyYXRlZ2llcy5pc0luaXRpYWxpemVkKHttZXRob2RJZDp0LGdhdGV3YXlJZDpufSkpcmV0dXJuIGNlKCk7Y29uc3QgYT10aGlzLl9nZXRTdHJhdGVneShvKS5kZWluaXRpYWxpemUoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHttZXRob2RJZDp0LGdhdGV3YXlJZDpufSkpO3JldHVybiBzZShtZShsKG9tLkRlaW5pdGlhbGl6ZVJlcXVlc3RlZCx2b2lkIDAse21ldGhvZElkOnQsZ2F0ZXdheUlkOm59KSksYS50aGVuKCgpPT5sKG9tLkRlaW5pdGlhbGl6ZVN1Y2NlZWRlZCx2b2lkIDAse21ldGhvZElkOnQsZ2F0ZXdheUlkOm59KSkpfSkucGlwZShnZShlPT5KZShvbS5EZWluaXRpYWxpemVGYWlsZWQsZSx7bWV0aG9kSWQ6dCxnYXRld2F5SWQ6bn0pKSl9d2lkZ2V0SW50ZXJhY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fcGF5bWVudFN0cmF0ZWd5V2lkZ2V0QWN0aW9uQ3JlYXRvci53aWRnZXRJbnRlcmFjdGlvbihlLHQpfV9nZXRTdHJhdGVneShlKXtsZXQgdDt0cnl7dD10aGlzLl9zdHJhdGVneVJlZ2lzdHJ5LmdldEJ5TWV0aG9kKGUpfWNhdGNoKG4pe3Q9dGhpcy5fc3RyYXRlZ3lSZWdpc3RyeVYyLmdldCh7aWQ6ZS5pZCxnYXRld2F5OmUuZ2F0ZXdheSx0eXBlOmUudHlwZX0pfXJldHVybiB0fV9sb2FkT3JkZXJQYXltZW50c0lmTmVlZGVkKGUsdCl7Y29uc3Qgbj1lLmdldFN0YXRlKCkuY2hlY2tvdXQuZ2V0Q2hlY2tvdXQoKTtyZXR1cm4gbiYmbi5vcmRlcklkP3RoaXMuX29yZGVyQWN0aW9uQ3JlYXRvci5sb2FkT3JkZXJQYXltZW50cyhuLm9yZGVySWQsdCk6Y2UoKX19Y2xhc3MgbW17aXNFcXVhbChlLHQpe3JldHVybiBBKHRoaXMuX25vcm1hbGl6ZShlKSx0aGlzLl9ub3JtYWxpemUodCkpfV9ub3JtYWxpemUoZSl7cmV0dXJue2NhcnRBbW91bnQ6ZS5jYXJ0QW1vdW50LGN1cnJlbmN5OmUuY3VycmVuY3ksaWQ6ZS5pZCxsaW5lSXRlbXM6e2RpZ2l0YWxJdGVtczplLmxpbmVJdGVtcy5kaWdpdGFsSXRlbXMuc2xpY2UoKS5zb3J0KChlLHQpPT5gJHtlLnByb2R1Y3RJZH0ke2UudmFyaWFudElkfWAubG9jYWxlQ29tcGFyZShgJHt0LnByb2R1Y3RJZH0ke3QudmFyaWFudElkfWApKS5tYXAoZT0+KHtleHRlbmRlZFNhbGVQcmljZTplLmV4dGVuZGVkU2FsZVByaWNlLHByb2R1Y3RJZDplLnByb2R1Y3RJZCxxdWFudGl0eTplLnF1YW50aXR5LHZhcmlhbnRJZDplLnZhcmlhbnRJZH0pKSxnaWZ0Q2VydGlmaWNhdGVzOmUubGluZUl0ZW1zLmdpZnRDZXJ0aWZpY2F0ZXMuc2xpY2UoKS5zb3J0KChlLHQpPT5gJHtlLmlkfWAubG9jYWxlQ29tcGFyZShgJHt0LmlkfWApKS5tYXAoZT0+KHthbW91bnQ6ZS5hbW91bnQscmVjaXBpZW50OmUucmVjaXBpZW50fSkpLHBoeXNpY2FsSXRlbXM6ZS5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5zbGljZSgpLnNvcnQoKGUsdCk9PmAke2UucHJvZHVjdElkfSR7ZS52YXJpYW50SWR9YC5sb2NhbGVDb21wYXJlKGAke3QucHJvZHVjdElkfSR7dC52YXJpYW50SWR9YCkpLm1hcChlPT4oe2V4dGVuZGVkU2FsZVByaWNlOmUuZXh0ZW5kZWRTYWxlUHJpY2UscHJvZHVjdElkOmUucHJvZHVjdElkLHF1YW50aXR5OmUucXVhbnRpdHksdmFyaWFudElkOmUudmFyaWFudElkLGdpZnRXcmFwcGluZzplLmdpZnRXcmFwcGluZ30pKX19fX1jbGFzcyB5bSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoXCJBbiB1cGRhdGUgdG8geW91ciBzaG9wcGluZyBjYXJ0IGhhcyBiZWVuIGRldGVjdGVkIGFuZCB5b3VyIGF2YWlsYWJsZSBzaGlwcGluZyBjb3N0cyBoYXZlIGJlZW4gdXBkYXRlZC5cIiksdGhpcy5uYW1lPVwiQ2FydENoYW5nZWRFcnJvclwiLHRoaXMudHlwZT1cImNhcnRfY2hhbmdlZFwiLHRoaXMuZGF0YT17cHJldmlvdXM6ZSx1cGRhdGVkOnR9fX1jbGFzcyBnbXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9jaGVja291dFJlcXVlc3RTZW5kZXI9ZX12YWxpZGF0ZShlLHQpe2lmKCFlKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXQpO3JldHVybiB0aGlzLl9jaGVja291dFJlcXVlc3RTZW5kZXIubG9hZENoZWNrb3V0KGUuaWQsdCkudGhlbih0PT57Y29uc3Qgbj1uZXcgbW07aWYoIShlLm91dHN0YW5kaW5nQmFsYW5jZT09PXQuYm9keS5vdXRzdGFuZGluZ0JhbGFuY2UmJnRoaXMuX2NvbXBhcmVDb3Vwb25zKGUuY291cG9ucyx0LmJvZHkuY291cG9ucykmJnRoaXMuX2NvbXBhcmVHaWZ0Q2VydGlmaWNhdGVzKGUuZ2lmdENlcnRpZmljYXRlcyx0LmJvZHkuZ2lmdENlcnRpZmljYXRlcykmJm4uaXNFcXVhbChlLmNhcnQsdC5ib2R5LmNhcnQpKSl0aHJvdyBuZXcgeW0odGhpcy5fZ2V0Q29tcGFyYWJsZUNoZWNrb3V0KGUpLHRoaXMuX2dldENvbXBhcmFibGVDaGVja291dCh0LmJvZHkpKX0pfV9jb21wYXJlQ291cG9ucyhlLHQpe3JldHVybiBBKEIoZSxcImNvZGVcIiksQih0LFwiY29kZVwiKSl9X2NvbXBhcmVHaWZ0Q2VydGlmaWNhdGVzKGUsdCl7cmV0dXJuIEEoQihlLFwiY29kZVwiKSxCKHQsXCJjb2RlXCIpKX1fZ2V0Q29tcGFyYWJsZUNoZWNrb3V0KGUpe2NvbnN0e2NhcnQ6dCxjb3Vwb25zOm4sZ2lmdENlcnRpZmljYXRlczppLG91dHN0YW5kaW5nQmFsYW5jZTpyfT1lO3JldHVybntjYXJ0OntjYXJ0QW1vdW50OnQuY2FydEFtb3VudCxjdXJyZW5jeTp0LmN1cnJlbmN5LGxpbmVJdGVtczp0LmxpbmVJdGVtc30sY291cG9uczpuLGdpZnRDZXJ0aWZpY2F0ZXM6aSxvdXRzdGFuZGluZ0JhbGFuY2U6cn19fWNsYXNzIHZte2NvbnN0cnVjdG9yKGUpe3RoaXMuX25hbWVzcGFjZT1lfWdldEl0ZW0oZSl7Y29uc3QgdD1rZS5nZXRJdGVtKHRoaXMud2l0aE5hbWVzcGFjZShlKSk7aWYobnVsbD09PXQpcmV0dXJuIG51bGw7dHJ5e3JldHVybiBKU09OLnBhcnNlKHQpfWNhdGNoKHQpe3JldHVybiB0aGlzLnJlbW92ZUl0ZW0odGhpcy53aXRoTmFtZXNwYWNlKGUpKSxudWxsfX1nZXRJdGVtT25jZShlKXtjb25zdCB0PXRoaXMuZ2V0SXRlbShlKTtyZXR1cm4gdGhpcy5yZW1vdmVJdGVtKGUpLHR9c2V0SXRlbShlLHQpe3JldHVybiBrZS5zZXRJdGVtKHRoaXMud2l0aE5hbWVzcGFjZShlKSxKU09OLnN0cmluZ2lmeSh0KSl9cmVtb3ZlSXRlbShlKXtyZXR1cm4ga2UucmVtb3ZlSXRlbSh0aGlzLndpdGhOYW1lc3BhY2UoZSkpfXdpdGhOYW1lc3BhY2UoZSl7cmV0dXJuYCR7dGhpcy5fbmFtZXNwYWNlfS4ke2V9YH19Y2xhc3MgZm0gZXh0ZW5kcyBaZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwiUGxlYXNlIGNvbXBsZXRlIG91ciBodW1hbiB2ZXJpZmljYXRpb24gY2hhbGxlbmdlIGFuZCB0cnkgYWdhaW4uXCIpLHRoaXMubmFtZT1cIkNhcmRpbmdQcm90ZWN0aW9uQ2hhbGxlbmdlTm90Q29tcGxldGVkRXJyb3JcIix0aGlzLnR5cGU9XCJjYXJkaW5nX3Byb3RlY3Rpb25fY2hhbGxlbmdlX25vdF9jb21wbGV0ZWRcIn19Y2xhc3MgU20gZXh0ZW5kcyBaZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwiV2Ugd2VyZSBub3QgYWJsZSB0byB2ZXJpZnkgdGhhdCB5b3UgYXJlIG5vdCBhIHJvYm90LiBQbGVhc2UgdHJ5IGFnYWluLlwiKSx0aGlzLm5hbWU9XCJDYXJkaW5nUHJvdGVjdGlvbkZhaWxlZEVycm9yXCIsdGhpcy50eXBlPVwiY2FyZGluZ19wcm90ZWN0aW9uX2ZhaWxlZFwifX12YXIgX20sd20sQ209ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgSW17Y29uc3RydWN0b3IoZSl7dGhpcy5fZ29vZ2xlUmVjYXB0Y2hhPWV9aGFuZGxlKGUsdCl7cmV0dXJuIENtKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT90aGlzLmhhbmRsZVdpdGhSZWNhcHRjaGFTaXRla2V5KGUsdCk6dGhpcy5oYW5kbGVXaXRoUGF5bWVudEh1bWFuVmVyaWZpY2F0aW9uUmVxdWVzdEVycm9yKGUpfSl9aGFuZGxlV2l0aFBheW1lbnRIdW1hblZlcmlmaWNhdGlvblJlcXVlc3RFcnJvcihlKXtyZXR1cm4gQ20odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0aGlzLl9pc1BheW1lbnRIdW1hblZlcmlmaWNhdGlvblJlcXVlc3QoZSkpdGhyb3cgZTtyZXR1cm4geWllbGQgdGhpcy5faW5pdGlhbGl6ZShlLmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQuZGF0YS5rZXkpLHRoaXMuX3BlcmZvcm1SZWNhcHRjaGEoKX0pfWhhbmRsZVdpdGhSZWNhcHRjaGFTaXRla2V5KGUsdCl7cmV0dXJuIENtKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZihcInJlY2FwdGNoYV92MlwiIT09ZSl0aHJvdyBFcnJvcihcIkh1bWFuIHZlcmlmaWNhdGlvbiBtZXRob2QgaXMgbm90IHN1cHBvcnRlZC5cIik7aWYoIXQpdGhyb3cgRXJyb3IoXCJSZWNhcHRjaGEgc2l0ZSBrZXkgaXMgbWlzc2luZy5cIik7cmV0dXJuIHlpZWxkIHRoaXMuX2luaXRpYWxpemUodCksdGhpcy5fcGVyZm9ybVJlY2FwdGNoYSgpfSl9X3BlcmZvcm1SZWNhcHRjaGEoKXtyZXR1cm4gdGhpcy5fZ29vZ2xlUmVjYXB0Y2hhLmV4ZWN1dGUoKS5waXBlKGJlKDEpKS5waXBlKEllKCh7ZXJyb3I6ZSx0b2tlbjp0fSk9PkNtKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZihlIGluc3RhbmNlb2YgZ3MpdGhyb3cgbmV3IGZtO2lmKGV8fCF0KXRocm93IG5ldyBTbTtyZXR1cm57dHlwZTpcInJlY2FwdGNoYV92Ml92ZXJpZmljYXRpb25cIixkYXRhOntodW1hbl92ZXJpZmljYXRpb25fdG9rZW46dH19fSkpKS50b1Byb21pc2UoKX1faW5pdGlhbGl6ZShlKXtjb25zdCB0PVwiY2FyZGluZ1Byb3RlY3Rpb25Db250YWluZXJcIjtsZXQgbj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KTtyZXR1cm4gbiYmbi5wYXJlbnROb2RlJiZuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobiksbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG4uc2V0QXR0cmlidXRlKFwiaWRcIix0KSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG4pLHRoaXMuX2dvb2dsZVJlY2FwdGNoYS5sb2FkKHQsZSl9X2lzUGF5bWVudEh1bWFuVmVyaWZpY2F0aW9uUmVxdWVzdChlKXtjb25zdHthZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZDp0LHN0YXR1czpufT1lLmJvZHl8fHt9O3JldHVyblwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWRcIj09PW4mJnQmJlwicmVjYXB0Y2hhX3YyX3ZlcmlmaWNhdGlvblwiPT09dC50eXBlfX1mdW5jdGlvbiBibShlLHQpe2NvbnN0e2JvZHk6bn09ZSx7ZXJyb3JzOmk9W119PW47cmV0dXJuIG5ldyBfdChlLHttZXNzYWdlOlBtKGkpfHx0LGVycm9yczppfSl9ZnVuY3Rpb24gUG0oZSl7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZS5yZWR1Y2UoKGUsdCk9PnQmJnQubWVzc2FnZT9bLi4uZSx0Lm1lc3NhZ2VdOmUsW10pLmpvaW4oXCIgXCIpfWNsYXNzIE9tIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJVbmFibGUgdG8gcHJvY2VlZCBkdWUgdG8gaW52YWxpZCBjb25maWd1cmF0aW9uIHByb3ZpZGVkIGZvciB0aGUgaG9zdGVkIHBheW1lbnQgZm9ybS5cIiksdGhpcy5uYW1lPVwiSW52YWxpZEhvc3RlZEZvcm1Db25maWdFcnJvclwiLHRoaXMudHlwZT1cImludmFsaWRfaG9zdGVkX2Zvcm1fY29uZmlnXCJ9fWNsYXNzIEVtIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJVbmFibGUgdG8gcHJvY2VlZCBkdWUgdG8gYW4gdW5rbm93biBlcnJvciB3aXRoIHRoZSBob3N0ZWQgcGF5bWVudCBmb3JtLlwiKSx0aGlzLm5hbWU9XCJJbnZhbGlkSG9zdGVkRm9ybUVycm9yXCIsdGhpcy50eXBlPVwiaW52YWxpZF9ob3N0ZWRfZm9ybVwifX1jbGFzcyBBbSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe3N1cGVyKFtcIlVuYWJsZSB0byBwcm9jZWVkIGR1ZSB0byBpbnZhbGlkIHVzZXIgaW5wdXQgdmFsdWVzXCIsLi4udyhpZShlKSxlPT5CKGUsKHttZXNzYWdlOmV9KT0+ZSkpXS5qb2luKFwiLiBcIikpLHRoaXMuZXJyb3JzPWUsdGhpcy5uYW1lPVwiSW52YWxpZEhvc3RlZEZvcm1WYWx1ZUVycm9yXCIsdGhpcy50eXBlPVwiaW52YWxpZF9ob3N0ZWRfZm9ybV92YWx1ZVwifX0hZnVuY3Rpb24oZSl7ZS5BdHRhY2hSZXF1ZXN0ZWQ9XCJIT1NURURfRklFTEQ6QVRUQUNIX1JFUVVFU1RFRFwiLGUuU3VibWl0UmVxdWVzdGVkPVwiSE9TVEVEX0ZJRUxEOlNVQk1JVFRFRF9SRVFVRVNURURcIixlLlZhbGlkYXRlUmVxdWVzdGVkPVwiSE9TVEVEX0ZJRUxEOlZBTElEQVRFX1JFUVVFU1RFRFwiLGUuU3RvcmVkQ2FyZFJlcXVlc3RlZD1cIkhPU1RFRF9GSUVMRDpTVE9SRURfQ0FSRF9SRVFVRVNURURcIn0oX218fChfbT17fSkpLGZ1bmN0aW9uKGUpe2UuQXR0YWNoU3VjY2VlZGVkPVwiSE9TVEVEX0lOUFVUOkFUVEFDSF9TVUNDRUVERURcIixlLkF0dGFjaEZhaWxlZD1cIkhPU1RFRF9JTlBVVDpBVFRBQ0hfRkFJTEVEXCIsZS5CaW5DaGFuZ2VkPVwiSE9TVEVEX0lOUFVUOkJJTl9DSEFOR0VEXCIsZS5CbHVycmVkPVwiSE9TVEVEX0lOUFVUOkJMVVJSRURcIixlLkNoYW5nZWQ9XCJIT1NURURfSU5QVVQ6Q0hBTkdFRFwiLGUuQ2FyZFR5cGVDaGFuZ2VkPVwiSE9TVEVEX0lOUFVUOkNBUkRfVFlQRV9DSEFOR0VEXCIsZS5FbnRlcmVkPVwiSE9TVEVEX0lOUFVUOkVOVEVSRURcIixlLkZvY3VzZWQ9XCJIT1NURURfSU5QVVQ6Rk9DVVNFRFwiLGUuU3VibWl0U3VjY2VlZGVkPVwiSE9TVEVEX0lOUFVUOlNVQk1JVF9TVUNDRUVERURcIixlLlN1Ym1pdEZhaWxlZD1cIkhPU1RFRF9JTlBVVDpTVUJNSVRfRkFJTEVEXCIsZS5WYWxpZGF0ZWQ9XCJIT1NURURfSU5QVVQ6VkFMSURBVEVEXCIsZS5TdG9yZWRDYXJkU3VjY2VlZGVkPVwiSE9TVEVEX0lOUFVUOlNUT1JFRF9DQVJEX1NVQ0NFRURFRFwiLGUuU3RvcmVkQ2FyZEZhaWxlZD1cIkhPU1RFRF9JTlBVVDpTVE9SRURfQ0FSRF9GQUlMRURcIn0od218fCh3bT17fSkpO3ZhciBrbT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBUbXtjb25zdHJ1Y3RvcihlLHQsbixpLHIsbyxhLHMsZCxjKXt0aGlzLl90eXBlPWUsdGhpcy5fY29udGFpbmVySWQ9dCx0aGlzLl9wbGFjZWhvbGRlcj1uLHRoaXMuX2FjY2Vzc2liaWxpdHlMYWJlbD1pLHRoaXMuX3N0eWxlcz1yLHRoaXMuX2V2ZW50UG9zdGVyPW8sdGhpcy5fZXZlbnRMaXN0ZW5lcj1hLHRoaXMuX2RldGFjaG1lbnRPYnNlcnZlcj1zLHRoaXMuX2NoZWNrb3V0SWQ9ZCx0aGlzLl9jYXJkSW5zdHJ1bWVudD1jLHRoaXMuX2lmcmFtZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO2NvbnN0IGw9dGhpcy5fY2hlY2tvdXRJZD9gL2NoZWNrb3V0L3BheW1lbnQvaG9zdGVkLWZpZWxkP3ZlcnNpb249MS44MDMuMCZjaGVja291dElkPSR7dGhpcy5fY2hlY2tvdXRJZH1gOlwiL2NoZWNrb3V0L3BheW1lbnQvaG9zdGVkLWZpZWxkP3ZlcnNpb249MS44MDMuMFwiO3RoaXMuX2lmcmFtZS5zcmM9bCx0aGlzLl9pZnJhbWUuc3R5bGUuYm9yZGVyPVwibm9uZVwiLHRoaXMuX2lmcmFtZS5zdHlsZS5oZWlnaHQ9XCIxMDAlXCIsdGhpcy5faWZyYW1lLnN0eWxlLm92ZXJmbG93PVwiaGlkZGVuXCIsdGhpcy5faWZyYW1lLnN0eWxlLndpZHRoPVwiMTAwJVwifWdldFR5cGUoKXtyZXR1cm4gdGhpcy5fdHlwZX1hdHRhY2goKXtyZXR1cm4ga20odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fY29udGFpbmVySWQpO2lmKCFlKXRocm93IG5ldyBPbShcIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHByb3ZpZGVkIGNvbnRhaW5lciBJRCBpcyBub3QgdmFsaWQuXCIpO2UuYXBwZW5kQ2hpbGQodGhpcy5faWZyYW1lKSx0aGlzLl9ldmVudExpc3RlbmVyLmxpc3RlbigpO2NvbnN0IHQ9dWUodGhpcy5faWZyYW1lLFwibG9hZFwiKS5waXBlKEllKCh7dGFyZ2V0OmV9KT0+a20odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9ZSYmZS5jb250ZW50V2luZG93O2lmKCF0KXRocm93IG5ldyBFcnJvcihcIlRoZSBjb250ZW50IHdpbmRvdyBvZiB0aGUgaWZyYW1lIGNhbm5vdCBiZSBhY2Nlc3NlZC5cIik7dGhpcy5fZXZlbnRQb3N0ZXIuc2V0VGFyZ2V0KHQpLHlpZWxkIHRoaXMuX2V2ZW50UG9zdGVyLnBvc3Qoe3R5cGU6X20uQXR0YWNoUmVxdWVzdGVkLHBheWxvYWQ6e2FjY2Vzc2liaWxpdHlMYWJlbDp0aGlzLl9hY2Nlc3NpYmlsaXR5TGFiZWwsY2FyZEluc3RydW1lbnQ6dGhpcy5fY2FyZEluc3RydW1lbnQsZm9udFVybHM6dGhpcy5fZ2V0Rm9udFVybHMoKSxwbGFjZWhvbGRlcjp0aGlzLl9wbGFjZWhvbGRlcixzdHlsZXM6dGhpcy5fc3R5bGVzLG9yaWdpbjpkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4sdHlwZTp0aGlzLl90eXBlfX0se3N1Y2Nlc3NUeXBlOndtLkF0dGFjaFN1Y2NlZWRlZCxlcnJvclR5cGU6d20uQXR0YWNoRmFpbGVkfSl9KSksYmUoMSkpLnRvUHJvbWlzZSgpO3lpZWxkIHRoaXMuX2RldGFjaG1lbnRPYnNlcnZlci5lbnN1cmVQcmVzZW5jZShbdGhpcy5faWZyYW1lXSx0KX0pfWRldGFjaCgpe3RoaXMuX2lmcmFtZS5wYXJlbnRFbGVtZW50JiYodGhpcy5faWZyYW1lLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5faWZyYW1lKSx0aGlzLl9ldmVudExpc3RlbmVyLnN0b3BMaXN0ZW4oKSl9c3VibWl0Rm9ybShlLHQpe3JldHVybiBrbSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0IG49dGhpcy5fZXZlbnRQb3N0ZXIucG9zdCh7dHlwZTpfbS5TdWJtaXRSZXF1ZXN0ZWQscGF5bG9hZDp7ZmllbGRzOmUsZGF0YTp0fX0se3N1Y2Nlc3NUeXBlOndtLlN1Ym1pdFN1Y2NlZWRlZCxlcnJvclR5cGU6d20uU3VibWl0RmFpbGVkfSk7cmV0dXJuIHlpZWxkIHRoaXMuX2RldGFjaG1lbnRPYnNlcnZlci5lbnN1cmVQcmVzZW5jZShbdGhpcy5faWZyYW1lXSxuKX1jYXRjaChlKXtpZih0aGlzLl9pc1N1Ym1pdEVycm9yRXZlbnQoZSkpe2lmKFwiaG9zdGVkX2Zvcm1fZXJyb3JcIj09PWUucGF5bG9hZC5lcnJvci5jb2RlKXRocm93IG5ldyBFbShlLnBheWxvYWQuZXJyb3IubWVzc2FnZSk7aWYoZS5wYXlsb2FkLnJlc3BvbnNlKXRocm93IGJtKGUucGF5bG9hZC5yZXNwb25zZSk7dGhyb3cgbmV3IEVycm9yKGUucGF5bG9hZC5lcnJvci5tZXNzYWdlKX10aHJvdyBlfX0pfXN1Ym1pdFN0b3JlZENhcmRGb3JtKGUsdCl7cmV0dXJuIGttKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBuPXRoaXMuX2V2ZW50UG9zdGVyLnBvc3Qoe3R5cGU6X20uU3RvcmVkQ2FyZFJlcXVlc3RlZCxwYXlsb2FkOntmaWVsZHM6ZSxkYXRhOnR9fSx7c3VjY2Vzc1R5cGU6d20uU3RvcmVkQ2FyZFN1Y2NlZWRlZCxlcnJvclR5cGU6d20uU3RvcmVkQ2FyZEZhaWxlZH0pO3JldHVybiB0aGlzLl9kZXRhY2htZW50T2JzZXJ2ZXIuZW5zdXJlUHJlc2VuY2UoW3RoaXMuX2lmcmFtZV0sbil9KX12YWxpZGF0ZUZvcm0oKXtyZXR1cm4ga20odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IGU9dGhpcy5fZXZlbnRQb3N0ZXIucG9zdCh7dHlwZTpfbS5WYWxpZGF0ZVJlcXVlc3RlZH0se3N1Y2Nlc3NUeXBlOndtLlZhbGlkYXRlZH0pLHtwYXlsb2FkOnR9PXlpZWxkIHRoaXMuX2RldGFjaG1lbnRPYnNlcnZlci5lbnN1cmVQcmVzZW5jZShbdGhpcy5faWZyYW1lXSxlKTtpZighdC5pc1ZhbGlkKXRocm93IG5ldyBBbSh0LmVycm9ycyl9KX1fZ2V0Rm9udFVybHMoKXtjb25zdCBlPVwiZm9udHMuZ29vZ2xlYXBpcy5jb21cIix0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYGxpbmtbaHJlZio9JyR7ZX0nXVtyZWw9J3N0eWxlc2hlZXQnXWApO3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KS5maWx0ZXIodD0+eHModC5ocmVmKS5ob3N0bmFtZT09PWUpLmZpbHRlcihlPT5pZSh0aGlzLl9zdHlsZXMpLm1hcChlPT5lJiZlLmZvbnRGYW1pbHkpLmZpbHRlcihlPT5cInN0cmluZ1wiPT10eXBlb2YgZSkuc29tZSh0PT50LnNwbGl0KC8sXFxzLykuc29tZSh0PT4tMSE9PWUuaHJlZi5pbmRleE9mKHQucmVwbGFjZShcIiBcIixcIitcIikpKSkpLm1hcChlPT5lLmhyZWYpfV9pc1N1Ym1pdEVycm9yRXZlbnQoZSl7cmV0dXJuIGUudHlwZT09PXdtLlN1Ym1pdEZhaWxlZH19dmFyIERtLE1tPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIHpte2NvbnN0cnVjdG9yKGUsdCxuLGkscil7dGhpcy5fZmllbGRzPWUsdGhpcy5fZXZlbnRMaXN0ZW5lcj10LHRoaXMuX3BheWxvYWRUcmFuc2Zvcm1lcj1uLHRoaXMuX2V2ZW50Q2FsbGJhY2tzPWksdGhpcy5fcGF5bWVudEh1bWFuVmVyaWZpY2F0aW9uSGFuZGxlcj1yLHRoaXMuX2hhbmRsZUVudGVyPSh7cGF5bG9hZDplfSk9Pk1tKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7eWllbGQgdGhpcy52YWxpZGF0ZSgpfWNhdGNoKGUpe2lmKGUgaW5zdGFuY2VvZiBFcnJvciYmXCJJbnZhbGlkSG9zdGVkRm9ybVZhbHVlRXJyb3JcIiE9PWUubmFtZSl0aHJvdyBlfWNvbnN0e29uRW50ZXI6dD1WfT10aGlzLl9ldmVudENhbGxiYWNrczt0KGUpfSk7Y29uc3R7b25CbHVyOm89VixvbkNhcmRUeXBlQ2hhbmdlOmE9VixvbkZvY3VzOnM9VixvblZhbGlkYXRlOmQ9Vn09dGhpcy5fZXZlbnRDYWxsYmFja3M7dGhpcy5fZXZlbnRMaXN0ZW5lci5hZGRMaXN0ZW5lcih3bS5CbHVycmVkLCh7cGF5bG9hZDplfSk9Pm8oZSkpLHRoaXMuX2V2ZW50TGlzdGVuZXIuYWRkTGlzdGVuZXIod20uQ2FyZFR5cGVDaGFuZ2VkLCh7cGF5bG9hZDplfSk9PmEoZSkpLHRoaXMuX2V2ZW50TGlzdGVuZXIuYWRkTGlzdGVuZXIod20uRm9jdXNlZCwoe3BheWxvYWQ6ZX0pPT5zKGUpKSx0aGlzLl9ldmVudExpc3RlbmVyLmFkZExpc3RlbmVyKHdtLlZhbGlkYXRlZCwoe3BheWxvYWQ6ZX0pPT5kKGUpKSx0aGlzLl9ldmVudExpc3RlbmVyLmFkZExpc3RlbmVyKHdtLkVudGVyZWQsdGhpcy5faGFuZGxlRW50ZXIpLHRoaXMuX2V2ZW50TGlzdGVuZXIuYWRkTGlzdGVuZXIod20uQ2FyZFR5cGVDaGFuZ2VkLCh7cGF5bG9hZDplfSk9PnRoaXMuX2NhcmRUeXBlPWUuY2FyZFR5cGUpLHRoaXMuX2V2ZW50TGlzdGVuZXIuYWRkTGlzdGVuZXIod20uQmluQ2hhbmdlZCwoe3BheWxvYWQ6ZX0pPT50aGlzLl9iaW49ZS5iaW4pfWdldEJpbigpe3JldHVybiB0aGlzLl9iaW59Z2V0Q2FyZFR5cGUoKXtyZXR1cm4gdGhpcy5fY2FyZFR5cGV9YXR0YWNoKCl7cmV0dXJuIE1tKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0aGlzLl9ldmVudExpc3RlbmVyLmxpc3RlbigpO2NvbnN0IGU9dGhpcy5fZ2V0Rmlyc3RGaWVsZCgpLHQ9cmUodGhpcy5fZmllbGRzLGUpO3lpZWxkIGUuYXR0YWNoKCkseWllbGQgUHJvbWlzZS5hbGwodC5tYXAoZT0+ZS5hdHRhY2goKSkpfSl9ZGV0YWNoKCl7dGhpcy5fZXZlbnRMaXN0ZW5lci5zdG9wTGlzdGVuKCksdGhpcy5fZmllbGRzLmZvckVhY2goZT0+e2UuZGV0YWNoKCl9KX1zdWJtaXQoZSx0KXtyZXR1cm4gTW0odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtyZXR1cm4geWllbGQgdGhpcy5fZ2V0Rmlyc3RGaWVsZCgpLnN1Ym1pdEZvcm0odGhpcy5fZmllbGRzLm1hcChlPT5lLmdldFR5cGUoKSksdGhpcy5fcGF5bG9hZFRyYW5zZm9ybWVyLnRyYW5zZm9ybShlLHQpKX1jYXRjaCh0KXtjb25zdCBuPXlpZWxkIHRoaXMuX3BheW1lbnRIdW1hblZlcmlmaWNhdGlvbkhhbmRsZXIuaGFuZGxlKHQpO3JldHVybiB5aWVsZCB0aGlzLl9nZXRGaXJzdEZpZWxkKCkuc3VibWl0Rm9ybSh0aGlzLl9maWVsZHMubWFwKGU9PmUuZ2V0VHlwZSgpKSx0aGlzLl9wYXlsb2FkVHJhbnNmb3JtZXIudHJhbnNmb3JtKGUsbikpfX0pfXN1Ym1pdFN0b3JlZENhcmQoZSl7cmV0dXJuIE1tKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fZ2V0Rmlyc3RGaWVsZCgpLnN1Ym1pdFN0b3JlZENhcmRGb3JtKGUuZmllbGRzLGUuZGF0YSl9KX12YWxpZGF0ZSgpe3JldHVybiBNbSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2dldEZpcnN0RmllbGQoKS52YWxpZGF0ZUZvcm0oKX0pfV9nZXRGaXJzdEZpZWxkKCl7Y29uc3QgZT10aGlzLl9maWVsZHNbMF07aWYoIWUpdGhyb3cgbmV3IE9tKFwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBmb3JtIGhhcyBubyBmaWVsZCBkZWZpbmVkLlwiKTtyZXR1cm4gZX19ZnVuY3Rpb24gTm0oZSl7cmV0dXJuIEJvb2xlYW4oZS5pbnN0cnVtZW50SWQpfWNsYXNzIHhte2NvbnN0cnVjdG9yKGUpe3RoaXMuX3N0b3JlPWV9dHJhbnNmb3JtKGUsdCl7Y29uc3Qgbj10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLGk9bi5jaGVja291dC5nZXRDaGVja291dCgpLHI9bi5jb25maWcuZ2V0Q29uZmlnKCksbz1uLmluc3RydW1lbnRzLmdldEluc3RydW1lbnRzTWV0YSgpLGE9bi5vcmRlci5nZXRPcmRlcigpLHM9bi5vcmRlci5nZXRPcmRlck1ldGEoKSxkPUcoZS5wYXltZW50RGF0YSxcImNjRXhwaXJ5XCIsXCJjY05hbWVcIixcImNjTnVtYmVyXCIsXCJjY0N2dlwiKSxjPW4ucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZChlLm1ldGhvZElkLGUuZ2F0ZXdheUlkKSxsPW4ucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZHNNZXRhKCksdT1vJiZkJiZObShkKT9gJHtuLnBheW1lbnQuZ2V0UGF5bWVudFRva2VuKCl9LCAke28udmF1bHRBY2Nlc3NUb2tlbn1gOm4ucGF5bWVudC5nZXRQYXltZW50VG9rZW4oKTtpZighdSl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ1BheW1lbnRUb2tlbik7cmV0dXJue2FkZGl0aW9uYWxBY3Rpb246dCxhdXRoVG9rZW46dSxjaGVja291dDppLGNvbmZpZzpyLG9yZGVyOmEsb3JkZXJNZXRhOnMscGF5bWVudDpkLHBheW1lbnRNZXRob2Q6YyxwYXltZW50TWV0aG9kTWV0YTpsfX19Y2xhc3MgRm17Y29uc3RydWN0b3IoZSl7dGhpcy5fc3RvcmU9ZX1jcmVhdGUoZSx0LG4pe2NvbnN0IGk9T2JqZWN0LmtleXModC5maWVsZHMpLnJlZHVjZSgoaSxyKT0+e2NvbnN0IG89dC5maWVsZHNbcl07cmV0dXJuIG8/Wy4uLmksbmV3IFRtKHIsby5jb250YWluZXJJZCxvLnBsYWNlaG9sZGVyfHxcIlwiLG8uYWNjZXNzaWJpbGl0eUxhYmVsfHxcIlwiLHQuc3R5bGVzfHx7fSxuZXcganMoZSksbmV3IGFkKGUpLG5ldyBHcyhuZXcgd3MpLG4sXCJpbnN0cnVtZW50SWRcImluIG8/dGhpcy5fZ2V0Q2FyZEluc3RydW1lbnQoby5pbnN0cnVtZW50SWQpOnZvaWQgMCldOml9LFtdKTtyZXR1cm4gbmV3IHptKGksbmV3IGFkKGUpLG5ldyB4bSh0aGlzLl9zdG9yZSksVyh0LFwib25CbHVyXCIsXCJvbkVudGVyXCIsXCJvbkZvY3VzXCIsXCJvbkNhcmRUeXBlQ2hhbmdlXCIsXCJvblZhbGlkYXRlXCIpLG5ldyBJbShPcyhvKCkpKSl9X2dldENhcmRJbnN0cnVtZW50KGUpe2NvbnN0e2luc3RydW1lbnRzOntnZXRDYXJkSW5zdHJ1bWVudDp0fX09dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSxuPXQoZSk7aWYoIW4pdGhyb3cgbmV3IFFlKFdlLk1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCk7cmV0dXJuIG59fWNsYXNzIFJte2NvbnN0cnVjdG9yKGUpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZX1jcmVhdGVCdXlOb3dDYXJ0KGUse3RpbWVvdXQ6dH09e30pe2NvbnN0IG49T2JqZWN0LmFzc2lnbih7QWNjZXB0Oml0Lkpzb25WMX0scnQpO3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoXCIvYXBpL3N0b3JlZnJvbnQvY2FydHNcIix7Ym9keTplLGhlYWRlcnM6bix0aW1lb3V0OnR9KX19IWZ1bmN0aW9uKGUpe2UuU3VibWl0UGF5bWVudFJlcXVlc3RlZD1cIlNVQk1JVF9QQVlNRU5UX1JFUVVFU1RFRFwiLGUuU3VibWl0UGF5bWVudFN1Y2NlZWRlZD1cIlNVQk1JVF9QQVlNRU5UX1NVQ0NFRURFRFwiLGUuU3VibWl0UGF5bWVudEZhaWxlZD1cIlNVQk1JVF9QQVlNRU5UX0ZBSUxFRFwiLGUuSW5pdGlhbGl6ZU9mZnNpdGVQYXltZW50UmVxdWVzdGVkPVwiSU5JVElBTElaRV9PRkZTSVRFX1BBWU1FTlRfUkVRVUVTVEVEXCIsZS5Jbml0aWFsaXplT2Zmc2l0ZVBheW1lbnRTdWNjZWVkZWQ9XCJJTklUSUFMSVpFX09GRlNJVEVfUEFZTUVOVF9TVUNDRUVERURcIixlLkluaXRpYWxpemVPZmZzaXRlUGF5bWVudEZhaWxlZD1cIklOSVRJQUxJWkVfT0ZGU0lURV9QQVlNRU5UX0ZBSUxFRFwifShEbXx8KERtPXt9KSk7Y2xhc3MgTG17Y29uc3RydWN0b3IoZSx0LG4saSl7dGhpcy5fcGF5bWVudFJlcXVlc3RTZW5kZXI9ZSx0aGlzLl9vcmRlckFjdGlvbkNyZWF0b3I9dCx0aGlzLl9wYXltZW50UmVxdWVzdFRyYW5zZm9ybWVyPW4sdGhpcy5fcGF5bWVudEh1bWFuVmVyaWZpY2F0aW9uSGFuZGxlcj1pLHRoaXMuaW5pdGlhbGl6ZU9mZnNpdGVQYXltZW50PSh7bWV0aG9kSWQ6ZSxnYXRld2F5SWQ6dCxpbnN0cnVtZW50SWQ6bix0YXJnZXQ6aSxwcm9taXNlOnIsc2hvdWxkU2F2ZUluc3RydW1lbnQ6byxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OmF9KT0+cz0+e2xldCBkO24/ZD17Zm9ybWF0dGVkUGF5bG9hZDp7YmlncGF5X3Rva2VuOm59fTpvJiYoZD17Zm9ybWF0dGVkUGF5bG9hZDp7dmF1bHRfcGF5bWVudF9pbnN0cnVtZW50Om8sc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6YXx8bnVsbH19KTtjb25zdCBjPXRoaXMuX3BheW1lbnRSZXF1ZXN0VHJhbnNmb3JtZXIudHJhbnNmb3JtKHtnYXRld2F5SWQ6dCxtZXRob2RJZDplLHBheW1lbnREYXRhOmR9LHMuZ2V0U3RhdGUoKSk7cmV0dXJuIHNlKG1lKGwoRG0uSW5pdGlhbGl6ZU9mZnNpdGVQYXltZW50UmVxdWVzdGVkKSksUHJvbWlzZS5yYWNlKFt0aGlzLl9wYXltZW50UmVxdWVzdFNlbmRlci5pbml0aWFsaXplT2Zmc2l0ZVBheW1lbnQoYyxpKSxyXS5maWx0ZXIoQm9vbGVhbikpLnRoZW4oKCk9PmwoRG0uSW5pdGlhbGl6ZU9mZnNpdGVQYXltZW50U3VjY2VlZGVkKSkpLnBpcGUoZ2UoZT0+SmUoRG0uSW5pdGlhbGl6ZU9mZnNpdGVQYXltZW50RmFpbGVkLGUpKSl9fXN1Ym1pdFBheW1lbnQoZSl7cmV0dXJuIHQ9PnNlKG1lKGwoRG0uU3VibWl0UGF5bWVudFJlcXVlc3RlZCkpLGRlKCgpPT57cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxvPWZ1bmN0aW9uKigpe3RyeXtyZXR1cm4geWllbGQgdGhpcy5fcGF5bWVudFJlcXVlc3RTZW5kZXIuc3VibWl0UGF5bWVudCh0aGlzLl9wYXltZW50UmVxdWVzdFRyYW5zZm9ybWVyLnRyYW5zZm9ybShlLHQuZ2V0U3RhdGUoKSkpfWNhdGNoKG4pe2NvbnN0IGk9eWllbGQgdGhpcy5fcGF5bWVudEh1bWFuVmVyaWZpY2F0aW9uSGFuZGxlci5oYW5kbGUobik7cmV0dXJuIHlpZWxkIHRoaXMuX3BheW1lbnRSZXF1ZXN0U2VuZGVyLnN1Ym1pdFBheW1lbnQodGhpcy5fcGF5bWVudFJlcXVlc3RUcmFuc2Zvcm1lci50cmFuc2Zvcm0oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHthZGRpdGlvbmFsQWN0aW9uOml9KSx0LmdldFN0YXRlKCkpKX19LG5ldygocj12b2lkIDApfHwocj1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBhKGUpe3RyeXtkKG8ubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChvLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIHI/bjpuZXcgcihmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChvPW8uYXBwbHkobixpfHxbXSkpLm5leHQoKSl9KTt2YXIgbixpLHIsb30pLnBpcGUoSWUoKHtib2R5OmV9KT0+c2UodGhpcy5fb3JkZXJBY3Rpb25DcmVhdG9yLmxvYWRDdXJyZW50T3JkZXIoKSh0KSxtZShsKERtLlN1Ym1pdFBheW1lbnRTdWNjZWVkZWQsZSkpKSkpKS5waXBlKGdlKGU9PkplKERtLlN1Ym1pdFBheW1lbnRGYWlsZWQsZSkpKX19Y2xhc3MgQm17Y29uc3RydWN0b3IoZSl7dGhpcy5fY2xpZW50PWV9c3VibWl0UGF5bWVudChlKXtyZXR1cm4gbmV3IFByb21pc2UoKHQsbik9Pnt0aGlzLl9jbGllbnQuc3VibWl0UGF5bWVudChlLChlLGkpPT57ZT9uKHRoaXMuX3RyYW5zZm9ybVJlc3BvbnNlKGUpKTp0KHRoaXMuX3RyYW5zZm9ybVJlc3BvbnNlKGkpKX0pfSl9aW5pdGlhbGl6ZU9mZnNpdGVQYXltZW50KGUsdCl7cmV0dXJuIG5ldyBQcm9taXNlKCgpPT57dGhpcy5fY2xpZW50LmluaXRpYWxpemVPZmZzaXRlUGF5bWVudChlLG51bGwsdCl9KX1fdHJhbnNmb3JtUmVzcG9uc2UoZSl7cmV0dXJue2hlYWRlcnM6ZS5oZWFkZXJzLGJvZHk6ZS5kYXRhLHN0YXR1czplLnN0YXR1cyxzdGF0dXNUZXh0OmUuc3RhdHVzVGV4dH19fWZ1bmN0aW9uIGptKGUsdCl7bGV0IG47cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lLmlkfShlKT9uPWUuaWQ6dCYmdC5sZW5ndGgmJihuPXRbMF0uaWQpLHtpZDpuLGZpcnN0TmFtZTplLmZpcnN0TmFtZSxsYXN0TmFtZTplLmxhc3ROYW1lLGNvbXBhbnk6ZS5jb21wYW55LGFkZHJlc3NMaW5lMTplLmFkZHJlc3MxLGFkZHJlc3NMaW5lMjplLmFkZHJlc3MyLGNpdHk6ZS5jaXR5LHByb3ZpbmNlOmUuc3RhdGVPclByb3ZpbmNlLHByb3ZpbmNlQ29kZTplLnN0YXRlT3JQcm92aW5jZUNvZGUscG9zdENvZGU6ZS5wb3N0YWxDb2RlLGNvdW50cnk6ZS5jb3VudHJ5LGNvdW50cnlDb2RlOmUuY291bnRyeUNvZGUscGhvbmU6ZS5waG9uZSxjdXN0b21GaWVsZHM6ZS5jdXN0b21GaWVsZHN9fWNvbnN0IFVtPVtcInBlcl9pdGVtX2Rpc2NvdW50XCIsXCJwZXJjZW50YWdlX2Rpc2NvdW50XCIsXCJwZXJfdG90YWxfZGlzY291bnRcIixcInNoaXBwaW5nX2Rpc2NvdW50XCIsXCJmcmVlX3NoaXBwaW5nXCJdO2Z1bmN0aW9uIHFtKGUpe3JldHVybntjb2RlOmUuY29kZSxkaXNjb3VudDplLmRpc3BsYXlOYW1lLGRpc2NvdW50VHlwZTpVbS5pbmRleE9mKGUuY291cG9uVHlwZSl9fWZ1bmN0aW9uIFZtKGUpe3JldHVybntjb2RlOmUuY29kZSxkaXNjb3VudGVkQW1vdW50OmUudXNlZCxyZW1haW5pbmdCYWxhbmNlOmUucmVtYWluaW5nLGdpZnRDZXJ0aWZpY2F0ZTp7YmFsYW5jZTplLmJhbGFuY2UsY29kZTplLmNvZGUscHVyY2hhc2VEYXRlOmUucHVyY2hhc2VEYXRlfX19ZnVuY3Rpb24gR20oZSl7Y29uc3QgdD1bXTtyZXR1cm4oZXx8W10pLmZvckVhY2goZT0+eyhlLmJhbm5lcnN8fFtdKS5mb3JFYWNoKGU9Pnt0LnB1c2goe3BsYWNlaG9sZGVyczpbXSxkaXNjb3VudFR5cGU6bnVsbCxtZXNzYWdlOlwiXCIsbWVzc2FnZUh0bWw6ZS50ZXh0fSl9KX0pLHR9ZnVuY3Rpb24gSG0oZSx0LG49XCJpZFwiKXtyZXR1cm4gT2JqZWN0LmtleXMoZSkucmVkdWNlKChpLHIpPT5bLi4uaSwuLi5lW3JdLm1hcChlPT5cImdpZnRDZXJ0aWZpY2F0ZXNcIj09PXI/ZnVuY3Rpb24oZSx0KXtjb25zdCBuPW5ldyBxYSh0KTtyZXR1cm57aWQ6ZS5pZCxpbWFnZVVybDpcIlwiLG5hbWU6ZS5uYW1lLGFtb3VudDplLmFtb3VudCxhbW91bnRBZnRlckRpc2NvdW50OmUuYW1vdW50LGRpc2NvdW50OjAsaW50ZWdlckFtb3VudDpuLnRvSW50ZWdlcihlLmFtb3VudCksaW50ZWdlckFtb3VudEFmdGVyRGlzY291bnQ6bi50b0ludGVnZXIoZS5hbW91bnQpLGludGVnZXJVbml0UHJpY2U6bi50b0ludGVnZXIoZS5hbW91bnQpLGludGVnZXJVbml0UHJpY2VBZnRlckRpc2NvdW50Om4udG9JbnRlZ2VyKGUuYW1vdW50KSxpbnRlZ2VyRGlzY291bnQ6MCxxdWFudGl0eToxLHNlbmRlcjplLnNlbmRlcixyZWNpcGllbnQ6ZS5yZWNpcGllbnQsdHlwZTpcIkl0ZW1HaWZ0Q2VydGlmaWNhdGVFbnRpdHlcIixhdHRyaWJ1dGVzOltdLHZhcmlhbnRJZDpudWxsfX0oZSx0KTpmdW5jdGlvbihlLHQsbixpPVwiaWRcIil7Y29uc3Qgcj1uZXcgcWEobik7cmV0dXJue2lkOmVbaV0saW1hZ2VVcmw6ZS5pbWFnZVVybCxhbW91bnQ6ZS5leHRlbmRlZExpc3RQcmljZSxhbW91bnRBZnRlckRpc2NvdW50OmUuZXh0ZW5kZWRTYWxlUHJpY2UsZGlzY291bnQ6ZS5kaXNjb3VudEFtb3VudCxpbnRlZ2VyQW1vdW50OnIudG9JbnRlZ2VyKGUuZXh0ZW5kZWRMaXN0UHJpY2UpLGludGVnZXJBbW91bnRBZnRlckRpc2NvdW50OnIudG9JbnRlZ2VyKGUuZXh0ZW5kZWRTYWxlUHJpY2UpLGludGVnZXJEaXNjb3VudDpyLnRvSW50ZWdlcihlLmRpc2NvdW50QW1vdW50KSxpbnRlZ2VyVW5pdFByaWNlOnIudG9JbnRlZ2VyKGUubGlzdFByaWNlKSxpbnRlZ2VyVW5pdFByaWNlQWZ0ZXJEaXNjb3VudDpyLnRvSW50ZWdlcihlLnNhbGVQcmljZSksZG93bmxvYWRzUGFnZVVybDplLmRvd25sb2FkUGFnZVVybCxuYW1lOmUubmFtZSxxdWFudGl0eTplLnF1YW50aXR5LGJyYW5kOmUuYnJhbmQsc2t1OmUuc2t1LGNhdGVnb3J5TmFtZXM6ZS5jYXRlZ29yeU5hbWVzLHZhcmlhbnRJZDplLnZhcmlhbnRJZCxwcm9kdWN0SWQ6ZS5wcm9kdWN0SWQsYXR0cmlidXRlczooZS5vcHRpb25zfHxbXSkubWFwKGU9Pih7bmFtZTplLm5hbWUsdmFsdWU6ZS52YWx1ZX0pKSxhZGRlZEJ5UHJvbW90aW9uOmUuYWRkZWRCeVByb21vdGlvbix0eXBlOnR9fShlLGZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlXCJwaHlzaWNhbEl0ZW1zXCI6cmV0dXJuXCJJdGVtUGh5c2ljYWxFbnRpdHlcIjtjYXNlXCJkaWdpdGFsSXRlbXNcIjpyZXR1cm5cIkl0ZW1EaWdpdGFsRW50aXR5XCI7Y2FzZVwiZ2lmdENlcnRpZmljYXRlc1wiOnJldHVyblwiSXRlbUdpZnRDZXJ0aWZpY2F0ZUVudGl0eVwiO2RlZmF1bHQ6cmV0dXJuXCJcIn19KHIpLHQsbikpXSxbXSl9ZnVuY3Rpb24gJG0oZSl7Y29uc3QgdD1lLmNhcnQuY3VycmVuY3kuZGVjaW1hbFBsYWNlcyxuPW5ldyBxYSh0KTtyZXR1cm57aWQ6ZS5jYXJ0LmlkLGl0ZW1zOkhtKGUuY2FydC5saW5lSXRlbXMsdCksY3VycmVuY3k6ZS5jYXJ0LmN1cnJlbmN5LmNvZGUsY291cG9uOntkaXNjb3VudGVkQW1vdW50OksoZS5jYXJ0LmNvdXBvbnMsKGUsdCk9PmUrdC5kaXNjb3VudGVkQW1vdW50LDApLGNvdXBvbnM6ZS5jYXJ0LmNvdXBvbnMubWFwKHFtKX0sZGlzY291bnQ6e2Ftb3VudDplLmNhcnQuZGlzY291bnRBbW91bnQsaW50ZWdlckFtb3VudDpuLnRvSW50ZWdlcihlLmNhcnQuZGlzY291bnRBbW91bnQpfSxkaXNjb3VudE5vdGlmaWNhdGlvbnM6R20oZS5wcm9tb3Rpb25zKSxnaWZ0Q2VydGlmaWNhdGU6e3RvdGFsRGlzY291bnRlZEFtb3VudDpLKGUuZ2lmdENlcnRpZmljYXRlcywoZSx0KT0+ZSt0LnVzZWQsMCksYXBwbGllZEdpZnRDZXJ0aWZpY2F0ZXM6RihlLmdpZnRDZXJ0aWZpY2F0ZXMubWFwKFZtKSxcImNvZGVcIil9LHNoaXBwaW5nOnthbW91bnQ6ZS5zaGlwcGluZ0Nvc3RUb3RhbCxpbnRlZ2VyQW1vdW50Om4udG9JbnRlZ2VyKGUuc2hpcHBpbmdDb3N0VG90YWwpLGFtb3VudEJlZm9yZURpc2NvdW50OmUuc2hpcHBpbmdDb3N0QmVmb3JlRGlzY291bnQsaW50ZWdlckFtb3VudEJlZm9yZURpc2NvdW50Om4udG9JbnRlZ2VyKGUuc2hpcHBpbmdDb3N0QmVmb3JlRGlzY291bnQpLHJlcXVpcmVkOlooZS5jYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLGU9PmUuaXNTaGlwcGluZ1JlcXVpcmVkKX0sc3VidG90YWw6e2Ftb3VudDplLnN1YnRvdGFsLGludGVnZXJBbW91bnQ6bi50b0ludGVnZXIoZS5zdWJ0b3RhbCl9LHN0b3JlQ3JlZGl0OnthbW91bnQ6ZS5jdXN0b21lcj9lLmN1c3RvbWVyLnN0b3JlQ3JlZGl0OjB9LHRheFN1YnRvdGFsOnthbW91bnQ6ZS50YXhUb3RhbCxpbnRlZ2VyQW1vdW50Om4udG9JbnRlZ2VyKGUudGF4VG90YWwpfSx0YXhlczplLnRheGVzLHRheFRvdGFsOnthbW91bnQ6ZS50YXhUb3RhbCxpbnRlZ2VyQW1vdW50Om4udG9JbnRlZ2VyKGUudGF4VG90YWwpfSxoYW5kbGluZzp7YW1vdW50OmUuaGFuZGxpbmdDb3N0VG90YWwsaW50ZWdlckFtb3VudDpuLnRvSW50ZWdlcihlLmhhbmRsaW5nQ29zdFRvdGFsKX0sZ3JhbmRUb3RhbDp7YW1vdW50OmUuZ3JhbmRUb3RhbCxpbnRlZ2VyQW1vdW50Om4udG9JbnRlZ2VyKGUuZ3JhbmRUb3RhbCl9fX12YXIgV207IWZ1bmN0aW9uKGUpe2UuQVBQTEVQQVk9XCJhcHBsZXBheVwiLGUuQU1BWk9OX1BBWV9WMj1cImFtYXpvbnBheVwiLGUuQlJBSU5UUkVFX1BBWVBBTD1cImJyYWludHJlZXBheXBhbFwiLGUuQlJBSU5UUkVFX1ZFTk1PPVwiYnJhaW50cmVldmVubW9cIixlLkJSQUlOVFJFRV9QQVlQQUxfQ1JFRElUPVwiYnJhaW50cmVlcGF5cGFsY3JlZGl0XCIsZS5HT09HTEVQQVlfQURZRU5WMj1cImdvb2dsZXBheWFkeWVudjJcIixlLkdPT0dMRVBBWV9BRFlFTlYzPVwiZ29vZ2xlcGF5YWR5ZW52M1wiLGUuR09PR0xFUEFZX0FVVEhPUklaRU5FVD1cImdvb2dsZXBheWF1dGhvcml6ZW5ldFwiLGUuR09PR0xFUEFZX0JOWj1cImdvb2dsZXBheWJuelwiLGUuR09PR0xFUEFZX0JSQUlOVFJFRT1cImdvb2dsZXBheWJyYWludHJlZVwiLGUuR09PR0xFUEFZX0NIRUNLT1VUQ09NPVwiZ29vZ2xlcGF5Y2hlY2tvdXRjb21cIixlLkdPT0dMRVBBWV9DWUJFUlNPVVJDRVYyPVwiZ29vZ2xlcGF5Y3liZXJzb3VyY2V2MlwiLGUuR09PR0xFUEFZX09SQklUQUw9XCJnb29nbGVwYXlvcmJpdGFsXCIsZS5HT09HTEVQQVlfU1RSSVBFPVwiZ29vZ2xlcGF5c3RyaXBlXCIsZS5HT09HTEVQQVlfU1RSSVBFVVBFPVwiZ29vZ2xlcGF5c3RyaXBldXBlXCIsZS5HT09HTEVQQVlfV09STERQQVlBQ0NFU1M9XCJnb29nbGVwYXl3b3JsZHBheWFjY2Vzc1wiLGUuTUFTVEVSUEFTUz1cIm1hc3RlcnBhc3NcIixlLlBBWVBBTEVYUFJFU1M9XCJwYXlwYWxleHByZXNzXCJ9KFdtfHwoV209e30pKTtjb25zdCBZbT1XbTtmdW5jdGlvbiBLbShlLHQpe2NvbnN0IG49ZS5maXJzdE5hbWV8fHQuZmlyc3ROYW1lfHxcIlwiLGk9ZS5sYXN0TmFtZXx8dC5sYXN0TmFtZXx8XCJcIjtyZXR1cm57YWRkcmVzc2VzOihlLmFkZHJlc3Nlc3x8W10pLm1hcChlPT5qbShlKSksY3VzdG9tZXJJZDplLmlkLGlzR3Vlc3Q6ZS5pc0d1ZXN0LHN0b3JlQ3JlZGl0OmUuc3RvcmVDcmVkaXQsZW1haWw6ZS5lbWFpbHx8dC5lbWFpbHx8XCJcIixmaXJzdE5hbWU6bixsYXN0TmFtZTppLG5hbWU6ZS5mdWxsTmFtZXx8W24saV0uam9pbihcIiBcIiksY3VzdG9tZXJHcm91cE5hbWU6ZS5jdXN0b21lckdyb3VwJiZlLmN1c3RvbWVyR3JvdXAubmFtZX19Y2xhc3MgSm17Zm9ybWF0KGUpe2NvbnN0W3Q9XCJcIixuPVwiXCJdPWUuc3BsaXQobmV3IFJlZ0V4cChcIlxcXFxzKi9cXFxccypcIikpLGk9dC5zbGljZSgwLDIpLHI9ND09PW4ubGVuZ3RoP24uc2xpY2UoLTIpOm4/bi5zbGljZSgwLDIpOnQuc2xpY2UoMik7cmV0dXJuIGUubGVuZ3RoPDI/dDplLmxlbmd0aD4zJiYhcj9pOmAke2l9IC8gJHtyfWB9dG9PYmplY3QoZSl7Y29uc3RbdD1cIlwiLG49XCJcIl09ZS5zcGxpdChuZXcgUmVnRXhwKFwiXFxcXHMqL1xcXFxzKlwiKSk7cmV0dXJuL15cXGQrJC8udGVzdCh0KSYmL15cXGQrJC8udGVzdChuKT97bW9udGg6MT09PXQubGVuZ3RoP2AwJHt0fWA6dC5zbGljZSgwLDIpLHllYXI6Mj09PW4ubGVuZ3RoP2AyMCR7bn1gOm4uc2xpY2UoMCw0KX06e21vbnRoOlwiXCIseWVhcjpcIlwifX19Y2xhc3MgWm17Zm9ybWF0KGUpe2NvbnN0e2NhcmQ6dH09TWUoZSk7aWYoIXQpcmV0dXJuIGU7Y29uc3Qgbj1qKERlKGUpLm1hcChlPT5qKGUubGVuZ3RocykpKSxpPXRoaXMudW5mb3JtYXQoZSkuc2xpY2UoMCxuKTtyZXR1cm4gdC5nYXBzLmZpbHRlcihlPT5pLmxlbmd0aD5lKS5yZWR1Y2UoKGUsdCxuKT0+W2Uuc2xpY2UoMCx0K24pLGUuc2xpY2UodCtuKV0uam9pbihcIiBcIiksaSl9dW5mb3JtYXQoZSl7Y29uc3R7Y2FyZDp0fT1NZShlKTtyZXR1cm4gdD9lLnJlcGxhY2UobmV3IFJlZ0V4cChcIiBcIixcImdcIiksXCJcIik6ZX19ZnVuY3Rpb24gUW0oZSx0PXt9KXtjb25zdCBuPWUuY3VycmVuY3kuZGVjaW1hbFBsYWNlcyxpPW5ldyBxYShuKTtyZXR1cm57aWQ6ZS5vcmRlcklkLGl0ZW1zOkhtKGUubGluZUl0ZW1zLGUuY3VycmVuY3kuZGVjaW1hbFBsYWNlcyxcInByb2R1Y3RJZFwiKSxvcmRlcklkOmUub3JkZXJJZCxjdXJyZW5jeTplLmN1cnJlbmN5LmNvZGUsY3VzdG9tZXJDYW5CZUNyZWF0ZWQ6ZS5jdXN0b21lckNhbkJlQ3JlYXRlZCxwYXltZW50OnR5KGUucGF5bWVudHMsdC5wYXltZW50KSxzdWJ0b3RhbDp7YW1vdW50OmUuYmFzZUFtb3VudCxpbnRlZ2VyQW1vdW50OmkudG9JbnRlZ2VyKGUuYmFzZUFtb3VudCl9LGNvdXBvbjp7ZGlzY291bnRlZEFtb3VudDpLKGUuY291cG9ucywoZSx0KT0+ZSt0LmRpc2NvdW50ZWRBbW91bnQsMCksY291cG9uczplLmNvdXBvbnMubWFwKHFtKX0sZGlzY291bnQ6e2Ftb3VudDplLmRpc2NvdW50QW1vdW50LGludGVnZXJBbW91bnQ6aS50b0ludGVnZXIoZS5kaXNjb3VudEFtb3VudCl9LHRva2VuOnQub3JkZXJUb2tlbixjYWxsYmFja1VybDp0LmNhbGxiYWNrVXJsLGRpc2NvdW50Tm90aWZpY2F0aW9uczpbXSxnaWZ0Q2VydGlmaWNhdGU6ZXkoZS5wYXltZW50cyksc29jaWFsRGF0YTppeShlKSxzdGF0dXM6ZS5zdGF0dXMsaGFzRGlnaXRhbEl0ZW1zOmUuaGFzRGlnaXRhbEl0ZW1zLGlzRG93bmxvYWRhYmxlOmUuaXNEb3dubG9hZGFibGUsaXNDb21wbGV0ZTplLmlzQ29tcGxldGUsc2hpcHBpbmc6e2Ftb3VudDplLnNoaXBwaW5nQ29zdFRvdGFsLGludGVnZXJBbW91bnQ6aS50b0ludGVnZXIoZS5zaGlwcGluZ0Nvc3RUb3RhbCksYW1vdW50QmVmb3JlRGlzY291bnQ6ZS5zaGlwcGluZ0Nvc3RCZWZvcmVEaXNjb3VudCxpbnRlZ2VyQW1vdW50QmVmb3JlRGlzY291bnQ6aS50b0ludGVnZXIoZS5zaGlwcGluZ0Nvc3RCZWZvcmVEaXNjb3VudCl9LHN0b3JlQ3JlZGl0OnthbW91bnQ6WG0oZS5wYXltZW50cyl9LHRheGVzOmUudGF4ZXMsdGF4VG90YWw6e2Ftb3VudDplLnRheFRvdGFsLGludGVnZXJBbW91bnQ6aS50b0ludGVnZXIoZS50YXhUb3RhbCl9LGhhbmRsaW5nOnthbW91bnQ6ZS5oYW5kbGluZ0Nvc3RUb3RhbCxpbnRlZ2VyQW1vdW50OmkudG9JbnRlZ2VyKGUuaGFuZGxpbmdDb3N0VG90YWwpfSxncmFuZFRvdGFsOnthbW91bnQ6ZS5vcmRlckFtb3VudCxpbnRlZ2VyQW1vdW50OmUub3JkZXJBbW91bnRBc0ludGVnZXJ9fX1mdW5jdGlvbiBYbShlKXtjb25zdCB0PVMoZSx7cHJvdmlkZXJJZDpcInN0b3JlY3JlZGl0XCJ9KTtyZXR1cm4gdD90LmFtb3VudDowfWZ1bmN0aW9uIGV5KGUpe2NvbnN0IHQ9ZihlLHtwcm92aWRlcklkOlwiZ2lmdGNlcnRpZmljYXRlXCJ9KTtyZXR1cm57dG90YWxEaXNjb3VudGVkQW1vdW50OksodCwoZSx0KT0+dC5hbW91bnQrZSwwKSxhcHBsaWVkR2lmdENlcnRpZmljYXRlczpGKHQubWFwKGU9Pih7Y29kZTplLmRldGFpbC5jb2RlLGRpc2NvdW50ZWRBbW91bnQ6ZS5hbW91bnQscmVtYWluaW5nQmFsYW5jZTplLmRldGFpbC5yZW1haW5pbmcsZ2lmdENlcnRpZmljYXRlOntiYWxhbmNlOmUuYW1vdW50K2UuZGV0YWlsLnJlbWFpbmluZyxjb2RlOmUuZGV0YWlsLmNvZGUscHVyY2hhc2VEYXRlOlwiXCJ9fSkpLFwiY29kZVwiKX19ZnVuY3Rpb24gdHkoZSx0PXt9KXtjb25zdCBuPVMoZSxueSk7cmV0dXJuIG4/e2lkOm4ucHJvdmlkZXJJZCxzdGF0dXM6KGk9bi5kZXRhaWwuc3RlcCxgUEFZTUVOVF9TVEFUVVNfJHtpfWApLGhlbHBUZXh0Om4uZGV0YWlsLmluc3RydWN0aW9ucyxyZXR1cm5Vcmw6dC5yZXR1cm5Vcmx9Ont9O3ZhciBpfWZ1bmN0aW9uIG55KGUpe3JldHVyblwiZ2lmdGNlcnRpZmljYXRlXCIhPT1lLnByb3ZpZGVySWQmJlwic3RvcmVjcmVkaXRcIiE9PWUucHJvdmlkZXJJZH1mdW5jdGlvbiBpeShlKXtjb25zdCB0PXt9O3JldHVyblsuLi5lLmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLC4uLmUubGluZUl0ZW1zLmRpZ2l0YWxJdGVtc10uZm9yRWFjaChlPT57dmFyIG47dFtlLmlkXT0obj1lLFtcImZiXCIsXCJ0d1wiLFwiZ3BcIl0ucmVkdWNlKChlLHQpPT57Y29uc3QgaT1uLnNvY2lhbE1lZGlhJiZTKG4uc29jaWFsTWVkaWEsZT0+ZS5jb2RlPT09dCk7cmV0dXJuIGk/KGVbdF09e25hbWU6bi5uYW1lLGRlc2NyaXB0aW9uOm4ubmFtZSxpbWFnZTpuLmltYWdlVXJsLHVybDppLmxpbmssc2hhcmVUZXh0OmkudGV4dCxzaGFyaW5nTGluazppLmxpbmssY2hhbm5lbE5hbWU6aS5jaGFubmVsLGNoYW5uZWxDb2RlOmkuY29kZX0sZSk6ZX0se30pKX0pLHR9ZnVuY3Rpb24gcnkoZSx0KXtyZXR1cm57ZGVzY3JpcHRpb246ZS5kZXNjcmlwdGlvbixtb2R1bGU6ZS50eXBlLHByaWNlOmUuY29zdCxpZDplLmlkLHNlbGVjdGVkOnQsaXNSZWNvbW1lbmRlZDplLmlzUmVjb21tZW5kZWQsaW1hZ2VVcmw6ZS5pbWFnZVVybCx0cmFuc2l0VGltZTplLnRyYW5zaXRUaW1lfX1jbGFzcyBveXtjb25zdHJ1Y3Rvcigpe3RoaXMuX2NhcmRFeHBpcnlGb3JtYXR0ZXI9bmV3IEptLHRoaXMuX2NhcmROdW1iZXJGb3JtYXR0ZXI9bmV3IFptfXRyYW5zZm9ybShlLHQpe2NvbnN0IG49dC5iaWxsaW5nQWRkcmVzcy5nZXRCaWxsaW5nQWRkcmVzcygpLGk9dC5jaGVja291dC5nZXRDaGVja291dCgpLHI9dC5jdXN0b21lci5nZXRDdXN0b21lcigpLG89dC5vcmRlci5nZXRPcmRlcigpLGE9dC5wYXltZW50TWV0aG9kcy5nZXRQYXltZW50TWV0aG9kKGUubWV0aG9kSWQsZS5nYXRld2F5SWQpLHM9dGhpcy5fbWFwU2hpcHBpbmdBZGRyZXNzKHQsYSksZD10LmNvbnNpZ25tZW50cy5nZXRDb25zaWdubWVudHMoKSxjPXQuY29uc2lnbm1lbnRzLmdldFNoaXBwaW5nT3B0aW9uKCksbD10LmNvbmZpZy5nZXRTdG9yZUNvbmZpZygpLHU9dC5jb25maWcuZ2V0Q29udGV4dENvbmZpZygpLGg9dC5pbnN0cnVtZW50cy5nZXRJbnN0cnVtZW50c01ldGEoKSxwPXQucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZHNNZXRhKCksbT10Lm9yZGVyLmdldE9yZGVyTWV0YSgpLHk9ciYmbiYmS20ocixuKSxnPWgmJmUucGF5bWVudERhdGEmJihObShlLnBheW1lbnREYXRhKXx8ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmZvcm1hdHRlZFBheWxvYWQ7cmV0dXJuISF0JiYoXCJzdHJpbmdcIj09dHlwZW9mIHQuYmlncGF5X3Rva2VufHxCb29sZWFuKHQuYmlncGF5X3Rva2VuJiZ0LmJpZ3BheV90b2tlbi50b2tlbikpfShlLnBheW1lbnREYXRhKSk/YCR7dC5wYXltZW50LmdldFBheW1lbnRUb2tlbigpfSwgJHtoLnZhdWx0QWNjZXNzVG9rZW59YDp0LnBheW1lbnQuZ2V0UGF5bWVudFRva2VuKCk7aWYoIWcpdGhyb3cgbmV3IFFlKFdlLk1pc3NpbmdQYXltZW50VG9rZW4pO3JldHVybnthZGRpdGlvbmFsQWN0aW9uOmUuYWRkaXRpb25hbEFjdGlvbixhdXRoVG9rZW46ZyxjdXN0b21lcjp5LGJpbGxpbmdBZGRyZXNzOm4mJmptKG4pLHNoaXBwaW5nQWRkcmVzczpzJiZqbShzLGQpLHNoaXBwaW5nT3B0aW9uOmMmJnJ5KGMsITApLGNhcnQ6aSYmJG0oaSksb3JkZXI6byYmUW0obyxtKSxvcmRlck1ldGE6bSxwYXltZW50OmUucGF5bWVudERhdGEscGF5bWVudE1ldGhvZDphJiZ0aGlzLl90cmFuc2Zvcm1QYXltZW50TWV0aG9kKGEpLHF1b3RlTWV0YTp7cmVxdWVzdDpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scCkse2dlb0NvdW50cnlDb2RlOnUmJnUuZ2VvQ291bnRyeUNvZGV9KX0sc291cmNlOlwiYmlnY29tbWVyY2UtY2hlY2tvdXQtanMtc2RrXCIsc3RvcmU6VyhsJiZsLnN0b3JlUHJvZmlsZSxbXCJzdG9yZUhhc2hcIixcInN0b3JlSWRcIixcInN0b3JlTGFuZ3VhZ2VcIixcInN0b3JlTmFtZVwiXSl9fXRyYW5zZm9ybVdpdGhIb3N0ZWRGb3JtRGF0YShlLHQsbil7Y29uc3R7YWRkaXRpb25hbEFjdGlvbjppLGF1dGhUb2tlbjpyLGNoZWNrb3V0Om8sY29uZmlnOmEsb3JkZXI6cyxvcmRlck1ldGE6ZCxwYXltZW50OmM9e30scGF5bWVudE1ldGhvZDpsLHBheW1lbnRNZXRob2RNZXRhOnV9PXQsaD1vJiZvLmNvbnNpZ25tZW50c1swXSxwPWgmJmguc2hpcHBpbmdBZGRyZXNzLG09aCYmaC5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uO3JldHVybnthZGRpdGlvbmFsQWN0aW9uOmksYXV0aFRva2VuOnIscGF5bWVudE1ldGhvZDpsJiZ0aGlzLl90cmFuc2Zvcm1QYXltZW50TWV0aG9kKGwpLGN1c3RvbWVyOnMmJnMuYmlsbGluZ0FkZHJlc3MmJm8mJkttKG8uY3VzdG9tZXIscy5iaWxsaW5nQWRkcmVzcyksYmlsbGluZ0FkZHJlc3M6cyYmcy5iaWxsaW5nQWRkcmVzcyYmam0ocy5iaWxsaW5nQWRkcmVzcyksc2hpcHBpbmdBZGRyZXNzOnAmJm8mJmptKHAsby5jb25zaWdubWVudHMpLHNoaXBwaW5nT3B0aW9uOm0mJnJ5KG0sITApLGNhcnQ6byYmJG0obyksb3JkZXI6cyYmUW0ocyxkKSxvcmRlck1ldGE6ZCxwYXltZW50OnRoaXMuX3RyYW5zZm9ybUhvc3RlZElucHV0VmFsdWVzKGUsYyxuKSxxdW90ZU1ldGE6e3JlcXVlc3Q6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHUpLHtnZW9Db3VudHJ5Q29kZTphJiZhLmNvbnRleHQuZ2VvQ291bnRyeUNvZGV9KX0sc291cmNlOlwiYmlnY29tbWVyY2UtY2hlY2tvdXQtanMtc2RrXCIsc3RvcmU6YSYmVyhhLnN0b3JlQ29uZmlnLnN0b3JlUHJvZmlsZSxbXCJzdG9yZUhhc2hcIixcInN0b3JlSWRcIixcInN0b3JlTGFuZ3VhZ2VcIixcInN0b3JlTmFtZVwiXSl9fV90cmFuc2Zvcm1QYXltZW50TWV0aG9kKGUpe3JldHVyblwibXVsdGktb3B0aW9uXCIhPT1lLm1ldGhvZHx8ZS5nYXRld2F5P2UuaW5pdGlhbGl6YXRpb25EYXRhJiZlLmluaXRpYWxpemF0aW9uRGF0YS5nYXRld2F5P09iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7aWQ6ZS5pbml0aWFsaXphdGlvbkRhdGEuZ2F0ZXdheX0pOmUuaWQ9PT1ZbS5CUkFJTlRSRUVfVkVOTU8/T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtpZDpZbS5CUkFJTlRSRUVfUEFZUEFMfSk6ZTpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse2dhdGV3YXk6ZS5pZH0pfV90cmFuc2Zvcm1Ib3N0ZWRJbnB1dFZhbHVlcyhlLHQsbil7cmV0dXJuXCJpbnN0cnVtZW50SWRcImluIHQ/T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtjY0N2djplLmNhcmRDb2RlVmVyaWZpY2F0aW9uLGNjTnVtYmVyOmUuY2FyZE51bWJlclZlcmlmaWNhdGlvbiYmdGhpcy5fY2FyZE51bWJlckZvcm1hdHRlci51bmZvcm1hdChlLmNhcmROdW1iZXJWZXJpZmljYXRpb24pLGhvc3RlZEZvcm1Ob25jZTpufSk6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtjY0N2djplLmNhcmRDb2RlLGNjRXhwaXJ5OnRoaXMuX2NhcmRFeHBpcnlGb3JtYXR0ZXIudG9PYmplY3QoZS5jYXJkRXhwaXJ5fHxcIlwiKSxjY05hbWU6ZS5jYXJkTmFtZXx8XCJcIixjY051bWJlcjp0aGlzLl9jYXJkTnVtYmVyRm9ybWF0dGVyLnVuZm9ybWF0KGUuY2FyZE51bWJlcnx8XCJcIiksaG9zdGVkRm9ybU5vbmNlOm59KX1fbWFwU2hpcHBpbmdBZGRyZXNzKGUsdCl7dmFyIG4saSxyLG87aWYodCl7Y29uc3QgYT1udWxsPT09KGk9bnVsbD09PShuPXQuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09bj92b2lkIDA6bi5ib3Bpcyl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZW5hYmxlZCxzPW51bGw9PT0obz1udWxsPT09KHI9dC5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmJvcGlzKXx8dm9pZCAwPT09bz92b2lkIDA6by5yZXF1aXJlZEFkZHJlc3MsZD1lLmNvbnNpZ25tZW50cy5nZXRDb25zaWdubWVudHMoKSxjPW51bGw9PWQ/dm9pZCAwOmQuZXZlcnkoZT0+ZS5zZWxlY3RlZFBpY2t1cE9wdGlvbik7aWYoYSYmYyYmXCJub25lXCI9PT1zKXJldHVybn1yZXR1cm4gZS5zaGlwcGluZ0FkZHJlc3MuZ2V0U2hpcHBpbmdBZGRyZXNzKCl9fXZhciBheSxzeTshZnVuY3Rpb24oZSl7ZS5VcGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcj1cIlVQREFURV9QQVlNRU5UX1BST1ZJREVSX0NVU1RPTUVSXCJ9KGF5fHwoYXk9e30pKTtjbGFzcyBkeXt1cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcihlKXtyZXR1cm4gbWUobChheS5VcGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcixlKSl9fSFmdW5jdGlvbihlKXtlLkNyZWF0ZUNvbnNpZ25tZW50c1JlcXVlc3RlZD1cIkNSRUFURV9DT05TSUdOTUVOVFNfUkVRVUVTVEVEXCIsZS5DcmVhdGVDb25zaWdubWVudHNTdWNjZWVkZWQ9XCJDUkVBVEVfQ09OU0lHTk1FTlRTX1NVQ0NFRURFRFwiLGUuQ3JlYXRlQ29uc2lnbm1lbnRzRmFpbGVkPVwiQ1JFQVRFX0NPTlNJR05NRU5UU19GQUlMRURcIixlLlVwZGF0ZUNvbnNpZ25tZW50UmVxdWVzdGVkPVwiVVBEQVRFX0NPTlNJR05NRU5UX1JFUVVFU1RFRFwiLGUuVXBkYXRlQ29uc2lnbm1lbnRTdWNjZWVkZWQ9XCJVUERBVEVfQ09OU0lHTk1FTlRfU1VDQ0VFREVEXCIsZS5VcGRhdGVDb25zaWdubWVudEZhaWxlZD1cIlVQREFURV9DT05TSUdOTUVOVF9GQUlMRURcIixlLkRlbGV0ZUNvbnNpZ25tZW50UmVxdWVzdGVkPVwiREVMRVRFX0NPTlNJR05NRU5UX1JFUVVFU1RFRFwiLGUuRGVsZXRlQ29uc2lnbm1lbnRTdWNjZWVkZWQ9XCJERUxFVEVfQ09OU0lHTk1FTlRfU1VDQ0VFREVEXCIsZS5EZWxldGVDb25zaWdubWVudEZhaWxlZD1cIkRFTEVURV9DT05TSUdOTUVOVF9GQUlMRURcIixlLlVwZGF0ZVNoaXBwaW5nT3B0aW9uUmVxdWVzdGVkPVwiVVBEQVRFX1NISVBQSU5HX09QVElPTl9SRVFVRVNURURcIixlLlVwZGF0ZVNoaXBwaW5nT3B0aW9uU3VjY2VlZGVkPVwiVVBEQVRFX1NISVBQSU5HX09QVElPTl9TVUNDRUVERURcIixlLlVwZGF0ZVNoaXBwaW5nT3B0aW9uRmFpbGVkPVwiVVBEQVRFX1NISVBQSU5HX09QVElPTl9GQUlMRURcIixlLkxvYWRTaGlwcGluZ09wdGlvbnNSZXF1ZXN0ZWQ9XCJMT0FEX1NISVBQSU5HX09QVElPTlNfUkVRVUVTVEVEXCIsZS5Mb2FkU2hpcHBpbmdPcHRpb25zU3VjY2VlZGVkPVwiTE9BRF9TSElQUElOR19PUFRJT05TX1NVQ0NFRURFRFwiLGUuTG9hZFNoaXBwaW5nT3B0aW9uc0ZhaWxlZD1cIkxPQURfU0hJUFBJTkdfT1BUSU9OU19GQUlMRURcIn0oc3l8fChzeT17fSkpO2NsYXNzIGN5e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fY29uc2lnbm1lbnRSZXF1ZXN0U2VuZGVyPWUsdGhpcy5fY2hlY2tvdXRSZXF1ZXN0U2VuZGVyPXR9dW5hc3NpZ25JdGVtc0J5QWRkcmVzcyhlLHQpe3JldHVybiBuPT57Y29uc3QgaT1uLmdldFN0YXRlKCk7aWYoIWkuY2hlY2tvdXQuZ2V0Q2hlY2tvdXQoKSl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NoZWNrb3V0KTtjb25zdCByPXRoaXMuX2NvbnNpZ25tZW50SGFzQWRkcmVzcyhlKT9lLmFkZHJlc3M6ZS5zaGlwcGluZ0FkZHJlc3Msbz1pLmNvbnNpZ25tZW50cy5nZXRDb25zaWdubWVudEJ5QWRkcmVzcyhyKTtpZighbyl0aHJvdyBuZXcgRnQoXCJObyBjb25zaWdubWVudCBmb3VuZCBmb3IgdGhlIHNwZWNpZmllZCBhZGRyZXNzXCIpO2NvbnN0IGE9dGhpcy5fcmVtb3ZlTGluZUl0ZW1zKGUubGluZUl0ZW1zLG8saS5jYXJ0LmdldENhcnQoKSk7cmV0dXJuIGEubGVuZ3RoP3RoaXMudXBkYXRlQ29uc2lnbm1lbnQoe2lkOm8uaWQsYWRkcmVzczpyLGxpbmVJdGVtczphfSx0KShuKTp0aGlzLmRlbGV0ZUNvbnNpZ25tZW50KG8uaWQsdCkobil9fWFzc2lnbkl0ZW1zQnlBZGRyZXNzKGUsdCl7cmV0dXJuIG49Pntjb25zdCBpPW4uZ2V0U3RhdGUoKSxyPXRoaXMuX2NvbnNpZ25tZW50SGFzQWRkcmVzcyhlKT9lLmFkZHJlc3M6ZS5zaGlwcGluZ0FkZHJlc3Msbz1pLmNvbnNpZ25tZW50cy5nZXRDb25zaWdubWVudEJ5QWRkcmVzcyhyKTtyZXR1cm4gdGhpcy5fY3JlYXRlT3JVcGRhdGVDb25zaWdubWVudCh7aWQ6byYmby5pZCxhZGRyZXNzOnIsbGluZUl0ZW1zOnRoaXMuX2FkZExpbmVJdGVtcyhlLmxpbmVJdGVtcyxvLGkuY2FydC5nZXRDYXJ0KCkpfSx0KShuKX19c2VsZWN0U2hpcHBpbmdPcHRpb24oZSx0KXtyZXR1cm4gbj0+b2UuY3JlYXRlKGk9Pntjb25zdCByPW4uZ2V0U3RhdGUoKSxvPXIuY2hlY2tvdXQuZ2V0Q2hlY2tvdXQoKSxhPXIuY29uc2lnbm1lbnRzLmdldENvbnNpZ25tZW50cygpO2lmKCFvKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXQpO2lmKCFhfHwhYS5sZW5ndGgpdGhyb3cgbmV3IFFlKFdlLk1pc3NpbmdDb25zaWdubWVudHMpO2NvbnN0IHM9e2lkOmFbMF0uaWQsc2hpcHBpbmdPcHRpb25JZDplfSxkPXtpZDphWzBdLmlkfTtpLm5leHQobChzeS5VcGRhdGVTaGlwcGluZ09wdGlvblJlcXVlc3RlZCx2b2lkIDAsZCkpLHRoaXMuX2NvbnNpZ25tZW50UmVxdWVzdFNlbmRlci51cGRhdGVDb25zaWdubWVudChvLmlkLHMsdCkudGhlbigoe2JvZHk6ZX0pPT57aS5uZXh0KGwoc3kuVXBkYXRlU2hpcHBpbmdPcHRpb25TdWNjZWVkZWQsZSxkKSksaS5jb21wbGV0ZSgpfSkuY2F0Y2goZT0+e2kuZXJyb3IoaChzeS5VcGRhdGVTaGlwcGluZ09wdGlvbkZhaWxlZCxlLGQpKX0pfSl9bG9hZFNoaXBwaW5nT3B0aW9ucyhlKXtyZXR1cm4gdD0+b2UuY3JlYXRlKG49Pntjb25zdCBpPXQuZ2V0U3RhdGUoKS5jaGVja291dC5nZXRDaGVja291dCgpO2lmKCFpKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXQpO24ubmV4dChsKHN5LkxvYWRTaGlwcGluZ09wdGlvbnNSZXF1ZXN0ZWQpKSx0aGlzLl9jaGVja291dFJlcXVlc3RTZW5kZXIubG9hZENoZWNrb3V0KGkuaWQsT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtwYXJhbXM6e2luY2x1ZGU6W0V0LkF2YWlsYWJsZVNoaXBwaW5nT3B0aW9uc119fSkpLnRoZW4oKHtib2R5OmV9KT0+e24ubmV4dChsKHN5LkxvYWRTaGlwcGluZ09wdGlvbnNTdWNjZWVkZWQsZSkpLG4uY29tcGxldGUoKX0pLmNhdGNoKGU9PntuLmVycm9yKGgoc3kuTG9hZFNoaXBwaW5nT3B0aW9uc0ZhaWxlZCxlKSl9KX0pfXVwZGF0ZUFkZHJlc3MoZSx0KXtyZXR1cm4gbj0+e2NvbnN0IGk9dGhpcy5fZ2V0VXBkYXRlQWRkcmVzc1JlcXVlc3RCb2R5KGUsbikscj1uLmdldFN0YXRlKCkuY29uc2lnbm1lbnRzLmdldENvbnNpZ25tZW50cygpO3JldHVybiByJiZyLmxlbmd0aCYmKGkuaWQ9clswXS5pZCksdGhpcy5fY3JlYXRlT3JVcGRhdGVDb25zaWdubWVudChpLHQpKG4pfX1jcmVhdGVDb25zaWdubWVudHMoZSx0KXtyZXR1cm4gbj0+b2UuY3JlYXRlKGk9Pntjb25zdCByPW4uZ2V0U3RhdGUoKS5jaGVja291dC5nZXRDaGVja291dCgpO2lmKCFyfHwhci5pZCl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NoZWNrb3V0KTtpLm5leHQobChzeS5DcmVhdGVDb25zaWdubWVudHNSZXF1ZXN0ZWQpKSx0aGlzLl9jb25zaWdubWVudFJlcXVlc3RTZW5kZXIuY3JlYXRlQ29uc2lnbm1lbnRzKHIuaWQsZSx0KS50aGVuKCh7Ym9keTplfSk9PntpLm5leHQobChzeS5DcmVhdGVDb25zaWdubWVudHNTdWNjZWVkZWQsZSkpLGkuY29tcGxldGUoKX0pLmNhdGNoKGU9PntpLmVycm9yKGgoc3kuQ3JlYXRlQ29uc2lnbm1lbnRzRmFpbGVkLGUpKX0pfSl9dXBkYXRlQ29uc2lnbm1lbnQoZSx0KXtyZXR1cm4gbj0+b2UuY3JlYXRlKGk9Pntjb25zdCByPW4uZ2V0U3RhdGUoKS5jaGVja291dC5nZXRDaGVja291dCgpO2lmKCFyfHwhci5pZCl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NoZWNrb3V0KTtjb25zdCBvPXtpZDplLmlkfTtpLm5leHQobChzeS5VcGRhdGVDb25zaWdubWVudFJlcXVlc3RlZCx2b2lkIDAsbykpLHRoaXMuX2NvbnNpZ25tZW50UmVxdWVzdFNlbmRlci51cGRhdGVDb25zaWdubWVudChyLmlkLGUsdCkudGhlbigoe2JvZHk6ZX0pPT57aS5uZXh0KGwoc3kuVXBkYXRlQ29uc2lnbm1lbnRTdWNjZWVkZWQsZSxvKSksaS5jb21wbGV0ZSgpfSkuY2F0Y2goZT0+e2kuZXJyb3IoaChzeS5VcGRhdGVDb25zaWdubWVudEZhaWxlZCxlLG8pKX0pfSl9ZGVsZXRlQ29uc2lnbm1lbnQoZSx0KXtyZXR1cm4gbj0+b2UuY3JlYXRlKGk9Pntjb25zdCByPW4uZ2V0U3RhdGUoKS5jaGVja291dC5nZXRDaGVja291dCgpLG89e2lkOmV9O2lmKCFyfHwhci5pZCl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NoZWNrb3V0KTtpLm5leHQobChzeS5EZWxldGVDb25zaWdubWVudFJlcXVlc3RlZCx2b2lkIDAsbykpLHRoaXMuX2NvbnNpZ25tZW50UmVxdWVzdFNlbmRlci5kZWxldGVDb25zaWdubWVudChyLmlkLGUsdCkudGhlbigoe2JvZHk6ZX0pPT57aS5uZXh0KGwoc3kuRGVsZXRlQ29uc2lnbm1lbnRTdWNjZWVkZWQsZSxvKSksaS5jb21wbGV0ZSgpfSkuY2F0Y2goZT0+e2kuZXJyb3IoaChzeS5EZWxldGVDb25zaWdubWVudEZhaWxlZCxlLG8pKX0pfSl9dXBkYXRlU2hpcHBpbmdPcHRpb24oZSx0KXtyZXR1cm4gbj0+b2UuY3JlYXRlKGk9Pnt2YXIgcjtjb25zdCBvPW4uZ2V0U3RhdGUoKS5jaGVja291dC5nZXRDaGVja291dCgpLGE9bi5nZXRTdGF0ZSgpLmNvbnNpZ25tZW50cy5nZXRDb25zaWdubWVudEJ5SWQoZS5pZCk7aWYoKG51bGw9PT0ocj1udWxsPT1hP3ZvaWQgMDphLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmlkKT09PWUuc2hpcHBpbmdPcHRpb25JZClyZXR1cm4gdm9pZCBpLmNvbXBsZXRlKCk7aWYoIW98fCFvLmlkKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXQpO2NvbnN0IHM9e2lkOmUuaWR9O2kubmV4dChsKHN5LlVwZGF0ZVNoaXBwaW5nT3B0aW9uUmVxdWVzdGVkLHZvaWQgMCxzKSksdGhpcy5fY29uc2lnbm1lbnRSZXF1ZXN0U2VuZGVyLnVwZGF0ZUNvbnNpZ25tZW50KG8uaWQsZSx0KS50aGVuKCh7Ym9keTplfSk9PntpLm5leHQobChzeS5VcGRhdGVTaGlwcGluZ09wdGlvblN1Y2NlZWRlZCxlLHMpKSxpLmNvbXBsZXRlKCl9KS5jYXRjaChlPT57aS5lcnJvcihoKHN5LlVwZGF0ZVNoaXBwaW5nT3B0aW9uRmFpbGVkLGUscykpfSl9KX1fY3JlYXRlT3JVcGRhdGVDb25zaWdubWVudChlLHQpe3JldHVybiBuPT57Y29uc3QgaT1uLmdldFN0YXRlKCkuY2hlY2tvdXQuZ2V0Q2hlY2tvdXQoKTtpZighaXx8IWkuaWQpdGhyb3cgbmV3IFFlKFdlLk1pc3NpbmdDaGVja291dCk7cmV0dXJuIHRoaXMuX2lzVXBkYXRlQ29uc2lnbm1lbnRSZXF1ZXN0KGUpP3RoaXMudXBkYXRlQ29uc2lnbm1lbnQoZSx0KShuKTp0aGlzLmNyZWF0ZUNvbnNpZ25tZW50cyhbZV0sdCkobil9fV9nZXRVcGRhdGVBZGRyZXNzUmVxdWVzdEJvZHkoZSx0KXtjb25zdCBuPXQuZ2V0U3RhdGUoKS5jYXJ0LmdldENhcnQoKTtpZighbil0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NhcnQpO2NvbnN0e3BoeXNpY2FsSXRlbXM6aSxjdXN0b21JdGVtczpyPVtdfT1uLmxpbmVJdGVtcztyZXR1cm57YWRkcmVzczplLGxpbmVJdGVtczpbLi4uaSwuLi5yXS5tYXAoZT0+KHtpdGVtSWQ6ZS5pZCxxdWFudGl0eTplLnF1YW50aXR5fSkpfX1fcmVtb3ZlTGluZUl0ZW1zKGUsdCxuKXtpZighbil0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NhcnQpO3JldHVybiB0aGlzLl9oeWRyYXRlTGluZUl0ZW1zKHQubGluZUl0ZW1JZHMsbikubWFwKHQ9Pntjb25zdCBuPVMoZSxlPT5lLml0ZW1JZD09PXQuaXRlbUlkKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtxdWFudGl0eTpuP3QucXVhbnRpdHktbi5xdWFudGl0eTp0LnF1YW50aXR5fSl9KS5maWx0ZXIoZT0+ZS5xdWFudGl0eT4wKX1fYWRkTGluZUl0ZW1zKGUsdCxuKXtpZighdClyZXR1cm4gZTtpZighbil0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NhcnQpO3JldHVybiBlLmNvbmNhdCh0aGlzLl9oeWRyYXRlTGluZUl0ZW1zKHQubGluZUl0ZW1JZHMsbikpLmZpbHRlcihlPT5lLnF1YW50aXR5PjApfV9oeWRyYXRlTGluZUl0ZW1zKGUsdCl7cmV0dXJuIGUubWFwKGU9Pntjb25zdCBuPVModC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcyx0PT50LmlkPT09ZSk7cmV0dXJue2l0ZW1JZDplLHF1YW50aXR5Om4/bi5xdWFudGl0eTowfX0pfV9pc1VwZGF0ZUNvbnNpZ25tZW50UmVxdWVzdChlKXtyZXR1cm4hIWUuaWR9X2NvbnNpZ25tZW50SGFzQWRkcmVzcyhlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZSYmXCJhZGRyZXNzXCJpbiBlfX1jb25zdCBseT1bXCJjb25zaWdubWVudHMuYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zXCIsXCJjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLm9wdGlvbnNcIixcImNhcnQubGluZUl0ZW1zLmRpZ2l0YWxJdGVtcy5vcHRpb25zXCIsXCJjdXN0b21lclwiLFwicHJvbW90aW9ucy5iYW5uZXJzXCJdO2NsYXNzIHV5e2NvbnN0cnVjdG9yKGUpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZX1jcmVhdGVDb25zaWdubWVudHMoZSx0LHt0aW1lb3V0Om4scGFyYW1zOntpbmNsdWRlOml9PXt9fT17fSl7Y29uc3Qgcj1gL2FwaS9zdG9yZWZyb250L2NoZWNrb3V0cy8ke2V9L2NvbnNpZ25tZW50c2Asbz1PYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxfSxydCk7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdChyLHtib2R5OnQscGFyYW1zOntpbmNsdWRlOmVzKGx5LGkpfSxoZWFkZXJzOm8sdGltZW91dDpufSkuY2F0Y2goZT0+e2lmKFwiZW1wdHlfY2FydFwiPT09ZS5ib2R5LnR5cGUpdGhyb3cgbmV3IG50O3Rocm93IGV9KX11cGRhdGVDb25zaWdubWVudChlLHQse3RpbWVvdXQ6bixwYXJhbXM6e2luY2x1ZGU6aX09e319PXt9KXtjb25zdHtpZDpyfT10LG89ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufSh0LFtcImlkXCJdKSxhPWAvYXBpL3N0b3JlZnJvbnQvY2hlY2tvdXRzLyR7ZX0vY29uc2lnbm1lbnRzLyR7cn1gLHM9T2JqZWN0LmFzc2lnbih7QWNjZXB0Oml0Lkpzb25WMX0scnQpO3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnB1dChhLHtib2R5Om8scGFyYW1zOntpbmNsdWRlOmVzKGx5LGkpfSxoZWFkZXJzOnMsdGltZW91dDpufSkuY2F0Y2goZT0+e2lmKFwiZW1wdHlfY2FydFwiPT09ZS5ib2R5LnR5cGUpdGhyb3cgbmV3IG50O3Rocm93IGV9KX1kZWxldGVDb25zaWdubWVudChlLHQse3RpbWVvdXQ6bn09e30pe2NvbnN0IGk9YC9hcGkvc3RvcmVmcm9udC9jaGVja291dHMvJHtlfS9jb25zaWdubWVudHMvJHt0fWAscj1PYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxfSxydCksbz1EdChseSk7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIuZGVsZXRlKGkse3BhcmFtczp7aW5jbHVkZTpvfSxoZWFkZXJzOnIsdGltZW91dDpufSkuY2F0Y2goZT0+e2lmKFwiZW1wdHlfY2FydFwiPT09ZS5ib2R5LnR5cGUpdGhyb3cgbmV3IG50O3Rocm93IGV9KX19dmFyIGh5LHB5OyFmdW5jdGlvbihlKXtlLkxvYWRTaGlwcGluZ0NvdW50cmllc1JlcXVlc3RlZD1cIkxPQURfU0hJUFBJTkdfQ09VTlRSSUVTX1JFUVVFU1RFRFwiLGUuTG9hZFNoaXBwaW5nQ291bnRyaWVzU3VjY2VlZGVkPVwiTE9BRF9TSElQUElOR19DT1VOVFJJRVNfU1VDQ0VFREVEXCIsZS5Mb2FkU2hpcHBpbmdDb3VudHJpZXNGYWlsZWQ9XCJMT0FEX1NISVBQSU5HX0NPVU5UUklFU19GQUlMRURcIn0oaHl8fChoeT17fSkpO2NsYXNzIG15e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fc2hpcHBpbmdDb3VudHJ5UmVxdWVzdFNlbmRlcj1lLHRoaXMuX3N0b3JlPXR9bG9hZENvdW50cmllcyhlKXtjb25zdHtjaGVja291dDp0fT10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLG49dC5nZXRDaGVja291dCgpLGk9bj9uLmNoYW5uZWxJZDpudWxsO3JldHVybiBvZS5jcmVhdGUodD0+e3QubmV4dChsKGh5LkxvYWRTaGlwcGluZ0NvdW50cmllc1JlcXVlc3RlZCkpLHRoaXMuX3NoaXBwaW5nQ291bnRyeVJlcXVlc3RTZW5kZXIubG9hZENvdW50cmllcyhpLGUpLnRoZW4oZT0+e3QubmV4dChsKGh5LkxvYWRTaGlwcGluZ0NvdW50cmllc1N1Y2NlZWRlZCxlLmJvZHkuZGF0YSkpLHQuY29tcGxldGUoKX0pLmNhdGNoKGU9Pnt0LmVycm9yKGgoaHkuTG9hZFNoaXBwaW5nQ291bnRyaWVzRmFpbGVkLGUpKX0pfSl9fWNsYXNzIHl5e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lLHRoaXMuX2NvbmZpZz10fWxvYWRDb3VudHJpZXMoZSx7dGltZW91dDp0fT17fSl7Y29uc3Qgbj1cIi9pbnRlcm5hbGFwaS92MS9zaGlwcGluZy9jb3VudHJpZXNcIisoZT9gP2NoYW5uZWxfaWQ9JHtlfWA6XCJcIiksaT1PYmplY3QuYXNzaWduKHtcIkFjY2VwdC1MYW5ndWFnZVwiOnRoaXMuX2NvbmZpZy5sb2NhbGV9LHJ0KTtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5nZXQobix7aGVhZGVyczppLHRpbWVvdXQ6dH0pfX0hZnVuY3Rpb24oZSl7ZS5BcHBseVN0b3JlQ3JlZGl0UmVxdWVzdGVkPVwiQVBQTFlfU1RPUkVfQ1JFRElUX1JFUVVFU1RFRFwiLGUuQXBwbHlTdG9yZUNyZWRpdFN1Y2NlZWRlZD1cIkFQUExZX1NUT1JFX0NSRURJVF9TVUNDRUVERURcIixlLkFwcGx5U3RvcmVDcmVkaXRGYWlsZWQ9XCJBUFBMWV9TVE9SRV9DUkVESVRfRkFJTEVEXCJ9KHB5fHwocHk9e30pKTt2YXIgZ3k7Y2xhc3Mgdnl7Y29uc3RydWN0b3IoZSl7dGhpcy5fc3RvcmVDcmVkaXRSZXF1ZXN0U2VuZGVyPWV9YXBwbHlTdG9yZUNyZWRpdChlLHQpe3JldHVybiBuPT5zZShtZShsKHB5LkFwcGx5U3RvcmVDcmVkaXRSZXF1ZXN0ZWQpKSxkZSgoKT0+e3JldHVybiBpPXRoaXMscj12b2lkIDAsYT1mdW5jdGlvbiooKXtjb25zdCBpPW4uZ2V0U3RhdGUoKS5jaGVja291dC5nZXRDaGVja291dCgpO2lmKCFpKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXQpO2NvbnN0e2JvZHk6cn09eWllbGQgZT90aGlzLl9zdG9yZUNyZWRpdFJlcXVlc3RTZW5kZXIuYXBwbHlTdG9yZUNyZWRpdChpLmlkLHQpOnRoaXMuX3N0b3JlQ3JlZGl0UmVxdWVzdFNlbmRlci5yZW1vdmVTdG9yZUNyZWRpdChpLmlkLHQpO3JldHVybiBsKHB5LkFwcGx5U3RvcmVDcmVkaXRTdWNjZWVkZWQscil9LG5ldygobz12b2lkIDApfHwobz1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3RyeXtkKGEubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChhLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBpO3QuZG9uZT9lKHQudmFsdWUpOihpPXQudmFsdWUsaSBpbnN0YW5jZW9mIG8/aTpuZXcgbyhmdW5jdGlvbihlKXtlKGkpfSkpLnRoZW4obixzKX1kKChhPWEuYXBwbHkoaSxyfHxbXSkpLm5leHQoKSl9KTt2YXIgaSxyLG8sYX0pKS5waXBlKGdlKGU9PkplKHB5LkFwcGx5U3RvcmVDcmVkaXRGYWlsZWQsZSkpKX19Y2xhc3MgZnl7Y29uc3RydWN0b3IoZSl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lfWFwcGx5U3RvcmVDcmVkaXQoZSx7dGltZW91dDp0fT17fSl7Y29uc3Qgbj1gL2FwaS9zdG9yZWZyb250L2NoZWNrb3V0cy8ke2V9L3N0b3JlLWNyZWRpdGAsaT1PYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxfSxydCk7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdChuLHtoZWFkZXJzOmksdGltZW91dDp0LHBhcmFtczp7aW5jbHVkZTpEdChPdCl9fSl9cmVtb3ZlU3RvcmVDcmVkaXQoZSx7dGltZW91dDp0fT17fSl7Y29uc3Qgbj1gL2FwaS9zdG9yZWZyb250L2NoZWNrb3V0cy8ke2V9L3N0b3JlLWNyZWRpdGAsaT1PYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxfSxydCk7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIuZGVsZXRlKG4se2hlYWRlcnM6aSx0aW1lb3V0OnQscGFyYW1zOntpbmNsdWRlOkR0KE90KX19KX19IWZ1bmN0aW9uKGUpe2UuVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3RlZD1cIlVQREFURV9TVUJTQ1JJUFRJT05TX1JFUVVFU1RFRFwiLGUuVXBkYXRlU3Vic2NyaXB0aW9uc1N1Y2NlZWRlZD1cIlVQREFURV9TVUJTQ1JJUFRJT05TX1NVQ0NFRURFRFwiLGUuVXBkYXRlU3Vic2NyaXB0aW9uc0ZhaWxlZD1cIlVQREFURV9TVUJTQ1JJUFRJT05TX0ZBSUxFRFwifShneXx8KGd5PXt9KSk7Y2xhc3MgU3kgZXh0ZW5kcyBfdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLm5hbWU9XCJVcGRhdGVTdWJzY3JpcHRpb25zRXJyb3JcIix0aGlzLnR5cGU9XCJ1cGRhdGVfc3Vic2NyaXB0aW9uc1wifX1jbGFzcyBfeXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9zdWJzY3JpcHRpb25zUmVxdWVzdFNlbmRlcj1lfXVwZGF0ZVN1YnNjcmlwdGlvbnMoZSx0KXtyZXR1cm4gc2UobWUobChneS5VcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdGVkKSksZGUoKCk9PntyZXR1cm4gbj10aGlzLGk9dm9pZCAwLG89ZnVuY3Rpb24qKCl7Y29uc3R7Ym9keTpufT15aWVsZCB0aGlzLl9zdWJzY3JpcHRpb25zUmVxdWVzdFNlbmRlci51cGRhdGVTdWJzY3JpcHRpb25zKGUsdCk7cmV0dXJuIGwoZ3kuVXBkYXRlU3Vic2NyaXB0aW9uc1N1Y2NlZWRlZCxuKX0sbmV3KChyPXZvaWQgMCl8fChyPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoby5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKG8udGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2Ygcj9uOm5ldyByKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKG89by5hcHBseShuLGl8fFtdKSkubmV4dCgpKX0pO3ZhciBuLGkscixvfSkpLnBpcGUoZ2UoZT0+SmUoZ3kuVXBkYXRlU3Vic2NyaXB0aW9uc0ZhaWxlZCxuZXcgU3koZSkpKSl9fWNsYXNzIHd5e2NvbnN0cnVjdG9yKGUpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZX11cGRhdGVTdWJzY3JpcHRpb25zKGUse3RpbWVvdXQ6dH09e30pe2NvbnN0IG49T2JqZWN0LmFzc2lnbih7QWNjZXB0Oml0Lkpzb25WMX0scnQpO3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoXCIvYXBpL3N0b3JlZnJvbnQvc3Vic2NyaXB0aW9uc1wiLHtib2R5OmUsaGVhZGVyczpuLHRpbWVvdXQ6dH0pfX1mdW5jdGlvbiBDeShlKXtyZXR1cm4gTShlKX1jb25zdCBJeT1VKGU9PkFycmF5LmlzQXJyYXkoZSk/ZS5tYXAoZT0+YnkoZSkpOkN5KGUpP09iamVjdC5rZXlzKGUpLnJlZHVjZSgodCxuKT0+T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtbbl06YnkoZVtuXSl9KSx7fSk6ZSk7SXkuY2FjaGU9bmV3IFdlYWtNYXA7Y29uc3QgYnk9ZT0+XCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lP0l5KGUpOmU7ZnVuY3Rpb24gUHkoZSl7cmV0dXJuKC4uLnQpPT5ieShlKC4uLnQpKX1mdW5jdGlvbiBPeSh7YmlsbGluZ0FkZHJlc3M6e2dldEJpbGxpbmdBZGRyZXNzOmUsZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93OnR9LGNhcnQ6e2dldENhcnQ6bixnZXRDYXJ0T3JUaHJvdzppfSxjaGVja291dDp7Z2V0Q2hlY2tvdXQ6cixnZXRDaGVja291dE9yVGhyb3c6byxnZXRPdXRzdGFuZGluZ0JhbGFuY2U6YX0sY29uZmlnOntnZXRDb250ZXh0Q29uZmlnOnMsZ2V0SG9zdDpkLGdldExvY2FsZTpjLGdldFN0b3JlQ29uZmlnOmwsZ2V0U3RvcmVDb25maWdPclRocm93OnUsZ2V0Q29uZmlnOmh9LGNvbnNpZ25tZW50czp7Z2V0Q29uc2lnbm1lbnRzOnAsZ2V0Q29uc2lnbm1lbnRzT3JUaHJvdzptfSxjb3VudHJpZXM6e2dldENvdW50cmllczp5fSxjdXN0b21lcjp7Z2V0Q3VzdG9tZXI6ZyxnZXRDdXN0b21lck9yVGhyb3c6dn0saW5zdHJ1bWVudHM6e2dldENhcmRJbnN0cnVtZW50OmYsZ2V0Q2FyZEluc3RydW1lbnRPclRocm93OlMsZ2V0SW5zdHJ1bWVudHM6XyxnZXRJbnN0cnVtZW50c01ldGE6d30sb3JkZXI6e2dldE9yZGVyOkMsZ2V0T3JkZXJPclRocm93OkksZ2V0T3JkZXJNZXRhOmJ9LHBheW1lbnQ6e2dldFBheW1lbnRUb2tlbjpQLGdldFBheW1lbnRUb2tlbk9yVGhyb3c6TyxnZXRQYXltZW50SWQ6RSxnZXRQYXltZW50SWRPclRocm93OkEsZ2V0UGF5bWVudFN0YXR1czprLGdldFBheW1lbnRTdGF0dXNPclRocm93OlQsZ2V0UGF5bWVudFJlZGlyZWN0VXJsOkQsZ2V0UGF5bWVudFJlZGlyZWN0VXJsT3JUaHJvdzpNLGlzUGF5bWVudERhdGFSZXF1aXJlZDp6fSxwYXltZW50TWV0aG9kczp7Z2V0UGF5bWVudE1ldGhvZDpOLGdldFBheW1lbnRNZXRob2RPclRocm93OngsZ2V0UGF5bWVudE1ldGhvZHNNZXRhOkZ9LHBheW1lbnRQcm92aWRlckN1c3RvbWVyOntnZXRQYXltZW50UHJvdmlkZXJDdXN0b21lcjpSLGdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyT3JUaHJvdzpMfSxwYXltZW50U3RyYXRlZ2llczp7aXNJbml0aWFsaXplZDpCfSxzaGlwcGluZ0FkZHJlc3M6e2dldFNoaXBwaW5nQWRkcmVzczpqLGdldFNoaXBwaW5nQWRkcmVzc09yVGhyb3c6VSxnZXRTaGlwcGluZ0FkZHJlc3NlczpxLGdldFNoaXBwaW5nQWRkcmVzc2VzT3JUaHJvdzpWfSxzaGlwcGluZ0NvdW50cmllczp7Z2V0U2hpcHBpbmdDb3VudHJpZXM6R319KXtyZXR1cm57Z2V0SG9zdDpQeShkKSxnZXRMb2NhbGU6UHkoYyksZ2V0QmlsbGluZ0FkZHJlc3M6UHkoZSksZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93OlB5KHQpLGdldENhcnQ6UHkobiksZ2V0Q2FydE9yVGhyb3c6UHkoaSksZ2V0Q2hlY2tvdXQ6UHkociksZ2V0Q2hlY2tvdXRPclRocm93OlB5KG8pLGdldENvdW50cmllczpQeSh5KSxnZXRTdG9yZUNvbmZpZzpQeShsKSxnZXRTdG9yZUNvbmZpZ09yVGhyb3c6UHkodSksZ2V0Q29uZmlnOlB5KGgpLGdldENvbnNpZ25tZW50czpQeShwKSxnZXRDb25zaWdubWVudHNPclRocm93OlB5KG0pLGdldENvbnRleHRDb25maWc6UHkocyksZ2V0Q3VzdG9tZXI6UHkoZyksZ2V0Q3VzdG9tZXJPclRocm93OlB5KHYpLGdldENhcmRJbnN0cnVtZW50OlB5KGYpLGdldEluc3RydW1lbnRzOlB5KF8pLGdldENhcmRJbnN0cnVtZW50T3JUaHJvdzpQeShTKSxnZXRPcmRlcjpQeShDKSxnZXRPcmRlck9yVGhyb3c6UHkoSSksZ2V0T3JkZXJNZXRhOlB5KGIpLGdldEluc3RydW1lbnRzTWV0YTpQeSh3KSxnZXRQYXltZW50VG9rZW46UCxnZXRQYXltZW50VG9rZW5PclRocm93Ok8sZ2V0UGF5bWVudElkOkUsZ2V0UGF5bWVudElkT3JUaHJvdzpBLGdldFBheW1lbnRTdGF0dXM6ayxnZXRQYXltZW50U3RhdHVzT3JUaHJvdzpULGdldFBheW1lbnRSZWRpcmVjdFVybDpELGdldFBheW1lbnRSZWRpcmVjdFVybE9yVGhyb3c6TSxnZXRQYXltZW50TWV0aG9kOlB5KE4pLGdldFBheW1lbnRNZXRob2RPclRocm93OlB5KHgpLGdldFBheW1lbnRNZXRob2RzTWV0YTpQeShGKSxnZXRQYXltZW50UHJvdmlkZXJDdXN0b21lcjpQeShSKSxnZXRQYXltZW50UHJvdmlkZXJDdXN0b21lck9yVGhyb3c6UHkoTCksZ2V0U2hpcHBpbmdBZGRyZXNzOlB5KGopLGdldFNoaXBwaW5nQWRkcmVzc09yVGhyb3c6UHkoVSksZ2V0U2hpcHBpbmdBZGRyZXNzZXM6UHkocSksZ2V0U2hpcHBpbmdBZGRyZXNzZXNPclRocm93OlB5KFYpLGdldFNoaXBwaW5nQ291bnRyaWVzOlB5KEcpLGdldE91dHN0YW5kaW5nQmFsYW5jZTpQeShhKSxpc1BheW1lbnREYXRhUmVxdWlyZWQ6eixpc1BheW1lbnRNZXRob2RJbml0aWFsaXplZDpCfX12YXIgRXk9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgQXl7Y29uc3RydWN0b3IoZSx0LG4saSxyLG8sYSxzLGQsYyxsLHUsaCxwLG0seSxnLHYsZixTKXt0aGlzLl9zdG9yZT1lLHRoaXMuX3N0b3JlUHJvamVjdGlvbkZhY3Rvcnk9dCx0aGlzLl9jaGVja291dEFjdGlvbkNyZWF0b3I9bix0aGlzLl9jaGVja291dFZhbGlkYXRvcj1pLHRoaXMuX2hvc3RlZEZvcm1GYWN0b3J5PXIsdGhpcy5fb3JkZXJBY3Rpb25DcmVhdG9yPW8sdGhpcy5fYmlsbGluZ0FkZHJlc3NBY3Rpb25DcmVhdG9yPWEsdGhpcy5fY29uc2lnbm1lbnRBY3Rpb25DcmVhdG9yPXMsdGhpcy5fcGF5bWVudE1ldGhvZEFjdGlvbkNyZWF0b3I9ZCx0aGlzLl9wYXltZW50QWN0aW9uQ3JlYXRvcj1jLHRoaXMuX3BheW1lbnRIdW1hblZlcmlmaWNhdGlvbkhhbmRsZXI9bCx0aGlzLl9jdXN0b21lckFjdGlvbkNyZWF0b3I9dSx0aGlzLl9jYXJ0UmVxdWVzdFNlbmRlcj1oLHRoaXMuX3N0b3JlQ3JlZGl0QWN0aW9uQ3JlYXRvcj1wLHRoaXMuX2NvdXBvbkFjdGlvbkNyZWF0b3I9bSx0aGlzLl9zcGFtUHJvdGVjdGlvbkFjdGlvbkNyZWF0b3I9eSx0aGlzLl9wYXltZW50UHJvdmlkZXJDdXN0b21lckFjdGlvbkNyZWF0b3I9Zyx0aGlzLl9zaGlwcGluZ0NvdW50cnlBY3Rpb25DcmVhdG9yPXYsdGhpcy5fcmVtb3RlQ2hlY2tvdXRBY3Rpb25DcmVhdG9yPWYsdGhpcy5fcGF5bWVudFN0cmF0ZWd5V2lkZ2V0QWN0aW9uQ3JlYXRvcj1TLHRoaXMuX3N0b3JlUHJvamVjdGlvbj10aGlzLl9zdG9yZVByb2plY3Rpb25GYWN0b3J5LmNyZWF0ZSh0aGlzLl9zdG9yZSl9Y3JlYXRlSG9zdGVkRm9ybShlLHQpe2NvbnN0IG49dGhpcy5fc3RvcmVQcm9qZWN0aW9uLmdldFN0YXRlKCkuZ2V0Q2hlY2tvdXRPclRocm93KCkuaWQ7cmV0dXJuIHRoaXMuX2hvc3RlZEZvcm1GYWN0b3J5LmNyZWF0ZShlLHQsbil9c3Vic2NyaWJlKGUsLi4udCl7cmV0dXJuIHRoaXMuX3N0b3JlUHJvamVjdGlvbi5zdWJzY3JpYmUoZSwuLi50KX1nZXRTdGF0ZSgpe3JldHVybiB0aGlzLl9zdG9yZVByb2plY3Rpb24uZ2V0U3RhdGUoKX1pbml0aWFsaXplT2Zmc2l0ZVBheW1lbnQoZSl7cmV0dXJuIEV5KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fcGF5bWVudEFjdGlvbkNyZWF0b3IuaW5pdGlhbGl6ZU9mZnNpdGVQYXltZW50KGUpKSx0aGlzLl9zdG9yZVByb2plY3Rpb24uZ2V0U3RhdGUoKX0pfWxvYWRDaGVja291dChlKXtyZXR1cm4gRXkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiBlP3lpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2NoZWNrb3V0QWN0aW9uQ3JlYXRvci5sb2FkQ2hlY2tvdXQoZSkpOnlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2NoZWNrb3V0QWN0aW9uQ3JlYXRvci5sb2FkQ3VycmVudENoZWNrb3V0KCkpLHRoaXMuX3N0b3JlUHJvamVjdGlvbi5nZXRTdGF0ZSgpfSl9bG9hZERlZmF1bHRDaGVja291dCgpe3JldHVybiBFeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2NoZWNrb3V0QWN0aW9uQ3JlYXRvci5sb2FkRGVmYXVsdENoZWNrb3V0KCkpLHRoaXMuX3N0b3JlUHJvamVjdGlvbi5nZXRTdGF0ZSgpfSl9bG9hZFBheW1lbnRNZXRob2QoZSx0KXtyZXR1cm4gRXkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50TWV0aG9kQWN0aW9uQ3JlYXRvci5sb2FkUGF5bWVudE1ldGhvZChlLHQpKSx0aGlzLl9zdG9yZVByb2plY3Rpb24uZ2V0U3RhdGUoKX0pfWxvYWRQYXltZW50TWV0aG9kcyhlKXtyZXR1cm4gRXkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50TWV0aG9kQWN0aW9uQ3JlYXRvci5sb2FkUGF5bWVudE1ldGhvZHMoZSkpLHRoaXMuX3N0b3JlUHJvamVjdGlvbi5nZXRTdGF0ZSgpfSl9c3VibWl0T3JkZXIoZSx0KXtyZXR1cm4gRXkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9vcmRlckFjdGlvbkNyZWF0b3Iuc3VibWl0T3JkZXIoZSx0KSksdGhpcy5fc3RvcmVQcm9qZWN0aW9uLmdldFN0YXRlKCl9KX1zdWJtaXRQYXltZW50KGUpe3JldHVybiBFeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3BheW1lbnRBY3Rpb25DcmVhdG9yLnN1Ym1pdFBheW1lbnQoZSkpLHRoaXMuX3N0b3JlUHJvamVjdGlvbi5nZXRTdGF0ZSgpfSl9ZmluYWxpemVPcmRlcihlKXtyZXR1cm4gRXkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e29yZGVyOntnZXRPcmRlck9yVGhyb3c6dH19PXRoaXMuX3N0b3JlLmdldFN0YXRlKCk7cmV0dXJuIHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX29yZGVyQWN0aW9uQ3JlYXRvci5maW5hbGl6ZU9yZGVyKHQoKS5vcmRlcklkLGUpKSx0aGlzLl9zdG9yZVByb2plY3Rpb24uZ2V0U3RhdGUoKX0pfXVwZGF0ZUJpbGxpbmdBZGRyZXNzKGUpe3JldHVybiBFeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2JpbGxpbmdBZGRyZXNzQWN0aW9uQ3JlYXRvci51cGRhdGVBZGRyZXNzKGUpKSx0aGlzLl9zdG9yZVByb2plY3Rpb24uZ2V0U3RhdGUoKX0pfXVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhlKXtyZXR1cm4gRXkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9jb25zaWdubWVudEFjdGlvbkNyZWF0b3IudXBkYXRlQWRkcmVzcyhlKSksdGhpcy5fc3RvcmVQcm9qZWN0aW9uLmdldFN0YXRlKCl9KX1zZWxlY3RTaGlwcGluZ09wdGlvbihlLHQpe3JldHVybiBFeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2NvbnNpZ25tZW50QWN0aW9uQ3JlYXRvci5zZWxlY3RTaGlwcGluZ09wdGlvbihlLHQpKSx0aGlzLl9zdG9yZVByb2plY3Rpb24uZ2V0U3RhdGUoKX0pfXNpZ25JbkN1c3RvbWVyKGUsdCl7cmV0dXJuIEV5KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fY3VzdG9tZXJBY3Rpb25DcmVhdG9yLnNpZ25JbkN1c3RvbWVyKGUsdCkpLHRoaXMuX3N0b3JlUHJvamVjdGlvbi5nZXRTdGF0ZSgpfSl9c2lnbk91dEN1c3RvbWVyKGUpe3JldHVybiBFeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2N1c3RvbWVyQWN0aW9uQ3JlYXRvci5zaWduT3V0Q3VzdG9tZXIoZSkpLHRoaXMuX3N0b3JlUHJvamVjdGlvbi5nZXRTdGF0ZSgpfSl9Y3JlYXRlQnV5Tm93Q2FydChlLHQpe3JldHVybiBFeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7Ym9keTpufT15aWVsZCB0aGlzLl9jYXJ0UmVxdWVzdFNlbmRlci5jcmVhdGVCdXlOb3dDYXJ0KGUsdCk7cmV0dXJuIG59KX1hcHBseVN0b3JlQ3JlZGl0KGUsdCl7cmV0dXJuIEV5KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fc3RvcmVDcmVkaXRBY3Rpb25DcmVhdG9yLmFwcGx5U3RvcmVDcmVkaXQoZSx0KSksdGhpcy5fc3RvcmVQcm9qZWN0aW9uLmdldFN0YXRlKCl9KX1hcHBseUNvdXBvbihlLHQpe3JldHVybiBFeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2NvdXBvbkFjdGlvbkNyZWF0b3IuYXBwbHlDb3Vwb24oZSx0KSksdGhpcy5fc3RvcmVQcm9qZWN0aW9uLmdldFN0YXRlKCl9KX1yZW1vdmVDb3Vwb24oZSx0KXtyZXR1cm4gRXkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9jb3Vwb25BY3Rpb25DcmVhdG9yLnJlbW92ZUNvdXBvbihlLHQpKSx0aGlzLl9zdG9yZVByb2plY3Rpb24uZ2V0U3RhdGUoKX0pfXZlcmlmeUNoZWNrb3V0U3BhbVByb3RlY3Rpb24oKXtyZXR1cm4gRXkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e2NoZWNrb3V0OmV9PXRoaXMuX3N0b3JlLmdldFN0YXRlKCkse3Nob3VsZEV4ZWN1dGVTcGFtQ2hlY2s6dH09ZS5nZXRDaGVja291dE9yVGhyb3coKTtyZXR1cm4gdCYmKHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3NwYW1Qcm90ZWN0aW9uQWN0aW9uQ3JlYXRvci52ZXJpZnlDaGVja291dFNwYW1Qcm90ZWN0aW9uKCkpKSx0aGlzLl9zdG9yZVByb2plY3Rpb24uZ2V0U3RhdGUoKX0pfWxvYWRDdXJyZW50T3JkZXIoZSl7cmV0dXJuIEV5KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fb3JkZXJBY3Rpb25DcmVhdG9yLmxvYWRDdXJyZW50T3JkZXIoZSkpLHRoaXMuX3N0b3JlUHJvamVjdGlvbi5nZXRTdGF0ZSgpfSl9dXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoZSl7cmV0dXJuIEV5KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJBY3Rpb25DcmVhdG9yLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKGUpKSx0aGlzLl9zdG9yZVByb2plY3Rpb24uZ2V0U3RhdGUoKX0pfWxvYWRTaGlwcGluZ0NvdW50cmllcyhlKXtyZXR1cm4gRXkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9zaGlwcGluZ0NvdW50cnlBY3Rpb25DcmVhdG9yLmxvYWRDb3VudHJpZXMoZSkpLHRoaXMuX3N0b3JlUHJvamVjdGlvbi5nZXRTdGF0ZSgpfSl9ZGVsZXRlQ29uc2lnbm1lbnQoZSx0KXtyZXR1cm4gRXkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9jb25zaWdubWVudEFjdGlvbkNyZWF0b3IuZGVsZXRlQ29uc2lnbm1lbnQoZSx0KSksdGhpcy5fc3RvcmVQcm9qZWN0aW9uLmdldFN0YXRlKCl9KX1pbml0aWFsaXplUGF5bWVudChlLHQsbil7cmV0dXJuIEV5KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fcmVtb3RlQ2hlY2tvdXRBY3Rpb25DcmVhdG9yLmluaXRpYWxpemVQYXltZW50KGUsdCxuKSksdGhpcy5fc3RvcmVQcm9qZWN0aW9uLmdldFN0YXRlKCl9KX1mb3JnZXRDaGVja291dChlLHQpe3JldHVybiBFeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3JlbW90ZUNoZWNrb3V0QWN0aW9uQ3JlYXRvci5mb3JnZXRDaGVja291dChlLHQpKSx0aGlzLl9zdG9yZVByb2plY3Rpb24uZ2V0U3RhdGUoKX0pfXJlbW90ZUNoZWNrb3V0U2lnbk91dChlLHQpe3JldHVybiBFeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3JlbW90ZUNoZWNrb3V0QWN0aW9uQ3JlYXRvci5zaWduT3V0KGUsdCkpLHRoaXMuX3N0b3JlUHJvamVjdGlvbi5nZXRTdGF0ZSgpfSl9dmFsaWRhdGVDaGVja291dChlLHQpe3JldHVybiBFeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fY2hlY2tvdXRWYWxpZGF0b3IudmFsaWRhdGUoZSx0KX0pfWhhbmRsZVBheW1lbnRIdW1hblZlcmlmaWNhdGlvbihlLHQpe3JldHVybiBFeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGU/dGhpcy5fcGF5bWVudEh1bWFuVmVyaWZpY2F0aW9uSGFuZGxlci5oYW5kbGUoZSxudWxsIT10P3Q6XCJcIik6dGhpcy5fcGF5bWVudEh1bWFuVmVyaWZpY2F0aW9uSGFuZGxlci5oYW5kbGUoZSl9KX13aWRnZXRJbnRlcmFjdGlvbihlKXtyZXR1cm4gRXkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50U3RyYXRlZ3lXaWRnZXRBY3Rpb25DcmVhdG9yLndpZGdldEludGVyYWN0aW9uKGUpLHtxdWV1ZUlkOlwid2lkZ2V0SW50ZXJhY3Rpb25cIn0pLHRoaXMuX3N0b3JlUHJvamVjdGlvbi5nZXRTdGF0ZSgpfSl9fWNsYXNzIGt5e2NvbnN0cnVjdG9yKGUpe3RoaXMuX3RyYW5zZm9ybVNlbGVjdG9ycz1lfWNyZWF0ZShlKXtyZXR1cm4gY3QoZSx0aGlzLl90cmFuc2Zvcm1TZWxlY3RvcnMpfX1mdW5jdGlvbiBUeShlKXtjb25zdHtjb25maWc6e2dldEhvc3Q6dCxnZXRMb2NhbGU6aX19PWUuZ2V0U3RhdGUoKSxyPW4oe2hvc3Q6dCgpfSksYT1uZXcga3koT3kpLHM9bmV3IGlzKG5ldyB0cyhyKSxuZXcgZnQobmV3IEl0KHIpKSxuZXcgb3MobmV3IGFzKHIpKSksZD1uZXcgZ20obmV3IHRzKHIpKSxjPW5ldyBGbShlKSxsPW5ldyBzbShuZXcgaW0ociksbmV3IGdtKG5ldyB0cyhyKSkpLHU9bmV3IHR0KG5ldyBhdChyKSxuZXcgX3kobmV3IHd5KHIpKSksaD1uZXcgY3kobmV3IHV5KHIpLG5ldyB0cyhyKSkscD1uZXcgZHMobmV3IGNzKHIpKSxtPW5ldyBMbShuZXcgQm0oZG0oZSkpLGwsbmV3IG95LG5ldyBJbShPcyhvKCkpKSkseT1uZXcgSW0oT3MobygpKSksZz1uZXcgWmEobmV3IFFhKHIpLHMsbmV3IF9zKE9zKG8oKSksbmV3IEVzKHIpKSksdj1uZXcgdnkobmV3IGZ5KHIpKSxmPW5ldyBQdChuZXcgTXQocikpLFM9T3MobygpKSxfPW5ldyBFcyhyKSx3PW5ldyBfcyhTLF8pLEM9bmV3IFJtKHIpLEk9bmV3IGR5LGI9bmV3IG15KG5ldyB5eShyLHtsb2NhbGU6aSgpfSksZSksUD1uZXcgeXMobmV3IHBzKHIpLHMpLE89bmV3IGhtO3JldHVybiBuZXcgQXkoZSxhLHMsZCxjLGwsdSxoLHAsbSx5LGcsQyx2LGYsdyxJLGIsUCxPKX1jb25zdCBEeT1lPT57Y29uc3R7dHlwZTp0LGluaXRpYWxpemF0aW9uU3RyYXRlZ3k6bn09ZTtyZXR1cm4gdD09PXVtLlBQU0RLJiZcInN0cmluZ1wiPT10eXBlb2YobnVsbD09bj92b2lkIDA6bi50eXBlKX07Y2xhc3MgTXkgZXh0ZW5kcyBSdHtnZXRCeU1ldGhvZChlKXtpZighZSlyZXR1cm4gdGhpcy5nZXQoKTtjb25zdCB0PXRoaXMuX2dldFRva2VuKGUpLG49W2UuZ2F0ZXdheSxlLmlkXS5maWx0ZXIoZT0+bnVsbCE9ZSkuam9pbihcIi1cIik7cmV0dXJuIHRoaXMuZ2V0KHQsbil9X2dldFRva2VuKGUpe2lmKER5KGUpKXJldHVybiB1bS5QUFNESztpZihcImtsYXJuYVwiPT09ZS5nYXRld2F5KXJldHVybiB1bS5LTEFSTkFWMjtjb25zdCB0PWUuZ2F0ZXdheXx8ZS5pZDtpZih0aGlzLl9oYXNGYWN0b3J5Rm9yTWV0aG9kKHQpKXJldHVybiB0O2lmKFwiUEFZTUVOVF9UWVBFX09GRkxJTkVcIj09PWUudHlwZSlyZXR1cm4gdW0uT0ZGTElORTt0aHJvdyBuZXcgRnQoYCcke3R9JyBpcyBub3QgcmVnaXN0ZXJlZC5gKX1faGFzRmFjdG9yeUZvck1ldGhvZChlKXtyZXR1cm4gdGhpcy5faGFzRmFjdG9yeShlKX19Y2xhc3MgenkgZXh0ZW5kcyBGdHtjb25zdHJ1Y3RvcihlKXtsZXQgdD1cIlVuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBmb3IgdGhlIG9yZGVyIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgaW52YWxpZC5cIjtlJiYodD1gJHt0fSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtlLmpvaW4oXCIsIFwiKX0uYCksc3VwZXIodCksdGhpcy5uYW1lPVwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yXCJ9fXZhciBOeT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59O2NsYXNzIHh5e2NvbnN0cnVjdG9yKGUsdCxuLGkpe3RoaXMuX3N0b3JlPWUsdGhpcy5fb3JkZXJBY3Rpb25DcmVhdG9yPXQsdGhpcy5fcGF5bWVudEFjdGlvbkNyZWF0b3I9bix0aGlzLl9ob3N0ZWRGb3JtRmFjdG9yeT1pfWV4ZWN1dGUoZSx0KXt2YXIgbixpO3JldHVybiB0aGlzLl9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChudWxsPT09KG49ZS5wYXltZW50KXx8dm9pZCAwPT09bj92b2lkIDA6bi5tZXRob2RJZCxudWxsPT09KGk9ZS5wYXltZW50KXx8dm9pZCAwPT09aT92b2lkIDA6aS5nYXRld2F5SWQpJiZ0aGlzLl9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtP3RoaXMuX2V4ZWN1dGVXaXRoSG9zdGVkRm9ybShlLHQpOnRoaXMuX2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShlLHQpfWZpbmFsaXplKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgbG0pfWluaXRpYWxpemUoZSl7aWYoIXRoaXMuX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKG51bGw9PWU/dm9pZCAwOmUubWV0aG9kSWQsbnVsbD09ZT92b2lkIDA6ZS5nYXRld2F5SWQpfHwhdGhpcy5faXNIb3N0ZWRGaWVsZEF2YWlsYWJsZShlKSlyZXR1cm4gdGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybT0hMSxQcm9taXNlLnJlc29sdmUodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSk7Y29uc3QgdD1lJiZlLmNyZWRpdENhcmQmJmUuY3JlZGl0Q2FyZC5mb3JtLHtjb25maWc6bn09dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSx7cGF5bWVudFNldHRpbmdzOntiaWdwYXlCYXNlVXJsOmk9XCJcIn09e319PW4uZ2V0U3RvcmVDb25maWcoKXx8e307aWYoIXQpdGhyb3cgbmV3IEZ0O2NvbnN0IHI9dGhpcy5faG9zdGVkRm9ybUZhY3RvcnkuY3JlYXRlKGksdCk7cmV0dXJuIHIuYXR0YWNoKCkudGhlbigoKT0+KHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm09ITAsdGhpcy5faG9zdGVkRm9ybT1yLHRoaXMuX3N0b3JlLmdldFN0YXRlKCkpKX1kZWluaXRpYWxpemUoZSl7cmV0dXJuIHRoaXMuX2hvc3RlZEZvcm0mJnRoaXMuX2hvc3RlZEZvcm0uZGV0YWNoKCksUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3N0b3JlLmdldFN0YXRlKCkpfV9leGVjdXRlV2l0aG91dEhvc3RlZEZvcm0oZSx0KXtjb25zdHtwYXltZW50Om59PWUsaT1OeShlLFtcInBheW1lbnRcIl0pLHI9biYmbi5wYXltZW50RGF0YTtpZighbnx8IXIpdGhyb3cgbmV3IHp5KFtcInBheW1lbnQucGF5bWVudERhdGFcIl0pO3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9vcmRlckFjdGlvbkNyZWF0b3Iuc3VibWl0T3JkZXIoaSx0KSkudGhlbigoKT0+dGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fcGF5bWVudEFjdGlvbkNyZWF0b3Iuc3VibWl0UGF5bWVudChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbikse3BheW1lbnREYXRhOnJ9KSkpKX1fZXhlY3V0ZVdpdGhIb3N0ZWRGb3JtKGUsdCl7Y29uc3R7cGF5bWVudDpufT1lLGk9TnkoZSxbXCJwYXltZW50XCJdKSxyPXRoaXMuX2hvc3RlZEZvcm07aWYoIXIpdGhyb3cgbmV3IENzKGZzLlBheW1lbnROb3RJbml0aWFsaXplZCk7aWYoIW58fCFuLm1ldGhvZElkKXRocm93IG5ldyB6eShbXCJwYXltZW50Lm1ldGhvZElkXCJdKTtyZXR1cm4gci52YWxpZGF0ZSgpLnRoZW4oKCk9PnRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX29yZGVyQWN0aW9uQ3JlYXRvci5zdWJtaXRPcmRlcihpLHQpKSkudGhlbigoKT0+ci5zdWJtaXQobikpLnRoZW4oKCk9PnRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX29yZGVyQWN0aW9uQ3JlYXRvci5sb2FkQ3VycmVudE9yZGVyKCkpKX1faXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQoZSx0KXtpZighZSlyZXR1cm4hMTtjb25zdHtwYXltZW50TWV0aG9kczp7Z2V0UGF5bWVudE1ldGhvZE9yVGhyb3c6bn19PXRoaXMuX3N0b3JlLmdldFN0YXRlKCk7cmV0dXJuITA9PT1uKGUsdCkuY29uZmlnLmlzSG9zdGVkRm9ybUVuYWJsZWR9X2lzSG9zdGVkRmllbGRBdmFpbGFibGUoZSl7cmV0dXJuIWllKGUmJmUuY3JlZGl0Q2FyZCYmZS5jcmVkaXRDYXJkLmZvcm0uZmllbGRzKS5ldmVyeShUKX19dmFyIEZ5PWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIFJ5IGV4dGVuZHMgeHl7Y29uc3RydWN0b3IoZSx0LG4saSxyKXtzdXBlcihlLHQsbixpKSx0aGlzLl90aHJlZURTZWN1cmVGbG93PXJ9aW5pdGlhbGl6ZShlKXtjb25zdCB0PU9iamVjdC5jcmVhdGUobnVsbCx7aW5pdGlhbGl6ZTp7Z2V0OigpPT5zdXBlci5pbml0aWFsaXplfX0pO3JldHVybiBGeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdC5pbml0aWFsaXplLmNhbGwodGhpcyxlKTtjb25zdHtwYXltZW50TWV0aG9kczp7Z2V0UGF5bWVudE1ldGhvZE9yVGhyb3c6bn19PXRoaXMuX3N0b3JlLmdldFN0YXRlKCksaT1uKGUubWV0aG9kSWQpO3JldHVybiBpLmNvbmZpZy5pczNkc0VuYWJsZWQmJih5aWVsZCB0aGlzLl90aHJlZURTZWN1cmVGbG93LnByZXBhcmUoaSkpLHRoaXMuX3N0b3JlLmdldFN0YXRlKCl9KX1leGVjdXRlKGUsdCl7Y29uc3Qgbj1PYmplY3QuY3JlYXRlKG51bGwse2V4ZWN1dGU6e2dldDooKT0+c3VwZXIuZXhlY3V0ZX19KTtyZXR1cm4gRnkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheW1lbnQ6e21ldGhvZElkOmk9XCJcIn09e319PWUse3BheW1lbnRNZXRob2RzOntnZXRQYXltZW50TWV0aG9kT3JUaHJvdzpyfX09dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKTtyZXR1cm4gcihpKS5jb25maWcuaXMzZHNFbmFibGVkP3RoaXMuX3RocmVlRFNlY3VyZUZsb3cuc3RhcnQobi5leGVjdXRlLmJpbmQodGhpcyksZSx0LHRoaXMuX2hvc3RlZEZvcm0pOm4uZXhlY3V0ZS5jYWxsKHRoaXMsZSx0KX0pfX12YXIgTHk9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgQnkgZXh0ZW5kcyB4eXtjb25zdHJ1Y3RvcihlLHQsbixpLHIpe3N1cGVyKGUsdCxuLGkpLHRoaXMuX3RocmVlRFNlY3VyZUZsb3c9cn1pbml0aWFsaXplKGUpe2NvbnN0IHQ9T2JqZWN0LmNyZWF0ZShudWxsLHtpbml0aWFsaXplOntnZXQ6KCk9PnN1cGVyLmluaXRpYWxpemV9fSk7cmV0dXJuIEx5KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0LmluaXRpYWxpemUuY2FsbCh0aGlzLGUpO2NvbnN0e3BheW1lbnRNZXRob2RzOntnZXRQYXltZW50TWV0aG9kT3JUaHJvdzpufX09dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSxpPW4oZS5tZXRob2RJZCk7cmV0dXJuIGkuY29uZmlnLmlzM2RzRW5hYmxlZCYmKHlpZWxkIHRoaXMuX3RocmVlRFNlY3VyZUZsb3cucHJlcGFyZShpKSksdGhpcy5fc3RvcmUuZ2V0U3RhdGUoKX0pfWV4ZWN1dGUoZSx0KXtjb25zdCBuPU9iamVjdC5jcmVhdGUobnVsbCx7ZXhlY3V0ZTp7Z2V0OigpPT5zdXBlci5leGVjdXRlfX0pO3JldHVybiBMeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIWUucGF5bWVudCl0aHJvdyBuZXcgenkoW1wicGF5bWVudC5tZXRob2RJZFwiXSk7Y29uc3R7bWV0aG9kSWQ6aX09ZS5wYXltZW50O2lmKCFpKXRocm93IG5ldyB6eShbXCJwYXltZW50Lm1ldGhvZElkXCJdKTtjb25zdHtwYXltZW50TWV0aG9kczp7Z2V0UGF5bWVudE1ldGhvZE9yVGhyb3c6cn19PXRoaXMuX3N0b3JlLmdldFN0YXRlKCk7cmV0dXJuIHIoaSkuY29uZmlnLmlzM2RzRW5hYmxlZD90aGlzLl90aHJlZURTZWN1cmVGbG93LnN0YXJ0KG4uZXhlY3V0ZS5iaW5kKHRoaXMpLGUsdCx0aGlzLl9ob3N0ZWRGb3JtKTpuLmV4ZWN1dGUuY2FsbCh0aGlzLGUsdCl9KX19Y2xhc3Mganl7Y29uc3RydWN0b3IoZSx0LG4saSxyLG8sYSxzKXt0aGlzLl9zdG9yZT1lLHRoaXMuX2NoZWNrb3V0QWN0aW9uQ3JlYXRvcj10LHRoaXMuX3BheW1lbnRNZXRob2RBY3Rpb25DcmVhdG9yPW4sdGhpcy5fcGF5bWVudFN0cmF0ZWd5QWN0aW9uQ3JlYXRvcj1pLHRoaXMuX3BheW1lbnRBY3Rpb25DcmVhdG9yPXIsdGhpcy5fb3JkZXJBY3Rpb25DcmVhdG9yPW8sdGhpcy5fYnJhaW50cmVlVmlzYUNoZWNrb3V0UGF5bWVudFByb2Nlc3Nvcj1hLHRoaXMuX3Zpc2FDaGVja291dFNjcmlwdExvYWRlcj1zfWluaXRpYWxpemUoZSl7Y29uc3R7YnJhaW50cmVldmlzYWNoZWNrb3V0OnQsbWV0aG9kSWQ6bn09ZTtpZighdCl0aHJvdyBuZXcgRnQoJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYnJhaW50cmVldmlzYWNoZWNrb3V0XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50TWV0aG9kQWN0aW9uQ3JlYXRvci5sb2FkUGF5bWVudE1ldGhvZChuKSkudGhlbihlPT57dGhpcy5fcGF5bWVudE1ldGhvZD1lLnBheW1lbnRNZXRob2RzLmdldFBheW1lbnRNZXRob2Qobik7Y29uc3QgaT1lLmNoZWNrb3V0LmdldENoZWNrb3V0KCkscj1lLmNvbmZpZy5nZXRTdG9yZUNvbmZpZygpO2lmKCFpKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXQpO2lmKCFyKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXRDb25maWcpO2NvbnN0e2NsaWVudFRva2VuOm8sY29uZmlnOmF9PXRoaXMuX3BheW1lbnRNZXRob2R8fHt9O2lmKCFvKXRocm93IG5ldyBRZShXZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3R7b25FcnJvcjpzPVYsb25QYXltZW50U2VsZWN0OmQ9Vn09dCxjPXtsb2NhbGU6ci5zdG9yZVByb2ZpbGUuc3RvcmVMYW5ndWFnZSxjb2xsZWN0U2hpcHBpbmc6ITEsc3VidG90YWw6aS5zdWJ0b3RhbCxjdXJyZW5jeUNvZGU6ci5jdXJyZW5jeS5jb2RlfTtyZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuX3Zpc2FDaGVja291dFNjcmlwdExvYWRlci5sb2FkKG51bGw9PWE/dm9pZCAwOmEudGVzdE1vZGUpLHRoaXMuX2JyYWludHJlZVZpc2FDaGVja291dFBheW1lbnRQcm9jZXNzb3IuaW5pdGlhbGl6ZShvLGMpXSkudGhlbigoW2UsdF0pPT57ZS5pbml0KHQpLGUub24oXCJwYXltZW50LnN1Y2Nlc3NcIixlPT50aGlzLl9wYXltZW50SW5zdHJ1bWVudFNlbGVjdGVkKGUpLnRoZW4oKCk9PmQoKSkuY2F0Y2goZT0+cyhlKSkpLGUub24oXCJwYXltZW50LmVycm9yXCIsKGUsdCk9PnModCkpfSl9KS50aGVuKCgpPT50aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKX1leGVjdXRlKGUsdCl7Y29uc3R7cGF5bWVudDpufT1lLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPGkubGVuZ3RoO3IrKyl0LmluZGV4T2YoaVtyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVtyXSkmJihuW2lbcl1dPWVbaVtyXV0pfXJldHVybiBufShlLFtcInBheW1lbnRcIl0pO2lmKCFuKXRocm93IG5ldyBGdCgnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGJlY2F1c2UgXCJwYXlsb2FkLnBheW1lbnRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXRoaXMuX3BheW1lbnRNZXRob2R8fCF0aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YXx8IXRoaXMuX3BheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhLm5vbmNlKXRocm93IG5ldyBRZShXZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3R7bm9uY2U6cn09dGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE7cmV0dXJuIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX29yZGVyQWN0aW9uQ3JlYXRvci5zdWJtaXRPcmRlcihpLHQpKS50aGVuKCgpPT50aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50QWN0aW9uQ3JlYXRvci5zdWJtaXRQYXltZW50KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxuKSx7cGF5bWVudERhdGE6e25vbmNlOnJ9fSkpKSkuY2F0Y2goZT0+dGhpcy5faGFuZGxlRXJyb3IoZSkpfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBsbSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIHRoaXMuX2JyYWludHJlZVZpc2FDaGVja291dFBheW1lbnRQcm9jZXNzb3IuZGVpbml0aWFsaXplKCkudGhlbigoKT0+dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSl9X3BheW1lbnRJbnN0cnVtZW50U2VsZWN0ZWQoZSl7Y29uc3QgdD10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpO2lmKCF0aGlzLl9wYXltZW50TWV0aG9kKXRocm93IG5ldyBFcnJvcihcIlBheW1lbnQgbWV0aG9kIG5vdCBpbml0aWFsaXplZFwiKTtjb25zdHtpZDpufT10aGlzLl9wYXltZW50TWV0aG9kO3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50U3RyYXRlZ3lBY3Rpb25DcmVhdG9yLndpZGdldEludGVyYWN0aW9uKCgpPT50aGlzLl9icmFpbnRyZWVWaXNhQ2hlY2tvdXRQYXltZW50UHJvY2Vzc29yLmhhbmRsZVN1Y2Nlc3MoZSx0LnNoaXBwaW5nQWRkcmVzcy5nZXRTaGlwcGluZ0FkZHJlc3MoKSx0LmJpbGxpbmdBZGRyZXNzLmdldEJpbGxpbmdBZGRyZXNzKCkpLnRoZW4oKCk9PlByb21pc2UuYWxsKFt0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9jaGVja291dEFjdGlvbkNyZWF0b3IubG9hZEN1cnJlbnRDaGVja291dCgpKSx0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50TWV0aG9kQWN0aW9uQ3JlYXRvci5sb2FkUGF5bWVudE1ldGhvZChuKSldKSkse21ldGhvZElkOm59KSx7cXVldWVJZDpcIndpZGdldEludGVyYWN0aW9uXCJ9KX1faGFuZGxlRXJyb3IoZSl7aWYoXCJCcmFpbnRyZWVFcnJvclwiPT09ZS5uYW1lKXRocm93IG5ldyBMaShlLm1lc3NhZ2UpO3Rocm93IGV9fXZhciBVeT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBxeXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9icmFpbnRyZWVTY3JpcHRMb2FkZXI9ZSx0aGlzLl9kYXRhQ29sbGVjdG9ycz17fSx0aGlzLl93aW5kb3c9d2luZG93fWluaXRpYWxpemUoZSl7dGhpcy5fY2xpZW50VG9rZW49ZX1nZXRDbGllbnQoKXtpZighdGhpcy5fY2xpZW50VG9rZW4pdGhyb3cgbmV3IENzKGZzLlBheW1lbnROb3RJbml0aWFsaXplZCk7cmV0dXJuIHRoaXMuX2NsaWVudHx8KHRoaXMuX2NsaWVudD10aGlzLl9icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZENsaWVudCgpLnRoZW4oZT0+ZS5jcmVhdGUoe2F1dGhvcml6YXRpb246dGhpcy5fY2xpZW50VG9rZW59KSkpLHRoaXMuX2NsaWVudH1nZXRQYXlwYWxDaGVja291dChlLHQsbil7cmV0dXJuIFV5KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBpPXlpZWxkIHRoaXMuZ2V0Q2xpZW50KCkscj15aWVsZCB0aGlzLl9icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZFBheXBhbENoZWNrb3V0KCksbz17Y2xpZW50Oml9O3JldHVybiB0aGlzLl9wYXlwYWxDaGVja291dD1yLmNyZWF0ZShvLChpLHIpPT57aWYoaSlyZXR1cm4gbihpKTt0aGlzLl93aW5kb3cucGF5cGFsP3Qocik6ci5sb2FkUGF5UGFsU0RLKHRoaXMuX2dldFBheVBhbFNES0NvbmZpZyhlKSwoKT0+dChyKSl9KSx0aGlzLl9wYXlwYWxDaGVja291dH0pfWdldDNEUygpe3JldHVybiB0aGlzLl8zZHN8fCh0aGlzLl8zZHM9UHJvbWlzZS5hbGwoW3RoaXMuZ2V0Q2xpZW50KCksdGhpcy5fYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWQzRFMoKV0pLnRoZW4oKFtlLHRdKT0+dC5jcmVhdGUoe2NsaWVudDplLHZlcnNpb246Mn0pKSksdGhpcy5fM2RzfWdldERhdGFDb2xsZWN0b3IoZSl7Y29uc3QgdD1lJiZlLnBheXBhbD9cInBheXBhbFwiOlwiZGVmYXVsdFwiO2xldCBuPXRoaXMuX2RhdGFDb2xsZWN0b3JzW3RdO3JldHVybiBufHwobj1Qcm9taXNlLmFsbChbdGhpcy5nZXRDbGllbnQoKSx0aGlzLl9icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZERhdGFDb2xsZWN0b3IoKV0pLnRoZW4oKFt0LG5dKT0+bi5jcmVhdGUoT2JqZWN0LmFzc2lnbih7Y2xpZW50OnQsa291bnQ6ITB9LGUpKSkuY2F0Y2goZT0+e2lmKGUmJlwiREFUQV9DT0xMRUNUT1JfS09VTlRfTk9UX0VOQUJMRURcIj09PWUuY29kZSlyZXR1cm57ZGV2aWNlRGF0YTp2b2lkIDAsdGVhcmRvd246KCk9PlByb21pc2UucmVzb2x2ZSgpfTt0aHJvdyBlfSksdGhpcy5fZGF0YUNvbGxlY3RvcnNbdF09biksbn1nZXRWaXNhQ2hlY2tvdXQoKXtyZXR1cm4gdGhpcy5fdmlzYUNoZWNrb3V0fHwodGhpcy5fdmlzYUNoZWNrb3V0PVByb21pc2UuYWxsKFt0aGlzLmdldENsaWVudCgpLHRoaXMuX2JyYWludHJlZVNjcmlwdExvYWRlci5sb2FkVmlzYUNoZWNrb3V0KCldKS50aGVuKChbZSx0XSk9PnQuY3JlYXRlKHtjbGllbnQ6ZX0pKSksdGhpcy5fdmlzYUNoZWNrb3V0fWNyZWF0ZUhvc3RlZEZpZWxkcyhlKXtyZXR1cm4gVXkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0W3Qsbl09eWllbGQgUHJvbWlzZS5hbGwoW3RoaXMuZ2V0Q2xpZW50KCksdGhpcy5fYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRIb3N0ZWRGaWVsZHMoKV0pO3JldHVybiBuLmNyZWF0ZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse2NsaWVudDp0fSkpfSl9dGVhcmRvd24oKXtyZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuX3RlYXJkb3duKHRoaXMuXzNkcyksdGhpcy5fdGVhcmRvd24odGhpcy5fZGF0YUNvbGxlY3RvcnMuZGVmYXVsdCksdGhpcy5fdGVhcmRvd24odGhpcy5fZGF0YUNvbGxlY3RvcnMucGF5cGFsKSx0aGlzLl90ZWFyZG93bih0aGlzLl9wYXlwYWxDaGVja291dCksdGhpcy5fdGVhcmRvd24odGhpcy5fdmVubW9DaGVja291dCksdGhpcy5fdGVhcmRvd24odGhpcy5fdmlzYUNoZWNrb3V0KV0pLnRoZW4oKCk9Pnt0aGlzLl8zZHM9dm9pZCAwLHRoaXMuX2RhdGFDb2xsZWN0b3JzPXt9LHRoaXMuX3BheXBhbENoZWNrb3V0PXZvaWQgMCx0aGlzLl92ZW5tb0NoZWNrb3V0PXZvaWQgMCx0aGlzLl92aXNhQ2hlY2tvdXQ9dm9pZCAwfSl9X3RlYXJkb3duKGUpe3JldHVybiBlP2UudGhlbihlPT5lLnRlYXJkb3duKCkpLmNhdGNoKGU9PntpZihcIk1FVEhPRF9DQUxMRURfQUZURVJfVEVBUkRPV05cIiE9PWUuY29kZSl0aHJvdyBlfSk6UHJvbWlzZS5yZXNvbHZlKCl9X2dldFBheVBhbFNES0NvbmZpZyhlKXtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtjdXJyZW5jeTplLmN1cnJlbmN5fSxlLmlzQ3JlZGl0RW5hYmxlZCYme1wiZW5hYmxlLWZ1bmRpbmdcIjpcInBheWxhdGVyXCJ9KSx7Y29tcG9uZW50czpaaS50b1N0cmluZygpLGludGVudDplLmludGVudCxjb21taXQ6ITF9KX19Y2xhc3MgVnl7Y29uc3RydWN0b3IoZSx0KXt0aGlzLl9icmFpbnRyZWVTREtDcmVhdG9yPWUsdGhpcy5fcmVxdWVzdFNlbmRlcj10fWluaXRpYWxpemUoZSx0KXtyZXR1cm4gdGhpcy5fYnJhaW50cmVlU0RLQ3JlYXRvci5pbml0aWFsaXplKGUpLHRoaXMuX2JyYWludHJlZVNES0NyZWF0b3IuZ2V0VmlzYUNoZWNrb3V0KCkudGhlbihlPT5lLmNyZWF0ZUluaXRPcHRpb25zKHtzZXR0aW5nczp7bG9jYWxlOnQubG9jYWxlLHNoaXBwaW5nOntjb2xsZWN0U2hpcHBpbmc6dC5jb2xsZWN0U2hpcHBpbmd9fSxwYXltZW50UmVxdWVzdDp7Y3VycmVuY3lDb2RlOnQuY3VycmVuY3lDb2RlLHN1YnRvdGFsOlN0cmluZyh0LnN1YnRvdGFsKX19KSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIHRoaXMuX2JyYWludHJlZVNES0NyZWF0b3IudGVhcmRvd24oKX1oYW5kbGVTdWNjZXNzKGUsdCxuKXtyZXR1cm4gdGhpcy5fYnJhaW50cmVlU0RLQ3JlYXRvci5nZXRWaXNhQ2hlY2tvdXQoKS50aGVuKGk9PlByb21pc2UuYWxsKFtpLnRva2VuaXplKGUpLHRoaXMuX2JyYWludHJlZVNES0NyZWF0b3IuZ2V0RGF0YUNvbGxlY3RvcigpXSkudGhlbigoW2UsaV0pPT57Y29uc3R7c2hpcHBpbmdBZGRyZXNzOnI9dGhpcy5fdG9WaXNhQ2hlY2tvdXRBZGRyZXNzKHQpLGJpbGxpbmdBZGRyZXNzOm89dGhpcy5fdG9WaXNhQ2hlY2tvdXRBZGRyZXNzKG4pfT1lO3JldHVybiB0aGlzLl9wb3N0Rm9ybShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3NoaXBwaW5nQWRkcmVzczpyLGJpbGxpbmdBZGRyZXNzOm99KSxpKX0pKX1fcG9zdEZvcm0oZSx0KXtjb25zdHt1c2VyRGF0YTpuLGJpbGxpbmdBZGRyZXNzOmksc2hpcHBpbmdBZGRyZXNzOnIsZGV0YWlsczpvfT1lLHt1c2VyRW1haWw6YX09bix7ZGV2aWNlRGF0YTpzfT10O3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoXCIvY2hlY2tvdXQucGhwXCIse2hlYWRlcnM6T2JqZWN0LmFzc2lnbih7QWNjZXB0OlwidGV4dC9odG1sXCIsXCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwifSxydCksYm9keTp7cGF5bWVudF90eXBlOmUudHlwZSxub25jZTplLm5vbmNlLHByb3ZpZGVyOlwiYnJhaW50cmVldmlzYWNoZWNrb3V0XCIsYWN0aW9uOlwic2V0X2V4dGVybmFsX2NoZWNrb3V0XCIsZGV2aWNlX2RhdGE6cyxjYXJkX2luZm9ybWF0aW9uOnRoaXMuX2dldENhcmRJbmZvcm1hdGlvbihvKSxiaWxsaW5nX2FkZHJlc3M6dGhpcy5fZ2V0QWRkcmVzcyhhLGkpLHNoaXBwaW5nX2FkZHJlc3M6dGhpcy5fZ2V0QWRkcmVzcyhhLHIpfX0pfV90b1Zpc2FDaGVja291dEFkZHJlc3MoZSl7cmV0dXJuIGU/e2ZpcnN0TmFtZTplLmZpcnN0TmFtZSxsYXN0TmFtZTplLmxhc3ROYW1lLHBob25lTnVtYmVyOmUucGhvbmUsc3RyZWV0QWRkcmVzczplLmFkZHJlc3MxLGV4dGVuZGVkQWRkcmVzczplLmFkZHJlc3MyLGxvY2FsaXR5OmUuY2l0eSxyZWdpb246ZS5zdGF0ZU9yUHJvdmluY2VDb2RlLGNvdW50cnlDb2RlOmUuY291bnRyeUNvZGUscG9zdGFsQ29kZTplLnBvc3RhbENvZGV9Ont9fV9nZXRBZGRyZXNzKGUsdD17fSl7cmV0dXJue2VtYWlsOmUsZmlyc3RfbmFtZTp0LmZpcnN0TmFtZSxsYXN0X25hbWU6dC5sYXN0TmFtZSxwaG9uZV9udW1iZXI6dC5waG9uZU51bWJlcixhZGRyZXNzX2xpbmVfMTp0LnN0cmVldEFkZHJlc3MsYWRkcmVzc19saW5lXzI6dC5leHRlbmRlZEFkZHJlc3MsY2l0eTp0LmxvY2FsaXR5LHN0YXRlOnQucmVnaW9uLGNvdW50cnlfY29kZTp0LmNvdW50cnlDb2RlLHBvc3RhbF9jb2RlOnQucG9zdGFsQ29kZX19X2dldENhcmRJbmZvcm1hdGlvbihlKXtyZXR1cm57dHlwZTplLmNhcmRUeXBlLG51bWJlcjplLmxhc3RUd299fX1jbGFzcyBHeXtjb25zdHJ1Y3RvcihlLHQ9d2luZG93KXt0aGlzLl9zY3JpcHRMb2FkZXI9ZSx0aGlzLl93aW5kb3c9dH1sb2FkKGUpe3JldHVybiB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChgLy8ke2U/XCJzYW5kYm94LVwiOlwiXCJ9YXNzZXRzLnNlY3VyZS5jaGVja291dC52aXNhLmNvbS9jaGVja291dC13aWRnZXQvcmVzb3VyY2VzL2pzL2ludGVncmF0aW9uL3YxL3Nkay5qc2ApLnRoZW4oKCk9PntpZighdGhpcy5fd2luZG93LlYpdGhyb3cgbmV3IGxzO3JldHVybiB0aGlzLl93aW5kb3cuVn0pfX12YXIgSHk9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgJHl7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMuX3N0b3JlPWUsdGhpcy5fcGF5bWVudEFjdGlvbkNyZWF0b3I9dCx0aGlzLl9jYXJkaW5hbENsaWVudD1ufXByZXBhcmUoZSl7cmV0dXJuIEh5KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9jYXJkaW5hbENsaWVudC5sb2FkKGUuaWQsZS5jb25maWcudGVzdE1vZGUpfSl9c3RhcnQoZSx0LG4saSl7dmFyIHIsbyxhO3JldHVybiBIeSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7aW5zdHJ1bWVudHM6e2dldENhcmRJbnN0cnVtZW50OnN9fT10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLHtwYXltZW50OmQ9e21ldGhvZElkOlwiXCJ9fT10LHtwYXltZW50RGF0YTpjPXt9fT1kO3RyeXtyZXR1cm4geWllbGQgZSh0LG4pfWNhdGNoKGUpe2lmKGUgaW5zdGFuY2VvZiBfdCYmXCJhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZFwiPT09ZS5ib2R5LnN0YXR1cyl7Y29uc3QgdD1udWxsPT09KG89bnVsbD09PShyPWUuYm9keS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCl8fHZvaWQgMD09PXI/dm9pZCAwOnIuZGF0YSl8fHZvaWQgMD09PW8/dm9pZCAwOm8udG9rZW4sbj1udWxsPT09KGE9ZS5ib2R5LnRocmVlX2RzX3Jlc3VsdCl8fHZvaWQgMD09PWE/dm9pZCAwOmEucGF5ZXJfYXV0aF9yZXF1ZXN0O3lpZWxkIHRoaXMuX2NhcmRpbmFsQ2xpZW50LmNvbmZpZ3VyZSh0KTtjb25zdCBsPXRoaXMuX2dldEJpbihjLHMsaSk7bCYmKHlpZWxkIHRoaXMuX2NhcmRpbmFsQ2xpZW50LnJ1bkJpblByb2Nlc3MobCkpO3RyeXtyZXR1cm4geWllbGQgdGhpcy5fc3VibWl0UGF5bWVudChkLHt4aWQ6bn0saSl9Y2F0Y2goZSl7aWYoZSBpbnN0YW5jZW9mIF90JiZaKGUuYm9keS5lcnJvcnMse2NvZGU6XCJ0aHJlZV9kX3NlY3VyZV9yZXF1aXJlZFwifSkpe2NvbnN0IHQ9ZS5ib2R5LnRocmVlX2RzX3Jlc3VsdCxuPW51bGw9PXQ/dm9pZCAwOnQucGF5ZXJfYXV0aF9yZXF1ZXN0O3JldHVybiB5aWVsZCB0aGlzLl9jYXJkaW5hbENsaWVudC5nZXRUaHJlZURTZWN1cmVEYXRhKHQsdGhpcy5fZ2V0T3JkZXJEYXRhKCkpLHlpZWxkIHRoaXMuX3N1Ym1pdFBheW1lbnQoZCx7dG9rZW46bn0saSl9dGhyb3cgZX19dGhyb3cgZX19KX1fZ2V0T3JkZXJEYXRhKCl7Y29uc3QgZT10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLHQ9ZS5iaWxsaW5nQWRkcmVzcy5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKSxuPWUuc2hpcHBpbmdBZGRyZXNzLmdldFNoaXBwaW5nQWRkcmVzcygpLHtjYXJ0OntjdXJyZW5jeTp7Y29kZTppfSxjYXJ0QW1vdW50OnJ9fT1lLmNoZWNrb3V0LmdldENoZWNrb3V0T3JUaHJvdygpO3JldHVybntiaWxsaW5nQWRkcmVzczp0LHNoaXBwaW5nQWRkcmVzczpuLGN1cnJlbmN5Q29kZTppLGlkOmUub3JkZXIuZ2V0T3JkZXJPclRocm93KCkub3JkZXJJZC50b1N0cmluZygpLGFtb3VudDpyfX1fc3VibWl0UGF5bWVudChlLHQsbil7cmV0dXJuIEh5KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBpPXEoe30sZSx7cGF5bWVudERhdGE6e3RocmVlRFNlY3VyZTp0fX0pO3JldHVybiBuPyh5aWVsZCBuLnN1Ym1pdChpKSx0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKTp0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50QWN0aW9uQ3JlYXRvci5zdWJtaXRQYXltZW50KGkpKX0pfV9nZXRCaW4oZSx0LG4pe2NvbnN0IGk9Tm0oZSkmJnQoZS5pbnN0cnVtZW50SWQpLHI9ZnVuY3Rpb24oZSl7Y29uc3QgdD1lO3JldHVybiFObSh0KSYmXCJzdHJpbmdcIj09dHlwZW9mIHQuY2NOYW1lJiZcInN0cmluZ1wiPT10eXBlb2YgdC5jY051bWJlciYmXCJvYmplY3RcIj09dHlwZW9mIHQuY2NFeHBpcnkmJlwic3RyaW5nXCI9PXR5cGVvZiB0LmNjRXhwaXJ5Lm1vbnRoJiZcInN0cmluZ1wiPT10eXBlb2YgdC5jY0V4cGlyeS55ZWFyfShlKSYmZS5jY051bWJlcjtyZXR1cm4oaT9pLmlpbjpuP24uZ2V0QmluKCk6cil8fFwiXCJ9fWNvbnN0IFd5PVsxMDAwMDQsMTAxMCwxMDExLDEwMjBdO3ZhciBZeSxLeSxKeSxaeSxReSxYeSxlZzshZnVuY3Rpb24oZSl7ZS5Jbml0PVwiaW5pdFwiLGUuQ29tcGxldGU9XCJjb21wbGV0ZVwiLGUuQ29uZmlybT1cImNvbmZpcm1cIn0oWXl8fChZeT17fSkpLGZ1bmN0aW9uKGUpe2UuU2V0dXBDb21wbGV0ZWQ9XCJwYXltZW50cy5zZXR1cENvbXBsZXRlXCIsZS5WYWxpZGF0ZWQ9XCJwYXltZW50cy52YWxpZGF0ZWRcIn0oS3l8fChLeT17fSkpLGZ1bmN0aW9uKGUpe2UuU3VjY2Vzcz1cIlNVQ0NFU1NcIixlLk5vQWN0aW9uPVwiTk9BQ1RJT05cIixlLkZhaWx1cmU9XCJGQUlMVVJFXCIsZS5FcnJvcj1cIkVSUk9SXCJ9KEp5fHwoSnk9e30pKSxmdW5jdGlvbihlKXtlLkNDQT1cIkNDQVwiLGUuUGF5cGFsPVwiUGF5cGFsXCIsZS5XYWxsZXQ9XCJXYWxsZXRcIixlLlZpc2FDaGVja291dD1cIlZpc2FDaGVja291dFwiLGUuQXBwbGVQYXk9XCJBcHBsZVBheVwiLGUuRGlzY292ZXJXYWxsZXQ9XCJEaXNjb3ZlcldhbGxldFwifShaeXx8KFp5PXt9KSksKFF5fHwoUXk9e30pKS5CaW5Qcm9jZXNzPVwiYmluLnByb2Nlc3NcIiwoWHl8fChYeT17fSkpLkNDQT1cImNjYVwiLGZ1bmN0aW9uKGUpe2UuWWVzPVwiWVwiLGUuTm89XCJOXCJ9KGVnfHwoZWc9e30pKTtjbGFzcyB0Z3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9zY3JpcHRMb2FkZXI9ZSx0aGlzLl9wcm92aWRlcj1cIlwiLHRoaXMuX3Rlc3RNb2RlPSExLHRoaXMuX2NvbmZpZ3VyYXRpb25Ub2tlbj1cIlwifWxvYWQoZSx0PSExKXtyZXR1cm4gdGhpcy5fcHJvdmlkZXI9ZSx0aGlzLl90ZXN0TW9kZT10LHRoaXMuX3Nka3x8KHRoaXMuX3Nkaz10aGlzLl9zY3JpcHRMb2FkZXIubG9hZChlLHQpKSx0aGlzLl9zZGsudGhlbigoKT0+e30pfWNvbmZpZ3VyZShlKXtpZih0aGlzLl9jb25maWd1cmF0aW9uVG9rZW4pe2lmKHRoaXMuX2NvbmZpZ3VyYXRpb25Ub2tlbj09PWUpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3RoaXMuX3Nkaz10aGlzLl9zY3JpcHRMb2FkZXIubG9hZChgJHt0aGlzLl9wcm92aWRlcn0uJHtEYXRlLm5vdygpfWAsdGhpcy5fdGVzdE1vZGUpfXJldHVybiB0aGlzLl9nZXRDbGllbnRTREsoKS50aGVuKHQ9Pm5ldyBQcm9taXNlKChuLGkpPT57dC5vbihLeS5TZXR1cENvbXBsZXRlZCwoKT0+e3Qub2ZmKEt5LlNldHVwQ29tcGxldGVkKSx0Lm9mZihLeS5WYWxpZGF0ZWQpLHRoaXMuX2NvbmZpZ3VyYXRpb25Ub2tlbj1lLG4oKX0pLHQub24oS3kuVmFsaWRhdGVkLGU9Pnt0Lm9mZihLeS5TZXR1cENvbXBsZXRlZCksdC5vZmYoS3kuVmFsaWRhdGVkKSxlLkFjdGlvbkNvZGU9PT1KeS5FcnJvciYmKFAoV3ksZS5FcnJvck51bWJlcikmJmkobmV3IFFlKFdlLk1pc3NpbmdQYXltZW50TWV0aG9kKSksaShuZXcgTGkoZS5FcnJvckRlc2NyaXB0aW9uKSkpfSksdC5zZXR1cChZeS5Jbml0LHtqd3Q6ZX0pfSkpfXJ1bkJpblByb2Nlc3MoZSl7cmV0dXJuIHRoaXMuX2dldENsaWVudFNESygpLnRoZW4odD0+dC50cmlnZ2VyKFF5LkJpblByb2Nlc3MsZSkuY2F0Y2goKCk9Pnt9KSkudGhlbihlPT57aWYoIWV8fCFlLlN0YXR1cyl0aHJvdyBuZXcgQ3MoZnMuUGF5bWVudE5vdEluaXRpYWxpemVkKX0pfWdldFRocmVlRFNlY3VyZURhdGEoZSx0KXtyZXR1cm4gdGhpcy5fZ2V0Q2xpZW50U0RLKCkudGhlbihuPT5uZXcgUHJvbWlzZSgoaSxyKT0+e24ub24oS3kuVmFsaWRhdGVkLChlLHQpPT57aWYobi5vZmYoS3kuVmFsaWRhdGVkKSwhdClyZXR1cm4gcihuZXcgTGkoZS5FcnJvckRlc2NyaXB0aW9uP2UuRXJyb3JEZXNjcmlwdGlvbjpcIkFuIGVycm9yIHdhcyBlbmNvdW50ZXJlZCB3aGlsZSBwcm9jZXNzaW5nIHRoZSB0cmFuc2FjdGlvbi5cIikpO2lmKCFlLkFjdGlvbkNvZGUpcmV0dXJuIGkoe3Rva2VuOnR9KTtzd2l0Y2goZS5BY3Rpb25Db2RlKXtjYXNlIEp5LlN1Y2Nlc3M6cmV0dXJuIGkoe3Rva2VuOnR9KTtjYXNlIEp5Lk5vQWN0aW9uOnJldHVybiBlLkVycm9yTnVtYmVyPjA/cihuZXcgTGkoZS5FcnJvckRlc2NyaXB0aW9uKSk6ZS5QYXltZW50JiZlLlBheW1lbnQuRXh0ZW5kZWREYXRhJiZlLlBheW1lbnQuRXh0ZW5kZWREYXRhLlNpZ25hdHVyZVZlcmlmaWNhdGlvbj09PWVnLlllcz9pKHt0b2tlbjp0fSk6cihuZXcgTGkoXCJUcmFuc2FjdGlvbiBzaWduYXR1cmUgY291bGQgbm90IGJlIHZhbGlkYXRlZC5cIikpO2Nhc2UgSnkuRmFpbHVyZTpyZXR1cm4gcihuZXcgTGkoXCJVc2VyIGZhaWxlZCBhdXRoZW50aWNhdGlvbiBvciBhbiBlcnJvciB3YXMgZW5jb3VudGVyZWQgd2hpbGUgcHJvY2Vzc2luZyB0aGUgdHJhbnNhY3Rpb24uXCIpKTtjYXNlIEp5LkVycm9yOnJldHVybiByKG5ldyBMaShlLkVycm9yRGVzY3JpcHRpb24pKX19KTtjb25zdCBvPXtBY3NVcmw6ZS5hY3NfdXJsLFBheWxvYWQ6ZS5tZXJjaGFudF9kYXRhfSxhPXRoaXMuX21hcFRvUGFydGlhbE9yZGVyKHQsZS5wYXllcl9hdXRoX3JlcXVlc3QpO24uY29udGludWUoWHkuQ0NBLG8sYSl9KSl9X21hcFRvUGFydGlhbE9yZGVyKGUsdCl7Y29uc3Qgbj17QmlsbGluZ0FkZHJlc3M6dGhpcy5fbWFwVG9DYXJkaW5hbEFkZHJlc3MoZS5iaWxsaW5nQWRkcmVzcyl9O3JldHVybiBlLnBheW1lbnREYXRhJiYobi5BY2NvdW50PXRoaXMuX21hcFRvQ2FyZGluYWxBY2NvdW50KGUucGF5bWVudERhdGEpKSxlLmJpbGxpbmdBZGRyZXNzLmVtYWlsJiYobi5FbWFpbDE9ZS5iaWxsaW5nQWRkcmVzcy5lbWFpbCksZS5zaGlwcGluZ0FkZHJlc3MmJihuLlNoaXBwaW5nQWRkcmVzcz10aGlzLl9tYXBUb0NhcmRpbmFsQWRkcmVzcyhlLnNoaXBwaW5nQWRkcmVzcykpLHtDb25zdW1lcjpuLE9yZGVyRGV0YWlsczp7T3JkZXJOdW1iZXI6ZS5pZCxBbW91bnQ6ZS5hbW91bnQsQ3VycmVuY3lDb2RlOmUuY3VycmVuY3lDb2RlLE9yZGVyQ2hhbm5lbDpcIlNcIixUcmFuc2FjdGlvbklkOnR9fX1fbWFwVG9DYXJkaW5hbEFjY291bnQoZSl7cmV0dXJue0FjY291bnROdW1iZXI6TnVtYmVyKGUuY2NOdW1iZXIpLEV4cGlyYXRpb25Nb250aDpOdW1iZXIoZS5jY0V4cGlyeS5tb250aCksRXhwaXJhdGlvblllYXI6TnVtYmVyKGUuY2NFeHBpcnkueWVhciksTmFtZU9uQWNjb3VudDplLmNjTmFtZSxDYXJkQ29kZTpOdW1iZXIoZS5jY0N2dil9fV9tYXBUb0NhcmRpbmFsQWRkcmVzcyhlKXtjb25zdCB0PXtGaXJzdE5hbWU6ZS5maXJzdE5hbWUsTGFzdE5hbWU6ZS5sYXN0TmFtZSxBZGRyZXNzMTplLmFkZHJlc3MxLENpdHk6ZS5jaXR5LFN0YXRlOmUuc3RhdGVPclByb3ZpbmNlLFBvc3RhbENvZGU6ZS5wb3N0YWxDb2RlLENvdW50cnlDb2RlOmUuY291bnRyeUNvZGV9O3JldHVybiBlLmFkZHJlc3MyJiYodC5BZGRyZXNzMj1lLmFkZHJlc3MyKSxlLnBob25lJiYodC5QaG9uZTE9ZS5waG9uZSksdH1fZ2V0Q2xpZW50U0RLKCl7aWYoIXRoaXMuX3Nkayl0aHJvdyBuZXcgQ3MoZnMuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gdGhpcy5fc2RrfX1jbGFzcyBuZ3tjb25zdHJ1Y3RvcihlLHQ9d2luZG93KXt0aGlzLl9zY3JpcHRMb2FkZXI9ZSx0aGlzLl93aW5kb3c9dH1sb2FkKGUsdCl7Y29uc3Qgbj10P1wiaHR0cHM6Ly9zb25nYmlyZHN0YWcuY2FyZGluYWxjb21tZXJjZS5jb20vZWRnZS92MS9zb25nYmlyZC5qc1wiOlwiaHR0cHM6Ly9zb25nYmlyZC5jYXJkaW5hbGNvbW1lcmNlLmNvbS9lZGdlL3YxL3NvbmdiaXJkLmpzXCI7cmV0dXJuIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkU2NyaXB0KGAke259P3Y9JHtlfWApLnRoZW4oKCk9PntpZighdGhpcy5fd2luZG93LkNhcmRpbmFsKXRocm93IG5ldyBscztyZXR1cm4gdGhpcy5fd2luZG93LkNhcmRpbmFsfSl9fWNsYXNzIGlnIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJUaGUgc2VsZWN0ZWQgcGF5bWVudCBtZXRob2Qgd2FzIGRlY2xpbmVkLiBQbGVhc2Ugc2VsZWN0IGFub3RoZXIgcGF5bWVudCBtZXRob2QuXCIpLHRoaXMubmFtZT1cIlBheW1lbnRNZXRob2REZWNsaW5lZEVycm9yXCIsdGhpcy50eXBlPVwicGF5bWVudF9kZWNsaW5lZFwifX1jb25zdCByZz1cIkFDS05PV0xFREdFXCIsb2c9XCJGSU5BTElaRVwiO3ZhciBhZz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBzZyBleHRlbmRzIHh5e2NvbnN0cnVjdG9yKGUsdCxuLGkscixvLGEpe3N1cGVyKGUsdCxuLGkpLHRoaXMuX3BheW1lbnRNZXRob2RBY3Rpb25DcmVhdG9yPXIsdGhpcy5fQ0JBTUdQU1NjcmlwdExvYWRlcj1vLHRoaXMuX2xvY2FsZT1hLHRoaXMuX3Nlc3Npb25JZD1cIlwifWluaXRpYWxpemUoZSl7Y29uc3QgdD1PYmplY3QuY3JlYXRlKG51bGwse2luaXRpYWxpemU6e2dldDooKT0+c3VwZXIuaW5pdGlhbGl6ZX19KTtyZXR1cm4gYWcodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHQuaW5pdGlhbGl6ZS5jYWxsKHRoaXMsZSk7Y29uc3R7bWV0aG9kSWQ6bn09ZSxpPSh5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50TWV0aG9kQWN0aW9uQ3JlYXRvci5sb2FkUGF5bWVudE1ldGhvZChuKSkpLnBheW1lbnRNZXRob2RzLmdldFBheW1lbnRNZXRob2RPclRocm93KG4pLHtjbGllbnRUb2tlbjpyLGluaXRpYWxpemF0aW9uRGF0YTp7aXNUZXN0TW9kZUZsYWdFbmFibGVkOm89ITEsbWVyY2hhbnRJZDphfSxjb25maWc6e2lzM2RzRW5hYmxlZDpzfX09aTtpZihzKXtpZih0aGlzLl90aHJlZURTanM9eWllbGQgdGhpcy5fQ0JBTUdQU1NjcmlwdExvYWRlci5sb2FkKG8pLCF0aGlzLl90aHJlZURTanMpdGhyb3cgbmV3IENzKGZzLlBheW1lbnROb3RJbml0aWFsaXplZCk7aWYoIXJ8fCFhKXRocm93IG5ldyBRZShXZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7dGhpcy5fc2Vzc2lvbklkPXIseWllbGQgdGhpcy5fdGhyZWVEU2pzLmNvbmZpZ3VyZSh7bWVyY2hhbnRJZDphLHNlc3Npb25JZDp0aGlzLl9zZXNzaW9uSWQsY2FsbGJhY2s6KCk9Pnt2YXIgZTtpZihudWxsPT09KGU9dGhpcy5fdGhyZWVEU2pzKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pc0NvbmZpZ3VyZWQoKSlyZXR1cm4gdGhpcy5fc3RvcmUuZ2V0U3RhdGUoKTt0aHJvdyBuZXcgTGkoXCJGYWlsZWQgdG8gY29uZmlndXJlIDNEUyBBUEkuXCIpfSxjb25maWd1cmF0aW9uOnt1c2VyTGFuZ3VhZ2U6dGhpcy5fbG9jYWxlLHdzVmVyc2lvbjo2Mn19KX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3N0b3JlLmdldFN0YXRlKCkpfSl9ZXhlY3V0ZShlLHQpe2NvbnN0IG49T2JqZWN0LmNyZWF0ZShudWxsLHtleGVjdXRlOntnZXQ6KCk9PnN1cGVyLmV4ZWN1dGV9fSk7cmV0dXJuIGFnKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Oml9PWUscj1pJiZpLnBheW1lbnREYXRhO2lmKCFpfHwhcil0aHJvdyBuZXcgenkoW1wicGF5bWVudC5wYXltZW50RGF0YVwiXSk7Y29uc3R7cGF5bWVudE1ldGhvZHM6e2dldFBheW1lbnRNZXRob2RPclRocm93Om99fT10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLGE9byhpLm1ldGhvZElkKSx7aXMzZHNFbmFibGVkOnN9PWEuY29uZmlnO2lmKHMpe2NvbnN0IHQ9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHIpLHt0aHJlZURTZWN1cmU6e3Rva2VuOnRoaXMuX3Nlc3Npb25JZH19KTtlLnBheW1lbnQmJihlLnBheW1lbnQucGF5bWVudERhdGE9dCl9cmV0dXJuIG4uZXhlY3V0ZS5jYWxsKHRoaXMsZSx0KS5jYXRjaChlPT57aWYoIShzJiZlIGluc3RhbmNlb2YgX3QmJlooZS5ib2R5LmVycm9ycyx7Y29kZTpcInRocmVlX2Rfc2VjdXJlX3JlcXVpcmVkXCJ9KSkpcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO2NvbnN0IHQ9dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSxuPXQub3JkZXIuZ2V0T3JkZXIoKSx7c3RvcmVQcm9maWxlOntzdG9yZUlkOml9fT10LmNvbmZpZy5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKTtpZighbnx8IXRoaXMuX3Nlc3Npb25JZCl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NoZWNrb3V0KTtjb25zdCByPWAke2l9XyR7bi5vcmRlcklkfWAse3RocmVlX2RzX3Jlc3VsdDp7dG9rZW46b319PWUuYm9keTtyZXR1cm4gbz90aGlzLl9pbml0aWF0ZUF1dGhlbnRpY2F0aW9uKHIsbyk6UHJvbWlzZS5yZWplY3QoZSl9KX0pfWZpbmFsaXplKGUpe2NvbnN0IHQ9dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSxuPXQub3JkZXIuZ2V0T3JkZXIoKTtyZXR1cm4gbiYmdC5wYXltZW50LmdldFBheW1lbnRTdGF0dXMoKT09PW9nP3RoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX29yZGVyQWN0aW9uQ3JlYXRvci5maW5hbGl6ZU9yZGVyKG4ub3JkZXJJZCxlKSk6UHJvbWlzZS5yZWplY3QobmV3IGxtKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gdGhpcy5fdGhyZWVEU2pzPXZvaWQgMCx0aGlzLl9zZXNzaW9uSWQ9XCJcIixzdXBlci5kZWluaXRpYWxpemUoKX1faW5pdGlhdGVBdXRoZW50aWNhdGlvbihlLHQpe3JldHVybiBhZyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj15aWVsZCBuZXcgUHJvbWlzZSgobixpKT0+e2lmKCF0aGlzLl90aHJlZURTanMpdGhyb3cgbmV3IENzKGZzLlBheW1lbnROb3RJbml0aWFsaXplZCk7dGhpcy5fdGhyZWVEU2pzLmluaXRpYXRlQXV0aGVudGljYXRpb24oZSx0LGU9Pntjb25zdCB0PWUuZXJyb3I7cmV0dXJuIHQ/aShuZXcgaWcodC5tc2cpKTp0aGlzLl90aHJlZURTanMmJlwiUFJPQ0VFRFwiPT09ZS5nYXRld2F5UmVjb21tZW5kYXRpb24/bihlLnJlc3RBcGlSZXNwb25zZSk6aShuZXcgaWcpfSl9KTtpZihuLnRyYW5zYWN0aW9uJiZcIkFVVEhFTlRJQ0FUSU9OX0FWQUlMQUJMRVwiPT09bi50cmFuc2FjdGlvbi5hdXRoZW50aWNhdGlvblN0YXR1cylyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRlUGF5ZXIoZSx0KTt0aHJvdyBuZXcgaWd9KX1fYXV0aGVudGljYXRlUGF5ZXIoZSx0LG49MSl7cmV0dXJuIGFnKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gbmV3IFByb21pc2UoKGkscik9PntpZighdGhpcy5fdGhyZWVEU2pzKXJldHVybiByKG5ldyBDcyhmcy5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKTt0aGlzLl90aHJlZURTanMuYXV0aGVudGljYXRlUGF5ZXIoZSx0LGk9PmFnKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBvPWkuZXJyb3I7cmV0dXJuIG8/by5jYXVzZSYmXCJTRVJWRVJfQlVTWVwiPT09by5jYXVzZSYmbjw1Pyh5aWVsZCBuZXcgUHJvbWlzZShlPT5zZXRUaW1lb3V0KGUsM2UzKSksdGhpcy5fYXV0aGVudGljYXRlUGF5ZXIoZSx0LCsrbikpOnIobmV3IGlnKTpuZXcgUHJvbWlzZShWKX0pLHtmdWxsU2NyZWVuUmVkaXJlY3Q6ITB9KX0pfSl9fWNsYXNzIGRne2NvbnN0cnVjdG9yKGUsdD13aW5kb3cpe3RoaXMuX3NjcmlwdExvYWRlcj1lLHRoaXMuX3dpbmRvdz10fWxvYWQoZSl7cmV0dXJuIHQ9dGhpcyxuPXZvaWQgMCxyPWZ1bmN0aW9uKigpe2lmKHlpZWxkIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkU2NyaXB0KGAvLyR7ZT9cInRlc3RcIjpcImFwXCJ9LWdhdGV3YXkubWFzdGVyY2FyZC5jb20vc3RhdGljL3RocmVlRFMvMS4zLjAvdGhyZWUtZHMubWluLmpzYCksIXRoaXMuX3dpbmRvdy5UaHJlZURTKXRocm93IG5ldyBscztyZXR1cm4gdGhpcy5fd2luZG93LlRocmVlRFN9LG5ldygoaT12b2lkIDApfHwoaT1Qcm9taXNlKSkoZnVuY3Rpb24oZSxvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKHIubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChyLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIGk/bjpuZXcgaShmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChyPXIuYXBwbHkodCxufHxbXSkpLm5leHQoKSl9KTt2YXIgdCxuLGkscn19Y2xhc3MgY2cgZXh0ZW5kcyB4eXtjb25zdHJ1Y3RvcihlLHQsbixpLHIpe3N1cGVyKGUsdCxuLGkpLHRoaXMuX2Zvcm1Qb3N0ZXI9cn1leGVjdXRlKGUsdCl7cmV0dXJuIHN1cGVyLmV4ZWN1dGUoZSx0KS5jYXRjaChlPT5lIGluc3RhbmNlb2YgX3QmJlooZS5ib2R5LmVycm9ycyx7Y29kZTpcInRocmVlX2Rfc2VjdXJlX3JlcXVpcmVkXCJ9KT9uZXcgUHJvbWlzZSgoKT0+e3RoaXMuX2Zvcm1Qb3N0ZXIucG9zdEZvcm0oZS5ib2R5LnRocmVlX2RzX3Jlc3VsdC5hY3NfdXJsLHtQYVJlcTplLmJvZHkudGhyZWVfZHNfcmVzdWx0LnBheWVyX2F1dGhfcmVxdWVzdCxUZXJtVXJsOmUuYm9keS50aHJlZV9kc19yZXN1bHQuY2FsbGJhY2tfdXJsLE1EOmUuYm9keS50aHJlZV9kc19yZXN1bHQubWVyY2hhbnRfZGF0YX0pfSk6UHJvbWlzZS5yZWplY3QoZSkpfWZpbmFsaXplKGUpe2NvbnN0IHQ9dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSxuPXQub3JkZXIuZ2V0T3JkZXIoKTtyZXR1cm4gbiYmdC5wYXltZW50LmdldFBheW1lbnRTdGF0dXMoKT09PW9nP3RoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX29yZGVyQWN0aW9uQ3JlYXRvci5maW5hbGl6ZU9yZGVyKG4ub3JkZXJJZCxlKSk6UHJvbWlzZS5yZWplY3QobmV3IGxtKX19Y2xhc3MgbGd7Y29uc3RydWN0b3IoZSx0LG4saSxyKXt0aGlzLl9zdG9yZT1lLHRoaXMuX29yZGVyQWN0aW9uQ3JlYXRvcj10LHRoaXMuX3BheW1lbnRBY3Rpb25DcmVhdG9yPW4sdGhpcy5fbWFzdGVycGFzc1NjcmlwdExvYWRlcj1pLHRoaXMuX2xvY2FsZT1yfWluaXRpYWxpemUoZSl7Y29uc3R7bWV0aG9kSWQ6dH09ZTtpZih0aGlzLl9wYXltZW50TWV0aG9kPXRoaXMuX3N0b3JlLmdldFN0YXRlKCkucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZCh0KSwhdGhpcy5fcGF5bWVudE1ldGhvZCl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0IG49e3VzZU1hc3RlcnBhc3NTcmM6dGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEuaXNNYXN0ZXJwYXNzU3JjRW5hYmxlZCxsYW5ndWFnZTpNcyh0aGlzLl9sb2NhbGUpLHRlc3RNb2RlOnRoaXMuX3BheW1lbnRNZXRob2QuY29uZmlnLnRlc3RNb2RlLGNoZWNrb3V0SWQ6dGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEuY2hlY2tvdXRJZH07cmV0dXJuIHRoaXMuX21hc3RlcnBhc3NTY3JpcHRMb2FkZXIubG9hZChuKS50aGVuKHQ9PntpZih0aGlzLl9tYXN0ZXJwYXNzQ2xpZW50PXQsIWUubWFzdGVycGFzcyl0aHJvdyBuZXcgRnQoJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWFzdGVycGFzc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdCBuPWUubWFzdGVycGFzcy53YWxsZXRCdXR0b24mJmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUubWFzdGVycGFzcy53YWxsZXRCdXR0b24pO3JldHVybiBuJiYodGhpcy5fd2FsbGV0QnV0dG9uPW4sdGhpcy5fd2FsbGV0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2hhbmRsZVdhbGxldEJ1dHRvbkNsaWNrKSksdGhpcy5fc3RvcmUuZ2V0U3RhdGUoKX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiB0aGlzLl9wYXltZW50TWV0aG9kPXZvaWQgMCx0aGlzLl93YWxsZXRCdXR0b24mJnRoaXMuX3dhbGxldEJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9oYW5kbGVXYWxsZXRCdXR0b25DbGljayksdGhpcy5fd2FsbGV0QnV0dG9uPXZvaWQgMCx0aGlzLl9tYXN0ZXJwYXNzQ2xpZW50PXZvaWQgMCxQcm9taXNlLnJlc29sdmUodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSl9ZXhlY3V0ZShlLHQpe2NvbnN0e3BheW1lbnQ6bn09ZSxpPXt1c2VTdG9yZUNyZWRpdDplLnVzZVN0b3JlQ3JlZGl0fTtpZighbil0aHJvdyBuZXcgRnQoJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBiZWNhdXNlIFwicGF5bG9hZC5wYXltZW50XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0aGlzLl9wYXltZW50TWV0aG9kfHwhdGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGF8fCF0aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YS5nYXRld2F5KXRocm93IG5ldyBRZShXZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3Qgcj10aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YS5wYXltZW50RGF0YTtpZighcil0aHJvdyBuZXcgRnQoJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YS5wYXltZW50RGF0YVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtyZXR1cm4gdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fb3JkZXJBY3Rpb25DcmVhdG9yLnN1Ym1pdE9yZGVyKGksdCkpLnRoZW4oKCk9PnRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3BheW1lbnRBY3Rpb25DcmVhdG9yLnN1Ym1pdFBheW1lbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG4pLHtwYXltZW50RGF0YTpyfSkpKSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IGxtKX1fY3JlYXRlTWFzdGVycGFzc1BheWxvYWQoKXtjb25zdCBlPXRoaXMuX3N0b3JlLmdldFN0YXRlKCksdD1lLmNoZWNrb3V0LmdldENoZWNrb3V0KCksbj1lLmNvbmZpZy5nZXRTdG9yZUNvbmZpZygpO2lmKCF0KXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXQpO2lmKCFuKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXRDb25maWcpO2lmKCF0aGlzLl9wYXltZW50TWV0aG9kfHwhdGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEpdGhyb3cgbmV3IFFlKFdlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtyZXR1cm57Y2hlY2tvdXRJZDp0aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YS5jaGVja291dElkLGFsbG93ZWRDYXJkVHlwZXM6dGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEuYWxsb3dlZENhcmRUeXBlcyxhbW91bnQ6dC5zdWJ0b3RhbC50b0ZpeGVkKDIpLGN1cnJlbmN5Om4uY3VycmVuY3kuY29kZSxjYXJ0SWQ6dC5jYXJ0LmlkLGNhbGxiYWNrVXJsOlRzKFwiY2hlY2tvdXRcIil9fV9oYW5kbGVXYWxsZXRCdXR0b25DbGljayhlKXtpZihlLnByZXZlbnREZWZhdWx0KCksIXRoaXMuX21hc3RlcnBhc3NDbGllbnQpcmV0dXJuO2NvbnN0IHQ9dGhpcy5fY3JlYXRlTWFzdGVycGFzc1BheWxvYWQoKTt0aGlzLl9tYXN0ZXJwYXNzQ2xpZW50LmNoZWNrb3V0KHQpfX0hZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLGE9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik6aTtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlhPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG4saSk7ZWxzZSBmb3IodmFyIHM9ZS5sZW5ndGgtMTtzPj0wO3MtLSkocj1lW3NdKSYmKGE9KG88Mz9yKGEpOm8+Mz9yKHQsbixhKTpyKHQsbikpfHxhKTtvPjMmJmEmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4sYSl9KFtDcl0sbGcucHJvdG90eXBlLFwiX2hhbmRsZVdhbGxldEJ1dHRvbkNsaWNrXCIsbnVsbCk7Y2xhc3MgdWd7Y29uc3RydWN0b3IoZSx0LG4saT13aW5kb3cpe3RoaXMuX3N0b3JlPWUsdGhpcy5fb3JkZXJBY3Rpb25DcmVhdG9yPXQsdGhpcy5fc2NyaXB0TG9hZGVyPW4sdGhpcy5fd2luZG93PWksdGhpcy5fdXNlUmVkaXJlY3RGbG93PSExfWluaXRpYWxpemUoZSl7Y29uc3QgdD10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpO3JldHVybiB0aGlzLl9wYXltZW50TWV0aG9kPXQucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZChlLm1ldGhvZElkKSx0aGlzLl91c2VSZWRpcmVjdEZsb3c9ITA9PT0oZS5wYXlwYWxleHByZXNzJiZlLnBheXBhbGV4cHJlc3MudXNlUmVkaXJlY3RGbG93KSx0aGlzLl9pc0luQ29udGV4dEVuYWJsZWQoKT90aGlzLl9zY3JpcHRMb2FkZXIubG9hZFBheXBhbCgpLnRoZW4oZT0+e2lmKHRoaXMuX3BheXBhbFNkaz1lLCF0aGlzLl9wYXltZW50TWV0aG9kfHwhdGhpcy5fcGF5bWVudE1ldGhvZC5jb25maWcubWVyY2hhbnRJZCl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ1BheW1lbnRNZXRob2QpO3RoaXMuX3BheXBhbFNkay5jaGVja291dC5zZXR1cCh0aGlzLl9wYXltZW50TWV0aG9kLmNvbmZpZy5tZXJjaGFudElkLHtidXR0b246XCJwYXlwYWwtYnV0dG9uXCIsZW52aXJvbm1lbnQ6dGhpcy5fcGF5bWVudE1ldGhvZC5jb25maWcudGVzdE1vZGU/XCJzYW5kYm94XCI6XCJwcm9kdWN0aW9uXCJ9KX0pLnRoZW4oKCk9PnRoaXMuX3N0b3JlLmdldFN0YXRlKCkpOlByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gdGhpcy5faXNJbkNvbnRleHRFbmFibGVkKCkmJnRoaXMuX3BheXBhbFNkayYmKHRoaXMuX3BheXBhbFNkay5jaGVja291dC5jbG9zZUZsb3coKSx0aGlzLl9wYXlwYWxTZGs9dm9pZCAwKSxQcm9taXNlLnJlc29sdmUodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSl9ZXhlY3V0ZShlLHQpe2NvbnN0IG49dGhpcy5fcGF5cGFsU2RrO2lmKHRoaXMuX2lzQWNrbm93bGVkZ2VkT3JGaW5hbGl6ZWQoKSlyZXR1cm4gdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fb3JkZXJBY3Rpb25DcmVhdG9yLnN1Ym1pdE9yZGVyKGUsdCkpO2lmKCF0aGlzLl9pc0luQ29udGV4dEVuYWJsZWQoKXx8dGhpcy5fdXNlUmVkaXJlY3RGbG93KXJldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9vcmRlckFjdGlvbkNyZWF0b3Iuc3VibWl0T3JkZXIoZSx0KSkudGhlbihlPT57Y29uc3QgdD1lLnBheW1lbnQuZ2V0UGF5bWVudFJlZGlyZWN0VXJsKCk7cmV0dXJuIHQmJnRoaXMuX3dpbmRvdy50b3AmJih0aGlzLl93aW5kb3cudG9wLmxvY2F0aW9uLmhyZWY9dCksbmV3IFByb21pc2UoVil9KTtpZighbil0aHJvdyBuZXcgQ3MoZnMuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gbi5jaGVja291dC5pbml0WE8oKSx0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9vcmRlckFjdGlvbkNyZWF0b3Iuc3VibWl0T3JkZXIoZSx0KSkudGhlbihlPT57Y29uc3QgdD1lLnBheW1lbnQuZ2V0UGF5bWVudFJlZGlyZWN0VXJsKCk7cmV0dXJuIHQmJm4uY2hlY2tvdXQuc3RhcnRGbG93KHQpLG5ldyBQcm9taXNlKFYpfSkuY2F0Y2goZT0+KG4uY2hlY2tvdXQuY2xvc2VGbG93KCksUHJvbWlzZS5yZWplY3QoZSkpKX1maW5hbGl6ZShlKXtjb25zdCB0PXRoaXMuX3N0b3JlLmdldFN0YXRlKCkub3JkZXIuZ2V0T3JkZXIoKTtyZXR1cm4gdCYmdGhpcy5faXNBY2tub3dsZWRnZWRPckZpbmFsaXplZCgpP3RoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX29yZGVyQWN0aW9uQ3JlYXRvci5maW5hbGl6ZU9yZGVyKHQub3JkZXJJZCxlKSk6UHJvbWlzZS5yZWplY3QobmV3IGxtKX1faXNBY2tub3dsZWRnZWRPckZpbmFsaXplZCgpe2NvbnN0IGU9dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKTtyZXR1cm4gZS5wYXltZW50LmdldFBheW1lbnRTdGF0dXMoKT09PXJnfHxlLnBheW1lbnQuZ2V0UGF5bWVudFN0YXR1cygpPT09b2d9X2lzSW5Db250ZXh0RW5hYmxlZCgpe3JldHVybiEoIXRoaXMuX3BheW1lbnRNZXRob2R8fCF0aGlzLl9wYXltZW50TWV0aG9kLmNvbmZpZy5tZXJjaGFudElkKX19Y2xhc3MgaGd7Y29uc3RydWN0b3IoZSl7dGhpcy5fc2NyaXB0TG9hZGVyPWUsdGhpcy5fd2luZG93PXdpbmRvd31sb2FkUGF5cGFsKGU9XCJcIil7cmV0dXJuIHQ9dGhpcyxuPXZvaWQgMCxyPWZ1bmN0aW9uKigpe2NvbnN0IHQ9XCIvL3d3dy5wYXlwYWxvYmplY3RzLmNvbS9hcGkvY2hlY2tvdXQubWluLmpzXCIsbj17YXN5bmM6ITAsYXR0cmlidXRlczp7XCJkYXRhLW1lcmNoYW50LWlkXCI6ZX19O2lmKGU/eWllbGQgdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQodCxuKTp5aWVsZCB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZFNjcmlwdCh0KSwhdGhpcy5fd2luZG93LnBheXBhbCl0aHJvdyBuZXcgbHM7cmV0dXJuIHRoaXMuX3dpbmRvdy5wYXlwYWx9LG5ldygoaT12b2lkIDApfHwoaT1Qcm9taXNlKSkoZnVuY3Rpb24oZSxvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKHIubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChyLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIGk/bjpuZXcgaShmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChyPXIuYXBwbHkodCxufHxbXSkpLm5leHQoKSl9KTt2YXIgdCxuLGkscn19Y2xhc3MgcGcgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHxcIlBheW1lbnQgcHJvY2VzcyB3YXMgY2FuY2VsbGVkLlwiKSx0aGlzLm5hbWU9XCJQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3JcIix0aGlzLnR5cGU9XCJwYXltZW50X2NhbmNlbGxlZFwifX1jb25zdCBtZz1cInJlZGlyZWN0aW5nXCI7Y2xhc3MgeWd7Y29uc3RydWN0b3IoKXt0aGlzLl9pc1JlZGlyZWN0aW5nPXRoaXMuY3VycmVudFVybEhhc1JlZGlyZWN0aW5nUGFyYW0oKX1pc1JlZGlyZWN0aW5nKCl7cmV0dXJuIHRoaXMuX2lzUmVkaXJlY3Rpbmd9c2V0UmVkaXJlY3RpbmcoZSl7ZT90aGlzLnNldFJlZGlyZWN0aW5nUGFyYW1PblVybCgpOnRoaXMucmVtb3ZlUmVkaXJlY3RpbmdQYXJhbUZyb21VcmwoKSx0aGlzLl9pc1JlZGlyZWN0aW5nPWV9Y3VycmVudFVybEhhc1JlZGlyZWN0aW5nUGFyYW0oKXtyZXR1cm4gbWcgaW4gdGhpcy5nZXRDdXJyZW50VXJsKCkucXVlcnl9Z2V0Q3VycmVudFVybCgpe3JldHVybiBOZSh3aW5kb3cubG9jYXRpb24uaHJlZil9cmVwbGFjZUN1cnJlbnRVcmwoZSl7d2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsXCJcIixlKX1zZXRSZWRpcmVjdGluZ1BhcmFtT25VcmwoKXtpZih0aGlzLmN1cnJlbnRVcmxIYXNSZWRpcmVjdGluZ1BhcmFtKCkpcmV0dXJuO2NvbnN0IGU9dGhpcy5nZXRDdXJyZW50VXJsKCksdD1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3F1ZXJ5Ok9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlLnF1ZXJ5KSx7W21nXTpcInRydWVcIn0pfSk7dGhpcy5yZXBsYWNlQ3VycmVudFVybCh4ZSh0KSl9cmVtb3ZlUmVkaXJlY3RpbmdQYXJhbUZyb21VcmwoKXt0aGlzLmN1cnJlbnRVcmxIYXNSZWRpcmVjdGluZ1BhcmFtKCkmJnRoaXMucmVwbGFjZUN1cnJlbnRVcmwoemUod2luZG93LmxvY2F0aW9uLmhyZWYsW21nXSkpfX1jb25zdCBnZz0kKFtlPT5cImNvbnRpbnVlXCI9PT1JKGUsXCJ0eXBlXCIpJiZcInJlZGlyZWN0XCI9PT1JKGUsXCJjb2RlXCIpJiYoZT0+e2NvbnN0IHQ9SShlLFwiZm9ybV9maWVsZHNcIik7cmV0dXJuIHooSShlLFwidXJsXCIpKSYmKE4odCl8fEQodCkpfSkoSShlLFwicGFyYW1ldGVyc1wiKSksZT0+XCJjb250aW51ZVwiPT09SShlLFwidHlwZVwiKSYmXCJyZXN1Ym1pdF93aXRoX2h1bWFuX3ZlcmlmaWNhdGlvblwiPT09SShlLFwiY29kZVwiKSYmKGU9Pntjb25zdCB0PUkoZSxcImF2YWlsYWJsZV9tZXRob2RzXCIpO3JldHVybiBPKHQpfSkoSShlLFwicGFyYW1ldGVyc1wiKSldKTtjbGFzcyB2Z3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX2Zvcm1Qb3N0ZXI9ZSx0aGlzLl9odW1hblZlcmlmaWNhdGlvbkhhbmRsZXI9dH1oYW5kbGUoZSx0KXtzd2l0Y2goZS5jb2RlKXtjYXNlXCJyZWRpcmVjdFwiOnJldHVybigoe3VybDplLGZvcm1fZmllbGRzOnR9LG4pPT57Y29uc3QgaT1uZXcgeWc7cmV0dXJuIGkuaXNSZWRpcmVjdGluZygpPyhpLnNldFJlZGlyZWN0aW5nKCExKSxQcm9taXNlLnJlamVjdChuZXcgcGcpKTooaS5zZXRSZWRpcmVjdGluZyghMCksdD9uLnBvc3RGb3JtKGUsdCk6d2luZG93LmxvY2F0aW9uLmFzc2lnbihlKSxuZXcgUHJvbWlzZShWKSl9KShlLnBhcmFtZXRlcnMsdGhpcy5fZm9ybVBvc3Rlcik7Y2FzZVwicmVzdWJtaXRfd2l0aF9odW1hbl92ZXJpZmljYXRpb25cIjpyZXR1cm4oKHthdmFpbGFibGVfbWV0aG9kczplfSx0LG4pPT57cmV0dXJuIGk9dm9pZCAwLHI9dm9pZCAwLGE9ZnVuY3Rpb24qKCl7aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiUFBTREsgaHVtYW4gdmVyaWZpY2F0aW9uIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIG1pc3NpbmcuXCIpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIlBQU0RLIGh1bWFuIHZlcmlmaWNhdGlvbiBoYW5kbGVyIGlzIG1pc3NpbmcuXCIpO2lmKDA9PT1lLmxlbmd0aCl0aHJvdyBFcnJvcihcIkh1bWFuIHZlcmlmaWNhdGlvbiBtZXRob2QgaXMgbWlzc2luZy5cIik7Y29uc3R7aWQ6aSxwYXJhbWV0ZXJzOnJ9PWVbMF0sbz15aWVsZCB0LmhhbmRsZShpLHIua2V5KTtyZXR1cm4gbihvKX0sbmV3KChvPXZvaWQgMCl8fChvPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dHJ5e2QoYS5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGEudGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIGk7dC5kb25lP2UodC52YWx1ZSk6KGk9dC52YWx1ZSxpIGluc3RhbmNlb2Ygbz9pOm5ldyBvKGZ1bmN0aW9uKGUpe2UoaSl9KSkudGhlbihuLHMpfWQoKGE9YS5hcHBseShpLHJ8fFtdKSkubmV4dCgpKX0pO3ZhciBpLHIsbyxhfSkoZS5wYXJhbWV0ZXJzLHRoaXMuX2h1bWFuVmVyaWZpY2F0aW9uSGFuZGxlcixudWxsPT10P3ZvaWQgMDp0Lmh1bWFuVmVyaWZpY2F0aW9uKX19fWNsYXNzIGZne2NvbnN0cnVjdG9yKGUpe3RoaXMuX2NvbnRpbnVlSGFuZGxlcj1lfWhhbmRsZShlLHQpe2NvbnN0e2JvZHk6bn09ZTtyZXR1cm4oZT0+XCJzdWNjZXNzXCI9PT1JKGUsXCJ0eXBlXCIpKShuKT9Qcm9taXNlLnJlc29sdmUoKTooZT0+Z2coZSkpKG4pP3RoaXMuX2NvbnRpbnVlSGFuZGxlci5oYW5kbGUobixudWxsPT10P3ZvaWQgMDp0LmNvbnRpbnVlKTooZT0+XCJmYWlsdXJlXCI9PT1JKGUuYm9keSxcInR5cGVcIikmJnooSShlLmJvZHksXCJjb2RlXCIpKSkoZSk/KGU9PntyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IF90KCh0PWUsT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtib2R5OntlcnJvcnM6W3tjb2RlOnQuYm9keS5jb2RlfV19fSkpKSk7dmFyIHR9KShlKTooKGU9PntJKGUuYm9keSxcInR5cGVcIil9KShlKSwoZT0+UHJvbWlzZS5yZWplY3QobmV3IF90KGUpKSkoZSkpfX1jb25zdCBTZz1cImNvbXBsZXRlZC1wYXltZW50c1wiO2NsYXNzIF9ne2NvbnN0cnVjdG9yKGUpe3RoaXMuX2Jyb3dzZXJTdG9yYWdlPWV9aXNDb21wbGV0ZWQoZSl7cmV0dXJuIHRoaXMuZ2V0Q29tcGxldGVkUGF5bWVudHMoKS5pbmRleE9mKGUpPj0wfXNldENvbXBsZXRlZChlKXtjb25zdCB0PXRoaXMuZ2V0Q29tcGxldGVkUGF5bWVudHMoKTt0LnB1c2goZSksdGhpcy5zZXRDb21wbGV0ZWRQYXltZW50cyh0KX1nZXRDb21wbGV0ZWRQYXltZW50cygpe3JldHVybiB0aGlzLl9icm93c2VyU3RvcmFnZS5nZXRJdGVtKFNnKXx8W119c2V0Q29tcGxldGVkUGF5bWVudHMoZSl7dGhpcy5fYnJvd3NlclN0b3JhZ2Uuc2V0SXRlbShTZyxlKX19dmFyIHdnLENnPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIElne2NvbnN0cnVjdG9yKGUsdCxuLGkscil7dGhpcy5fc3RvcmU9ZSx0aGlzLl9vcmRlckFjdGlvbkNyZWF0b3I9dCx0aGlzLl9zdWJTdHJhdGVneVJlZ2lzdHJ5PW4sdGhpcy5fcGF5bWVudFJlc3VtZXI9aSx0aGlzLl9jb21wbGV0ZWRQYXltZW50cz1uZXcgX2cocil9ZXhlY3V0ZShlLHQpe3ZhciBuO3JldHVybiBDZyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7YmlncGF5QmFzZVVybDppfT10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLmNvbmZpZy5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5wYXltZW50U2V0dGluZ3M7aWYoIShudWxsPT10P3ZvaWQgMDp0Lm1ldGhvZElkKSl0aHJvdyBuZXcgRnQoJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdHttZXRob2RJZDpyfT10LHtwYXltZW50Om99PWUsYT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KGUsW1wicGF5bWVudFwiXSkse19zdWJTdHJhdGVneTpzfT10aGlzO2lmKCFzKXRocm93IG5ldyBDcyhmcy5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3lpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX29yZGVyQWN0aW9uQ3JlYXRvci5zdWJtaXRPcmRlcihhLHQpKTtjb25zdCBkPW51bGw9PT0obj10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLm9yZGVyLmdldE9yZGVyTWV0YSgpKXx8dm9pZCAwPT09bj92b2lkIDA6bi50b2tlbjtpZighZCl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ09yZGVyKTtyZXR1cm4geWllbGQgcy5leGVjdXRlKHttZXRob2RJZDpyLHBheW1lbnQ6byxiaWdwYXlCYXNlVXJsOmksdG9rZW46ZH0pLHRoaXMuX3N0b3JlLmdldFN0YXRlKCl9KX1maW5hbGl6ZShlKXtyZXR1cm4gQ2codGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKS5vcmRlci5nZXRPcmRlck9yVGhyb3coKTtpZih0LmlzQ29tcGxldGUpcmV0dXJuIHRoaXMuX3N0b3JlLmdldFN0YXRlKCk7Y29uc3R7YmlncGF5QmFzZVVybDpufT10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLmNvbmZpZy5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5wYXltZW50U2V0dGluZ3M7aWYoIShudWxsPT1lP3ZvaWQgMDplLm1ldGhvZElkKSl0aHJvdyBuZXcgRnQoJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdCBpPXRoaXMuX3N0b3JlLmdldFN0YXRlKCkub3JkZXIuZ2V0UGF5bWVudElkKGUubWV0aG9kSWQpO2lmKCFpfHwhdHx8dGhpcy5fY29tcGxldGVkUGF5bWVudHMuaXNDb21wbGV0ZWQoaSkpdGhyb3cgbmV3IGxtO2NvbnN0e29yZGVySWQ6cn09dDtyZXR1cm4geWllbGQgdGhpcy5fcGF5bWVudFJlc3VtZXIucmVzdW1lKHtwYXltZW50SWQ6aSxiaWdwYXlCYXNlVXJsOm4sb3JkZXJJZDpyfSkuY2F0Y2goZT0+e3Rocm93IHRoaXMuX2NvbXBsZXRlZFBheW1lbnRzLnNldENvbXBsZXRlZChpKSxlfSksdGhpcy5fc3RvcmUuZ2V0U3RhdGUoKX0pfWluaXRpYWxpemUoZSl7cmV0dXJuIENnKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighKG51bGw9PWU/dm9pZCAwOmUubWV0aG9kSWQpKXRocm93IG5ldyBGdCgnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0IHQ9KChlLHQpPT57Y29uc3Qgbj1lLmdldFN0YXRlKCkucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZCh0KTtpZihuJiZEeShuKSlyZXR1cm4gbn0pKHRoaXMuX3N0b3JlLGUubWV0aG9kSWQpO2lmKCF0KXRocm93IG5ldyBDcyhmcy5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO2lmKHRoaXMuX3N1YlN0cmF0ZWd5PXRoaXMuX3N1YlN0cmF0ZWd5UmVnaXN0cnkuZ2V0QnlNZXRob2QodCksIXRoaXMuX3N1YlN0cmF0ZWd5KXRocm93IG5ldyBDcyhmcy5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3JldHVybiB5aWVsZCB0aGlzLl9zdWJTdHJhdGVneS5pbml0aWFsaXplKGUpLHRoaXMuX3N0b3JlLmdldFN0YXRlKCl9KX1kZWluaXRpYWxpemUoZSl7dmFyIHQ7cmV0dXJuIENnKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gbnVsbD09PSh0PXRoaXMuX3N1YlN0cmF0ZWd5KXx8dm9pZCAwPT09dHx8dC5kZWluaXRpYWxpemUoKSx0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpfSl9fSFmdW5jdGlvbihlKXtlLkNBUkQ9XCJjYXJkX3VpXCIsZS5OT05FPVwibm9uZVwiLGUuVU5TVVBQT1JURUQ9XCJ1bnN1cHBvcnRlZFwifSh3Z3x8KHdnPXt9KSk7Y29uc3QgYmc9bShbW2U9PlwiY2FyZF91aVwiPT09ZS50eXBlLHkod2cuQ0FSRCldLFtlPT5cIm5vbmVcIj09PWUudHlwZSx5KHdnLk5PTkUpXSxbUSx5KHdnLlVOU1VQUE9SVEVEKV1dKTtjbGFzcyBQZyBleHRlbmRzIFJ0e2dldEJ5TWV0aG9kKGUpe2NvbnN0IHQ9YmcoZS5pbml0aWFsaXphdGlvblN0cmF0ZWd5KTtyZXR1cm4gdGhpcy5nZXQodCl9fXZhciBPZz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBFZ3tjb25zdHJ1Y3RvcihlLHQsbixpKXt0aGlzLl9zdG9yZT1lLHRoaXMuX29yZGVyQWN0aW9uQ3JlYXRvcj10LHRoaXMuX2hvc3RlZEZvcm1GYWN0b3J5PW4sdGhpcy5fcHBzZGtTdGVwSGFuZGxlcj1pfWV4ZWN1dGUoZSl7cmV0dXJuIE9nKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuX2hvc3RlZEZvcm07aWYoIXQpdGhyb3cgbmV3IENzKGZzLlBheW1lbnROb3RJbml0aWFsaXplZCk7Y29uc3R7YWRkaXRpb25hbEFjdGlvbjpuLHBheW1lbnQ6aX09ZTtpZighaXx8IWkubWV0aG9kSWQpdGhyb3cgbmV3IHp5KFtcInBheW1lbnQubWV0aG9kSWRcIl0pO3lpZWxkIHQudmFsaWRhdGUoKTtjb25zdHtwYXlsb2FkOnJ9PXlpZWxkIHQuc3VibWl0KGksbikse3Jlc3BvbnNlOm99PXI7eWllbGQgdGhpcy5fcHBzZGtTdGVwSGFuZGxlci5oYW5kbGUobyx7Y29udGludWU6e2h1bWFuVmVyaWZpY2F0aW9uOnQ9Pk9nKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5leGVjdXRlKE9iamVjdC5hc3NpZ24oe2FkZGl0aW9uYWxBY3Rpb246dH0sZSkpfSl9fSkseWllbGQgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fb3JkZXJBY3Rpb25DcmVhdG9yLmxvYWRDdXJyZW50T3JkZXIoKSl9KX1pbml0aWFsaXplKGUpe3JldHVybiBPZyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD1lJiZlLmNyZWRpdENhcmQmJmUuY3JlZGl0Q2FyZC5mb3JtLHtjb25maWc6bixjaGVja291dDppfT10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLHtwYXltZW50U2V0dGluZ3M6e2JpZ3BheUJhc2VVcmw6cj1cIlwifT17fX09bi5nZXRTdG9yZUNvbmZpZygpfHx7fSxvPWkuZ2V0Q2hlY2tvdXRPclRocm93KCkuaWQ7aWYoIXQpdGhyb3cgbmV3IEZ0O2NvbnN0IGE9dCYmdGhpcy5faG9zdGVkRm9ybUZhY3RvcnkuY3JlYXRlKHIsdCxvKTt5aWVsZCBhLmF0dGFjaCgpLHRoaXMuX2hvc3RlZEZvcm09YX0pfWRlaW5pdGlhbGl6ZSgpe3RoaXMuX2hvc3RlZEZvcm0mJnRoaXMuX2hvc3RlZEZvcm0uZGV0YWNoKCl9fWNsYXNzIEFne2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lLHRoaXMuX3N0ZXBIYW5kbGVyPXR9ZXhlY3V0ZSh7bWV0aG9kSWQ6ZSxiaWdwYXlCYXNlVXJsOnQsdG9rZW46bn0pe2NvbnN0IGk9e2NyZWRlbnRpYWxzOiExLGJvZHk6e3BheW1lbnRfbWV0aG9kX2lkOmV9LGhlYWRlcnM6e2F1dGhvcml6YXRpb246bixcIlgtWFNSRi1UT0tFTlwiOm51bGx9fTtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5wb3N0KGAke3R9L3BheW1lbnRzYCxpKS50aGVuKGU9PnRoaXMuX3N0ZXBIYW5kbGVyLmhhbmRsZShlKSl9aW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1kZWluaXRpYWxpemUoKXt9fXZhciBrZyxUZz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBEZ3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZSx0aGlzLl9zdGVwSGFuZGxlcj10fXJlc3VtZSh7cGF5bWVudElkOmUsYmlncGF5QmFzZVVybDp0LG9yZGVySWQ6bn0pe3JldHVybiBUZyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT17Y3JlZGVudGlhbHM6ITEsaGVhZGVyczp7YXV0aG9yaXphdGlvbjp5aWVsZCB0aGlzLl9nZXRUb2tlbihuKS5jYXRjaCgoKT0+e3Rocm93IG5ldyBsbX0pLFwiWC1YU1JGLVRPS0VOXCI6bnVsbH19O3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLmdldChgJHt0fS9wYXltZW50cy8ke2V9YCxpKS50aGVuKGU9PnRoaXMuX3N0ZXBIYW5kbGVyLmhhbmRsZShlKSl9KX1fZ2V0VG9rZW4oZSl7cmV0dXJuIFRnKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXtwYXJhbXM6e29yZGVyX2lkOmV9fTtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5nZXQoXCIvYXBpL3N0b3JlZnJvbnQvcGF5bWVudHMvYXV0aC10b2tlblwiLHQpLnRoZW4oKHtib2R5OmV9KT0+ZS5hdXRoX3Rva2VuKX0pfX1jbGFzcyBNZyBleHRlbmRzIHh5e2NvbnN0cnVjdG9yKGUsdCxuLGkscil7c3VwZXIoZSx0LG4saSksdGhpcy5fd2VwYXlSaXNrQ2xpZW50PXJ9aW5pdGlhbGl6ZShlKXtyZXR1cm4gdGhpcy5fd2VwYXlSaXNrQ2xpZW50LmluaXRpYWxpemUoKSxzdXBlci5pbml0aWFsaXplKGUpfWV4ZWN1dGUoZSx0KXtjb25zdCBuPXRoaXMuX3dlcGF5Umlza0NsaWVudC5nZXRSaXNrVG9rZW4oKSxpPXEoe30sZSx7cGF5bWVudDp7cGF5bWVudERhdGE6e2RldmljZVNlc3Npb25JZDpufX19KTtyZXR1cm4gc3VwZXIuZXhlY3V0ZShpLHQpfX1jbGFzcyB6Z3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9zY3JpcHRMb2FkZXI9ZX1pbml0aWFsaXplKCl7cmV0dXJuIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkU2NyaXB0KFwiLy9zdGF0aWMud2VwYXkuY29tL21pbi9qcy9yaXNrLjEubGF0ZXN0LmpzXCIpLnRoZW4oKCk9PnRoaXMuX3Jpc2tDbGllbnQ9d2luZG93LldlUGF5LnJpc2spLnRoZW4oKCk9PnRoaXMpfWdldFJpc2tUb2tlbigpe2lmKCF0aGlzLl9yaXNrQ2xpZW50KXRocm93IG5ldyBDcyhmcy5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3JldHVybiB0aGlzLl9yaXNrQ2xpZW50LmdlbmVyYXRlX3Jpc2tfdG9rZW4oKSx0aGlzLl9yaXNrQ2xpZW50LmdldF9yaXNrX3Rva2VuKCl9fSFmdW5jdGlvbihlKXtlLkxvYWRJbnN0cnVtZW50c1JlcXVlc3RlZD1cIkxPQURfSU5TVFJVTUVOVFNfUkVRVUVTVEVEXCIsZS5Mb2FkSW5zdHJ1bWVudHNTdWNjZWVkZWQ9XCJMT0FEX0lOU1RSVU1FTlRTX1NVQ0NFRURFRFwiLGUuTG9hZEluc3RydW1lbnRzRmFpbGVkPVwiTE9BRF9JTlNUUlVNRU5UU19GQUlMRURcIixlLkRlbGV0ZUluc3RydW1lbnRSZXF1ZXN0ZWQ9XCJERUxFVEVfSU5TVFJVTUVOVF9SRVFVRVNURURcIixlLkRlbGV0ZUluc3RydW1lbnRTdWNjZWVkZWQ9XCJERUxFVEVfSU5TVFJVTUVOVF9TVUNDRUVERURcIixlLkRlbGV0ZUluc3RydW1lbnRGYWlsZWQ9XCJERUxFVEVfSU5TVFJVTUVOVF9GQUlMRURcIn0oa2d8fChrZz17fSkpO2NsYXNzIE5ne2NvbnN0cnVjdG9yKGUpe3RoaXMuX2luc3RydW1lbnRSZXF1ZXN0U2VuZGVyPWV9bG9hZEluc3RydW1lbnRzKCl7cmV0dXJuIGU9Pm9lLmNyZWF0ZSh0PT57dC5uZXh0KGwoa2cuTG9hZEluc3RydW1lbnRzUmVxdWVzdGVkKSk7Y29uc3Qgbj10aGlzLl9nZXRTZXNzaW9uQ29udGV4dChlKSxpPXRoaXMuX2dldEN1cnJlbnRBY2Nlc3NUb2tlbihlKSxyPXRoaXMuX2dldFNoaXBwaW5nQWRkcmVzcyhlKTtyZXR1cm4gdGhpcy5fZ2V0VmFsaWRBY2Nlc3NUb2tlbihpKS50aGVuKGU9PnRoaXMuX2luc3RydW1lbnRSZXF1ZXN0U2VuZGVyLmxvYWRJbnN0cnVtZW50cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbikse2F1dGhUb2tlbjplLnZhdWx0QWNjZXNzVG9rZW59KSxyKS50aGVuKCh7Ym9keTpufSk9Pnt0Lm5leHQobChrZy5Mb2FkSW5zdHJ1bWVudHNTdWNjZWVkZWQsbixlKSksdC5jb21wbGV0ZSgpfSkpLmNhdGNoKGU9Pnt0LmVycm9yKGgoa2cuTG9hZEluc3RydW1lbnRzRmFpbGVkLGUpKX0pfSl9ZGVsZXRlSW5zdHJ1bWVudChlKXtyZXR1cm4gdD0+b2UuY3JlYXRlKG49PntuLm5leHQobChrZy5EZWxldGVJbnN0cnVtZW50UmVxdWVzdGVkLHZvaWQgMCx7aW5zdHJ1bWVudElkOmV9KSk7Y29uc3QgaT10aGlzLl9nZXRTZXNzaW9uQ29udGV4dCh0KSxyPXRoaXMuX2dldEN1cnJlbnRBY2Nlc3NUb2tlbih0KTtyZXR1cm4gdGhpcy5fZ2V0VmFsaWRBY2Nlc3NUb2tlbihyKS50aGVuKHQ9PnRoaXMuX2luc3RydW1lbnRSZXF1ZXN0U2VuZGVyLmRlbGV0ZUluc3RydW1lbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGkpLHthdXRoVG9rZW46dC52YXVsdEFjY2Vzc1Rva2VufSksZSkudGhlbigoe2JvZHk6aX0pPT57bi5uZXh0KGwoa2cuRGVsZXRlSW5zdHJ1bWVudFN1Y2NlZWRlZCxpLE9iamVjdC5hc3NpZ24oe2luc3RydW1lbnRJZDplfSx0KSkpLG4uY29tcGxldGUoKX0pKS5jYXRjaCh0PT57bi5lcnJvcihoKGtnLkRlbGV0ZUluc3RydW1lbnRGYWlsZWQsdCx7aW5zdHJ1bWVudElkOmV9KSl9KX0pfV9pc1ZhbGlkVmF1bHRBY2Nlc3NUb2tlbihlKXtpZighZXx8IWUudmF1bHRBY2Nlc3NUb2tlbilyZXR1cm4hMTtyZXR1cm4gZnVuY3Rpb24oZSl7Y29uc3QgdD1uZXcgRGF0ZShlLmdldFRpbWUoKSk7cmV0dXJuIHQuc2V0TWludXRlcyhlLmdldE1pbnV0ZXMoKSsyKSx0fShuZXcgRGF0ZShlLnZhdWx0QWNjZXNzRXhwaXJ5KSkudmFsdWVPZigpPkRhdGUubm93KCl9X2dldEN1cnJlbnRBY2Nlc3NUb2tlbihlKXtjb25zdHtpbnN0cnVtZW50czp0fT1lLmdldFN0YXRlKCksbj10LmdldEluc3RydW1lbnRzTWV0YSgpO2lmKG4pcmV0dXJue3ZhdWx0QWNjZXNzVG9rZW46bi52YXVsdEFjY2Vzc1Rva2VuLHZhdWx0QWNjZXNzRXhwaXJ5Om4udmF1bHRBY2Nlc3NFeHBpcnl9fV9nZXRWYWxpZEFjY2Vzc1Rva2VuKGUpe3JldHVybiBlJiZ0aGlzLl9pc1ZhbGlkVmF1bHRBY2Nlc3NUb2tlbihlKT9Qcm9taXNlLnJlc29sdmUoZSk6dGhpcy5faW5zdHJ1bWVudFJlcXVlc3RTZW5kZXIuZ2V0VmF1bHRBY2Nlc3NUb2tlbigpLnRoZW4oKHtib2R5OmV9KT0+ZSl9X2dldFNoaXBwaW5nQWRkcmVzcyhlKXtjb25zdCB0PWUuZ2V0U3RhdGUoKSxuPXQuc2hpcHBpbmdBZGRyZXNzLmdldFNoaXBwaW5nQWRkcmVzc2VzKCk7cmV0dXJuIG4ubGVuZ3RoPjE/bjp0LnNoaXBwaW5nQWRkcmVzcy5nZXRTaGlwcGluZ0FkZHJlc3MoKX1fZ2V0U2Vzc2lvbkNvbnRleHQoZSl7Y29uc3QgdD1lLmdldFN0YXRlKCksbj10LmNvbmZpZy5nZXRTdG9yZUNvbmZpZygpLGk9dC5jYXJ0LmdldENhcnQoKTtpZighbil0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NoZWNrb3V0Q29uZmlnKTtpZighaSl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NhcnQpO2NvbnN0e2N1c3RvbWVySWQ6cn09aSx7c3RvcmVJZDpvfT1uLnN0b3JlUHJvZmlsZSx7Y29kZTphfT1uLnNob3BwZXJDdXJyZW5jeS5pc1RyYW5zYWN0aW9uYWw/bi5zaG9wcGVyQ3VycmVuY3k6bi5jdXJyZW5jeTtyZXR1cm57Y3VzdG9tZXJJZDpyLHN0b3JlSWQ6byxjdXJyZW5jeUNvZGU6YX19fXZhciB4ZyxGZyxSZz1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59O2NsYXNzIExne3RyYW5zZm9ybVJlc3BvbnNlKGUpe2NvbnN0IHQ9dGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoZSkse2JvZHk6bn09dCxpPVJnKHQsW1wiYm9keVwiXSk7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxpKSx7Ym9keTp7dmF1bHRlZEluc3RydW1lbnRzOnRoaXMuX3RyYW5zZm9ybVZhdWx0ZWRJbnN0cnVtZW50cyhuLnZhdWx0ZWRfaW5zdHJ1bWVudHMpfX0pfXRyYW5zZm9ybUVycm9yUmVzcG9uc2UoZSl7cmV0dXJuIHRoaXMuX3RyYW5zZm9ybVJlc3BvbnNlKGUpfXRyYW5zZm9ybVZhdWx0QWNjZXNzUmVzcG9uc2UoZSl7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7Ym9keTp7dmF1bHRBY2Nlc3NUb2tlbjplLmJvZHkuZGF0YS50b2tlbix2YXVsdEFjY2Vzc0V4cGlyeTplLmJvZHkuZGF0YS5leHBpcmVzX2F0fX0pfV90cmFuc2Zvcm1WYXVsdGVkSW5zdHJ1bWVudHMoZT1bXSl7cmV0dXJuIGUubWFwKGU9PnRoaXMuX2lzUGF5UGFsSW5zdHJ1bWVudChlKT9mdW5jdGlvbihlKXtyZXR1cm57YmlncGF5VG9rZW46ZS5iaWdwYXlfdG9rZW4sZGVmYXVsdEluc3RydW1lbnQ6ZS5kZWZhdWx0X2luc3RydW1lbnQscHJvdmlkZXI6ZS5wcm92aWRlcixleHRlcm5hbElkOmUuZXh0ZXJuYWxfaWQsdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczplLnRydXN0ZWRfc2hpcHBpbmdfYWRkcmVzcyxtZXRob2Q6XCJwYXlwYWxcIix0eXBlOlwiYWNjb3VudFwifX0oZSk6dGhpcy5faXNCYW5rSW5zdHJ1bWVudChlKT9mdW5jdGlvbihlKXtyZXR1cm57YmlncGF5VG9rZW46ZS5iaWdwYXlfdG9rZW4sZGVmYXVsdEluc3RydW1lbnQ6ZS5kZWZhdWx0X2luc3RydW1lbnQscHJvdmlkZXI6ZS5wcm92aWRlcix0cnVzdGVkU2hpcHBpbmdBZGRyZXNzOmUudHJ1c3RlZF9zaGlwcGluZ19hZGRyZXNzLGFjY291bnROdW1iZXI6ZS5hY2NvdW50X251bWJlcixpc3N1ZXI6ZS5pc3N1ZXIsaWJhbjplLmliYW4sbWV0aG9kOmUubWV0aG9kLHR5cGU6XCJiYW5rXCJ9fShlKTpmdW5jdGlvbihlKXtyZXR1cm57YmlncGF5VG9rZW46ZS5iaWdwYXlfdG9rZW4sZGVmYXVsdEluc3RydW1lbnQ6ZS5kZWZhdWx0X2luc3RydW1lbnQscHJvdmlkZXI6ZS5wcm92aWRlcixpaW46ZS5paW4sbGFzdDQ6ZS5sYXN0XzQsZXhwaXJ5TW9udGg6ZS5leHBpcnlfbW9udGgsZXhwaXJ5WWVhcjplLmV4cGlyeV95ZWFyLGJyYW5kOmUuYnJhbmQsdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczplLnRydXN0ZWRfc2hpcHBpbmdfYWRkcmVzcyx1bnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25Nb2RlOmUudW50cnVzdGVkX3NoaXBwaW5nX2FkZHJlc3NfY2FyZF92ZXJpZmljYXRpb25fbW9kZSxtZXRob2Q6ZS5tZXRob2QsdHlwZTpcImNhcmRcIn19KGUpKX1faXNQYXlQYWxJbnN0cnVtZW50KGUpe3JldHVyblwicGF5cGFsXCI9PT1lLm1ldGhvZF90eXBlfV9pc0JhbmtJbnN0cnVtZW50KGUpe3JldHVyblwiYmFua1wiPT09ZS5tZXRob2RfdHlwZX1fdHJhbnNmb3JtUmVzcG9uc2UoZSl7Y29uc3R7ZGF0YTp0fT1lLG49UmcoZSxbXCJkYXRhXCJdKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG4pLHtib2R5OnR9KX19Y2xhc3MgQmd7Y29uc3RydWN0b3IoZSx0KXt0aGlzLl9jbGllbnQ9ZSx0aGlzLl9yZXF1ZXN0U2VuZGVyPXQsdGhpcy5fdHJhbnNmb3JtZXI9bmV3IExnfWdldFZhdWx0QWNjZXNzVG9rZW4oe3RpbWVvdXQ6ZX09e30pe3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLmdldChcIi9pbnRlcm5hbGFwaS92MS9jaGVja291dC9wYXltZW50cy92YXVsdC1hY2Nlc3MtdG9rZW5cIix7dGltZW91dDplfSkudGhlbihlPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse2JvZHk6e3ZhdWx0QWNjZXNzVG9rZW46ZS5ib2R5LmRhdGEudG9rZW4sdmF1bHRBY2Nlc3NFeHBpcnk6ZS5ib2R5LmRhdGEuZXhwaXJlc19hdH19KSl9bG9hZEluc3RydW1lbnRzKGUsdCl7cmV0dXJuIHQ/dGhpcy5fbG9hZEluc3RydW1lbnRzV2l0aEFkZHJlc3MoZSx0KTp0aGlzLl9sb2FkSW5zdHJ1bWVudHMoZSl9ZGVsZXRlSW5zdHJ1bWVudChlLHQpe2NvbnN0IG49T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtpbnN0cnVtZW50SWQ6dH0pO3JldHVybiBuZXcgUHJvbWlzZSgoZSx0KT0+e3RoaXMuX2NsaWVudC5kZWxldGVTaG9wcGVySW5zdHJ1bWVudChuLChuLGkpPT5uP3QodGhpcy5fdHJhbnNmb3JtZXIudHJhbnNmb3JtRXJyb3JSZXNwb25zZShuKSk6ZSh0aGlzLl90cmFuc2Zvcm1lci50cmFuc2Zvcm1SZXNwb25zZShpKSkpfSl9X2xvYWRJbnN0cnVtZW50cyhlKXtyZXR1cm4gbmV3IFByb21pc2UoKHQsbik9Pnt0aGlzLl9jbGllbnQubG9hZEluc3RydW1lbnRzKGUsKGUsaSk9PmU/bih0aGlzLl90cmFuc2Zvcm1lci50cmFuc2Zvcm1FcnJvclJlc3BvbnNlKGUpKTp0KHRoaXMuX3RyYW5zZm9ybWVyLnRyYW5zZm9ybVJlc3BvbnNlKGkpKSl9KX1fbG9hZEluc3RydW1lbnRzV2l0aEFkZHJlc3MoZSx0KXtjb25zdCBuPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7c2hpcHBpbmdBZGRyZXNzOkFycmF5LmlzQXJyYXkodCk/dC5tYXAoZT0+am0oZSkpOmptKHQpfSk7cmV0dXJuIG5ldyBQcm9taXNlKChlLHQpPT57dGhpcy5fY2xpZW50LmxvYWRJbnN0cnVtZW50c1dpdGhBZGRyZXNzKG4sKG4saSk9Pm4/dCh0aGlzLl90cmFuc2Zvcm1lci50cmFuc2Zvcm1FcnJvclJlc3BvbnNlKG4pKTplKHRoaXMuX3RyYW5zZm9ybWVyLnRyYW5zZm9ybVJlc3BvbnNlKGkpKSl9KX19IWZ1bmN0aW9uKGUpe2UuTG9hZFBpY2t1cE9wdGlvbnNSZXF1ZXN0ZWQ9XCJMT0FEX1BJQ0tVUF9PUFRJT05TX1JFUVVFU1RFRFwiLGUuTG9hZFBpY2t1cE9wdGlvbnNTdWNjZWVkZWQ9XCJMT0FEX1BJQ0tVUF9PUFRJT05TX1NVQ0NFRURFRFwiLGUuTG9hZFBpY2t1cE9wdGlvbnNGYWlsZWQ9XCJMT0FEX1BJQ0tVUF9PUFRJT05TX0ZBSUxFRFwifSh4Z3x8KHhnPXt9KSk7Y2xhc3Mgamd7Y29uc3RydWN0b3IoZSl7dGhpcy5fcGlja3VwT3B0aW9uUmVxdWVzdFNlbmRlcj1lfWxvYWRQaWNrdXBPcHRpb25zKGUpe3JldHVybiB0PT5uZXcgb2Uobj0+e2NvbnN0IGk9dGhpcy5faHlkcmF0ZUFwaVF1ZXJ5KHQsZSk7bi5uZXh0KGwoeGcuTG9hZFBpY2t1cE9wdGlvbnNSZXF1ZXN0ZWQpKSx0aGlzLl9waWNrdXBPcHRpb25SZXF1ZXN0U2VuZGVyLmZldGNoUGlja3VwT3B0aW9ucyhpKS50aGVuKHQ9PntuLm5leHQobCh4Zy5Mb2FkUGlja3VwT3B0aW9uc1N1Y2NlZWRlZCx0LmJvZHkucmVzdWx0cyxlKSksbi5jb21wbGV0ZSgpfSkuY2F0Y2goZT0+e24uZXJyb3IoaCh4Zy5Mb2FkUGlja3VwT3B0aW9uc0ZhaWxlZCxlKSl9KX0pfV9oeWRyYXRlQXBpUXVlcnkoZSx0KXtjb25zdCBuPWUuZ2V0U3RhdGUoKSxpPW4uY2FydC5nZXRDYXJ0T3JUaHJvdygpO2lmKCFpKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2FydCk7Y29uc3Qgcj1uLmNvbnNpZ25tZW50cy5nZXRDb25zaWdubWVudEJ5SWQodC5jb25zaWdubWVudElkKTtpZighcil0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NvbnNpZ25tZW50cyk7Y29uc3Qgbz1yLmxpbmVJdGVtSWRzLGE9aS5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5maWx0ZXIoZT0+UChvLGUuaWQpKS5tYXAoZT0+KHt2YXJpYW50SWQ6ZS52YXJpYW50SWQscXVhbnRpdHk6ZS5xdWFudGl0eX0pKTtyZXR1cm57c2VhcmNoQXJlYTp0LnNlYXJjaEFyZWEsaXRlbXM6YX19fWNsYXNzIFVne2NvbnN0cnVjdG9yKGUpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZX1mZXRjaFBpY2t1cE9wdGlvbnMoZSl7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdChcIi9hcGkvc3RvcmVmcm9udC9waWNrdXAtb3B0aW9uc1wiLHtoZWFkZXJzOk9iamVjdC5hc3NpZ24oe0FjY2VwdDppdC5Kc29ufSxydCksYm9keTplfSl9fSFmdW5jdGlvbihlKXtlLlVwZGF0ZUFkZHJlc3NGYWlsZWQ9XCJTSElQUElOR19TVFJBVEVHWV9VUERBVEVfQUREUkVTU19GQUlMRURcIixlLlVwZGF0ZUFkZHJlc3NSZXF1ZXN0ZWQ9XCJTSElQUElOR19TVFJBVEVHWV9VUERBVEVfQUREUkVTU19SRVFVRVNURURcIixlLlVwZGF0ZUFkZHJlc3NTdWNjZWVkZWQ9XCJTSElQUElOR19TVFJBVEVHWV9VUERBVEVfQUREUkVTU19TVUNDRUVERURcIixlLlNlbGVjdE9wdGlvbkZhaWxlZD1cIlNISVBQSU5HX1NUUkFURUdZX1NFTEVDVF9PUFRJT05fRkFJTEVEXCIsZS5TZWxlY3RPcHRpb25SZXF1ZXN0ZWQ9XCJTSElQUElOR19TVFJBVEVHWV9TRUxFQ1RfT1BUSU9OX1JFUVVFU1RFRFwiLGUuU2VsZWN0T3B0aW9uU3VjY2VlZGVkPVwiU0hJUFBJTkdfU1RSQVRFR1lfU0VMRUNUX09QVElPTl9TVUNDRUVERURcIixlLkluaXRpYWxpemVGYWlsZWQ9XCJTSElQUElOR19TVFJBVEVHWV9JTklUSUFMSVpFX0ZBSUxFRFwiLGUuSW5pdGlhbGl6ZVJlcXVlc3RlZD1cIlNISVBQSU5HX1NUUkFURUdZX0lOSVRJQUxJWkVfUkVRVUVTVEVEXCIsZS5Jbml0aWFsaXplU3VjY2VlZGVkPVwiU0hJUFBJTkdfU1RSQVRFR1lfSU5JVElBTElaRV9TVUNDRUVERURcIixlLkRlaW5pdGlhbGl6ZUZhaWxlZD1cIlNISVBQSU5HX1NUUkFURUdZX0RFSU5JVElBTElaRV9GQUlMRURcIixlLkRlaW5pdGlhbGl6ZVJlcXVlc3RlZD1cIlNISVBQSU5HX1NUUkFURUdZX0RFSU5JVElBTElaRV9SRVFVRVNURURcIixlLkRlaW5pdGlhbGl6ZVN1Y2NlZWRlZD1cIlNISVBQSU5HX1NUUkFURUdZX0RFSU5JVElBTElaRV9TVUNDRUVERURcIixlLldpZGdldEludGVyYWN0aW9uU3RhcnRlZD1cIlNISVBQSU5HX1NUUkFURUdZX1dJREdFVF9JTlRFUkFDVElPTl9TVEFSVEVEXCIsZS5XaWRnZXRJbnRlcmFjdGlvbkZpbmlzaGVkPVwiU0hJUFBJTkdfU1RSQVRFR1lfV0lER0VUX0lOVEVSQUNUSU9OX0ZJTklTSEVEXCIsZS5XaWRnZXRJbnRlcmFjdGlvbkZhaWxlZD1cIlNISVBQSU5HX1NUUkFURUdZX1dJREdFVF9JTlRFUkFDVElPTl9GQUlMRURcIn0oRmd8fChGZz17fSkpO2NsYXNzIHFne2NvbnN0cnVjdG9yKGUpe3RoaXMuX3N0cmF0ZWd5UmVnaXN0cnk9ZX11cGRhdGVBZGRyZXNzKGUsdCl7cmV0dXJuIG49Pm9lLmNyZWF0ZShpPT57Y29uc3Qgcj1uLmdldFN0YXRlKCkucGF5bWVudC5nZXRQYXltZW50SWQoKSxvPXQmJnQubWV0aG9kSWR8fHImJnIucHJvdmlkZXJJZDtpLm5leHQobChGZy5VcGRhdGVBZGRyZXNzUmVxdWVzdGVkLHZvaWQgMCx7bWV0aG9kSWQ6b30pKSx0aGlzLl9zdHJhdGVneVJlZ2lzdHJ5LmdldChvKS51cGRhdGVBZGRyZXNzKGUsT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHttZXRob2RJZDpvfSkpLnRoZW4oKCk9PntpLm5leHQobChGZy5VcGRhdGVBZGRyZXNzU3VjY2VlZGVkLHZvaWQgMCx7bWV0aG9kSWQ6b30pKSxpLmNvbXBsZXRlKCl9KS5jYXRjaChlPT57aS5lcnJvcihoKEZnLlVwZGF0ZUFkZHJlc3NGYWlsZWQsZSx7bWV0aG9kSWQ6b30pKX0pfSl9c2VsZWN0T3B0aW9uKGUsdCl7cmV0dXJuIG49Pm9lLmNyZWF0ZShpPT57Y29uc3Qgcj1uLmdldFN0YXRlKCkucGF5bWVudC5nZXRQYXltZW50SWQoKSxvPXQmJnQubWV0aG9kSWR8fHImJnIucHJvdmlkZXJJZDtpLm5leHQobChGZy5TZWxlY3RPcHRpb25SZXF1ZXN0ZWQsdm9pZCAwLHttZXRob2RJZDpvfSkpLHRoaXMuX3N0cmF0ZWd5UmVnaXN0cnkuZ2V0KG8pLnNlbGVjdE9wdGlvbihlLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7bWV0aG9kSWQ6b30pKS50aGVuKCgpPT57aS5uZXh0KGwoRmcuU2VsZWN0T3B0aW9uU3VjY2VlZGVkLHZvaWQgMCx7bWV0aG9kSWQ6b30pKSxpLmNvbXBsZXRlKCl9KS5jYXRjaChlPT57aS5lcnJvcihoKEZnLlNlbGVjdE9wdGlvbkZhaWxlZCxlLHttZXRob2RJZDpvfSkpfSl9KX1pbml0aWFsaXplKGUpe3JldHVybiB0PT5vZS5jcmVhdGUobj0+e2NvbnN0IGk9dC5nZXRTdGF0ZSgpLHI9aS5wYXltZW50LmdldFBheW1lbnRJZCgpLG89ZSYmZS5tZXRob2RJZHx8ciYmci5wcm92aWRlcklkLGE9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHttZXRob2RJZDpvfSk7aWYobyYmaS5zaGlwcGluZ1N0cmF0ZWdpZXMuaXNJbml0aWFsaXplZChvKSlyZXR1cm4gbi5jb21wbGV0ZSgpO24ubmV4dChsKEZnLkluaXRpYWxpemVSZXF1ZXN0ZWQsdm9pZCAwLHttZXRob2RJZDpvfSkpLHRoaXMuX3N0cmF0ZWd5UmVnaXN0cnkuZ2V0KG8pLmluaXRpYWxpemUoYSkudGhlbigoKT0+e24ubmV4dChsKEZnLkluaXRpYWxpemVTdWNjZWVkZWQsdm9pZCAwLHttZXRob2RJZDpvfSkpLG4uY29tcGxldGUoKX0pLmNhdGNoKGU9PntuLmVycm9yKGgoRmcuSW5pdGlhbGl6ZUZhaWxlZCxlLHttZXRob2RJZDpvfSkpfSl9KX1kZWluaXRpYWxpemUoZSl7cmV0dXJuIHQ9Pm9lLmNyZWF0ZShuPT57Y29uc3QgaT10LmdldFN0YXRlKCkscj1pLnBheW1lbnQuZ2V0UGF5bWVudElkKCksbz1lJiZlLm1ldGhvZElkfHxyJiZyLnByb3ZpZGVySWQ7aWYobyYmIWkuc2hpcHBpbmdTdHJhdGVnaWVzLmlzSW5pdGlhbGl6ZWQobykpcmV0dXJuIG4uY29tcGxldGUoKTtuLm5leHQobChGZy5EZWluaXRpYWxpemVSZXF1ZXN0ZWQsdm9pZCAwLHttZXRob2RJZDpvfSkpLHRoaXMuX3N0cmF0ZWd5UmVnaXN0cnkuZ2V0KG8pLmRlaW5pdGlhbGl6ZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse21ldGhvZElkOm99KSkudGhlbigoKT0+e24ubmV4dChsKEZnLkRlaW5pdGlhbGl6ZVN1Y2NlZWRlZCx2b2lkIDAse21ldGhvZElkOm99KSksbi5jb21wbGV0ZSgpfSkuY2F0Y2goZT0+e24uZXJyb3IoaChGZy5EZWluaXRpYWxpemVGYWlsZWQsZSx7bWV0aG9kSWQ6b30pKX0pfSl9d2lkZ2V0SW50ZXJhY3Rpb24oZSx0KXtyZXR1cm4gb2UuY3JlYXRlKG49Pntjb25zdCBpPXttZXRob2RJZDp0JiZ0Lm1ldGhvZElkfTtuLm5leHQobChGZy5XaWRnZXRJbnRlcmFjdGlvblN0YXJ0ZWQsdm9pZCAwLGkpKSxlKCkudGhlbigoKT0+e24ubmV4dChsKEZnLldpZGdldEludGVyYWN0aW9uRmluaXNoZWQsdm9pZCAwLGkpKSxuLmNvbXBsZXRlKCl9KS5jYXRjaChlPT57bi5lcnJvcihoKEZnLldpZGdldEludGVyYWN0aW9uRmFpbGVkLGUsaSkpfSl9KX19dmFyIFZnPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIEdne2NvbnN0cnVjdG9yKGUsdD13aW5kb3cpe3RoaXMuX3NjcmlwdExvYWRlcj1lLHRoaXMuX3dpbmRvdz10fWdldFN0cmlwZUNsaWVudChlLHQsbil7cmV0dXJuIFZnKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtsZXQgaT10aGlzLl93aW5kb3cuYmNTdHJpcGVDbGllbnQ7cmV0dXJuIGl8fChpPSh5aWVsZCB0aGlzLmxvYWQoKSkoZSx7c3RyaXBlQWNjb3VudDp0LGxvY2FsZTpuLGJldGFzOltcInBheW1lbnRfZWxlbWVudF9iZXRhXzJcIixcImFsaXBheV9wbV9iZXRhXzFcIixcImxpbmtfZGVmYXVsdF9pbnRlZ3JhdGlvbl9iZXRhXzFcIixcInNoaXBwaW5nX2FkZHJlc3NfZWxlbWVudF9iZXRhXzFcIixcImFkZHJlc3NfZWxlbWVudF9iZXRhXzFcIl0sYXBpVmVyc2lvbjpcIjIwMjAtMDMtMDI7YWxpcGF5X2JldGE9djE7bGlua19iZXRhPXYxXCJ9KSxPYmplY3QuYXNzaWduKHRoaXMuX3dpbmRvdyx7YmNTdHJpcGVDbGllbnQ6aX0pKSxpfSl9Z2V0RWxlbWVudHMoZSx0KXtsZXQgbj10aGlzLl93aW5kb3cuYmNTdHJpcGVFbGVtZW50cztyZXR1cm4gbj8obi5mZXRjaFVwZGF0ZXMoKSxuLnVwZGF0ZSh0KSk6KG49ZS5lbGVtZW50cyh0KSxPYmplY3QuYXNzaWduKHRoaXMuX3dpbmRvdyx7YmNTdHJpcGVFbGVtZW50czpufSkpLG59bG9hZCgpe3JldHVybiBWZyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoeWllbGQgdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoXCJodHRwczovL2pzLnN0cmlwZS5jb20vdjMvXCIpLCF0aGlzLl93aW5kb3cuU3RyaXBlKXRocm93IG5ldyBscztyZXR1cm4gdGhpcy5fd2luZG93LlN0cmlwZX0pfX12YXIgSGcsJGc9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgV2d7Y29uc3RydWN0b3IoZSx0LG4saSxyKXt0aGlzLl9zdG9yZT1lLHRoaXMuX2NvbnNpZ25tZW50QWN0aW9uQ3JlYXRvcj10LHRoaXMuX3BheW1lbnRNZXRob2RBY3Rpb25DcmVhdG9yPW4sdGhpcy5fYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yPWksdGhpcy5fc2hpcHBpbmdTdHJhdGVneUFjdGlvbkNyZWF0b3I9cn11cGRhdGVBZGRyZXNzKGUsdCl7Y29uc3Qgbj10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLnNoaXBwaW5nQWRkcmVzcy5nZXRTaGlwcGluZ0FkZHJlc3MoKTtpZighbil0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyk7Y29uc3QgaT1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbikse2N1c3RvbUZpZWxkczplLmN1c3RvbUZpZWxkc30pO3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9jb25zaWdubWVudEFjdGlvbkNyZWF0b3IudXBkYXRlQWRkcmVzcyhpLHQpKX1zZWxlY3RPcHRpb24oZSx0KXtyZXR1cm4gdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fY29uc2lnbm1lbnRBY3Rpb25DcmVhdG9yLnNlbGVjdFNoaXBwaW5nT3B0aW9uKGUsdCkpfWluaXRpYWxpemUoZSl7cmV0dXJuICRnKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHthbWF6b25wYXk6dCxtZXRob2RJZDpufT1lO2lmKCF0fHwhbil0aHJvdyBuZXcgRnQoJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJvcHRpb25zLmFtYXpvbnBheVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdCBpPSh5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50TWV0aG9kQWN0aW9uQ3JlYXRvci5sb2FkUGF5bWVudE1ldGhvZChuKSkpLnBheW1lbnRNZXRob2RzLmdldFBheW1lbnRNZXRob2RPclRocm93KG4pO3lpZWxkIHRoaXMuX2FtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5pbml0aWFsaXplKGkpO2NvbnN0e3BheW1lbnRUb2tlbjpyLHJlZ2lvbjpvfT1pLmluaXRpYWxpemF0aW9uRGF0YSxhPXQuZWRpdEFkZHJlc3NCdXR0b25JZDtpZihyJiZhKXtjb25zdCBlPXRoaXMuX3Nob3VsZFNob3dMb2FkaW5nU3Bpbm5lcihvKTt0aGlzLl9iaW5kRWRpdEJ1dHRvbihhLHIsXCJjaGFuZ2VBZGRyZXNzXCIsZSl9cmV0dXJuIHRoaXMuX3N0b3JlLmdldFN0YXRlKCl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gJGcodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IuZGVpbml0aWFsaXplKCksUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3N0b3JlLmdldFN0YXRlKCkpfSl9X2JpbmRFZGl0QnV0dG9uKGUsdCxuLGkpe2NvbnN0IHI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSk7aWYociYmci5wYXJlbnROb2RlKXtpZihpKXtjb25zdCBlPXIuY2xvbmVOb2RlKCEwKTtyLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGUsciksZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKT0+dGhpcy5fc2hvd0xvYWRpbmdTcGlubmVyKCkpfXRoaXMuX2FtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5iaW5kQnV0dG9uKGUsdCxuKX19X3Nob3dMb2FkaW5nU3Bpbm5lcigpe3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9zaGlwcGluZ1N0cmF0ZWd5QWN0aW9uQ3JlYXRvci53aWRnZXRJbnRlcmFjdGlvbigoKT0+bmV3IFByb21pc2UocGUpKSx7cXVldWVJZDpcIndpZGdldEludGVyYWN0aW9uXCJ9KX1fc2hvdWxkU2hvd0xvYWRpbmdTcGlubmVyKGUpe3JldHVyblwidXNcIiE9PWV9fSFmdW5jdGlvbihlKXtlLkNWVj1cImN2dlwiLGUuUEFOPVwicGFuXCJ9KEhnfHwoSGc9e30pKTt2YXIgWWc9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgS2d7Y29uc3RydWN0b3IoZSx0LG4saSxyLG8pe3RoaXMuX3N0b3JlPWUsdGhpcy5fYmlsbGluZ0FkZHJlc3NBY3Rpb25DcmVhdG9yPXQsdGhpcy5fY29uc2lnbm1lbnRBY3Rpb25DcmVhdG9yPW4sdGhpcy5fcGF5bWVudE1ldGhvZEFjdGlvbkNyZWF0b3I9aSx0aGlzLl9wYXltZW50UHJvdmlkZXJDdXN0b21lckFjdGlvbkNyZWF0b3I9cix0aGlzLl9icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2U9b311cGRhdGVBZGRyZXNzKGUsdCl7cmV0dXJuIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2NvbnNpZ25tZW50QWN0aW9uQ3JlYXRvci51cGRhdGVBZGRyZXNzKGUsdCkpfXNlbGVjdE9wdGlvbihlLHQpe3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9jb25zaWdubWVudEFjdGlvbkNyZWF0b3Iuc2VsZWN0U2hpcHBpbmdPcHRpb24oZSx0KSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKX1pbml0aWFsaXplKGUpe3ZhciB0O3JldHVybiBZZyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bWV0aG9kSWQ6bixicmFpbnRyZWVmYXN0bGFuZTppfT1lfHx7fSx7b25QYXlQYWxGYXN0bGFuZUFkZHJlc3NDaGFuZ2U6cn09aXx8e307aWYoIW4pdGhyb3cgbmV3IEZ0KCdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7Y29uc3Qgbz10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpO2lmKCFvLmN1c3RvbWVyLmdldEN1c3RvbWVyT3JUaHJvdygpLmlzR3Vlc3QpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKTt0cnl7aWYodGhpcy5fc2hvdWxkUnVuQXV0aGVudGljYXRpb25GbG93KCkpe2NvbnN0IGU9by5wYXltZW50TWV0aG9kcy5nZXRQYXltZW50TWV0aG9kKG4pLHtjbGllbnRUb2tlbjpyLGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZDphfT0obnVsbD09ZT92b2lkIDA6ZS5pbml0aWFsaXphdGlvbkRhdGEpfHx7fTtyfHwoeWllbGQgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fcGF5bWVudE1ldGhvZEFjdGlvbkNyZWF0b3IubG9hZFBheW1lbnRNZXRob2QobikpKTtjb25zdCBzPXByKGE/bnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5mYXN0bGFuZVN0eWxlczp2b2lkIDAsbnVsbD09aT92b2lkIDA6aS5zdHlsZXMpO3lpZWxkIHRoaXMuX3J1bkF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobixzKX1cImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYoeWllbGQgdGhpcy5fc2hvdWxkVXNlQnJhaW50cmVlRmFzdGxhbmVTaGlwcGluZ0NvbXBvbmVudChuKSkmJnIoKCk9PnRoaXMuX2hhbmRsZUJyYWludHJlZUZhc3RsYW5lU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKCkpfWNhdGNoKGUpe31yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3N0b3JlLmdldFN0YXRlKCkpfSl9X3Nob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdygpe3ZhciBlO2NvbnN0IHQ9dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSxuPW51bGw9PT0oZT10LmNhcnQuZ2V0Q2FydCgpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pZCxpPUlpLmdldChcImJjLWZhc3RsYW5lLXNlc3Npb25JZFwiKXx8XCJcIixyPXQucGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoKSxvPWZsKHIpP3I6e307cmV0dXJuKG51bGw9PW8/dm9pZCAwOm8uYXV0aGVudGljYXRpb25TdGF0ZSkhPT1mbi5DQU5DRUxFRCYmIShudWxsPT1vP3ZvaWQgMDpvLmF1dGhlbnRpY2F0aW9uU3RhdGUpJiZpPT09bn1fcnVuQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhlLHQpe3ZhciBuLGk7cmV0dXJuIFlnKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCByPXRoaXMuX3N0b3JlLmdldFN0YXRlKCksbz1yLmNhcnQuZ2V0Q2FydE9yVGhyb3coKSxhPXIuY291bnRyaWVzLmdldENvdW50cmllcygpfHxbXSxzPXIucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZSkse2NsaWVudFRva2VuOmQsY29uZmlnOmN9PXM7aWYoIWQpdGhyb3cgbmV3IFFlKFdlLk1pc3NpbmdQYXltZW50TWV0aG9kKTt0aGlzLl9icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZShkKTtjb25zdCBsPXlpZWxkIHRoaXMuX2JyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXRCcmFpbnRyZWVGYXN0bGFuZShudWxsPT1vP3ZvaWQgMDpvLmlkLG51bGw9PWM/dm9pZCAwOmMudGVzdE1vZGUsdCksdT0obnVsbD09PShuPXIuY3VzdG9tZXIuZ2V0Q3VzdG9tZXIoKSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZW1haWwpfHwobnVsbD09PShpPXIuYmlsbGluZ0FkZHJlc3MuZ2V0QmlsbGluZ0FkZHJlc3MoKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZW1haWwpO2lmKCF1KXJldHVybjtjb25zdHtsb29rdXBDdXN0b21lckJ5RW1haWw6aCx0cmlnZ2VyQXV0aGVudGljYXRpb25GbG93OnB9PWwuaWRlbnRpdHkse2N1c3RvbWVyQ29udGV4dElkOm19PXlpZWxkIGgodSk7aWYoIW0pcmV0dXJuO2NvbnN0e2F1dGhlbnRpY2F0aW9uU3RhdGU6eSxwcm9maWxlRGF0YTpnfT15aWVsZCBwKG0pO2lmKHk9PT1mbi5DQU5DRUxFRClyZXR1cm4geWllbGQgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJBY3Rpb25DcmVhdG9yLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHthdXRoZW50aWNhdGlvblN0YXRlOnksYWRkcmVzc2VzOltdLGluc3RydW1lbnRzOltdfSkpLHZvaWQgSWkucmVtb3ZlKFwiYmMtZmFzdGxhbmUtc2Vzc2lvbklkXCIpO2NvbnN0IHY9dGhpcy5fZ2V0UGF5UGFsQmlsbGluZ0FkZHJlc3MoZyksZj1nLnNoaXBwaW5nQWRkcmVzcyxTPWcuc2hpcHBpbmdBZGRyZXNzLnBob25lTnVtYmVyLF89dGhpcy5fbWFwUGF5UGFsVG9CY0FkZHJlc3MoZixhLFMpLHc9dGhpcy5fbWFwUGF5UGFsVG9CY0FkZHJlc3ModixhLFMpO2lmKHcmJl8pe2NvbnN0IHQ9dGhpcy5fbWVyZ2VTaGlwcGluZ0FuZEJpbGxpbmdBZGRyZXNzZXMoXyx3KSxuPXRoaXMuX21hcFBheVBhbFRvQmNJbnN0cnVtZW50KGUsZy5jYXJkKSxpPW4/W25dOltdO3lpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3BheW1lbnRQcm92aWRlckN1c3RvbWVyQWN0aW9uQ3JlYXRvci51cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcih7YXV0aGVudGljYXRpb25TdGF0ZTp5LGFkZHJlc3Nlczp0LGluc3RydW1lbnRzOml9KSksdyYmKHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2JpbGxpbmdBZGRyZXNzQWN0aW9uQ3JlYXRvci51cGRhdGVBZGRyZXNzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx3KSx7aWQ6U3RyaW5nKHcuaWQpfSkpKSksXyYmby5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGg+MCYmKHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2NvbnNpZ25tZW50QWN0aW9uQ3JlYXRvci51cGRhdGVBZGRyZXNzKF8pKSl9fSl9X2dldFBheVBhbEJpbGxpbmdBZGRyZXNzKGUpe2NvbnN0e25hbWU6dCxjYXJkOm59PWUsaT1uLnBheW1lbnRTb3VyY2UuY2FyZC5iaWxsaW5nQWRkcmVzcztyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGkpLHtmaXJzdE5hbWU6aS5maXJzdE5hbWV8fChudWxsPT10P3ZvaWQgMDp0LmZpcnN0TmFtZSksbGFzdE5hbWU6aS5sYXN0TmFtZXx8KG51bGw9PXQ/dm9pZCAwOnQubGFzdE5hbWUpfSl9X2dldENvdW50cnlOYW1lQnlDb3VudHJ5Q29kZShlLHQpe2NvbnN0IG49dC5maW5kKHQ9PnQuY29kZT09PWUpO3JldHVybihudWxsPT1uP3ZvaWQgMDpuLm5hbWUpfHxcIlwifV9tYXBQYXlQYWxUb0JjQWRkcmVzcyhlLHQsbixpKXtyZXR1cm57aWQ6TnVtYmVyKERhdGUubm93KCkpLHR5cGU6XCJwYXlwYWwtYWRkcmVzc1wiLGZpcnN0TmFtZTplLmZpcnN0TmFtZXx8XCJcIixsYXN0TmFtZTplLmxhc3ROYW1lfHxcIlwiLGNvbXBhbnk6ZS5jb21wYW55fHxcIlwiLGFkZHJlc3MxOmUuc3RyZWV0QWRkcmVzcyxhZGRyZXNzMjplLmV4dGVuZGVkQWRkcmVzc3x8XCJcIixjaXR5OmUubG9jYWxpdHksc3RhdGVPclByb3ZpbmNlOmUucmVnaW9uLHN0YXRlT3JQcm92aW5jZUNvZGU6ZS5yZWdpb24sY291bnRyeTp0aGlzLl9nZXRDb3VudHJ5TmFtZUJ5Q291bnRyeUNvZGUoZS5jb3VudHJ5Q29kZUFscGhhMix0KSxjb3VudHJ5Q29kZTplLmNvdW50cnlDb2RlQWxwaGEyLHBvc3RhbENvZGU6ZS5wb3N0YWxDb2RlLHBob25lOm58fFwiXCIsY3VzdG9tRmllbGRzOml8fFtdfX1fbm9ybWFsaXplQWRkcmVzcyhlKXtyZXR1cm4gRyhlLFtcImlkXCJdKX1fbWVyZ2VTaGlwcGluZ0FuZEJpbGxpbmdBZGRyZXNzZXMoZSx0KXtyZXR1cm4gQSh0aGlzLl9ub3JtYWxpemVBZGRyZXNzKGUpLHRoaXMuX25vcm1hbGl6ZUFkZHJlc3ModCkpP1tlXTpbZSx0XX1fbWFwUGF5UGFsVG9CY0luc3RydW1lbnQoZSx0KXtpZighdClyZXR1cm47Y29uc3R7aWQ6bixwYXltZW50U291cmNlOml9PXQse2JyYW5kOnIsZXhwaXJ5Om8sbGFzdERpZ2l0czphfT1pLmNhcmQsW3MsZF09by5zcGxpdChcIi1cIik7cmV0dXJue2JpZ3BheVRva2VuOm4sYnJhbmQ6cixkZWZhdWx0SW5zdHJ1bWVudDohMSxleHBpcnlNb250aDpkLGV4cGlyeVllYXI6cyxpaW46XCJcIixsYXN0NDphLG1ldGhvZDplLHByb3ZpZGVyOmUsdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczohMSx1bnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25Nb2RlOkhnLkNWVix0eXBlOlwiY2FyZFwifX1faGFuZGxlQnJhaW50cmVlRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3NDaGFuZ2UoKXt2YXIgZTtyZXR1cm4gWWcodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKS5jb3VudHJpZXMuZ2V0Q291bnRyaWVzKCl8fFtdLG49eWllbGQgdGhpcy5fYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJyYWludHJlZUZhc3RsYW5lKCkse3NlbGVjdGlvbkNoYW5nZWQ6aSxzZWxlY3RlZEFkZHJlc3M6cn09eWllbGQgbi5wcm9maWxlLnNob3dTaGlwcGluZ0FkZHJlc3NTZWxlY3RvcigpO2lmKGkpe2NvbnN0IG49dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSxpPW4uc2hpcHBpbmdBZGRyZXNzLmdldFNoaXBwaW5nQWRkcmVzc2VzT3JUaHJvdygpLG89bi5wYXltZW50UHJvdmlkZXJDdXN0b21lci5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lcigpLGE9Zmwobyk/bzp7fSxzPXRoaXMuX21hcFBheVBhbFRvQmNBZGRyZXNzKHIsdCxyLnBob25lTnVtYmVyLG51bGw9PT0oZT1pWzBdKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jdXN0b21GaWVsZHMpO2lmKHMpe2NvbnN0IGU9dGhpcy5fZmlsdGVyQWRkcmVzc2VzKFtzLC4uLmEuYWRkcmVzc2VzfHxbXV0pO3JldHVybiB5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50UHJvdmlkZXJDdXN0b21lckFjdGlvbkNyZWF0b3IudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGEpLHthZGRyZXNzZXM6ZX0pKSkseWllbGQgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fY29uc2lnbm1lbnRBY3Rpb25DcmVhdG9yLnVwZGF0ZUFkZHJlc3MocykpLHN9fX0pfV9maWx0ZXJBZGRyZXNzZXMoZSl7cmV0dXJuIGUucmVkdWNlKChlLHQpPT50P2Uuc29tZShlPT50aGlzLl9pc0VxdWFsQWRkcmVzc2VzKGUsdCkpP2U6Wy4uLmUsdF06ZSxbXSl9X2lzRXF1YWxBZGRyZXNzZXMoZSx0KXtyZXR1cm4gQSh0aGlzLl9ub3JtYWxpemVBZGRyZXNzKGUpLHRoaXMuX25vcm1hbGl6ZUFkZHJlc3ModCkpfV9zaG91bGRVc2VCcmFpbnRyZWVGYXN0bGFuZVNoaXBwaW5nQ29tcG9uZW50KGUpe3ZhciB0O3JldHVybiBZZyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLnBheW1lbnRQcm92aWRlckN1c3RvbWVyLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCksaT1mbChuKT9uOnt9O2lmKGkmJmkhPT1mbi5DQU5DRUxFRCl7Y29uc3Qgbj15aWVsZCB0aGlzLl9nZXRCcmFpbnRyZWVQYXltZW50TWV0aG9kT3JUaHJvdyhlKTtyZXR1cm4hIShudWxsPT09KHQ9bnVsbD09bj92b2lkIDA6bi5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlzRmFzdGxhbmVFbmFibGVkKX1yZXR1cm4hMX0pfV9nZXRCcmFpbnRyZWVQYXltZW50TWV0aG9kT3JUaHJvdyhlKXtyZXR1cm4gWWcodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKS5wYXltZW50TWV0aG9kcy5nZXRQYXltZW50TWV0aG9kKGUpO3JldHVybiB0fHwoeWllbGQgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fcGF5bWVudE1ldGhvZEFjdGlvbkNyZWF0b3IubG9hZFBheW1lbnRNZXRob2QoZSkpKS5wYXltZW50TWV0aG9kcy5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKX0pfX1jbGFzcyBKZ3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX3N0b3JlPWUsdGhpcy5fY29uc2lnbm1lbnRBY3Rpb25DcmVhdG9yPXR9dXBkYXRlQWRkcmVzcyhlLHQpe3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9jb25zaWdubWVudEFjdGlvbkNyZWF0b3IudXBkYXRlQWRkcmVzcyhlLHQpKX1zZWxlY3RPcHRpb24oZSx0KXtyZXR1cm4gdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fY29uc2lnbm1lbnRBY3Rpb25DcmVhdG9yLnNlbGVjdFNoaXBwaW5nT3B0aW9uKGUsdCkpfWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3N0b3JlLmdldFN0YXRlKCkpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSl9fXZhciBaZyxRZyxYZyxldix0dixudixpdj1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBydntjb25zdHJ1Y3RvcihlLHQsbixpLHIsbyxhKXt0aGlzLl9zdG9yZT1lLHRoaXMuX2JpbGxpbmdBZGRyZXNzQWN0aW9uQ3JlYXRvcj10LHRoaXMuX2NvbnNpZ25tZW50QWN0aW9uQ3JlYXRvcj1uLHRoaXMuX3BheW1lbnRNZXRob2RBY3Rpb25DcmVhdG9yPWksdGhpcy5fcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJBY3Rpb25DcmVhdG9yPXIsdGhpcy5fcGF5cGFsQ29tbWVyY2VTZGs9byx0aGlzLl9wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHM9YX11cGRhdGVBZGRyZXNzKGUsdCl7cmV0dXJuIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2NvbnNpZ25tZW50QWN0aW9uQ3JlYXRvci51cGRhdGVBZGRyZXNzKGUsdCkpfXNlbGVjdE9wdGlvbihlLHQpe3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9jb25zaWdubWVudEFjdGlvbkNyZWF0b3Iuc2VsZWN0U2hpcHBpbmdPcHRpb24oZSx0KSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKX1pbml0aWFsaXplKGUpe3JldHVybiBpdih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bWV0aG9kSWQ6dCxwYXlwYWxjb21tZXJjZWZhc3RsYW5lOm59PWV8fHt9LHtvblBheVBhbEZhc3RsYW5lQWRkcmVzc0NoYW5nZTppLHN0eWxlczpyfT1ufHx7fTtpZighdCl0aHJvdyBuZXcgRnQoJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdCBvPXRoaXMuX3N0b3JlLmdldFN0YXRlKCkuY3VzdG9tZXIuZ2V0Q3VzdG9tZXJPclRocm93KCk7aWYoIShudWxsPT1vP3ZvaWQgMDpvLmlzR3Vlc3QpKXJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSk7dHJ5e3RoaXMuX3Nob3VsZEF1dGhlbnRpY2F0ZVVzZXJXaXRoRmFzdGxhbmUoKSYmKHlpZWxkIHRoaXMuX2luaXRpYWxpemVQYXlQYWxTZGsodCxyKSx5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGVVc2VyV2l0aEZhc3RsYW5lT3RwKHQpKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiZ0aGlzLl9zaG91bGRVc2VQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQ29tcG9uZW50KCkmJih5aWVsZCB0aGlzLl9pbml0aWFsaXplUGF5UGFsU2RrKHQsciksaSgoKT0+dGhpcy5faGFuZGxlUGF5UGFsU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKCkpKX1jYXRjaChlKXt9cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKX0pfV9nZXRQYXlQYWxQYXltZW50TWV0aG9kT3JUaHJvdyhlKXtyZXR1cm4gaXYodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKS5wYXltZW50TWV0aG9kcy5nZXRQYXltZW50TWV0aG9kKGUpO3JldHVybiB0fHwoeWllbGQgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fcGF5bWVudE1ldGhvZEFjdGlvbkNyZWF0b3IubG9hZFBheW1lbnRNZXRob2QoZSkpKS5wYXltZW50TWV0aG9kcy5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKX0pfV9nZXRQYXlQYWxDdXN0b21lckF1dGhlbnRpY2F0aW9uU3RhdGUoKXtjb25zdCBlPXRoaXMuX3N0b3JlLmdldFN0YXRlKCkucGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJPclRocm93KCk7cmV0dXJuKEhoKGUpP2U6e30pLmF1dGhlbnRpY2F0aW9uU3RhdGV9X3Nob3VsZEF1dGhlbnRpY2F0ZVVzZXJXaXRoRmFzdGxhbmUoKXtjb25zdCBlPXRoaXMuX3N0b3JlLmdldFN0YXRlKCkuY2FydC5nZXRDYXJ0T3JUaHJvdygpLHQ9dGhpcy5fcGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLmdldFN0b3JhZ2VTZXNzaW9uSWQoKTtyZXR1cm4hdGhpcy5fZ2V0UGF5UGFsQ3VzdG9tZXJBdXRoZW50aWNhdGlvblN0YXRlKCkmJnQ9PT1lLmlkfV9zaG91bGRVc2VQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQ29tcG9uZW50KCl7Y29uc3QgZT10aGlzLl9nZXRQYXlQYWxDdXN0b21lckF1dGhlbnRpY2F0aW9uU3RhdGUoKTtyZXR1cm4hIWUmJmUhPT11YS5DQU5DRUxFRH1faW5pdGlhbGl6ZVBheVBhbFNkayhlLHQpe3ZhciBuO3JldHVybiBpdih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLmNhcnQuZ2V0Q2FydE9yVGhyb3coKSxyPXlpZWxkIHRoaXMuX2dldFBheVBhbFBheW1lbnRNZXRob2RPclRocm93KGUpLHtpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlOm8saXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkOmF9PShudWxsPT1yP3ZvaWQgMDpyLmluaXRpYWxpemF0aW9uRGF0YSl8fHt9LHM9ISFvLGQ9Z2EoYT9udWxsPT09KG49bnVsbD09cj92b2lkIDA6ci5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmZhc3RsYW5lU3R5bGVzOnt9LHQpLGM9eWllbGQgdGhpcy5fcGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsRmFzdGxhbmVTZGsocixpLmN1cnJlbmN5LmNvZGUsaS5pZCk7eWllbGQgdGhpcy5fcGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShjLHMsZCl9KX1fYXV0aGVudGljYXRlVXNlcldpdGhGYXN0bGFuZU90cChlKXt2YXIgdCxuO3JldHVybiBpdih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLHI9aS5jYXJ0LmdldENhcnRPclRocm93KCksbz1udWxsPT09KHQ9aS5jdXN0b21lci5nZXRDdXN0b21lcigpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5lbWFpbCxhPW51bGw9PT0obj1pLmJpbGxpbmdBZGRyZXNzLmdldEJpbGxpbmdBZGRyZXNzKCkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmVtYWlsLHM9b3x8YXx8XCJcIix7Y3VzdG9tZXJDb250ZXh0SWQ6ZH09eWllbGQgdGhpcy5fcGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLmxvb2t1cEN1c3RvbWVyT3JUaHJvdyhzKSxjPXlpZWxkIHRoaXMuX3BheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy50cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhkKSx7YXV0aGVudGljYXRpb25TdGF0ZTpsLGFkZHJlc3Nlczp1LGJpbGxpbmdBZGRyZXNzOmgsc2hpcHBpbmdBZGRyZXNzOnAsaW5zdHJ1bWVudHM6bX09dGhpcy5fcGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLm1hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEoZSxjKTt5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9wYXltZW50UHJvdmlkZXJDdXN0b21lckFjdGlvbkNyZWF0b3IudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe2F1dGhlbnRpY2F0aW9uU3RhdGU6bCxhZGRyZXNzZXM6dSxpbnN0cnVtZW50czptfSkpLGMuYXV0aGVudGljYXRpb25TdGF0ZT09PXVhLkNBTkNFTEVEP3RoaXMuX3BheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5yZW1vdmVTdG9yYWdlU2Vzc2lvbklkKCk6dGhpcy5fcGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLnVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQoci5pZCksaCYmKHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2JpbGxpbmdBZGRyZXNzQWN0aW9uQ3JlYXRvci51cGRhdGVBZGRyZXNzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxoKSx7aWQ6U3RyaW5nKGguaWQpfSkpKSkscCYmci5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGg+MCYmKHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2NvbnNpZ25tZW50QWN0aW9uQ3JlYXRvci51cGRhdGVBZGRyZXNzKHApKSl9KX1faGFuZGxlUGF5UGFsU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKCl7dmFyIGU7cmV0dXJuIGl2KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuX3BheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKSx7c2VsZWN0aW9uQ2hhbmdlZDpuLHNlbGVjdGVkQWRkcmVzczppfT15aWVsZCB0LnByb2ZpbGUuc2hvd1NoaXBwaW5nQWRkcmVzc1NlbGVjdG9yKCk7aWYobil7Y29uc3QgdD10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLG49dC5zaGlwcGluZ0FkZHJlc3MuZ2V0U2hpcHBpbmdBZGRyZXNzZXNPclRocm93KCkscj10LnBheW1lbnRQcm92aWRlckN1c3RvbWVyLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCksbz1RaChyKT9yOnt9LGE9dGhpcy5fcGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLm1hcFBheVBhbFRvQmNBZGRyZXNzKGkuYWRkcmVzcyxpLm5hbWUsaS5waG9uZU51bWJlcixudWxsPT09KGU9blswXSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuY3VzdG9tRmllbGRzKSxzPXRoaXMuX3BheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5maWx0ZXJBZGRyZXNzZXMoW2EsLi4uby5hZGRyZXNzZXN8fFtdXSk7cmV0dXJuIHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3BheW1lbnRQcm92aWRlckN1c3RvbWVyQWN0aW9uQ3JlYXRvci51cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbykse2FkZHJlc3NlczpzfSkpKSx5aWVsZCB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9jb25zaWdubWVudEFjdGlvbkNyZWF0b3IudXBkYXRlQWRkcmVzcyhhKSksYX19KX19IWZ1bmN0aW9uKGUpe2UuU0hJUFBJTkc9XCJzaGlwcGluZ1wiLGUuQklMTElORz1cImJpbGxpbmdcIn0oWmd8fChaZz17fSkpLGZ1bmN0aW9uKGUpe2UuU1BMSVQ9XCJzcGxpdFwiLGUuRlVMTD1cImZ1bGxcIixlLk9SR0FOSVpBVElPTj1cIm9yZ2FuaXphdGlvblwifShRZ3x8KFFnPXt9KSksZnVuY3Rpb24oZSl7ZS5DcmVkaXRDYXJkPVwiY2FyZFwiLGUuU09GT1JUPVwic29mb3J0XCIsZS5FUFM9XCJlcHNcIixlLkdSQUJQQVk9XCJncmFicGF5XCIsZS5CQU5DT05UQUNUPVwiYmFuY29udGFjdFwiLGUuSURFQUw9XCJpZGVhbFwiLGUuR0lST1BBWT1cImdpcm9wYXlcIixlLkFMSVBBWT1cImFsaXBheVwiLGUuS0xBUk5BPVwia2xhcm5hXCJ9KFhnfHwoWGc9e30pKSxmdW5jdGlvbihlKXtlLk5FVkVSPVwibmV2ZXJcIixlLkFVVE89XCJhdXRvXCIsZS5BTFdBWVM9XCJhbHdheXNcIixlLlBBWU1FTlQ9XCJwYXltZW50XCIsZS5JRl9SRVFVSVJFRD1cImlmX3JlcXVpcmVkXCJ9KGV2fHwoZXY9e30pKSxmdW5jdGlvbihlKXtlLlBBWU1FTlQ9XCJwYXltZW50XCIsZS5BVVRIRU5USUNBVElPTj1cImxpbmtBdXRoZW50aWNhdGlvblwiLGUuU0hJUFBJTkc9XCJhZGRyZXNzXCJ9KHR2fHwodHY9e30pKSxmdW5jdGlvbihlKXtlLlJFUVVJUkVTX1BBWU1FTlRfTUVUSE9EPVwicmVxdWlyZXNfcGF5bWVudF9tZXRob2RcIixlLlJFUVVJUkVTX0NPTkZJUk1BVElPTj1cInJlcXVpcmVzX2NvbmZpcm1hdGlvblwiLGUuUkVRVUlSRVNfQUNUSU9OPVwicmVxdWlyZXNfYWN0aW9uXCIsZS5QUk9DRVNTSU5HPVwicHJvY2Vzc2luZ1wiLGUuU1VDQ0VFREVEPVwic3VjY2VlZGVkXCIsZS5DQU5DRUxFRD1cImNhbmNlbGVkXCJ9KG52fHwobnY9e30pKTt2YXIgb3Y7Y2xhc3MgYXZ7Y29uc3RydWN0b3IoZSx0LG4saSl7dGhpcy5fc3RvcmU9ZSx0aGlzLl9zdHJpcGVVUEVTY3JpcHRMb2FkZXI9dCx0aGlzLl9jb25zaWdubWVudEFjdGlvbkNyZWF0b3I9bix0aGlzLl9wYXltZW50TWV0aG9kQWN0aW9uQ3JlYXRvcj1pfXVwZGF0ZUFkZHJlc3MoZSx0KXtyZXR1cm4gdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fY29uc2lnbm1lbnRBY3Rpb25DcmVhdG9yLnVwZGF0ZUFkZHJlc3MoZSx0KSl9c2VsZWN0T3B0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2NvbnNpZ25tZW50QWN0aW9uQ3JlYXRvci5zZWxlY3RTaGlwcGluZ09wdGlvbihlLHQpKX1pbml0aWFsaXplKGUpe3JldHVybiB0PXRoaXMsbj12b2lkIDAscj1mdW5jdGlvbiooKXtpZighZS5zdHJpcGV1cGUpdGhyb3cgbmV3IEZ0KCdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwib3B0aW9uc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdHtjb250YWluZXI6dCxnYXRld2F5SWQ6bixtZXRob2RJZDppLG9uQ2hhbmdlU2hpcHBpbmc6cixnZXRTdHlsZXM6byxhdmFpbGFibGVDb3VudHJpZXM6YSxnZXRTdHJpcGVTdGF0ZTpzfT1lLnN0cmlwZXVwZTtPYmplY3QuZW50cmllcyhlLnN0cmlwZXVwZSkuZm9yRWFjaCgoW2UsdF0pPT57aWYoIXQpdGhyb3cgbmV3IEZ0KGBVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwiJHtlfVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gKX0pO2NvbnN0IGQ9KHlpZWxkIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3BheW1lbnRNZXRob2RBY3Rpb25DcmVhdG9yLmxvYWRQYXltZW50TWV0aG9kKG4se3BhcmFtczp7bWV0aG9kOml9fSkpKS5wYXltZW50TWV0aG9kcy5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhpLG4pLHtpbml0aWFsaXphdGlvbkRhdGE6e3N0cmlwZVB1Ymxpc2hhYmxlS2V5OmMsc3RyaXBlQ29ubmVjdGVkQWNjb3VudDpsfX09ZDtpZighZHx8IWQuaW5pdGlhbGl6YXRpb25EYXRhLnN0cmlwZVB1Ymxpc2hhYmxlS2V5fHwhZC5jbGllbnRUb2tlbil0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ1BheW1lbnRNZXRob2QpO2xldCB1O3RoaXMuX3N0cmlwZVVQRUNsaWVudD15aWVsZCB0aGlzLl9zdHJpcGVVUEVTY3JpcHRMb2FkZXIuZ2V0U3RyaXBlQ2xpZW50KGMsbCk7Y29uc3QgaD1vJiZvKCkse2Zvcm06e2dldFNoaXBwaW5nQWRkcmVzc0ZpZWxkczpwfSxzaGlwcGluZ0FkZHJlc3M6e2dldFNoaXBwaW5nQWRkcmVzczptfX09dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSx5PXAoW10sXCJcIik7dT1oP3t2YXJpYWJsZXM6e2NvbG9yUHJpbWFyeTpoLmZpZWxkSW5uZXJTaGFkb3csY29sb3JCYWNrZ3JvdW5kOmguZmllbGRCYWNrZ3JvdW5kLGNvbG9yVGV4dDpoLmxhYmVsVGV4dCxjb2xvckRhbmdlcjpoLmZpZWxkRXJyb3JUZXh0LGNvbG9yVGV4dFNlY29uZGFyeTpoLmxhYmVsVGV4dCxjb2xvclRleHRQbGFjZWhvbGRlcjpoLmZpZWxkUGxhY2Vob2xkZXJUZXh0LHNwYWNpbmdVbml0OlwiNHB4XCIsYm9yZGVyUmFkaXVzOlwiNHB4XCJ9LHJ1bGVzOntcIi5JbnB1dFwiOntib3JkZXJDb2xvcjpoLmZpZWxkQm9yZGVyLGNvbG9yOmguZmllbGRUZXh0LGJveFNoYWRvdzpoLmZpZWxkSW5uZXJTaGFkb3d9fX06e3ZhcmlhYmxlczp7c3BhY2luZ1VuaXQ6XCI0cHhcIixib3JkZXJSYWRpdXM6XCI0cHhcIn19LHRoaXMuX3N0cmlwZUVsZW1lbnRzPXRoaXMuX3N0cmlwZVVQRVNjcmlwdExvYWRlci5nZXRFbGVtZW50cyh0aGlzLl9zdHJpcGVVUEVDbGllbnQse2NsaWVudFNlY3JldDpkLmNsaWVudFRva2VuLGFwcGVhcmFuY2U6dX0pO2NvbnN0IGc9bSgpLHY9eS5maW5kKGU9PlwicGhvbmVcIj09PWUubmFtZSk7bGV0IGY9e21vZGU6WmcuU0hJUFBJTkcsYWxsb3dlZENvdW50cmllczpbYV0sZmllbGRzOntwaG9uZTpcImFsd2F5c1wifSx2YWxpZGF0aW9uOntwaG9uZTp7cmVxdWlyZWQ6diYmdi5yZXF1aXJlZD9cImFsd2F5c1wiOlwibmV2ZXJcIn19LGRpc3BsYXk6e25hbWU6UWcuU1BMSVR9fTtpZihnKXtjb25zdHtzdGF0ZU9yUHJvdmluY2VDb2RlOmUsY291bnRyeUNvZGU6dCxsYXN0TmFtZTpuLGZpcnN0TmFtZTppLHBob25lOnIsYWRkcmVzczE6byxhZGRyZXNzMjphLGNpdHk6ZCxwb3N0YWxDb2RlOmN9PWcsbD1lJiZ0P3ModCxlKTplO2Y9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGYpLHtkZWZhdWx0VmFsdWVzOntmaXJzdE5hbWU6aSxsYXN0TmFtZTpuLHBob25lOnIsYWRkcmVzczp7bGluZTE6byxsaW5lMjphLGNpdHk6ZCxzdGF0ZTpsLHBvc3RhbF9jb2RlOmMsY291bnRyeTp0fX19KX1sZXQgUz10aGlzLl9zdHJpcGVFbGVtZW50cy5nZXRFbGVtZW50KHR2LlNISVBQSU5HKTtyZXR1cm4gUyYmUy5kZXN0cm95KCksUz10aGlzLl9zdHJpcGVFbGVtZW50cy5jcmVhdGUodHYuU0hJUFBJTkcsZiksUy5vbihcImNoYW5nZVwiLGU9PntpZighKFwiaXNOZXdBZGRyZXNzXCJpbiBlKSl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyk7KGUuY29tcGxldGV8fGUuaXNOZXdBZGRyZXNzKSYmKHRoaXMuc2VuZERhdGEmJmNsZWFyVGltZW91dCh0aGlzLnNlbmREYXRhKSx0aGlzLnNlbmREYXRhPXNldFRpbWVvdXQoKCk9PntyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGhvbmVGaWVsZFJlcXVpcmVkOiEhdiYmdi5yZXF1aXJlZH0pKX0sMWUzKSl9KSxTLm1vdW50KGAjJHt0fWApLFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKX0sbmV3KChpPXZvaWQgMCl8fChpPVByb21pc2UpKShmdW5jdGlvbihlLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2Qoci5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKHIudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2YgaT9uOm5ldyBpKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihhLHMpfWQoKHI9ci5hcHBseSh0LG58fFtdKSkubmV4dCgpKX0pO3ZhciB0LG4saSxyfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSl9fSFmdW5jdGlvbihlKXtlLlNlbmRTaWduSW5FbWFpbFJlcXVlc3RlZD1cIlNFTkRfU0lHTklOX0VNQUlMX1JFUVVFU1RFRFwiLGUuU2VuZFNpZ25JbkVtYWlsU3VjY2VlZGVkPVwiU0VORF9TSUdOSU5fRU1BSUxfU1VDQ0VFREVEXCIsZS5TZW5kU2lnbkluRW1haWxGYWlsZWQ9XCJTRU5EX1NJR05JTl9FTUFJTF9GQUlMRURcIn0ob3Z8fChvdj17fSkpO2NsYXNzIHN2e2NvbnN0cnVjdG9yKGUpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZX1zZW5kU2lnbkluRW1haWwoZSx0KXtyZXR1cm4gc2UobWUobChvdi5TZW5kU2lnbkluRW1haWxSZXF1ZXN0ZWQpKSxkZSgoKT0+e3JldHVybiBuPXRoaXMsaT12b2lkIDAsbz1mdW5jdGlvbiooKXtjb25zdHtib2R5Om59PXlpZWxkIHRoaXMuX3JlcXVlc3RTZW5kZXIuc2VuZFNpZ25JbkVtYWlsKGUsdCk7cmV0dXJuIGwob3YuU2VuZFNpZ25JbkVtYWlsU3VjY2VlZGVkLG4pfSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99KSkucGlwZShnZShlPT5KZShvdi5TZW5kU2lnbkluRW1haWxGYWlsZWQsZSkpKX19Y2xhc3MgZHZ7Y29uc3RydWN0b3IoZSl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lfXNlbmRTaWduSW5FbWFpbCh7ZW1haWw6ZSxyZWRpcmVjdFVybDp0fSx7dGltZW91dDpufT17fSl7Y29uc3QgaT1PYmplY3QuYXNzaWduKHtBY2NlcHQ6aXQuSnNvblYxfSxydCk7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdChcIi9sb2dpbi5waHA/YWN0aW9uPXBhc3N3b3JkbGVzc19sb2dpblwiLHtib2R5OntlbWFpbDplLHJlZGlyZWN0X3VybDp0fHx4cyh3aW5kb3cudG9wP3dpbmRvdy50b3AubG9jYXRpb24uaHJlZjpcIlwiKS5wYXRobmFtZX0saGVhZGVyczppLHRpbWVvdXQ6bn0pfX1jbGFzcyBjdntjb25zdHJ1Y3RvcihlKXt0aGlzLl9tZXNzYWdlQ3VzdG9taXplcj1lfXRyYW5zZm9ybShlKXt2YXIgdDtyZXR1cm4gZS5tZXNzYWdlPSh0PXRoaXMuX21lc3NhZ2VDdXN0b21pemVyKGUpKT90LnNwbGl0KC8oPzpcXHJcXG58XFxufFxccikvKS5tYXAoZT0+ZS5yZXBsYWNlKC9eXFxzKy9nbSxcIlwiKSkuam9pbihcIiBcIikudHJpbSgpOlwiXCIsZX19bGV0IGx2PWNsYXNze2NvbnN0cnVjdG9yKGUsdCxuLGkscixvLGEscyxkLGMsbCx1LGgscCxtLHksZyx2LGYsUyxfLHcsQyxJLGIsUCxPLEUpe3RoaXMuX3N0b3JlPWUsdGhpcy5fc3RvcmVQcm9qZWN0aW9uPXQsdGhpcy5fZXh0ZW5zaW9uTWVzc2VuZ2VyPW4sdGhpcy5fZXh0ZW5zaW9uRXZlbnRCcm9hZGNhc3Rlcj1pLHRoaXMuX2JpbGxpbmdBZGRyZXNzQWN0aW9uQ3JlYXRvcj1yLHRoaXMuX2NoZWNrb3V0QWN0aW9uQ3JlYXRvcj1vLHRoaXMuX2NvbmZpZ0FjdGlvbkNyZWF0b3I9YSx0aGlzLl9jdXN0b21lckFjdGlvbkNyZWF0b3I9cyx0aGlzLl9jb25zaWdubWVudEFjdGlvbkNyZWF0b3I9ZCx0aGlzLl9jb3VudHJ5QWN0aW9uQ3JlYXRvcj1jLHRoaXMuX2NvdXBvbkFjdGlvbkNyZWF0b3I9bCx0aGlzLl9jdXN0b21lclN0cmF0ZWd5QWN0aW9uQ3JlYXRvcj11LHRoaXMuX2Vycm9yQWN0aW9uQ3JlYXRvcj1oLHRoaXMuX2dpZnRDZXJ0aWZpY2F0ZUFjdGlvbkNyZWF0b3I9cCx0aGlzLl9pbnN0cnVtZW50QWN0aW9uQ3JlYXRvcj1tLHRoaXMuX29yZGVyQWN0aW9uQ3JlYXRvcj15LHRoaXMuX3BheW1lbnRNZXRob2RBY3Rpb25DcmVhdG9yPWcsdGhpcy5fcGF5bWVudFN0cmF0ZWd5QWN0aW9uQ3JlYXRvcj12LHRoaXMuX3BpY2t1cE9wdGlvbkFjdGlvbkNyZWF0b3I9Zix0aGlzLl9zaGlwcGluZ0NvdW50cnlBY3Rpb25DcmVhdG9yPVMsdGhpcy5fc2hpcHBpbmdTdHJhdGVneUFjdGlvbkNyZWF0b3I9Xyx0aGlzLl9zaWduSW5FbWFpbEFjdGlvbkNyZWF0b3I9dyx0aGlzLl9zcGFtUHJvdGVjdGlvbkFjdGlvbkNyZWF0b3I9Qyx0aGlzLl9zdG9yZUNyZWRpdEFjdGlvbkNyZWF0b3I9SSx0aGlzLl9zdWJzY3JpcHRpb25zQWN0aW9uQ3JlYXRvcj1iLHRoaXMuX2Zvcm1GaWVsZHNBY3Rpb25DcmVhdG9yPVAsdGhpcy5fZXh0ZW5zaW9uQWN0aW9uQ3JlYXRvcj1PLHRoaXMuX3dvcmtlckV4dGVuc2lvbk1lc3Nlbmdlcj1FLHRoaXMuX2Vycm9yVHJhbnNmb3JtZXI9ZnVuY3Rpb24oZT1cImRldmVsb3BtZW50XCI9PT11dCgpKXtyZXR1cm4gbmV3IGN2KHQ9PntpZighZXx8IWZ1bmN0aW9uKGUpe3JldHVybiEoIWUuc3VidHlwZSYmIWUudHlwZSl9KHQpKXJldHVybiB0Lm1lc3NhZ2U7c3dpdGNoKHQuc3VidHlwZXx8dC50eXBlKXtjYXNlIFdlLk1pc3NpbmdDb25zaWdubWVudHM6cmV0dXJuYFxcbiAgICAgICAgICAgICAgICAke3QubWVzc2FnZX1cXG4gICAgICAgICAgICAgICAgVGhlIGRhdGEgY291bGQgYmUgdW5hdmFpbGFibGUgYmVjYXVzZSBubyBzaGlwcGluZyBhZGRyZXNzIGhhcyBiZWVuIHByb3ZpZGVkLlxcbiAgICAgICAgICAgICAgICBUbyBmaXggdGhpcywgY3JlYXRlIGEgY29uc2lnbm1lbnQgb3IgdXBkYXRlIHRoZSBzaGlwcGluZyBhZGRyZXNzIGJlZm9yZSBwZXJmb3JtaW5nXFxuICAgICAgICAgICAgICAgIHRoZSBzYW1lIGFjdGlvbiBhZ2Fpbi5cXG4gICAgICAgICAgICBgO2Nhc2UgV2UuTWlzc2luZ0NhcnQ6Y2FzZSBXZS5NaXNzaW5nQ2hlY2tvdXQ6cmV0dXJuYFxcbiAgICAgICAgICAgICAgICAke3QubWVzc2FnZX1cXG4gICAgICAgICAgICAgICAgVGhlIGRhdGEgY291bGQgYmUgdW5hdmFpbGFibGUgYmVjYXVzZSBpdCBoYXMgbm90IGxvYWRlZCBmcm9tIHRoZSBzZXJ2ZXIgeWV0LlxcbiAgICAgICAgICAgICAgICBUbyBmaXggdGhpcyBpc3N1ZSwgeW91IGNhbiB0cnkgY2FsbGluZyBcXGBDaGVja291dFNlcnZpY2UjbG9hZENoZWNrb3V0XFxgXFxuICAgICAgICAgICAgICAgIGJlZm9yZSBwZXJmb3JtaW5nIHRoZSBzYW1lIGFjdGlvbiBhZ2Fpbi5cXG4gICAgICAgICAgICBgO2Nhc2UgV2UuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOnJldHVybmBcXG4gICAgICAgICAgICAgICAgJHt0Lm1lc3NhZ2V9XFxuICAgICAgICAgICAgICAgIFRoZSBkYXRhIGNvdWxkIGJlIHVuYXZhaWxhYmxlIGJlY2F1c2UgaXQgaGFzIG5vdCBsb2FkZWQgZnJvbSB0aGUgc2VydmVyIHlldC5cXG4gICAgICAgICAgICAgICAgVG8gZml4IHRoaXMgaXNzdWUsIHlvdSBuZWVkIHRvIG1ha2Ugc3VyZSBcXGBDaGVja291dFNlcnZpY2VcXGAgaXMgaW5pdGlhbGl6ZWRcXG4gICAgICAgICAgICAgICAgcHJvcGVybHkgYnkgY2FsbGluZyBcXGBDaGVja291dFNlcnZpY2UjbG9hZENoZWNrb3V0XFxgIGJlZm9yZSBwZXJmb3JtaW5nIGFueVxcbiAgICAgICAgICAgICAgICBvdGhlciBhY3Rpb25zLlxcbiAgICAgICAgICAgIGA7Y2FzZSBXZS5NaXNzaW5nT3JkZXI6cmV0dXJuYFxcbiAgICAgICAgICAgICAgICAke3QubWVzc2FnZX1cXG4gICAgICAgICAgICAgICAgVGhlIGRhdGEgY291bGQgYmUgdW5hdmFpbGFibGUgYmVjYXVzZSBpdCBoYXMgbm90IGxvYWRlZCBmcm9tIHRoZSBzZXJ2ZXIgeWV0LlxcbiAgICAgICAgICAgICAgICBUbyBmaXggdGhpcyBpc3N1ZSwgeW91IGNhbiB0cnkgY2FsbGluZyBcXGBDaGVja291dFNlcnZpY2UjbG9hZE9yZGVyXFxgXFxuICAgICAgICAgICAgICAgIGJlZm9yZSBwZXJmb3JtaW5nIHRoZSBzYW1lIGFjdGlvbiBhZ2Fpbi5cXG4gICAgICAgICAgICBgO2Nhc2UgV2UuTWlzc2luZ09yZGVySWQ6cmV0dXJuYFxcbiAgICAgICAgICAgICAgICAke3QubWVzc2FnZX1cXG4gICAgICAgICAgICAgICAgVGhlIGRhdGEgY291bGQgYmUgdW5hdmFpbGFibGUgYmVjYXVzZSBubyBvcmRlciBoYXMgYmVlbiBjcmVhdGVkIHlldC4gWW91IGhhdmVcXG4gICAgICAgICAgICAgICAgdG8gZmlyc3QgY3JlYXRlIHRoZSBvcmRlciBiZWZvcmUgeW91IGNhbiBwZXJmb3JtIHRoZSBhY3Rpb24uXFxuICAgICAgICAgICAgYDtjYXNlIFdlLk1pc3NpbmdQYXltZW50TWV0aG9kOnJldHVybmBcXG4gICAgICAgICAgICAgICAgJHt0Lm1lc3NhZ2V9XFxuICAgICAgICAgICAgICAgIFRoZSBkYXRhIGNvdWxkIGJlIHVuYXZhaWxhYmxlIGJlY2F1c2UgaXQgaGFzIG5vdCBsb2FkZWQgZnJvbSB0aGUgc2VydmVyLCBvclxcbiAgICAgICAgICAgICAgICBjb25maWd1cmVkIGJ5IHRoZSBtZXJjaGFudCB5ZXQuIFRvIGZpeCB0aGUgZm9ybWVyIGlzc3VlLCB5b3UgY2FuIHRyeSBjYWxsaW5nXFxuICAgICAgICAgICAgICAgIFxcYENoZWNrb3V0U2VydmljZSNsb2FkUGF5bWVudE1ldGhvZHNcXGAgYmVmb3JlIHBlcmZvcm1pbmcgdGhlIHNhbWUgYWN0aW9uIGFnYWluLlxcbiAgICAgICAgICAgIGA7Y2FzZSBmcy5DdXN0b21lck5vdEluaXRpYWxpemVkOnJldHVyblwiXFxuICAgICAgICAgICAgICAgIEluIG9yZGVyIHRvIGluaXRpYWxpemUgdGhlIGN1c3RvbWVyIHN0ZXAgb2YgY2hlY2tvdXQsIHlvdSBuZWVkIHRvIGNhbGxcXG4gICAgICAgICAgICAgICAgYENoZWNrb3V0U2VydmljZSNpbml0aWFsaXplQ3VzdG9tZXJgLiBBZnRlcndhcmRzLCB5b3Ugc2hvdWxkIGJlIGFibGUgdG9cXG4gICAgICAgICAgICAgICAgc3VibWl0IGN1c3RvbWVyIGRldGFpbHMuXFxuICAgICAgICAgICAgXCI7Y2FzZSBmcy5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6cmV0dXJuYFxcbiAgICAgICAgICAgICAgICAke3QubWVzc2FnZX1cXG4gICAgICAgICAgICAgICAgSW4gb3JkZXIgdG8gaW5pdGlhbGl6ZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0LCB5b3UgbmVlZCB0byBjYWxsXFxuICAgICAgICAgICAgICAgIFxcYENoZWNrb3V0U2VydmljZSNpbml0aWFsaXplUGF5bWVudFxcYC4gQWZ0ZXJ3YXJkcywgeW91IHNob3VsZCBiZSBhYmxlIHRvXFxuICAgICAgICAgICAgICAgIHN1Ym1pdCBwYXltZW50IGRldGFpbHMuXFxuICAgICAgICAgICAgYDtjYXNlIGZzLlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQ6cmV0dXJuYFxcbiAgICAgICAgICAgICAgICAke3QubWVzc2FnZX1cXG4gICAgICAgICAgICAgICAgSW4gb3JkZXIgdG8gaW5pdGlhbGl6ZSB0aGUgc2hpcHBpbmcgc3RlcCBvZiBjaGVja291dCwgeW91IG5lZWQgdG8gY2FsbFxcbiAgICAgICAgICAgICAgICBcXGBDaGVja291dFNlcnZpY2UjaW5pdGlhbGl6ZVNoaXBwaW5nXFxgLiBBZnRlcndhcmRzLCB5b3Ugc2hvdWxkIGJlIGFibGUgdG9cXG4gICAgICAgICAgICAgICAgc3VibWl0IHNoaXBwaW5nIGRldGFpbHMuXFxuICAgICAgICAgICAgYDtkZWZhdWx0OnJldHVybiB0Lm1lc3NhZ2V9fSl9KCl9Z2V0U3RhdGUoKXtyZXR1cm4gdGhpcy5fc3RvcmVQcm9qZWN0aW9uLmdldFN0YXRlKCl9bm90aWZ5U3RhdGUoKXt0aGlzLl9zdG9yZVByb2plY3Rpb24ubm90aWZ5U3RhdGUoKX1zdWJzY3JpYmUoZSwuLi50KXtyZXR1cm4gdGhpcy5fc3RvcmVQcm9qZWN0aW9uLnN1YnNjcmliZShlLC4uLnQpfWxvYWRDaGVja291dChlLHQpe3JldHVybiB0aGlzLl9kaXNwYXRjaChlP3RoaXMuX2NoZWNrb3V0QWN0aW9uQ3JlYXRvci5sb2FkQ2hlY2tvdXQoZSx0KTp0aGlzLl9jaGVja291dEFjdGlvbkNyZWF0b3IubG9hZERlZmF1bHRDaGVja291dCh0KSl9dXBkYXRlQ2hlY2tvdXQoZSx0KXtjb25zdCBuPXRoaXMuX2NoZWNrb3V0QWN0aW9uQ3JlYXRvci51cGRhdGVDaGVja291dChlLHQpO3JldHVybiB0aGlzLl9kaXNwYXRjaChuKX1sb2FkT3JkZXIoZSx0KXtjb25zdCBuPXRoaXMuX29yZGVyQWN0aW9uQ3JlYXRvci5sb2FkT3JkZXIoZSx0KSxpPXRoaXMuX2Zvcm1GaWVsZHNBY3Rpb25DcmVhdG9yLmxvYWRGb3JtRmllbGRzKHQpLHI9dGhpcy5fY29uZmlnQWN0aW9uQ3JlYXRvci5sb2FkQ29uZmlnKHQpO3JldHVybiBQcm9taXNlLmFsbChbdGhpcy5fZGlzcGF0Y2gobiksdGhpcy5fZGlzcGF0Y2gocix7cXVldWVJZDpcImNvbmZpZ1wifSksdGhpcy5fZGlzcGF0Y2goaSx7cXVldWVJZDpcImZvcm1GaWVsZHNcIn0pXSkudGhlbigoKT0+dGhpcy5nZXRTdGF0ZSgpKX1zdWJtaXRPcmRlcihlLHQpe2NvbnN0IG49dGhpcy5fcGF5bWVudFN0cmF0ZWd5QWN0aW9uQ3JlYXRvci5leGVjdXRlKGUsdCk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKG4se3F1ZXVlSWQ6XCJwYXltZW50U3RyYXRlZ3lcIn0pfWZpbmFsaXplT3JkZXJJZk5lZWRlZChlKXtjb25zdCB0PXRoaXMuX3BheW1lbnRTdHJhdGVneUFjdGlvbkNyZWF0b3IuZmluYWxpemUoZSk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKHQse3F1ZXVlSWQ6XCJwYXltZW50U3RyYXRlZ3lcIn0pfWxvYWRQYXltZW50TWV0aG9kcyhlKXtjb25zdCB0PXRoaXMuX3BheW1lbnRNZXRob2RBY3Rpb25DcmVhdG9yLmxvYWRQYXltZW50TWV0aG9kcyhlKTtyZXR1cm4gdGhpcy5fZGlzcGF0Y2godCx7cXVldWVJZDpcInBheW1lbnRNZXRob2RzXCJ9KX1sb2FkUGF5bWVudE1ldGhvZEJ5SWRzKGUsdCl7Y29uc3Qgbj10aGlzLl9wYXltZW50TWV0aG9kQWN0aW9uQ3JlYXRvci5sb2FkUGF5bWVudE1ldGhvZHNCeUlkKGUsdCk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKG4se3F1ZXVlSWQ6XCJwYXltZW50TWV0aG9kc1wifSl9bG9hZFBheW1lbnRNZXRob2QoZSx0KXtjb25zdCBuPXRoaXMuX3BheW1lbnRNZXRob2RBY3Rpb25DcmVhdG9yLmxvYWRQYXltZW50TWV0aG9kKGUsdCk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKG4se3F1ZXVlSWQ6XCJwYXltZW50TWV0aG9kc1wifSl9aW5pdGlhbGl6ZVBheW1lbnQoZSl7Y29uc3QgdD10aGlzLl9wYXltZW50U3RyYXRlZ3lBY3Rpb25DcmVhdG9yLmluaXRpYWxpemUoZSk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKHQse3F1ZXVlSWQ6XCJwYXltZW50U3RyYXRlZ3lcIn0pfWRlaW5pdGlhbGl6ZVBheW1lbnQoZSl7Y29uc3QgdD10aGlzLl9wYXltZW50U3RyYXRlZ3lBY3Rpb25DcmVhdG9yLmRlaW5pdGlhbGl6ZShlKTtyZXR1cm4gdGhpcy5fZGlzcGF0Y2godCx7cXVldWVJZDpcInBheW1lbnRTdHJhdGVneVwifSl9bG9hZEJpbGxpbmdDb3VudHJpZXMoZSl7Y29uc3QgdD10aGlzLl9jb3VudHJ5QWN0aW9uQ3JlYXRvci5sb2FkQ291bnRyaWVzKGUpO3JldHVybiB0aGlzLl9kaXNwYXRjaCh0LHtxdWV1ZUlkOlwiYmlsbGluZ0NvdW50cmllc1wifSl9bG9hZFNoaXBwaW5nQ291bnRyaWVzKGUpe2NvbnN0IHQ9dGhpcy5fc2hpcHBpbmdDb3VudHJ5QWN0aW9uQ3JlYXRvci5sb2FkQ291bnRyaWVzKGUpO3JldHVybiB0aGlzLl9kaXNwYXRjaCh0LHtxdWV1ZUlkOlwic2hpcHBpbmdDb3VudHJpZXNcIn0pfWxvYWRQaWNrdXBPcHRpb25zKGUpe2NvbnN0IHQ9dGhpcy5fcGlja3VwT3B0aW9uQWN0aW9uQ3JlYXRvci5sb2FkUGlja3VwT3B0aW9ucyhlKTtyZXR1cm4gdGhpcy5fZGlzcGF0Y2godCx7cXVldWVJZDpcInBpY2t1cE9wdGlvbnNcIn0pfWxvYWRCaWxsaW5nQWRkcmVzc0ZpZWxkcyhlKXtyZXR1cm4gdGhpcy5sb2FkQmlsbGluZ0NvdW50cmllcyhlKX1sb2FkU2hpcHBpbmdBZGRyZXNzRmllbGRzKGUpe3JldHVybiB0aGlzLmxvYWRTaGlwcGluZ0NvdW50cmllcyhlKX1pbml0aWFsaXplQ3VzdG9tZXIoZSl7Y29uc3QgdD10aGlzLl9jdXN0b21lclN0cmF0ZWd5QWN0aW9uQ3JlYXRvci5pbml0aWFsaXplKGUpO3JldHVybiB0aGlzLl9kaXNwYXRjaCh0LHtxdWV1ZUlkOlwiY3VzdG9tZXJTdHJhdGVneVwifSl9ZGVpbml0aWFsaXplQ3VzdG9tZXIoZSl7Y29uc3QgdD10aGlzLl9jdXN0b21lclN0cmF0ZWd5QWN0aW9uQ3JlYXRvci5kZWluaXRpYWxpemUoZSk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKHQse3F1ZXVlSWQ6XCJjdXN0b21lclN0cmF0ZWd5XCJ9KX1zZW5kU2lnbkluRW1haWwoZSx0KXtjb25zdCBuPXRoaXMuX3NpZ25JbkVtYWlsQWN0aW9uQ3JlYXRvci5zZW5kU2lnbkluRW1haWwoZSx0KTtyZXR1cm4gdGhpcy5fZGlzcGF0Y2gobix7cXVldWVJZDpcInNpZ25JbkVtYWlsXCJ9KX1jcmVhdGVDdXN0b21lckFjY291bnQoZSx0KXtjb25zdCBuPXRoaXMuX2N1c3RvbWVyQWN0aW9uQ3JlYXRvci5jcmVhdGVDdXN0b21lcihlLHQpO3JldHVybiB0aGlzLl9kaXNwYXRjaChuKX1jcmVhdGVDdXN0b21lckFkZHJlc3MoZSx0KXtjb25zdCBuPXRoaXMuX2N1c3RvbWVyQWN0aW9uQ3JlYXRvci5jcmVhdGVBZGRyZXNzKGUsdCk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKG4pfXVwZGF0ZVN1YnNjcmlwdGlvbnMoZSx0KXtjb25zdCBuPXRoaXMuX3N1YnNjcmlwdGlvbnNBY3Rpb25DcmVhdG9yLnVwZGF0ZVN1YnNjcmlwdGlvbnMoZSx0KTtyZXR1cm4gdGhpcy5fZGlzcGF0Y2gobix7cXVldWVJZDpcInN1YnNjcmlwdGlvbnNcIn0pfWNvbnRpbnVlQXNHdWVzdChlLHQpe2NvbnN0IG49dGhpcy5fYmlsbGluZ0FkZHJlc3NBY3Rpb25DcmVhdG9yLmNvbnRpbnVlQXNHdWVzdChlLHQpO3JldHVybiB0aGlzLl9kaXNwYXRjaChuKX1zaWduSW5DdXN0b21lcihlLHQpe2NvbnN0IG49dGhpcy5fY3VzdG9tZXJTdHJhdGVneUFjdGlvbkNyZWF0b3Iuc2lnbkluKGUsdCk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKG4se3F1ZXVlSWQ6XCJjdXN0b21lclN0cmF0ZWd5XCJ9KX1zaWduT3V0Q3VzdG9tZXIoZSl7Y29uc3QgdD10aGlzLl9jdXN0b21lclN0cmF0ZWd5QWN0aW9uQ3JlYXRvci5zaWduT3V0KGUpO3JldHVybiB0aGlzLl9kaXNwYXRjaCh0LHtxdWV1ZUlkOlwiY3VzdG9tZXJTdHJhdGVneVwifSl9ZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChlKXtjb25zdCB0PXRoaXMuX2N1c3RvbWVyU3RyYXRlZ3lBY3Rpb25DcmVhdG9yLmV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoZSk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKHQse3F1ZXVlSWQ6XCJjdXN0b21lclN0cmF0ZWd5XCJ9KX1sb2FkU2hpcHBpbmdPcHRpb25zKGUpe2NvbnN0IHQ9dGhpcy5fY29uc2lnbm1lbnRBY3Rpb25DcmVhdG9yLmxvYWRTaGlwcGluZ09wdGlvbnMoZSk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKHQpfWluaXRpYWxpemVTaGlwcGluZyhlKXtjb25zdCB0PXRoaXMuX3NoaXBwaW5nU3RyYXRlZ3lBY3Rpb25DcmVhdG9yLmluaXRpYWxpemUoZSk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKHQse3F1ZXVlSWQ6XCJzaGlwcGluZ1N0cmF0ZWd5XCJ9KX1kZWluaXRpYWxpemVTaGlwcGluZyhlKXtjb25zdCB0PXRoaXMuX3NoaXBwaW5nU3RyYXRlZ3lBY3Rpb25DcmVhdG9yLmRlaW5pdGlhbGl6ZShlKTtyZXR1cm4gdGhpcy5fZGlzcGF0Y2godCx7cXVldWVJZDpcInNoaXBwaW5nU3RyYXRlZ3lcIn0pfXNlbGVjdFNoaXBwaW5nT3B0aW9uKGUsdCl7Y29uc3Qgbj10aGlzLl9zaGlwcGluZ1N0cmF0ZWd5QWN0aW9uQ3JlYXRvci5zZWxlY3RPcHRpb24oZSx0KTtyZXR1cm4gdGhpcy5fZGlzcGF0Y2gobix7cXVldWVJZDpcInNoaXBwaW5nU3RyYXRlZ3lcIn0pfXVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhlLHQpe2NvbnN0IG49dGhpcy5fc2hpcHBpbmdTdHJhdGVneUFjdGlvbkNyZWF0b3IudXBkYXRlQWRkcmVzcyhlLHQpO3JldHVybiB0aGlzLl9kaXNwYXRjaChuLHtxdWV1ZUlkOlwic2hpcHBpbmdTdHJhdGVneVwifSl9Y3JlYXRlQ29uc2lnbm1lbnRzKGUsdCl7Y29uc3Qgbj10aGlzLl9jb25zaWdubWVudEFjdGlvbkNyZWF0b3IuY3JlYXRlQ29uc2lnbm1lbnRzKGUsdCk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKG4se3F1ZXVlSWQ6XCJzaGlwcGluZ1N0cmF0ZWd5XCJ9KX1kZWxldGVDb25zaWdubWVudChlLHQpe2NvbnN0IG49dGhpcy5fY29uc2lnbm1lbnRBY3Rpb25DcmVhdG9yLmRlbGV0ZUNvbnNpZ25tZW50KGUsdCk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKG4se3F1ZXVlSWQ6XCJzaGlwcGluZ1N0cmF0ZWd5XCJ9KX11cGRhdGVDb25zaWdubWVudChlLHQpe2NvbnN0IG49dGhpcy5fY29uc2lnbm1lbnRBY3Rpb25DcmVhdG9yLnVwZGF0ZUNvbnNpZ25tZW50KGUsdCk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKG4se3F1ZXVlSWQ6XCJzaGlwcGluZ1N0cmF0ZWd5XCJ9KX1hc3NpZ25JdGVtc1RvQWRkcmVzcyhlLHQpe2NvbnN0IG49dGhpcy5fY29uc2lnbm1lbnRBY3Rpb25DcmVhdG9yLmFzc2lnbkl0ZW1zQnlBZGRyZXNzKGUsdCk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKG4se3F1ZXVlSWQ6XCJzaGlwcGluZ1N0cmF0ZWd5XCJ9KX11bmFzc2lnbkl0ZW1zVG9BZGRyZXNzKGUsdCl7Y29uc3Qgbj10aGlzLl9jb25zaWdubWVudEFjdGlvbkNyZWF0b3IudW5hc3NpZ25JdGVtc0J5QWRkcmVzcyhlLHQpO3JldHVybiB0aGlzLl9kaXNwYXRjaChuLHtxdWV1ZUlkOlwic2hpcHBpbmdTdHJhdGVneVwifSl9c2VsZWN0Q29uc2lnbm1lbnRTaGlwcGluZ09wdGlvbihlLHQsbil7Y29uc3QgaT10aGlzLl9jb25zaWdubWVudEFjdGlvbkNyZWF0b3IudXBkYXRlU2hpcHBpbmdPcHRpb24oe2lkOmUsc2hpcHBpbmdPcHRpb25JZDp0fSxuKTtyZXR1cm4gdGhpcy5fZGlzcGF0Y2goaSx7cXVldWVJZDpcInNoaXBwaW5nU3RyYXRlZ3lcIn0pfXVwZGF0ZUJpbGxpbmdBZGRyZXNzKGUsdD17fSl7Y29uc3Qgbj10aGlzLl9iaWxsaW5nQWRkcmVzc0FjdGlvbkNyZWF0b3IudXBkYXRlQWRkcmVzcyhlLHQpO3JldHVybiB0aGlzLl9kaXNwYXRjaChuKX1hcHBseVN0b3JlQ3JlZGl0KGUsdCl7Y29uc3Qgbj10aGlzLl9zdG9yZUNyZWRpdEFjdGlvbkNyZWF0b3IuYXBwbHlTdG9yZUNyZWRpdChlLHQpO3JldHVybiB0aGlzLl9kaXNwYXRjaChuKX1hcHBseUNvdXBvbihlLHQpe2NvbnN0IG49dGhpcy5fY291cG9uQWN0aW9uQ3JlYXRvci5hcHBseUNvdXBvbihlLHQpO3JldHVybiB0aGlzLl9kaXNwYXRjaChuKX1yZW1vdmVDb3Vwb24oZSx0KXtjb25zdCBuPXRoaXMuX2NvdXBvbkFjdGlvbkNyZWF0b3IucmVtb3ZlQ291cG9uKGUsdCk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKG4pfWFwcGx5R2lmdENlcnRpZmljYXRlKGUsdCl7Y29uc3Qgbj10aGlzLl9naWZ0Q2VydGlmaWNhdGVBY3Rpb25DcmVhdG9yLmFwcGx5R2lmdENlcnRpZmljYXRlKGUsdCk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKG4pfXJlbW92ZUdpZnRDZXJ0aWZpY2F0ZShlLHQpe2NvbnN0IG49dGhpcy5fZ2lmdENlcnRpZmljYXRlQWN0aW9uQ3JlYXRvci5yZW1vdmVHaWZ0Q2VydGlmaWNhdGUoZSx0KTtyZXR1cm4gdGhpcy5fZGlzcGF0Y2gobil9bG9hZEluc3RydW1lbnRzKCl7Y29uc3QgZT10aGlzLl9pbnN0cnVtZW50QWN0aW9uQ3JlYXRvci5sb2FkSW5zdHJ1bWVudHMoKTtyZXR1cm4gdGhpcy5fZGlzcGF0Y2goZSl9ZGVsZXRlSW5zdHJ1bWVudChlKXtjb25zdCB0PXRoaXMuX2luc3RydW1lbnRBY3Rpb25DcmVhdG9yLmRlbGV0ZUluc3RydW1lbnQoZSk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKHQpLnRoZW4oKCk9PnRoaXMubG9hZEluc3RydW1lbnRzKCkpfWNsZWFyRXJyb3IoZSl7Y29uc3QgdD10aGlzLl9lcnJvckFjdGlvbkNyZWF0b3IuY2xlYXJFcnJvcihlKTtyZXR1cm4gdGhpcy5fZGlzcGF0Y2godCl9aW5pdGlhbGl6ZVNwYW1Qcm90ZWN0aW9uKGUpe2NvbnN0IHQ9dGhpcy5fc3BhbVByb3RlY3Rpb25BY3Rpb25DcmVhdG9yLmluaXRpYWxpemUoZSk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKHQse3F1ZXVlSWQ6XCJzcGFtUHJvdGVjdGlvblwifSl9ZXhlY3V0ZVNwYW1DaGVjaygpe2NvbnN0IGU9dGhpcy5fc3BhbVByb3RlY3Rpb25BY3Rpb25DcmVhdG9yLnZlcmlmeUNoZWNrb3V0U3BhbVByb3RlY3Rpb24oKTtyZXR1cm4gdGhpcy5fZGlzcGF0Y2goZSx7cXVldWVJZDpcInNwYW1Qcm90ZWN0aW9uXCJ9KX1sb2FkRXh0ZW5zaW9ucyhlKXtjb25zdCB0PXRoaXMuX2V4dGVuc2lvbkFjdGlvbkNyZWF0b3IubG9hZEV4dGVuc2lvbnMoZSk7cmV0dXJuIHRoaXMuX2Rpc3BhdGNoKHQse3F1ZXVlSWQ6XCJleHRlbnNpb25zXCJ9KX1yZW5kZXJFeHRlbnNpb24oZSx0KXtyZXR1cm4gbj10aGlzLGk9dm9pZCAwLG89ZnVuY3Rpb24qKCl7Y29uc3Qgbj10aGlzLl9leHRlbnNpb25BY3Rpb25DcmVhdG9yLnJlbmRlckV4dGVuc2lvbihlLHQsdGhpcy5fd29ya2VyRXh0ZW5zaW9uTWVzc2VuZ2VyKSxpPXlpZWxkIHRoaXMuX2Rpc3BhdGNoKG4se3F1ZXVlSWQ6XCJleHRlbnNpb25zXCJ9KTtyZXR1cm4gdGhpcy5fZXh0ZW5zaW9uRXZlbnRCcm9hZGNhc3Rlci5saXN0ZW4oKSxpfSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99Y2xlYXJFeHRlbnNpb25DYWNoZShlKXt0aGlzLl9leHRlbnNpb25NZXNzZW5nZXIuY2xlYXJDYWNoZUJ5UmVnaW9uKGUpfXBvc3RNZXNzYWdlVG9FeHRlbnNpb24oZSx0KXt0aGlzLl9leHRlbnNpb25NZXNzZW5nZXIucG9zdChlLHQpfWhhbmRsZUV4dGVuc2lvbkNvbW1hbmQoZSx0LG4pe3JldHVybiB0aGlzLl9leHRlbnNpb25NZXNzZW5nZXIubGlzdGVuRm9yQ29tbWFuZChlLHQsbil9aGFuZGxlRXh0ZW5zaW9uUXVlcnkoZSx0LG4pe3JldHVybiB0aGlzLl9leHRlbnNpb25NZXNzZW5nZXIubGlzdGVuRm9yUXVlcnkoZSx0LG4pfV9kaXNwYXRjaChlLHQpe3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaChlLHQpLnRoZW4oKCk9PnRoaXMuZ2V0U3RhdGUoKSkuY2F0Y2goZT0+e3Rocm93IHRoaXMuX2Vycm9yVHJhbnNmb3JtZXIudHJhbnNmb3JtKGUpfSl9fTtsdj1mdW5jdGlvbihlLHQsbixpKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsYT1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxuKTppO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKWE9UmVmbGVjdC5kZWNvcmF0ZShlLHQsbixpKTtlbHNlIGZvcih2YXIgcz1lLmxlbmd0aC0xO3M+PTA7cy0tKShyPWVbc10pJiYoYT0obzwzP3IoYSk6bz4zP3IodCxuLGEpOnIodCxuKSl8fGEpO3JldHVybiBvPjMmJmEmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4sYSksYX0oW0NyXSxsdik7Y29uc3QgdXY9bHY7ZnVuY3Rpb24gaHYoZSl7cmV0dXJuKC4uLnQpPT57Y29uc3Qgbj10LnBvcCgpO3JldHVybiBlKC4uLnQsKC4uLmUpPT57Y29uc3QgdD1uKC4uLmUpO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/UGUodCk6dH0pfX1jb25zdCBwdj1odihGZSksbXY9aHYoUmUoTGUsKGUsdCk9PkJlKGUsdCkpKTtjbGFzcyB5diBleHRlbmRzIF90e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSx7bWVzc2FnZTp0fHxcIkFuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLiBUaGUgY2hlY2tvdXQgcHJvY2VzcyBjYW5ub3QgY29udGludWUgYXMgYSByZXN1bHQuXCJ9KSx0aGlzLm5hbWU9XCJVbnJlY292ZXJhYmxlRXJyb3JcIix0aGlzLnR5cGU9XCJ1bnJlY292ZXJhYmxlXCJ9fWZ1bmN0aW9uIGd2KGUpe3JldHVybiBlLnJlZHVjZSgoZSx0KT0+dD9bLi4uZSx0XTplLFtdKS5qb2luKFwiIFwiKX1jbGFzcyB2diBleHRlbmRzIF90e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUse21lc3NhZ2U6XCJUaGUgcmVxdWVzdCBoYXMgdGltZWQgb3V0IG9yIGFib3J0ZWQuXCJ9KSx0aGlzLm5hbWU9XCJUaW1lb3V0RXJyb3JcIix0aGlzLnR5cGU9XCJ0aW1lb3V0XCJ9fWNsYXNzIGZ2e2NvbnN0cnVjdG9yKCl7dGhpcy5fZmFjdG9yeU1ldGhvZHM9e30sdGhpcy5yZWdpc3RlcihcImRlZmF1bHRcIiwoZSx0KT0+bmV3IF90KGUse21lc3NhZ2U6dH0pKSx0aGlzLnJlZ2lzdGVyKFwiaW50ZXJuYWxcIiwoZSx0KT0+ZnVuY3Rpb24oZSx0KXtjb25zdHtib2R5Om59PWUse2Vycm9yczppPVtdfT1uO3JldHVybiBuZXcgX3QoZSx7bWVzc2FnZTpndihpKXx8bi5kZXRhaWx8fG4udGl0bGV8fHQsZXJyb3JzOmkubGVuZ3RoP2kubWFwKGU9Pih7Y29kZTpuLnR5cGUsbWVzc2FnZTplfSkpOlt7Y29kZTpuLnR5cGUsbWVzc2FnZTpuLmRldGFpbHx8bi50aXRsZX1dfSl9KGUsdCkpLHRoaXMucmVnaXN0ZXIoXCJzdG9yZWZyb250XCIsKGUsdCk9PmZ1bmN0aW9uKGUsdCl7Y29uc3R7Ym9keTpufT1lO3JldHVybiBuZXcgX3QoZSx7bWVzc2FnZTp0fHxuLmRldGFpbHx8bi50aXRsZSxlcnJvcnM6W3tjb2RlOm4uY29kZXx8bi50eXBlLG1lc3NhZ2U6bi5kZXRhaWx8fG4udGl0bGV9XX0pfShlLHQpKSx0aGlzLnJlZ2lzdGVyKFwicGF5bWVudFwiLChlLHQpPT5ibShlLHQpKSx0aGlzLnJlZ2lzdGVyKFwidGltZW91dFwiLGU9Pm5ldyB2dihlKSl9cmVnaXN0ZXIoZSx0KXt0aGlzLl9mYWN0b3J5TWV0aG9kc1tlXT10fWNyZWF0ZUVycm9yKGUsdCl7cmV0dXJuKHRoaXMuX2ZhY3RvcnlNZXRob2RzW3RoaXMuX2dldFR5cGUoZSldfHx0aGlzLl9mYWN0b3J5TWV0aG9kcy5kZWZhdWx0KShlLHQpfV9nZXRUeXBlKGUpe2lmKDA9PT1lLnN0YXR1cylyZXR1cm5cInRpbWVvdXRcIjtpZih0aGlzLl9pc1N0b3JlZnJvbnRFcnJvclJlc3BvbnNlQm9keShlLmJvZHkpKXJldHVyblwic3RvcmVmcm9udFwiO2lmKHRoaXMuX2lzSW50ZXJuYWxFcnJvclJlc3BvbnNlQm9keShlLmJvZHkpKXtjb25zdCB0PUwoZS5ib2R5LnR5cGUuc3BsaXQoXCIvXCIpKTtyZXR1cm4gdCYmdGhpcy5fZmFjdG9yeU1ldGhvZHNbdF0/dDpcImludGVybmFsXCJ9Y29uc3QgdD1MKGUuYm9keSYmZS5ib2R5LmVycm9ycyk7cmV0dXJuIHQmJnQuY29kZSYmdGhpcy5fZmFjdG9yeU1ldGhvZHNbdC5jb2RlXT90LmNvZGU6XCJwYXltZW50XCJ9X2lzU3RvcmVmcm9udEVycm9yUmVzcG9uc2VCb2R5KGUpe2NvbnN0IHQ9ZTtyZXR1cm4hdGhpcy5faXNJbnRlcm5hbEVycm9yUmVzcG9uc2VCb2R5KGUpJiZcInN0cmluZ1wiPT10eXBlb2YgdC50aXRsZSYmXCJzdHJpbmdcIj09dHlwZW9mIHQudHlwZSYmXCJudW1iZXJcIj09dHlwZW9mIHQuc3RhdHVzJiZcInN0cmluZ1wiPT10eXBlb2YgdC5kZXRhaWx9X2lzSW50ZXJuYWxFcnJvclJlc3BvbnNlQm9keShlKXtjb25zdCB0PWU7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQuZXJyb3JzJiZcInN0cmluZ1wiPT10eXBlb2YgdC50aXRsZSYmXCJzdHJpbmdcIj09dHlwZW9mIHQudHlwZSYmXCJudW1iZXJcIj09dHlwZW9mIHQuc3RhdHVzfX1mdW5jdGlvbiBTdihlLHQpe3JldHVybiBBcnJheS5pc0FycmF5KGUpP2UubWFwKGU9PlN2KGUsdCkpOk0oZSk/WChIKGUsdCksKGUsbixpKT0+e2VbaV09U3Yobix0KX0se30pOmV9ZnVuY3Rpb24gX3YoZSx0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUudHlwZT09PWR0LkNsZWFyRXJyb3J9KHQpP1N2KGUsZT0+ZT09PXQucGF5bG9hZCk6ZX1mdW5jdGlvbiB3dihlLHQsbil7cmV0dXJuIGU9PT10fHwoZSYmdCYmXCJvYmplY3RcIj09dHlwZW9mIGUmJlwib2JqZWN0XCI9PXR5cGVvZiB0P0FycmF5LmlzQXJyYXkoZSkmJkFycmF5LmlzQXJyYXkodCk/ZnVuY3Rpb24oZSx0LG4pe2lmKGUubGVuZ3RoIT09dC5sZW5ndGgpcmV0dXJuITE7Zm9yKGxldCBpPTAscj1lLmxlbmd0aDtpPHI7aSsrKWlmKCF3dihlW2ldLHRbaV0sbikpcmV0dXJuITE7cmV0dXJuITB9KGUsdCxuKTohQXJyYXkuaXNBcnJheShlKSYmIUFycmF5LmlzQXJyYXkodCkmJihlIGluc3RhbmNlb2YgRGF0ZSYmdCBpbnN0YW5jZW9mIERhdGU/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5nZXRUaW1lKCk9PT10LmdldFRpbWUoKX0oZSx0KTohKGUgaW5zdGFuY2VvZiBEYXRlfHx0IGluc3RhbmNlb2YgRGF0ZSkmJihlIGluc3RhbmNlb2YgUmVnRXhwJiZ0IGluc3RhbmNlb2YgUmVnRXhwP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGUudG9TdHJpbmcoKT09PXQudG9TdHJpbmcoKX0oZSx0KTohKGUgaW5zdGFuY2VvZiBSZWdFeHB8fHQgaW5zdGFuY2VvZiBSZWdFeHApJiZmdW5jdGlvbihlLHQsbil7Y29uc3QgaT1uJiZuLmtleUZpbHRlcixyPWk/T2JqZWN0LmtleXMoZSkuZmlsdGVyKGkpOk9iamVjdC5rZXlzKGUpLG89aT9PYmplY3Qua2V5cyh0KS5maWx0ZXIoaSk6T2JqZWN0LmtleXModCk7aWYoci5sZW5ndGghPT1vLmxlbmd0aClyZXR1cm4hMTtmb3IobGV0IGk9MCxvPXIubGVuZ3RoO2k8bztpKyspe2NvbnN0IG89cltpXTtpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbykpcmV0dXJuITE7aWYoIXd2KGVbb10sdFtvXSxuKSlyZXR1cm4hMX1yZXR1cm4hMH0oZSx0LG4pKSk6ZT09PXQpfWZ1bmN0aW9uIEN2KGUsdCl7cmV0dXJuIHZvaWQgMD09PXR8fHd2KGUsdCk/ZTp0fWZ1bmN0aW9uIEl2KGUsdCxuKXtyZXR1cm4gZSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCkmJnd2KGVbdF0sbik/ZTpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse1t0XTpufSl9Y29uc3QgYnY9e2Vycm9yczp7fSxzdGF0dXNlczp7fX07ZnVuY3Rpb24gUHYoZT1idix0KXtyZXR1cm4gZCh7ZGF0YTpPdixlcnJvcnM6YyhFdixfdiksc3RhdHVzZXM6QXZ9KShlLHQpfWZ1bmN0aW9uIE92KGUsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBZZS5VcGRhdGVCaWxsaW5nQWRkcmVzc1N1Y2NlZWRlZDpjYXNlIFllLkNvbnRpbnVlQXNHdWVzdFN1Y2NlZWRlZDpjYXNlIEphLkxvYWRDaGVja291dFN1Y2NlZWRlZDpyZXR1cm4gQ3YoZSx0LnBheWxvYWQmJnQucGF5bG9hZC5iaWxsaW5nQWRkcmVzcyk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24gRXYoZT1idi5lcnJvcnMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRSZXF1ZXN0ZWQ6Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJsb2FkRXJyb3JcIix2b2lkIDApO2Nhc2UgSmEuTG9hZENoZWNrb3V0RmFpbGVkOnJldHVybiBJdihlLFwibG9hZEVycm9yXCIsdC5wYXlsb2FkKTtjYXNlIFllLlVwZGF0ZUJpbGxpbmdBZGRyZXNzUmVxdWVzdGVkOmNhc2UgWWUuVXBkYXRlQmlsbGluZ0FkZHJlc3NTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJ1cGRhdGVFcnJvclwiLHZvaWQgMCk7Y2FzZSBZZS5VcGRhdGVCaWxsaW5nQWRkcmVzc0ZhaWxlZDpyZXR1cm4gSXYoZSxcInVwZGF0ZUVycm9yXCIsdC5wYXlsb2FkKTtjYXNlIGd5LlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0ZWQ6Y2FzZSBneS5VcGRhdGVTdWJzY3JpcHRpb25zU3VjY2VlZGVkOmNhc2UgWWUuQ29udGludWVBc0d1ZXN0UmVxdWVzdGVkOmNhc2UgWWUuQ29udGludWVBc0d1ZXN0U3VjY2VlZGVkOnJldHVybiBJdihlLFwiY29udGludWVBc0d1ZXN0RXJyb3JcIix2b2lkIDApO2Nhc2UgZ3kuVXBkYXRlU3Vic2NyaXB0aW9uc0ZhaWxlZDpjYXNlIFllLkNvbnRpbnVlQXNHdWVzdEZhaWxlZDpyZXR1cm4gSXYoZSxcImNvbnRpbnVlQXNHdWVzdEVycm9yXCIsdC5wYXlsb2FkKTtkZWZhdWx0OnJldHVybiBlfX1mdW5jdGlvbiBBdihlPWJ2LnN0YXR1c2VzLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgSmEuTG9hZENoZWNrb3V0UmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNMb2FkaW5nXCIsITApO2Nhc2UgSmEuTG9hZENoZWNrb3V0U3VjY2VlZGVkOmNhc2UgSmEuTG9hZENoZWNrb3V0RmFpbGVkOnJldHVybiBJdihlLFwiaXNMb2FkaW5nXCIsITEpO2Nhc2UgWWUuVXBkYXRlQmlsbGluZ0FkZHJlc3NSZXF1ZXN0ZWQ6cmV0dXJuIEl2KGUsXCJpc1VwZGF0aW5nXCIsITApO2Nhc2UgWWUuVXBkYXRlQmlsbGluZ0FkZHJlc3NGYWlsZWQ6Y2FzZSBZZS5VcGRhdGVCaWxsaW5nQWRkcmVzc1N1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImlzVXBkYXRpbmdcIiwhMSk7Y2FzZSBZZS5Db250aW51ZUFzR3Vlc3RSZXF1ZXN0ZWQ6Y2FzZSBneS5VcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNDb250aW51aW5nQXNHdWVzdFwiLCEwKTtjYXNlIGd5LlVwZGF0ZVN1YnNjcmlwdGlvbnNTdWNjZWVkZWQ6Y2FzZSBneS5VcGRhdGVTdWJzY3JpcHRpb25zRmFpbGVkOmNhc2UgWWUuQ29udGludWVBc0d1ZXN0RmFpbGVkOmNhc2UgWWUuQ29udGludWVBc0d1ZXN0U3VjY2VlZGVkOnJldHVybiBJdihlLFwiaXNDb250aW51aW5nQXNHdWVzdFwiLCExKTtkZWZhdWx0OnJldHVybiBlfX1jb25zdCBrdj1mdW5jdGlvbiBlKHQsbixpKXtjb25zdHttYXRjaE9iamVjdDpyPShlLHQpPT52b2lkIDAhPT1lLmlkJiZlLmlkPT09dC5pZH09aXx8e307aWYoIXQpcmV0dXJuIG47aWYoIW58fHQ9PT1uKXJldHVybiB0O2xldCBvPTAsYT0wO2NvbnN0IHM9KGUsdCxuKT0+KG8rPWU9PT10PzE6MCxhKz1lPT09bj8xOjAsZSksZD1uLm1hcCgobixpKT0+e2NvbnN0IG89dCYmdFtpXTtyZXR1cm4gQ3kobykmJkN5KG4pP3IobyxuKT9zKFR2KG8sbiksbyxuKTpzKEN2KG8sbiksbyxuKTpPKG8pJiZPKG4pP3MoZShvLG4pLG8sbik6cyhDdihvLG4pLG8sbil9KTtyZXR1cm4gbz09PW4ubGVuZ3RoJiZ0JiZ0Lmxlbmd0aD09PW4ubGVuZ3RoP3Q6YT09PW4ubGVuZ3RoP246ZH0sVHY9ZnVuY3Rpb24gZSh0LG4pe3JldHVybiB0P24mJnQhPT1uP09iamVjdC5rZXlzKG4pLnJlZHVjZSgodCxpKT0+e2NvbnN0IHI9dFtpXSxvPW5baV07cmV0dXJuIEN5KHIpJiZDeShvKT9Jdih0LGksZShyLG8pKTpPKHIpJiZPKG8pP0l2KHQsaSxrdihyLG8pKTpJdih0LGksbyl9LHQpOnQ6bn0sRHY9e2Vycm9yczp7fSxzdGF0dXNlczp7fX07ZnVuY3Rpb24gTXYoZT1Edix0KXtyZXR1cm4gZCh7ZGF0YTp6dixlcnJvcnM6Yyh4dixfdiksc3RhdHVzZXM6TnZ9KShlLHQpfWZ1bmN0aW9uIHp2KGUsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBZZS5VcGRhdGVCaWxsaW5nQWRkcmVzc1N1Y2NlZWRlZDpjYXNlIEphLkxvYWRDaGVja291dFN1Y2NlZWRlZDpjYXNlIHN5LkNyZWF0ZUNvbnNpZ25tZW50c1N1Y2NlZWRlZDpjYXNlIHN5LkRlbGV0ZUNvbnNpZ25tZW50U3VjY2VlZGVkOmNhc2Ugc3kuVXBkYXRlQ29uc2lnbm1lbnRTdWNjZWVkZWQ6Y2FzZSBzeS5VcGRhdGVTaGlwcGluZ09wdGlvblN1Y2NlZWRlZDpjYXNlIHN5LkxvYWRTaGlwcGluZ09wdGlvbnNTdWNjZWVkZWQ6Y2FzZSBidC5BcHBseUNvdXBvblN1Y2NlZWRlZDpjYXNlIGJ0LlJlbW92ZUNvdXBvblN1Y2NlZWRlZDpjYXNlIEF0LkFwcGx5R2lmdENlcnRpZmljYXRlU3VjY2VlZGVkOmNhc2UgQXQuUmVtb3ZlR2lmdENlcnRpZmljYXRlU3VjY2VlZGVkOnJldHVybiBUdihlLHQucGF5bG9hZCYmdC5wYXlsb2FkLmNhcnQpO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIE52KGU9RHYuc3RhdHVzZXMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRSZXF1ZXN0ZWQ6cmV0dXJuIEl2KGUsXCJpc0xvYWRpbmdcIiwhMCk7Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRGYWlsZWQ6Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJpc0xvYWRpbmdcIiwhMSk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24geHYoZT1Edi5lcnJvcnMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRSZXF1ZXN0ZWQ6Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJsb2FkRXJyb3JcIix2b2lkIDApO2Nhc2UgSmEuTG9hZENoZWNrb3V0RmFpbGVkOnJldHVybiBJdihlLFwibG9hZEVycm9yXCIsdC5wYXlsb2FkKTtkZWZhdWx0OnJldHVybiBlfX12YXIgRnY7IWZ1bmN0aW9uKGUpe2UuSW5pdGlhbGl6ZUJ1dHRvbkZhaWxlZD1cIklOSVRJQUxJWkVfQlVUVE9OX0ZBSUxFRFwiLGUuSW5pdGlhbGl6ZUJ1dHRvblJlcXVlc3RlZD1cIklOSVRJQUxJWkVfQlVUVE9OX1JFUVVFU1RFRFwiLGUuSW5pdGlhbGl6ZUJ1dHRvblN1Y2NlZWRlZD1cIklOSVRJQUxJWkVfQlVUVE9OX1NVQ0NFRURFRFwiLGUuRGVpbml0aWFsaXplQnV0dG9uRmFpbGVkPVwiREVJTklUSUFMSVpFX0JVVFRPTl9GQUlMRURcIixlLkRlaW5pdGlhbGl6ZUJ1dHRvblJlcXVlc3RlZD1cIkRFSU5JVElBTElaRV9CVVRUT05fUkVRVUVTVEVEXCIsZS5EZWluaXRpYWxpemVCdXR0b25TdWNjZWVkZWQ9XCJERUlOSVRJQUxJWkVfQlVUVE9OX1NVQ0NFRURFRFwifShGdnx8KEZ2PXt9KSk7Y29uc3QgUnY9e2RhdGE6e30sZXJyb3JzOnt9LHN0YXR1c2VzOnt9fSxMdj17aW5pdGlhbGl6ZWRDb250YWluZXJzOnt9fSxCdj17fSxqdj17fTtmdW5jdGlvbiBVdihlPVJ2LHQpe3JldHVybiB0Lm1ldGEmJnQubWV0YS5tZXRob2RJZD9kKHtkYXRhOmQoe1t0Lm1ldGEubWV0aG9kSWRdOnF2fSksZXJyb3JzOmQoe1t0Lm1ldGEubWV0aG9kSWRdOlZ2fSksc3RhdHVzZXM6ZCh7W3QubWV0YS5tZXRob2RJZF06R3Z9KX0pKGUsdCk6ZX1mdW5jdGlvbiBxdihlPUx2LHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgRnYuSW5pdGlhbGl6ZUJ1dHRvblN1Y2NlZWRlZDpyZXR1cm4gdC5tZXRhJiZ0Lm1ldGEuY29udGFpbmVySWQ/VHYoZSx7aW5pdGlhbGl6ZWRDb250YWluZXJzOntbdC5tZXRhLmNvbnRhaW5lcklkXTohMH19KTplO2Nhc2UgRnYuRGVpbml0aWFsaXplQnV0dG9uU3VjY2VlZGVkOnJldHVybiBJdihlLFwiaW5pdGlhbGl6ZWRDb250YWluZXJzXCIse30pfXJldHVybiBlfWZ1bmN0aW9uIFZ2KGU9QnYsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBGdi5Jbml0aWFsaXplQnV0dG9uUmVxdWVzdGVkOmNhc2UgRnYuSW5pdGlhbGl6ZUJ1dHRvblN1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImluaXRpYWxpemVFcnJvclwiLHZvaWQgMCk7Y2FzZSBGdi5Jbml0aWFsaXplQnV0dG9uRmFpbGVkOnJldHVybiBJdihlLFwiaW5pdGlhbGl6ZUVycm9yXCIsdC5wYXlsb2FkKTtjYXNlIEZ2LkRlaW5pdGlhbGl6ZUJ1dHRvblJlcXVlc3RlZDpjYXNlIEZ2LkRlaW5pdGlhbGl6ZUJ1dHRvblN1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImRlaW5pdGlhbGl6ZUVycm9yXCIsdm9pZCAwKTtjYXNlIEZ2LkRlaW5pdGlhbGl6ZUJ1dHRvbkZhaWxlZDpyZXR1cm4gSXYoZSxcImRlaW5pdGlhbGl6ZUVycm9yXCIsdC5wYXlsb2FkKTtkZWZhdWx0OnJldHVybiBlfX1mdW5jdGlvbiBHdihlPWp2LHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgRnYuSW5pdGlhbGl6ZUJ1dHRvblJlcXVlc3RlZDpyZXR1cm4gSXYoZSxcImlzSW5pdGlhbGl6aW5nXCIsITApO2Nhc2UgRnYuSW5pdGlhbGl6ZUJ1dHRvbkZhaWxlZDpjYXNlIEZ2LkluaXRpYWxpemVCdXR0b25TdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJpc0luaXRpYWxpemluZ1wiLCExKTtjYXNlIEZ2LkRlaW5pdGlhbGl6ZUJ1dHRvblJlcXVlc3RlZDpyZXR1cm4gSXYoZSxcImlzRGVpbml0aWFsaXppbmdcIiwhMCk7Y2FzZSBGdi5EZWluaXRpYWxpemVCdXR0b25GYWlsZWQ6Y2FzZSBGdi5EZWluaXRpYWxpemVCdXR0b25TdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJpc0RlaW5pdGlhbGl6aW5nXCIsITEpO2RlZmF1bHQ6cmV0dXJuIGV9fWNvbnN0IEh2PXttZXRhOnt9LGVycm9yczp7fSxzdGF0dXNlczp7fX07ZnVuY3Rpb24gJHYoZT1Idix0KXtyZXR1cm4gZCh7ZGF0YTpXdixlcnJvcnM6YyhZdixfdiksc3RhdHVzZXM6S3Z9KShlLHQpfWZ1bmN0aW9uIFd2KGUsdCl7cmV0dXJuIHQudHlwZT09PXZ0LkxvYWRDb25maWdTdWNjZWVkZWQ/VHYoZSx0LnBheWxvYWQpOmV9ZnVuY3Rpb24gWXYoZT1Idi5lcnJvcnMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSB2dC5Mb2FkQ29uZmlnU3VjY2VlZGVkOnJldHVybiBJdihlLFwibG9hZEVycm9yXCIsdm9pZCAwKTtjYXNlIHZ0LkxvYWRDb25maWdGYWlsZWQ6cmV0dXJuIEl2KGUsXCJsb2FkRXJyb3JcIix0LnBheWxvYWQpO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIEt2KGU9SHYuc3RhdHVzZXMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSB2dC5Mb2FkQ29uZmlnUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNMb2FkaW5nXCIsITApO2Nhc2UgdnQuTG9hZENvbmZpZ1N1Y2NlZWRlZDpjYXNlIHZ0LkxvYWRDb25maWdGYWlsZWQ6cmV0dXJuIEl2KGUsXCJpc0xvYWRpbmdcIiwhMSk7ZGVmYXVsdDpyZXR1cm4gZX19Y29uc3QgSnY9e2Vycm9yczp7fSxzdGF0dXNlczp7fX07ZnVuY3Rpb24gWnYoZT1Kdix0KXtyZXR1cm4gZCh7ZGF0YTpRdixlcnJvcnM6YyhYdixfdiksc3RhdHVzZXM6ZWZ9KShlLHQpfWZ1bmN0aW9uIFF2KGUsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRTdWNjZWVkZWQ6Y2FzZSBidC5BcHBseUNvdXBvblN1Y2NlZWRlZDpjYXNlIHN5LlVwZGF0ZVNoaXBwaW5nT3B0aW9uU3VjY2VlZGVkOmNhc2UgYnQuUmVtb3ZlQ291cG9uU3VjY2VlZGVkOmNhc2UgSnAuTG9hZE9yZGVyU3VjY2VlZGVkOnJldHVybiBrdihlLHQucGF5bG9hZCYmdC5wYXlsb2FkLmNvdXBvbnMpO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIFh2KGU9e30sdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBidC5BcHBseUNvdXBvblJlcXVlc3RlZDpjYXNlIGJ0LkFwcGx5Q291cG9uU3VjY2VlZGVkOnJldHVybiBJdihlLFwiYXBwbHlDb3Vwb25FcnJvclwiLHZvaWQgMCk7Y2FzZSBidC5BcHBseUNvdXBvbkZhaWxlZDpyZXR1cm4gSXYoZSxcImFwcGx5Q291cG9uRXJyb3JcIix0LnBheWxvYWQpO2Nhc2UgYnQuUmVtb3ZlQ291cG9uUmVxdWVzdGVkOmNhc2UgYnQuUmVtb3ZlQ291cG9uU3VjY2VlZGVkOnJldHVybiBJdihlLFwicmVtb3ZlQ291cG9uRXJyb3JcIix2b2lkIDApO2Nhc2UgYnQuUmVtb3ZlQ291cG9uRmFpbGVkOnJldHVybiBJdihlLFwicmVtb3ZlQ291cG9uRXJyb3JcIix0LnBheWxvYWQpO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIGVmKGU9e30sdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBidC5BcHBseUNvdXBvblJlcXVlc3RlZDpyZXR1cm4gSXYoZSxcImlzQXBwbHlpbmdDb3Vwb25cIiwhMCk7Y2FzZSBidC5BcHBseUNvdXBvblN1Y2NlZWRlZDpjYXNlIGJ0LkFwcGx5Q291cG9uRmFpbGVkOnJldHVybiBJdihlLFwiaXNBcHBseWluZ0NvdXBvblwiLCExKTtjYXNlIGJ0LlJlbW92ZUNvdXBvblJlcXVlc3RlZDpyZXR1cm4gSXYoZSxcImlzUmVtb3ZpbmdDb3Vwb25cIiwhMCk7Y2FzZSBidC5SZW1vdmVDb3Vwb25TdWNjZWVkZWQ6Y2FzZSBidC5SZW1vdmVDb3Vwb25GYWlsZWQ6cmV0dXJuIEl2KGUsXCJpc1JlbW92aW5nQ291cG9uXCIsITEpO2RlZmF1bHQ6cmV0dXJuIGV9fWNvbnN0IHRmPXtlcnJvcnM6e30sc3RhdHVzZXM6e319O2Z1bmN0aW9uIG5mKGU9dGYsdCl7cmV0dXJuIGQoe2RhdGE6cmYsZXJyb3JzOmMob2YsX3YpLHN0YXR1c2VzOmFmfSkoZSx0KX1mdW5jdGlvbiByZihlLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgSmEuTG9hZENoZWNrb3V0U3VjY2VlZGVkOmNhc2Ugc3kuQ3JlYXRlQ29uc2lnbm1lbnRzU3VjY2VlZGVkOmNhc2Ugc3kuVXBkYXRlQ29uc2lnbm1lbnRTdWNjZWVkZWQ6Y2FzZSBzeS5EZWxldGVDb25zaWdubWVudFN1Y2NlZWRlZDpjYXNlIHN5LlVwZGF0ZVNoaXBwaW5nT3B0aW9uU3VjY2VlZGVkOmNhc2UgYnQuQXBwbHlDb3Vwb25TdWNjZWVkZWQ6Y2FzZSBidC5SZW1vdmVDb3Vwb25TdWNjZWVkZWQ6Y2FzZSBBdC5BcHBseUdpZnRDZXJ0aWZpY2F0ZVN1Y2NlZWRlZDpjYXNlIEF0LlJlbW92ZUdpZnRDZXJ0aWZpY2F0ZVN1Y2NlZWRlZDpyZXR1cm4ga3YoZSx0LnBheWxvYWQmJnQucGF5bG9hZC5naWZ0Q2VydGlmaWNhdGVzKTtkZWZhdWx0OnJldHVybiBlfX1mdW5jdGlvbiBvZihlPXRmLmVycm9ycyx0KXtzd2l0Y2godC50eXBlKXtjYXNlIEF0LkFwcGx5R2lmdENlcnRpZmljYXRlUmVxdWVzdGVkOmNhc2UgQXQuQXBwbHlHaWZ0Q2VydGlmaWNhdGVTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJhcHBseUdpZnRDZXJ0aWZpY2F0ZUVycm9yXCIsdm9pZCAwKTtjYXNlIEF0LkFwcGx5R2lmdENlcnRpZmljYXRlRmFpbGVkOnJldHVybiBJdihlLFwiYXBwbHlHaWZ0Q2VydGlmaWNhdGVFcnJvclwiLHQucGF5bG9hZCk7Y2FzZSBBdC5SZW1vdmVHaWZ0Q2VydGlmaWNhdGVSZXF1ZXN0ZWQ6Y2FzZSBBdC5SZW1vdmVHaWZ0Q2VydGlmaWNhdGVTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJyZW1vdmVHaWZ0Q2VydGlmaWNhdGVFcnJvclwiLHZvaWQgMCk7Y2FzZSBBdC5SZW1vdmVHaWZ0Q2VydGlmaWNhdGVGYWlsZWQ6cmV0dXJuIEl2KGUsXCJyZW1vdmVHaWZ0Q2VydGlmaWNhdGVFcnJvclwiLHQucGF5bG9hZCk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24gYWYoZT10Zi5zdGF0dXNlcyx0KXtzd2l0Y2godC50eXBlKXtjYXNlIEF0LkFwcGx5R2lmdENlcnRpZmljYXRlUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNBcHBseWluZ0dpZnRDZXJ0aWZpY2F0ZVwiLCEwKTtjYXNlIEF0LkFwcGx5R2lmdENlcnRpZmljYXRlU3VjY2VlZGVkOmNhc2UgQXQuQXBwbHlHaWZ0Q2VydGlmaWNhdGVGYWlsZWQ6cmV0dXJuIEl2KGUsXCJpc0FwcGx5aW5nR2lmdENlcnRpZmljYXRlXCIsITEpO2Nhc2UgQXQuUmVtb3ZlR2lmdENlcnRpZmljYXRlUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNSZW1vdmluZ0dpZnRDZXJ0aWZpY2F0ZVwiLCEwKTtjYXNlIEF0LlJlbW92ZUdpZnRDZXJ0aWZpY2F0ZVN1Y2NlZWRlZDpjYXNlIEF0LlJlbW92ZUdpZnRDZXJ0aWZpY2F0ZUZhaWxlZDpyZXR1cm4gSXYoZSxcImlzUmVtb3ZpbmdHaWZ0Q2VydGlmaWNhdGVcIiwhMSk7ZGVmYXVsdDpyZXR1cm4gZX19Y29uc3Qgc2Y9e2Vycm9yczp7fSxzdGF0dXNlczp7fX07ZnVuY3Rpb24gZGYoZT1zZix0KXtyZXR1cm4gZCh7ZGF0YTpjZixlcnJvcnM6YyhsZixfdiksc3RhdHVzZXM6dWZ9KShlLHQpfWZ1bmN0aW9uIGNmKGUsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBZZS5Db250aW51ZUFzR3Vlc3RTdWNjZWVkZWQ6Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRTdWNjZWVkZWQ6cmV0dXJuIFR2KGUsdC5wYXlsb2FkJiZ0LnBheWxvYWQuY3VzdG9tZXIpO2Nhc2UgWWEuQ3JlYXRlQ3VzdG9tZXJBZGRyZXNzU3VjY2VlZGVkOnJldHVybiBUdihlLHQucGF5bG9hZCk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24gbGYoZT1zZi5lcnJvcnMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBZYS5DcmVhdGVDdXN0b21lclJlcXVlc3RlZDpjYXNlIFlhLkNyZWF0ZUN1c3RvbWVyU3VjY2VlZGVkOnJldHVybiBJdihlLFwiY3JlYXRlRXJyb3JcIix2b2lkIDApO2Nhc2UgWWEuQ3JlYXRlQ3VzdG9tZXJGYWlsZWQ6cmV0dXJuIEl2KGUsXCJjcmVhdGVFcnJvclwiLHQucGF5bG9hZCk7Y2FzZSBZYS5DcmVhdGVDdXN0b21lckFkZHJlc3NSZXF1ZXN0ZWQ6Y2FzZSBZYS5DcmVhdGVDdXN0b21lckFkZHJlc3NTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJjcmVhdGVBZGRyZXNzRXJyb3JcIix2b2lkIDApO2Nhc2UgWWEuQ3JlYXRlQ3VzdG9tZXJBZGRyZXNzRmFpbGVkOnJldHVybiBJdihlLFwiY3JlYXRlQWRkcmVzc0Vycm9yXCIsdC5wYXlsb2FkKTtkZWZhdWx0OnJldHVybiBlfX1mdW5jdGlvbiB1ZihlPXNmLnN0YXR1c2VzLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgWWEuQ3JlYXRlQ3VzdG9tZXJSZXF1ZXN0ZWQ6cmV0dXJuIEl2KGUsXCJpc0NyZWF0aW5nXCIsITApO2Nhc2UgWWEuQ3JlYXRlQ3VzdG9tZXJGYWlsZWQ6Y2FzZSBZYS5DcmVhdGVDdXN0b21lclN1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImlzQ3JlYXRpbmdcIiwhMSk7Y2FzZSBZYS5DcmVhdGVDdXN0b21lckFkZHJlc3NSZXF1ZXN0ZWQ6cmV0dXJuIEl2KGUsXCJpc0NyZWF0aW5nQWRkcmVzc1wiLCEwKTtjYXNlIFlhLkNyZWF0ZUN1c3RvbWVyQWRkcmVzc0ZhaWxlZDpjYXNlIFlhLkNyZWF0ZUN1c3RvbWVyQWRkcmVzc1N1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImlzQ3JlYXRpbmdBZGRyZXNzXCIsITEpO2RlZmF1bHQ6cmV0dXJuIGV9fWNvbnN0IGhmPXtkYXRhOnt9LGVycm9yczp7fSxzdGF0dXNlczp7fX07ZnVuY3Rpb24gcGYoZT1oZix0KXtyZXR1cm4gZCh7ZGF0YTptZixlcnJvcnM6Yyh5Zixfdiksc3RhdHVzZXM6Z2Z9KShlLHQpfWZ1bmN0aW9uIG1mKGU9aGYuZGF0YSx0KXtzd2l0Y2godC50eXBlKXtjYXNlIEthLkluaXRpYWxpemVTdWNjZWVkZWQ6cmV0dXJuIFR2KGUse1t0Lm1ldGEmJnQubWV0YS5tZXRob2RJZF06e2lzSW5pdGlhbGl6ZWQ6ITB9fSk7Y2FzZSBLYS5EZWluaXRpYWxpemVTdWNjZWVkZWQ6cmV0dXJuIFR2KGUse1t0Lm1ldGEmJnQubWV0YS5tZXRob2RJZF06e2lzSW5pdGlhbGl6ZWQ6ITF9fSl9cmV0dXJuIGV9ZnVuY3Rpb24geWYoZT1oZi5lcnJvcnMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBLYS5Jbml0aWFsaXplUmVxdWVzdGVkOmNhc2UgS2EuSW5pdGlhbGl6ZVN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7aW5pdGlhbGl6ZUVycm9yczpPYmplY3QuYXNzaWduKHt9LGUuaW5pdGlhbGl6ZUVycm9ycyksaW5pdGlhbGl6ZU1ldGhvZElkOmUuaW5pdGlhbGl6ZU1ldGhvZElkP2UuaW5pdGlhbGl6ZU1ldGhvZElkOnZvaWQgMH0pO2Nhc2UgS2EuSW5pdGlhbGl6ZUZhaWxlZDpyZXR1cm4gVHYoZSx7aW5pdGlhbGl6ZUVycm9yczpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZS5pbml0aWFsaXplRXJyb3JzKSx7W3QubWV0YSYmdC5tZXRhLm1ldGhvZElkXTp0LnBheWxvYWR9KSxpbml0aWFsaXplTWV0aG9kSWQ6dC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWR9KTtjYXNlIEthLkRlaW5pdGlhbGl6ZVJlcXVlc3RlZDpjYXNlIEthLkRlaW5pdGlhbGl6ZVN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7ZGVpbml0aWFsaXplRXJyb3I6dm9pZCAwLGRlaW5pdGlhbGl6ZU1ldGhvZElkOnZvaWQgMH0pO2Nhc2UgS2EuRGVpbml0aWFsaXplRmFpbGVkOnJldHVybiBUdihlLHtkZWluaXRpYWxpemVFcnJvcjp0LnBheWxvYWQsZGVpbml0aWFsaXplTWV0aG9kSWQ6dC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWR9KTtjYXNlIEthLlNpZ25JblJlcXVlc3RlZDpjYXNlIEthLlNpZ25JblN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7c2lnbkluRXJyb3I6dm9pZCAwLHNpZ25Jbk1ldGhvZElkOnZvaWQgMH0pO2Nhc2UgS2EuU2lnbkluRmFpbGVkOnJldHVybiBUdihlLHtzaWduSW5FcnJvcjp0LnBheWxvYWQsc2lnbkluTWV0aG9kSWQ6dC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWR9KTtjYXNlIEthLlNpZ25PdXRSZXF1ZXN0ZWQ6Y2FzZSBLYS5TaWduT3V0U3VjY2VlZGVkOnJldHVybiBUdihlLHtzaWduT3V0RXJyb3I6dm9pZCAwLHNpZ25PdXRNZXRob2RJZDp2b2lkIDB9KTtjYXNlIEthLlNpZ25PdXRGYWlsZWQ6cmV0dXJuIFR2KGUse3NpZ25PdXRFcnJvcjp0LnBheWxvYWQsc2lnbk91dE1ldGhvZElkOnQubWV0YSYmdC5tZXRhLm1ldGhvZElkfSk7Y2FzZSBLYS5FeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0UmVxdWVzdGVkOmNhc2UgS2EuRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dFN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7ZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dEVycm9yOnZvaWQgMCxleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0TWV0aG9kSWQ6dm9pZCAwfSk7Y2FzZSBLYS5FeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0RmFpbGVkOnJldHVybiBUdihlLHtleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0RXJyb3I6dC5wYXlsb2FkLGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRNZXRob2RJZDp0Lm1ldGEmJnQubWV0YS5tZXRob2RJZH0pO2Nhc2UgS2EuV2lkZ2V0SW50ZXJhY3Rpb25TdGFydGVkOmNhc2UgS2EuV2lkZ2V0SW50ZXJhY3Rpb25GaW5pc2hlZDpyZXR1cm4gVHYoZSx7d2lkZ2V0SW50ZXJhY3Rpb25FcnJvcjp2b2lkIDAsd2lkZ2V0SW50ZXJhY3Rpb25NZXRob2RJZDp2b2lkIDB9KTtjYXNlIEthLldpZGdldEludGVyYWN0aW9uRmFpbGVkOnJldHVybiBUdihlLHt3aWRnZXRJbnRlcmFjdGlvbkVycm9yOnQucGF5bG9hZCx3aWRnZXRJbnRlcmFjdGlvbk1ldGhvZElkOnQubWV0YS5tZXRob2RJZH0pO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIGdmKGU9aGYuc3RhdHVzZXMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBLYS5Jbml0aWFsaXplUmVxdWVzdGVkOnJldHVybiBUdihlLHtpc0luaXRpYWxpemluZzohMCxpbml0aWFsaXplTWV0aG9kSWQ6dC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWR9KTtjYXNlIEthLkluaXRpYWxpemVGYWlsZWQ6Y2FzZSBLYS5Jbml0aWFsaXplU3VjY2VlZGVkOnJldHVybiBUdihlLHtpc0luaXRpYWxpemluZzohMSxpbml0aWFsaXplTWV0aG9kSWQ6dm9pZCAwfSk7Y2FzZSBLYS5EZWluaXRpYWxpemVSZXF1ZXN0ZWQ6cmV0dXJuIFR2KGUse2lzRGVpbml0aWFsaXppbmc6ITAsZGVpbml0aWFsaXplTWV0aG9kSWQ6dC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWR9KTtjYXNlIEthLkRlaW5pdGlhbGl6ZUZhaWxlZDpjYXNlIEthLkRlaW5pdGlhbGl6ZVN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7aXNEZWluaXRpYWxpemluZzohMSxkZWluaXRpYWxpemVNZXRob2RJZDp2b2lkIDB9KTtjYXNlIEthLlNpZ25JblJlcXVlc3RlZDpyZXR1cm4gVHYoZSx7aXNTaWduaW5nSW46ITAsc2lnbkluTWV0aG9kSWQ6dC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWR9KTtjYXNlIEthLlNpZ25JbkZhaWxlZDpjYXNlIEthLlNpZ25JblN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7aXNTaWduaW5nSW46ITEsc2lnbkluTWV0aG9kSWQ6dm9pZCAwfSk7Y2FzZSBLYS5TaWduT3V0UmVxdWVzdGVkOnJldHVybiBUdihlLHtpc1NpZ25pbmdPdXQ6ITAsc2lnbk91dE1ldGhvZElkOnQubWV0YSYmdC5tZXRhLm1ldGhvZElkfSk7Y2FzZSBLYS5TaWduT3V0RmFpbGVkOmNhc2UgS2EuU2lnbk91dFN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7aXNTaWduaW5nT3V0OiExLHNpZ25PdXRNZXRob2RJZDp2b2lkIDB9KTtjYXNlIEthLkV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRSZXF1ZXN0ZWQ6cmV0dXJuIFR2KGUse2lzRXhlY3V0aW5nUGF5bWVudE1ldGhvZENoZWNrb3V0OiEwLGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRNZXRob2RJZDp0Lm1ldGEmJnQubWV0YS5tZXRob2RJZH0pO2Nhc2UgS2EuRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dEZhaWxlZDpjYXNlIEthLkV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRTdWNjZWVkZWQ6cmV0dXJuIFR2KGUse2lzRXhlY3V0aW5nUGF5bWVudE1ldGhvZENoZWNrb3V0OiExLGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRNZXRob2RJZDp2b2lkIDB9KTtjYXNlIEthLldpZGdldEludGVyYWN0aW9uU3RhcnRlZDpyZXR1cm4gVHYoZSx7aXNXaWRnZXRJbnRlcmFjdGluZzohMCx3aWRnZXRJbnRlcmFjdGlvbk1ldGhvZElkOnQubWV0YS5tZXRob2RJZH0pO2Nhc2UgS2EuV2lkZ2V0SW50ZXJhY3Rpb25GaW5pc2hlZDpjYXNlIEthLldpZGdldEludGVyYWN0aW9uRmFpbGVkOnJldHVybiBUdihlLHtpc1dpZGdldEludGVyYWN0aW5nOiExLHdpZGdldEludGVyYWN0aW9uTWV0aG9kSWQ6dm9pZCAwfSk7ZGVmYXVsdDpyZXR1cm4gZX19Y29uc3QgdmY9e2Vycm9yczp7fSxzdGF0dXNlczp7fX07ZnVuY3Rpb24gZmYoZT12Zix0KXtyZXR1cm4gZCh7ZGF0YTpTZixlcnJvcnM6YyhfZixfdiksc3RhdHVzZXM6d2Z9KShlLHQpfWZ1bmN0aW9uIFNmKGUsdCl7cmV0dXJuIHQudHlwZT09PVJzLkxvYWRFeHRlbnNpb25zU3VjY2VlZGVkP2t2KGUsdC5wYXlsb2FkKTplfWZ1bmN0aW9uIF9mKGU9dmYuZXJyb3JzLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgUnMuTG9hZEV4dGVuc2lvbnNSZXF1ZXN0ZWQ6Y2FzZSBScy5Mb2FkRXh0ZW5zaW9uc1N1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImxvYWRFcnJvclwiLHZvaWQgMCk7Y2FzZSBScy5SZW5kZXJFeHRlbnNpb25SZXF1ZXN0ZWQ6Y2FzZSBScy5SZW5kZXJFeHRlbnNpb25TdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJyZW5kZXJFcnJvclwiLHZvaWQgMCk7Y2FzZSBScy5Mb2FkRXh0ZW5zaW9uc0ZhaWxlZDpyZXR1cm4gSXYoZSxcImxvYWRFcnJvclwiLHQucGF5bG9hZCk7Y2FzZSBScy5SZW5kZXJFeHRlbnNpb25GYWlsZWQ6cmV0dXJuIEl2KGUsXCJyZW5kZXJFcnJvclwiLHQucGF5bG9hZCk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24gd2YoZT12Zi5zdGF0dXNlcyx0KXtzd2l0Y2godC50eXBlKXtjYXNlIFJzLkxvYWRFeHRlbnNpb25zUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNMb2FkaW5nXCIsITApO2Nhc2UgUnMuTG9hZEV4dGVuc2lvbnNTdWNjZWVkZWQ6Y2FzZSBScy5Mb2FkRXh0ZW5zaW9uc0ZhaWxlZDpyZXR1cm4gSXYoZSxcImlzTG9hZGluZ1wiLCExKTtkZWZhdWx0OnJldHVybiBlfX1jb25zdCBDZj17ZXJyb3JzOnt9LHN0YXR1c2VzOnt9fTtmdW5jdGlvbiBJZihlPUNmLHQpe3JldHVybiBkKHtkYXRhOmJmLGVycm9yczpjKFBmLF92KSxzdGF0dXNlczpPZn0pKGUsdCl9ZnVuY3Rpb24gYmYoZSx0KXtyZXR1cm4gdC50eXBlPT09bnMuTG9hZEZvcm1GaWVsZHNTdWNjZWVkZWQ/VHYoZSx0LnBheWxvYWQpOmV9ZnVuY3Rpb24gUGYoZT1DZi5lcnJvcnMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBucy5Mb2FkRm9ybUZpZWxkc1N1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImxvYWRFcnJvclwiLHZvaWQgMCk7Y2FzZSBucy5Mb2FkRm9ybUZpZWxkc0ZhaWxlZDpyZXR1cm4gSXYoZSxcImxvYWRFcnJvclwiLHQucGF5bG9hZCk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24gT2YoZT1DZi5zdGF0dXNlcyx0KXtzd2l0Y2godC50eXBlKXtjYXNlIG5zLkxvYWRGb3JtRmllbGRzUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNMb2FkaW5nXCIsITApO2Nhc2UgbnMuTG9hZEZvcm1GaWVsZHNTdWNjZWVkZWQ6Y2FzZSBucy5Mb2FkRm9ybUZpZWxkc0ZhaWxlZDpyZXR1cm4gSXYoZSxcImlzTG9hZGluZ1wiLCExKTtkZWZhdWx0OnJldHVybiBlfX1jb25zdCBFZj17ZXJyb3JzOnt9LHN0YXR1c2VzOnt9fTtmdW5jdGlvbiBBZihlPUVmLHQpe3JldHVybiBkKHtkYXRhOmtmLGVycm9yczpjKFRmLF92KSxzdGF0dXNlczpEZn0pKGUsdCl9ZnVuY3Rpb24ga2YoZSx0KXtyZXR1cm4gdC50eXBlPT09S3AuTG9hZENvdW50cmllc1N1Y2NlZWRlZD9rdihlLHQucGF5bG9hZCk6ZX1mdW5jdGlvbiBUZihlPUVmLmVycm9ycyx0KXtzd2l0Y2godC50eXBlKXtjYXNlIEtwLkxvYWRDb3VudHJpZXNSZXF1ZXN0ZWQ6Y2FzZSBLcC5Mb2FkQ291bnRyaWVzU3VjY2VlZGVkOnJldHVybiBJdihlLFwibG9hZEVycm9yXCIsdm9pZCAwKTtjYXNlIEtwLkxvYWRDb3VudHJpZXNGYWlsZWQ6cmV0dXJuIEl2KGUsXCJsb2FkRXJyb3JcIix0LnBheWxvYWQpO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIERmKGU9RWYuc3RhdHVzZXMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBLcC5Mb2FkQ291bnRyaWVzUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNMb2FkaW5nXCIsITApO2Nhc2UgS3AuTG9hZENvdW50cmllc1N1Y2NlZWRlZDpjYXNlIEtwLkxvYWRDb3VudHJpZXNGYWlsZWQ6cmV0dXJuIEl2KGUsXCJpc0xvYWRpbmdcIiwhMSk7ZGVmYXVsdDpyZXR1cm4gZX19Y29uc3QgTWY9e2Vycm9yczp7fSxtZXRhOnt9LHN0YXR1c2VzOnt9fTtmdW5jdGlvbiB6ZihlPU1mLHQpe3JldHVybiBkKHtkYXRhOk5mLGVycm9yczpjKEZmLF92KSxtZXRhOnhmLHN0YXR1c2VzOlJmfSkoZSx0KX1mdW5jdGlvbiBOZihlLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgSnAuTG9hZE9yZGVyU3VjY2VlZGVkOmNhc2UgSnAuTG9hZE9yZGVyUGF5bWVudHNTdWNjZWVkZWQ6cmV0dXJuIFR2KGUsRyh0LnBheWxvYWQsW1wiYmlsbGluZ0FkZHJlc3NcIixcImNvdXBvbnNcIl0pKTtkZWZhdWx0OnJldHVybiBlfX1mdW5jdGlvbiB4ZihlLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgSnAuRmluYWxpemVPcmRlclN1Y2NlZWRlZDpjYXNlIEpwLlN1Ym1pdE9yZGVyU3VjY2VlZGVkOnJldHVybiBUdihlLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0Lm1ldGEpLHtjYWxsYmFja1VybDp0LnBheWxvYWQmJnQucGF5bG9hZC5vcmRlci5jYWxsYmFja1VybCxvcmRlclRva2VuOnQucGF5bG9hZCYmdC5wYXlsb2FkLm9yZGVyLnRva2VuLHBheW1lbnQ6dC5wYXlsb2FkJiZ0LnBheWxvYWQub3JkZXImJnQucGF5bG9hZC5vcmRlci5wYXltZW50fSkpO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIEZmKGU9TWYuZXJyb3JzLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgSnAuTG9hZE9yZGVyUmVxdWVzdGVkOmNhc2UgSnAuTG9hZE9yZGVyU3VjY2VlZGVkOmNhc2UgSnAuTG9hZE9yZGVyUGF5bWVudHNTdWNjZWVkZWQ6Y2FzZSBKcC5Mb2FkT3JkZXJQYXltZW50c1JlcXVlc3RlZDpyZXR1cm4gSXYoZSxcImxvYWRFcnJvclwiLHZvaWQgMCk7Y2FzZSBKcC5Mb2FkT3JkZXJGYWlsZWQ6Y2FzZSBKcC5Mb2FkT3JkZXJQYXltZW50c0ZhaWxlZDpyZXR1cm4gSXYoZSxcImxvYWRFcnJvclwiLHQucGF5bG9hZCk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24gUmYoZT1NZi5zdGF0dXNlcyx0KXtzd2l0Y2godC50eXBlKXtjYXNlIEpwLkxvYWRPcmRlclJlcXVlc3RlZDpjYXNlIEpwLkxvYWRPcmRlclBheW1lbnRzUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNMb2FkaW5nXCIsITApO2Nhc2UgSnAuTG9hZE9yZGVyU3VjY2VlZGVkOmNhc2UgSnAuTG9hZE9yZGVyRmFpbGVkOmNhc2UgSnAuTG9hZE9yZGVyUGF5bWVudHNTdWNjZWVkZWQ6Y2FzZSBKcC5Mb2FkT3JkZXJQYXltZW50c0ZhaWxlZDpyZXR1cm4gSXYoZSxcImlzTG9hZGluZ1wiLCExKTtkZWZhdWx0OnJldHVybiBlfX1jb25zdCBMZj17fTtmdW5jdGlvbiBCZihlPUxmLHQpe3JldHVybiBkKHtkYXRhOmpmfSkoZSx0KX1mdW5jdGlvbiBqZihlLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgSnAuTG9hZE9yZGVyUGF5bWVudHNTdWNjZWVkZWQ6Y2FzZSBKcC5Mb2FkT3JkZXJTdWNjZWVkZWQ6cmV0dXJuIEN2KGUsdC5wYXlsb2FkJiZ0LnBheWxvYWQuYmlsbGluZ0FkZHJlc3MpO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIFVmKGU9e30sdCl7cmV0dXJuIGQoe2RhdGE6cWZ9KShlLHQpfWZ1bmN0aW9uIHFmKGUsdCl7cmV0dXJuIHQudHlwZT09PURtLlN1Ym1pdFBheW1lbnRTdWNjZWVkZWQ/dC5wYXlsb2FkOmV9Y29uc3QgVmY9e2Vycm9yczp7fSxzdGF0dXNlczp7fX07ZnVuY3Rpb24gR2YoZT1WZix0KXtyZXR1cm4gZCh7ZGF0YTpIZixlcnJvcnM6YyhXZixfdiksbWV0YTokZixzdGF0dXNlczpZZn0pKGUsdCl9ZnVuY3Rpb24gSGYoZSx0KXtzd2l0Y2godC50eXBlKXtjYXNlIHJzLkxvYWRQYXltZW50TWV0aG9kU3VjY2VlZGVkOnJldHVybiBmdW5jdGlvbihlLHQsbil7aWYoIXQpcmV0dXJuIGU7Y29uc3QgaT1XKHQsXCJpZFwiKSxyPVwib2JqZWN0XCI9PXR5cGVvZiBuP1kobik6bnx8aSxvPV8oZSxyKSxhPVsuLi5lXTtpZigtMT09PW8pYS5wdXNoKHQpO2Vsc2V7Y29uc3Qgbj1lW29dO2Fbb109Q3kobikmJkN5KHQpP1R2KG4sdCk6dH1yZXR1cm4gYX0oZXx8W10sdC5wYXlsb2FkLHQucGF5bG9hZCYme2lkOnQucGF5bG9hZC5pZCxnYXRld2F5OnQucGF5bG9hZC5nYXRld2F5fSk7Y2FzZSBycy5Mb2FkUGF5bWVudE1ldGhvZHNTdWNjZWVkZWQ6cmV0dXJuIGt2KGUsdC5wYXlsb2FkLHttYXRjaE9iamVjdDooZSx0KT0+ZS5pZD09PXQuaWQmJmUuZ2F0ZXdheT09PXQuZ2F0ZXdheX0pO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uICRmKGUsdCl7cmV0dXJuIHQudHlwZT09PXJzLkxvYWRQYXltZW50TWV0aG9kc1N1Y2NlZWRlZD9UdihlLHQubWV0YSk6ZX1mdW5jdGlvbiBXZihlPVZmLmVycm9ycyx0KXtzd2l0Y2godC50eXBlKXtjYXNlIHJzLkxvYWRQYXltZW50TWV0aG9kc1JlcXVlc3RlZDpjYXNlIHJzLkxvYWRQYXltZW50TWV0aG9kc1N1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImxvYWRFcnJvclwiLHZvaWQgMCk7Y2FzZSBycy5Mb2FkUGF5bWVudE1ldGhvZHNGYWlsZWQ6cmV0dXJuIEl2KGUsXCJsb2FkRXJyb3JcIix0LnBheWxvYWQpO2Nhc2UgcnMuTG9hZFBheW1lbnRNZXRob2RSZXF1ZXN0ZWQ6Y2FzZSBycy5Mb2FkUGF5bWVudE1ldGhvZFN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7bG9hZE1ldGhvZElkOnZvaWQgMCxsb2FkTWV0aG9kRXJyb3I6dm9pZCAwfSk7Y2FzZSBycy5Mb2FkUGF5bWVudE1ldGhvZEZhaWxlZDpyZXR1cm4gVHYoZSx7bG9hZE1ldGhvZElkOnQubWV0YS5tZXRob2RJZCxsb2FkTWV0aG9kRXJyb3I6dC5wYXlsb2FkfSk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24gWWYoZT1WZi5zdGF0dXNlcyx0KXtzd2l0Y2godC50eXBlKXtjYXNlIHJzLkxvYWRQYXltZW50TWV0aG9kc1JlcXVlc3RlZDpyZXR1cm4gSXYoZSxcImlzTG9hZGluZ1wiLCEwKTtjYXNlIHJzLkxvYWRQYXltZW50TWV0aG9kc1N1Y2NlZWRlZDpjYXNlIHJzLkxvYWRQYXltZW50TWV0aG9kc0ZhaWxlZDpyZXR1cm4gSXYoZSxcImlzTG9hZGluZ1wiLCExKTtjYXNlIHJzLkxvYWRQYXltZW50TWV0aG9kUmVxdWVzdGVkOnJldHVybiBUdihlLHtpc0xvYWRpbmdNZXRob2Q6ITAsbG9hZE1ldGhvZElkOnQubWV0YS5tZXRob2RJZH0pO2Nhc2UgcnMuTG9hZFBheW1lbnRNZXRob2RTdWNjZWVkZWQ6Y2FzZSBycy5Mb2FkUGF5bWVudE1ldGhvZEZhaWxlZDpyZXR1cm4gVHYoZSx7aXNMb2FkaW5nTWV0aG9kOiExLGxvYWRNZXRob2RJZDp2b2lkIDB9KTtkZWZhdWx0OnJldHVybiBlfX1jb25zdCBLZj17ZGF0YTp7fSxlcnJvcnM6e30sc3RhdHVzZXM6e319O2Z1bmN0aW9uIEpmKGU9S2YsdCl7cmV0dXJuIGQoe2RhdGE6WmYsZXJyb3JzOmMoUWYsX3YpLHN0YXR1c2VzOlhmfSkoZSx0KX1mdW5jdGlvbiBaZihlPUtmLmRhdGEsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBvbS5Jbml0aWFsaXplU3VjY2VlZGVkOmlmKHQubWV0YSl7Y29uc3R7bWV0aG9kSWQ6bixnYXRld2F5SWQ6aX09dC5tZXRhLHI9aT9gJHtufS4ke2l9YDpuO3JldHVybiBUdihlLHtbcl06e2lzSW5pdGlhbGl6ZWQ6ITB9fSl9YnJlYWs7Y2FzZSBvbS5EZWluaXRpYWxpemVTdWNjZWVkZWQ6aWYodC5tZXRhKXtjb25zdHttZXRob2RJZDpuLGdhdGV3YXlJZDppfT10Lm1ldGEscj1pP2Ake259LiR7aX1gOm47cmV0dXJuIFR2KGUse1tyXTp7aXNJbml0aWFsaXplZDohMX19KX19cmV0dXJuIGV9ZnVuY3Rpb24gUWYoZT1LZi5lcnJvcnMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBvbS5Jbml0aWFsaXplUmVxdWVzdGVkOmNhc2Ugb20uSW5pdGlhbGl6ZVN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7aW5pdGlhbGl6ZUVycm9yOnZvaWQgMCxpbml0aWFsaXplTWV0aG9kSWQ6dm9pZCAwfSk7Y2FzZSBvbS5Jbml0aWFsaXplRmFpbGVkOntsZXQgbj10Lm1ldGEmJnQubWV0YS5tZXRob2RJZDtpZih0Lm1ldGEpe2NvbnN0e21ldGhvZElkOmUsZ2F0ZXdheUlkOml9PXQubWV0YTtuPWk/YCR7ZX0uJHtpfWA6ZX1yZXR1cm4gVHYoZSx7aW5pdGlhbGl6ZUVycm9yOnQucGF5bG9hZCxpbml0aWFsaXplTWV0aG9kSWQ6bn0pfWNhc2Ugb20uRGVpbml0aWFsaXplUmVxdWVzdGVkOmNhc2Ugb20uRGVpbml0aWFsaXplU3VjY2VlZGVkOnJldHVybiBUdihlLHtkZWluaXRpYWxpemVFcnJvcjp2b2lkIDAsZGVpbml0aWFsaXplTWV0aG9kSWQ6dm9pZCAwfSk7Y2FzZSBvbS5EZWluaXRpYWxpemVGYWlsZWQ6e2xldCBuPXQubWV0YSYmdC5tZXRhLm1ldGhvZElkO2lmKHQubWV0YSl7Y29uc3R7bWV0aG9kSWQ6ZSxnYXRld2F5SWQ6aX09dC5tZXRhO249aT9gJHtlfS4ke2l9YDplfXJldHVybiBUdihlLHtkZWluaXRpYWxpemVFcnJvcjp0LnBheWxvYWQsZGVpbml0aWFsaXplTWV0aG9kSWQ6bn0pfWNhc2Ugb20uRXhlY3V0ZVJlcXVlc3RlZDpjYXNlIG9tLkV4ZWN1dGVTdWNjZWVkZWQ6cmV0dXJuIFR2KGUse2V4ZWN1dGVFcnJvcjp2b2lkIDAsZXhlY3V0ZU1ldGhvZElkOnZvaWQgMH0pO2Nhc2Ugb20uRXhlY3V0ZUZhaWxlZDpyZXR1cm4gVHYoZSx7ZXhlY3V0ZUVycm9yOnQucGF5bG9hZCxleGVjdXRlTWV0aG9kSWQ6dC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWR9KTtjYXNlIG9tLkZpbmFsaXplUmVxdWVzdGVkOmNhc2Ugb20uRmluYWxpemVTdWNjZWVkZWQ6cmV0dXJuIFR2KGUse2ZpbmFsaXplRXJyb3I6dm9pZCAwLGZpbmFsaXplTWV0aG9kSWQ6dm9pZCAwfSk7Y2FzZSBvbS5GaW5hbGl6ZUZhaWxlZDpyZXR1cm4gVHYoZSx7ZmluYWxpemVFcnJvcjp0LnBheWxvYWQsZmluYWxpemVNZXRob2RJZDp0Lm1ldGEmJnQubWV0YS5tZXRob2RJZH0pO2Nhc2Ugb20uV2lkZ2V0SW50ZXJhY3Rpb25TdGFydGVkOmNhc2Ugb20uV2lkZ2V0SW50ZXJhY3Rpb25GaW5pc2hlZDpyZXR1cm4gVHYoZSx7d2lkZ2V0SW50ZXJhY3Rpb25FcnJvcjp2b2lkIDAsd2lkZ2V0SW50ZXJhY3Rpb25NZXRob2RJZDp2b2lkIDB9KTtjYXNlIG9tLldpZGdldEludGVyYWN0aW9uRmFpbGVkOnJldHVybiBUdihlLHt3aWRnZXRJbnRlcmFjdGlvbkVycm9yOnQucGF5bG9hZCx3aWRnZXRJbnRlcmFjdGlvbk1ldGhvZElkOnQubWV0YS5tZXRob2RJZH0pO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIFhmKGU9S2Yuc3RhdHVzZXMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBvbS5Jbml0aWFsaXplUmVxdWVzdGVkOntsZXQgbj10Lm1ldGEmJnQubWV0YS5tZXRob2RJZDtpZih0Lm1ldGEpe2NvbnN0e21ldGhvZElkOmUsZ2F0ZXdheUlkOml9PXQubWV0YTtuPWk/YCR7ZX0uJHtpfWA6ZX1yZXR1cm4gVHYoZSx7aXNJbml0aWFsaXppbmc6ITAsaW5pdGlhbGl6ZU1ldGhvZElkOm59KX1jYXNlIG9tLkluaXRpYWxpemVGYWlsZWQ6Y2FzZSBvbS5Jbml0aWFsaXplU3VjY2VlZGVkOnJldHVybiBUdihlLHtpc0luaXRpYWxpemluZzohMSxpbml0aWFsaXplTWV0aG9kSWQ6dm9pZCAwfSk7Y2FzZSBvbS5EZWluaXRpYWxpemVSZXF1ZXN0ZWQ6e2xldCBuPXQubWV0YSYmdC5tZXRhLm1ldGhvZElkO2lmKHQubWV0YSl7Y29uc3R7bWV0aG9kSWQ6ZSxnYXRld2F5SWQ6aX09dC5tZXRhO249aT9gJHtlfS4ke2l9YDplfXJldHVybiBUdihlLHtpc0RlaW5pdGlhbGl6aW5nOiEwLGRlaW5pdGlhbGl6ZU1ldGhvZElkOm59KX1jYXNlIG9tLkRlaW5pdGlhbGl6ZUZhaWxlZDpjYXNlIG9tLkRlaW5pdGlhbGl6ZVN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7aXNEZWluaXRpYWxpemluZzohMSxkZWluaXRpYWxpemVNZXRob2RJZDp2b2lkIDB9KTtjYXNlIG9tLkV4ZWN1dGVSZXF1ZXN0ZWQ6cmV0dXJuIFR2KGUse2lzRXhlY3V0aW5nOiEwLGV4ZWN1dGVNZXRob2RJZDp0Lm1ldGEmJnQubWV0YS5tZXRob2RJZH0pO2Nhc2Ugb20uRXhlY3V0ZUZhaWxlZDpjYXNlIG9tLkV4ZWN1dGVTdWNjZWVkZWQ6cmV0dXJuIFR2KGUse2lzRXhlY3V0aW5nOiExLGV4ZWN1dGVNZXRob2RJZDp2b2lkIDB9KTtjYXNlIG9tLkZpbmFsaXplUmVxdWVzdGVkOnJldHVybiBUdihlLHtpc0ZpbmFsaXppbmc6ITAsZmluYWxpemVNZXRob2RJZDp0Lm1ldGEmJnQubWV0YS5tZXRob2RJZH0pO2Nhc2Ugb20uRmluYWxpemVGYWlsZWQ6Y2FzZSBvbS5GaW5hbGl6ZVN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7aXNGaW5hbGl6aW5nOiExLGZpbmFsaXplTWV0aG9kSWQ6dm9pZCAwfSk7Y2FzZSBvbS5XaWRnZXRJbnRlcmFjdGlvblN0YXJ0ZWQ6cmV0dXJuIFR2KGUse2lzV2lkZ2V0SW50ZXJhY3Rpbmc6ITAsd2lkZ2V0SW50ZXJhY3Rpb25NZXRob2RJZDp0Lm1ldGEubWV0aG9kSWR9KTtjYXNlIG9tLldpZGdldEludGVyYWN0aW9uRmluaXNoZWQ6Y2FzZSBvbS5XaWRnZXRJbnRlcmFjdGlvbkZhaWxlZDpyZXR1cm4gVHYoZSx7aXNXaWRnZXRJbnRlcmFjdGluZzohMSx3aWRnZXRJbnRlcmFjdGlvbk1ldGhvZElkOnZvaWQgMH0pO2RlZmF1bHQ6cmV0dXJuIGV9fWNvbnN0IGVTPXtkYXRhOnt9fTtmdW5jdGlvbiB0UyhlPWVTLHQpe3JldHVybiBkKHtkYXRhOm5TfSkoZSx0KX1mdW5jdGlvbiBuUyhlPWVTLmRhdGEsdCl7cmV0dXJuIHQudHlwZT09PWF5LlVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyP1R2KGUsdC5wYXlsb2FkKTplfWNvbnN0IGlTPXtkYXRhOltdLGVycm9yczp7fSxzdGF0dXNlczp7fX07ZnVuY3Rpb24gclMoZT1pUyx0KXtyZXR1cm4gZCh7ZGF0YTpvUyxlcnJvcnM6YyhzUyxfdiksbWV0YTphUyxzdGF0dXNlczpkU30pKGUsdCl9ZnVuY3Rpb24gb1MoZT1pUy5kYXRhLHQpe3JldHVybiB0LnR5cGU9PT1rZy5Mb2FkSW5zdHJ1bWVudHNTdWNjZWVkZWQ/a3YoZSx0LnBheWxvYWQmJnQucGF5bG9hZC52YXVsdGVkSW5zdHJ1bWVudHN8fFtdKTplfWZ1bmN0aW9uIGFTKGUsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBrZy5Mb2FkSW5zdHJ1bWVudHNTdWNjZWVkZWQ6Y2FzZSBrZy5EZWxldGVJbnN0cnVtZW50U3VjY2VlZGVkOnJldHVybiBUdihlLHQubWV0YSk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24gc1MoZT1pUy5lcnJvcnMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBrZy5Mb2FkSW5zdHJ1bWVudHNSZXF1ZXN0ZWQ6Y2FzZSBrZy5Mb2FkSW5zdHJ1bWVudHNTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJsb2FkRXJyb3JcIix2b2lkIDApO2Nhc2Uga2cuRGVsZXRlSW5zdHJ1bWVudFJlcXVlc3RlZDpjYXNlIGtnLkRlbGV0ZUluc3RydW1lbnRTdWNjZWVkZWQ6cmV0dXJuIFR2KGUse2RlbGV0ZUVycm9yOnZvaWQgMCxmYWlsZWRJbnN0cnVtZW50OnZvaWQgMH0pO2Nhc2Uga2cuTG9hZEluc3RydW1lbnRzRmFpbGVkOnJldHVybiBJdihlLFwibG9hZEVycm9yXCIsdC5wYXlsb2FkKTtjYXNlIGtnLkRlbGV0ZUluc3RydW1lbnRGYWlsZWQ6cmV0dXJuIFR2KGUse2RlbGV0ZUVycm9yOnQucGF5bG9hZCxmYWlsZWRJbnN0cnVtZW50OnQubWV0YS5pbnN0cnVtZW50SWR9KTtkZWZhdWx0OnJldHVybiBlfX1mdW5jdGlvbiBkUyhlPWlTLnN0YXR1c2VzLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2Uga2cuTG9hZEluc3RydW1lbnRzUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNMb2FkaW5nXCIsITApO2Nhc2Uga2cuRGVsZXRlSW5zdHJ1bWVudFJlcXVlc3RlZDpyZXR1cm4gVHYoZSx7aXNEZWxldGluZzohMCxkZWxldGluZ0luc3RydW1lbnQ6dC5tZXRhLmluc3RydW1lbnRJZH0pO2Nhc2Uga2cuTG9hZEluc3RydW1lbnRzU3VjY2VlZGVkOmNhc2Uga2cuTG9hZEluc3RydW1lbnRzRmFpbGVkOnJldHVybiBJdihlLFwiaXNMb2FkaW5nXCIsITEpO2Nhc2Uga2cuRGVsZXRlSW5zdHJ1bWVudFN1Y2NlZWRlZDpjYXNlIGtnLkRlbGV0ZUluc3RydW1lbnRGYWlsZWQ6cmV0dXJuIFR2KGUse2lzRGVsZXRpbmc6ITEsZGVsZXRpbmdJbnN0cnVtZW50OnZvaWQgMH0pO2RlZmF1bHQ6cmV0dXJuIGV9fWNvbnN0IGNTPXtkYXRhOnt9fTtmdW5jdGlvbiBsUyhlPWNTLHQpe3JldHVybiB0Lm1ldGEmJnQubWV0YS5tZXRob2RJZD9kKHtkYXRhOmQoe1t0Lm1ldGEubWV0aG9kSWRdOnVTfSl9KShlLHQpOmV9ZnVuY3Rpb24gdVMoZSx0KXtzd2l0Y2godC50eXBlKXtjYXNlIHVzLkluaXRpYWxpemVSZW1vdGVCaWxsaW5nU3VjY2VlZGVkOnJldHVybiBJdihlLFwiYmlsbGluZ1wiLHQucGF5bG9hZCYmdC5wYXlsb2FkLmJpbGxpbmcpO2Nhc2UgdXMuSW5pdGlhbGl6ZVJlbW90ZVNoaXBwaW5nU3VjY2VlZGVkOnJldHVybiBJdihlLFwic2hpcHBpbmdcIix0LnBheWxvYWQmJnQucGF5bG9hZC5zaGlwcGluZyk7Y2FzZSB1cy5Mb2FkUmVtb3RlU2V0dGluZ3NTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJzZXR0aW5nc1wiLHQucGF5bG9hZCk7Y2FzZSB1cy5VcGRhdGVSZW1vdGVDaGVja291dDpyZXR1cm4gVHYoZSx0LnBheWxvYWQpO2RlZmF1bHQ6cmV0dXJuIGV9fWNvbnN0IGhTPXtlcnJvcnM6e3VwZGF0ZVNoaXBwaW5nT3B0aW9uRXJyb3I6e30sdXBkYXRlRXJyb3I6e30sZGVsZXRlRXJyb3I6e319LHN0YXR1c2VzOntpc1VwZGF0aW5nOnt9LGlzVXBkYXRpbmdTaGlwcGluZ09wdGlvbjp7fSxpc0RlbGV0aW5nOnt9fX07ZnVuY3Rpb24gcFMoZT1oUyx0KXtyZXR1cm4gZCh7ZGF0YTptUyxlcnJvcnM6Yyh5Uyxfdiksc3RhdHVzZXM6Z1N9KShlLHQpfWZ1bmN0aW9uIG1TKGUsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRTdWNjZWVkZWQ6Y2FzZSBzeS5Mb2FkU2hpcHBpbmdPcHRpb25zU3VjY2VlZGVkOmNhc2Ugc3kuQ3JlYXRlQ29uc2lnbm1lbnRzU3VjY2VlZGVkOmNhc2Ugc3kuVXBkYXRlQ29uc2lnbm1lbnRTdWNjZWVkZWQ6Y2FzZSBzeS5EZWxldGVDb25zaWdubWVudFN1Y2NlZWRlZDpjYXNlIHN5LlVwZGF0ZVNoaXBwaW5nT3B0aW9uU3VjY2VlZGVkOmNhc2UgYnQuQXBwbHlDb3Vwb25TdWNjZWVkZWQ6Y2FzZSBidC5SZW1vdmVDb3Vwb25TdWNjZWVkZWQ6cmV0dXJuIGt2KGUsdC5wYXlsb2FkJiZ0LnBheWxvYWQuY29uc2lnbm1lbnRzKTtjYXNlIFlhLlNpZ25PdXRDdXN0b21lclN1Y2NlZWRlZDpyZXR1cm4ga3YoZSxbXSk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24geVMoZT1oUy5lcnJvcnMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRSZXF1ZXN0ZWQ6Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRTdWNjZWVkZWQ6Y2FzZSBzeS5Mb2FkU2hpcHBpbmdPcHRpb25zU3VjY2VlZGVkOmNhc2Ugc3kuTG9hZFNoaXBwaW5nT3B0aW9uc1JlcXVlc3RlZDpyZXR1cm4gSXYoZSxcImxvYWRFcnJvclwiLHZvaWQgMCk7Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRGYWlsZWQ6Y2FzZSBzeS5Mb2FkU2hpcHBpbmdPcHRpb25zRmFpbGVkOnJldHVybiBJdihlLFwibG9hZEVycm9yXCIsdC5wYXlsb2FkKTtjYXNlIHN5LkNyZWF0ZUNvbnNpZ25tZW50c1JlcXVlc3RlZDpjYXNlIHN5LkNyZWF0ZUNvbnNpZ25tZW50c1N1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImNyZWF0ZUVycm9yXCIsdm9pZCAwKTtjYXNlIHN5LkNyZWF0ZUNvbnNpZ25tZW50c0ZhaWxlZDpyZXR1cm4gSXYoZSxcImNyZWF0ZUVycm9yXCIsdC5wYXlsb2FkKTtjYXNlIHN5LlVwZGF0ZUNvbnNpZ25tZW50U3VjY2VlZGVkOmNhc2Ugc3kuVXBkYXRlQ29uc2lnbm1lbnRSZXF1ZXN0ZWQ6cmV0dXJuIHQubWV0YT9UdihlLHt1cGRhdGVFcnJvcjp7W3QubWV0YS5pZF06dm9pZCAwfX0pOmU7Y2FzZSBzeS5VcGRhdGVDb25zaWdubWVudEZhaWxlZDpyZXR1cm4gdC5tZXRhP1R2KGUse3VwZGF0ZUVycm9yOntbdC5tZXRhLmlkXTp0LnBheWxvYWR9fSk6ZTtjYXNlIHN5LkRlbGV0ZUNvbnNpZ25tZW50U3VjY2VlZGVkOmNhc2Ugc3kuRGVsZXRlQ29uc2lnbm1lbnRSZXF1ZXN0ZWQ6cmV0dXJuIHQubWV0YT9UdihlLHtkZWxldGVFcnJvcjp7W3QubWV0YS5pZF06dm9pZCAwfX0pOmU7Y2FzZSBzeS5EZWxldGVDb25zaWdubWVudEZhaWxlZDpyZXR1cm4gdC5tZXRhP1R2KGUse2RlbGV0ZUVycm9yOntbdC5tZXRhLmlkXTp0LnBheWxvYWR9fSk6ZTtjYXNlIHN5LlVwZGF0ZVNoaXBwaW5nT3B0aW9uUmVxdWVzdGVkOmNhc2Ugc3kuVXBkYXRlU2hpcHBpbmdPcHRpb25TdWNjZWVkZWQ6cmV0dXJuIHQubWV0YT9UdihlLHt1cGRhdGVTaGlwcGluZ09wdGlvbkVycm9yOntbdC5tZXRhLmlkXTp2b2lkIDB9fSk6ZTtjYXNlIHN5LlVwZGF0ZVNoaXBwaW5nT3B0aW9uRmFpbGVkOnJldHVybiB0Lm1ldGE/VHYoZSx7dXBkYXRlU2hpcHBpbmdPcHRpb25FcnJvcjp7W3QubWV0YS5pZF06dC5wYXlsb2FkfX0pOmU7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24gZ1MoZT1oUy5zdGF0dXNlcyx0KXtzd2l0Y2godC50eXBlKXtjYXNlIEphLkxvYWRDaGVja291dFJlcXVlc3RlZDpyZXR1cm4gSXYoZSxcImlzTG9hZGluZ1wiLCEwKTtjYXNlIHN5LkxvYWRTaGlwcGluZ09wdGlvbnNSZXF1ZXN0ZWQ6cmV0dXJuIEl2KGUsXCJpc0xvYWRpbmdTaGlwcGluZ09wdGlvbnNcIiwhMCk7Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRTdWNjZWVkZWQ6Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRGYWlsZWQ6cmV0dXJuIEl2KGUsXCJpc0xvYWRpbmdcIiwhMSk7Y2FzZSBzeS5Mb2FkU2hpcHBpbmdPcHRpb25zU3VjY2VlZGVkOmNhc2Ugc3kuTG9hZFNoaXBwaW5nT3B0aW9uc0ZhaWxlZDpyZXR1cm4gSXYoZSxcImlzTG9hZGluZ1NoaXBwaW5nT3B0aW9uc1wiLCExKTtjYXNlIHN5LkNyZWF0ZUNvbnNpZ25tZW50c1JlcXVlc3RlZDpyZXR1cm4gSXYoZSxcImlzQ3JlYXRpbmdcIiwhMCk7Y2FzZSBzeS5DcmVhdGVDb25zaWdubWVudHNTdWNjZWVkZWQ6Y2FzZSBzeS5DcmVhdGVDb25zaWdubWVudHNGYWlsZWQ6cmV0dXJuIEl2KGUsXCJpc0NyZWF0aW5nXCIsITEpO2Nhc2Ugc3kuVXBkYXRlQ29uc2lnbm1lbnRSZXF1ZXN0ZWQ6cmV0dXJuIHQubWV0YT9UdihlLHtpc1VwZGF0aW5nOntbdC5tZXRhLmlkXTohMH19KTplO2Nhc2Ugc3kuVXBkYXRlQ29uc2lnbm1lbnRTdWNjZWVkZWQ6Y2FzZSBzeS5VcGRhdGVDb25zaWdubWVudEZhaWxlZDpyZXR1cm4gdC5tZXRhP1R2KGUse2lzVXBkYXRpbmc6e1t0Lm1ldGEuaWRdOiExfX0pOmU7Y2FzZSBzeS5EZWxldGVDb25zaWdubWVudFJlcXVlc3RlZDpyZXR1cm4gdC5tZXRhP1R2KGUse2lzRGVsZXRpbmc6e1t0Lm1ldGEuaWRdOiEwfX0pOmU7Y2FzZSBzeS5EZWxldGVDb25zaWdubWVudFN1Y2NlZWRlZDpjYXNlIHN5LkRlbGV0ZUNvbnNpZ25tZW50RmFpbGVkOnJldHVybiB0Lm1ldGE/VHYoZSx7aXNEZWxldGluZzp7W3QubWV0YS5pZF06ITF9fSk6ZTtjYXNlIHN5LlVwZGF0ZVNoaXBwaW5nT3B0aW9uUmVxdWVzdGVkOnJldHVybiB0Lm1ldGE/VHYoZSx7aXNVcGRhdGluZ1NoaXBwaW5nT3B0aW9uOntbdC5tZXRhLmlkXTohMH19KTplO2Nhc2Ugc3kuVXBkYXRlU2hpcHBpbmdPcHRpb25TdWNjZWVkZWQ6Y2FzZSBzeS5VcGRhdGVTaGlwcGluZ09wdGlvbkZhaWxlZDpyZXR1cm4gdC5tZXRhP1R2KGUse2lzVXBkYXRpbmdTaGlwcGluZ09wdGlvbjp7W3QubWV0YS5pZF06ITF9fSk6ZTtkZWZhdWx0OnJldHVybiBlfX1mdW5jdGlvbiB2UyhlLHQpe2NvbnN0IG49e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goaT0+e2NvbnN0IHI9ZVtpXSxvPXQ/YCR7dH0uJHtpfWA6aTtcIm9iamVjdFwiPT10eXBlb2Ygcj9PYmplY3QuYXNzaWduKG4sdlMocixvKSk6bltvXT1yfSksbn1mdW5jdGlvbiBmUyhlKXtyZXR1cm4gT2JqZWN0LmtleXMoZSkuc29ydCgpLnJlZHVjZSgodCxuKT0+T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtbbl06ZVtuXX0pLHt9KX1jb25zdCBTUz17ZXJyb3JzOnt9LHN0YXR1c2VzOnt9fTtmdW5jdGlvbiBfUyhlPVNTLHQpe3JldHVybiBkKHtkYXRhOndTLGVycm9yczpjKENTLF92KSxzdGF0dXNlczpJU30pKGUsdCl9ZnVuY3Rpb24gd1MoZSx0KXtpZih0LnR5cGUhPT14Zy5Mb2FkUGlja3VwT3B0aW9uc1N1Y2NlZWRlZClyZXR1cm4gZTtpZih0Lm1ldGEpe2NvbnN0IG49ZlModlMoe2NvbnNpZ25tZW50SWQ6dC5tZXRhLmNvbnNpZ25tZW50SWQsc2VhcmNoQXJlYTp0Lm1ldGEuc2VhcmNoQXJlYX0pKTtyZXR1cm4gSXYoZSxidG9hKGAke0pTT04uc3RyaW5naWZ5KG4pfWApLHQucGF5bG9hZCl9fWZ1bmN0aW9uIENTKGU9U1MuZXJyb3JzLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgeGcuTG9hZFBpY2t1cE9wdGlvbnNSZXF1ZXN0ZWQ6Y2FzZSB4Zy5Mb2FkUGlja3VwT3B0aW9uc1N1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImxvYWRFcnJvclwiLHZvaWQgMCk7Y2FzZSB4Zy5Mb2FkUGlja3VwT3B0aW9uc0ZhaWxlZDpyZXR1cm4gSXYoZSxcImxvYWRFcnJvclwiLHQucGF5bG9hZCk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24gSVMoZT1TUy5zdGF0dXNlcyx0KXtzd2l0Y2godC50eXBlKXtjYXNlIHhnLkxvYWRQaWNrdXBPcHRpb25zUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNMb2FkaW5nXCIsITApO2Nhc2UgeGcuTG9hZFBpY2t1cE9wdGlvbnNTdWNjZWVkZWQ6Y2FzZSB4Zy5Mb2FkUGlja3VwT3B0aW9uc0ZhaWxlZDpyZXR1cm4gSXYoZSxcImlzTG9hZGluZ1wiLCExKTtkZWZhdWx0OnJldHVybiBlfX1jb25zdCBiUz17ZXJyb3JzOnt9LHN0YXR1c2VzOnt9fTtmdW5jdGlvbiBQUyhlPWJTLHQpe3JldHVybiBkKHtkYXRhOk9TLGVycm9yczpjKEVTLF92KSxzdGF0dXNlczpBU30pKGUsdCl9ZnVuY3Rpb24gT1MoZSx0KXtyZXR1cm4gdC50eXBlPT09aHkuTG9hZFNoaXBwaW5nQ291bnRyaWVzU3VjY2VlZGVkP2t2KGUsdC5wYXlsb2FkKTplfWZ1bmN0aW9uIEVTKGU9YlMuZXJyb3JzLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgaHkuTG9hZFNoaXBwaW5nQ291bnRyaWVzUmVxdWVzdGVkOmNhc2UgaHkuTG9hZFNoaXBwaW5nQ291bnRyaWVzU3VjY2VlZGVkOnJldHVybiBJdihlLFwibG9hZEVycm9yXCIsdm9pZCAwKTtjYXNlIGh5LkxvYWRTaGlwcGluZ0NvdW50cmllc0ZhaWxlZDpyZXR1cm4gSXYoZSxcImxvYWRFcnJvclwiLHQucGF5bG9hZCk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24gQVMoZT1iUy5zdGF0dXNlcyx0KXtzd2l0Y2godC50eXBlKXtjYXNlIGh5LkxvYWRTaGlwcGluZ0NvdW50cmllc1JlcXVlc3RlZDpyZXR1cm4gSXYoZSxcImlzTG9hZGluZ1wiLCEwKTtjYXNlIGh5LkxvYWRTaGlwcGluZ0NvdW50cmllc1N1Y2NlZWRlZDpjYXNlIGh5LkxvYWRTaGlwcGluZ0NvdW50cmllc0ZhaWxlZDpyZXR1cm4gSXYoZSxcImlzTG9hZGluZ1wiLCExKTtkZWZhdWx0OnJldHVybiBlfX1jb25zdCBrUz17ZGF0YTp7fSxlcnJvcnM6e30sc3RhdHVzZXM6e319O2Z1bmN0aW9uIFRTKGU9a1MsdCl7cmV0dXJuIGQoe2RhdGE6RFMsZXJyb3JzOmMoTVMsX3YpLHN0YXR1c2VzOnpTfSkoZSx0KX1mdW5jdGlvbiBEUyhlPWtTLmRhdGEsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBGZy5Jbml0aWFsaXplU3VjY2VlZGVkOnJldHVybiBUdihlLHtbdC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWRdOntpc0luaXRpYWxpemVkOiEwfX0pO2Nhc2UgRmcuRGVpbml0aWFsaXplU3VjY2VlZGVkOnJldHVybiBUdihlLHtbdC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWRdOntpc0luaXRpYWxpemVkOiExfX0pfXJldHVybiBlfWZ1bmN0aW9uIE1TKGU9a1MuZXJyb3JzLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgRmcuSW5pdGlhbGl6ZVJlcXVlc3RlZDpjYXNlIEZnLkluaXRpYWxpemVTdWNjZWVkZWQ6cmV0dXJuIFR2KGUse2luaXRpYWxpemVFcnJvcjp2b2lkIDAsaW5pdGlhbGl6ZU1ldGhvZElkOnZvaWQgMH0pO2Nhc2UgRmcuSW5pdGlhbGl6ZUZhaWxlZDpyZXR1cm4gVHYoZSx7aW5pdGlhbGl6ZUVycm9yOnQucGF5bG9hZCxpbml0aWFsaXplTWV0aG9kSWQ6dC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWR9KTtjYXNlIEZnLkRlaW5pdGlhbGl6ZVJlcXVlc3RlZDpjYXNlIEZnLkRlaW5pdGlhbGl6ZVN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7ZGVpbml0aWFsaXplRXJyb3I6dm9pZCAwLGRlaW5pdGlhbGl6ZU1ldGhvZElkOnZvaWQgMH0pO2Nhc2UgRmcuRGVpbml0aWFsaXplRmFpbGVkOnJldHVybiBUdihlLHtkZWluaXRpYWxpemVFcnJvcjp0LnBheWxvYWQsZGVpbml0aWFsaXplTWV0aG9kSWQ6dC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWR9KTtjYXNlIEZnLlVwZGF0ZUFkZHJlc3NSZXF1ZXN0ZWQ6Y2FzZSBGZy5VcGRhdGVBZGRyZXNzU3VjY2VlZGVkOnJldHVybiBUdihlLHt1cGRhdGVBZGRyZXNzRXJyb3I6dm9pZCAwLHVwZGF0ZUFkZHJlc3NNZXRob2RJZDp2b2lkIDB9KTtjYXNlIEZnLlVwZGF0ZUFkZHJlc3NGYWlsZWQ6cmV0dXJuIFR2KGUse3VwZGF0ZUFkZHJlc3NFcnJvcjp0LnBheWxvYWQsdXBkYXRlQWRkcmVzc01ldGhvZElkOnQubWV0YSYmdC5tZXRhLm1ldGhvZElkfSk7Y2FzZSBGZy5TZWxlY3RPcHRpb25SZXF1ZXN0ZWQ6Y2FzZSBGZy5TZWxlY3RPcHRpb25TdWNjZWVkZWQ6cmV0dXJuIFR2KGUse3NlbGVjdE9wdGlvbkVycm9yOnZvaWQgMCxzZWxlY3RPcHRpb25NZXRob2RJZDp2b2lkIDB9KTtjYXNlIEZnLlNlbGVjdE9wdGlvbkZhaWxlZDpyZXR1cm4gVHYoZSx7c2VsZWN0T3B0aW9uRXJyb3I6dC5wYXlsb2FkLHNlbGVjdE9wdGlvbk1ldGhvZElkOnQubWV0YSYmdC5tZXRhLm1ldGhvZElkfSk7Y2FzZSBGZy5XaWRnZXRJbnRlcmFjdGlvblN0YXJ0ZWQ6Y2FzZSBGZy5XaWRnZXRJbnRlcmFjdGlvbkZpbmlzaGVkOnJldHVybiBUdihlLHt3aWRnZXRJbnRlcmFjdGlvbkVycm9yOnZvaWQgMCx3aWRnZXRJbnRlcmFjdGlvbk1ldGhvZElkOnZvaWQgMH0pO2Nhc2UgRmcuV2lkZ2V0SW50ZXJhY3Rpb25GYWlsZWQ6cmV0dXJuIFR2KGUse3dpZGdldEludGVyYWN0aW9uRXJyb3I6dC5wYXlsb2FkLHdpZGdldEludGVyYWN0aW9uTWV0aG9kSWQ6dC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWR9KTtkZWZhdWx0OnJldHVybiBlfX1mdW5jdGlvbiB6UyhlPWtTLnN0YXR1c2VzLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgRmcuSW5pdGlhbGl6ZVJlcXVlc3RlZDpyZXR1cm4gVHYoZSx7aXNJbml0aWFsaXppbmc6ITAsaW5pdGlhbGl6ZU1ldGhvZElkOnQubWV0YSYmdC5tZXRhLm1ldGhvZElkfSk7Y2FzZSBGZy5Jbml0aWFsaXplRmFpbGVkOmNhc2UgRmcuSW5pdGlhbGl6ZVN1Y2NlZWRlZDpyZXR1cm4gVHYoZSx7aXNJbml0aWFsaXppbmc6ITEsaW5pdGlhbGl6ZU1ldGhvZElkOnZvaWQgMH0pO2Nhc2UgRmcuRGVpbml0aWFsaXplUmVxdWVzdGVkOnJldHVybiBUdihlLHtpc0RlaW5pdGlhbGl6aW5nOiEwLGRlaW5pdGlhbGl6ZU1ldGhvZElkOnQubWV0YSYmdC5tZXRhLm1ldGhvZElkfSk7Y2FzZSBGZy5EZWluaXRpYWxpemVGYWlsZWQ6Y2FzZSBGZy5EZWluaXRpYWxpemVTdWNjZWVkZWQ6cmV0dXJuIFR2KGUse2lzRGVpbml0aWFsaXppbmc6ITEsZGVpbml0aWFsaXplTWV0aG9kSWQ6dm9pZCAwfSk7Y2FzZSBGZy5VcGRhdGVBZGRyZXNzUmVxdWVzdGVkOnJldHVybiBUdihlLHtpc1VwZGF0aW5nQWRkcmVzczohMCx1cGRhdGVBZGRyZXNzTWV0aG9kSWQ6dC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWR9KTtjYXNlIEZnLlVwZGF0ZUFkZHJlc3NGYWlsZWQ6Y2FzZSBGZy5VcGRhdGVBZGRyZXNzU3VjY2VlZGVkOnJldHVybiBUdihlLHtpc1VwZGF0aW5nQWRkcmVzczohMSx1cGRhdGVBZGRyZXNzTWV0aG9kSWQ6dm9pZCAwfSk7Y2FzZSBGZy5TZWxlY3RPcHRpb25SZXF1ZXN0ZWQ6cmV0dXJuIFR2KGUse2lzU2VsZWN0aW5nT3B0aW9uOiEwLHNlbGVjdE9wdGlvbk1ldGhvZElkOnQubWV0YSYmdC5tZXRhLm1ldGhvZElkfSk7Y2FzZSBGZy5TZWxlY3RPcHRpb25GYWlsZWQ6Y2FzZSBGZy5TZWxlY3RPcHRpb25TdWNjZWVkZWQ6cmV0dXJuIFR2KGUse2lzU2VsZWN0aW5nT3B0aW9uOiExLHNlbGVjdE9wdGlvbk1ldGhvZElkOnZvaWQgMH0pO2Nhc2UgRmcuV2lkZ2V0SW50ZXJhY3Rpb25TdGFydGVkOnJldHVybiBUdihlLHtpc1dpZGdldEludGVyYWN0aW5nOiEwLHdpZGdldEludGVyYWN0aW9uTWV0aG9kSWQ6dC5tZXRhJiZ0Lm1ldGEubWV0aG9kSWR9KTtjYXNlIEZnLldpZGdldEludGVyYWN0aW9uRmluaXNoZWQ6Y2FzZSBGZy5XaWRnZXRJbnRlcmFjdGlvbkZhaWxlZDpyZXR1cm4gVHYoZSx7aXNXaWRnZXRJbnRlcmFjdGluZzohMSx3aWRnZXRJbnRlcmFjdGlvbk1ldGhvZElkOnZvaWQgMH0pO2RlZmF1bHQ6cmV0dXJuIGV9fWNvbnN0IE5TPXtlcnJvcnM6e30sc3RhdHVzZXM6e319O2Z1bmN0aW9uIHhTKGU9TlMsdCl7cmV0dXJuIGQoe2RhdGE6RlMsZXJyb3JzOmMoUlMsX3YpLHN0YXR1c2VzOkxTfSkoZSx0KX1mdW5jdGlvbiBGUyhlLHQpe3JldHVybiB0LnR5cGU9PT1vdi5TZW5kU2lnbkluRW1haWxTdWNjZWVkZWQ/VHYoZSx0LnBheWxvYWQpOmV9ZnVuY3Rpb24gUlMoZT1OUy5lcnJvcnMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBvdi5TZW5kU2lnbkluRW1haWxSZXF1ZXN0ZWQ6Y2FzZSBvdi5TZW5kU2lnbkluRW1haWxTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJzZW5kRXJyb3JcIix2b2lkIDApO2Nhc2Ugb3YuU2VuZFNpZ25JbkVtYWlsRmFpbGVkOnJldHVybiBJdihlLFwic2VuZEVycm9yXCIsdC5wYXlsb2FkKTtkZWZhdWx0OnJldHVybiBlfX1mdW5jdGlvbiBMUyhlPU5TLnN0YXR1c2VzLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2Ugb3YuU2VuZFNpZ25JbkVtYWlsUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNTZW5kaW5nXCIsITApO2Nhc2Ugb3YuU2VuZFNpZ25JbkVtYWlsRmFpbGVkOmNhc2Ugb3YuU2VuZFNpZ25JbkVtYWlsU3VjY2VlZGVkOnJldHVybiBJdihlLFwiaXNTZW5kaW5nXCIsITEpO2RlZmF1bHQ6cmV0dXJuIGV9fWNvbnN0IEJTPXtlcnJvcnM6e30sc3RhdHVzZXM6e319O2Z1bmN0aW9uIGpTKGU9QlMsdCl7cmV0dXJuIGQoe2Vycm9yczpjKFVTLF92KSxzdGF0dXNlczpxU30pKGUsdCl9ZnVuY3Rpb24gVVMoZT1CUy5lcnJvcnMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBweS5BcHBseVN0b3JlQ3JlZGl0UmVxdWVzdGVkOmNhc2UgcHkuQXBwbHlTdG9yZUNyZWRpdFN1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImFwcGx5RXJyb3JcIix2b2lkIDApO2Nhc2UgcHkuQXBwbHlTdG9yZUNyZWRpdEZhaWxlZDpyZXR1cm4gSXYoZSxcImFwcGx5RXJyb3JcIix0LnBheWxvYWQpO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIHFTKGU9QlMuc3RhdHVzZXMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBweS5BcHBseVN0b3JlQ3JlZGl0UmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNBcHBseWluZ1wiLCEwKTtjYXNlIHB5LkFwcGx5U3RvcmVDcmVkaXRTdWNjZWVkZWQ6Y2FzZSBweS5BcHBseVN0b3JlQ3JlZGl0RmFpbGVkOnJldHVybiBJdihlLFwiaXNBcHBseWluZ1wiLCExKTtkZWZhdWx0OnJldHVybiBlfX1jb25zdCBWUz17ZXJyb3JzOnt9LHN0YXR1c2VzOnt9fTtmdW5jdGlvbiBHUyhlPVZTLHQpe3JldHVybiBkKHtlcnJvcnM6YyhIUyxfdiksc3RhdHVzZXM6JFN9KShlLHQpfWZ1bmN0aW9uIEhTKGU9VlMuZXJyb3JzLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgZ3kuVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3RlZDpjYXNlIGd5LlVwZGF0ZVN1YnNjcmlwdGlvbnNTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJ1cGRhdGVFcnJvclwiLHZvaWQgMCk7Y2FzZSBneS5VcGRhdGVTdWJzY3JpcHRpb25zRmFpbGVkOnJldHVybiBJdihlLFwidXBkYXRlRXJyb3JcIix0LnBheWxvYWQpO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uICRTKGU9VlMuc3RhdHVzZXMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBneS5VcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNVcGRhdGluZ1wiLCEwKTtjYXNlIGd5LlVwZGF0ZVN1YnNjcmlwdGlvbnNGYWlsZWQ6Y2FzZSBneS5VcGRhdGVTdWJzY3JpcHRpb25zU3VjY2VlZGVkOnJldHVybiBJdihlLFwiaXNVcGRhdGluZ1wiLCExKTtkZWZhdWx0OnJldHVybiBlfX1jb25zdCBXUz17ZXJyb3JzOnt9LHN0YXR1c2VzOnt9fTtmdW5jdGlvbiBZUyhlPVdTLHQpe3JldHVybiBkKHtkYXRhOktTLGVycm9yczpjKEpTLF92KSxzdGF0dXNlczpaU30pKGUsdCl9ZnVuY3Rpb24gS1MoZSx0KXtzd2l0Y2godC50eXBlKXtjYXNlIEphLkxvYWRDaGVja291dFN1Y2NlZWRlZDpjYXNlIEphLlVwZGF0ZUNoZWNrb3V0U3VjY2VlZGVkOmNhc2UgcHkuQXBwbHlTdG9yZUNyZWRpdFN1Y2NlZWRlZDpjYXNlIFllLlVwZGF0ZUJpbGxpbmdBZGRyZXNzU3VjY2VlZGVkOmNhc2UgYnQuQXBwbHlDb3Vwb25TdWNjZWVkZWQ6Y2FzZSBidC5SZW1vdmVDb3Vwb25TdWNjZWVkZWQ6Y2FzZSBzeS5DcmVhdGVDb25zaWdubWVudHNTdWNjZWVkZWQ6Y2FzZSBzeS5VcGRhdGVDb25zaWdubWVudFN1Y2NlZWRlZDpjYXNlIHN5LkRlbGV0ZUNvbnNpZ25tZW50U3VjY2VlZGVkOmNhc2Ugc3kuVXBkYXRlU2hpcHBpbmdPcHRpb25TdWNjZWVkZWQ6Y2FzZSBzeS5Mb2FkU2hpcHBpbmdPcHRpb25zU3VjY2VlZGVkOmNhc2UgQXQuQXBwbHlHaWZ0Q2VydGlmaWNhdGVTdWNjZWVkZWQ6Y2FzZSBBdC5SZW1vdmVHaWZ0Q2VydGlmaWNhdGVTdWNjZWVkZWQ6Y2FzZSBtcy5WZXJpZnlDaGVja291dFN1Y2NlZWRlZDpyZXR1cm4gVHYoZSxHKHQucGF5bG9hZCxbXCJiaWxsaW5nQWRkcmVzc1wiLFwiY2FydFwiLFwiY29uc2lnbm1lbnRzXCIsXCJjdXN0b21lclwiLFwiY291cG9uc1wiLFwiZ2lmdENlcnRpZmljYXRlc1wiXSkpO2Nhc2UgSnAuU3VibWl0T3JkZXJTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJvcmRlcklkXCIsdC5wYXlsb2FkJiZ0LnBheWxvYWQub3JkZXIub3JkZXJJZCk7ZGVmYXVsdDpyZXR1cm4gZX19ZnVuY3Rpb24gSlMoZT1XUy5lcnJvcnMsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRSZXF1ZXN0ZWQ6Y2FzZSBKYS5Mb2FkQ2hlY2tvdXRTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJsb2FkRXJyb3JcIix2b2lkIDApO2Nhc2UgSmEuTG9hZENoZWNrb3V0RmFpbGVkOnJldHVybiBJdihlLFwibG9hZEVycm9yXCIsdC5wYXlsb2FkKTtjYXNlIEphLlVwZGF0ZUNoZWNrb3V0UmVxdWVzdGVkOmNhc2UgSmEuVXBkYXRlQ2hlY2tvdXRTdWNjZWVkZWQ6cmV0dXJuIEl2KGUsXCJ1cGRhdGVFcnJvclwiLHZvaWQgMCk7Y2FzZSBKYS5VcGRhdGVDaGVja291dEZhaWxlZDpyZXR1cm4gSXYoZSxcInVwZGF0ZUVycm9yXCIsdC5wYXlsb2FkKTtkZWZhdWx0OnJldHVybiBlfX1mdW5jdGlvbiBaUyhlPVdTLnN0YXR1c2VzLHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgSmEuTG9hZENoZWNrb3V0UmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNMb2FkaW5nXCIsITApO2Nhc2UgSmEuTG9hZENoZWNrb3V0RmFpbGVkOmNhc2UgSmEuTG9hZENoZWNrb3V0U3VjY2VlZGVkOnJldHVybiBJdihlLFwiaXNMb2FkaW5nXCIsITEpO2Nhc2UgSmEuVXBkYXRlQ2hlY2tvdXRSZXF1ZXN0ZWQ6cmV0dXJuIEl2KGUsXCJpc1VwZGF0aW5nXCIsITApO2Nhc2UgSmEuVXBkYXRlQ2hlY2tvdXRGYWlsZWQ6Y2FzZSBKYS5VcGRhdGVDaGVja291dFN1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImlzVXBkYXRpbmdcIiwhMSk7Y2FzZSBtcy5FeGVjdXRlUmVxdWVzdGVkOnJldHVybiBJdihlLFwiaXNFeGVjdXRpbmdTcGFtQ2hlY2tcIiwhMCk7Y2FzZSBtcy5FeGVjdXRlRmFpbGVkOmNhc2UgbXMuRXhlY3V0ZVN1Y2NlZWRlZDpyZXR1cm4gSXYoZSxcImlzRXhlY3V0aW5nU3BhbUNoZWNrXCIsITEpO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIFFTKGUsdCl7aWYobnVsbD09ZSl0aHJvdyB0P3QoKTpuZXcgRXJyb3IoXCJBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC5cIik7cmV0dXJuIGV9ZnVuY3Rpb24gWFMoZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2NvbnN0IHQ9T2JqZWN0LmNyZWF0ZShlKTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtsZXQgbj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7Zm9yKDtuOyl0KG4pLG49T2JqZWN0LmdldFByb3RvdHlwZU9mKG4pfShlLG49PntPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhuKS5mb3JFYWNoKG49PntcImNvbnN0cnVjdG9yXCIhPT1uJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0W25dJiZcIl9cIiE9PW4uY2hhckF0KDApJiYodFtuXT0oKGUsdCk9PiguLi5uKT0+cChlW3RdLmNhbGwoZSwuLi5uKSkpKGUsbikpfSl9KSx0fShlKX1jb25zdCBlXz17XCJtb2xsaWUuY3JlZGl0X2NhcmRcIjp7cHJvdmlkZXI6XCJtb2xsaWVcIixtZXRob2Q6XCJjcmVkaXRfY2FyZFwifSxcImFkeWVudjIuc2NoZW1lXCI6e3Byb3ZpZGVyOlwiYWR5ZW52MlwiLG1ldGhvZDpcInNjaGVtZVwifSxcImFkeWVudjMuc2NoZW1lXCI6e3Byb3ZpZGVyOlwiYWR5ZW52M1wiLG1ldGhvZDpcInNjaGVtZVwifSxcImFkeWVudjIuYmNtY1wiOntwcm92aWRlcjpcImFkeWVudjJcIixtZXRob2Q6XCJiY21jXCJ9LFwiYWR5ZW52Mi5pZGVhbFwiOntwcm92aWRlcjpcImFkeWVudjJcIixtZXRob2Q6XCJpZGVhbFwifSxcImFkeWVudjIuc2VwYWRpcmVjdGRlYml0XCI6e3Byb3ZpZGVyOlwiYWR5ZW52MlwiLG1ldGhvZDpcInNlcGFkaXJlY3RkZWJpdFwifSxcImFkeWVudjIuZGlyZWN0RWJhbmtpbmdcIjp7cHJvdmlkZXI6XCJhZHllbnYyXCIsbWV0aG9kOlwiZGlyZWN0RWJhbmtpbmdcIn0sXCJhZHllbnYyLmdpcm9wYXlcIjp7cHJvdmlkZXI6XCJhZHllbnYyXCIsbWV0aG9kOlwiZ2lyb3BheVwifSxiYXJjbGF5czp7cHJvdmlkZXI6XCJiYXJjbGF5c1wiLG1ldGhvZDpcImNyZWRpdF9jYXJkXCJ9LGJyYWludHJlZTp7cHJvdmlkZXI6XCJicmFpbnRyZWVcIixtZXRob2Q6XCJjcmVkaXRfY2FyZFwifSxicmFpbnRyZWVwYXlwYWw6e3Byb3ZpZGVyOlwiYnJhaW50cmVlXCIsbWV0aG9kOlwicGF5cGFsXCJ9LGJyYWludHJlZWFjaDp7cHJvdmlkZXI6XCJicmFpbnRyZWVcIixtZXRob2Q6XCJhY2hcIn0sYXV0aG9yaXplbmV0Ontwcm92aWRlcjpcImF1dGhvcml6ZW5ldFwiLG1ldGhvZDpcImNyZWRpdF9jYXJkXCJ9LGVsYXZvbjp7cHJvdmlkZXI6XCJlbGF2b25cIixtZXRob2Q6XCJjcmVkaXRfY2FyZFwifSxjaGVja291dGNvbTp7cHJvdmlkZXI6XCJjaGVja291dGNvbVwiLG1ldGhvZDpcImNyZWRpdF9jYXJkXCJ9LFwiY2hlY2tvdXRjb20uY3JlZGl0X2NhcmRcIjp7cHJvdmlkZXI6XCJjaGVja291dGNvbVwiLG1ldGhvZDpcImNyZWRpdF9jYXJkXCJ9LFwiY2hlY2tvdXRjb20uY2FyZFwiOntwcm92aWRlcjpcImNoZWNrb3V0Y29tXCIsbWV0aG9kOlwiY2FyZFwifSxzYWdlcGF5Ontwcm92aWRlcjpcInNhZ2VwYXlcIixtZXRob2Q6XCJjcmVkaXRfY2FyZFwifSxzdHJpcGU6e3Byb3ZpZGVyOlwic3RyaXBlXCIsbWV0aG9kOlwiY3JlZGl0X2NhcmRcIn0sXCJzdHJpcGV2My5jYXJkXCI6e3Byb3ZpZGVyOlwic3RyaXBldjNcIixtZXRob2Q6XCJjYXJkXCJ9LFwic3RyaXBldXBlLmNhcmRcIjp7cHJvdmlkZXI6XCJzdHJpcGV1cGVcIixtZXRob2Q6XCJjYXJkXCJ9LGN5YmVyc291cmNlOntwcm92aWRlcjpcImN5YmVyc291cmNlXCIsbWV0aG9kOlwiY3JlZGl0X2NhcmRcIn0sY3liZXJzb3VyY2V2Mjp7cHJvdmlkZXI6XCJjeWJlcnNvdXJjZXYyXCIsbWV0aG9kOlwiY3JlZGl0X2NhcmRcIn0sYm56Ontwcm92aWRlcjpcImJuelwiLG1ldGhvZDpcImNyZWRpdF9jYXJkXCJ9LGNvbnZlcmdlOntwcm92aWRlcjpcImNvbnZlcmdlXCIsbWV0aG9kOlwiY3JlZGl0X2NhcmRcIn0sYmx1ZXNuYXB2Mjp7cHJvdmlkZXI6XCJibHVlc25hcHYyXCIsbWV0aG9kOlwiY3JlZGl0X2NhcmRcIn0sXCJibHVlc25hcGRpcmVjdC5jcmVkaXRfY2FyZFwiOntwcm92aWRlcjpcImJsdWVzbmFwZGlyZWN0XCIsbWV0aG9kOlwiY3JlZGl0X2NhcmRcIn0sXCJibHVlc25hcGRpcmVjdC5lY3BcIjp7cHJvdmlkZXI6XCJibHVlc25hcGRpcmVjdFwiLG1ldGhvZDpcImVjcFwifSxcImJsdWVzbmFwZGlyZWN0LnNlcGFfZGlyZWN0X2RlYml0XCI6e3Byb3ZpZGVyOlwiYmx1ZXNuYXBkaXJlY3RcIixtZXRob2Q6XCJzZXBhX2RpcmVjdF9kZWJpdFwifSxvcmJpdGFsOntwcm92aWRlcjpcIm9yYml0YWxcIixtZXRob2Q6XCJjcmVkaXRfY2FyZFwifSxwYXltZXRyaWM6e3Byb3ZpZGVyOlwicGF5bWV0cmljXCIsbWV0aG9kOlwiY3JlZGl0X2NhcmRcIn0sYm9sdDp7cHJvdmlkZXI6XCJib2x0XCIsbWV0aG9kOlwiY3JlZGl0X2NhcmRcIn0sXCJiYXJjbGF5Y2FyZC5jcmVkaXRfY2FyZFwiOntwcm92aWRlcjpcImJhcmNsYXljYXJkXCIsbWV0aG9kOlwiY3JlZGl0X2NhcmRcIn0sbW9uZXJpczp7cHJvdmlkZXI6XCJtb25lcmlzXCIsbWV0aG9kOlwiY3JlZGl0X2NhcmRcIn0sY2JhX21wZ3M6e3Byb3ZpZGVyOlwiY2JhX21wZ3NcIixtZXRob2Q6XCJjcmVkaXRfY2FyZFwifSx3b3JsZHBheWFjY2Vzczp7cHJvdmlkZXI6XCJ3b3JsZHBheWFjY2Vzc1wiLG1ldGhvZDpcImNyZWRpdF9jYXJkXCJ9LHNxdWFyZXYyOntwcm92aWRlcjpcInNxdWFyZXYyXCIsbWV0aG9kOlwiY3JlZGl0X2NhcmRcIn0scGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkczp7cHJvdmlkZXI6XCJwYXlwYWxjb21tZXJjZVwiLG1ldGhvZDpcImNyZWRpdF9jYXJkXCJ9LHBheXBhbGNvbW1lcmNlOntwcm92aWRlcjpcInBheXBhbGNvbW1lcmNlXCIsbWV0aG9kOlwicGF5cGFsXCJ9LGJpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzOntwcm92aWRlcjpcImJpZ2NvbW1lcmNlX3BheW1lbnRzXCIsbWV0aG9kOlwiY3JlZGl0X2NhcmRcIn0sYmlnY29tbWVyY2VfcGF5bWVudHM6e3Byb3ZpZGVyOlwiYmlnY29tbWVyY2VfcGF5bWVudHNcIixtZXRob2Q6XCJwYXlwYWxcIn0sdGRvbmxpbmVtYXJ0Ontwcm92aWRlcjpcInRkb25saW5lbWFydFwiLG1ldGhvZDpcImNyZWRpdF9jYXJkXCJ9fTtmdW5jdGlvbiB0XyhlKXtyZXR1cm4gWSh7Zmlyc3ROYW1lOmUuZmlyc3ROYW1lLGxhc3ROYW1lOmUubGFzdE5hbWUsY29tcGFueTplLmNvbXBhbnksYWRkcmVzczE6ZS5hZGRyZXNzMSxhZGRyZXNzMjplLmFkZHJlc3MyLGNpdHk6ZS5jaXR5LHN0YXRlT3JQcm92aW5jZTplLnN0YXRlT3JQcm92aW5jZSxjb3VudHJ5Q29kZTplLmNvdW50cnlDb2RlLHBvc3RhbENvZGU6ZS5wb3N0YWxDb2RlLHBob25lOmUucGhvbmUsY3VzdG9tRmllbGRzOmUuY3VzdG9tRmllbGRzfSxiKX1jb25zdCBuXz17ZXJyb3JzOnt9LHN0YXR1c2VzOnt9fTtmdW5jdGlvbiBpXygpe2NvbnN0IGU9ZnVuY3Rpb24oKXtjb25zdCBlPXB2KGU9PmUuZGF0YSxlPT4oKT0+ZSksdD1wdihlLGU9PigpPT5RUyhlKCksKCk9Pm5ldyBRZShXZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3MpKSksbj1wdihlPT5lLmVycm9ycy51cGRhdGVFcnJvcixlPT4oKT0+ZSksaT1wdihlPT5lLmVycm9ycy5jb250aW51ZUFzR3Vlc3RFcnJvcixlPT4oKT0+ZSkscj1wdihlPT5lLmVycm9ycy5sb2FkRXJyb3IsZT0+KCk9PmUpLG89cHYoZT0+ISFlLnN0YXR1c2VzLmlzVXBkYXRpbmcsZT0+KCk9PmUpLGE9cHYoZT0+ISFlLnN0YXR1c2VzLmlzQ29udGludWluZ0FzR3Vlc3QsZT0+KCk9PmUpLHM9cHYoZT0+ISFlLnN0YXR1c2VzLmlzTG9hZGluZyxlPT4oKT0+ZSk7cmV0dXJuIE9lKChkPWJ2KT0+KHtnZXRCaWxsaW5nQWRkcmVzczplKGQpLGdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdzp0KGQpLGdldFVwZGF0ZUVycm9yOm4oZCksZ2V0Q29udGludWVBc0d1ZXN0RXJyb3I6aShkKSxnZXRMb2FkRXJyb3I6cihkKSxpc1VwZGF0aW5nOm8oZCksaXNDb250aW51aW5nQXNHdWVzdDphKGQpLGlzTG9hZGluZzpzKGQpfSkpfSgpLHQ9ZnVuY3Rpb24oKXtjb25zdCBlPXB2KGU9PmUuZGF0YSxlPT4oKT0+ZSksdD1wdihlLGU9PigpPT5RUyhlKCksKCk9Pm5ldyBRZShXZS5NaXNzaW5nQ2FydCkpKSxuPXB2KGU9PmUuZXJyb3JzLmxvYWRFcnJvcixlPT4oKT0+ZSksaT1wdihlPT4hIWUuc3RhdHVzZXMuaXNMb2FkaW5nLGU9PigpPT5lKTtyZXR1cm4gT2UoKHI9RHYpPT4oe2dldENhcnQ6ZShyKSxnZXRDYXJ0T3JUaHJvdzp0KHIpLGdldExvYWRFcnJvcjpuKHIpLGlzTG9hZGluZzppKHIpfSkpfSgpLG49ZnVuY3Rpb24oKXtjb25zdCBlPXB2KGU9PmUsZT0+KCk9PmUpLHQ9cHYoZT0+ZS5zdGF0dXNlcyxlPT5QZSh0PT57aWYodCl7Y29uc3Qgbj1lW3RdO3JldHVybiEwPT09KG4mJm4uaXNJbml0aWFsaXppbmcpfXJldHVybiBaKGUse2lzSW5pdGlhbGl6aW5nOiEwfSl9KSksbj1wdihlPT5lLmRhdGEsZT0+UGUoKHQsbik9Pntjb25zdCBpPWVbdF07cmV0dXJuISFpJiYobj8hMD09PWkuaW5pdGlhbGl6ZWRDb250YWluZXJzW25dOlooaS5pbml0aWFsaXplZENvbnRhaW5lcnMsZT0+ITA9PT1lKSl9KSksaT1wdihlPT5lLnN0YXR1c2VzLGU9PlBlKHQ9PntpZih0KXtjb25zdCBuPWVbdF07cmV0dXJuITA9PT0obiYmbi5pc0RlaW5pdGlhbGl6aW5nKX1yZXR1cm4gWihlLHtpc0RlaW5pdGlhbGl6aW5nOiEwfSl9KSkscj1wdihlPT5lLmVycm9ycyxlPT5QZSh0PT57Y29uc3Qgbj10P2VbdF06UyhpZShlKSxlPT4hKCFlfHwhZS5pbml0aWFsaXplRXJyb3IpKTtyZXR1cm4gbiYmbi5pbml0aWFsaXplRXJyb3J9KSksbz1wdihlPT5lLmVycm9ycyxlPT5QZSh0PT57Y29uc3Qgbj10P2VbdF06UyhpZShlKSxlPT4hKCFlfHwhZS5kZWluaXRpYWxpemVFcnJvcikpO3JldHVybiBuJiZuLmRlaW5pdGlhbGl6ZUVycm9yfSkpO3JldHVybiBPZSgoYT1Sdik9Pih7Z2V0U3RhdGU6ZShhKSxpc0luaXRpYWxpemluZzp0KGEpLGlzSW5pdGlhbGl6ZWQ6bihhKSxpc0RlaW5pdGlhbGl6aW5nOmkoYSksZ2V0SW5pdGlhbGl6ZUVycm9yOnIoYSksZ2V0RGVpbml0aWFsaXplRXJyb3I6byhhKX0pKX0oKSxpPWZ1bmN0aW9uKCl7Y29uc3QgZT1wdihlPT5lLmRhdGEsZT0+KCk9PmUpLHQ9cHYoZT0+ZS5kYXRhLGU9PnQ9PntpZighZSlyZXR1cm47Y29uc3R7Zmxhc2hNZXNzYWdlczpufT1lLmNvbnRleHQ7cmV0dXJuIG4/dm9pZCAwIT09dD9uLmZpbHRlcigoe3R5cGU6ZX0pPT50PT09ZSk6bjp2b2lkIDB9KSxuPXB2KGU9PmUuZGF0YSwoZSx7Zm9ybVN0YXRlOnR9KT0+dCYmdC5kYXRhLChlLHQpPT4oKT0+ZSYmdD9PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZS5zdG9yZUNvbmZpZykse2Zvcm1GaWVsZHM6dH0pOnZvaWQgMCksaT1wdihuLGU9PigpPT5RUyhlKCksKCk9Pm5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXRDb25maWcpKSkscj1wdihlPT5lLmRhdGEmJmUuZGF0YS5jb250ZXh0LGU9PigpPT5lKSxvPXB2KGU9PmUubWV0YSYmZS5tZXRhLmV4dGVybmFsU291cmNlLGU9PigpPT5lKSxhPXB2KGU9Pnt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PWUubWV0YSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaG9zdH0sZT0+KCk9PmUpLHM9cHYoZT0+e3ZhciB0O3JldHVybiBudWxsPT09KHQ9ZS5tZXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5sb2NhbGV9LGU9PigpPT5lKSxkPXB2KGU9PmUubWV0YSYmZS5tZXRhLnZhcmlhbnRJZGVudGlmaWNhdGlvblRva2VuLGU9PigpPT5lKSxjPXB2KGU9PmUuZXJyb3JzLmxvYWRFcnJvcixlPT4oKT0+ZSksbD1wdihlPT4hIWUuc3RhdHVzZXMuaXNMb2FkaW5nLGU9PigpPT5lKTtyZXR1cm4gT2UoKHU9SHYsaCk9Pih7Z2V0Q29uZmlnOmUodSksZ2V0Rmxhc2hNZXNzYWdlczp0KHUpLGdldFN0b3JlQ29uZmlnOm4odSx7Zm9ybVN0YXRlOmh9KSxnZXRTdG9yZUNvbmZpZ09yVGhyb3c6aSh1LHtmb3JtU3RhdGU6aH0pLGdldENvbnRleHRDb25maWc6cih1KSxnZXRFeHRlcm5hbFNvdXJjZTpvKHUpLGdldEhvc3Q6YSh1KSxnZXRMb2NhbGU6cyh1KSxnZXRWYXJpYW50SWRlbnRpZmljYXRpb25Ub2tlbjpkKHUpLGdldExvYWRFcnJvcjpjKHUpLGlzTG9hZGluZzpsKHUpfSkpfSgpLHI9ZnVuY3Rpb24oKXtjb25zdCBlPXB2KGU9PmUuZGF0YSxlPT4oKT0+ZSksdD1wdihlPT5lLmVycm9ycy5sb2FkRXJyb3IsZT0+KCk9PmUpLG49cHYoZT0+ISFlLnN0YXR1c2VzLmlzTG9hZGluZyxlPT4oKT0+ZSk7cmV0dXJuIE9lKChpPUVmKT0+KHtnZXRDb3VudHJpZXM6ZShpKSxnZXRMb2FkRXJyb3I6dChpKSxpc0xvYWRpbmc6bihpKX0pKX0oKSxvPWZ1bmN0aW9uKCl7Y29uc3QgZT1wdihlPT5lLmRhdGEsZT0+KCk9PmUpLHQ9cHYoZT0+ZS5lcnJvcnMucmVtb3ZlQ291cG9uRXJyb3IsZT0+KCk9PmUpLG49cHYoZT0+ZS5lcnJvcnMuYXBwbHlDb3Vwb25FcnJvcixlPT4oKT0+ZSksaT1wdihlPT4hIWUuc3RhdHVzZXMuaXNBcHBseWluZ0NvdXBvbixlPT4oKT0+ZSkscj1wdihlPT4hIWUuc3RhdHVzZXMuaXNSZW1vdmluZ0NvdXBvbixlPT4oKT0+ZSk7cmV0dXJuIE9lKChvPUp2KT0+KHtnZXRDb3Vwb25zOmUobyksZ2V0UmVtb3ZlRXJyb3I6dChvKSxnZXRBcHBseUVycm9yOm4obyksaXNBcHBseWluZzppKG8pLGlzUmVtb3Zpbmc6cihvKX0pKX0oKSxhPWZ1bmN0aW9uKCl7Y29uc3QgZT1wdihlPT5lLmRhdGEsZT0+KCk9PmUpLHQ9cHYoZSxlPT4oKT0+UVMoZSgpLCgpPT5uZXcgUWUoV2UuTWlzc2luZ0N1c3RvbWVyKSkpLG49cHYoZT0+ZS5lcnJvcnMuY3JlYXRlRXJyb3IsZT0+KCk9PmUpLGk9cHYoZT0+ISFlLnN0YXR1c2VzLmlzQ3JlYXRpbmcsZT0+KCk9PmUpLHI9cHYoZT0+ZS5lcnJvcnMuY3JlYXRlQWRkcmVzc0Vycm9yLGU9PigpPT5lKSxvPXB2KGU9PiEhZS5zdGF0dXNlcy5pc0NyZWF0aW5nQWRkcmVzcyxlPT4oKT0+ZSk7cmV0dXJuIE9lKChhPXNmKT0+KHtnZXRDdXN0b21lcjplKGEpLGdldEN1c3RvbWVyT3JUaHJvdzp0KGEpLGdldENyZWF0ZUFjY291bnRFcnJvcjpuKGEpLGlzQ3JlYXRpbmdDdXN0b21lckFjY291bnQ6aShhKSxnZXRDcmVhdGVBZGRyZXNzRXJyb3I6cihhKSxpc0NyZWF0aW5nQ3VzdG9tZXJBZGRyZXNzOm8oYSl9KSl9KCkscz1mdW5jdGlvbigpe2NvbnN0IGU9cHYoZT0+ZS5lcnJvcnMuc2lnbkluTWV0aG9kSWQsZT0+ZS5lcnJvcnMuc2lnbkluRXJyb3IsKGUsdCk9Pm49PntpZighbnx8ZT09PW4pcmV0dXJuIHR9KSx0PXB2KGU9PmUuZXJyb3JzLnNpZ25PdXRNZXRob2RJZCxlPT5lLmVycm9ycy5zaWduT3V0RXJyb3IsKGUsdCk9Pm49PntpZighbnx8ZT09PW4pcmV0dXJuIHR9KSxuPXB2KGU9PmUuZXJyb3JzLmV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRNZXRob2RJZCxlPT5lLmVycm9ycy5leGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0RXJyb3IsKGUsdCk9Pm49PntpZighbnx8ZT09PW4pcmV0dXJuIHR9KSxpPXB2KGU9PmUuZXJyb3JzLmluaXRpYWxpemVNZXRob2RJZCxlPT5lLmVycm9ycy5pbml0aWFsaXplRXJyb3JzLChlLHQpPT5uPT57aWYoZSYmdClyZXR1cm4gbj90W25dOnRbZV19KSxyPXB2KGU9PmUuZXJyb3JzLndpZGdldEludGVyYWN0aW9uTWV0aG9kSWQsZT0+ZS5lcnJvcnMud2lkZ2V0SW50ZXJhY3Rpb25FcnJvciwoZSx0KT0+bj0+e2lmKCFufHxlPT09bilyZXR1cm4gdH0pLG89cHYoZT0+ZS5zdGF0dXNlcy5zaWduSW5NZXRob2RJZCxlPT5lLnN0YXR1c2VzLmlzU2lnbmluZ0luLChlLHQpPT5uPT4hKG4mJmUhPT1ufHwhdCkpLGE9cHYoZT0+ZS5zdGF0dXNlcy5zaWduT3V0TWV0aG9kSWQsZT0+ZS5zdGF0dXNlcy5pc1NpZ25pbmdPdXQsKGUsdCk9Pm49PiEobiYmZSE9PW58fCF0KSkscz1wdihlPT5lLnN0YXR1c2VzLmV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRNZXRob2RJZCxlPT5lLnN0YXR1c2VzLmlzRXhlY3V0aW5nUGF5bWVudE1ldGhvZENoZWNrb3V0LChlLHQpPT5uPT4hKG4mJmUhPT1ufHwhdCkpLGQ9cHYoZT0+ZS5zdGF0dXNlcy5pbml0aWFsaXplTWV0aG9kSWQsZT0+ZS5zdGF0dXNlcy5pc0luaXRpYWxpemluZywoZSx0KT0+bj0+IShuJiZlIT09bnx8IXQpKSxjPXB2KGU9PmUuZGF0YSxlPT50PT4hKCFlW3RdfHwhZVt0XS5pc0luaXRpYWxpemVkKSksbD1wdihlPT5lLnN0YXR1c2VzLndpZGdldEludGVyYWN0aW9uTWV0aG9kSWQsZT0+ZS5zdGF0dXNlcy5pc1dpZGdldEludGVyYWN0aW5nLChlLHQpPT5uPT4hKG4mJmUhPT1ufHwhdCkpO3JldHVybiBPZSgodT1oZik9Pih7Z2V0U2lnbkluRXJyb3I6ZSh1KSxnZXRTaWduT3V0RXJyb3I6dCh1KSxnZXRFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0RXJyb3I6bih1KSxnZXRJbml0aWFsaXplRXJyb3I6aSh1KSxnZXRXaWRnZXRJbnRlcmFjdGlvbkVycm9yOnIodSksaXNTaWduaW5nSW46byh1KSxpc1NpZ25pbmdPdXQ6YSh1KSxpc0V4ZWN1dGluZ1BheW1lbnRNZXRob2RDaGVja291dDpzKHUpLGlzSW5pdGlhbGl6aW5nOmQodSksaXNJbml0aWFsaXplZDpjKHUpLGlzV2lkZ2V0SW50ZXJhY3Rpbmc6bCh1KX0pKX0oKSxkPWZ1bmN0aW9uKCl7Y29uc3QgZT1wdihlPT5lLmRhdGEsZT0+KCk9PmUpLHQ9cHYoZT0+ZS5lcnJvcnMucmVtb3ZlR2lmdENlcnRpZmljYXRlRXJyb3IsZT0+KCk9PmUpLG49cHYoZT0+ZS5lcnJvcnMuYXBwbHlHaWZ0Q2VydGlmaWNhdGVFcnJvcixlPT4oKT0+ZSksaT1wdihlPT4hIWUuc3RhdHVzZXMuaXNBcHBseWluZ0dpZnRDZXJ0aWZpY2F0ZSxlPT4oKT0+ZSkscj1wdihlPT4hIWUuc3RhdHVzZXMuaXNSZW1vdmluZ0dpZnRDZXJ0aWZpY2F0ZSxlPT4oKT0+ZSk7cmV0dXJuIE9lKChvPXRmKT0+KHtnZXRHaWZ0Q2VydGlmaWNhdGVzOmUobyksZ2V0UmVtb3ZlRXJyb3I6dChvKSxnZXRBcHBseUVycm9yOm4obyksaXNBcHBseWluZzppKG8pLGlzUmVtb3Zpbmc6cihvKX0pKX0oKSxjPWZ1bmN0aW9uKCl7Y29uc3QgZT1wdihlPT5lLmRhdGEsZT0+dD0+e2lmKCFlKXJldHVybjtjb25zdCBuPXQuZ2F0ZXdheT9gJHt0LmdhdGV3YXl9LiR7dC5pZH1gOnQuaWQsaT1lX1tuXTtyZXR1cm4gaT9mKGUsaSk6W119KSx0PXB2KGU9PmUuZGF0YSwoZT1bXSk9PnQ9Pntjb25zdCBuPWllKGVfKTtyZXR1cm4gZS5maW5kKGU9PmUuYmlncGF5VG9rZW49PT10JiZcImNhcmRcIj09PWUudHlwZSYmbi5zb21lKHQ9PmsoZSx0KSkpfSksbj1wdih0LGU9PnQ9PlFTKGUodCksKCk9Pm5ldyBRZShXZS5NaXNzaW5nUGF5bWVudEluc3RydW1lbnQpKSksaT1wdihlPT5lLmRhdGEsZT0+KCk9PntpZihlKXJldHVybiB3KGVfLHQ9PmYoZSxlPT5rKGUsdCkpKX0pLHI9cHYoZT0+ZS5tZXRhLGU9PigpPT5lKSxvPXB2KGU9PmUuZXJyb3JzLmxvYWRFcnJvcixlPT4oKT0+ZSksYT1wdihlPT5lLmVycm9ycy5mYWlsZWRJbnN0cnVtZW50LGU9PmUuZXJyb3JzLmRlbGV0ZUVycm9yLChlLHQpPT5uPT57aWYoIW58fGU9PT1uKXJldHVybiB0fSkscz1wdihlPT5lLnN0YXR1c2VzLmlzTG9hZGluZyxlPT4oKT0+ISFlKSxkPXB2KGU9PmUuc3RhdHVzZXMuZGVsZXRpbmdJbnN0cnVtZW50LGU9PmUuc3RhdHVzZXMuaXNEZWxldGluZywoZSx0KT0+bj0+IShuJiZlIT09bnx8IXQpKTtyZXR1cm4gT2UoKGM9aVMpPT4oe2dldENhcmRJbnN0cnVtZW50OnQoYyksZ2V0Q2FyZEluc3RydW1lbnRPclRocm93Om4oYyksZ2V0SW5zdHJ1bWVudHM6aShjKSxnZXRJbnN0cnVtZW50c0J5UGF5bWVudE1ldGhvZDplKGMpLGdldEluc3RydW1lbnRzTWV0YTpyKGMpLGdldExvYWRFcnJvcjpvKGMpLGdldERlbGV0ZUVycm9yOmEoYyksaXNMb2FkaW5nOnMoYyksaXNEZWxldGluZzpkKGMpfSkpfSgpLGw9ZnVuY3Rpb24oKXtjb25zdCBlPXB2KGU9PmUuZGF0YSxlPT4odD1bXSxuKT0+e2NvbnN0IGk9Uyh0LHtjb2RlOm59KTtyZXR1cm4oZT9lLnNoaXBwaW5nQWRkcmVzczpbXSkubWFwKGU9Pm8oZSx0LGkpKX0pLHQ9cHYoZT0+ZS5kYXRhLGU9Pih0PVtdLG4pPT57Y29uc3QgaT1TKHQse2NvZGU6bn0pO3JldHVybihlP2UuYmlsbGluZ0FkZHJlc3M6W10pLm1hcChlPT5vKGUsdCxpKSl9KSxuPXB2KGU9PmUuZGF0YSxlPT4oKT0+ZT9lLmN1c3RvbWVyQWNjb3VudDpbXSksaT1wdihlPT5lLmVycm9ycy5sb2FkRXJyb3IsZT0+KCk9PmUpLHI9cHYoZT0+ISFlLnN0YXR1c2VzLmlzTG9hZGluZyxlPT4oKT0+ZSk7ZnVuY3Rpb24gbyhlLHQsbil7cmV0dXJuXCJjb3VudHJ5Q29kZVwiPT09ZS5uYW1lP2Z1bmN0aW9uKGUsdD1bXSxuKXtpZighdC5sZW5ndGgpcmV0dXJuIGU7Y29uc3R7Y29kZTppPVwiXCJ9PW58fHt9LHI9dC5tYXAoKHtjb2RlOmUsbmFtZTp0fSk9Pih7dmFsdWU6ZSxsYWJlbDp0fSkpO3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse29wdGlvbnM6e2l0ZW1zOnJ9LGRlZmF1bHQ6aSx0eXBlOlwiYXJyYXlcIixmaWVsZFR5cGU6XCJkcm9wZG93blwiLGl0ZW10eXBlOlwic3RyaW5nXCJ9KX0oZSx0LG4pOlwic3RhdGVPclByb3ZpbmNlXCI9PT1lLm5hbWU/ZnVuY3Rpb24oZSx0KXtjb25zdHtzdWJkaXZpc2lvbnM6bj1bXSxyZXF1aXJlc1N0YXRlOml9PXR8fHt9O2lmKCFuLmxlbmd0aClyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtyZXF1aXJlZDpudWxsIT1pJiZpfSk7Y29uc3Qgcj1uLm1hcCgoe2NvZGU6ZSxuYW1lOnR9KT0+KHt2YWx1ZTplLGxhYmVsOnR9KSk7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7bmFtZTpcInN0YXRlT3JQcm92aW5jZUNvZGVcIixvcHRpb25zOntpdGVtczpyfSxyZXF1aXJlZDpudWxsPT1pfHxpLHR5cGU6XCJhcnJheVwiLGZpZWxkVHlwZTpcImRyb3Bkb3duXCIsaXRlbXR5cGU6XCJzdHJpbmdcIn0pfShlLG4pOlwicG9zdGFsQ29kZVwiPT09ZS5uYW1lP2Z1bmN0aW9uKGUsdCl7Y29uc3R7aGFzUG9zdGFsQ29kZXM6bj1bXX09dHx8e307cmV0dXJuIHZvaWQgMD09PW4/ZTpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3JlcXVpcmVkOkJvb2xlYW4obil9KX0oZSxuKTplfXJldHVybiBPZSgobz1DZik9Pih7Z2V0U2hpcHBpbmdBZGRyZXNzRmllbGRzOmUobyksZ2V0QmlsbGluZ0FkZHJlc3NGaWVsZHM6dChvKSxnZXRDdXN0b21lckFjY291bnRGaWVsZHM6bihvKSxnZXRMb2FkRXJyb3I6aShvKSxpc0xvYWRpbmc6cihvKX0pKX0oKSx1PWZ1bmN0aW9uKCl7Y29uc3QgZT1wdihlPT5lLmRhdGEsZT0+KCk9PmUpLHQ9cHYoZT0+ZS5tZXRhLGU9PigpPT5lKSxuPXB2KGU9PmUuZGF0YSxlPT4odCxuKT0+UyhlLG4/e2lkOnQsZ2F0ZXdheTpufTp7aWQ6dH0pKSxpPXB2KG4sZT0+KHQsbik9PlFTKGUodCxuKSwoKT0+bmV3IFFlKFdlLk1pc3NpbmdQYXltZW50TWV0aG9kKSkpLHI9cHYoZT0+ZS5lcnJvcnMubG9hZEVycm9yLGU9PigpPT5lKSxvPXB2KGU9PmUuZXJyb3JzLmxvYWRNZXRob2RJZCxlPT5lLmVycm9ycy5sb2FkTWV0aG9kRXJyb3IsKGUsdCk9Pm49PntpZighbnx8ZT09PW4pcmV0dXJuIHR9KSxhPXB2KGU9PmUuc3RhdHVzZXMuaXNMb2FkaW5nLGU9PigpPT4hIWUpLHM9cHYoZT0+ZS5zdGF0dXNlcy5sb2FkTWV0aG9kSWQsZT0+ZS5zdGF0dXNlcy5pc0xvYWRpbmdNZXRob2QsKGUsdCk9Pm49PiEobiYmZSE9PW58fCF0KSk7cmV0dXJuIE9lKChkPVZmKT0+KHtnZXRQYXltZW50TWV0aG9kczplKGQpLGdldFBheW1lbnRNZXRob2RzTWV0YTp0KGQpLGdldFBheW1lbnRNZXRob2Q6bihkKSxnZXRQYXltZW50TWV0aG9kT3JUaHJvdzppKGQpLGdldExvYWRFcnJvcjpyKGQpLGdldExvYWRNZXRob2RFcnJvcjpvKGQpLGlzTG9hZGluZzphKGQpLGlzTG9hZGluZ01ldGhvZDpzKGQpfSkpfSgpLGg9ZnVuY3Rpb24oKXtjb25zdCBlPXB2KGU9PmUuZXJyb3JzLmluaXRpYWxpemVNZXRob2RJZCxlPT5lLmVycm9ycy5pbml0aWFsaXplRXJyb3IsKGUsdCk9Pm49PntpZighbnx8ZT09PW4pcmV0dXJuIHR9KSx0PXB2KGU9PmUuZXJyb3JzLmV4ZWN1dGVNZXRob2RJZCxlPT5lLmVycm9ycy5leGVjdXRlRXJyb3IsKGUsdCk9Pm49PntpZighbnx8ZT09PW4pcmV0dXJuIHR9KSxuPXB2KGU9PmUuZXJyb3JzLmZpbmFsaXplTWV0aG9kSWQsZT0+ZS5lcnJvcnMuZmluYWxpemVFcnJvciwoZSx0KT0+bj0+e2lmKCFufHxlPT09bilyZXR1cm4gdH0pLGk9cHYoZT0+ZS5lcnJvcnMud2lkZ2V0SW50ZXJhY3Rpb25NZXRob2RJZCxlPT5lLmVycm9ycy53aWRnZXRJbnRlcmFjdGlvbkVycm9yLChlLHQpPT5uPT57aWYoIW58fGU9PT1uKXJldHVybiB0fSkscj1wdihlPT5lLnN0YXR1c2VzLmluaXRpYWxpemVNZXRob2RJZCxlPT5lLnN0YXR1c2VzLmlzSW5pdGlhbGl6aW5nLChlLHQpPT5uPT4hKG4mJmUhPT1ufHwhdCkpLG89cHYoZT0+ZS5kYXRhLGU9PnQ9Pntjb25zdCBuPXQuZ2F0ZXdheUlkP2Ake3QubWV0aG9kSWR9LiR7dC5nYXRld2F5SWR9YDp0Lm1ldGhvZElkO3JldHVybiEoIWVbbl18fCFlW25dLmlzSW5pdGlhbGl6ZWQpfSksYT1wdihlPT5lLnN0YXR1c2VzLmV4ZWN1dGVNZXRob2RJZCxlPT5lLnN0YXR1c2VzLmlzRXhlY3V0aW5nLChlLHQpPT5uPT4hKG4mJmUhPT1ufHwhdCkpLHM9cHYoZT0+ZS5zdGF0dXNlcy5maW5hbGl6ZU1ldGhvZElkLGU9PmUuc3RhdHVzZXMuaXNGaW5hbGl6aW5nLChlLHQpPT5uPT4hKG4mJmUhPT1ufHwhdCkpLGQ9cHYoZT0+ZS5zdGF0dXNlcy53aWRnZXRJbnRlcmFjdGlvbk1ldGhvZElkLGU9PmUuc3RhdHVzZXMuaXNXaWRnZXRJbnRlcmFjdGluZywoZSx0KT0+bj0+IShuJiZlIT09bnx8IXQpKTtyZXR1cm4gT2UoKGM9S2YpPT4oe2dldEluaXRpYWxpemVFcnJvcjplKGMpLGdldEV4ZWN1dGVFcnJvcjp0KGMpLGdldEZpbmFsaXplRXJyb3I6bihjKSxnZXRXaWRnZXRJbnRlcmFjdGluZ0Vycm9yOmkoYyksaXNJbml0aWFsaXppbmc6cihjKSxpc0luaXRpYWxpemVkOm8oYyksaXNFeGVjdXRpbmc6YShjKSxpc0ZpbmFsaXppbmc6cyhjKSxpc1dpZGdldEludGVyYWN0aW5nOmQoYyl9KSl9KCkscD1mdW5jdGlvbigpe2NvbnN0IGU9cHYoZT0+ZS5kYXRhLGU9Pih0LG4pPT57aWYoIWUpcmV0dXJuO2NvbnN0IGk9ZlModlMoe2NvbnNpZ25tZW50SWQ6dCxzZWFyY2hBcmVhOm59KSkscj1idG9hKGAke0pTT04uc3RyaW5naWZ5KGkpfWApO3JldHVybiBlW3JdfSksdD1wdihlPT5lLmVycm9ycy5sb2FkRXJyb3IsZT0+KCk9PmUpLG49cHYoZT0+ISFlLnN0YXR1c2VzLmlzTG9hZGluZyxlPT4oKT0+ZSk7cmV0dXJuIE9lKChpPVNTKT0+KHtnZXRQaWNrdXBPcHRpb25zOmUoaSksZ2V0TG9hZEVycm9yOnQoaSksaXNMb2FkaW5nOm4oaSl9KSl9KCksbT1mdW5jdGlvbigpe2NvbnN0IGU9cHYoZT0+ZS5kYXRhLGU9PigpPT5lKSx0PXB2KGUsZT0+KCk9PlFTKGUoKSwoKT0+bmV3IFFlKFdlLk1pc3NpbmdQYXltZW50UHJvdmlkZXJDdXN0b21lcikpKTtyZXR1cm4gT2UoKG49ZVMpPT4oe2dldFBheW1lbnRQcm92aWRlckN1c3RvbWVyOmUobiksZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJPclRocm93OnQobil9KSl9KCkseT1mdW5jdGlvbigpe2NvbnN0IGU9cHYoZT0+ZS5kYXRhLGU9PnQ9PmVbdF0pO3JldHVybiBPZSgodD1jUyk9Pih7Z2V0Q2hlY2tvdXQ6ZSh0KX0pKX0oKSxnPWZ1bmN0aW9uKCl7Y29uc3QgZT1wdihlPT5lLmRhdGEsZT0+KCk9Pntjb25zdCB0PW51bGw9PWU/dm9pZCAwOmUuZmluZChlPT4hZS5zZWxlY3RlZFBpY2t1cE9wdGlvbik7cmV0dXJuIG51bGw9PXQ/dm9pZCAwOnQuc2hpcHBpbmdBZGRyZXNzfSksdD1wdihlLGU9PigpPT5RUyhlKCksKCk9Pm5ldyBRZShXZS5NaXNzaW5nU2hpcHBpbmdBZGRyZXNzKSkpLG49cHYoZT0+ZS5kYXRhLGU9PigpPT57Y29uc3QgdD1udWxsPT1lP3ZvaWQgMDplLmZpbHRlcihlPT4hZS5zZWxlY3RlZFBpY2t1cE9wdGlvbik7cmV0dXJuIHQ/dC5tYXAoZT0+ZS5zaGlwcGluZ0FkZHJlc3MpOltdfSksaT1wdihuLGU9PigpPT5RUyhlKCksKCk9Pm5ldyBRZShXZS5NaXNzaW5nU2hpcHBpbmdBZGRyZXNzKSkpO3JldHVybiBPZSgocj1oUyk9Pih7Z2V0U2hpcHBpbmdBZGRyZXNzOmUociksZ2V0U2hpcHBpbmdBZGRyZXNzT3JUaHJvdzp0KHIpLGdldFNoaXBwaW5nQWRkcmVzc2VzOm4ociksZ2V0U2hpcHBpbmdBZGRyZXNzZXNPclRocm93Omkocil9KSl9KCksdj1mdW5jdGlvbigpe2NvbnN0IGU9cHYoZT0+ZS5kYXRhLGU9PigpPT5lKSx0PXB2KGU9PmUuZXJyb3JzLmxvYWRFcnJvcixlPT4oKT0+ZSksbj1wdihlPT5lLnN0YXR1c2VzLmlzTG9hZGluZyxlPT4oKT0+ISFlKTtyZXR1cm4gT2UoKGk9YlMpPT4oe2dldFNoaXBwaW5nQ291bnRyaWVzOmUoaSksZ2V0TG9hZEVycm9yOnQoaSksaXNMb2FkaW5nOm4oaSl9KSl9KCksXz1mdW5jdGlvbigpe2NvbnN0IGU9cHYoZT0+ZS5lcnJvcnMudXBkYXRlQWRkcmVzc01ldGhvZElkLGU9PmUuZXJyb3JzLnVwZGF0ZUFkZHJlc3NFcnJvciwoZSx0KT0+bj0+e2lmKCFufHxlPT09bilyZXR1cm4gdH0pLHQ9cHYoZT0+ZS5lcnJvcnMuc2VsZWN0T3B0aW9uTWV0aG9kSWQsZT0+ZS5lcnJvcnMuc2VsZWN0T3B0aW9uRXJyb3IsKGUsdCk9Pm49PntpZighbnx8ZT09PW4pcmV0dXJuIHR9KSxuPXB2KGU9PmUuZXJyb3JzLmluaXRpYWxpemVNZXRob2RJZCxlPT5lLmVycm9ycy5pbml0aWFsaXplRXJyb3IsKGUsdCk9Pm49PntpZighbnx8ZT09PW4pcmV0dXJuIHR9KSxpPXB2KGU9PmUuZXJyb3JzLndpZGdldEludGVyYWN0aW9uTWV0aG9kSWQsZT0+ZS5lcnJvcnMud2lkZ2V0SW50ZXJhY3Rpb25FcnJvciwoZSx0KT0+bj0+e2lmKCFufHxlPT09bilyZXR1cm4gdH0pLHI9cHYoZT0+ZS5zdGF0dXNlcy51cGRhdGVBZGRyZXNzTWV0aG9kSWQsZT0+ZS5zdGF0dXNlcy5pc1VwZGF0aW5nQWRkcmVzcywoZSx0KT0+bj0+IShuJiZlIT09bnx8IXQpKSxvPXB2KGU9PmUuc3RhdHVzZXMuc2VsZWN0T3B0aW9uTWV0aG9kSWQsZT0+ZS5zdGF0dXNlcy5pc1NlbGVjdGluZ09wdGlvbiwoZSx0KT0+bj0+IShuJiZlIT09bnx8IXQpKSxhPXB2KGU9PmUuc3RhdHVzZXMuaW5pdGlhbGl6ZU1ldGhvZElkLGU9PmUuc3RhdHVzZXMuaXNJbml0aWFsaXppbmcsKGUsdCk9Pm49PiEobiYmZSE9PW58fCF0KSkscz1wdihlPT5lLmRhdGEsZT0+dD0+ISghZVt0XXx8IWVbdF0uaXNJbml0aWFsaXplZCkpLGQ9cHYoZT0+ZS5zdGF0dXNlcy53aWRnZXRJbnRlcmFjdGlvbk1ldGhvZElkLGU9PmUuc3RhdHVzZXMuaXNXaWRnZXRJbnRlcmFjdGluZywoZSx0KT0+bj0+IShuJiZlIT09bnx8IXQpKTtyZXR1cm4gT2UoKGM9a1MpPT4oe2dldFVwZGF0ZUFkZHJlc3NFcnJvcjplKGMpLGdldFNlbGVjdE9wdGlvbkVycm9yOnQoYyksZ2V0SW5pdGlhbGl6ZUVycm9yOm4oYyksZ2V0V2lkZ2V0SW50ZXJhY3Rpb25FcnJvcjppKGMpLGlzVXBkYXRpbmdBZGRyZXNzOnIoYyksaXNTZWxlY3RpbmdPcHRpb246byhjKSxpc0luaXRpYWxpemluZzphKGMpLGlzSW5pdGlhbGl6ZWQ6cyhjKSxpc1dpZGdldEludGVyYWN0aW5nOmQoYyl9KSl9KCksQz1mdW5jdGlvbigpe2NvbnN0IGU9cHYoZT0+ZS5kYXRhLGU9PigpPT5lKSx0PXB2KGUsZT0+KCk9PlFTKGUoKSwoKT0+bmV3IFFlKFdlLk1pc3NpbmdDb25zaWdubWVudHMpKSksbj1wdihlPT5lLmRhdGEsZT0+dD0+e2lmKGUmJmUubGVuZ3RoKXJldHVybiBTKGUse2lkOnR9KX0pLGk9cHYoZT0+ZS5kYXRhLGU9PnQ9PntpZihlJiZlLmxlbmd0aClyZXR1cm4gUyhlLGU9PntyZXR1cm4gbj1lLnNoaXBwaW5nQWRkcmVzcyxpPXQsQSh0XyhuKSx0XyhpKSk7dmFyIG4saX0pfSkscj1wdihlPT5lLmRhdGEsZT0+KCk9PntpZihlJiZlLmxlbmd0aClyZXR1cm4gZVswXS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9ufSksbz1wdihlPT5lLmVycm9ycy5sb2FkRXJyb3IsZT0+KCk9PmUpLGE9cHYoZT0+ZS5lcnJvcnMuY3JlYXRlRXJyb3IsZT0+KCk9PmUpLHM9cHYoZT0+ZS5lcnJvcnMubG9hZFNoaXBwaW5nT3B0aW9uc0Vycm9yLGU9PigpPT5lKSxkPXB2KGUsKGUse2NhcnQ6dH0pPT50LmdldENhcnQsKGUsdCk9PigpPT57Y29uc3Qgbj10KCk7aWYoIW4pcmV0dXJuW107Y29uc3QgaT0oZSgpfHxbXSkucmVkdWNlKChlLHQpPT5lLmNvbmNhdCh0LmxpbmVJdGVtSWRzKSxbXSk7cmV0dXJuKG4ubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXN8fFtdKS5maWx0ZXIoZT0+aS5pbmRleE9mKGUuaWQpPDApfSksYz1wdihlPT5lLmVycm9ycy51cGRhdGVFcnJvcixlPT50PT50P2VbdF06UyhlKSksbD1wdihlPT5lLmVycm9ycy5kZWxldGVFcnJvcixlPT50PT50P2VbdF06UyhlKSksdT1wdihpLGMsYSwoZSx0LG4pPT5pPT57Y29uc3Qgcj1lKGkpO3JldHVybiByP3Qoci5pZCk6bigpfSksaD1wdihlPT5lLmVycm9ycy51cGRhdGVTaGlwcGluZ09wdGlvbkVycm9yLGU9PnQ9PnQ/ZVt0XTpTKGUpKSxwPXB2KGU9PmUuc3RhdHVzZXMuaXNMb2FkaW5nLGU9PigpPT4hMD09PWUpLG09cHYoZT0+ZS5zdGF0dXNlcy5pc0xvYWRpbmdTaGlwcGluZ09wdGlvbnMsZT0+KCk9PiEwPT09ZSkseT1wdihlPT5lLnN0YXR1c2VzLmlzQ3JlYXRpbmcsZT0+KCk9PiEwPT09ZSksZz1wdihlPT5lLnN0YXR1c2VzLmlzVXBkYXRpbmcsZT0+dD0+dD8hMD09PWVbdF06ITA9PT1TKGUpKSx2PXB2KGU9PmUuc3RhdHVzZXMuaXNEZWxldGluZyxlPT50PT50PyEwPT09ZVt0XTohMD09PVMoZSkpLGY9cHYoaSxnLHksKGUsdCxuKT0+aT0+e2NvbnN0IHI9ZShpKTtyZXR1cm4gcj90KHIuaWQpOm4oKX0pLF89cHYoZT0+ZS5zdGF0dXNlcy5pc1VwZGF0aW5nU2hpcHBpbmdPcHRpb24sZT0+dD0+dD8hMD09PWVbdF06ITA9PT1TKGUpKTtyZXR1cm4gT2UoKFM9aFMsdyk9Pih7Z2V0Q29uc2lnbm1lbnRzOmUoUyksZ2V0Q29uc2lnbm1lbnRzT3JUaHJvdzp0KFMpLGdldENvbnNpZ25tZW50QnlJZDpuKFMpLGdldENvbnNpZ25tZW50QnlBZGRyZXNzOmkoUyksZ2V0U2hpcHBpbmdPcHRpb246cihTKSxnZXRMb2FkRXJyb3I6byhTKSxnZXRDcmVhdGVFcnJvcjphKFMpLGdldExvYWRTaGlwcGluZ09wdGlvbnNFcnJvcjpzKFMpLGdldFVuYXNzaWduZWRJdGVtczpkKFMse2NhcnQ6d30pLGdldFVwZGF0ZUVycm9yOmMoUyksZ2V0RGVsZXRlRXJyb3I6bChTKSxnZXRJdGVtQXNzaWdubWVudEVycm9yOnUoUyksZ2V0VXBkYXRlU2hpcHBpbmdPcHRpb25FcnJvcjpoKFMpLGlzTG9hZGluZzpwKFMpLGlzTG9hZGluZ1NoaXBwaW5nT3B0aW9uczptKFMpLGlzQ3JlYXRpbmc6eShTKSxpc1VwZGF0aW5nOmcoUyksaXNEZWxldGluZzp2KFMpLGlzQXNzaWduaW5nSXRlbXM6ZihTKSxpc1VwZGF0aW5nU2hpcHBpbmdPcHRpb246XyhTKX0pKX0oKSxJPWZ1bmN0aW9uKCl7Y29uc3QgZT1wdihlPT5lLmRhdGEsKGUse2JpbGxpbmdBZGRyZXNzOnR9KT0+dC5nZXRCaWxsaW5nQWRkcmVzcywoZSx7Y2FydDp0fSk9PnQuZ2V0Q2FydCwoZSx7Y3VzdG9tZXI6dH0pPT50LmdldEN1c3RvbWVyLChlLHtjb25zaWdubWVudHM6dH0pPT50LmdldENvbnNpZ25tZW50cywoZSx7Y291cG9uczp0fSk9PnQuZ2V0Q291cG9ucywoZSx7Z2lmdENlcnRpZmljYXRlczp0fSk9PnQuZ2V0R2lmdENlcnRpZmljYXRlcywoZSx0LG4saSxyLG8sYSk9PigpPT57Y29uc3Qgcz10KCksZD1uKCksYz1pKCksbD1yKCl8fFtdLHU9bygpfHxbXSxoPWEoKXx8W107aWYoZSYmZCYmYylyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtiaWxsaW5nQWRkcmVzczpzLGNhcnQ6ZCxjdXN0b21lcjpjLGNvbnNpZ25tZW50czpsLGNvdXBvbnM6dSxnaWZ0Q2VydGlmaWNhdGVzOmh9KX0pLHQ9cHYoZSxlPT4oKT0+UVMoZSgpLCgpPT5uZXcgUWUoV2UuTWlzc2luZ0NoZWNrb3V0KSkpLG49cHYoZSxlPT50PT57Y29uc3Qgbj1lKCk7aWYoIW4pcmV0dXJuO2NvbnN0IGk9bi5ncmFuZFRvdGFsfHwwLHI9bi5jdXN0b21lci5zdG9yZUNyZWRpdHx8MDtyZXR1cm4gdD9NYXRoLm1heChpLXIsMCk6bi5vdXRzdGFuZGluZ0JhbGFuY2V9KSxpPXB2KGU9PmUuZXJyb3JzLmxvYWRFcnJvcixlPT4oKT0+ZSkscj1wdihlPT5lLmVycm9ycy51cGRhdGVFcnJvcixlPT4oKT0+ZSksbz1wdihlPT5lLnN0YXR1c2VzLmlzRXhlY3V0aW5nU3BhbUNoZWNrLGU9PigpPT4hMD09PWUpLGE9cHYoZT0+ZS5zdGF0dXNlcy5pc0xvYWRpbmcsZT0+KCk9PiEwPT09ZSkscz1wdihlPT5lLnN0YXR1c2VzLmlzVXBkYXRpbmcsZT0+KCk9PiEwPT09ZSk7cmV0dXJuIE9lKChkPVdTLGMsbCx1LGgscCxtKT0+KHtnZXRDaGVja291dDplKGQse2JpbGxpbmdBZGRyZXNzOmMsY2FydDpsLGNvbnNpZ25tZW50czp1LGNvdXBvbnM6aCxjdXN0b21lcjpwLGdpZnRDZXJ0aWZpY2F0ZXM6bX0pLGdldENoZWNrb3V0T3JUaHJvdzp0KGQse2JpbGxpbmdBZGRyZXNzOmMsY2FydDpsLGNvbnNpZ25tZW50czp1LGNvdXBvbnM6aCxjdXN0b21lcjpwLGdpZnRDZXJ0aWZpY2F0ZXM6bX0pLGdldE91dHN0YW5kaW5nQmFsYW5jZTpuKGQse2JpbGxpbmdBZGRyZXNzOmMsY2FydDpsLGNvbnNpZ25tZW50czp1LGNvdXBvbnM6aCxjdXN0b21lcjpwLGdpZnRDZXJ0aWZpY2F0ZXM6bX0pLGdldExvYWRFcnJvcjppKGQpLGdldFVwZGF0ZUVycm9yOnIoZCksaXNFeGVjdXRpbmdTcGFtQ2hlY2s6byhkKSxpc0xvYWRpbmc6YShkKSxpc1VwZGF0aW5nOnMoZCl9KSl9KCksYj1mdW5jdGlvbigpe2NvbnN0IGU9cHYoZT0+ZS5kYXRhLChlLHtiaWxsaW5nQWRkcmVzczp0fSk9PnQuZ2V0T3JkZXJCaWxsaW5nQWRkcmVzcygpLChlLHtjb3Vwb25zOnR9KT0+dC5nZXRDb3Vwb25zKCksKGUsdCxuPVtdKT0+KCk9PntpZihlJiZ0KXJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse2JpbGxpbmdBZGRyZXNzOnQsY291cG9uczpufSl9KSx0PXB2KGUsZT0+KCk9PlFTKGUoKSwoKT0+bmV3IFFlKFdlLk1pc3NpbmdPcmRlcikpKSxuPXB2KGU9PmUubWV0YSxlPT4oKT0+ZSksaT1wdihlPT5lLmVycm9ycy5sb2FkRXJyb3IsZT0+KCk9PmUpLHI9cHYoZT0+e3ZhciB0O3JldHVybiBudWxsPT09KHQ9ZS5kYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5wYXltZW50c30sKGU9W10pPT50PT57Y29uc3Qgbj1lLmZpbmQoKHtwcm92aWRlcklkOmV9KT0+ZT09PXQpO3JldHVybiBudWxsPT1uP3ZvaWQgMDpuLnBheW1lbnRJZH0pLG89cHYoZT0+ISFlLnN0YXR1c2VzLmlzTG9hZGluZyxlPT4oKT0+ZSk7cmV0dXJuIE9lKChhPU1mLHMsZCk9Pih7Z2V0T3JkZXI6ZShhLHtiaWxsaW5nQWRkcmVzczpzLGNvdXBvbnM6ZH0pLGdldE9yZGVyT3JUaHJvdzp0KGEse2JpbGxpbmdBZGRyZXNzOnMsY291cG9uczpkfSksZ2V0T3JkZXJNZXRhOm4oYSksZ2V0TG9hZEVycm9yOmkoYSksZ2V0UGF5bWVudElkOnIoYSksaXNMb2FkaW5nOm8oYSl9KSl9KCksUD1mdW5jdGlvbigpe2NvbnN0IGU9cHYoZT0+ZS5kYXRhLGU9PigpPT5lKTtyZXR1cm4gT2UoKHQ9TGYpPT4oe2dldE9yZGVyQmlsbGluZ0FkZHJlc3M6ZSh0KX0pKX0oKSxPPWZ1bmN0aW9uKCl7Y29uc3QgZT1wdigoe29yZGVyOmV9KT0+ZS5nZXRPcmRlck1ldGEsZT0+KCk9Pntjb25zdCB0PWUoKTtyZXR1cm4gdCYmdC5wYXltZW50fSksdD1wdigoe29yZGVyOmV9KT0+ZS5nZXRPcmRlcixlPT4oKT0+e2NvbnN0IHQ9ZSgpO3JldHVybiBTKHQmJnQucGF5bWVudHMsKHtwcm92aWRlcklkOmV9KT0+XCJnaWZ0Y2VydGlmaWNhdGVcIiE9PWUmJlwic3RvcmVjcmVkaXRcIiE9PWUpfSksbj1wdigoe2NoZWNrb3V0OmV9KT0+ZS5nZXRDaGVja291dCxlPT4oKT0+e2NvbnN0IHQ9ZSgpO3JldHVybiBTKHQmJnQucGF5bWVudHMsKHtwcm92aWRlclR5cGU6ZX0pPT5cIlBBWU1FTlRfVFlQRV9IT1NURURcIj09PWUpfSksaT1wdihlLG4sdCwoZSx0LG4pPT4oKT0+e2NvbnN0IGk9ZSgpO2lmKGkmJmkuaWQpcmV0dXJue3Byb3ZpZGVySWQ6aS5pZCxnYXRld2F5SWQ6aS5nYXRld2F5fTtjb25zdCByPXQoKXx8bigpO3JldHVybiByJiZyLnByb3ZpZGVySWQ/e3Byb3ZpZGVySWQ6ci5wcm92aWRlcklkLGdhdGV3YXlJZDpyLmdhdGV3YXlJZH06dm9pZCAwfSkscj1wdihpLGU9PigpPT5RUyhlKCksKCk9Pm5ldyBRZShXZS5NaXNzaW5nUGF5bWVudElkKSkpLG89cHYoZSxuLHQsKGUsdCxuKT0+KCk9Pntjb25zdCBpPWUoKTtpZihpJiZpLnN0YXR1cylyZXR1cm4gaS5zdGF0dXMucmVwbGFjZShcIlBBWU1FTlRfU1RBVFVTX1wiLFwiXCIpO2NvbnN0IHI9dCgpfHxuKCk7cmV0dXJuIHI/ci5kZXRhaWwuc3RlcDp2b2lkIDB9KSxhPXB2KG8sZT0+KCk9PlFTKGUoKSwoKT0+bmV3IFFlKFdlLk1pc3NpbmdQYXltZW50U3RhdHVzKSkpLHM9cHYoKHtvcmRlcjplfSk9PmUuZ2V0T3JkZXJNZXRhLGU9PigpPT57Y29uc3QgdD1lKCk7cmV0dXJuIHQmJnQudG9rZW59KSxkPXB2KHMsZT0+KCk9PlFTKGUoKSwoKT0+bmV3IFFlKFdlLk1pc3NpbmdQYXltZW50VG9rZW4pKSksYz1wdihlLGU9PigpPT57Y29uc3QgdD1lKCk7cmV0dXJuIHQmJnQucmVkaXJlY3RVcmx9KSxsPXB2KGMsZT0+KCk9PlFTKGUoKSwoKT0+bmV3IFFlKFdlLk1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmwpKSksdT1wdigoe2NoZWNrb3V0OmV9KT0+ZS5nZXRPdXRzdGFuZGluZ0JhbGFuY2UsZT0+KHQ9ITEpPT57Y29uc3Qgbj1lKHQpO3JldHVybiEhbiYmbj4wfSksaD1wdihvLGU9PnQ9PiEoIXR8fCF0Lm5vbmNlKXx8ZSgpPT09cmd8fGUoKT09PW9nKTtyZXR1cm4gT2UoKGUsdCk9Pih7Z2V0UGF5bWVudElkOmkoe2NoZWNrb3V0OmUsb3JkZXI6dH0pLGdldFBheW1lbnRJZE9yVGhyb3c6cih7Y2hlY2tvdXQ6ZSxvcmRlcjp0fSksZ2V0UGF5bWVudFN0YXR1czpvKHtjaGVja291dDplLG9yZGVyOnR9KSxnZXRQYXltZW50U3RhdHVzT3JUaHJvdzphKHtjaGVja291dDplLG9yZGVyOnR9KSxnZXRQYXltZW50VG9rZW46cyh7Y2hlY2tvdXQ6ZSxvcmRlcjp0fSksZ2V0UGF5bWVudFRva2VuT3JUaHJvdzpkKHtjaGVja291dDplLG9yZGVyOnR9KSxnZXRQYXltZW50UmVkaXJlY3RVcmw6Yyh7Y2hlY2tvdXQ6ZSxvcmRlcjp0fSksZ2V0UGF5bWVudFJlZGlyZWN0VXJsT3JUaHJvdzpsKHtjaGVja291dDplLG9yZGVyOnR9KSxpc1BheW1lbnREYXRhUmVxdWlyZWQ6dSh7Y2hlY2tvdXQ6ZSxvcmRlcjp0fSksaXNQYXltZW50RGF0YVN1Ym1pdHRlZDpoKHtjaGVja291dDplLG9yZGVyOnR9KX0pKX0oKSxFPWZ1bmN0aW9uKCl7Y29uc3QgZT1wdihlPT5lLmVycm9ycy5hcHBseUVycm9yLGU9PigpPT5lKSx0PXB2KGU9PiEhZS5zdGF0dXNlcy5pc0FwcGx5aW5nLGU9PigpPT5lKTtyZXR1cm4gT2UoKG49bl8pPT4oe2dldEFwcGx5RXJyb3I6ZShuKSxpc0FwcGx5aW5nOnQobil9KSl9KCksVD1mdW5jdGlvbigpe2NvbnN0IGU9cHYoZT0+ZS5lcnJvcnMudXBkYXRlRXJyb3IsZT0+KCk9PmUpLHQ9cHYoZT0+ISFlLnN0YXR1c2VzLmlzVXBkYXRpbmcsZT0+KCk9PmUpO3JldHVybiBPZSgobj1WUyk9Pih7Z2V0VXBkYXRlRXJyb3I6ZShuKSxpc1VwZGF0aW5nOnQobil9KSl9KCksRD1mdW5jdGlvbigpe2NvbnN0IGU9cHYoZT0+ZS5kYXRhLGU9PigpPT5lKSx0PXB2KGU9PmUuZXJyb3JzLnNlbmRFcnJvcixlPT4oKT0+ZSksbj1wdihlPT4hIWUuc3RhdHVzZXMuaXNTZW5kaW5nLGU9PigpPT5lKTtyZXR1cm4gT2UoKGk9TlMpPT4oe2dldEVtYWlsOmUoaSksZ2V0U2VuZEVycm9yOnQoaSksaXNTZW5kaW5nOm4oaSl9KSl9KCksTT1mdW5jdGlvbigpe2NvbnN0IGU9cHYoZT0+ZS5kYXRhLGU9PigpPT5lKSx0PXB2KGU9PmUuZGF0YSxlPT50PT5udWxsPT1lP3ZvaWQgMDplLmZpbmQoZT0+ZS5yZWdpb249PT10KSksbj1wdihlPT5lLmVycm9ycy5sb2FkRXJyb3IsZT0+KCk9PmUpLGk9cHYoZT0+ZS5zdGF0dXNlcy5pc0xvYWRpbmcsZT0+KCk9PiEhZSk7cmV0dXJuIE9lKChyPXZmKT0+KHtnZXRFeHRlbnNpb25zOmUociksZ2V0RXh0ZW5zaW9uQnlSZWdpb246dChyKSxnZXRMb2FkRXJyb3I6bihyKSxpc0xvYWRpbmc6aShyKX0pKX0oKTtyZXR1cm4oZixTPXt9KT0+e2NvbnN0IHc9ZShmLmJpbGxpbmdBZGRyZXNzKSxBPXQoZi5jYXJ0KSxrPW4oZi5jaGVja291dEJ1dHRvbiksej1yKGYuY291bnRyaWVzKSxOPW8oZi5jb3Vwb25zKSx4PWEoZi5jdXN0b21lciksRj1zKGYuY3VzdG9tZXJTdHJhdGVnaWVzKSxSPU0oZi5leHRlbnNpb25zKSxMPWwoZi5mb3JtRmllbGRzKSxCPWQoZi5naWZ0Q2VydGlmaWNhdGVzKSxqPWMoZi5pbnN0cnVtZW50cyksVT1QKGYub3JkZXJCaWxsaW5nQWRkcmVzcykscT11KGYucGF5bWVudE1ldGhvZHMpLFY9bShmLnBheW1lbnRQcm92aWRlckN1c3RvbWVyKSxHPWgoZi5wYXltZW50U3RyYXRlZ2llcyksSD1wKGYucGlja3VwT3B0aW9ucyksJD15KGYucmVtb3RlQ2hlY2tvdXQpLFc9ZyhmLmNvbnNpZ25tZW50cyksWT12KGYuc2hpcHBpbmdDb3VudHJpZXMpLEs9XyhmLnNoaXBwaW5nU3RyYXRlZ2llcyksSj1UKGYuc3Vic2NyaXB0aW9ucyksWj1FKGYuc3RvcmVDcmVkaXQpLFE9RChmLnNpZ25JbkVtYWlsKSxYPUMoZi5jb25zaWdubWVudHMsQSksZWU9SShmLmNoZWNrb3V0LHcsQSxYLE4seCxCKSx0ZT1iKGYub3JkZXIsVSxOKSxuZT1PKGVlLHRlKSxpZT17YmlsbGluZ0FkZHJlc3M6dyxjYXJ0OkEsY2hlY2tvdXQ6ZWUsY2hlY2tvdXRCdXR0b246ayxjb25maWc6aShmLmNvbmZpZyxmLmZvcm1GaWVsZHMpLGNvbnNpZ25tZW50czpYLGNvdW50cmllczp6LGNvdXBvbnM6TixjdXN0b21lcjp4LGN1c3RvbWVyU3RyYXRlZ2llczpGLGV4dGVuc2lvbnM6Uixmb3JtOkwsZ2lmdENlcnRpZmljYXRlczpCLGluc3RydW1lbnRzOmosb3JkZXI6dGUsb3JkZXJCaWxsaW5nQWRkcmVzczpVLHBheW1lbnQ6bmUscGF5bWVudE1ldGhvZHM6cSxwYXltZW50UHJvdmlkZXJDdXN0b21lcjpWLHBheW1lbnRTdHJhdGVnaWVzOkcscGlja3VwT3B0aW9uczpILHJlbW90ZUNoZWNrb3V0OiQsc2hpcHBpbmdBZGRyZXNzOlcsc2hpcHBpbmdDb3VudHJpZXM6WSxzaGlwcGluZ1N0cmF0ZWdpZXM6SyxzaWduSW5FbWFpbDpRLHN1YnNjcmlwdGlvbnM6SixzdG9yZUNyZWRpdDpafTtyZXR1cm4gUy5zaG91bGRXYXJuTXV0YXRpb24/ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLnJlZHVjZSgodCxuKT0+KHRbbl09WFMoZVtuXSksdCkse30pfShpZSk6aWV9fWZ1bmN0aW9uIHJfKGU9e30sdCl7Y29uc3Qgbj0ocj1mdW5jdGlvbigpe2NvbnN0IGU9bmV3IGZ2O3JldHVybltcImNhdGFsb2dfb25seVwiLFwiZW1wdHlfY2FydFwiLFwiaW52YWxpZF9vcmRlcl9pZFwiLFwiaW52YWxpZF9vcmRlcl90b2tlblwiLFwibWlzc2luZ19vcmRlcl90b2tlblwiLFwibWlzc2luZ19wcm92aWRlcl90b2tlblwiLFwibWlzc2luZ19zaGlwcGluZ19tZXRob2RcIixcIm9yZGVyX2NvbXBsZXRpb25fZXJyb3JcIixcIm9yZGVyX2NvdWxkX25vdF9iZV9maW5hbGl6ZWRfZXJyb3JcIixcIm9yZGVyX2NyZWF0ZV9mYWlsZWRcIixcInByb3ZpZGVyX2ZhdGFsX2Vycm9yXCIsXCJwcm92aWRlcl9zZXR1cF9lcnJvclwiLFwic3RvY2tfdG9vX2xvd1wiXS5mb3JFYWNoKHQ9PntlLnJlZ2lzdGVyKHQsKGUsdCk9Pm5ldyB5dihlLHQpKX0pLGUucmVnaXN0ZXIoXCJpbnZhbGlkX3BheW1lbnRfcHJvdmlkZXJcIixlPT5uZXcgQmkoZSkpLGUucmVnaXN0ZXIoXCJwYXltZW50X2NvbmZpZ19ub3RfZm91bmRcIixlPT5uZXcgQmkoZSkpLGV9KCksZT0+bGUoZSkucGlwZShnZShlPT57aWYoZSBpbnN0YW5jZW9mIEVycm9yfHxlLnBheWxvYWQgaW5zdGFuY2VvZiBFcnJvcil0aHJvdyBlO2lmKCh0PWUucGF5bG9hZCkmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZbXCJib2R5XCIsXCJoZWFkZXJzXCIsXCJzdGF0dXNcIixcInN0YXR1c1RleHRcIl0uZXZlcnkoZT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSkpKXtjb25zdCB0PWUucGF5bG9hZC5ib2R5JiZlLnBheWxvYWQuYm9keS5kZXRhaWw7dGhyb3cgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtwYXlsb2FkOnIuY3JlYXRlRXJyb3IoZS5wYXlsb2FkLHQpfSl9dmFyIHQ7dGhyb3cgZX0pKSksaT1pXygpO3ZhciByO3JldHVybiB1KGQoe2JpbGxpbmdBZGRyZXNzOlB2LGNhcnQ6TXYsY2hlY2tvdXQ6WVMsY2hlY2tvdXRCdXR0b246VXYsY29uZmlnOiR2LGNvbnNpZ25tZW50czpwUyxjb3VudHJpZXM6QWYsY291cG9uczpadixjdXN0b21lcjpkZixjdXN0b21lclN0cmF0ZWdpZXM6cGYsZXh0ZW5zaW9uczpmZixmb3JtRmllbGRzOklmLGdpZnRDZXJ0aWZpY2F0ZXM6bmYsaW5zdHJ1bWVudHM6clMsb3JkZXJCaWxsaW5nQWRkcmVzczpCZixvcmRlcjp6ZixwYXltZW50OlVmLHBheW1lbnRNZXRob2RzOkdmLHBheW1lbnRTdHJhdGVnaWVzOkpmLHBpY2t1cE9wdGlvbnM6X1MscGF5bWVudFByb3ZpZGVyQ3VzdG9tZXI6dFMscmVtb3RlQ2hlY2tvdXQ6bFMsc2hpcHBpbmdDb3VudHJpZXM6UFMsc2hpcHBpbmdTdHJhdGVnaWVzOlRTLHNpZ25JbkVtYWlsOnhTLHN1YnNjcmlwdGlvbnM6R1Msc3RvcmVDcmVkaXQ6alN9KSxlLE9iamVjdC5hc3NpZ24oe2FjdGlvblRyYW5zZm9ybWVyOm4sc3RhdGVUcmFuc2Zvcm1lcjplPT5pKGUpfSx0KSl9ZnVuY3Rpb24gb18oZSl7XCJodHRwczpcIiE9PWRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sJiZ5dCgpLndhcm4oXCJUaGUgQmlnQ29tbWVyY2UgQ2hlY2tvdXQgU0RLIHNob3VsZCBub3QgYmUgdXNlZCBvbiBhIG5vbi1IVFRQUyBwYWdlXCIpLFwicHJvZHVjdGlvblwiIT09dXQoKSYmeXQoKS53YXJuKFwiTm90ZSB0aGF0IHRoZSBkZXZlbG9wbWVudCBidWlsZCBpcyBub3Qgb3B0aW1pemVkLiBUbyBjcmVhdGUgYSBwcm9kdWN0aW9uIGJ1aWxkLCBzZXQgcHJvY2Vzc+KAiy5lbnYuTk9ERV9FTlYgdG8gYHByb2R1Y3Rpb25gLlwiKTtjb25zdCB0PXttZXRhOntleHRlcm5hbFNvdXJjZTplJiZlLmV4dGVybmFsU291cmNlLGhvc3Q6bnVsbD09ZT92b2lkIDA6ZS5ob3N0LGxvY2FsZTpudWxsPT1lP3ZvaWQgMDplLmxvY2FsZSx2YXJpYW50SWRlbnRpZmljYXRpb25Ub2tlbjp3aW5kb3cuY2hlY2tvdXRWYXJpYW50SWRlbnRpZmljYXRpb25Ub2tlbn0sZXJyb3JzOnt9LHN0YXR1c2VzOnt9fSx7bG9jYWxlOmk9XCJcIixzaG91bGRXYXJuTXV0YXRpb246cj0hMH09ZXx8e30scz1uKHtob3N0OmUmJmUuaG9zdH0pLGQ9cl8oe2NvbmZpZzp0fSx7c2hvdWxkV2Fybk11dGF0aW9uOnJ9KSxjPWRtKGQpLGw9bmV3IGltKHMpLHU9bmV3IHRzKHMpLGg9bmV3IGZ0KG5ldyBJdChzKSkscD1PcyhvKCkpLG09bmV3IEVzKHMpLHk9bmV3IF9zKHAsbSksZz1uZXcgc20obCxuZXcgZ20odSkpLHY9bmV3IF95KG5ldyB3eShzKSksZj1uZXcgb3MobmV3IGFzKHMpKSxTPW5ldyBpcyh1LGgsZiksXz1UeShkKSx3PWNtKF8sJGUse3VzZUZhbGxiYWNrOiEwfSksQz1mdW5jdGlvbihlLHQ9SGUpe2NvbnN0IG49bmV3IEx0O2Zvcihjb25zdFssaV1vZiBPYmplY3QuZW50cmllcyh0KSlpZih4dChpKSlmb3IoY29uc3QgdCBvZiBpLnJlc29sdmVJZHMpbi5yZWdpc3Rlcih0LCgpPT5pKGUpKTtyZXR1cm4gbn0oXyksST1uZXcgS3MobmV3IEpzKHMpKSxiPW5ldyBpZCxQPW5ldyBzZChkLGIpLE89Y3QoZCxmdW5jdGlvbigpe2NvbnN0IGU9ZnVuY3Rpb24oKXtjb25zdCBlPXB2KCh7Y2hlY2tvdXQ6ZX0pPT5lLmdldENoZWNrb3V0LGU9PlB5KGUpKSx0PXB2KCh7b3JkZXI6ZX0pPT5lLmdldE9yZGVyLGU9PlB5KGUpKSxuPXB2KCh7Y29uZmlnOmV9KT0+ZS5nZXRTdG9yZUNvbmZpZyxlPT5QeShlKSksaT1wdigoe3NoaXBwaW5nQWRkcmVzczplfSk9PmUuZ2V0U2hpcHBpbmdBZGRyZXNzLCh7Y29uZmlnOmV9KT0+ZS5nZXRDb250ZXh0Q29uZmlnLChlLHQpPT5QeSgoKT0+e2NvbnN0IG49ZSgpLGk9dCgpO2lmKCFuKXtpZighaXx8IWkuZ2VvQ291bnRyeUNvZGUpcmV0dXJuO3JldHVybntmaXJzdE5hbWU6XCJcIixsYXN0TmFtZTpcIlwiLGNvbXBhbnk6XCJcIixhZGRyZXNzMTpcIlwiLGFkZHJlc3MyOlwiXCIsY2l0eTpcIlwiLHN0YXRlT3JQcm92aW5jZTpcIlwiLHN0YXRlT3JQcm92aW5jZUNvZGU6XCJcIixwb3N0YWxDb2RlOlwiXCIsY291bnRyeTpcIlwiLHBob25lOlwiXCIsY3VzdG9tRmllbGRzOltdLGNvdW50cnlDb2RlOmkuZ2VvQ291bnRyeUNvZGV9fXJldHVybiBufSkpLHI9cHYoKHtjb25zaWdubWVudHM6ZX0pPT5lLmdldENvbnNpZ25tZW50cyxlPT5QeSgoKT0+e2NvbnN0IHQ9ZSgpLG49bnVsbD09dD92b2lkIDA6dC5maW5kKGU9PiFlLnNlbGVjdGVkUGlja3VwT3B0aW9uKTtyZXR1cm4gbnVsbD09bj92b2lkIDA6bi5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnN9KSksbz1wdigoe2NvbnNpZ25tZW50czplfSk9PmUuZ2V0Q29uc2lnbm1lbnRzLGU9PlB5KGUpKSxhPXB2KCh7Y29uc2lnbm1lbnRzOmV9KT0+ZS5nZXRDb25zaWdubWVudHMsZT0+UHkoKCk9Pntjb25zdCB0PWUoKSxuPW51bGw9PXQ/dm9pZCAwOnQuZmluZChlPT4hZS5zZWxlY3RlZFBpY2t1cE9wdGlvbik7cmV0dXJuIG51bGw9PW4/dm9pZCAwOm4uc2VsZWN0ZWRTaGlwcGluZ09wdGlvbn0pKSxzPXB2KCh7c2hpcHBpbmdDb3VudHJpZXM6ZX0pPT5lLmdldFNoaXBwaW5nQ291bnRyaWVzLGU9PlB5KGUpKSxkPXB2KCh7YmlsbGluZ0FkZHJlc3M6ZX0pPT5lLmdldEJpbGxpbmdBZGRyZXNzLCh7Y29uZmlnOmV9KT0+ZS5nZXRDb250ZXh0Q29uZmlnLChlLHQpPT5QeSgoKT0+e2NvbnN0IG49ZSgpLGk9dCgpO3JldHVybighbnx8aWUoRyhuLFwic2hvdWxkU2F2ZUFkZHJlc3NcIixcImVtYWlsXCIsXCJpZFwiKSkuZXZlcnkoZT0+IWV8fCFlLmxlbmd0aCkpJiZpJiZpLmdlb0NvdW50cnlDb2RlP3tpZDpuP24uaWQ6XCJcIixmaXJzdE5hbWU6XCJcIixsYXN0TmFtZTpcIlwiLGNvbXBhbnk6XCJcIixhZGRyZXNzMTpcIlwiLGFkZHJlc3MyOlwiXCIsY2l0eTpcIlwiLGVtYWlsOm4/bi5lbWFpbDpcIlwiLHN0YXRlT3JQcm92aW5jZTpcIlwiLHN0YXRlT3JQcm92aW5jZUNvZGU6XCJcIixwb3N0YWxDb2RlOlwiXCIsY291bnRyeTpcIlwiLHBob25lOlwiXCIsY3VzdG9tRmllbGRzOltdLGNvdW50cnlDb2RlOmkuZ2VvQ291bnRyeUNvZGV9Om59KSksYz1wdigoe2NvdW50cmllczplfSk9PmUuZ2V0Q291bnRyaWVzLGU9PlB5KGUpKSxsPXB2KCh7cGF5bWVudE1ldGhvZHM6ZX0pPT5lLmdldFBheW1lbnRNZXRob2RzLGU9PlB5KGUpKSx1PXB2KCh7cGF5bWVudE1ldGhvZHM6ZX0pPT5lLmdldFBheW1lbnRNZXRob2QsZT0+UHkoZSkpLGg9cHYoKHtwYXltZW50OmV9KT0+ZS5nZXRQYXltZW50SWQsKHtwYXltZW50TWV0aG9kczplfSk9PmUuZ2V0UGF5bWVudE1ldGhvZCwoZSx0KT0+UHkoKCk9Pntjb25zdCBuPWUoKTtyZXR1cm4gbiYmdChuLnByb3ZpZGVySWQsbi5nYXRld2F5SWQpfSkpLHA9cHYoKHtjYXJ0OmV9KT0+ZS5nZXRDYXJ0LGU9PlB5KGUpKSxtPXB2KCh7Y291cG9uczplfSk9PmUuZ2V0Q291cG9ucyxlPT5QeShlKSkseT1wdigoe2dpZnRDZXJ0aWZpY2F0ZXM6ZX0pPT5lLmdldEdpZnRDZXJ0aWZpY2F0ZXMsZT0+UHkoZSkpLGc9cHYoKHtjdXN0b21lcjplfSk9PmUuZ2V0Q3VzdG9tZXIsZT0+UHkoZSkpLHY9cHYoKHtzaWduSW5FbWFpbDplfSk9PmUuZ2V0RW1haWwsZT0+UHkoZSkpLGY9cHYoKHtwYXltZW50OmV9KT0+ZS5pc1BheW1lbnREYXRhUmVxdWlyZWQsZT0+UHkoZSkpLFM9cHYoKHtwYXltZW50OmV9KT0+ZS5pc1BheW1lbnREYXRhU3VibWl0dGVkLCh7cGF5bWVudE1ldGhvZHM6ZX0pPT5lLmdldFBheW1lbnRNZXRob2QsKGUsdCk9PlB5KChuLGkpPT5lKHQobixpKSkpKSxfPXB2KCh7aW5zdHJ1bWVudHM6ZX0pPT5lLmdldEluc3RydW1lbnRzLCh7aW5zdHJ1bWVudHM6ZX0pPT5lLmdldEluc3RydW1lbnRzQnlQYXltZW50TWV0aG9kLChlLHQpPT5QeShmdW5jdGlvbihuKXtyZXR1cm4gbj90KG4pOmUoKX0pKSx3PXB2KCh7Zm9ybTplfSk9PmUuZ2V0Q3VzdG9tZXJBY2NvdW50RmllbGRzLGU9PlB5KGUpKSxDPXB2KCh7Zm9ybTplfSk9PmUuZ2V0QmlsbGluZ0FkZHJlc3NGaWVsZHMsKHtjb3VudHJpZXM6ZX0pPT5lLmdldENvdW50cmllcywoZSx0KT0+UHkobj0+ZSh0KCksbikpKSxJPXB2KCh7Zm9ybTplfSk9PmUuZ2V0U2hpcHBpbmdBZGRyZXNzRmllbGRzLCh7c2hpcHBpbmdDb3VudHJpZXM6ZX0pPT5lLmdldFNoaXBwaW5nQ291bnRyaWVzLChlLHQpPT5QeShuPT5lKHQoKSxuKSkpLGI9cHYoKHtjb25maWc6ZX0pPT5lLmdldEZsYXNoTWVzc2FnZXMsZT0+UHkoZSkpLFA9cHYoKHtwaWNrdXBPcHRpb25zOmV9KT0+ZS5nZXRQaWNrdXBPcHRpb25zLGU9PlB5KGUpKSxPPXB2KCh7Y29uZmlnOmV9KT0+ZS5nZXRTdG9yZUNvbmZpZyxlPT5QeSgoKT0+e2NvbnN0IHQ9ZSgpO2lmKHQpcmV0dXJuIHQuY2hlY2tvdXRTZXR0aW5ncy5jaGVja291dFVzZXJFeHBlcmllbmNlU2V0dGluZ3N9KSksRT1wdigoe2V4dGVuc2lvbnM6ZX0pPT5lLmdldEV4dGVuc2lvbnMsZT0+UHkoZSkpLEE9cHYoKHtwYXltZW50UHJvdmlkZXJDdXN0b21lcjplfSk9PmUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsZT0+UHkoZSkpLGs9cHYoKHtleHRlbnNpb25zOmV9KT0+ZS5nZXRFeHRlbnNpb25CeVJlZ2lvbixlPT5QeShlKSk7cmV0dXJuIE9lKFQ9Pih7Z2V0Q2hlY2tvdXQ6ZShUKSxnZXRPcmRlcjp0KFQpLGdldENvbmZpZzpuKFQpLGdldEV4dGVuc2lvbnM6RShUKSxnZXRFeHRlbnNpb25CeVJlZ2lvbjprKFQpLGdldEZsYXNoTWVzc2FnZXM6YihUKSxnZXRTaGlwcGluZ0FkZHJlc3M6aShUKSxnZXRTaGlwcGluZ09wdGlvbnM6cihUKSxnZXRDb25zaWdubWVudHM6byhUKSxnZXRTZWxlY3RlZFNoaXBwaW5nT3B0aW9uOmEoVCksZ2V0U2hpcHBpbmdDb3VudHJpZXM6cyhUKSxnZXRCaWxsaW5nQWRkcmVzczpkKFQpLGdldEJpbGxpbmdDb3VudHJpZXM6YyhUKSxnZXRQYXltZW50TWV0aG9kczpsKFQpLGdldFBheW1lbnRNZXRob2Q6dShUKSxnZXRTZWxlY3RlZFBheW1lbnRNZXRob2Q6aChUKSxnZXRDYXJ0OnAoVCksZ2V0Q291cG9uczptKFQpLGdldEdpZnRDZXJ0aWZpY2F0ZXM6eShUKSxnZXRDdXN0b21lcjpnKFQpLGlzUGF5bWVudERhdGFSZXF1aXJlZDpmKFQpLGlzUGF5bWVudERhdGFTdWJtaXR0ZWQ6UyhUKSxnZXRTaWduSW5FbWFpbDp2KFQpLGdldEluc3RydW1lbnRzOl8oVCksZ2V0Q3VzdG9tZXJBY2NvdW50RmllbGRzOncoVCksZ2V0QmlsbGluZ0FkZHJlc3NGaWVsZHM6QyhUKSxnZXRTaGlwcGluZ0FkZHJlc3NGaWVsZHM6SShUKSxnZXRQaWNrdXBPcHRpb25zOlAoVCksZ2V0VXNlckV4cGVyaWVuY2VTZXR0aW5nczpPKFQpLGdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyOkEoVCl9KSl9KCksdD1mdW5jdGlvbigpe2NvbnN0IGU9bXYoZT0+ZSxlPT4oKT0+e2Zvcihjb25zdCB0IG9mIE9iamVjdC5rZXlzKGUpKXtjb25zdCBuPWVbdF0oKTtpZihuKXJldHVybiBufX0pLHQ9cHYoKHtzaGlwcGluZ1N0cmF0ZWdpZXM6ZX0pPT5lLmdldFNlbGVjdE9wdGlvbkVycm9yLCh7Y29uc2lnbm1lbnRzOmV9KT0+ZS5nZXRVcGRhdGVTaGlwcGluZ09wdGlvbkVycm9yLChlLHQpPT5uPT5lKCl8fHQobikpO3JldHVybiBPZShuPT57Y29uc3QgaT17Z2V0TG9hZENoZWNrb3V0RXJyb3I6bi5jaGVja291dC5nZXRMb2FkRXJyb3IsZ2V0VXBkYXRlQ2hlY2tvdXRFcnJvcjpuLmNoZWNrb3V0LmdldFVwZGF0ZUVycm9yLGdldFN1Ym1pdE9yZGVyRXJyb3I6bi5wYXltZW50U3RyYXRlZ2llcy5nZXRFeGVjdXRlRXJyb3IsZ2V0RmluYWxpemVPcmRlckVycm9yOm4ucGF5bWVudFN0cmF0ZWdpZXMuZ2V0RmluYWxpemVFcnJvcixnZXRMb2FkT3JkZXJFcnJvcjpuLm9yZGVyLmdldExvYWRFcnJvcixnZXRMb2FkQ2FydEVycm9yOm4uY2FydC5nZXRMb2FkRXJyb3IsZ2V0TG9hZEJpbGxpbmdDb3VudHJpZXNFcnJvcjpuLmNvdW50cmllcy5nZXRMb2FkRXJyb3IsZ2V0TG9hZFNoaXBwaW5nQ291bnRyaWVzRXJyb3I6bi5zaGlwcGluZ0NvdW50cmllcy5nZXRMb2FkRXJyb3IsZ2V0TG9hZFBheW1lbnRNZXRob2RzRXJyb3I6bi5wYXltZW50TWV0aG9kcy5nZXRMb2FkRXJyb3IsZ2V0TG9hZFBheW1lbnRNZXRob2RFcnJvcjpuLnBheW1lbnRNZXRob2RzLmdldExvYWRNZXRob2RFcnJvcixnZXRJbml0aWFsaXplUGF5bWVudEVycm9yOm4ucGF5bWVudFN0cmF0ZWdpZXMuZ2V0SW5pdGlhbGl6ZUVycm9yLGdldFNpZ25JbkVycm9yOm4uY3VzdG9tZXJTdHJhdGVnaWVzLmdldFNpZ25JbkVycm9yLGdldFNpZ25PdXRFcnJvcjpuLmN1c3RvbWVyU3RyYXRlZ2llcy5nZXRTaWduT3V0RXJyb3IsZ2V0SW5pdGlhbGl6ZUN1c3RvbWVyRXJyb3I6bi5jdXN0b21lclN0cmF0ZWdpZXMuZ2V0SW5pdGlhbGl6ZUVycm9yLGdldExvYWRTaGlwcGluZ09wdGlvbnNFcnJvcjpuLmNvbnNpZ25tZW50cy5nZXRMb2FkU2hpcHBpbmdPcHRpb25zRXJyb3IsZ2V0U2VsZWN0U2hpcHBpbmdPcHRpb25FcnJvcjp0KG4pLGdldENvbnRpbnVlQXNHdWVzdEVycm9yOm4uYmlsbGluZ0FkZHJlc3MuZ2V0Q29udGludWVBc0d1ZXN0RXJyb3IsZ2V0VXBkYXRlQmlsbGluZ0FkZHJlc3NFcnJvcjpuLmJpbGxpbmdBZGRyZXNzLmdldFVwZGF0ZUVycm9yLGdldFVwZGF0ZVN1YnNjcmlwdGlvbnNFcnJvcjpuLnN1YnNjcmlwdGlvbnMuZ2V0VXBkYXRlRXJyb3IsZ2V0VXBkYXRlU2hpcHBpbmdBZGRyZXNzRXJyb3I6bi5zaGlwcGluZ1N0cmF0ZWdpZXMuZ2V0VXBkYXRlQWRkcmVzc0Vycm9yLGdldERlbGV0ZUNvbnNpZ25tZW50RXJyb3I6bi5jb25zaWdubWVudHMuZ2V0RGVsZXRlRXJyb3IsZ2V0VXBkYXRlQ29uc2lnbm1lbnRFcnJvcjpuLmNvbnNpZ25tZW50cy5nZXRVcGRhdGVFcnJvcixnZXRDcmVhdGVDb25zaWdubWVudHNFcnJvcjpuLmNvbnNpZ25tZW50cy5nZXRDcmVhdGVFcnJvcixnZXRJbml0aWFsaXplU2hpcHBpbmdFcnJvcjpuLnNoaXBwaW5nU3RyYXRlZ2llcy5nZXRJbml0aWFsaXplRXJyb3IsZ2V0QXBwbHlTdG9yZUNyZWRpdEVycm9yOm4uc3RvcmVDcmVkaXQuZ2V0QXBwbHlFcnJvcixnZXRBcHBseUNvdXBvbkVycm9yOm4uY291cG9ucy5nZXRBcHBseUVycm9yLGdldFJlbW92ZUNvdXBvbkVycm9yOm4uY291cG9ucy5nZXRSZW1vdmVFcnJvcixnZXRBcHBseUdpZnRDZXJ0aWZpY2F0ZUVycm9yOm4uZ2lmdENlcnRpZmljYXRlcy5nZXRBcHBseUVycm9yLGdldFJlbW92ZUdpZnRDZXJ0aWZpY2F0ZUVycm9yOm4uZ2lmdENlcnRpZmljYXRlcy5nZXRSZW1vdmVFcnJvcixnZXRMb2FkSW5zdHJ1bWVudHNFcnJvcjpuLmluc3RydW1lbnRzLmdldExvYWRFcnJvcixnZXREZWxldGVJbnN0cnVtZW50RXJyb3I6bi5pbnN0cnVtZW50cy5nZXREZWxldGVFcnJvcixnZXRMb2FkQ29uZmlnRXJyb3I6bi5jb25maWcuZ2V0TG9hZEVycm9yLGdldFNpZ25JbkVtYWlsRXJyb3I6bi5zaWduSW5FbWFpbC5nZXRTZW5kRXJyb3IsZ2V0Q3JlYXRlQ3VzdG9tZXJBY2NvdW50RXJyb3I6bi5jdXN0b21lci5nZXRDcmVhdGVBY2NvdW50RXJyb3IsZ2V0Q3JlYXRlQ3VzdG9tZXJBZGRyZXNzRXJyb3I6bi5jdXN0b21lci5nZXRDcmVhdGVBZGRyZXNzRXJyb3IsZ2V0UGlja3VwT3B0aW9uc0Vycm9yOm4ucGlja3VwT3B0aW9ucy5nZXRMb2FkRXJyb3IsZ2V0TG9hZEV4dGVuc2lvbnNFcnJvcjpuLmV4dGVuc2lvbnMuZ2V0TG9hZEVycm9yfTtyZXR1cm4gT2JqZWN0LmFzc2lnbih7Z2V0RXJyb3I6ZShpKX0saSl9KX0oKSxuPWZ1bmN0aW9uKCl7Y29uc3QgZT1tdihlPT5lLGU9PigpPT5PYmplY3Qua2V5cyhlKS5zb21lKHQ9PmVbdF0oKSkpLHQ9cHYoKHtzaGlwcGluZ1N0cmF0ZWdpZXM6ZX0pPT5lLmlzU2VsZWN0aW5nT3B0aW9uLCh7Y29uc2lnbm1lbnRzOmV9KT0+ZS5pc1VwZGF0aW5nU2hpcHBpbmdPcHRpb24sKGUsdCk9Pm49PmUoKXx8dChuKSksbj1wdigoe2N1c3RvbWVyU3RyYXRlZ2llczplfSk9PmUuaXNJbml0aWFsaXppbmcsKHtjdXN0b21lclN0cmF0ZWdpZXM6ZX0pPT5lLmlzU2lnbmluZ0luLCh7Y3VzdG9tZXJTdHJhdGVnaWVzOmV9KT0+ZS5pc1NpZ25pbmdPdXQsKHtjdXN0b21lclN0cmF0ZWdpZXM6ZX0pPT5lLmlzRXhlY3V0aW5nUGF5bWVudE1ldGhvZENoZWNrb3V0LCh7Y3VzdG9tZXJTdHJhdGVnaWVzOmV9KT0+ZS5pc1dpZGdldEludGVyYWN0aW5nLChlLHQsbixpLHIpPT5vPT5lKG8pfHx0KG8pfHxuKG8pfHxpKG8pfHxyKG8pKSxpPXB2KCh7c2hpcHBpbmdTdHJhdGVnaWVzOmV9KT0+ZS5pc0luaXRpYWxpemluZywoe3NoaXBwaW5nU3RyYXRlZ2llczplfSk9PmUuaXNVcGRhdGluZ0FkZHJlc3MsKHtzaGlwcGluZ1N0cmF0ZWdpZXM6ZX0pPT5lLmlzU2VsZWN0aW5nT3B0aW9uLCh7c2hpcHBpbmdTdHJhdGVnaWVzOmV9KT0+ZS5pc1dpZGdldEludGVyYWN0aW5nLChlLHQsbixpKT0+cj0+ZShyKXx8dChyKXx8bihyKXx8aShyKSkscj1wdigoe3BheW1lbnRTdHJhdGVnaWVzOmV9KT0+ZS5pc0luaXRpYWxpemluZywoe3BheW1lbnRTdHJhdGVnaWVzOmV9KT0+ZS5pc0V4ZWN1dGluZywoe3BheW1lbnRTdHJhdGVnaWVzOmV9KT0+ZS5pc0ZpbmFsaXppbmcsKHtwYXltZW50U3RyYXRlZ2llczplfSk9PmUuaXNXaWRnZXRJbnRlcmFjdGluZywoZSx0LG4saSk9PnI9PmUocil8fHQocil8fG4ocil8fGkocikpLG89cHYoKHtwYXltZW50U3RyYXRlZ2llczplfSk9PmUuaXNFeGVjdXRpbmcsKHtjaGVja291dDplfSk9PmUuaXNFeGVjdXRpbmdTcGFtQ2hlY2ssKGUsdCk9Pm49PmUobil8fHQoKSk7cmV0dXJuIE9lKGE9Pntjb25zdCBzPXtpc0xvYWRpbmdDaGVja291dDphLmNoZWNrb3V0LmlzTG9hZGluZyxpc1VwZGF0aW5nQ2hlY2tvdXQ6YS5jaGVja291dC5pc1VwZGF0aW5nLGlzRXhlY3V0aW5nU3BhbUNoZWNrOmEuY2hlY2tvdXQuaXNFeGVjdXRpbmdTcGFtQ2hlY2ssaXNTdWJtaXR0aW5nT3JkZXI6byhhKSxpc0ZpbmFsaXppbmdPcmRlcjphLnBheW1lbnRTdHJhdGVnaWVzLmlzRmluYWxpemluZyxpc0xvYWRpbmdPcmRlcjphLm9yZGVyLmlzTG9hZGluZyxpc0xvYWRpbmdDYXJ0OmEuY2FydC5pc0xvYWRpbmcsaXNMb2FkaW5nQmlsbGluZ0NvdW50cmllczphLmNvdW50cmllcy5pc0xvYWRpbmcsaXNMb2FkaW5nU2hpcHBpbmdDb3VudHJpZXM6YS5zaGlwcGluZ0NvdW50cmllcy5pc0xvYWRpbmcsaXNMb2FkaW5nUGF5bWVudE1ldGhvZHM6YS5wYXltZW50TWV0aG9kcy5pc0xvYWRpbmcsaXNMb2FkaW5nUGF5bWVudE1ldGhvZDphLnBheW1lbnRNZXRob2RzLmlzTG9hZGluZ01ldGhvZCxpc0luaXRpYWxpemluZ1BheW1lbnQ6YS5wYXltZW50U3RyYXRlZ2llcy5pc0luaXRpYWxpemluZyxpc1NpZ25pbmdJbjphLmN1c3RvbWVyU3RyYXRlZ2llcy5pc1NpZ25pbmdJbixpc1NpZ25pbmdPdXQ6YS5jdXN0b21lclN0cmF0ZWdpZXMuaXNTaWduaW5nT3V0LGlzRXhlY3V0aW5nUGF5bWVudE1ldGhvZENoZWNrb3V0OmEuY3VzdG9tZXJTdHJhdGVnaWVzLmlzRXhlY3V0aW5nUGF5bWVudE1ldGhvZENoZWNrb3V0LGlzSW5pdGlhbGl6aW5nQ3VzdG9tZXI6YS5jdXN0b21lclN0cmF0ZWdpZXMuaXNJbml0aWFsaXppbmcsaXNJbml0aWFsaXplZEN1c3RvbWVyOmEuY3VzdG9tZXJTdHJhdGVnaWVzLmlzSW5pdGlhbGl6ZWQsaXNMb2FkaW5nU2hpcHBpbmdPcHRpb25zOmEuY29uc2lnbm1lbnRzLmlzTG9hZGluZ1NoaXBwaW5nT3B0aW9ucyxpc1NlbGVjdGluZ1NoaXBwaW5nT3B0aW9uOnQoYSksaXNVcGRhdGluZ0JpbGxpbmdBZGRyZXNzOmEuYmlsbGluZ0FkZHJlc3MuaXNVcGRhdGluZyxpc1VwZGF0aW5nU3Vic2NyaXB0aW9uczphLnN1YnNjcmlwdGlvbnMuaXNVcGRhdGluZyxpc0NyZWF0aW5nQ3VzdG9tZXJBY2NvdW50OmEuY3VzdG9tZXIuaXNDcmVhdGluZ0N1c3RvbWVyQWNjb3VudCxpc0NyZWF0aW5nQ3VzdG9tZXJBZGRyZXNzOmEuY3VzdG9tZXIuaXNDcmVhdGluZ0N1c3RvbWVyQWRkcmVzcyxpc0NvbnRpbnVpbmdBc0d1ZXN0OmEuYmlsbGluZ0FkZHJlc3MuaXNDb250aW51aW5nQXNHdWVzdCxpc1VwZGF0aW5nU2hpcHBpbmdBZGRyZXNzOmEuc2hpcHBpbmdTdHJhdGVnaWVzLmlzVXBkYXRpbmdBZGRyZXNzLGlzVXBkYXRpbmdDb25zaWdubWVudDphLmNvbnNpZ25tZW50cy5pc1VwZGF0aW5nLGlzRGVsZXRpbmdDb25zaWdubWVudDphLmNvbnNpZ25tZW50cy5pc0RlbGV0aW5nLGlzQ3JlYXRpbmdDb25zaWdubWVudHM6YS5jb25zaWdubWVudHMuaXNDcmVhdGluZyxpc0luaXRpYWxpemluZ1NoaXBwaW5nOmEuc2hpcHBpbmdTdHJhdGVnaWVzLmlzSW5pdGlhbGl6aW5nLGlzQXBwbHlpbmdTdG9yZUNyZWRpdDphLnN0b3JlQ3JlZGl0LmlzQXBwbHlpbmcsaXNBcHBseWluZ0NvdXBvbjphLmNvdXBvbnMuaXNBcHBseWluZyxpc1JlbW92aW5nQ291cG9uOmEuY291cG9ucy5pc1JlbW92aW5nLGlzQXBwbHlpbmdHaWZ0Q2VydGlmaWNhdGU6YS5naWZ0Q2VydGlmaWNhdGVzLmlzQXBwbHlpbmcsaXNSZW1vdmluZ0dpZnRDZXJ0aWZpY2F0ZTphLmdpZnRDZXJ0aWZpY2F0ZXMuaXNSZW1vdmluZyxpc0xvYWRpbmdJbnN0cnVtZW50czphLmluc3RydW1lbnRzLmlzTG9hZGluZyxpc0RlbGV0aW5nSW5zdHJ1bWVudDphLmluc3RydW1lbnRzLmlzRGVsZXRpbmcsaXNMb2FkaW5nQ29uZmlnOmEuY29uZmlnLmlzTG9hZGluZyxpc1NlbmRpbmdTaWduSW5FbWFpbDphLnNpZ25JbkVtYWlsLmlzU2VuZGluZyxpc0N1c3RvbWVyU3RlcFBlbmRpbmc6bihhKSxpc1NoaXBwaW5nU3RlcFBlbmRpbmc6aShhKSxpc1BheW1lbnRTdGVwUGVuZGluZzpyKGEpLGlzTG9hZGluZ1BpY2t1cE9wdGlvbnM6YS5waWNrdXBPcHRpb25zLmlzTG9hZGluZ307cmV0dXJuIE9iamVjdC5hc3NpZ24oe2lzUGVuZGluZzplKHMpfSxzKX0pfSgpO3JldHVybiBpPT4oe2RhdGE6ZShpKSxlcnJvcnM6dChpKSxzdGF0dXNlczpuKGkpfSl9KCkpO3JldHVybiBuZXcgdXYoZCxPLFAsZnVuY3Rpb24oZSx0KXtjb25zdCBuPXtbb2QuQ29uc2lnbm1lbnRzQ2hhbmdlZF06Y2R9O3JldHVybiBuZXcgZGQoZSx0LG4pfShPLFApLG5ldyB0dChuZXcgYXQocyksdiksUyxoLG5ldyBaYShuZXcgUWEocyksUyx5KSxuZXcgY3kobmV3IHV5KHMpLHUpLG5ldyBacChuZXcgUXAocyx7bG9jYWxlOml9KSksbmV3IFB0KG5ldyBNdChzKSksbmV3IFhhKGZ1bmN0aW9uKGUsdCxuKXtjb25zdCBpPW5ldyBSdCxyPWEoKSxvPW5ldyB0cyh0KSxzPW5ldyBpcyhvLG5ldyBmdChuZXcgSXQodCkpLG5ldyBvcyhuZXcgYXModCkpKSxkPW5ldyBkcyhuZXcgY3ModCkpLGM9bmV3IHBzKHQpLGw9bmV3IHlzKGMscyksdT1uZXcgX3MoT3MociksbmV3IEVzKHQpKSxoPW5ldyBaYShuZXcgUWEodCkscyx1KTtyZXR1cm4gaS5yZWdpc3RlcihcInNxdWFyZXYyXCIsKCk9Pm5ldyBOcyhlLG5ldyB5cyhjLHMpKSksaS5yZWdpc3RlcihcIm1hc3RlcnBhc3NcIiwoKT0+bmV3IHpzKGUsZCxsLG5ldyBocyhyKSxuKSksaS5yZWdpc3RlcihcImRlZmF1bHRcIiwoKT0+bmV3IEFzKGUsaCkpLGl9KGQscyxpKSxDKSxuZXcgbHQsbmV3IHp0KG5ldyBOdChzKSksbmV3IE5nKG5ldyBCZyhjLHMpKSxnLG5ldyBkcyhuZXcgY3MocykpLG5ldyBwbShmdW5jdGlvbihlLHQsbixpLHIpe2NvbnN0IHM9bmV3IE15KHtkZWZhdWx0VG9rZW46dW0uQ1JFRElUX0NBUkR9KSxkPWEoKSxjPW5ldyBveSxsPW5ldyBCbSh0KSx1PVR5KGUpLGg9Y20odSkscD1uZXcgdHMobiksbT1uZXcgZ20ocCkseT1uZXcgX3MoaSxuZXcgRXMobikpLGc9bmV3IHNtKG5ldyBpbShuKSxtKSx2PW5ldyBJbShPcyhvKCkpKSxmPW5ldyBMbShsLGcsYyx2KSxTPW5ldyBkcyhuZXcgY3MobikpLF89bmV3IGZ0KG5ldyBJdChuKSksdz1uZXcgb3MobmV3IGFzKG4pKSxDPW5ldyBpcyhwLF8sdyksST1uZXcgcG0ocyxoLGcseSksYj1FZSgpLFA9KChlLHQpPT5uZXcgZmcobmV3IHZnKGUsdCkpKShiLHYpLE89bmV3IEZtKGUpO3JldHVybiBzLnJlZ2lzdGVyKHVtLkJBUkNMQVlTLCgpPT5uZXcgUnkoZSxnLGYsTyxuZXcgJHkoZSxmLG5ldyB0ZyhuZXcgbmcoZCkpKSkpLHMucmVnaXN0ZXIodW0uQlJBSU5UUkVFX1ZJU0FfQ0hFQ0tPVVQsKCk9Pm5ldyBqeShlLEMsUyxJLGYsZyxmdW5jdGlvbihlLHQsbil7Y29uc3QgaT1uZXcgcG4obikscj1uZXcgRG4oZSx3aW5kb3csaSksbz1uZXcgcXkocik7cmV0dXJuIG5ldyBWeShvLHQpfShkLG4sdSksbmV3IEd5KGQpKSkscy5yZWdpc3Rlcih1bS5DQkFfTVBHUywoKT0+bmV3IHNnKGUsZyxmLE8sUyxuZXcgZGcoZCkscikpLHMucmVnaXN0ZXIodW0uQ09OVkVSR0UsKCk9Pm5ldyBjZyhlLGcsZixPLGIpKSxzLnJlZ2lzdGVyKHVtLkJOWiwoKT0+bmV3IEJ5KGUsZyxmLE8sbmV3ICR5KGUsZixuZXcgdGcobmV3IG5nKGQpKSkpKSxzLnJlZ2lzdGVyKHVtLk1BU1RFUlBBU1MsKCk9Pm5ldyBsZyhlLGcsZixuZXcgaHMoZCkscikpLHMucmVnaXN0ZXIodW0uUEFZUEFMX0VYUFJFU1MsKCk9Pm5ldyB1ZyhlLGcsbmV3IGhnKGQpKSkscy5yZWdpc3Rlcih1bS5QQVlQQUxfRVhQUkVTU19DUkVESVQsKCk9Pm5ldyB1ZyhlLGcsbmV3IGhnKGQpKSkscy5yZWdpc3Rlcih1bS5QUFNESywoKT0+bmV3IElnKGUsZywoKGUsdCxuLGkscik9Pntjb25zdCBvPW5ldyBQZztyZXR1cm4gby5yZWdpc3Rlcih3Zy5DQVJELCgpPT5uZXcgRWcoZSx0LHIsaSkpLG8ucmVnaXN0ZXIod2cuTk9ORSwoKT0+bmV3IEFnKG4saSkpLG8ucmVnaXN0ZXIod2cuVU5TVVBQT1JURUQsKCk9Pnt9KSxvfSkoZSxnLG4sUCxPKSxuZXcgRGcobixQKSxuZXcgdm0oXCJQUFNES1wiKSkpLHMucmVnaXN0ZXIodW0uV0VfUEFZLCgpPT5uZXcgTWcoZSxnLGYsTyxuZXcgemcoZCkpKSxzfShkLGMscyxwLGkpLHcsZyx5KSxuZXcgamcobmV3IFVnKHMpKSxuZXcgbXkobmV3IHl5KHMse2xvY2FsZTppfSksZCksbmV3IHFnKGZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1uZXcgUnQsaT1UeShlKSxyPW5ldyB0cyh0KSxvPW5ldyB1eSh0KSxzPW5ldyBjeShvLHIpLGQ9bmV3IGRzKG5ldyBjcyh0KSksYz1hKCksbD1uZXcgX3kobmV3IHd5KHQpKSx1PW5ldyB0dChuZXcgYXQodCksbCksaD13aW5kb3cscD1uZXcgcG4oaSk7cmV0dXJuIG4ucmVnaXN0ZXIoXCJhbWF6b25wYXlcIiwoKT0+bmV3IFdnKGUscyxuZXcgZHMobmV3IGNzKHQpKSx0bigpLG5ldyBxZyhuKSkpLG4ucmVnaXN0ZXIoXCJzdHJpcGV1cGVcIiwoKT0+bmV3IGF2KGUsbmV3IEdnKGMpLHMsZCkpLG4ucmVnaXN0ZXIoXCJicmFpbnRyZWVhY2NlbGVyYXRlZGNoZWNrb3V0XCIsKCk9Pm5ldyBLZyhlLHUscyxkLG5ldyBkeSxuZXcgb3IobmV3IERuKGEoKSxoLHApLGgpKSksbi5yZWdpc3RlcihcInBheXBhbGNvbW1lcmNlYWNjZWxlcmF0ZWRjaGVja291dFwiLCgpPT5uZXcgcnYoZSx1LHMsZCxuZXcgZHkscmEoKSxtYSgpKSksbi5yZWdpc3RlcihcImRlZmF1bHRcIiwoKT0+bmV3IEpnKGUscykpLG59KGQscykpLG5ldyBzdihuZXcgZHYocykpLHksbmV3IHZ5KG5ldyBmeShzKSksdixmLEksYil9Y29uc3QgYV89ZT0+e2NvbnN0IHQ9bmUoZSk7cmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQpP2FfKGUpOnR9O2Z1bmN0aW9uIHNfKGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxcImNhY2hlS2V5XCIpfWNsYXNzIGRfe2NvbnN0cnVjdG9yKGUpe3RoaXMuX2xhc3RJZD0wLHRoaXMuX21hcD17bWFwczpbXX0sdGhpcy5fdXNlZE1hcHM9W10sdGhpcy5fb3B0aW9ucz1PYmplY3QuYXNzaWduKHttYXhTaXplOjAsaXNFcXVhbDpCZSxvbkV4cGlyZTpWfSxlKX1nZXRLZXkoLi4uZSl7Y29uc3QgdD10aGlzLl9yZXNvbHZlTWFwKC4uLmUpLHtpbmRleDpuLHBhcmVudE1hcDppfT10O2xldHttYXA6cn09dDtyZXR1cm4gciYmci5jYWNoZUtleT9yLnVzZWRDb3VudCsrOnI9dGhpcy5fZ2VuZXJhdGVNYXAoaSxlLnNsaWNlKG4pKSx0aGlzLl9yZW1vdmVMZWFzdFVzZWRNYXAociksci5jYWNoZUtleX1nZXRVc2VkQ291bnQoLi4uZSl7Y29uc3R7bWFwOnR9PXRoaXMuX3Jlc29sdmVNYXAoLi4uZSk7cmV0dXJuIHQ/dC51c2VkQ291bnQ6MH1fcmVzb2x2ZU1hcCguLi5lKXtsZXQgdD0wLG49dGhpcy5fbWFwO2Zvcig7bi5tYXBzLmxlbmd0aDspe2xldCBpPSExO2ZvcihsZXQgcj0wO3I8bi5tYXBzLmxlbmd0aDtyKyspe2NvbnN0IG89bi5tYXBzW3JdO2lmKHRoaXMuX29wdGlvbnMuaXNFcXVhbChvLnZhbHVlLGVbdF0pKXtpZihuLm1hcHMudW5zaGlmdCguLi5uLm1hcHMuc3BsaWNlKHIsMSkpLCgwPT09ZS5sZW5ndGh8fHQ9PT1lLmxlbmd0aC0xKSYmc18obykpcmV0dXJue2luZGV4OnQsbWFwOm8scGFyZW50TWFwOm59O2k9ITAsbj1vLHQrKzticmVha319aWYoIWkpYnJlYWt9cmV0dXJue2luZGV4OnQscGFyZW50TWFwOm59fV9nZW5lcmF0ZU1hcChlLHQpe2xldCBuLGk9MCxyPWU7ZG97bj17bWFwczpbXSxwYXJlbnRNYXA6cix1c2VkQ291bnQ6MSx2YWx1ZTp0W2ldfSxyLm1hcHMudW5zaGlmdChuKSxyPW4saSsrfXdoaWxlKGk8dC5sZW5ndGgpO2NvbnN0IG89bjtyZXR1cm4gby5jYWNoZUtleT1cIlwiKyArK3RoaXMuX2xhc3RJZCxvfV9yZW1vdmVMZWFzdFVzZWRNYXAoZSl7aWYoIXRoaXMuX29wdGlvbnMubWF4U2l6ZSlyZXR1cm47Y29uc3QgdD10aGlzLl91c2VkTWFwcy5pbmRleE9mKGUpO2lmKHRoaXMuX3VzZWRNYXBzLnNwbGljZSgtMT09PXQ/MDp0LC0xPT09dD8wOjEsZSksdGhpcy5fdXNlZE1hcHMubGVuZ3RoPD10aGlzLl9vcHRpb25zLm1heFNpemUpcmV0dXJuO2NvbnN0IG49dGhpcy5fdXNlZE1hcHMucG9wKCk7biYmKHRoaXMuX3JlbW92ZU1hcChuKSx0aGlzLl9vcHRpb25zLm9uRXhwaXJlKG4uY2FjaGVLZXkpKX1fcmVtb3ZlTWFwKGUpe2UucGFyZW50TWFwJiYoZS5wYXJlbnRNYXAubWFwcy5zcGxpY2UoZS5wYXJlbnRNYXAubWFwcy5pbmRleE9mKGUpLDEpLGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxcInBhcmVudE1hcFwiKX0oZS5wYXJlbnRNYXApfHx0aGlzLl9yZW1vdmVNYXAoZS5wYXJlbnRNYXApKX19ZnVuY3Rpb24gY18oZSl7Y29uc3QgdD1jbGFzcyBleHRlbmRzIGV7fTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZS5wcm90b3R5cGUpLmZvckVhY2gobj0+e2NvbnN0IGk9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLnByb3RvdHlwZSxuKTtpJiZcImNvbnN0cnVjdG9yXCIhPT1uJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsbixmdW5jdGlvbihlLHQsbil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygbi52YWx1ZSlyZXR1cm4gbjtsZXQgaT1uZXcgZF8scj1uLnZhbHVlLG89UGUocik7cmV0dXJuIENyKGUsdCx7Z2V0KCl7Y29uc3QgZT0oLi4uZSk9Pntjb25zdCB0PW8uY2FsbCh0aGlzLC4uLmUpO2lmKDE9PT1pLmdldFVzZWRDb3VudCguLi5lKSlyZXR1cm4gdDtjb25zdCBuPXIuY2FsbCh0aGlzLC4uLmUpO3JldHVybiB3dihuLHQse2tleUZpbHRlcjplPT4hZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT1gJHtlfWAuaW5kZXhPZihcIiQkXCIpfHwwPT09YCR7ZX1gLmluZGV4T2YoXCJfXCIpfShlKX0pP3Q6KG8uY2FjaGUuc2V0KGkuZ2V0S2V5KC4uLmUpLG4pLG4pfTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsdCxPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbikse3ZhbHVlOmV9KSksZX0sc2V0KGUpe2k9bmV3IGRfLHI9ZSxvPVBlKHIpfX0pfShlLnByb3RvdHlwZSxuLGkpKX0pLHR9bGV0IGxfPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuX2NoZWNrb3V0QnV0dG9uPWUuY2hlY2tvdXRCdXR0b259Z2V0SW5pdGlhbGl6ZUJ1dHRvbkVycm9yKGUpe3JldHVybiB0aGlzLl9jaGVja291dEJ1dHRvbi5nZXRJbml0aWFsaXplRXJyb3IoZSl9Z2V0RGVpbml0aWFsaXplQnV0dG9uRXJyb3IoZSl7cmV0dXJuIHRoaXMuX2NoZWNrb3V0QnV0dG9uLmdldERlaW5pdGlhbGl6ZUVycm9yKGUpfX07bF89ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLGE9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik6aTtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlhPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG4saSk7ZWxzZSBmb3IodmFyIHM9ZS5sZW5ndGgtMTtzPj0wO3MtLSkocj1lW3NdKSYmKGE9KG88Mz9yKGEpOm8+Mz9yKHQsbixhKTpyKHQsbikpfHxhKTtyZXR1cm4gbz4zJiZhJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLGEpLGF9KFtjX10sbF8pO2NvbnN0IHVfPWxfO2xldCBoXz1jbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9jaGVja291dEJ1dHRvbj1lLmNoZWNrb3V0QnV0dG9ufWlzSW5pdGlhbGl6aW5nQnV0dG9uKGUpe3JldHVybiB0aGlzLl9jaGVja291dEJ1dHRvbi5pc0luaXRpYWxpemluZyhlKX1pc0RlaW5pdGlhbGl6aW5nQnV0dG9uKGUpe3JldHVybiB0aGlzLl9jaGVja291dEJ1dHRvbi5pc0RlaW5pdGlhbGl6aW5nKGUpfX07aF89ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLGE9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik6aTtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlhPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG4saSk7ZWxzZSBmb3IodmFyIHM9ZS5sZW5ndGgtMTtzPj0wO3MtLSkocj1lW3NdKSYmKGE9KG88Mz9yKGEpOm8+Mz9yKHQsbixhKTpyKHQsbikpfHxhKTtyZXR1cm4gbz4zJiZhJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLGEpLGF9KFtjX10saF8pO2NvbnN0IHBfPWhfO2Z1bmN0aW9uIG1fKGUpe3JldHVybntlcnJvcnM6bmV3IHVfKGUpLHN0YXR1c2VzOm5ldyBwXyhlKX19bGV0IHlfPWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fc3RvcmU9ZSx0aGlzLl9idXR0b25TdHJhdGVneUFjdGlvbkNyZWF0b3I9dCx0aGlzLl9zdGF0ZT1tXyh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKSx0aGlzLl9zdG9yZS5zdWJzY3JpYmUoZT0+e3RoaXMuX3N0YXRlPW1fKGUpfSl9Z2V0U3RhdGUoKXtyZXR1cm4gdGhpcy5fc3RhdGV9c3Vic2NyaWJlKGUsLi4udCl7cmV0dXJuIHRoaXMuX3N0b3JlLnN1YnNjcmliZSgoKT0+ZSh0aGlzLmdldFN0YXRlKCkpLGU9PmUuY2hlY2tvdXRCdXR0b24uZ2V0U3RhdGUoKSwuLi50Lm1hcChlPT50PT5lKG1fKHQpKSkpfWluaXRpYWxpemVCdXR0b24oZSl7Y29uc3QgdD0obj1lLmNvbnRhaW5lcklkLC9eXFx3W1xcd1xcLVxcOlxcLl0qJC8udGVzdChuKT9bZS5jb250YWluZXJJZF06ZnVuY3Rpb24oZSx0KXtjb25zdCBuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZSk7aWYoIW4ubGVuZ3RoKXRocm93IG5ldyBGdChgVW5hYmxlIHRvIGZpbmQgYW55IGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIHNlbGVjdG9yOiAke2V9YCk7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG4pLm1hcChlPT4oZS5pZHx8KGUuaWQ9YV8odCkpLGUuaWQpKX0oZS5jb250YWluZXJJZCxgJHtlLm1ldGhvZElkfS1jb250YWluZXJgKSk7dmFyIG47cmV0dXJuIFByb21pc2UuYWxsKHQubWFwKHQ9Pntjb25zdCBuPXRoaXMuX2J1dHRvblN0cmF0ZWd5QWN0aW9uQ3JlYXRvci5pbml0aWFsaXplKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7Y29udGFpbmVySWQ6dH0pKSxpPWBjaGVja291dEJ1dHRvblN0cmF0ZWd5OiR7ZS5tZXRob2RJZH06JHt0fWA7cmV0dXJuIHRoaXMuX3N0b3JlLmRpc3BhdGNoKG4se3F1ZXVlSWQ6aX0pfSkpLnRoZW4oKCk9PnRoaXMuZ2V0U3RhdGUoKSl9ZGVpbml0aWFsaXplQnV0dG9uKGUpe2NvbnN0IHQ9dGhpcy5fYnV0dG9uU3RyYXRlZ3lBY3Rpb25DcmVhdG9yLmRlaW5pdGlhbGl6ZShlKSxuPWBjaGVja291dEJ1dHRvblN0cmF0ZWd5OiR7ZS5tZXRob2RJZH1gO3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0LHtxdWV1ZUlkOm59KS50aGVuKCgpPT50aGlzLmdldFN0YXRlKCkpfX07eV89ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLGE9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik6aTtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlhPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG4saSk7ZWxzZSBmb3IodmFyIHM9ZS5sZW5ndGgtMTtzPj0wO3MtLSkocj1lW3NdKSYmKGE9KG88Mz9yKGEpOm8+Mz9yKHQsbixhKTpyKHQsbikpfHxhKTtyZXR1cm4gbz4zJiZhJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLGEpLGF9KFtDcl0seV8pO2NvbnN0IGdfPXlfO2NsYXNzIHZfe2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLl9yZWdpc3RyeT1lLHRoaXMuX3JlZ2lzdHJ5VjI9dCx0aGlzLl9wYXltZW50TWV0aG9kQWN0aW9uQ3JlYXRvcj1ufWluaXRpYWxpemUoZSl7cmV0dXJuIHQ9Pntjb25zdCBuPXttZXRob2RJZDplLm1ldGhvZElkLGNvbnRhaW5lcklkOmUuY29udGFpbmVySWR9O2lmKHQuZ2V0U3RhdGUoKS5jaGVja291dEJ1dHRvbi5pc0luaXRpYWxpemVkKGUubWV0aG9kSWQsZS5jb250YWluZXJJZCkpcmV0dXJuIGNlKCk7Y29uc3QgaT1lLmN1cnJlbmN5Q29kZT97cGFyYW1zOntjdXJyZW5jeUNvZGU6ZS5jdXJyZW5jeUNvZGV9fTp7fSxyPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxpKSx7dGltZW91dDplLnRpbWVvdXQsdXNlQ2FjaGU6ITB9KTtyZXR1cm4gc2UobWUobChGdi5Jbml0aWFsaXplQnV0dG9uUmVxdWVzdGVkLHZvaWQgMCxuKSksdGhpcy5fcGF5bWVudE1ldGhvZEFjdGlvbkNyZWF0b3IubG9hZFBheW1lbnRNZXRob2QoZS5tZXRob2RJZCxyKSh0KSxkZSgoKT0+dGhpcy5fZ2V0U3RyYXRlZ3koZS5tZXRob2RJZCkuaW5pdGlhbGl6ZShlKS50aGVuKCgpPT5sKEZ2LkluaXRpYWxpemVCdXR0b25TdWNjZWVkZWQsdm9pZCAwLG4pKSkpLnBpcGUoZ2UoZT0+SmUoRnYuSW5pdGlhbGl6ZUJ1dHRvbkZhaWxlZCxlLG4pKSl9fWRlaW5pdGlhbGl6ZShlKXtyZXR1cm4gdD0+e2NvbnN0IG49e21ldGhvZElkOmUubWV0aG9kSWR9O3JldHVybiB0LmdldFN0YXRlKCkuY2hlY2tvdXRCdXR0b24uaXNJbml0aWFsaXplZChlLm1ldGhvZElkKT9zZShtZShsKEZ2LkRlaW5pdGlhbGl6ZUJ1dHRvblJlcXVlc3RlZCx2b2lkIDAsbikpLGRlKCgpPT50aGlzLl9nZXRTdHJhdGVneShlLm1ldGhvZElkKS5kZWluaXRpYWxpemUoKS50aGVuKCgpPT5sKEZ2LkRlaW5pdGlhbGl6ZUJ1dHRvblN1Y2NlZWRlZCx2b2lkIDAsbikpKSkucGlwZShnZShlPT5KZShGdi5EZWluaXRpYWxpemVCdXR0b25GYWlsZWQsZSxuKSkpOmNlKCl9fV9nZXRTdHJhdGVneShlKXtsZXQgdDt0cnl7dD10aGlzLl9yZWdpc3RyeVYyLmdldCh7aWQ6ZX0pfWNhdGNoKG4pe3Q9dGhpcy5fcmVnaXN0cnkuZ2V0KGUpfXJldHVybiB0fX12YXIgZl8sU18sX18sd18sQ187Y2xhc3MgSV97Y29uc3RydWN0b3IoZSx0LG4saSl7dGhpcy5fc3RvcmU9ZSx0aGlzLl9jaGVja291dEFjdGlvbkNyZWF0b3I9dCx0aGlzLl9tYXN0ZXJwYXNzU2NyaXB0TG9hZGVyPW4sdGhpcy5fbG9jYWxlPWl9aW5pdGlhbGl6ZShlKXtjb25zdHtjb250YWluZXJJZDp0LG1ldGhvZElkOm59PWU7aWYoIXR8fCFuKXRocm93IG5ldyBGdCgnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcImNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO3JldHVybiB0aGlzLl9tZXRob2RJZD1uLHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX2NoZWNrb3V0QWN0aW9uQ3JlYXRvci5sb2FkRGVmYXVsdENoZWNrb3V0KCkpLnRoZW4oZT0+e2NvbnN0IHQ9ZS5wYXltZW50TWV0aG9kcy5nZXRQYXltZW50TWV0aG9kKG4pO2lmKCF0fHwhdC5pbml0aWFsaXphdGlvbkRhdGEuY2hlY2tvdXRJZCl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0IGk9e3VzZU1hc3RlcnBhc3NTcmM6dC5pbml0aWFsaXphdGlvbkRhdGEuaXNNYXN0ZXJwYXNzU3JjRW5hYmxlZCxsYW5ndWFnZTpNcyh0aGlzLl9sb2NhbGUpLHRlc3RNb2RlOnQuY29uZmlnLnRlc3RNb2RlLGNoZWNrb3V0SWQ6dC5pbml0aWFsaXphdGlvbkRhdGEuY2hlY2tvdXRJZH07cmV0dXJuIHRoaXMuX21hc3RlcnBhc3NTY3JpcHRMb2FkZXIubG9hZChpKX0pLnRoZW4oZT0+e3RoaXMuX21hc3RlcnBhc3NDbGllbnQ9ZSx0aGlzLl9zaWduSW5CdXR0b249dGhpcy5fY3JlYXRlU2lnbkluQnV0dG9uKHQpfSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIHRoaXMuX3NpZ25JbkJ1dHRvbiYmdGhpcy5fc2lnbkluQnV0dG9uLnBhcmVudE5vZGUmJih0aGlzLl9zaWduSW5CdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5faGFuZGxlV2FsbGV0QnV0dG9uQ2xpY2spLHRoaXMuX3NpZ25JbkJ1dHRvbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX3NpZ25JbkJ1dHRvbiksdGhpcy5fc2lnbkluQnV0dG9uPXZvaWQgMCksUHJvbWlzZS5yZXNvbHZlKCl9X2NyZWF0ZVNpZ25JbkJ1dHRvbihlKXtjb25zdCB0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpLG49dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSxpPXRoaXMuX21ldGhvZElkP24ucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZCh0aGlzLl9tZXRob2RJZCk6bnVsbCxyPW4uY29uZmlnLmdldFN0b3JlQ29uZmlnKCk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiTmVlZCBhIGNvbnRhaW5lciB0byBwbGFjZSB0aGUgYnV0dG9uXCIpO2lmKCFpKXRocm93IG5ldyBRZShXZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7aWYoIXIpdGhyb3cgbmV3IEZ0KFwiVW5hYmxlIHRvIHJldHJpZXZlIHN0b3JlIGNvbmZpZ3VyYXRpb25cIik7Y29uc3Qgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7aWYoby50eXBlPVwiaW1hZ2VcIixpLmluaXRpYWxpemF0aW9uRGF0YS5pc01hc3RlcnBhc3NTcmNFbmFibGVkKXtjb25zdCBlPWkuY29uZmlnLnRlc3RNb2RlP1wic2FuZGJveC5cIjpcIlwiLHtjaGVja291dElkOnR9PWkuaW5pdGlhbGl6YXRpb25EYXRhLG49W2Bsb2NhbGU9JHtNcyh0aGlzLl9sb2NhbGUpfWAsXCJwYXltZW50bWV0aG9kPW1hc3Rlcix2aXNhLGFtZXgsZGlzY292ZXJcIixgY2hlY2tvdXRpZD0ke3R9YF07by5zcmM9W2BodHRwczovLyR7ZX1zcmMubWFzdGVyY2FyZC5jb20vYXNzZXRzL2ltZy9idG4vc3JjX2Noa19idG5fMTI2eDAzMHB4LnN2Z2Asbi5qb2luKFwiJlwiKV0uam9pbihcIj9cIil9ZWxzZSBvLnNyYz1cImh0dHBzOi8vc3RhdGljLm1hc3RlcnBhc3MuY29tL2R5bi9pbWcvYnRuL2dsb2JhbC9tcF9jaGtfYnRuXzE2MHgwMzdweC5zdmdcIjtyZXR1cm4gdC5hcHBlbmRDaGlsZChvKSxvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2hhbmRsZVdhbGxldEJ1dHRvbkNsaWNrKSxvfV9jcmVhdGVNYXN0ZXJwYXNzUGF5bG9hZCgpe2NvbnN0IGU9dGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSx0PWUuY2hlY2tvdXQuZ2V0Q2hlY2tvdXQoKSxuPXRoaXMuX21ldGhvZElkP2UucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZCh0aGlzLl9tZXRob2RJZCk6bnVsbDtpZighdCl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NoZWNrb3V0KTtpZighbil0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ1BheW1lbnRNZXRob2QpO3JldHVybntjaGVja291dElkOm4uaW5pdGlhbGl6YXRpb25EYXRhLmNoZWNrb3V0SWQsYWxsb3dlZENhcmRUeXBlczpuLmluaXRpYWxpemF0aW9uRGF0YS5hbGxvd2VkQ2FyZFR5cGVzLGFtb3VudDp0LmNhcnQuY2FydEFtb3VudC50b1N0cmluZygpLGN1cnJlbmN5OnQuY2FydC5jdXJyZW5jeS5jb2RlLGNhcnRJZDp0LmNhcnQuaWQsY2FsbGJhY2tVcmw6VHMoXCJjYXJ0XCIpfX1faGFuZGxlV2FsbGV0QnV0dG9uQ2xpY2soKXtpZighdGhpcy5fbWFzdGVycGFzc0NsaWVudCl0aHJvdyBuZXcgQ3MoZnMuQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCk7dGhpcy5fbWFzdGVycGFzc0NsaWVudC5jaGVja291dCh0aGlzLl9jcmVhdGVNYXN0ZXJwYXNzUGF5bG9hZCgpKX19KGZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxhPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pOmk7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpYT1SZWZsZWN0LmRlY29yYXRlKGUsdCxuLGkpO2Vsc2UgZm9yKHZhciBzPWUubGVuZ3RoLTE7cz49MDtzLS0pKHI9ZVtzXSkmJihhPShvPDM/cihhKTpvPjM/cih0LG4sYSk6cih0LG4pKXx8YSk7bz4zJiZhJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLGEpfSkoW0NyXSxJXy5wcm90b3R5cGUsXCJfaGFuZGxlV2FsbGV0QnV0dG9uQ2xpY2tcIixudWxsKSxmdW5jdGlvbihlKXtlLkhPUklaT05UQUw9XCJob3Jpem9udGFsXCIsZS5WRVJUSUNBTD1cInZlcnRpY2FsXCJ9KGZffHwoZl89e30pKSxmdW5jdGlvbihlKXtlLlNNQUxMPVwic21hbGxcIixlLk1FRElVTT1cIm1lZGl1bVwiLGUuTEFSR0U9XCJsYXJnZVwiLGUuUkVTUE9OU0lWRT1cInJlc3BvbnNpdmVcIn0oU198fChTXz17fSkpLGZ1bmN0aW9uKGUpe2UuR09MRD1cImdvbGRcIixlLkJMVUU9XCJibHVlXCIsZS5TSWxWRVI9XCJzaWx2ZXJcIixlLkJMQUNLPVwiYmxhY2tcIixlLldISVRFPVwid2hpdGVcIn0oX198fChfXz17fSkpLGZ1bmN0aW9uKGUpe2UuQ0hFQ0tPVVQ9XCJjaGVja291dFwiLGUuUEFZPVwicGF5XCIsZS5CVVlOT1c9XCJidXlub3dcIixlLlBBWVBBTD1cInBheXBhbFwiLGUuQ1JFRElUPVwiY3JlZGl0XCJ9KHdffHwod189e30pKSxmdW5jdGlvbihlKXtlLlBJTEw9XCJwaWxsXCIsZS5SRUNUPVwicmVjdFwifShDX3x8KENfPXt9KSk7Y2xhc3MgYl97Y29uc3RydWN0b3IoZSx0LG4saSxyPVwiXCIpe3RoaXMuX3N0b3JlPWUsdGhpcy5fY2hlY2tvdXRBY3Rpb25DcmVhdG9yPXQsdGhpcy5fcGF5cGFsU2NyaXB0TG9hZGVyPW4sdGhpcy5fZm9ybVBvc3Rlcj1pLHRoaXMuX2hvc3Q9cn1pbml0aWFsaXplKGUpe2NvbnN0IHQ9ZS5wYXlwYWwsbj10aGlzLl9zdG9yZS5nZXRTdGF0ZSgpLGk9dGhpcy5fcGF5bWVudE1ldGhvZD1uLnBheW1lbnRNZXRob2RzLmdldFBheW1lbnRNZXRob2QoZS5tZXRob2RJZCk7aWYoIXQpdGhyb3cgbmV3IEZ0O2lmKCFpKXRocm93IG5ldyBRZShXZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7cmV0dXJuIHRoaXMuX3BheXBhbFNjcmlwdExvYWRlci5sb2FkUGF5cGFsKGkuY29uZmlnLm1lcmNoYW50SWQpLnRoZW4obj0+e3ZhciByLG87aWYoIWl8fCFpLmNvbmZpZy5tZXJjaGFudElkKXRocm93IG5ldyBRZShXZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3QgYT1pLmNvbmZpZy5tZXJjaGFudElkLHM9aS5jb25maWcudGVzdE1vZGU/XCJzYW5kYm94XCI6XCJwcm9kdWN0aW9uXCIsZD17W3NdOnQuY2xpZW50SWR9LGM9bi5GVU5ESU5HLkNSRURJVHx8XCJjcmVkaXRcIixsPXQuYWxsb3dDcmVkaXQ/W2NdOltdLHU9dC5hbGxvd0NyZWRpdD9bXTpbY107cmV0dXJuIG4uQnV0dG9uLnJlbmRlcih7ZW52OnMsY2xpZW50OmQsY29tbWl0OnQuc2hvdWxkUHJvY2Vzc1BheW1lbnQsZnVuZGluZzp7YWxsb3dlZDpsLGRpc2FsbG93ZWQ6dX0sc3R5bGU6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtzaGFwZTpDXy5SRUNUfSxXKHQuc3R5bGUsXCJsYXlvdXRcIixcImNvbG9yXCIsXCJsYWJlbFwiLFwic2hhcGVcIixcInRhZ2xpbmVcIixcImZ1bmRpbmdpY29uc1wiKSkse3NpemU6XCJwYXlwYWxleHByZXNzXCI9PT1pLmlkJiZcInNtYWxsXCI9PT0obnVsbD09PShyPXQuc3R5bGUpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnNpemUpP1NfLlJFU1BPTlNJVkU6bnVsbD09PShvPXQuc3R5bGUpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLnNpemV9KSxwYXltZW50OihlLG4pPT50aGlzLl9zZXR1cFBheW1lbnQoYSxuLHQub25QYXltZW50RXJyb3IpLG9uQXV0aG9yaXplOihlLG4pPT50aGlzLl90b2tlbml6ZVBheW1lbnQoZSxuLHQuc2hvdWxkUHJvY2Vzc1BheW1lbnQsdC5vbkF1dGhvcml6ZUVycm9yKX0sZS5jb250YWluZXJJZCl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gdGhpcy5fcGF5bWVudE1ldGhvZD12b2lkIDAsUHJvbWlzZS5yZXNvbHZlKCl9X3NldHVwUGF5bWVudChlLHQsbil7aWYoIXQpdGhyb3cgbmV3IENzKGZzLkNoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQpO3JldHVybiB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl9jaGVja291dEFjdGlvbkNyZWF0b3IubG9hZERlZmF1bHRDaGVja291dCgpKS50aGVuKG49Pntjb25zdCBpPW4uY2FydC5nZXRDYXJ0KCkscj1pP2kuaWQ6XCJcIjtyZXR1cm4gdC5yZXF1ZXN0LnBvc3QoYCR7dGhpcy5faG9zdH0vYXBpL3N0b3JlZnJvbnQvcGF5bWVudC9wYXlwYWxleHByZXNzYCx7bWVyY2hhbnRJZDplLGNhcnRJZDpyfSx7aGVhZGVyczpPYmplY3QuYXNzaWduKHtcIlgtQVBJLUlOVEVSTkFMXCI6Q3R9LHJ0KX0pfSkudGhlbihlPT5lLmlkKS5jYXRjaChlPT57dGhyb3cgbiYmbihlKSxlfSl9X3Rva2VuaXplUGF5bWVudChlLHQsbixpKXtpZighdGhpcy5fcGF5bWVudE1ldGhvZCl0aHJvdyBuZXcgQ3MoZnMuQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCk7aWYoIXQpdGhyb3cgbmV3IENzKGZzLkNoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQpO2lmKCFlLnBheW1lbnRJRHx8IWUucGF5ZXJJRCl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ1BheW1lbnQpO2NvbnN0IHI9dGhpcy5fcGF5bWVudE1ldGhvZC5pZDtyZXR1cm4gdC5wYXltZW50LmdldChlLnBheW1lbnRJRCkudGhlbih0PT57dGhpcy5fZm9ybVBvc3Rlci5wb3N0Rm9ybShcIi9jaGVja291dC5waHBcIix7cGF5bWVudF90eXBlOlwicGF5cGFsXCIscHJvdmlkZXI6cixhY3Rpb246bj9cInByb2Nlc3NfcGF5bWVudFwiOlwic2V0X2V4dGVybmFsX2NoZWNrb3V0XCIscGF5bWVudElkOmUucGF5bWVudElELHBheWVySWQ6ZS5wYXllcklELHBheWVySW5mbzpKU09OLnN0cmluZ2lmeSh0LnBheWVyLnBheWVyX2luZm8pfSl9KX19Y2xhc3MgUF8gZXh0ZW5kcyBCdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHxcIkFuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkIGR1cmluZyBjb25maWcgY3JlYXRpb24gcHJvY2Vzcy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiksdGhpcy5uYW1lPVwiQW1hem9uUGF5VjJDb25maWdDcmVhdGlvbkVycm9yXCIsdGhpcy50eXBlPVwiYW1hem9uX3BheV92Ml9jb25maWdfY3JlYXRpb25fZXJyb3JcIn19ZnVuY3Rpb24gT18oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBPYmplY3QmJlwiYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnNcImluIGV9dmFyIEVfPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIEFfe2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvcj10LHRoaXMuYW1hem9uUGF5VjJDb25maWdSZXF1ZXN0U2VuZGVyPW59aW5pdGlhbGl6ZShlKXt2YXIgdDtyZXR1cm4gRV8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e21ldGhvZElkOm4sY29udGFpbmVySWQ6aSxhbWF6b25wYXk6cn09ZSx7YnV0dG9uQ29sb3I6b309cnx8e307aWYoIW58fCFpKXRocm93IG5ldyBybignVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm1ldGhvZElkXCIgb3IgXCJjb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdHtnZXRQYXltZW50TWV0aG9kT3JUaHJvdzphfT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxzPWEobikse2luaXRpYWxpemF0aW9uRGF0YTpkfT1zO3lpZWxkIHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLmluaXRpYWxpemUocykscnx8KHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCkpO2NvbnN0IGM9T18ocik/dm9pZCAwOnI7T18ocikmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG51bGw9PT0odD1yLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkpJiYodGhpcy5fYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM9ci5idXlOb3dJbml0aWFsaXplT3B0aW9ucyx0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci51cGRhdGVCdXlOb3dGbG93RmxhZyghMCkpLHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLnJlbmRlckFtYXpvblBheUJ1dHRvbih7Y2hlY2tvdXRTdGF0ZTp0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxjb250YWluZXJJZDppLG1ldGhvZElkOm4sb3B0aW9uczpjLHBsYWNlbWVudDokdC5DYXJ0LGJ1dHRvbkNvbG9yOm8saXNCdXR0b25NaWNyb1RleHREaXNhYmxlZDpudWxsPT1kP3ZvaWQgMDpkLmlzQnV0dG9uTWljcm9UZXh0RGlzYWJsZWR9KSx0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucyYmdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IucHJlcGFyZUNoZWNrb3V0V2l0aENyZWF0aW9uUmVxdWVzdENvbmZpZyh0aGlzLl9nZXRDaGVja291dENyZWF0aW9uUmVxdWVzdENvbmZpZy5iaW5kKHRoaXMpKX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiB0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5kZWluaXRpYWxpemUoKX1fY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coKXt2YXIgZSx0O3JldHVybiBFXyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgbj1udWxsPT09KHQ9bnVsbD09PShlPXRoaXMuX2J1eU5vd0luaXRpYWxpemVPcHRpb25zKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNhbGwoZSk7aWYoIW4pdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdDYXJ0KTt0cnl7cmV0dXJuIHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0KG4pfWNhdGNoKGUpe3Rocm93IG5ldyBqbn19KX1fY3JlYXRlQ2hlY2tvdXRDb25maWcoZSl7cmV0dXJuIEVfKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7Y29uc3QgdD0oeWllbGQgdGhpcy5hbWF6b25QYXlWMkNvbmZpZ1JlcXVlc3RTZW5kZXIuY3JlYXRlQ2hlY2tvdXRDb25maWcoZSkpLmJvZHkse3BheWxvYWQ6bixwdWJsaWNfa2V5Oml9PXQscj1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8aS5sZW5ndGg7cisrKXQuaW5kZXhPZihpW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW3JdKSYmKG5baVtyXV09ZVtpW3JdXSl9cmV0dXJuIG59KHQsW1wicGF5bG9hZFwiLFwicHVibGljX2tleVwiXSk7cmV0dXJuIE9iamVjdC5hc3NpZ24oe3BheWxvYWRKU09OOm4scHVibGljS2V5SWQ6aX0scil9Y2F0Y2goZSl7dGhyb3cgbmV3IFBffX0pfV9nZXRDaGVja291dENyZWF0aW9uUmVxdWVzdENvbmZpZygpe3JldHVybiBFXyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgZT15aWVsZCB0aGlzLl9jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdygpLHQ9e2Ftb3VudDpTdHJpbmcoZS5iYXNlQW1vdW50KSxjdXJyZW5jeUNvZGU6ZS5jdXJyZW5jeS5jb2RlfTtyZXR1cm57Y3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnOnlpZWxkIHRoaXMuX2NyZWF0ZUNoZWNrb3V0Q29uZmlnKGUuaWQpLGVzdGltYXRlZE9yZGVyQW1vdW50OnQscHJvZHVjdFR5cGU6MD09PVV0KGUpP1l0LlBheU9ubHk6WXQuUGF5QW5kU2hpcH19KX19Y2xhc3Mga197Y29uc3RydWN0b3IoZSl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lfWNyZWF0ZUNoZWNrb3V0Q29uZmlnKGUpe2NvbnN0IHQ9e2NhcnRJZDplfSxuPU9iamVjdC5hc3NpZ24oe1wiWC1BUEktSU5URVJOQUxcIjpYbixcIkNvbnRlbnQtVHlwZVwiOnRpLkpzb259LG5pKTtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5wb3N0KFwiL2FwaS9zdG9yZWZyb250L3BheW1lbnQvYW1hem9ucGF5XCIse2hlYWRlcnM6bixib2R5OnR9KX19Y29uc3QgVF89bm4oZT0+e2NvbnN0IHQ9bigpLGk9bmV3IGtfKHQpLHI9dG4oKTtyZXR1cm4gbmV3IEFfKGUscixpKX0sW3tpZDpcImFtYXpvbnBheVwifV0pO3ZhciBEXyxNXyx6Xz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTshZnVuY3Rpb24oZSl7ZS5TdWJ0b3RhbD1cIlN1YnRvdGFsXCIsZS5TaGlwcGluZz1cIlNoaXBwaW5nXCJ9KERffHwoRF89e30pKSxmdW5jdGlvbihlKXtlLkJsYWNrPVwiYmxhY2tcIixlLldoaXRlPVwid2hpdGVcIixlLldoaXRlQm9yZGVyPVwid2hpdGUtYm9yZGVyXCJ9KE1ffHwoTV89e30pKTtjbGFzcyBOX3tjb25zdHJ1Y3RvcihlLHQsbixpLHIpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZSx0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5fc2Vzc2lvbkZhY3Rvcnk9bix0aGlzLl9icmFpbnRyZWVTZGs9aSx0aGlzLl9hcHBsZVBheVNjcmlwdExvYWRlcj1yLHRoaXMuX29uQXV0aG9yaXplQ2FsbGJhY2s9Vix0aGlzLl9zdWJUb3RhbExhYmVsPURfLlN1YnRvdGFsLHRoaXMuX3NoaXBwaW5nTGFiZWw9RF8uU2hpcHBpbmd9aW5pdGlhbGl6ZShlKXt2YXIgdCxuO3JldHVybiB6Xyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bWV0aG9kSWQ6aSxjb250YWluZXJJZDpyLGFwcGxlcGF5Om99PWU7aWYoIWl8fCFvKXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7eWllbGQgdGhpcy5fYXBwbGVQYXlTY3JpcHRMb2FkZXIubG9hZFNkaygpO2NvbnN0e29uUGF5bWVudEF1dGhvcml6ZTphLGJ1eU5vd0luaXRpYWxpemVPcHRpb25zOnMscmVxdWlyZXNTaGlwcGluZzpkfT1vO3RoaXMuX3JlcXVpcmVzU2hpcHBpbmc9ZCx0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucz1zLHRoaXMuX29uQXV0aG9yaXplQ2FsbGJhY2s9YSxzfHwoeWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCkpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoaSk7Y29uc3QgYz10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7cmV0dXJuIHRoaXMuX3BheW1lbnRNZXRob2Q9Yy5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhpKSxjLmdldENhcnQoKSYmKHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudmVyaWZ5Q2hlY2tvdXRTcGFtUHJvdGVjdGlvbigpKSwobnVsbD09PSh0PXRoaXMuX3BheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nYXRld2F5KT09PWtuLkJSQUlOVFJFRSYmKHlpZWxkIHRoaXMuX2luaXRpYWxpemVCcmFpbnRyZWVTZGsoKSksdGhpcy5fYXBwbGVQYXlCdXR0b249dGhpcy5fY3JlYXRlQnV0dG9uKHIsbnVsbD09PShuPXRoaXMuX3BheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09bj92b2lkIDA6bi5zdHlsZU9wdGlvbiksdGhpcy5fYXBwbGVQYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5faGFuZGxlV2FsbGV0QnV0dG9uQ2xpY2suYmluZCh0aGlzKSksUHJvbWlzZS5yZXNvbHZlKCl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9X2NyZWF0ZUJ1dHRvbihlLHQpe2NvbnN0IG49ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSk7aWYoIW4pdGhyb3cgbmV3IHJuKFwiVW5hYmxlIHRvIGNyZWF0ZSB3YWxsZXQgYnV0dG9uIHdpdGhvdXQgdmFsaWQgY29udGFpbmVyIElELlwiKTtjb25zdCBpPXRoaXMuX2NyZWF0ZUFwcGxlUGF5QnV0dG9uRWxlbWVudCh0KTtyZXR1cm4gbi5hcHBlbmRDaGlsZChpKSxpfV9jcmVhdGVBcHBsZVBheUJ1dHRvbkVsZW1lbnQoZSl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXBwbGUtcGF5LWJ1dHRvblwiKTtyZXR1cm4gdC5zZXRBdHRyaWJ1dGUoXCJidXR0b25zdHlsZVwiLChlPT57c3dpdGNoKGUpe2Nhc2UgTV8uV2hpdGU6cmV0dXJuXCJ3aGl0ZVwiO2Nhc2UgTV8uV2hpdGVCb3JkZXI6cmV0dXJuXCJ3aGl0ZS1vdXRsaW5lXCI7Y2FzZSBNXy5CbGFjazpkZWZhdWx0OnJldHVyblwiYmxhY2tcIn19KShlKSksdC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJwbGFpblwiKSx0LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCItLWFwcGxlLXBheS1idXR0b24td2lkdGg6IDEwMCU7IC0tYXBwbGUtcGF5LWJ1dHRvbi1oZWlnaHQ6IDQwcHg7IC0tYXBwbGUtcGF5LWJ1dHRvbi1ib3JkZXItcmFkaXVzOiA0cHg7XCIpLHR9X2hhbmRsZVdhbGxldEJ1dHRvbkNsaWNrKGUpe3ZhciB0O3JldHVybiB6Xyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoZS5wcmV2ZW50RGVmYXVsdCgpLCF0aGlzLl9wYXltZW50TWV0aG9kfHwhdGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtpZih0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucyYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5fYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KXtjb25zdHtjb3VudHJ5Q29kZTplLGN1cnJlbmN5Q29kZTpuLG1lcmNoYW50Q2FwYWJpbGl0aWVzOmksc3VwcG9ydGVkTmV0d29ya3M6cixzdG9yZU5hbWU6b309dGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEsYT10aGlzLl9nZXRSZXF1ZXN0V2l0aEVtcHR5VG90YWwoZSxuLHIsaSk7dGhpcy5fcmVxdWlyZXNTaGlwcGluZyYmKG51bGw9PT0odD1hLnJlcXVpcmVkU2hpcHBpbmdDb250YWN0RmllbGRzKXx8dm9pZCAwPT09dHx8dC5wdXNoKFwicG9zdGFsQWRkcmVzc1wiKSk7Y29uc3Qgcz10aGlzLl9zZXNzaW9uRmFjdG9yeS5jcmVhdGUoYSk7dGhpcy5faGFuZGxlQXBwbGVQYXlFdmVudHMocyx0aGlzLl9wYXltZW50TWV0aG9kLG8pLHMuYmVnaW4oKX1lbHNle2NvbnN0IGU9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHQ9ZS5nZXRDYXJ0T3JUaHJvdygpLG49ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKSxpPWUuZ2V0Q2hlY2tvdXRPclRocm93KCkscj10aGlzLl9nZXRCYXNlUmVxdWVzdCh0LGksbix0aGlzLl9wYXltZW50TWV0aG9kKSxvPXRoaXMuX3Nlc3Npb25GYWN0b3J5LmNyZWF0ZShyKTt0aGlzLl9oYW5kbGVBcHBsZVBheUV2ZW50cyhvLHRoaXMuX3BheW1lbnRNZXRob2Qsbi5zdG9yZVByb2ZpbGUuc3RvcmVOYW1lKSxvLmJlZ2luKCl9fSl9X2dldFJlcXVlc3RXaXRoRW1wdHlUb3RhbChlLHQsbixpKXtyZXR1cm57Y291bnRyeUNvZGU6ZSxjdXJyZW5jeUNvZGU6dCxzdXBwb3J0ZWROZXR3b3JrczpuLG1lcmNoYW50Q2FwYWJpbGl0aWVzOmksdG90YWw6e2xhYmVsOlwiXCIsYW1vdW50OlwiMFwiLHR5cGU6XCJwZW5kaW5nXCJ9LHJlcXVpcmVkQmlsbGluZ0NvbnRhY3RGaWVsZHM6W1wicG9zdGFsQWRkcmVzc1wiXSxyZXF1aXJlZFNoaXBwaW5nQ29udGFjdEZpZWxkczpbXCJlbWFpbFwiLFwicGhvbmVcIl19fV9nZXRCYXNlUmVxdWVzdChlLHQsbixpKXt2YXIgcjtjb25zdHtzdG9yZVByb2ZpbGU6e3N0b3JlQ291bnRyeUNvZGU6byxzdG9yZU5hbWU6YX19PW4se2N1cnJlbmN5Ontjb2RlOnMsZGVjaW1hbFBsYWNlczpkfX09ZSx7aW5pdGlhbGl6YXRpb25EYXRhOnttZXJjaGFudENhcGFiaWxpdGllczpjLHN1cHBvcnRlZE5ldHdvcmtzOmx9fT1pLHU9ZS5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGg+MCxoPXtyZXF1aXJlZEJpbGxpbmdDb250YWN0RmllbGRzOltcInBvc3RhbEFkZHJlc3NcIl0scmVxdWlyZWRTaGlwcGluZ0NvbnRhY3RGaWVsZHM6W1wiZW1haWxcIixcInBob25lXCJdLGNvdW50cnlDb2RlOm8sY3VycmVuY3lDb2RlOnMsbWVyY2hhbnRDYXBhYmlsaXRpZXM6YyxzdXBwb3J0ZWROZXR3b3JrczpsLGxpbmVJdGVtczpbXSx0b3RhbDp1P3tsYWJlbDphLGFtb3VudDpgJHt0LmdyYW5kVG90YWwudG9GaXhlZChkKX1gLHR5cGU6XCJwZW5kaW5nXCJ9OntsYWJlbDphLGFtb3VudDpgJHt0LmdyYW5kVG90YWwudG9GaXhlZChkKX1gLHR5cGU6XCJmaW5hbFwifX07aWYodSludWxsPT09KHI9aC5yZXF1aXJlZFNoaXBwaW5nQ29udGFjdEZpZWxkcyl8fHZvaWQgMD09PXJ8fHIucHVzaChcInBvc3RhbEFkZHJlc3NcIik7ZWxzZXtjb25zdCBlPVt7bGFiZWw6dGhpcy5fc3ViVG90YWxMYWJlbCxhbW91bnQ6YCR7dC5zdWJ0b3RhbC50b0ZpeGVkKGQpfWB9XTt0LnRheGVzLmZvckVhY2godD0+ZS5wdXNoKHtsYWJlbDp0Lm5hbWUsYW1vdW50OmAke3QuYW1vdW50LnRvRml4ZWQoZCl9YH0pKSxoLmxpbmVJdGVtcz1lfXJldHVybiBofV9oYW5kbGVBcHBsZVBheUV2ZW50cyhlLHQsbil7ZS5vbnZhbGlkYXRlbWVyY2hhbnQ9bj0+el8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdHtib2R5Oml9PXlpZWxkIHRoaXMuX29uVmFsaWRhdGVNZXJjaGFudCh0LG4pO2UuY29tcGxldGVNZXJjaGFudFZhbGlkYXRpb24oaSl9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKFwiTWVyY2hhbnQgdmFsaWRhdGlvbiBmYWlsZWRcIil9fSksdGhpcy5fYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMmJiF0aGlzLl9yZXF1aXJlc1NoaXBwaW5nJiYoZS5vbnBheW1lbnRtZXRob2RzZWxlY3RlZD0oKT0+el8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2NyZWF0ZUJ1eU5vd0NhcnQoKSx0aGlzLl9oYW5kbGVQYXltZW50TWV0aG9kU2VsZWN0ZWQoZSl9KSksZS5vbnNoaXBwaW5nY29udGFjdHNlbGVjdGVkPXQ9PnpfKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucyYmdGhpcy5fcmVxdWlyZXNTaGlwcGluZyYmKHlpZWxkIHRoaXMuX2NyZWF0ZUJ1eU5vd0NhcnQoKSkseWllbGQgdGhpcy5faGFuZGxlU2hpcHBpbmdDb250YWN0U2VsZWN0ZWQoZSxuLHQpfSksZS5vbnNoaXBwaW5nbWV0aG9kc2VsZWN0ZWQ9dD0+el8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2hhbmRsZVNoaXBwaW5nTWV0aG9kU2VsZWN0ZWQoZSxuLHQpfSksZS5vbmNhbmNlbD0oKT0+el8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdCBlPWAvcmVtb3RlLWNoZWNrb3V0LyR7dC5pZH0vc2lnbm91dGA7cmV0dXJuIHlpZWxkIHRoaXMuX3JlcXVlc3RTZW5kZXIuZ2V0KGUpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KCl9Y2F0Y2goZSl7dGhyb3cgbmV3IE1ufX0pLGUub25wYXltZW50YXV0aG9yaXplZD1uPT56Xyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX29uUGF5bWVudEF1dGhvcml6ZWQobixlLHQpfSl9X2NyZWF0ZUJ1eU5vd0NhcnQoKXt2YXIgZSx0O3JldHVybiB6Xyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0IG49bnVsbD09PSh0PW51bGw9PT0oZT10aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucyl8fHZvaWQgMD09PWU/dm9pZCAwOmUuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KXx8dm9pZCAwPT09dD92b2lkIDA6dC5jYWxsKGUpO2lmKCFuKXRocm93IG5ldyBqdChrdC5NaXNzaW5nQ2FydCk7Y29uc3QgaT15aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnQobik7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoaS5pZCk7Y29uc3Qgcj10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse3Nob3VsZEV4ZWN1dGVTcGFtQ2hlY2s6b309ci5nZXRDaGVja291dE9yVGhyb3coKTtvJiYoeWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS52ZXJpZnlDaGVja291dFNwYW1Qcm90ZWN0aW9uKCkpfWNhdGNoKGUpe3Rocm93IG5ldyBqbn19KX1faGFuZGxlUGF5bWVudE1ldGhvZFNlbGVjdGVkKGUpe2NvbnN0IHQ9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLG49dC5nZXRDYXJ0T3JUaHJvdygpLGk9dC5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKSxyPXQuZ2V0Q2hlY2tvdXRPclRocm93KCk7aWYoIXRoaXMuX3BheW1lbnRNZXRob2R8fCF0aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0IG89dGhpcy5fZ2V0QmFzZVJlcXVlc3QobixyLGksdGhpcy5fcGF5bWVudE1ldGhvZCk7ZGVsZXRlIG8udG90YWwudHlwZSxlLmNvbXBsZXRlUGF5bWVudE1ldGhvZFNlbGVjdGlvbih7bmV3VG90YWw6by50b3RhbCxuZXdMaW5lSXRlbXM6by5saW5lSXRlbXN9KX1faGFuZGxlU2hpcHBpbmdDb250YWN0U2VsZWN0ZWQoZSx0LG4pe3ZhciBpO3JldHVybiB6Xyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3Qgcj10aGlzLl90cmFuc2Zvcm1Db250YWN0VG9BZGRyZXNzKG4uc2hpcHBpbmdDb250YWN0KTt0cnl7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3Mocil9Y2F0Y2godCl7dGhyb3cgZS5hYm9ydCgpLG5ldyBFcnJvcihcIlNoaXBwaW5nIGFkZHJlc3MgdXBkYXRlIGZhaWxlZFwiKX1sZXQgbz10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7Y29uc3R7Y3VycmVuY3k6e2RlY2ltYWxQbGFjZXM6YX19PW8uZ2V0Q2FydE9yVGhyb3coKTtsZXQgcz1vLmdldENoZWNrb3V0T3JUaHJvdygpO2NvbnN0IGQ9bnVsbD09PShpPXMuY29uc2lnbm1lbnRzWzBdLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmlkLGM9cy5jb25zaWdubWVudHNbMF0uYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLGw9bnVsbD09Yz92b2lkIDA6Yy5maW5kKCh7aWQ6ZX0pPT5lPT09ZCksdT1udWxsPT1jP3ZvaWQgMDpjLmZpbHRlcihlPT5lLmlkIT09ZCksaD1sP1t7bGFiZWw6bC5kZXNjcmlwdGlvbixhbW91bnQ6YCR7bC5jb3N0LnRvRml4ZWQoYSl9YCxkZXRhaWw6bC5hZGRpdGlvbmFsRGVzY3JpcHRpb24saWRlbnRpZmllcjpsLmlkfV06W107aWYodSYmWy4uLnUuZmlsdGVyKGU9PmUuaXNSZWNvbW1lbmRlZCksLi4udS5maWx0ZXIoZT0+IWUuaXNSZWNvbW1lbmRlZCldLmZvckVhY2goZT0+aC5wdXNoKHtsYWJlbDplLmRlc2NyaXB0aW9uLGFtb3VudDpgJHtlLmNvc3QudG9GaXhlZChhKX1gLGRldGFpbDplLmFkZGl0aW9uYWxEZXNjcmlwdGlvbixpZGVudGlmaWVyOmUuaWR9KSksIShjIGluc3RhbmNlb2YgQXJyYXkpKXRocm93IG5ldyBFcnJvcihcIlNoaXBwaW5nIG9wdGlvbnMgbm90IGF2YWlsYWJsZS5cIik7aWYoMD09PWMubGVuZ3RoKXJldHVybiB2b2lkIGUuY29tcGxldGVTaGlwcGluZ0NvbnRhY3RTZWxlY3Rpb24oQXBwbGVQYXlTZXNzaW9uLlNUQVRVU19JTlZBTElEX1NISVBQSU5HX1BPU1RBTF9BRERSRVNTLFtdLHt0eXBlOlwicGVuZGluZ1wiLGxhYmVsOnQsYW1vdW50OmAke3MuZ3JhbmRUb3RhbC50b0ZpeGVkKGEpfWB9LFtdKTtjb25zdCBwPWMuZmluZChlPT5lLmlzUmVjb21tZW5kZWQpLG09cD9wLmlkOmNbMF0uaWQseT1sP2wuaWQ6bTt0cnl7eWllbGQgdGhpcy5fdXBkYXRlU2hpcHBpbmdPcHRpb24oeSl9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKFwiU2hpcHBpbmcgb3B0aW9ucyB1cGRhdGUgZmFpbGVkXCIpfW89dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHM9by5nZXRDaGVja291dE9yVGhyb3coKSxlLmNvbXBsZXRlU2hpcHBpbmdDb250YWN0U2VsZWN0aW9uKHtuZXdTaGlwcGluZ01ldGhvZHM6aCxuZXdUb3RhbDp7dHlwZTpcImZpbmFsXCIsbGFiZWw6dCxhbW91bnQ6YCR7cy5ncmFuZFRvdGFsLnRvRml4ZWQoYSl9YH0sbmV3TGluZUl0ZW1zOnRoaXMuX2dldFVwZGF0ZWRMaW5lSXRlbXMocyxhKX0pfSl9X2hhbmRsZVNoaXBwaW5nTWV0aG9kU2VsZWN0ZWQoZSx0LG4pe3JldHVybiB6Xyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7c2hpcHBpbmdNZXRob2Q6e2lkZW50aWZpZXI6aX19PW47dHJ5e3lpZWxkIHRoaXMuX3VwZGF0ZVNoaXBwaW5nT3B0aW9uKGkpfWNhdGNoKHQpe3Rocm93IGUuYWJvcnQoKSxuZXcgRXJyb3IoXCJTaGlwcGluZyBvcHRpb24gc2VsZWN0aW9uIHVwZGF0ZSBmYWlsZWQuXCIpfWNvbnN0IHI9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHtjdXJyZW5jeTp7ZGVjaW1hbFBsYWNlczpvfX09ci5nZXRDYXJ0T3JUaHJvdygpLGE9ci5nZXRDaGVja291dE9yVGhyb3coKTtlLmNvbXBsZXRlU2hpcHBpbmdNZXRob2RTZWxlY3Rpb24oe25ld1RvdGFsOnt0eXBlOlwiZmluYWxcIixsYWJlbDp0LGFtb3VudDpgJHthLmdyYW5kVG90YWwudG9GaXhlZChvKX1gfSxuZXdMaW5lSXRlbXM6dGhpcy5fZ2V0VXBkYXRlZExpbmVJdGVtcyhhLG8pfSl9KX1fZ2V0VXBkYXRlZExpbmVJdGVtcyhlLHQpe2NvbnN0IG49W3tsYWJlbDp0aGlzLl9zdWJUb3RhbExhYmVsLGFtb3VudDpgJHtlLnN1YnRvdGFsLnRvRml4ZWQodCl9YH1dO3JldHVybiBlLnRheGVzLmZvckVhY2goZT0+bi5wdXNoKHtsYWJlbDplLm5hbWUsYW1vdW50OmAke2UuYW1vdW50LnRvRml4ZWQodCl9YH0pKSxuLnB1c2goe2xhYmVsOnRoaXMuX3NoaXBwaW5nTGFiZWwsYW1vdW50OmAke2Uuc2hpcHBpbmdDb3N0VG90YWwudG9GaXhlZCh0KX1gfSksbn1fdXBkYXRlU2hpcHBpbmdPcHRpb24oZSl7cmV0dXJuIHpfKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihlKX0pfV9vblZhbGlkYXRlTWVyY2hhbnQoZSx0KXtyZXR1cm4gel8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IG49W2B2YWxpZGF0aW9uVXJsPSR7dC52YWxpZGF0aW9uVVJMfWAsYG1lcmNoYW50SWRlbnRpZmllcj0ke2UuaW5pdGlhbGl6YXRpb25EYXRhLm1lcmNoYW50SWR9YCxgZGlzcGxheU5hbWU9JHtlLmluaXRpYWxpemF0aW9uRGF0YS5zdG9yZU5hbWV9YCxgZG9tYWluTmFtZT0ke3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZX1gXS5qb2luKFwiJlwiKTtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5wb3N0KGAke2UuaW5pdGlhbGl6YXRpb25EYXRhLnBheW1lbnRzVXJsfS9hcGkvcHVibGljL3YxL3BheW1lbnRzL2FwcGxlcGF5L3ZhbGlkYXRlX21lcmNoYW50YCx7Y3JlZGVudGlhbHM6ITEsaGVhZGVyczp7QWNjZXB0OlwiYXBwbGljYXRpb24vanNvblwiLFwiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIixcIlgtWFNSRi1UT0tFTlwiOm51bGx9LGJvZHk6bn0pfSl9X29uUGF5bWVudEF1dGhvcml6ZWQoZSx0LG4pe3ZhciBpO3JldHVybiB6Xyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7dG9rZW46cixiaWxsaW5nQ29udGFjdDpvLHNoaXBwaW5nQ29udGFjdDphfT1lLnBheW1lbnQscz10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGg+MDtsZXQgZDsobnVsbD09PShpPW4uaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09aT92b2lkIDA6aS5nYXRld2F5KT09PWtuLkJSQUlOVFJFRSYmKGQ9eWllbGQgdGhpcy5fZ2V0QnJhaW50cmVlRGV2aWNlRGF0YSgpKTtjb25zdCBjPXttZXRob2RJZDpuLmlkLHBheW1lbnREYXRhOntkZXZpY2VTZXNzaW9uSWQ6ZCxmb3JtYXR0ZWRQYXlsb2FkOnthcHBsZV9wYXlfdG9rZW46e3BheW1lbnRfZGF0YTpyLnBheW1lbnREYXRhLHBheW1lbnRfbWV0aG9kOnIucGF5bWVudE1ldGhvZCx0cmFuc2FjdGlvbl9pZDpyLnRyYW5zYWN0aW9uSWRlbnRpZmllcn19fX0sbD10aGlzLl90cmFuc2Zvcm1Db250YWN0VG9BZGRyZXNzKG8pLHU9dGhpcy5fdHJhbnNmb3JtQ29udGFjdFRvQWRkcmVzcyhhKSxoPW51bGw9PWE/dm9pZCAwOmEuZW1haWxBZGRyZXNzLHA9KG51bGw9PWE/dm9pZCAwOmEucGhvbmVOdW1iZXIpfHxcIlwiO3RyeXtyZXR1cm4geWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbCkse2VtYWlsOmgscGhvbmU6cH0pKSxzJiYoeWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3ModSkpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe3VzZVN0b3JlQ3JlZGl0OiExfSkseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KGMpLHQuY29tcGxldGVQYXltZW50KEFwcGxlUGF5U2Vzc2lvbi5TVEFUVVNfU1VDQ0VTUyksdGhpcy5fb25BdXRob3JpemVDYWxsYmFjaygpfWNhdGNoKGUpe3Rocm93IHQuY29tcGxldGVQYXltZW50KEFwcGxlUGF5U2Vzc2lvbi5TVEFUVVNfRkFJTFVSRSksbmV3IEVycm9yKFwiUGF5bWVudCBjYW5ub3QgY29tcGxldGVcIil9fSl9X3RyYW5zZm9ybUNvbnRhY3RUb0FkZHJlc3MoZSl7cmV0dXJue2ZpcnN0TmFtZToobnVsbD09ZT92b2lkIDA6ZS5naXZlbk5hbWUpfHxcIlwiLGxhc3ROYW1lOihudWxsPT1lP3ZvaWQgMDplLmZhbWlseU5hbWUpfHxcIlwiLGNpdHk6KG51bGw9PWU/dm9pZCAwOmUubG9jYWxpdHkpfHxcIlwiLGNvbXBhbnk6XCJcIixhZGRyZXNzMToobnVsbD09ZT92b2lkIDA6ZS5hZGRyZXNzTGluZXMpJiZlLmFkZHJlc3NMaW5lc1swXXx8XCJcIixhZGRyZXNzMjoobnVsbD09ZT92b2lkIDA6ZS5hZGRyZXNzTGluZXMpJiZlLmFkZHJlc3NMaW5lc1sxXXx8XCJcIixwb3N0YWxDb2RlOihudWxsPT1lP3ZvaWQgMDplLnBvc3RhbENvZGUpfHxcIlwiLGNvdW50cnlDb2RlOihudWxsPT1lP3ZvaWQgMDplLmNvdW50cnlDb2RlKXx8XCJcIixwaG9uZToobnVsbD09ZT92b2lkIDA6ZS5waG9uZU51bWJlcil8fFwiXCIsc3RhdGVPclByb3ZpbmNlOihudWxsPT1lP3ZvaWQgMDplLmFkbWluaXN0cmF0aXZlQXJlYSl8fFwiXCIsc3RhdGVPclByb3ZpbmNlQ29kZToobnVsbD09ZT92b2lkIDA6ZS5hZG1pbmlzdHJhdGl2ZUFyZWEpfHxcIlwiLGN1c3RvbUZpZWxkczpbXX19X2dldEJyYWludHJlZURldmljZURhdGEoKXtyZXR1cm4gel8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdHtkZXZpY2VEYXRhOmV9PXlpZWxkIHRoaXMuX2JyYWludHJlZVNkay5nZXREYXRhQ29sbGVjdG9yT3JUaHJvdygpO3JldHVybiBlfWNhdGNoKGUpe319KX1faW5pdGlhbGl6ZUJyYWludHJlZVNkaygpe3JldHVybiB6Xyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChrbi5CUkFJTlRSRUUpO2NvbnN0IGU9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2Qoa24uQlJBSU5UUkVFKTtlJiZlLmNsaWVudFRva2VuJiZlLmluaXRpYWxpemF0aW9uRGF0YSYmdGhpcy5fYnJhaW50cmVlU2RrLmluaXRpYWxpemUoZS5jbGllbnRUb2tlbil9KX19Y29uc3QgeF89bm4oZT0+e2NvbnN0e2dldEhvc3Q6dH09ZS5nZXRTdGF0ZSgpLGk9bmV3IHBuKGUpO3JldHVybiBuZXcgTl8obih7aG9zdDp0KCl9KSxlLG5ldyBSbixuZXcgRW4obmV3IERuKGEoKSx3aW5kb3csaSkpLG5ldyBMbihuZXcgcikpfSxbe2lkOlwiYXBwbGVwYXlcIn1dKTt2YXIgRl89ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgUl97Y29uc3RydWN0b3IoZSx0KXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U9dH1pbml0aWFsaXplKGUpe3ZhciB0O3JldHVybiBGXyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7YmlnY29tbWVyY2VfcGF5bWVudHM6bixjb250YWluZXJJZDppLG1ldGhvZElkOnJ9PWUsbz1Cb29sZWFuKG51bGw9PW4/dm9pZCAwOm4uYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpO2lmKCFyKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKG8mJiFuLmN1cnJlbmN5Q29kZSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHMuY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKG8mJlwiZnVuY3Rpb25cIiE9dHlwZW9mKG51bGw9PT0odD1uLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkpKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50cy5idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uJyk7b3x8KHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCkpO2NvbnN0IGE9bz9uLmN1cnJlbmN5Q29kZTp0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7eWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsocixhLCExKSx0aGlzLnJlbmRlckJ1dHRvbihpLHIsbil9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9cmVuZGVyQnV0dG9uKGUsdCxuKXtjb25zdHtidXlOb3dJbml0aWFsaXplT3B0aW9uczppLHN0eWxlOnIsb25Db21wbGV0ZTpvLG9uRWxpZ2liaWxpdHlGYWlsdXJlOmF9PW4scz10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpLGQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codCkse2lzSG9zdGVkQ2hlY2tvdXRFbmFibGVkOmN9PWQuaW5pdGlhbGl6YXRpb25EYXRhfHx7fSxsPXtjcmVhdGVPcmRlcjooKT0+dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFwiYmlnY29tbWVyY2VfcGF5bWVudHNcIiksb25BcHByb3ZlOih7b3JkZXJJRDplfSk9PnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQodCxlKX0sdT17b25DbGljazooKT0+dGhpcy5oYW5kbGVDbGljayhpKSxvbkNhbmNlbDooKT0+dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKX0saD17b25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U6ZT0+dGhpcy5vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShlKSxvblNoaXBwaW5nT3B0aW9uc0NoYW5nZTplPT50aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGUpLG9uQXBwcm92ZTooZSxuKT0+dGhpcy5vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShlLG4sdCxvKX0scD1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7ZnVuZGluZ1NvdXJjZTpzLkZVTkRJTkcuUEFZUEFMLHN0eWxlOnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHIpfSxsKSxpJiZ1KSxjJiZoKSxtPXMuQnV0dG9ucyhwKTttLmlzRWxpZ2libGUoKT9tLnJlbmRlcihgIyR7ZX1gKTphJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2EoKTp0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChlKX1oYW5kbGVDbGljayhlKXtyZXR1cm4gRl8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKGUpe2NvbnN0IHQ9eWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KGUpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQodC5pZCl9fSl9b25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZSx0LG4saSl7cmV0dXJuIEZfKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighZS5vcmRlcklEKXRocm93IG5ldyBqdChrdC5NaXNzaW5nT3JkZXJJZCk7Y29uc3Qgcj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLG89eWllbGQgdC5vcmRlci5nZXQoKTt0cnl7Y29uc3QgdD10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKG8pO2lmKHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyh0KSxyLmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aD4wKXtjb25zdCBlPXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKG8pO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoZSkseWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCl9cmV0dXJuIHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSx7cGFyYW1zOnttZXRob2RJZDpufX0pLHlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG4sZS5vcmRlcklEKSxpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiZpKCksITB9Y2F0Y2goZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKGUpO3Rocm93IGV9fSl9b25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZSl7cmV0dXJuIEZfKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRBZGRyZXNzKHtjaXR5OmUuc2hpcHBpbmdBZGRyZXNzLmNpdHksY291bnRyeUNvZGU6ZS5zaGlwcGluZ0FkZHJlc3MuY291bnRyeUNvZGUscG9zdGFsQ29kZTplLnNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlLHN0YXRlT3JQcm92aW5jZUNvZGU6ZS5zaGlwcGluZ0FkZHJlc3Muc3RhdGV9KTt0cnl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKHQpLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3ModCk7Y29uc3QgZT10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKGUuaWQpLHlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpfWNhdGNoKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihlKTt0aHJvdyBlfX0pfW9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGUpe3JldHVybiBGXyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KGUuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi5pZCk7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbih0LmlkKSx5aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKX1jYXRjaChlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoZSk7dGhyb3cgZX19KX19Y29uc3QgTF89bm4oZT0+bmV3IFJfKGUsc2koZSkpLFt7aWQ6XCJiaWdjb21tZXJjZV9wYXltZW50c1wifV0pO3ZhciBCXz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBqX3tjb25zdHJ1Y3RvcihlLHQsbil7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5wYXlQYWxTZGtIZWxwZXI9bn1pbml0aWFsaXplKGUpe3JldHVybiBCXyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7YmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXI6dCxjb250YWluZXJJZDpuLG1ldGhvZElkOml9PWUse2J1eU5vd0luaXRpYWxpemVPcHRpb25zOnIsY3VycmVuY3lDb2RlOm8sbWVzc2FnaW5nQ29udGFpbmVySWQ6YX09dHx8e30scz0hIXI7aWYoIWkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFuKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighdCl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYocyYmIW8pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZihzJiZcImZ1bmN0aW9uXCIhPXR5cGVvZihudWxsPT1yP3ZvaWQgMDpyLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi4nKTtzfHwoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSk7Y29uc3QgZD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxjPXM/bzpkLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTt5aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhpLGMsITEpLHRoaXMucmVuZGVyQnV0dG9uKG4saSx0KTtjb25zdCBsPWEmJmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpO2lmKGMmJmwpe2NvbnN0IGU9ZC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhpKSx7cGF5cGFsQk5QTENvbmZpZ3VyYXRpb246dD1bXX09ZS5pbml0aWFsaXphdGlvbkRhdGF8fHt9LG49dCYmdC5maW5kKCh7aWQ6ZX0pPT5cImNhcnRcIj09PWUpO2lmKCEobnVsbD09bj92b2lkIDA6bi5zdGF0dXMpKXJldHVybjtsLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtcHAtc3R5bGUtbG9nby10eXBlXCIpLGwucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1wcC1zdHlsZS1sb2dvLXBvc2l0aW9uXCIpLGwucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1wcC1zdHlsZS10ZXh0LWNvbG9yXCIpLGwucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1wcC1zdHlsZS10ZXh0LXNpemVcIik7Y29uc3Qgcj15aWVsZCB0aGlzLnBheVBhbFNka0hlbHBlci5nZXRQYXlQYWxNZXNzYWdlcyhlLGMpO3RoaXMucmVuZGVyTWVzc2FnZXMocixhLG4pfX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1yZW5kZXJCdXR0b24oZSx0LG4pe2NvbnN0e2J1eU5vd0luaXRpYWxpemVPcHRpb25zOmksc3R5bGU6cixvbkNvbXBsZXRlOm8sb25FbGlnaWJpbGl0eUZhaWx1cmU6YX09bixzPXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCksZD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyh0KSx7aXNIb3N0ZWRDaGVja291dEVuYWJsZWQ6Y309ZC5pbml0aWFsaXphdGlvbkRhdGF8fHt9LGw9e2NyZWF0ZU9yZGVyOigpPT50aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXCJiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlclwiKSxvbkFwcHJvdmU6KHtvcmRlcklEOmV9KT0+dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudCh0LGUpfSx1PXtvbkNsaWNrOigpPT50aGlzLmhhbmRsZUNsaWNrKGkpLG9uQ2FuY2VsOigpPT50aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpfSxoPXtvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTplPT50aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGUpLG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlOmU9PnRoaXMub25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZSksb25BcHByb3ZlOihlLG4pPT50aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGUsbix0LG8pfSxwPVtzLkZVTkRJTkcuUEFZTEFURVIscy5GVU5ESU5HLkNSRURJVF07bGV0IG09ITE7cC5mb3JFYWNoKHQ9PntpZighbSl7Y29uc3Qgbj1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7ZnVuZGluZ1NvdXJjZTp0LHN0eWxlOnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHIpfSxsKSxpJiZ1KSxjJiZoKSxvPXMuQnV0dG9ucyhuKTtvLmlzRWxpZ2libGUoKT8oby5yZW5kZXIoYCMke2V9YCksbT0hMCk6YSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYSYmYSgpfX0pLG18fHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGUpfWhhbmRsZUNsaWNrKGUpe3JldHVybiBCXyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoZSl7Y29uc3QgdD15aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coZSk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dCh0LmlkKX19KX1vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShlLHQsbixpKXtyZXR1cm4gQl8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFlLm9yZGVySUQpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdPcmRlcklkKTtjb25zdCByPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCksbz15aWVsZCB0Lm9yZGVyLmdldCgpO3RyeXtjb25zdCB0PXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMobyk7aWYoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKHQpLHIubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoPjApe2NvbnN0IGU9dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMobyk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhlKSx5aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKX1yZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt9LHtwYXJhbXM6e21ldGhvZElkOm59fSkseWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobixlLm9yZGVySUQpLGkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGkmJmkoKSwhMH1jYXRjaChlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoZSk7dGhyb3cgZX19KX1vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShlKXtyZXR1cm4gQl8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldEFkZHJlc3Moe2NpdHk6ZS5zaGlwcGluZ0FkZHJlc3MuY2l0eSxjb3VudHJ5Q29kZTplLnNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxwb3N0YWxDb2RlOmUuc2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGUsc3RhdGVPclByb3ZpbmNlQ29kZTplLnNoaXBwaW5nQWRkcmVzcy5zdGF0ZX0pO3RyeXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3ModCkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyh0KTtjb25zdCBlPXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oZS5pZCkseWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCl9Y2F0Y2goZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKGUpO3Rocm93IGV9fSl9b25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZSl7cmV0dXJuIEJfKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coZS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkKTt0cnl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHQuaWQpLHlpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpfWNhdGNoKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihlKTt0aHJvdyBlfX0pfXJlbmRlck1lc3NhZ2VzKGUsdCxuKXtjb25zdCBpPXthbW91bnQ6dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2hlY2tvdXRPclRocm93KCkub3V0c3RhbmRpbmdCYWxhbmNlLHBsYWNlbWVudDpcImNhcnRcIixzdHlsZTppYyhuKX07ZS5NZXNzYWdlcyhpKS5yZW5kZXIoYCMke3R9YCl9fWNvbnN0IFVfPW5uKGU9Pm5ldyBqXyhlLHNpKGUpLENpKCkpLFt7aWQ6XCJiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlclwifV0pO3ZhciBxXz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBWX3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZT10fWluaXRpYWxpemUoZSl7cmV0dXJuIHFfKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtiaWdjb21tZXJjZV9wYXltZW50c19hcG1zOnQsY29udGFpbmVySWQ6bixtZXRob2RJZDppfT1lLHthcG06cixidXlOb3dJbml0aWFsaXplT3B0aW9uczpvLGN1cnJlbmN5Q29kZTphfT10fHx7fSxzPSEhbztpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19hcG1zXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFyKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19hcG1zLmFwbVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZihzJiYhYSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcy5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYocyYmXCJmdW5jdGlvblwiIT10eXBlb2YobnVsbD09bz92b2lkIDA6by5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkpKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19hcG1zLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi4nKTtzfHwoeWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSk7Y29uc3QgZD1zP2E6dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO3lpZWxkIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKGksZCwhMSksdGhpcy5yZW5kZXJCdXR0b24obixpLHQpfSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfXJlbmRlckJ1dHRvbihlLHQsbil7Y29uc3R7YXBtOmksYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM6cixzdHlsZTpvLG9uRWxpZ2liaWxpdHlGYWlsdXJlOmF9PW4scz10aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO2lmKCFPYmplY3QudmFsdWVzKHMuRlVORElORykuaW5jbHVkZXMoaSkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBQYXlQYWwgYnV0dG9uIGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMuYXBtXCIgYXJndW1lbnQgaXMgbm90IHZhbGlkIGZ1bmRpbmcgc291cmNlLicpO2NvbnN0IGQ9e2NyZWF0ZU9yZGVyOigpPT50aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXCJiaWdjb21tZXJjZV9wYXltZW50c19hcG1zXCIpLG9uQXBwcm92ZTooe29yZGVySUQ6ZX0pPT50aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KHQsZSl9LGM9e29uQ2xpY2s6KCk9PnRoaXMuaGFuZGxlQ2xpY2sociksb25DYW5jZWw6KCk9PnRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCl9LGw9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtmdW5kaW5nU291cmNlOmksc3R5bGU6dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUobyl9LGQpLHImJmMpLHU9cy5CdXR0b25zKGwpO3UuaXNFbGlnaWJsZSgpP3UucmVuZGVyKGAjJHtlfWApOmEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGE/YSgpOnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGUpfWhhbmRsZUNsaWNrKGUpe3JldHVybiBxXyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoZSl7Y29uc3QgdD15aWVsZCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coZSk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dCh0LmlkKX19KX19Y29uc3QgR189bm4oZT0+bmV3IFZfKGUsc2koZSkpLFt7aWQ6XCJiaWdjb21tZXJjZV9wYXltZW50c19hcG1zXCJ9XSk7dmFyIEhfPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzICRfe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlPXR9aW5pdGlhbGl6ZShlKXtyZXR1cm4gSF8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e2JpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vOnQsY29udGFpbmVySWQ6bixtZXRob2RJZDppfT1lLHtidXlOb3dJbml0aWFsaXplT3B0aW9uczpyLGN1cnJlbmN5Q29kZTpvfT10fHx7fSxhPSEhcjtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c192ZW5tb1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZihhJiYhbyl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8uY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKGEmJlwiZnVuY3Rpb25cIiE9dHlwZW9mKG51bGw9PXI/dm9pZCAwOnIuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8uYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicpO2F8fCh5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpKTtjb25zdCBzPWE/bzp0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7eWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsoaSxzLCExKSx0aGlzLnJlbmRlckJ1dHRvbihuLGksdCl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9cmVuZGVyQnV0dG9uKGUsdCxuKXtjb25zdHtidXlOb3dJbml0aWFsaXplT3B0aW9uczppLHN0eWxlOnIsb25FbGlnaWJpbGl0eUZhaWx1cmU6b309bixhPXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCkscz1hLkZVTkRJTkcuVkVOTU8sZD17Y3JlYXRlT3JkZXI6KCk9PnRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcImJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vXCIpLG9uQXBwcm92ZTooe29yZGVySUQ6ZX0pPT50aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KHQsZSl9LGM9e29uQ2xpY2s6KCk9PnRoaXMuaGFuZGxlQ2xpY2soaSksb25DYW5jZWw6KCk9PnRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCl9LGw9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtmdW5kaW5nU291cmNlOnMsc3R5bGU6dGhpcy5nZXRWYWxpZFZlbm1vQnV0dG9uU3R5bGVzKHIpfSxkKSxpJiZjKSx1PWEuQnV0dG9ucyhsKTt1LmlzRWxpZ2libGUoKT91LnJlbmRlcihgIyR7ZX1gKTpvJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBvP28oKTp0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChlKX1nZXRWYWxpZFZlbm1vQnV0dG9uU3R5bGVzKGUpe2NvbnN0IHQ9dGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoZSk7cmV0dXJuIHQuY29sb3I9PT1Xbi5nb2xkP09iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7Y29sb3I6dm9pZCAwfSk6dH1oYW5kbGVDbGljayhlKXtyZXR1cm4gSF8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKGUpe2NvbnN0IHQ9eWllbGQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KGUpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQodC5pZCl9fSl9fWNvbnN0IFdfPW5uKGU9Pm5ldyAkXyhlLHNpKGUpKSxbe2lkOlwiYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW9cIn1dKTtjbGFzcyBZX3tjb25zdHJ1Y3RvcihlLHQsbj13aW5kb3cpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuYm9sdFNjcmlwdExvYWRlcj10LHRoaXMuYm9sdEhvc3RXaW5kb3c9bn1pbml0aWFsaXplKGUpe3JldHVybiB0PXRoaXMsbj12b2lkIDAscj1mdW5jdGlvbiooKXtjb25zdHtib2x0OnQsY29udGFpbmVySWQ6bixtZXRob2RJZDppfT1lLHtidXlOb3dJbml0aWFsaXplT3B0aW9uczpyLHN0eWxlOm99PXR8fHt9O2lmKCFpKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJvbHRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIUJvb2xlYW4ocikpdGhyb3cgbmV3IG9uKFwiT25seSBidXkgbm93IGZsb3cgaXMgaW1wbGVtZW50ZWQgZm9yIEJvbHQgYnV0dG9uXCIpO2lmKCEobnVsbD09cj92b2lkIDA6ci5zdG9yZWZyb250QXBpVG9rZW4pfHxcInN0cmluZ1wiIT10eXBlb2Ygci5zdG9yZWZyb250QXBpVG9rZW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnN0b3JlZnJvbnRBcGlUb2tlblwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdCBhPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KGkpLHtpbml0aWFsaXphdGlvbkRhdGE6cyxjb25maWc6ZH09YSx7cHVibGlzaGFibGVLZXk6YyxkZXZlbG9wZXJDb25maWc6bH09c3x8e307eWllbGQgdGhpcy5ib2x0U2NyaXB0TG9hZGVyLmxvYWRCb2x0Q2xpZW50KGMsZC50ZXN0TW9kZSxsLFwiQmlnQ29tbWVyY2VcIixyLnN0b3JlZnJvbnRBcGlUb2tlbiksdGhpcy5yZW5kZXJCdXR0b24obixhLG8pfSxuZXcoKGk9dm9pZCAwKXx8KGk9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChyLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoci50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiBpP246bmV3IGkoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgocj1yLmFwcGx5KHQsbnx8W10pKS5uZXh0KCkpfSk7dmFyIHQsbixpLHJ9ZGVpbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfXJlbmRlckJ1dHRvbihlLHQsbil7dmFyIGk7XCJmdW5jdGlvblwiPT10eXBlb2YobnVsbD09PShpPXRoaXMuYm9sdEhvc3RXaW5kb3cuQm9sdENvbm5lY3QpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnNldHVwUHJvZHVjdFBhZ2VDaGVja291dCkmJih0aGlzLmFkZEJ1dHRvbkNvbnRhaW5lcihlLHQsbiksdGhpcy5ib2x0SG9zdFdpbmRvdy5Cb2x0Q29ubmVjdC5zZXR1cFByb2R1Y3RQYWdlQ2hlY2tvdXQoKSl9YWRkQnV0dG9uQ29udGFpbmVyKGUsdCxuKXtjb25zdCBpPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpO2lmKCFpKXJldHVybjtjb25zdCByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib2JqZWN0XCIpO3Iuc2V0QXR0cmlidXRlKFwiaWRcIixcInByb2R1Y3QtcGFnZS1jaGVja291dC13cmFwcGVyXCIpLHIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixcImJvbHQtYnV0dG9uLXdyYXBwZXJcIiksci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwiZGlzcGxheTpub25lXCIpLHIuc2V0QXR0cmlidXRlKFwiZGF0YS10aWRcIixcInByb2R1Y3QtcGFnZS1jaGVja291dC13cmFwcGVyXCIpLG8uc2V0QXR0cmlidXRlKFwiZGF0YVwiLHRoaXMuZ2V0Qm9sdE9iamVjdERhdGEodCxuKSksby5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFwiYm9sdC1wcm9kdWN0LWNoZWNrb3V0LWJ1dHRvblwiKSxyLmFwcGVuZChvKSxpLmlubmVySFRNTD1cIlwiLGkuYXBwZW5kKHIpfWdldEJvbHRPYmplY3REYXRhKGUsdCl7Y29uc3R7aW5pdGlhbGl6YXRpb25EYXRhOm4sY29uZmlnOml9PWUse3B1Ymxpc2hhYmxlS2V5OnIsZGV2ZWxvcGVyQ29uZmlnOm99PW58fHt9LGE9dGhpcy5ib2x0U2NyaXB0TG9hZGVyLmdldERvbWFpblVSTCghIWkudGVzdE1vZGUsbykscz10aGlzLmdldEJ1dHRvbkhlaWdodChudWxsPT10P3ZvaWQgMDp0LnNpemUpLGQ9dGhpcy5nZXRCdXR0b25Cb3JkZXJSYWRpdXMobnVsbD09dD92b2lkIDA6dC5zaGFwZSxzKTtyZXR1cm4geGUoe3VybDpgaHR0cHM6Ly8ke2F9L3YxL2NoZWNrb3V0X2J1dHRvbmAscXVlcnk6e3B1Ymxpc2hhYmxlX2tleTpyLHZhcmlhbnQ6XCJwcGNcIixoZWlnaHQ6cyxib3JkZXJfcmFkaXVzOmR9fSl9Z2V0QnV0dG9uSGVpZ2h0KGUpe2lmKGUpc3dpdGNoKGUpe2Nhc2UgVWkuU21hbGw6cmV0dXJuIDI1O2Nhc2UgVWkuTGFyZ2U6cmV0dXJuIDQ1O2Nhc2UgVWkuTWVkaXVtOmRlZmF1bHQ6cmV0dXJuIDQwfX1nZXRCdXR0b25Cb3JkZXJSYWRpdXMoZSx0KXtpZihlKXN3aXRjaChlKXtjYXNlIHFpLlBpbGw6cmV0dXJuIHQ/TWF0aC5yb3VuZCh0LzIpOnZvaWQgMDtjYXNlIHFpLlJlY3Q6ZGVmYXVsdDpyZXR1cm4gNH19fWNvbnN0IEtfPW5uKGU9Pm5ldyBZXyhlLG5ldyAkaShhKCkpKSxbe2lkOlwiYm9sdFwifV0pO2Z1bmN0aW9uIEpfKGUpe2NvbnN0e2NvbG9yOnQsZnVuZGluZ2ljb25zOm4saGVpZ2h0Omk9NDAsbGF5b3V0OnIsc2hhcGU6byxzaXplOmEsdGFnbGluZTpzfT1lfHx7fSxkPXtjb2xvcjp0LGZ1bmRpbmdpY29uczpuLGhlaWdodDpaXyhpKSxsYXlvdXQ6cixzaGFwZTpvfHxcInJlY3RcIixzaXplOmEsdGFnbGluZTpzfTtyZXR1cm4gSChkLFQpfWZ1bmN0aW9uIFpfKGUpe2NvbnN0IHQ9TnVtYmVyKGUpO3JldHVybiF0fHxOdW1iZXIuaXNOYU4odCk/NDA6dD41NT81NTp0PDI1PzI1OnR9dmFyIFFfPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIFhfe2NvbnN0cnVjdG9yKGUsdCxuLGkpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMuZm9ybVBvc3Rlcj10LHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlPW4sdGhpcy5icmFpbnRyZWVIb3N0V2luZG93PWl9aW5pdGlhbGl6ZShlKXtyZXR1cm4gUV8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e2JyYWludHJlZXBheXBhbDp0LGNvbnRhaW5lcklkOm4sbWV0aG9kSWQ6aX09ZTtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5icmFpbnRyZWVwYXlwYWxcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7bGV0IHIsbz10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtpZih0LmJ1eU5vd0luaXRpYWxpemVPcHRpb25zKXtpZighdC5jdXJyZW5jeUNvZGUpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJyYWludHJlZXBheXBhbGNyZWRpdC5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7cj10LmN1cnJlbmN5Q29kZX1lbHNlIHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCksbz10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxyPW8uZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO2NvbnN0IGE9by5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhpKSx7Y2xpZW50VG9rZW46cyxjb25maWc6ZCxpbml0aWFsaXphdGlvbkRhdGE6Y309YTtpZighc3x8IWMpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtjb25zdCBsPXtjdXJyZW5jeTpyLGludGVudDpjLmludGVudCxpc0NyZWRpdEVuYWJsZWQ6Yy5pc0NyZWRpdEVuYWJsZWR9O3RoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmluaXRpYWxpemUocykseWllbGQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5cGFsQ2hlY2tvdXQobCxlPT57dGhpcy5yZW5kZXJQYXlQYWxCdXR0b24oZSx0LG4saSwhIWQudGVzdE1vZGUpfSxlPT50aGlzLmhhbmRsZUVycm9yKGUsbix0Lm9uRXJyb3IpKX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBRXyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UudGVhcmRvd24oKX0pfXJlbmRlclBheVBhbEJ1dHRvbihlLHQsbixpLHIpe2NvbnN0e3N0eWxlOm8sc2hvdWxkUHJvY2Vzc1BheW1lbnQ6YSxvbkF1dGhvcml6ZUVycm9yOnMsb25FbGlnaWJpbGl0eUZhaWx1cmU6ZH09dCx7cGF5cGFsOmN9PXRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdztpZihjKXtjb25zdCBsPWMuQnV0dG9ucyh7ZW52OnI/XCJzYW5kYm94XCI6XCJwcm9kdWN0aW9uXCIsZnVuZGluZ1NvdXJjZTpjLkZVTkRJTkcuUEFZUEFMLHN0eWxlOkpfKG8pLGNyZWF0ZU9yZGVyOigpPT50aGlzLnNldHVwUGF5bWVudChlLHQsaSksb25BcHByb3ZlOnQ9PnRoaXMudG9rZW5pemVQYXltZW50KHQsZSxpLGEscyl9KTtsLmlzRWxpZ2libGUoKT9sLnJlbmRlcihgIyR7bn1gKTpkJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBkJiZkKCl9ZWxzZSB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KG4pfXNldHVwUGF5bWVudChlLHQsbil7dmFyIGk7cmV0dXJuIFFfKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtvblBheW1lbnRFcnJvcjpyLHNoaXBwaW5nQWRkcmVzczpvLGJ1eU5vd0luaXRpYWxpemVPcHRpb25zOmF9PXQ7dHJ5e2NvbnN0IHI9XCJmdW5jdGlvblwiPT10eXBlb2YobnVsbD09YT92b2lkIDA6YS5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkpP3lpZWxkIHRoaXMuY3JlYXRlQnV5Tm93Q2FydChhLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSgpKTp2b2lkIDA7dGhpcy5idXlOb3dDYXJ0SWQ9bnVsbD09cj92b2lkIDA6ci5pZDtjb25zdCBzPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGQ9cy5nZXRDdXN0b21lcigpLGM9cy5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhuKSxsPXI/ci5jYXJ0QW1vdW50OnMuZ2V0Q2FydE9yVGhyb3coKS5jYXJ0QW1vdW50LHU9cj90LmN1cnJlbmN5Q29kZTpzLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSxoPW98fChudWxsPT1kP3ZvaWQgMDpkLmFkZHJlc3Nlc1swXSkscD1oP2xsKGgpOnZvaWQgMDtyZXR1cm4geWllbGQgZS5jcmVhdGVQYXltZW50KHtmbG93OlwiY2hlY2tvdXRcIixlbmFibGVTaGlwcGluZ0FkZHJlc3M6ITAsc2hpcHBpbmdBZGRyZXNzRWRpdGFibGU6ITEsc2hpcHBpbmdBZGRyZXNzT3ZlcnJpZGU6cCxhbW91bnQ6bCxjdXJyZW5jeTp1LG9mZmVyQ3JlZGl0OiExLGludGVudDpudWxsPT09KGk9Yy5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmludGVudH0pfWNhdGNoKGUpe3Rocm93IHImJihDbihlKXx8ZSBpbnN0YW5jZW9mIEJ0KSYmcihlKSxlfX0pfXRva2VuaXplUGF5bWVudChlLHQsbixpLHIpe3JldHVybiBRXyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0e2RldmljZURhdGE6cn09eWllbGQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0RGF0YUNvbGxlY3Rvcih7cGF5cGFsOiEwfSksbz15aWVsZCB0LnRva2VuaXplUGF5bWVudChlKSx7ZGV0YWlsczphLG5vbmNlOnN9PW8sZD10aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5tYXBUb0xlZ2FjeUJpbGxpbmdBZGRyZXNzKGEpLGM9dGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UubWFwVG9MZWdhY3lTaGlwcGluZ0FkZHJlc3MoYSk7cmV0dXJuIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybShcIi9jaGVja291dC5waHBcIixPYmplY3QuYXNzaWduKHtwYXltZW50X3R5cGU6XCJwYXlwYWxcIixwcm92aWRlcjpuLGFjdGlvbjppP1wicHJvY2Vzc19wYXltZW50XCI6XCJzZXRfZXh0ZXJuYWxfY2hlY2tvdXRcIixub25jZTpzLGRldmljZV9kYXRhOnIsYmlsbGluZ19hZGRyZXNzOkpTT04uc3RyaW5naWZ5KGQpLHNoaXBwaW5nX2FkZHJlc3M6SlNPTi5zdHJpbmdpZnkoYyl9LHRoaXMuYnV5Tm93Q2FydElkJiZ7Y2FydF9pZDp0aGlzLmJ1eU5vd0NhcnRJZH0pKSxvfWNhdGNoKGUpe3Rocm93IHImJihDbihlKXx8ZSBpbnN0YW5jZW9mIEJ0KSYmcihlKSxlfX0pfWNyZWF0ZUJ1eU5vd0NhcnQoZSl7cmV0dXJuIFFfKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighZSl0aHJvdyBuZXcganQoa3QuTWlzc2luZ0NhcnQpO3RyeXtyZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnQoZSl9Y2F0Y2goZSl7dGhyb3cgbmV3IGpufX0pfWhhbmRsZUVycm9yKGUsdCxuKXtpZih0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KHQpLCFufHwhQ24oZSkpdGhyb3cgZTtuKGUpfX1jb25zdCBldz1ubihlPT57Y29uc3QgdD13aW5kb3csbj1uZXcgcG4oZSksaT1uZXcgb3IobmV3IERuKGEoKSx0LG4pLHQpO3JldHVybiBuZXcgWF8oZSxFZSgpLGksdCl9LFt7aWQ6XCJicmFpbnRyZWVwYXlwYWxcIn1dKTt2YXIgdHc9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3Mgbnd7Y29uc3RydWN0b3IoZSx0LG4saSxyKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmZvcm1Qb3N0ZXI9dCx0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZT1uLHRoaXMuYnJhaW50cmVlTWVzc2FnZXM9aSx0aGlzLmJyYWludHJlZUhvc3RXaW5kb3c9cn1pbml0aWFsaXplKGUpe3ZhciB0LG47cmV0dXJuIHR3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHticmFpbnRyZWVwYXlwYWxjcmVkaXQ6aSxjb250YWluZXJJZDpyLG1ldGhvZElkOm99PWU7aWYoIW8pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFyKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighaSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYnJhaW50cmVlcGF5cGFsY3JlZGl0XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2xldCBhLHM9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7aWYoaS5idXlOb3dJbml0aWFsaXplT3B0aW9ucyl7aWYoIWkuY3VycmVuY3lDb2RlKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5icmFpbnRyZWVwYXlwYWxjcmVkaXQuY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2E9aS5jdXJyZW5jeUNvZGV9ZWxzZSB5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpLHM9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksYT1zLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtjb25zdCBkPXMuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobykse2NsaWVudFRva2VuOmMsY29uZmlnOmwsaW5pdGlhbGl6YXRpb25EYXRhOnV9PWQ7aWYoIWN8fCF1KXRocm93IG5ldyBqdChrdC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3QgaD17Y3VycmVuY3k6YSxpbnRlbnQ6dS5pbnRlbnQsaXNDcmVkaXRFbmFibGVkOnUuaXNDcmVkaXRFbmFibGVkfSxwPWNuKG51bGwhPT0obj1udWxsPT09KHQ9cy5nZXRTdG9yZUNvbmZpZygpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzKSYmdm9pZCAwIT09bj9uOnt9LFwiUEFZUEFMLTU2NjMuaGlkZV9icmFpbnRyZWVfY2FyZF9iYW5uZXJfaW1wbGVtZW50YXRpb25faW5fY2hlY2tvdXRfc2RrXCIpO3RoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmluaXRpYWxpemUoYykseWllbGQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5cGFsQ2hlY2tvdXQoaCxlPT57IXAmJmkubWVzc2FnaW5nQ29udGFpbmVySWQmJnRoaXMucmVuZGVyUGF5UGFsTWVzc2FnZXMobyxpLm1lc3NhZ2luZ0NvbnRhaW5lcklkKSx0aGlzLnJlbmRlclBheVBhbEJ1dHRvbihlLGkscixvLCEhbC50ZXN0TW9kZSl9LGU9PnRoaXMuaGFuZGxlRXJyb3IoZSxyLGkub25FcnJvcikpfSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIHR3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS50ZWFyZG93bigpfSl9cmVuZGVyUGF5UGFsTWVzc2FnZXMoZSx0KXt0aGlzLmJyYWludHJlZU1lc3NhZ2VzLnJlbmRlcihlLHQsaXIuQ0FSVCl9cmVuZGVyUGF5UGFsQnV0dG9uKGUsdCxuLGkscil7Y29uc3R7c3R5bGU6byxzaG91bGRQcm9jZXNzUGF5bWVudDphLG9uQXV0aG9yaXplRXJyb3I6cyxvbkVsaWdpYmlsaXR5RmFpbHVyZTpkfT10LHtwYXlwYWw6Y309dGhpcy5icmFpbnRyZWVIb3N0V2luZG93O2xldCBsPSExO2MmJltjLkZVTkRJTkcuUEFZTEFURVIsYy5GVU5ESU5HLkNSRURJVF0uZm9yRWFjaCh1PT57Y29uc3QgaD11PT09Yy5GVU5ESU5HLkNSRURJVD9PYmplY3QuYXNzaWduKHtsYWJlbDp0ci5DUkVESVR9LEpfKG8pKTpKXyhvKTtpZighbCl7Y29uc3Qgbz1jLkJ1dHRvbnMoe2VudjpyP1wic2FuZGJveFwiOlwicHJvZHVjdGlvblwiLGZ1bmRpbmdTb3VyY2U6dSxzdHlsZTpoLGNyZWF0ZU9yZGVyOigpPT50aGlzLnNldHVwUGF5bWVudChlLHQsaSksb25BcHByb3ZlOnQ9PnRoaXMudG9rZW5pemVQYXltZW50KHQsZSxpLGEscyl9KTtvLmlzRWxpZ2libGUoKT8oby5yZW5kZXIoYCMke259YCksbD0hMCk6Yy5GVU5ESU5HLkNSRURJVCYmZCYmXCJmdW5jdGlvblwiPT10eXBlb2YgZCYmZCgpfX0pLGMmJmx8fHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQobil9c2V0dXBQYXltZW50KGUsdCxuKXt2YXIgaTtyZXR1cm4gdHcodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e29uUGF5bWVudEVycm9yOnIsc2hpcHBpbmdBZGRyZXNzOm8sYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM6YX09dDt0cnl7Y29uc3Qgcj1cImZ1bmN0aW9uXCI9PXR5cGVvZihudWxsPT1hP3ZvaWQgMDphLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSk/eWllbGQgdGhpcy5jcmVhdGVCdXlOb3dDYXJ0KGEuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KCkpOnZvaWQgMDt0aGlzLmJ1eU5vd0NhcnRJZD1udWxsPT1yP3ZvaWQgMDpyLmlkO2NvbnN0IHM9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksZD1zLmdldEN1c3RvbWVyKCksYz1zLmdldFBheW1lbnRNZXRob2RPclRocm93KG4pLGw9cj9yLmNhcnRBbW91bnQ6cy5nZXRDYXJ0T3JUaHJvdygpLmNhcnRBbW91bnQsdT1yP3QuY3VycmVuY3lDb2RlOnMuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlLGg9b3x8KG51bGw9PWQ/dm9pZCAwOmQuYWRkcmVzc2VzWzBdKSxwPWg/bGwoaCk6dm9pZCAwO3JldHVybiB5aWVsZCBlLmNyZWF0ZVBheW1lbnQoe2Zsb3c6XCJjaGVja291dFwiLGVuYWJsZVNoaXBwaW5nQWRkcmVzczohMCxzaGlwcGluZ0FkZHJlc3NFZGl0YWJsZTohMSxzaGlwcGluZ0FkZHJlc3NPdmVycmlkZTpwLGFtb3VudDpsLGN1cnJlbmN5OnUsb2ZmZXJDcmVkaXQ6ITAsaW50ZW50Om51bGw9PT0oaT1jLmluaXRpYWxpemF0aW9uRGF0YSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuaW50ZW50fSl9Y2F0Y2goZSl7dGhyb3cgciYmKENuKGUpfHxlIGluc3RhbmNlb2YgQnQpJiZyKGUpLGV9fSl9dG9rZW5pemVQYXltZW50KGUsdCxuLGkscil7cmV0dXJuIHR3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7Y29uc3R7ZGV2aWNlRGF0YTpyfT15aWVsZCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXREYXRhQ29sbGVjdG9yKHtwYXlwYWw6ITB9KSxvPXlpZWxkIHQudG9rZW5pemVQYXltZW50KGUpLHtkZXRhaWxzOmEsbm9uY2U6c309byxkPXRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLm1hcFRvTGVnYWN5QmlsbGluZ0FkZHJlc3MoYSksYz10aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5tYXBUb0xlZ2FjeVNoaXBwaW5nQWRkcmVzcyhhKTtyZXR1cm4gdGhpcy5mb3JtUG9zdGVyLnBvc3RGb3JtKFwiL2NoZWNrb3V0LnBocFwiLE9iamVjdC5hc3NpZ24oe3BheW1lbnRfdHlwZTpcInBheXBhbFwiLHByb3ZpZGVyOm4sYWN0aW9uOmk/XCJwcm9jZXNzX3BheW1lbnRcIjpcInNldF9leHRlcm5hbF9jaGVja291dFwiLG5vbmNlOnMsZGV2aWNlX2RhdGE6cixiaWxsaW5nX2FkZHJlc3M6SlNPTi5zdHJpbmdpZnkoZCksc2hpcHBpbmdfYWRkcmVzczpKU09OLnN0cmluZ2lmeShjKX0sdGhpcy5idXlOb3dDYXJ0SWQmJntjYXJ0X2lkOnRoaXMuYnV5Tm93Q2FydElkfSkpLG99Y2F0Y2goZSl7dGhyb3cgciYmKENuKGUpfHxlIGluc3RhbmNlb2YgQnQpJiZyKGUpLGV9fSl9Y3JlYXRlQnV5Tm93Q2FydChlKXtyZXR1cm4gdHcodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFlKXRocm93IG5ldyBqdChrdC5NaXNzaW5nQ2FydCk7dHJ5e3JldHVybiB5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydChlKX1jYXRjaChlKXt0aHJvdyBuZXcgam59fSl9aGFuZGxlRXJyb3IoZSx0LG4pe2lmKHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQodCksIW58fCFDbihlKSl0aHJvdyBlO24oZSl9fWNvbnN0IGl3PW5uKGU9Pntjb25zdCB0PXdpbmRvdyxuPW5ldyBwbihlKSxpPW5ldyBvcihuZXcgRG4oYSgpLHQsbiksdCkscj1uZXcgYWwoZSk7cmV0dXJuIG5ldyBudyhlLEVlKCksaSxyLHQpfSxbe2lkOlwiYnJhaW50cmVlcGF5cGFsY3JlZGl0XCJ9XSk7dmFyIHJ3PWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIG93e2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmZvcm1Qb3N0ZXI9dCx0aGlzLmJyYWludHJlZVNkaz1ufWluaXRpYWxpemUoZSl7cmV0dXJuIHJ3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtjb250YWluZXJJZDp0LG1ldGhvZElkOm59PWU7aWYoIW4pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCF0KXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2Qobik7Y29uc3QgaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx7Y2xpZW50VG9rZW46cixpbml0aWFsaXphdGlvbkRhdGE6byxjb25maWc6YX09aS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhuKTtpZighcnx8IW8pdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTt0aGlzLmJyYWludHJlZVNkay5pbml0aWFsaXplKHIpO2NvbnN0IHM9eWllbGQgdGhpcy5icmFpbnRyZWVTZGsuZ2V0QnJhaW50cmVlVmlzYUNoZWNrb3V0KCkse2N1cnJlbmN5Ontjb2RlOmR9LGNhcnRBbW91bnQ6Y309aS5nZXRDYXJ0T3JUaHJvdygpLGw9eWllbGQgdGhpcy5icmFpbnRyZWVTZGsuZ2V0VmlzYUNoZWNrb3V0U2RrKGEudGVzdE1vZGUpLHU9cy5jcmVhdGVJbml0T3B0aW9ucyh7cGF5bWVudFJlcXVlc3Q6e2N1cnJlbmN5Q29kZTpkLHN1YnRvdGFsOlN0cmluZyhjKX0sc2V0dGluZ3M6e3NoaXBwaW5nOntjb2xsZWN0U2hpcHBpbmc6ITB9fX0pO3RoaXMuY3JlYXRlU2lnbkluQnV0dG9uKHQpLHlpZWxkIGwuaW5pdCh1KSxsLm9uKFwicGF5bWVudC5zdWNjZXNzXCIsZT0+cncodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucGF5bWVudFN1Y2Nlc3MocyxlKX0pKX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1wYXltZW50U3VjY2VzcyhlLHQpe3JldHVybiBydyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIFByb21pc2UuYWxsKFtlLnRva2VuaXplKHQpLHRoaXMuYnJhaW50cmVlU2RrLmdldERhdGFDb2xsZWN0b3JPclRocm93KCldKS50aGVuKChbZSx0XSk9Pntjb25zdCBuPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGk9bi5nZXRTaGlwcGluZ0FkZHJlc3MoKSxyPW4uZ2V0QmlsbGluZ0FkZHJlc3MoKSx7c2hpcHBpbmdBZGRyZXNzOm89dGhpcy50b1Zpc2FDaGVja291dEFkZHJlc3MoaSksYmlsbGluZ0FkZHJlc3M6YT10aGlzLnRvVmlzYUNoZWNrb3V0QWRkcmVzcyhyKX09ZTtyZXR1cm4gdGhpcy5wb3N0Rm9ybShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3NoaXBwaW5nQWRkcmVzczpvLGJpbGxpbmdBZGRyZXNzOmF9KSx0KX0pfSl9cG9zdEZvcm0oZSx0KXtjb25zdHt1c2VyRGF0YTpuLGJpbGxpbmdBZGRyZXNzOmksc2hpcHBpbmdBZGRyZXNzOnIsZGV0YWlsczpvfT1lLHt1c2VyRW1haWw6YX09bix7ZGV2aWNlRGF0YTpzfT10O3JldHVybiB0aGlzLmZvcm1Qb3N0ZXIucG9zdEZvcm0oXCIvY2hlY2tvdXQucGhwXCIse3BheW1lbnRfdHlwZTplLnR5cGUsbm9uY2U6ZS5ub25jZSxwcm92aWRlcjpcImJyYWludHJlZXZpc2FjaGVja291dFwiLGFjdGlvbjpcInNldF9leHRlcm5hbF9jaGVja291dFwiLGRldmljZV9kYXRhOnMsY2FyZF9pbmZvcm1hdGlvbjpKU09OLnN0cmluZ2lmeSh7dHlwZTpvLmNhcmRUeXBlLG51bWJlcjpvLmxhc3RUd299KSxiaWxsaW5nX2FkZHJlc3M6SlNPTi5zdHJpbmdpZnkodGhpcy5nZXRBZGRyZXNzKGEsaSkpLHNoaXBwaW5nX2FkZHJlc3M6SlNPTi5zdHJpbmdpZnkodGhpcy5nZXRBZGRyZXNzKGEscikpfSl9dG9WaXNhQ2hlY2tvdXRBZGRyZXNzKGUpe3JldHVybiBlP3tmaXJzdE5hbWU6ZS5maXJzdE5hbWUsbGFzdE5hbWU6ZS5sYXN0TmFtZSxwaG9uZU51bWJlcjplLnBob25lLHN0cmVldEFkZHJlc3M6ZS5hZGRyZXNzMSxleHRlbmRlZEFkZHJlc3M6ZS5hZGRyZXNzMixsb2NhbGl0eTplLmNpdHkscmVnaW9uOmUuc3RhdGVPclByb3ZpbmNlQ29kZSxjb3VudHJ5Q29kZTplLmNvdW50cnlDb2RlLHBvc3RhbENvZGU6ZS5wb3N0YWxDb2RlfTp7fX1nZXRBZGRyZXNzKGUsdD17fSl7cmV0dXJue2VtYWlsOmUsZmlyc3RfbmFtZTp0LmZpcnN0TmFtZSxsYXN0X25hbWU6dC5sYXN0TmFtZSxwaG9uZV9udW1iZXI6dC5waG9uZU51bWJlcixhZGRyZXNzX2xpbmVfMTp0LnN0cmVldEFkZHJlc3MsYWRkcmVzc19saW5lXzI6dC5leHRlbmRlZEFkZHJlc3MsY2l0eTp0LmxvY2FsaXR5LHN0YXRlOnQucmVnaW9uLGNvdW50cnlfY29kZTp0LmNvdW50cnlDb2RlLHBvc3RhbF9jb2RlOnQucG9zdGFsQ29kZX19Y3JlYXRlU2lnbkluQnV0dG9uKGUpe2NvbnN0IHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7ZX1gKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJOZWVkIGEgY29udGFpbmVyIHRvIHBsYWNlIHRoZSBidXR0b25cIik7cmV0dXJuIHRoaXMuaW5zZXJ0VmlzYUNoZWNrb3V0QnV0dG9uKHQpfWluc2VydFZpc2FDaGVja291dEJ1dHRvbihlKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIHQuc3R5bGUuZGlzcGxheT1cImZsZXhcIix0LnN0eWxlLmZsZXhEaXJlY3Rpb249XCJjb2x1bW5cIix0LnN0eWxlLmFsaWduSXRlbXM9XCJmbGV4LWVuZFwiLHQuaW5uZXJIVE1MPSdcXG4gICAgICAgICAgICA8aW1nXFxuICAgICAgICAgICAgICAgIGFsdD1cIlZpc2EgQ2hlY2tvdXRcIlxcbiAgICAgICAgICAgICAgICBjbGFzcz1cInYtYnV0dG9uXCJcXG4gICAgICAgICAgICAgICAgcm9sZT1cImJ1dHRvblwiXFxuICAgICAgICAgICAgICAgIHNyYz1cImh0dHBzOi8vc2VjdXJlLmNoZWNrb3V0LnZpc2EuY29tL3dhbGxldC1zZXJ2aWNlcy13ZWIveG8vYnV0dG9uLnBuZz9hY2NlcHRDYW5hZGlhblZpc2FEZWJpdD1mYWxzZSZjb2JyYW5kPXRydWUmaGVpZ2h0PTM0JndpZHRoPTE3OFwiXFxuICAgICAgICAgICAgICAgIC8+XFxuICAgICAgICAgICAgPGEgY2xhc3M9XCJ2LWxlYXJuIHYtbGVhcm4tZGVmYXVsdFwiIHN0eWxlPVwidGV4dC1hbGlnbjogcmlnaHQ7IGRpc3BsYXk6IGJsb2NrOyBmb250LXNpemU6IDEwcHg7IGNvbG9yOiAjMDAzMzY2O1wiIGhyZWY9XCIjXCIgZGF0YS1sb2NhbGU9XCJlbl9VU1wiPlRlbGwgTWUgTW9yZTwvYT4nLGUuYXBwZW5kQ2hpbGQodCksdH19Y29uc3QgYXc9bm4oZT0+e2NvbnN0IHQ9d2luZG93LG49bmV3IHBuKGUpLGk9bmV3IEVuKG5ldyBEbihhKCksdCxuKSk7cmV0dXJuIG5ldyBvdyhlLEVlKCksaSl9LFt7aWQ6XCJicmFpbnRyZWV2aXNhY2hlY2tvdXRcIn1dKTtmdW5jdGlvbiBzdyhlKXtjb25zdHtiaWxsaW5nQWRkcmVzczp0LGVtYWlsOm4sZmlyc3ROYW1lOmksbGFzdE5hbWU6cixwaG9uZTpvLHNoaXBwaW5nQWRkcmVzczphfT1lLHM9dHx8YTtyZXR1cm57ZW1haWw6bixmaXJzdF9uYW1lOmksbGFzdF9uYW1lOnIscGhvbmVfbnVtYmVyOm8sYWRkcmVzc19saW5lXzE6bnVsbD09cz92b2lkIDA6cy5saW5lMSxhZGRyZXNzX2xpbmVfMjpudWxsPT1zP3ZvaWQgMDpzLmxpbmUyLGNpdHk6bnVsbD09cz92b2lkIDA6cy5jaXR5LHN0YXRlOm51bGw9PXM/dm9pZCAwOnMuc3RhdGUsY291bnRyeV9jb2RlOm51bGw9PXM/dm9pZCAwOnMuY291bnRyeUNvZGUscG9zdGFsX2NvZGU6bnVsbD09cz92b2lkIDA6cy5wb3N0YWxDb2RlfX1mdW5jdGlvbiBkdyhlKXtjb25zdHtlbWFpbDp0LHBob25lOm4sc2hpcHBpbmdBZGRyZXNzOml9PWUscj0obnVsbD09aT92b2lkIDA6aS5yZWNpcGllbnROYW1lKXx8XCJcIixbbyxhXT1yLnNwbGl0KFwiIFwiKTtyZXR1cm57ZW1haWw6dCxmaXJzdF9uYW1lOm98fFwiXCIsbGFzdF9uYW1lOmF8fFwiXCIscGhvbmVfbnVtYmVyOm4sYWRkcmVzc19saW5lXzE6bnVsbD09aT92b2lkIDA6aS5saW5lMSxhZGRyZXNzX2xpbmVfMjpudWxsPT1pP3ZvaWQgMDppLmxpbmUyLGNpdHk6bnVsbD09aT92b2lkIDA6aS5jaXR5LHN0YXRlOm51bGw9PWk/dm9pZCAwOmkuc3RhdGUsY291bnRyeV9jb2RlOm51bGw9PWk/dm9pZCAwOmkuY291bnRyeUNvZGUscG9zdGFsX2NvZGU6bnVsbD09aT92b2lkIDA6aS5wb3N0YWxDb2RlfX12YXIgY3c9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y29uc3QgbHc9ZT0+e2NvbnN0e2NvbG9yOnQsaGVpZ2h0Om59PWU7cmV0dXJue2JhY2tncm91bmRDb2xvcjooaT10fHxcIlwiLGk9PT1lci5XSElURT9cIiNGRkZGRkZcIjpcIiMzRDk1Q0VcIiksYmFja2dyb3VuZFBvc2l0aW9uOlwiNTAlIDUwJVwiLGJhY2tncm91bmRTaXplOlwiODBweCBhdXRvXCIsYmFja2dyb3VuZEltYWdlOmB1cmwoXCIvYXBwL2Fzc2V0cy9pbWcvcGF5bWVudC1wcm92aWRlcnMvdmVubW8tbG9nby0ke3Q9PT1lci5XSElURT9lci5CTFVFOmVyLldISVRFfS5zdmdcIilgLGJhY2tncm91bmRSZXBlYXQ6XCJuby1yZXBlYXRcIixib3JkZXJSYWRpdXM6XCI0cHhcIixjdXJzb3I6XCJwb2ludGVyXCIsdHJhbnNpdGlvbjpcIjAuMnMgZWFzZVwiLG1pbkhlaWdodDpgJHtufHw0MH1weGAsbWluV2lkdGg6XCIxNTBweFwiLGhlaWdodDpcIjEwMCVcIix3aWR0aDpcIjEwMCVcIixib3JkZXI6dD09PWVyLldISVRFP1wiMXB4IHNvbGlkIGJsYWNrXCI6XCJub25lXCJ9O3ZhciBpfTtjbGFzcyB1d3tjb25zdHJ1Y3RvcihlLHQsbil7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5mb3JtUG9zdGVyPXQsdGhpcy5icmFpbnRyZWVTZGs9bix0aGlzLm9uRXJyb3I9Vn1pbml0aWFsaXplKGUpe3JldHVybiBjdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7YnJhaW50cmVldmVubW86dCxjb250YWluZXJJZDpuLG1ldGhvZElkOml9PWU7aWYoIWkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0IHI9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coaSkse2NsaWVudFRva2VuOm8saW5pdGlhbGl6YXRpb25EYXRhOmF9PXIse3BheW1lbnRCdXR0b25TdHlsZXM6c309YSx7Y2FydEJ1dHRvblN0eWxlczpkfT1zfHx7fSxjPShudWxsPT10P3ZvaWQgMDp0LnN0eWxlKXx8ZDtpZighb3x8IWEpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtpZighbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSx0aGlzLm9uRXJyb3I9KG51bGw9PXQ/dm9pZCAwOnQub25FcnJvcil8fHRoaXMuaGFuZGxlRXJyb3IsdGhpcy5icmFpbnRyZWVTZGsuaW5pdGlhbGl6ZShvKTt0cnl7Y29uc3QgZT15aWVsZCB0aGlzLmJyYWludHJlZVNkay5nZXRWZW5tb0NoZWNrb3V0T3JUaHJvdygpO3RoaXMucmVuZGVyVmVubW9CdXR0b24oZSxuLG51bGw9PXQ/dm9pZCAwOnQuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsYyl9Y2F0Y2goZSl7KGNsKGUpfHxmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG1ufShlKSkmJnRoaXMuaGFuZGxlSW5pdGlhbGl6YXRpb25WZW5tb0Vycm9yKGUsbil9fSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIGN3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5icmFpbnRyZWVTZGsuZGVpbml0aWFsaXplKCksUHJvbWlzZS5yZXNvbHZlKCl9KX1oYW5kbGVFcnJvcihlKXt0aHJvdyBuZXcgRXJyb3IoZS5tZXNzYWdlKX1jcmVhdGVCdXlOb3dDYXJ0KGUpe3JldHVybiBjdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YobnVsbD09ZT92b2lkIDA6ZS5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkpKXtjb25zdCB0PW51bGw9PWU/dm9pZCAwOmUuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KCk7aWYoIXQpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdDYXJ0KTt0cnl7cmV0dXJuIHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0KHQpfWNhdGNoKGUpe3Rocm93IG5ldyBqbn19fSl9aGFuZGxlSW5pdGlhbGl6YXRpb25WZW5tb0Vycm9yKGUsdCl7cmV0dXJuIHRoaXMucmVtb3ZlVmVubW9Db250YWluZXIodCksdGhpcy5vbkVycm9yKGUpfXJlbW92ZVZlbm1vQ29udGFpbmVyKGUpe2NvbnN0IHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSk7dCYmdC5yZW1vdmUoKX1yZW5kZXJWZW5tb0J1dHRvbihlLHQsbixpKXtjb25zdCByPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQpLHtjb2xvcjpvfT1pfHx7fTtpZighcil0aHJvdyBuZXcgcm4oXCJVbmFibGUgdG8gY3JlYXRlIHdhbGxldCBidXR0b24gd2l0aG91dCB2YWxpZCBjb250YWluZXIgSUQuXCIpO3Iuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLFwiVmVubW9cIiksT2JqZWN0LmFzc2lnbihyLnN0eWxlLGx3KGl8fHt9KSksci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKT0+Y3codGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3Iuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcInRydWVcIik7Y29uc3QgdD15aWVsZCB0aGlzLmNyZWF0ZUJ1eU5vd0NhcnQobik7ZS50b2tlbml6ZSYmZS50b2tlbml6ZSgoZSxuKT0+Y3codGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3IucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiksZSYmdGhpcy5vbkVycm9yKGUpLHlpZWxkIHRoaXMuaGFuZGxlUG9zdEZvcm0obixudWxsPT10P3ZvaWQgMDp0LmlkKX0pKX0pKSxvPT09ZXIuQkxVRSYmKHIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwoKT0+e3Iuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwiIzBhN2ZjMlwifSksci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCgpPT57ci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9bHcoaXx8e30pLmJhY2tncm91bmRDb2xvcn0pKX1oYW5kbGVQb3N0Rm9ybShlLHQpe3JldHVybiBjdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7ZGV2aWNlRGF0YTpufT15aWVsZCB0aGlzLmJyYWludHJlZVNkay5nZXREYXRhQ29sbGVjdG9yT3JUaHJvdygpLHtub25jZTppLGRldGFpbHM6cn09ZTt0aGlzLmZvcm1Qb3N0ZXIucG9zdEZvcm0oXCIvY2hlY2tvdXQucGhwXCIsT2JqZWN0LmFzc2lnbih7bm9uY2U6aSxwcm92aWRlcjpcImJyYWludHJlZXZlbm1vXCIscGF5bWVudF90eXBlOlwicGF5cGFsXCIsZGV2aWNlX2RhdGE6bixhY3Rpb246XCJzZXRfZXh0ZXJuYWxfY2hlY2tvdXRcIixiaWxsaW5nX2FkZHJlc3M6SlNPTi5zdHJpbmdpZnkoc3cocikpLHNoaXBwaW5nX2FkZHJlc3M6SlNPTi5zdHJpbmdpZnkoZHcocikpfSx0JiZ7Y2FydF9pZDp0fSkpfSl9fWNvbnN0IGh3PW5uKGU9Pntjb25zdCB0PXdpbmRvdyxuPWEoKSxpPW5ldyBwbihlKSxyPW5ldyBEbihuLHQsaSksbz1uZXcgRW4ocik7cmV0dXJuIG5ldyB1dyhlLEVlKCksbyl9LFt7aWQ6XCJicmFpbnRyZWV2ZW5tb1wifV0pO3ZhciBwdz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIGEoZSl7dHJ5e2QoaS5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKGkudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihhLHMpfWQoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBtd3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yPXR9aW5pdGlhbGl6ZShlKXt2YXIgdCxuO3JldHVybiBwdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIWUubWV0aG9kSWR8fCFxcihlLm1ldGhvZElkKSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGlzIG5vdCBhIHZhbGlkIGtleS4nKTtpZih0aGlzLl9tZXRob2RJZD1lLm1ldGhvZElkLCFlLmNvbnRhaW5lcklkKXRocm93IG5ldyBybignVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcImNvbnRhaW5lcklkXCIgaXMgbm90IGEgdmFsaWQga2V5LicpO2NvbnN0IGk9ZVt0aGlzLl9nZXRNZXRob2RPclRocm93KCldO2lmKCFpKXRocm93IG5ldyBybihcIlVuYWJsZSB0byBwcm9jZWVkIHdpdGhvdXQgdmFsaWQgb3B0aW9ucy5cIik7Y29uc3R7YnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM6cixjdXJyZW5jeUNvZGU6byxidXR0b25Db2xvcjphLGJ1dHRvblR5cGU6cyxvbkVycm9yOmR9PWk7bGV0IGMsbD10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7dHJ5e2M9bC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyh0aGlzLl9nZXRNZXRob2RPclRocm93KCkpfWNhdGNoKGUpe2w9eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZCh0aGlzLl9nZXRNZXRob2RPclRocm93KCkpLGM9bC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyh0aGlzLl9nZXRNZXRob2RPclRocm93KCkpfWlmKHRoaXMuX2NvdW50cnlDb2RlPW51bGw9PT0odD1jLmluaXRpYWxpemF0aW9uRGF0YSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc3RvcmVDb3VudHJ5LHIpe2lmKCFvKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7dGhpcy5fY3VycmVuY3lDb2RlPW8sdGhpcy5fYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM9cix5aWVsZCB0aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yLmluaXRpYWxpemUoKCk9PmMsdGhpcy5fZ2V0R29vZ2xlUGF5Q2xpZW50T3B0aW9ucygpLCEhcixvKX1lbHNlIHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpLHlpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3IuaW5pdGlhbGl6ZSgoKT0+Yyx0aGlzLl9nZXRHb29nbGVQYXlDbGllbnRPcHRpb25zKCkpO3RoaXMuX3BheW1lbnRCdXR0b249bnVsbCE9PShuPXRoaXMuX3BheW1lbnRCdXR0b24pJiZ2b2lkIDAhPT1uP246dGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5hZGRQYXltZW50QnV0dG9uKGUuY29udGFpbmVySWQse2J1dHRvbkNvbG9yOm51bGwhPWE/YTpcImRlZmF1bHRcIixidXR0b25UeXBlOm51bGwhPXM/czpcInBsYWluXCIsb25DbGljazp0aGlzLl9oYW5kbGVDbGljayhkKX0pfSl9ZGVpbml0aWFsaXplKCl7dmFyIGU7cmV0dXJuIG51bGw9PT0oZT10aGlzLl9wYXltZW50QnV0dG9uKXx8dm9pZCAwPT09ZXx8ZS5yZW1vdmUoKSx0aGlzLl9wYXltZW50QnV0dG9uPXZvaWQgMCx0aGlzLl9tZXRob2RJZD12b2lkIDAsUHJvbWlzZS5yZXNvbHZlKCl9X2hhbmRsZUNsaWNrKGUpe3JldHVybiB0PT5wdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dC5wcmV2ZW50RGVmYXVsdCgpO3RyeXt0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucz95aWVsZCB0aGlzLl9jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyh0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucyk6eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCkseWllbGQgdGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5pbml0aWFsaXplV2lkZ2V0KCkseWllbGQgdGhpcy5faW50ZXJhY3RXaXRoUGF5bWVudFNoZWV0KCl9Y2F0Y2godCl7bGV0IG49dDtpZihVcih0KSl7aWYoXCJDQU5DRUxFRFwiPT09dC5zdGF0dXNDb2RlKXRocm93IG5ldyBNbjtuPW5ldyBMaShKU09OLnN0cmluZ2lmeSh0KSl9dGhyb3cgbnVsbD09ZXx8ZShuZXcgTGkoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSByZXF1ZXN0aW5nIHlvdXIgR29vZ2xlIFBheSBwYXltZW50IGRldGFpbHMuXCIpKSxufX0pfV9pbnRlcmFjdFdpdGhQYXltZW50U2hlZXQoKXt2YXIgZTtyZXR1cm4gcHcodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5zaG93UGF5bWVudFNoZWV0KCksbj10aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yLm1hcFRvQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSh0KSxpPXRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3IubWFwVG9TaGlwcGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSh0KSxyPVwiL2VtYmVkZGVkLWNoZWNrb3V0XCI9PT13aW5kb3cubG9jYXRpb24ucGF0aG5hbWU/dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmxpbmtzLnNpdGVMaW5rOnZvaWQgMDtuJiYoeWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhuKSksaSYmIShudWxsPT09KGU9dGhpcy5fYnV5Tm93Q2FydCl8fHZvaWQgMD09PWU/dm9pZCAwOmUubGluZUl0ZW1zLmRpZ2l0YWxJdGVtcy5sZW5ndGgpJiYoeWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoaSkpLHlpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3Iuc2V0RXh0ZXJuYWxDaGVja291dEZvcm0odGhpcy5fZ2V0TWV0aG9kT3JUaHJvdygpLHQscil9KX1fZ2V0R29vZ2xlUGF5Q2xpZW50T3B0aW9ucygpe3JldHVybntwYXltZW50RGF0YUNhbGxiYWNrczp7b25QYXltZW50RGF0YUNoYW5nZWQ6KHtjYWxsYmFja1RyaWdnZXI6ZSxzaGlwcGluZ0FkZHJlc3M6dCxzaGlwcGluZ09wdGlvbkRhdGE6bixvZmZlckRhdGE6aX0pPT5wdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7YXZhaWxhYmxlVHJpZ2dlcnM6cixhZGRyZXNzQ2hhbmdlVHJpZ2dlcnM6byxzaGlwcGluZ09wdGlvbnNDaGFuZ2VUcmlnZ2VyczphLG9mZmVyQ2hhbmdlVHJpZ2dlcnM6c309dGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5nZXRDYWxsYmFja1RyaWdnZXJzKCk7aWYoIXIuaW5jbHVkZXMoZSkpcmV0dXJuO2NvbnN0IGQ9by5pbmNsdWRlcyhlKT95aWVsZCB0aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yLmhhbmRsZVNoaXBwaW5nQWRkcmVzc0NoYW5nZSh0KTp2b2lkIDA7YS5pbmNsdWRlcyhlKSYmKHlpZWxkIHRoaXMuX2dvb2dsZVBheVBheW1lbnRQcm9jZXNzb3IuaGFuZGxlU2hpcHBpbmdPcHRpb25DaGFuZ2Uobi5pZCkpO2NvbnN0e25ld09mZmVySW5mbzpjLGVycm9yOmx9PXMuaW5jbHVkZXMoZSk/eWllbGQgdGhpcy5fZ29vZ2xlUGF5UGF5bWVudFByb2Nlc3Nvci5oYW5kbGVDb3Vwb25zKGkpOnt9LHU9bDtyZXR1cm4gdGhpcy5fYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/dGhpcy5fZ2V0QnV5Tm93VHJhbnNhY3Rpb25JbmZvKGQsYyx1KTp0aGlzLl9nZXRUcmFuc2FjdGlvbkluZm8oZCxjLHUpfSl9fX1fY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coZSl7cmV0dXJuIHB3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihudWxsPT1lP3ZvaWQgMDplLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSkpe2NvbnN0IHQ9ZS5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkoKTt0cnl7dGhpcy5fYnV5Tm93Q2FydD15aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnQodCkseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQodGhpcy5fYnV5Tm93Q2FydC5pZCl9Y2F0Y2goZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpdGhyb3cgbmV3IGpuKGUpO3Rocm93IGV9fX0pfV9nZXRCdXlOb3dUcmFuc2FjdGlvbkluZm8oZSx0LG4pe2lmKCF0aGlzLl9idXlOb3dDYXJ0KXJldHVybjtjb25zdHtjYXJ0QW1vdW50Oml9PXRoaXMuX2J1eU5vd0NhcnQscj10aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yLmdldFRvdGFsUHJpY2UoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe25ld1RyYW5zYWN0aW9uSW5mbzpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5fY291bnRyeUNvZGUmJntjb3VudHJ5Q29kZTp0aGlzLl9jb3VudHJ5Q29kZX0pLHtjdXJyZW5jeUNvZGU6dGhpcy5fZ2V0Q3VycmVuY3lDb2RlT3JUaHJvdygpLHRvdGFsUHJpY2U6cnx8U3RyaW5nKGkpLHRvdGFsUHJpY2VTdGF0dXM6TXIuRklOQUx9KX0sZSYme25ld1NoaXBwaW5nT3B0aW9uUGFyYW1ldGVyczplfSksdCYme25ld09mZmVySW5mbzp0fSksbiYme2Vycm9yOm59KX1fZ2V0VHJhbnNhY3Rpb25JbmZvKGUsdCxuKXtyZXR1cm4gcHcodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KCk7Y29uc3QgaT10aGlzLl9nb29nbGVQYXlQYXltZW50UHJvY2Vzc29yLmdldFRvdGFsUHJpY2UoKSx7Y29kZTpyfT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe25ld1RyYW5zYWN0aW9uSW5mbzpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5fY291bnRyeUNvZGUmJntjb3VudHJ5Q29kZTp0aGlzLl9jb3VudHJ5Q29kZX0pLHtjdXJyZW5jeUNvZGU6cix0b3RhbFByaWNlU3RhdHVzOk1yLkZJTkFMLHRvdGFsUHJpY2U6aX0pfSxlJiZ7bmV3U2hpcHBpbmdPcHRpb25QYXJhbWV0ZXJzOmV9KSx0JiZ7bmV3T2ZmZXJJbmZvOnR9KSxuJiZ7ZXJyb3I6bn0pfSl9X2dldE1ldGhvZE9yVGhyb3coKXtyZXR1cm4gcXQodGhpcy5fbWV0aG9kSWQsKCk9Pm5ldyBWdChUdC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKX1fZ2V0Q3VycmVuY3lDb2RlT3JUaHJvdygpe3JldHVybiBxdCh0aGlzLl9jdXJyZW5jeUNvZGUsKCk9Pm5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJykpfX1jb25zdCB5dz1ubihlPT57Y29uc3QgdD1uKCksaT13aW5kb3cscj1uZXcgcG4oZSksbz1uZXcgRW4obmV3IERuKGEoKSxpLHIpKTtyZXR1cm4gbmV3IG13KGUsbmV3ICRyKFlyKCksbmV3IF9vKGUsbyksdCxFZSgpKSl9LFt7aWQ6XCJnb29nbGVwYXlicmFpbnRyZWVcIn1dKSxndz1ubihlPT5uZXcgbXcoZSxuZXcgJHIoWXIoKSxuZXcgT28oZSxuZXcgSW8oYSgpKSksbigpLEVlKCkpKSxbe2lkOlwiZ29vZ2xlcGF5cGF5cGFsY29tbWVyY2VcIn1dKSx2dz1ubihlPT5uZXcgbXcoZSxuZXcgJHIoWXIoKSxuZXcga28oZSxuZXcgd2koYSgpKSksbigpLEVlKCkpKSxbe2lkOlwiZ29vZ2xlcGF5X2JpZ2NvbW1lcmNlX3BheW1lbnRzXCJ9XSksZnc9bm4oZT0+e2NvbnN0IHQ9bigpO3JldHVybiBuZXcgbXcoZSxuZXcgJHIoWXIoKSxuZXcganIoXCJhZHllblwiLGUpLHQsRWUoKSkpfSxbe2lkOlwiZ29vZ2xlcGF5YWR5ZW52MlwifV0pLFN3PW5uKGU9Pntjb25zdCB0PW4oKTtyZXR1cm4gbmV3IG13KGUsbmV3ICRyKFlyKCksbmV3IGpyKFwiYWR5ZW5cIixlKSx0LEVlKCkpKX0sW3tpZDpcImdvb2dsZXBheWFkeWVudjNcIn1dKSxfdz1ubihlPT5uZXcgbXcoZSxuZXcgJHIoWXIoKSxuZXcgWnIoZSksbigpLEVlKCkpKSxbe2lkOlwiZ29vZ2xlcGF5YXV0aG9yaXplbmV0XCJ9XSksd3c9bm4oZT0+e2NvbnN0IHQ9bigpO3JldHVybiBuZXcgbXcoZSxuZXcgJHIoWXIoKSxuZXcgbm8oZSx0KSx0LEVlKCkpKX0sW3tpZDpcImdvb2dsZXBheWNoZWNrb3V0Y29tXCJ9XSksQ3c9bm4oZT0+bmV3IG13KGUsbmV3ICRyKFlyKCksbmV3IHJvKGUpLG4oKSxFZSgpKSksW3tpZDpcImdvb2dsZXBheWN5YmVyc291cmNldjJcIn0se2lkOlwiZ29vZ2xlcGF5Ym56XCJ9XSksSXc9bm4oZT0+bmV3IG13KGUsbmV3ICRyKFlyKCksbmV3IHNvKGUpLG4oKSxFZSgpKSksW3tpZDpcImdvb2dsZXBheW9yYml0YWxcIn1dKSxidz1ubihlPT5uZXcgbXcoZSxuZXcgJHIoWXIoKSxuZXcgaG8oZSxuZXcgbW8oYSgpKSksbigpLEVlKCkpKSxbe2lkOlwiZ29vZ2xlcGF5c3RyaXBlXCJ9LHtpZDpcImdvb2dsZXBheXN0cmlwZXVwZVwifSx7aWQ6XCJnb29nbGVwYXlzdHJpcGVvY3NcIn1dKSxQdz1ubihlPT5uZXcgbXcoZSxuZXcgJHIoWXIoKSxuZXcgdm8oZSksbigpLEVlKCkpKSxbe2lkOlwiZ29vZ2xlcGF5d29ybGRwYXlhY2Nlc3NcIn1dKSxPdz1ubihlPT5uZXcgbXcoZSxuZXcgJHIoWXIoKSxuZXcgem8oZSxFZSgpKSxuKCksRWUoKSkpLFt7aWQ6XCJnb29nbGVwYXl0ZG9ubGluZW1hcnRcIn1dKTt2YXIgRXc9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgQXd7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlPXR9aW5pdGlhbGl6ZShlKXt2YXIgdDtyZXR1cm4gRXcodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheXBhbGNvbW1lcmNlOm4sY29udGFpbmVySWQ6aSxtZXRob2RJZDpyfT1lLG89Qm9vbGVhbihudWxsPT1uP3ZvaWQgMDpuLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zKTtpZighcil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIWkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFuKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZihvJiYhbi5jdXJyZW5jeUNvZGUpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlLmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZihvJiZcImZ1bmN0aW9uXCIhPXR5cGVvZihudWxsPT09KHQ9bi5idXlOb3dJbml0aWFsaXplT3B0aW9ucyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2UuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicpO298fCh5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpKTtjb25zdCBhPW8/bi5jdXJyZW5jeUNvZGU6dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO3lpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhyLGEsITEpLHRoaXMucmVuZGVyQnV0dG9uKGkscixuKX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1yZW5kZXJCdXR0b24oZSx0LG4pe2NvbnN0e2J1eU5vd0luaXRpYWxpemVPcHRpb25zOmksc3R5bGU6cixvbkNvbXBsZXRlOm8sb25FbGlnaWJpbGl0eUZhaWx1cmU6YX09bixzPXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpLGQ9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codCkse2lzSG9zdGVkQ2hlY2tvdXRFbmFibGVkOmMsaXNBcHBTd2l0Y2hFbmFibGVkOmx9PWQuaW5pdGlhbGl6YXRpb25EYXRhfHx7fSx1PXtjcmVhdGVPcmRlcjooKT0+dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcInBheXBhbGNvbW1lcmNlXCIpLG9uQXBwcm92ZTooe29yZGVySUQ6ZX0pPT50aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudCh0LGUpfSxoPXtvbkNsaWNrOigpPT50aGlzLmhhbmRsZUNsaWNrKGkpLG9uQ2FuY2VsOigpPT50aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpfSxwPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwhbCYme29uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlOmU9PnRoaXMub25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZSksb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6ZT0+dGhpcy5vblNoaXBwaW5nT3B0aW9uc0NoYW5nZShlKX0pLHtvbkFwcHJvdmU6KGUsbik9PnRoaXMub25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZSxuLHQsbyl9KSxtPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtmdW5kaW5nU291cmNlOnMuRlVORElORy5QQVlQQUwsc3R5bGU6dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHIpfSx1KSxpJiZoKSxjJiZwKSx5PXMuQnV0dG9ucyhtKTt5LmlzRWxpZ2libGUoKT95LnJlbmRlcihgIyR7ZX1gKTphJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2EoKTp0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoZSl9aGFuZGxlQ2xpY2soZSl7cmV0dXJuIEV3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZihlKXtjb25zdCB0PXlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coZSk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dCh0LmlkKX19KX1vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShlLHQsbixpKXtyZXR1cm4gRXcodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFlLm9yZGVySUQpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdPcmRlcklkKTtjb25zdCByPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCksbz15aWVsZCB0Lm9yZGVyLmdldCgpO3RyeXtjb25zdCB0PXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKG8pO2lmKHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyh0KSxyLmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aD4wKXtjb25zdCBlPXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhvKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKGUpLHlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKX1yZXR1cm4geWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt9LHtwYXJhbXM6e21ldGhvZElkOm59fSkseWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG4sZS5vcmRlcklEKSxpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiZpKCksITB9Y2F0Y2goZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKGUpO3Rocm93IGV9fSl9b25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZSl7cmV0dXJuIEV3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7Y2l0eTplLnNoaXBwaW5nQWRkcmVzcy5jaXR5LGNvdW50cnlDb2RlOmUuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLHBvc3RhbENvZGU6ZS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxzdGF0ZU9yUHJvdmluY2VDb2RlOmUuc2hpcHBpbmdBZGRyZXNzLnN0YXRlfSk7dHJ5e3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyh0KSx5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHQpO2NvbnN0IGU9dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oZS5pZCkseWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpfWNhdGNoKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihlKTt0aHJvdyBlfX0pfW9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGUpe3JldHVybiBFdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhlLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24uaWQpO3RyeXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24odC5pZCkseWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpfWNhdGNoKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihlKTt0aHJvdyBlfX0pfX1jb25zdCBrdz1ubihlPT5uZXcgQXcoZSxZbyhlKSksW3tpZDpcInBheXBhbGNvbW1lcmNlXCJ9XSk7dmFyIFR3PWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIER3e2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5wYXlwYWxDb21tZXJjZVNkaz1ufWluaXRpYWxpemUoZSl7dmFyIHQ7cmV0dXJuIFR3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXlwYWxjb21tZXJjZWNyZWRpdDpuLGNvbnRhaW5lcklkOmksbWV0aG9kSWQ6cn09ZSx7YnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM6byxjdXJyZW5jeUNvZGU6YSxtZXNzYWdpbmdDb250YWluZXJJZDpzfT1ufHx7fSxkPSEhbztpZighcil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIWkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFuKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWNyZWRpdFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZihkJiYhYSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXQuY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKGQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mKG51bGw9PW8/dm9pZCAwOm8uZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXQuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicpO2R8fCh5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpKTtjb25zdCBjPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGw9ZD9hOmMuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO3lpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhyLGwsITEpLHRoaXMucmVuZGVyQnV0dG9uKGkscixuKTtjb25zdCB1PWMuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlcztpZihudWxsIT09KHQ9dVtcIlBBWVBBTC01NTU3LkhpZGVfcHBjX2Jhbm5lcl9pbXBsZW1lbnRhdGlvblwiXSkmJnZvaWQgMCE9PXQmJnQpcmV0dXJuO2NvbnN0IGg9cyYmZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocyk7aWYobCYmaCl7Y29uc3QgZT1jLmdldFBheW1lbnRNZXRob2RPclRocm93KHIpLHtwYXlwYWxCTlBMQ29uZmlndXJhdGlvbjp0PVtdfT1lLmluaXRpYWxpemF0aW9uRGF0YXx8e30sbj10JiZ0LmZpbmQoKHtpZDplfSk9PlwiY2FydFwiPT09ZSk7aWYoIShudWxsPT1uP3ZvaWQgMDpuLnN0YXR1cykpcmV0dXJuO2gucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1wcC1zdHlsZS1sb2dvLXR5cGVcIiksaC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXBwLXN0eWxlLWxvZ28tcG9zaXRpb25cIiksaC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXBwLXN0eWxlLXRleHQtY29sb3JcIiksaC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXBwLXN0eWxlLXRleHQtc2l6ZVwiKTtjb25zdCBpPXlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsTWVzc2FnZXMoZSxsKTt0aGlzLnJlbmRlck1lc3NhZ2VzKGkscyxuKX19KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9cmVuZGVyQnV0dG9uKGUsdCxuKXtjb25zdHtidXlOb3dJbml0aWFsaXplT3B0aW9uczppLHN0eWxlOnIsb25Db21wbGV0ZTpvLG9uRWxpZ2liaWxpdHlGYWlsdXJlOmF9PW4scz10aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKSxkPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KHQpLHtpc0hvc3RlZENoZWNrb3V0RW5hYmxlZDpjLGlzQXBwU3dpdGNoRW5hYmxlZDpsfT1kLmluaXRpYWxpemF0aW9uRGF0YXx8e30sdT17Y3JlYXRlT3JkZXI6KCk9PnRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXCJwYXlwYWxjb21tZXJjZWNyZWRpdFwiKSxvbkFwcHJvdmU6KHtvcmRlcklEOmV9KT0+dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQodCxlKX0saD17b25DbGljazooKT0+dGhpcy5oYW5kbGVDbGljayhpKSxvbkNhbmNlbDooKT0+dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKX0scD1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIWwmJntvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTplPT50aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGUpLG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlOmU9PnRoaXMub25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZSl9KSx7b25BcHByb3ZlOihlLG4pPT50aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGUsbix0LG8pfSksbT1bcy5GVU5ESU5HLlBBWUxBVEVSLHMuRlVORElORy5DUkVESVRdO2xldCB5PSExO20uZm9yRWFjaCh0PT57aWYoIXkpe2NvbnN0IG49T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe2Z1bmRpbmdTb3VyY2U6dCxzdHlsZTp0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUocil9LHUpLGkmJmgpLGMmJnApLG89cy5CdXR0b25zKG4pO28uaXNFbGlnaWJsZSgpPyhvLnJlbmRlcihgIyR7ZX1gKSx5PSEwKTphJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZhKCl9fSkseXx8dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGUpfWhhbmRsZUNsaWNrKGUpe3JldHVybiBUdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoZSl7Y29uc3QgdD15aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KGUpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQodC5pZCl9fSl9b25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZSx0LG4saSl7cmV0dXJuIFR3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighZS5vcmRlcklEKXRocm93IG5ldyBqdChrdC5NaXNzaW5nT3JkZXJJZCk7Y29uc3Qgcj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLG89eWllbGQgdC5vcmRlci5nZXQoKTt0cnl7Y29uc3QgdD10aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhvKTtpZih5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3ModCksci5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGg+MCl7Y29uc3QgZT10aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMobyk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhlKSx5aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCl9cmV0dXJuIHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSx7cGFyYW1zOnttZXRob2RJZDpufX0pLHlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChuLGUub3JkZXJJRCksaSYmXCJmdW5jdGlvblwiPT10eXBlb2YgaSYmaSgpLCEwfWNhdGNoKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihlKTt0aHJvdyBlfX0pfW9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGUpe3JldHVybiBUdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEFkZHJlc3Moe2NpdHk6ZS5zaGlwcGluZ0FkZHJlc3MuY2l0eSxjb3VudHJ5Q29kZTplLnNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxwb3N0YWxDb2RlOmUuc2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGUsc3RhdGVPclByb3ZpbmNlQ29kZTplLnNoaXBwaW5nQWRkcmVzcy5zdGF0ZX0pO3RyeXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3ModCkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyh0KTtjb25zdCBlPXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKGUuaWQpLHlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKX1jYXRjaChlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoZSk7dGhyb3cgZX19KX1vblNoaXBwaW5nT3B0aW9uc0NoYW5nZShlKXtyZXR1cm4gVHcodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coZS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkKTt0cnl7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHQuaWQpLHlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKX1jYXRjaChlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoZSk7dGhyb3cgZX19KX1yZW5kZXJNZXNzYWdlcyhlLHQsbil7Y29uc3QgaT17YW1vdW50OnRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENoZWNrb3V0T3JUaHJvdygpLm91dHN0YW5kaW5nQmFsYW5jZSxwbGFjZW1lbnQ6XCJjYXJ0XCIsc3R5bGU6TWgobil9O2UuTWVzc2FnZXMoaSkucmVuZGVyKGAjJHt0fWApfX1jb25zdCBNdz1ubihlPT5uZXcgRHcoZSxZbyhlKSxyYSgpKSxbe2lkOlwicGF5cGFsY29tbWVyY2VjcmVkaXRcIn1dKTt2YXIgenc9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgTnd7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlPXR9aW5pdGlhbGl6ZShlKXtyZXR1cm4gencodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3BheXBhbGNvbW1lcmNldmVubW86dCxjb250YWluZXJJZDpuLG1ldGhvZElkOml9PWUse2J1eU5vd0luaXRpYWxpemVPcHRpb25zOnIsY3VycmVuY3lDb2RlOm99PXR8fHt9LGE9ISFyO2lmKCFpKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighbil0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXQpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW9cIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoYSYmIW8pdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW8uY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKGEmJlwiZnVuY3Rpb25cIiE9dHlwZW9mKG51bGw9PXI/dm9pZCAwOnIuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2V2ZW5tby5idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uJyk7YXx8KHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCkpO2NvbnN0IHM9YT9vOnRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTt5aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsoaSxzLCExKSx0aGlzLnJlbmRlckJ1dHRvbihuLGksdCl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9cmVuZGVyQnV0dG9uKGUsdCxuKXtjb25zdHtidXlOb3dJbml0aWFsaXplT3B0aW9uczppLHN0eWxlOnIsb25FbGlnaWJpbGl0eUZhaWx1cmU6b309bixhPXRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpLHM9YS5GVU5ESU5HLlZFTk1PLGQ9e2NyZWF0ZU9yZGVyOigpPT50aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFwicGF5cGFsY29tbWVyY2V2ZW5tb1wiKSxvbkFwcHJvdmU6KHtvcmRlcklEOmV9KT0+dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQodCxlKX0sYz17b25DbGljazooKT0+dGhpcy5oYW5kbGVDbGljayhpKSxvbkNhbmNlbDooKT0+dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKX0sbD1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe2Z1bmRpbmdTb3VyY2U6cyxzdHlsZTp0aGlzLmdldFZhbGlkVmVubW9CdXR0b25TdHlsZXMocil9LGQpLGkmJmMpLHU9YS5CdXR0b25zKGwpO3UuaXNFbGlnaWJsZSgpP3UucmVuZGVyKGAjJHtlfWApOm8mJlwiZnVuY3Rpb25cIj09dHlwZW9mIG8/bygpOnRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChlKX1nZXRWYWxpZFZlbm1vQnV0dG9uU3R5bGVzKGUpe2NvbnN0IHQ9dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKGUpO3JldHVybiB0LmNvbG9yPT09TG8uZ29sZD9PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse2NvbG9yOnZvaWQgMH0pOnR9aGFuZGxlQ2xpY2soZSl7cmV0dXJuIHp3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZihlKXtjb25zdCB0PXlpZWxkIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coZSk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dCh0LmlkKX19KX19Y29uc3QgeHc9bm4oZT0+bmV3IE53KGUsWW8oZSkpLFt7aWQ6XCJwYXlwYWxjb21tZXJjZXZlbm1vXCJ9XSk7dmFyIEZ3PWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKHIsbyl7ZnVuY3Rpb24gYShlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKGEscyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIFJ3e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZT10fWluaXRpYWxpemUoZSl7cmV0dXJuIEZ3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kczp0LGNvbnRhaW5lcklkOm4sbWV0aG9kSWQ6aX09ZSx7YXBtOnIsYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM6byxjdXJyZW5jeUNvZGU6YX09dHx8e30scz0hIW87aWYoIWkpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKCFuKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZighdCl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7aWYoIXIpdGhyb3cgbmV3IHJuKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzLmFwbVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtpZihzJiYhYSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMuY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2lmKHMmJlwiZnVuY3Rpb25cIiE9dHlwZW9mKG51bGw9PW8/dm9pZCAwOm8uZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KSl0aHJvdyBuZXcgcm4oJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicpO3N8fCh5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpKTtjb25zdCBkPXM/YTp0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7eWllbGQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKGksZCwhMSksdGhpcy5yZW5kZXJCdXR0b24obixpLHQpfSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfXJlbmRlckJ1dHRvbihlLHQsbil7Y29uc3R7YXBtOmksYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM6cixzdHlsZTpvLG9uRWxpZ2liaWxpdHlGYWlsdXJlOmF9PW4scz10aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtpZighT2JqZWN0LnZhbHVlcyhzLkZVTkRJTkcpLmluY2x1ZGVzKGkpKXRocm93IG5ldyBybignVW5hYmxlIHRvIGluaXRpYWxpemUgUGF5UGFsIGJ1dHRvbiBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcy5hcG1cIiBhcmd1bWVudCBpcyBub3QgdmFsaWQgZnVuZGluZyBzb3VyY2UuJyk7Y29uc3QgZD17Y3JlYXRlT3JkZXI6KCk9PnRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXCJwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kXCIpLG9uQXBwcm92ZTooe29yZGVySUQ6ZX0pPT50aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudCh0LGUpfSxjPXtvbkNsaWNrOigpPT50aGlzLmhhbmRsZUNsaWNrKHIpLG9uQ2FuY2VsOigpPT50aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpfSxsPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7ZnVuZGluZ1NvdXJjZTppLHN0eWxlOnRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShvKX0sZCksciYmYyksdT1zLkJ1dHRvbnMobCk7dS5pc0VsaWdpYmxlKCk/dS5yZW5kZXIoYCMke2V9YCk6YSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYT9hKCk6dGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGUpfWhhbmRsZUNsaWNrKGUpe3JldHVybiBGdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoZSl7Y29uc3QgdD15aWVsZCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KGUpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQodC5pZCl9fSl9fWNvbnN0IEx3PW5uKGU9Pm5ldyBSdyhlLFlvKGUpKSxbe2lkOlwicGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHNcIn1dKTt2YXIgQncsancsVXcscXcsVnc7IWZ1bmN0aW9uKGUpe2UuSE9SSVpPTlRBTD1cImhvcml6b250YWxcIixlLlZFUlRJQ0FMPVwidmVydGljYWxcIn0oQnd8fChCdz17fSkpLGZ1bmN0aW9uKGUpe2UuU01BTEw9XCJzbWFsbFwiLGUuTUVESVVNPVwibWVkaXVtXCIsZS5MQVJHRT1cImxhcmdlXCIsZS5SRVNQT05TSVZFPVwicmVzcG9uc2l2ZVwifShqd3x8KGp3PXt9KSksZnVuY3Rpb24oZSl7ZS5HT0xEPVwiZ29sZFwiLGUuQkxVRT1cImJsdWVcIixlLlNJbFZFUj1cInNpbHZlclwiLGUuQkxBQ0s9XCJibGFja1wifShVd3x8KFV3PXt9KSksZnVuY3Rpb24oZSl7ZS5DSEVDS09VVD1cImNoZWNrb3V0XCIsZS5QQVk9XCJwYXlcIixlLkJVWU5PVz1cImJ1eW5vd1wiLGUuUEFZUEFMPVwicGF5cGFsXCIsZS5DUkVESVQ9XCJjcmVkaXRcIn0ocXd8fChxdz17fSkpLGZ1bmN0aW9uKGUpe2UuUElMTD1cInBpbGxcIixlLlJFQ1Q9XCJyZWN0XCJ9KFZ3fHwoVnc9e30pKTt2YXIgR3c9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4oYSxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgSHd7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMucGF5cGFsRXhwcmVzc1NjcmlwdExvYWRlcj10LHRoaXMuZm9ybVBvc3Rlcj1ufWluaXRpYWxpemUoZSl7cmV0dXJuIEd3KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KGUubWV0aG9kSWQpO2lmKCFlLnBheXBhbCl0aHJvdyBuZXcgcm47aWYoIXQuY29uZmlnLm1lcmNoYW50SWQpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50TWV0aG9kKTtjb25zdCBuPXlpZWxkIHRoaXMucGF5cGFsRXhwcmVzc1NjcmlwdExvYWRlci5sb2FkUGF5cGFsU0RLKHQuY29uZmlnLm1lcmNoYW50SWQpO3RoaXMucmVuZGVyQnV0dG9uKGUsbil9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9cmVuZGVyQnV0dG9uKGUsdCl7Y29uc3R7Y29udGFpbmVySWQ6bixtZXRob2RJZDppLHBheXBhbDpyfT1lLHthbGxvd0NyZWRpdDpvLGNsaWVudElkOmEsb25QYXltZW50RXJyb3I6cyxzaG91bGRQcm9jZXNzUGF5bWVudDpkLHN0eWxlOmN9PXIsbD10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlLm1ldGhvZElkKTtpZighbC5jb25maWcubWVyY2hhbnRJZCl0aHJvdyBuZXcganQoa3QuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0IHU9bC5jb25maWcubWVyY2hhbnRJZCxoPWwuY29uZmlnLnRlc3RNb2RlP1wic2FuZGJveFwiOlwicHJvZHVjdGlvblwiLHA9e1toXTphfSxtPXQuRlVORElORy5DUkVESVR8fFwiY3JlZGl0XCIseT1vP1ttXTpbXSxnPW8/W106W21dO3JldHVybiB0LkJ1dHRvbi5yZW5kZXIoe2VudjpoLGNsaWVudDpwLGNvbW1pdDpkLGZ1bmRpbmc6e2FsbG93ZWQ6eSxkaXNhbGxvd2VkOmd9LHN0eWxlOnRoaXMuZ2V0U3R5bGUoYykscGF5bWVudDooZSx0KT0+dGhpcy5zZXR1cFBheW1lbnQodSx0LHMpLG9uQXV0aG9yaXplOihlLHQpPT50aGlzLnRva2VuaXplUGF5bWVudChlLGksdCxkKX0sbil9Z2V0U3R5bGUoZSl7Y29uc3R7Y29sb3I6dCxmdW5kaW5naWNvbnM6bixsYWJlbDppLGxheW91dDpyLHNoYXBlOm8sc2l6ZTphLHRhZ2xpbmU6c309ZXx8e307cmV0dXJue2NvbG9yOnQsZnVuZGluZ2ljb25zOm4sbGFiZWw6aSxsYXlvdXQ6cixzaGFwZTpvfHxWdy5SRUNULHNpemU6XCJzbWFsbFwiPT09YT9qdy5SRVNQT05TSVZFOmEsdGFnbGluZTpzfX1zZXR1cFBheW1lbnQoZSx0LG4pe3JldHVybiBHdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXQpdGhyb3cgbmV3IFZ0KFR0LkNoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQpO3RyeXtjb25zdCBuPXlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCkse2lkOml9PW4uZ2V0Q2FydE9yVGhyb3coKSxyPW4uZ2V0SG9zdCgpfHxcIlwiO3JldHVybih5aWVsZCB0LnJlcXVlc3QucG9zdChgJHtyfS9hcGkvc3RvcmVmcm9udC9wYXltZW50L3BheXBhbGV4cHJlc3NgLHttZXJjaGFudElkOmUsY2FydElkOml9LHtoZWFkZXJzOk9iamVjdC5hc3NpZ24oe1wiWC1BUEktSU5URVJOQUxcIjpYbn0sbmkpfSkpLmlkfWNhdGNoKGUpe3Rocm93IG4mJmUgaW5zdGFuY2VvZiBCdCYmbihlKSxlfX0pfXRva2VuaXplUGF5bWVudChlLHQsbixpKXtyZXR1cm4gR3codGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFuKXRocm93IG5ldyBWdChUdC5DaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkKTtpZighZS5wYXltZW50SUR8fCFlLnBheWVySUQpdGhyb3cgbmV3IGp0KGt0Lk1pc3NpbmdQYXltZW50KTtjb25zdCByPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2RPclRocm93KHQpLG89eWllbGQgbi5wYXltZW50LmdldChlLnBheW1lbnRJRCk7cmV0dXJuIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybShcIi9jaGVja291dC5waHBcIix7cGF5bWVudF90eXBlOlwicGF5cGFsXCIscHJvdmlkZXI6ci5pZCxhY3Rpb246aT9cInByb2Nlc3NfcGF5bWVudFwiOlwic2V0X2V4dGVybmFsX2NoZWNrb3V0XCIscGF5bWVudElkOmUucGF5bWVudElELHBheWVySWQ6ZS5wYXllcklELHBheWVySW5mbzpKU09OLnN0cmluZ2lmeShvLnBheWVyLnBheWVyX2luZm8pfSl9KX19Y2xhc3MgJHd7Y29uc3RydWN0b3IoZSl7dGhpcy5zY3JpcHRMb2FkZXI9ZSx0aGlzLndpbmRvdz13aW5kb3d9bG9hZFBheXBhbFNESyhlPVwiXCIpe3JldHVybiB0PXRoaXMsbj12b2lkIDAscj1mdW5jdGlvbiooKXtjb25zdCB0PU9iamVjdC5hc3NpZ24oe2FzeW5jOiEwLGF0dHJpYnV0ZXM6e1wiZGF0YS1tZXJjaGFudC1pZFwiOmV9fSxlJiZ7YXR0cmlidXRlczp7XCJkYXRhLW1lcmNoYW50LWlkXCI6ZX19KTtpZih5aWVsZCB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KFwiLy93d3cucGF5cGFsb2JqZWN0cy5jb20vYXBpL2NoZWNrb3V0Lm1pbi5qc1wiLHQpLCF0aGlzLndpbmRvdy5wYXlwYWwpdGhyb3cgbmV3IFh0O3JldHVybiB0aGlzLndpbmRvdy5wYXlwYWx9LG5ldygoaT12b2lkIDApfHwoaT1Qcm9taXNlKSkoZnVuY3Rpb24oZSxvKXtmdW5jdGlvbiBhKGUpe3RyeXtkKHIubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChyLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIGk/bjpuZXcgaShmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYSxzKX1kKChyPXIuYXBwbHkodCxufHxbXSkpLm5leHQoKSl9KTt2YXIgdCxuLGkscn19Y29uc3QgV3c9bm4oZT0+bmV3IEh3KGUsbmV3ICR3KGEoKSksRWUoKSksW3tpZDpcInBheXBhbGV4cHJlc3NcIn1dKTtmdW5jdGlvbiBZdyhlKXtjb25zdHtob3N0OnQsbG9jYWxlOmk9XCJlblwifT1udWxsIT1lP2U6e30scj1yXyh7Y29uZmlnOnttZXRhOntob3N0Om51bGw9PWU/dm9pZCAwOmUuaG9zdCxsb2NhbGU6bnVsbD09ZT92b2lkIDA6ZS5sb2NhbGV9LGVycm9yczp7fSxzdGF0dXNlczp7fX19KSxvPW4oe2hvc3Q6dH0pLHM9RWUoe2hvc3Q6dH0pLGQ9ZnVuY3Rpb24oZSx0PUtlKXtjb25zdCBuPW5ldyBMdDtmb3IoY29uc3RbLGldb2YgT2JqZWN0LmVudHJpZXModCkpaWYoeHQoaSkpZm9yKGNvbnN0IHQgb2YgaS5yZXNvbHZlSWRzKW4ucmVnaXN0ZXIodCwoKT0+aShlKSk7cmV0dXJuIG59KFR5KHIpKTtyZXR1cm4gbmV3IGdfKHIsbmV3IHZfKGZ1bmN0aW9uKGUsdCxuLGkscil7Y29uc3Qgbz1uZXcgUnQscz1hKCksZD1uZXcgdHModCksYz1uZXcgaXMoZCxuZXcgZnQobmV3IEl0KHQpKSxuZXcgb3MobmV3IGFzKHQpKSk7cmV0dXJuIG8ucmVnaXN0ZXIoWW0uTUFTVEVSUEFTUywoKT0+bmV3IElfKGUsYyxuZXcgaHMocyksaSkpLG8ucmVnaXN0ZXIoWW0uUEFZUEFMRVhQUkVTUywoKT0+bmV3IGJfKGUsYyxuZXcgaGcocyksbixyKSksb30ocixvLHMsaSx0KSxkLG5ldyBkcyhuZXcgY3MobykpKSl9dmFyIEt3LEp3LFp3OyFmdW5jdGlvbihlKXtlLkNoZWNrb3V0Q29tcGxldGU9XCJDSEVDS09VVF9DT01QTEVURVwiLGUuQ2hlY2tvdXRFcnJvcj1cIkNIRUNLT1VUX0VSUk9SXCIsZS5DaGVja291dExvYWRlZD1cIkNIRUNLT1VUX0xPQURFRFwiLGUuRnJhbWVFcnJvcj1cIkZSQU1FX0VSUk9SXCIsZS5GcmFtZUxvYWRlZD1cIkZSQU1FX0xPQURFRFwiLGUuU2lnbmVkT3V0PVwiU0lHTkVEX09VVFwifShLd3x8KEt3PXt9KSk7Y2xhc3MgUXcgZXh0ZW5kcyBfdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlLHttZXNzYWdlOmUuYm9keS50aXRsZX0pLHRoaXMubmFtZT1cIkludmFsaWRMb2dpblRva2VuRXJyb3JcIix0aGlzLnR5cGU9XCJpbnZhbGlkX2xvZ2luX3Rva2VuXCJ9fSFmdW5jdGlvbihlKXtlLk1pc3NpbmdDb250YWluZXI9XCJtaXNzaW5nX2NvbnRhaW5lclwiLGUuTWlzc2luZ0NvbnRlbnQ9XCJtaXNzaW5nX2NvbnRlbnRcIixlLlVua25vd25FcnJvcj1cInVua25vd25fZXJyb3JcIn0oSnd8fChKdz17fSkpO2NsYXNzIFh3IGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSx0PUp3LlVua25vd25FcnJvcil7c3VwZXIoZXx8XCJVbmFibGUgdG8gZW1iZWQgdGhlIGNoZWNrb3V0IGZvcm0uXCIpLHRoaXMuc3VidHlwZT10LHRoaXMubmFtZT1cIk5vdEVtYmVkZGFibGVFcnJvclwiLHRoaXMudHlwZT1cIm5vdF9lbWJlZGRhYmxlXCJ9fSFmdW5jdGlvbihlKXtlLlN0eWxlQ29uZmlndXJlZD1cIlNUWUxFX0NPTkZJR1VSRURcIn0oWnd8fChadz17fSkpO2NvbnN0IGVDPVwiaXNDb29raWVBbGxvd2VkXCIsdEM9XCJsYXN0QWxsb3dDb29raWVBdHRlbXB0XCI7bGV0IG5DPWNsYXNze2NvbnN0cnVjdG9yKGUsdCxuLGkscixvLGEscyl7dGhpcy5faWZyYW1lQ3JlYXRvcj1lLHRoaXMuX21lc3NhZ2VMaXN0ZW5lcj10LHRoaXMuX21lc3NhZ2VQb3N0ZXI9bix0aGlzLl9sb2FkaW5nSW5kaWNhdG9yPWksdGhpcy5fcmVxdWVzdFNlbmRlcj1yLHRoaXMuX3N0b3JhZ2U9byx0aGlzLl9sb2NhdGlvbj1hLHRoaXMuX29wdGlvbnM9cyx0aGlzLl9pc0F0dGFjaGVkPSExLHRoaXMuX29wdGlvbnMub25Db21wbGV0ZSYmdGhpcy5fbWVzc2FnZUxpc3RlbmVyLmFkZExpc3RlbmVyKEt3LkNoZWNrb3V0Q29tcGxldGUsdGhpcy5fb3B0aW9ucy5vbkNvbXBsZXRlKSx0aGlzLl9vcHRpb25zLm9uRXJyb3ImJnRoaXMuX21lc3NhZ2VMaXN0ZW5lci5hZGRMaXN0ZW5lcihLdy5DaGVja291dEVycm9yLHRoaXMuX29wdGlvbnMub25FcnJvciksdGhpcy5fb3B0aW9ucy5vbkxvYWQmJnRoaXMuX21lc3NhZ2VMaXN0ZW5lci5hZGRMaXN0ZW5lcihLdy5DaGVja291dExvYWRlZCx0aGlzLl9vcHRpb25zLm9uTG9hZCksdGhpcy5fb3B0aW9ucy5vbkZyYW1lTG9hZCYmdGhpcy5fbWVzc2FnZUxpc3RlbmVyLmFkZExpc3RlbmVyKEt3LkZyYW1lTG9hZGVkLHRoaXMuX29wdGlvbnMub25GcmFtZUxvYWQpLHRoaXMuX29wdGlvbnMub25TaWduT3V0JiZ0aGlzLl9tZXNzYWdlTGlzdGVuZXIuYWRkTGlzdGVuZXIoS3cuU2lnbmVkT3V0LHRoaXMuX29wdGlvbnMub25TaWduT3V0KSx0aGlzLl9tZXNzYWdlTGlzdGVuZXIuYWRkTGlzdGVuZXIoS3cuRnJhbWVMb2FkZWQsKCk9PnRoaXMuX2NvbmZpZ3VyZVN0eWxlcygpKX1hdHRhY2goKXtyZXR1cm4gdGhpcy5faXNBdHRhY2hlZD9Qcm9taXNlLnJlc29sdmUodGhpcyk6KHRoaXMuX2lzQXR0YWNoZWQ9ITAsdGhpcy5fbWVzc2FnZUxpc3RlbmVyLmxpc3RlbigpLHRoaXMuX2xvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLl9vcHRpb25zLmNvbnRhaW5lcklkKSx0aGlzLl9hbGxvd0Nvb2tpZSgpLnRoZW4oKCk9PnRoaXMuX2F0dGVtcHRMb2dpbigpKS50aGVuKGU9PnRoaXMuX2lmcmFtZUNyZWF0b3IuY3JlYXRlRnJhbWUoZSx0aGlzLl9vcHRpb25zLmNvbnRhaW5lcklkKSkudGhlbihlPT57dGhpcy5faWZyYW1lPWUsdGhpcy5fY29uZmlndXJlU3R5bGVzKCksdGhpcy5fbG9hZGluZ0luZGljYXRvci5oaWRlKCl9KS5jYXRjaChlPT4odGhpcy5faXNBdHRhY2hlZD0hMSx0aGlzLl9yZXRyeUFsbG93Q29va2llKGUpLmNhdGNoKCgpPT57dGhyb3cgdGhpcy5fbWVzc2FnZUxpc3RlbmVyLnRyaWdnZXIoe3R5cGU6S3cuRnJhbWVFcnJvcixwYXlsb2FkOmV9KSx0aGlzLl9sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKSxlfSkpKS50aGVuKCgpPT50aGlzKSl9ZGV0YWNoKCl7dGhpcy5faXNBdHRhY2hlZCYmKHRoaXMuX2lzQXR0YWNoZWQ9ITEsdGhpcy5fbWVzc2FnZUxpc3RlbmVyLnN0b3BMaXN0ZW4oKSx0aGlzLl9pZnJhbWUmJnRoaXMuX2lmcmFtZS5wYXJlbnROb2RlJiYodGhpcy5faWZyYW1lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5faWZyYW1lKSx0aGlzLl9pZnJhbWUuaUZyYW1lUmVzaXplci5jbG9zZSgpKSl9X2NvbmZpZ3VyZVN0eWxlcygpe3RoaXMuX2lmcmFtZSYmdGhpcy5faWZyYW1lLmNvbnRlbnRXaW5kb3cmJnRoaXMuX29wdGlvbnMuc3R5bGVzJiYodGhpcy5fbWVzc2FnZVBvc3Rlci5zZXRUYXJnZXQodGhpcy5faWZyYW1lLmNvbnRlbnRXaW5kb3cpLHRoaXMuX21lc3NhZ2VQb3N0ZXIucG9zdCh7dHlwZTpady5TdHlsZUNvbmZpZ3VyZWQscGF5bG9hZDp0aGlzLl9vcHRpb25zLnN0eWxlc30pKX1fYXR0ZW1wdExvZ2luKCl7cmV0dXJuL15cXC9sb2dpblxcL3Rva2VuLy50ZXN0KHhzKHRoaXMuX29wdGlvbnMudXJsKS5wYXRobmFtZSk/dGhpcy5fcmVxdWVzdFNlbmRlci5wb3N0KHRoaXMuX29wdGlvbnMudXJsKS50aGVuKCh7Ym9keTp7cmVkaXJlY3RVcmw6ZX19KT0+ZSkuY2F0Y2goZT0+UHJvbWlzZS5yZWplY3QobmV3IFF3KGUpKSk6UHJvbWlzZS5yZXNvbHZlKHRoaXMuX29wdGlvbnMudXJsKX1fYWxsb3dDb29raWUoKXtpZih0aGlzLl9zdG9yYWdlLmdldEl0ZW0oZUMpKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt0aGlzLl9zdG9yYWdlLnNldEl0ZW0oZUMsITApLHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbSh0QyxEYXRlLm5vdygpKTtjb25zdHtvcmlnaW46ZX09eHModGhpcy5fb3B0aW9ucy51cmwpLHQ9YCR7ZX0vZW1iZWRkZWQtY2hlY2tvdXQvYWxsb3ctY29va2llP3JldHVyblVybD0ke2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLl9sb2NhdGlvbi5ocmVmKX1gO3JldHVybiBkb2N1bWVudC5ib2R5LnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIix0aGlzLl9sb2NhdGlvbi5yZXBsYWNlKHQpLG5ldyBQcm9taXNlKCgpPT57fSl9X3JldHJ5QWxsb3dDb29raWUoZSl7Y29uc3QgdD1OdW1iZXIodGhpcy5fc3RvcmFnZS5nZXRJdGVtKHRDKSk7cmV0dXJuKCF0fHxEYXRlLm5vdygpLXQ+NmU1KSYmZSBpbnN0YW5jZW9mIFh3JiZlLnN1YnR5cGU9PT1Kdy5NaXNzaW5nQ29udGVudD8odGhpcy5fc3RvcmFnZS5yZW1vdmVJdGVtKHRDKSx0aGlzLl9zdG9yYWdlLnJlbW92ZUl0ZW0oZUMpLHRoaXMuX2FsbG93Q29va2llKCkpOlByb21pc2UucmVqZWN0KCl9fTtuQz1mdW5jdGlvbihlLHQsbixpKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsYT1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxuKTppO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKWE9UmVmbGVjdC5kZWNvcmF0ZShlLHQsbixpKTtlbHNlIGZvcih2YXIgcz1lLmxlbmd0aC0xO3M+PTA7cy0tKShyPWVbc10pJiYoYT0obzwzP3IoYSk6bz4zP3IodCxuLGEpOnIodCxuKSl8fGEpO3JldHVybiBvPjMmJmEmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4sYSksYX0oW0NyXSxuQyk7Y29uc3QgaUM9bkM7Y2xhc3MgckN7Y29uc3RydWN0b3IoZSl7dGhpcy5fb3B0aW9ucz1lfWNyZWF0ZUZyYW1lKGUsdCl7Y29uc3Qgbj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KSx7dGltZW91dDppPTZlNH09dGhpcy5fb3B0aW9uc3x8e307aWYoIW4pdGhyb3cgbmV3IFh3KFwiVW5hYmxlIHRvIGVtYmVkIHRoZSBpZnJhbWUgYmVjYXVzZSB0aGUgY29udGFpbmVyIGVsZW1lbnQgY291bGQgbm90IGJlIGZvdW5kLlwiLEp3Lk1pc3NpbmdDb250YWluZXIpO2NvbnN0IHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtyZXR1cm4gci5zcmM9ZSxyLnN0eWxlLmJvcmRlcj1cIm5vbmVcIixyLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsci5zdHlsZS53aWR0aD1cIjEwMCVcIixyLmFsbG93UGF5bWVudFJlcXVlc3Q9ITAsci5hbGxvdz1cInBheW1lbnRcIixuLmFwcGVuZENoaWxkKHIpLHRoaXMuX3RvUmVzaXphYmxlRnJhbWUocixpKS5jYXRjaChlPT57dGhyb3cgbi5yZW1vdmVDaGlsZChyKSxlfSl9X3RvUmVzaXphYmxlRnJhbWUoZSx0KXtyZXR1cm4gbmV3IFByb21pc2UoKG4saSk9Pntjb25zdCByPXdpbmRvdy5zZXRUaW1lb3V0KCgpPT57aShuZXcgWHcoXCJVbmFibGUgdG8gZW1iZWQgdGhlIGlmcmFtZSBiZWNhdXNlIHRoZSBjb250ZW50IGNvdWxkIG5vdCBiZSBsb2FkZWQuXCIpKX0sdCksbz10PT57aWYoKHQub3JpZ2luPT09eHMoZS5zcmMpLm9yaWdpbnx8dC5vcmlnaW49PT1yZCh4cyhlLnNyYykpLm9yaWdpbikmJihCcyh0LmRhdGEsS3cuRnJhbWVFcnJvcikmJihhKCksaShuZXcgWHcodC5kYXRhLnBheWxvYWQubWVzc2FnZSxKdy5NaXNzaW5nQ29udGVudCkpKSxCcyh0LmRhdGEsS3cuRnJhbWVMb2FkZWQpKSl7ZS5zdHlsZS5kaXNwbGF5PVwiXCI7Y29uc3QgaT1Icyh7c2Nyb2xsaW5nOiExLHNpemVXaWR0aDohMSxoZWlnaHRDYWxjdWxhdGlvbk1ldGhvZDp0LmRhdGEucGF5bG9hZCYmdC5kYXRhLnBheWxvYWQuY29udGVudElkP1widGFnZ2VkRWxlbWVudFwiOlwibG93ZXN0RWxlbWVudFwifSxlKTthKCksbihpW2kubGVuZ3RoLTFdKX19LGE9KCk9Pnt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixvKSx3aW5kb3cuY2xlYXJUaW1lb3V0KHIpfTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixvKX0pfX1mdW5jdGlvbiBvQyhlKXtjb25zdCB0PXhzKGUudXJsKS5vcmlnaW47cmV0dXJuIG5ldyBpQyhuZXcgckMsbmV3IGFkKHQpLG5ldyBqcyh0KSxuZXcgQmEoe3N0eWxlczplLnN0eWxlcyYmZS5zdHlsZXMubG9hZGluZ0luZGljYXRvcn0pLG4oKSxuZXcgdm0oXCJCaWdDb21tZXJjZS5FbWJlZGRlZENoZWNrb3V0XCIpLHdpbmRvdy5sb2NhdGlvbixlKS5hdHRhY2goKX1mdW5jdGlvbiBhQyhlKXtpZighZS5wYXlsb2FkfHwhZS5wYXlsb2FkLmNvbnRlbnRJZClyZXR1cm47Y29uc3QgdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlLnBheWxvYWQuY29udGVudElkKTt0JiYhdC5oYXNBdHRyaWJ1dGUoXCJkYXRhLWlmcmFtZS1oZWlnaHRcIikmJnQuc2V0QXR0cmlidXRlKFwiZGF0YS1pZnJhbWUtaGVpZ2h0XCIsXCJcIil9ZnVuY3Rpb24gc0MoZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcIm1lc3NhZ2VcImluIGUmJlwidHlwZVwiaW4gZX1sZXQgZEM9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LG4saT17fSl7dGhpcy5fbWVzc2FnZUxpc3RlbmVyPWUsdGhpcy5fbWVzc2FnZVBvc3Rlcj10LHRoaXMuX3VudGFyZ2V0ZWRNZXNzYWdlUG9zdGVyPW4sdGhpcy5fbWVzc2FnZUhhbmRsZXJzPWksdGhpcy5fbWVzc2FnZUxpc3RlbmVyLmxpc3RlbigpfXBvc3RDb21wbGV0ZSgpe2NvbnN0IGU9e3R5cGU6S3cuQ2hlY2tvdXRDb21wbGV0ZX07dGhpcy5fcG9zdE1lc3NhZ2UoZSl9cG9zdEVycm9yKGUpe2NvbnN0IHQ9e3R5cGU6S3cuQ2hlY2tvdXRFcnJvcixwYXlsb2FkOnRoaXMuX3RyYW5zZm9ybUVycm9yKGUpfTt0aGlzLl9wb3N0TWVzc2FnZSh0KX1wb3N0RnJhbWVFcnJvcihlKXtjb25zdCB0PXt0eXBlOkt3LkZyYW1lRXJyb3IscGF5bG9hZDp0aGlzLl90cmFuc2Zvcm1FcnJvcihlKX07dGhpcy5fcG9zdE1lc3NhZ2UodCx7dW50YXJnZXRlZDohMH0pfXBvc3RGcmFtZUxvYWRlZChlKXtjb25zdCB0PXt0eXBlOkt3LkZyYW1lTG9hZGVkLHBheWxvYWQ6ZX07dGhpcy5fcG9zdE1lc3NhZ2UodCl9cG9zdExvYWRlZCgpe2NvbnN0IGU9e3R5cGU6S3cuQ2hlY2tvdXRMb2FkZWR9O3RoaXMuX3Bvc3RNZXNzYWdlKGUpfXBvc3RTaWduZWRPdXQoKXtjb25zdCBlPXt0eXBlOkt3LlNpZ25lZE91dH07dGhpcy5fcG9zdE1lc3NhZ2UoZSl9cmVjZWl2ZVN0eWxlcyhlKXt0aGlzLl9tZXNzYWdlTGlzdGVuZXIuYWRkTGlzdGVuZXIoWncuU3R5bGVDb25maWd1cmVkLCh7cGF5bG9hZDp0fSk9PntlKHQpfSl9X3Bvc3RNZXNzYWdlKGUsdCl7aWYodGhpcy5fbm90aWZ5TWVzc2FnZUhhbmRsZXJzKGUpLHQmJnQudW50YXJnZXRlZClyZXR1cm4gdGhpcy5fdW50YXJnZXRlZE1lc3NhZ2VQb3N0ZXIucG9zdChlKTt0aGlzLl9tZXNzYWdlUG9zdGVyLnBvc3QoZSl9X25vdGlmeU1lc3NhZ2VIYW5kbGVycyhlKXtPYmplY3Qua2V5cyh0aGlzLl9tZXNzYWdlSGFuZGxlcnMpLmZvckVhY2godD0+e2lmKGUudHlwZSE9PXQpcmV0dXJuO2NvbnN0IG49dGhpcy5fbWVzc2FnZUhhbmRsZXJzW3RdO24mJm4uY2FsbChudWxsLGUpfSl9X3RyYW5zZm9ybUVycm9yKGUpe3JldHVybnttZXNzYWdlOmUubWVzc2FnZSx0eXBlOnNDKGUpP2UudHlwZTp2b2lkIDAsc3VidHlwZTpzQyhlKT9lLnN1YnR5cGU6dm9pZCAwfX19O2RDPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxhPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pOmk7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpYT1SZWZsZWN0LmRlY29yYXRlKGUsdCxuLGkpO2Vsc2UgZm9yKHZhciBzPWUubGVuZ3RoLTE7cz49MDtzLS0pKHI9ZVtzXSkmJihhPShvPDM/cihhKTpvPjM/cih0LG4sYSk6cih0LG4pKXx8YSk7cmV0dXJuIG8+MyYmYSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbixhKSxhfShbQ3JdLGRDKTtjb25zdCBjQz1kQztsZXQgbEM9Y2xhc3N7cG9zdENvbXBsZXRlKCl7fXBvc3RFcnJvcigpe31wb3N0RnJhbWVFcnJvcigpe31wb3N0RnJhbWVMb2FkZWQoKXt9cG9zdExvYWRlZCgpe31wb3N0U2lnbmVkT3V0KCl7fXJlY2VpdmVTdHlsZXMoKXt9fTtsQz1mdW5jdGlvbihlLHQsbixpKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsYT1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxuKTppO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKWE9UmVmbGVjdC5kZWNvcmF0ZShlLHQsbixpKTtlbHNlIGZvcih2YXIgcz1lLmxlbmd0aC0xO3M+PTA7cy0tKShyPWVbc10pJiYoYT0obzwzP3IoYSk6bz4zP3IodCxuLGEpOnIodCxuKSl8fGEpO3JldHVybiBvPjMmJmEmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4sYSksYX0oW0NyXSxsQyk7Y29uc3QgdUM9bEM7ZnVuY3Rpb24gaEMoZSl7R2UoOTM5KTtjb25zdCB0PWUucGFyZW50V2luZG93fHx3aW5kb3cucGFyZW50O3JldHVybiB3aW5kb3c9PT10P25ldyB1QzpuZXcgY0MobmV3IGFkKGUucGFyZW50T3JpZ2luKSxuZXcganMoZS5wYXJlbnRPcmlnaW4sdCksbmV3IGpzKFwiKlwiLHQpLHtbS3cuRnJhbWVMb2FkZWRdOmFDfSl9Y29uc3QgcEM9XCJlblwiLG1DPVwib3B0aW1pemVkX2NoZWNrb3V0XCI7bGV0IHlDPWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dmFyIG47dGhpcy5fbG9nZ2VyPXQ7Y29uc3R7bG9jYWxlOmksbG9jYWxlczpyLHRyYW5zbGF0aW9uczpvfT10aGlzLl90cmFuc2Zvcm1Db25maWcoZSk7dGhpcy5fbG9jYWxlPWksdGhpcy5fbG9jYWxlcz1yLHRoaXMuX3RyYW5zbGF0aW9ucz1vLHRoaXMuX2Zvcm1hdHRlcnM9e30sdGhpcy5faXNDc3BOb25jZUV4cGVyaW1lbnRFbmFibGVkPW51bGw9PT0obj1lLmlzQ3NwTm9uY2VFeHBlcmltZW50RW5hYmxlZCl8fHZvaWQgMD09PW58fG59bWFwS2V5cyhlKXtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKHQ9Pntjb25zdCBuPWAke21DfS4ke2VbdF19YDt0aGlzLl90cmFuc2xhdGlvbnNbYCR7bUN9LiR7dH1gXT10aGlzLl90cmFuc2xhdGlvbnNbbl19KX1nZXRMb2NhbGUoKXtyZXR1cm4gdGhpcy5faGFzVHJhbnNsYXRpb25zKCk/dGhpcy5fbG9jYWxlOnBDfXRyYW5zbGF0ZShlLHQ9e30pe3ZhciBuO2NvbnN0IGk9YCR7bUN9LiR7ZX1gO2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0aGlzLl90cmFuc2xhdGlvbnNbaV0pcmV0dXJuIHRoaXMuX2xvZ2dlci53YXJuKGBUcmFuc2xhdGlvbiBrZXkgXCIke2l9XCIgaXMgbWlzc2luZ2ApLGk7aWYodGhpcy5faXNDc3BOb25jZUV4cGVyaW1lbnRFbmFibGVkKXt0aGlzLl9mb3JtYXR0ZXJzW2ldfHwodGhpcy5fZm9ybWF0dGVyc1tpXT1uZXcgamUodGhpcy5fZXNjYXBlU3BlY2lhbENoYXJhY3RlcnModGhpcy5fdHJhbnNsYXRpb25zW2ldfHxcIlwiKSx0aGlzLl9sb2NhbGVzW2ldLHZvaWQgMCx7aWdub3JlVGFnOiEwfSkpO3RyeXtyZXR1cm4gdGhpcy5fZm9ybWF0dGVyc1tpXS5mb3JtYXQodGhpcy5fdHJhbnNmb3JtRGF0YSh0KSl9Y2F0Y2goZSl7aWYodGhpcy5faXNGb3JtYXRFcnJvcihlKSlyZXR1cm4gbnVsbCE9PShuPWUub3JpZ2luYWxNZXNzYWdlKSYmdm9pZCAwIT09bj9uOlwiXCI7dGhyb3cgZX19aWYoIXRoaXMuX2Zvcm1hdHRlcnNbaV0pe2NvbnN0IGU9bmV3IFVlKHRoaXMuX2xvY2FsZXNbaV0pO3RoaXMuX2Zvcm1hdHRlcnNbaV09ZS5jb21waWxlKHRoaXMuX3RyYW5zbGF0aW9uc1tpXXx8XCJcIil9cmV0dXJuIHRoaXMuX2Zvcm1hdHRlcnNbaV0odGhpcy5fdHJhbnNmb3JtRGF0YSh0KSl9X3RyYW5zZm9ybUNvbmZpZyhlPXt9KXtjb25zdCB0PXtkZWZhdWx0TG9jYWxlOlwiXCIsZGVmYXVsdFRyYW5zbGF0aW9uczp7fSx0cmFuc2xhdGlvbnM6e30sbG9jYWxlczp7fSxsb2NhbGU6ZS5sb2NhbGV8fHBDfSxuPWUubG9jYWxlc3x8e30saT10aGlzLl9mbGF0dGVuT2JqZWN0KGUudHJhbnNsYXRpb25zfHx7fSkscj10aGlzLl9mbGF0dGVuT2JqZWN0KGUuZGVmYXVsdFRyYW5zbGF0aW9uc3x8e30pLG89dGhpcy5fZmxhdHRlbk9iamVjdChlLmZhbGxiYWNrVHJhbnNsYXRpb25zfHx7fSk7cmV0dXJuIGVlKE9iamVjdC5rZXlzKG8pLE9iamVjdC5rZXlzKHIpLE9iamVjdC5rZXlzKGkpKS5mb3JFYWNoKGE9Pnt2YXIgcyxkO2kmJmlbYV0/KHQudHJhbnNsYXRpb25zW2FdPWlbYV0sdC5sb2NhbGVzW2FdPW5bYV18fHQubG9jYWxlKTpyW2FdPyh0LnRyYW5zbGF0aW9uc1thXT1yW2FdLHQubG9jYWxlc1thXT1udWxsIT09KHM9ZS5kZWZhdWx0TG9jYWxlKSYmdm9pZCAwIT09cz9zOnBDKToodC50cmFuc2xhdGlvbnNbYV09b1thXSx0LmxvY2FsZXNbYV09bnVsbCE9PShkPWUuZmFsbGJhY2tMb2NhbGUpJiZ2b2lkIDAhPT1kP2Q6cEMpfSksdH1fZmxhdHRlbk9iamVjdChlLHQ9e30sbj1cIlwiKXt0cnl7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChpPT57Y29uc3Qgcj1lW2ldLG89bj9gJHtufS4ke2l9YDppO2lmKEQocikpcmV0dXJuIHRoaXMuX2ZsYXR0ZW5PYmplY3Qocix0LG8pO3Rbb109cn0pfWNhdGNoKGUpe3RoaXMuX2xvZ2dlci53YXJuKGBVbmFibGUgdG8gcGFyc2Ugb2JqZWN0OiAke2V9YCl9cmV0dXJuIHR9X3RyYW5zZm9ybURhdGEoZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLnJlZHVjZSgodCxuKT0+e2NvbnN0IGk9ZVtuXTtyZXR1cm4gdFtuXT1udWxsPT1pP1wiXCI6aSx0fSx7fSl9X2hhc1RyYW5zbGF0aW9ucygpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLl9sb2NhbGVzKS5tYXAoZT0+dGhpcy5fbG9jYWxlc1tlXSkuZmlsdGVyKGU9PmUuc3BsaXQoXCItXCIpWzBdPT09dGhpcy5fbG9jYWxlLnNwbGl0KFwiLVwiKVswXSkubGVuZ3RoPjB9X2lzRm9ybWF0RXJyb3IoZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcIm9yaWdpbmFsTWVzc2FnZVwiaW4gZX1fZXNjYXBlU3BlY2lhbENoYXJhY3RlcnMoZSl7cmV0dXJuIGUucmVwbGFjZSgvKFxcdyspPScoW14nXSopJy9nLFwiJDE9JyckMicnXCIpfX07eUM9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLGE9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik6aTtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlhPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG4saSk7ZWxzZSBmb3IodmFyIHM9ZS5sZW5ndGgtMTtzPj0wO3MtLSkocj1lW3NdKSYmKGE9KG88Mz9yKGEpOm8+Mz9yKHQsbixhKTpyKHQsbikpfHxhKTtyZXR1cm4gbz4zJiZhJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLGEpLGF9KFtDcl0seUMpO2NvbnN0IGdDPXlDO2Z1bmN0aW9uIHZDKGU9e30pe3JldHVybiBuZXcgZ0MoZSx5dCgpKX1sZXQgZkM9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5fc3RvcmVDb25maWc9ZSx0aGlzLl9jdXN0b21lckZvcm1hdHRlcj1uZXcgYnIodGhpcy5fc3RvcmVDb25maWcuc2hvcHBlckN1cnJlbmN5KSx0aGlzLl9zdG9yZUZvcm1hdHRlcj1uZXcgYnIodGhpcy5fc3RvcmVDb25maWcuY3VycmVuY3kpfXRvQ3VzdG9tZXJDdXJyZW5jeShlKXtjb25zdCB0PXRoaXMuX3N0b3JlQ29uZmlnLnNob3BwZXJDdXJyZW5jeS5leGNoYW5nZVJhdGU7cmV0dXJuIHRoaXMuX2N1c3RvbWVyRm9ybWF0dGVyLmZvcm1hdChlKnQpfXRvU3RvcmVDdXJyZW5jeShlKXtyZXR1cm4gdGhpcy5fc3RvcmVGb3JtYXR0ZXIuZm9ybWF0KGUpfX07ZkM9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLGE9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik6aTtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlhPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG4saSk7ZWxzZSBmb3IodmFyIHM9ZS5sZW5ndGgtMTtzPj0wO3MtLSkocj1lW3NdKSYmKGE9KG88Mz9yKGEpOm8+Mz9yKHQsbixhKTpyKHQsbikpfHxhKTtyZXR1cm4gbz4zJiZhJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLGEpLGF9KFtDcl0sZkMpO2NvbnN0IFNDPWZDO2Z1bmN0aW9uIF9DKGUpe3JldHVybiBuZXcgU0MoZSl9ZnVuY3Rpb24gd0MoZSl7cmV0dXJuIGUmJlwiZ2FcImluIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuZ2F9ZnVuY3Rpb24gQ0MoZSx0KXt3Qyh3aW5kb3cpJiZ3aW5kb3cuZ2EoXCJzZW5kXCIsZSxPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse25vbkludGVyYWN0aW9uOiExfSkpfWZ1bmN0aW9uIElDKGUpe3JldHVybiBiQyhlKS5sZW5ndGg+PTgwOTZ9ZnVuY3Rpb24gYkMoZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLnJlZHVjZSgodCxuKT0+e2NvbnN0IGk9dHlwZW9mIGVbbl07cmV0dXJuXCJzdHJpbmdcIj09PWl8fFwibnVtYmVyXCI9PT1pP1suLi50LGAke259PSR7ZVtuXX1gXTpcIm9iamVjdFwiPT09aSYmbnVsbCE9PWVbbl0/Wy4uLnQsYkMoZVtuXSldOnR9LFtdKS5qb2luKFwiJlwiKX12YXIgUEM7IWZ1bmN0aW9uKGUpe2VbZS5DVVNUT01FUj0xXT1cIkNVU1RPTUVSXCIsZVtlLlNISVBQSU5HPTJdPVwiU0hJUFBJTkdcIixlW2UuQklMTElORz0zXT1cIkJJTExJTkdcIixlW2UuUEFZTUVOVD00XT1cIlBBWU1FTlRcIn0oUEN8fChQQz17fSkpO2NvbnN0IE9DPXtjdXN0b21lcjpQQy5DVVNUT01FUixzaGlwcGluZzpQQy5TSElQUElORyxiaWxsaW5nOlBDLkJJTExJTkcscGF5bWVudDpQQy5QQVlNRU5UfTtjbGFzcyBFQ3tjb25zdHJ1Y3RvcihlLHQsbix7Y2hlY2tvdXRTdGVwczppfT17fSl7aWYodGhpcy5jaGVja291dFNlcnZpY2U9ZSx0aGlzLmFuYWx5dGljc0V4dHJhSXRlbXNNYW5hZ2VyPXQsdGhpcy5hbmFseXRpY3M9bix0aGlzLl9jaGVja291dFN0YXJ0ZWQ9ITEsdGhpcy5fY29tcGxldGVkU3RlcHM9e30sdGhpcy5fdmlld2VkU3RlcHM9e30sdGhpcy5fYW5hbHl0aWNTdGVwT3JkZXI9W1wiY3VzdG9tZXJcIixcInNoaXBwaW5nXCIsXCJiaWxsaW5nXCIsXCJwYXltZW50XCJdLHZvaWQgMCE9PWkpe2lmKGkuc29tZShlPT4hKGUgaW4gT0MpKSl0aHJvdyBuZXcgRnQoYEludmFsaWQgY2hlY2tvdXQgc3RlcHMgcHJvdmlkZWQuIFZhbGlkIHZhbHVlcyBhcmU6ICR7UihPQykuam9pbihcIiwgXCIpfS5gKTt0aGlzLl9hbmFseXRpY1N0ZXBPcmRlcj1pfX10cmFja0NoZWNrb3V0U3RhcnRlZCgpe2lmKHRoaXMuX2NoZWNrb3V0U3RhcnRlZClyZXR1cm47Y29uc3QgZT10aGlzLmdldENoZWNrb3V0KCk7aWYoIWUpcmV0dXJuO2NvbnN0e2NvdXBvbnM6dCxncmFuZFRvdGFsOm4sc2hpcHBpbmdDb3N0VG90YWw6aSx0YXhUb3RhbDpyLGNhcnQ6e2xpbmVJdGVtczpvLGRpc2NvdW50QW1vdW50OmEsaWQ6c319PWUsZD10aGlzLmFuYWx5dGljc0V4dHJhSXRlbXNNYW5hZ2VyLnNhdmVFeHRyYUl0ZW1zRGF0YShzLG8pO3RoaXMuYW5hbHl0aWNzLnRyYWNrKFwiQ2hlY2tvdXQgU3RhcnRlZFwiLHRoaXMuZ2V0VHJhY2tpbmdQYXlsb2FkKHtyZXZlbnVlOm4sc2hpcHBpbmc6aSx0YXg6cixkaXNjb3VudDphLGNvdXBvbnM6dCxsaW5lSXRlbXM6byxleHRyYUl0ZW1zRGF0YTpkfSkpLHRoaXMuX2NoZWNrb3V0U3RhcnRlZD0hMH10cmFja09yZGVyQ29tcGxldGUoKXt2YXIgZTtjb25zdCB0PXRoaXMuZ2V0T3JkZXIoKTtpZighdClyZXR1cm47Y29uc3R7aXNDb21wbGV0ZTpuLG9yZGVySWQ6aSxvcmRlckFtb3VudDpyLHNoaXBwaW5nQ29zdFRvdGFsOm8sdGF4VG90YWw6YSxkaXNjb3VudEFtb3VudDpzLGNvdXBvbnM6ZCxsaW5lSXRlbXM6YyxjYXJ0SWQ6bH09dDtpZighbilyZXR1cm47Y29uc3QgdT10aGlzLmFuYWx5dGljc0V4dHJhSXRlbXNNYW5hZ2VyLnJlYWRFeHRyYUl0ZW1zRGF0YShsKTtpZihudWxsPT09dSlyZXR1cm47Y29uc3QgaD1udWxsPT09KGU9dGhpcy5jaGVja291dFNlcnZpY2UuZ2V0U3RhdGUoKS5kYXRhLmdldENvbmZpZygpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzW1wiREFUQS02ODkxLm1pc3Npbmdfb3JkZXJzX3dpdGhpbl9HQVwiXSxwPXRoaXMuZ2V0VHJhY2tpbmdQYXlsb2FkKHtvcmRlcklkOmkscmV2ZW51ZTpyLHNoaXBwaW5nOm8sdGF4OmEsZGlzY291bnQ6cyxjb3Vwb25zOmQsZXh0cmFJdGVtc0RhdGE6dSxsaW5lSXRlbXM6Y30pO2lmKGgmJkpjKHdpbmRvdykmJndDKHdpbmRvdykmJklDKHApKXJldHVybiBDQyhcInRyYW5zYWN0aW9uXCIse1wiJnRpXCI6cC5vcmRlcl9pZCxcIiZ0YVwiOnAuYWZmaWxpYXRpb24sXCImdHJcIjpwLnJldmVudWUsXCImdHNcIjpwLnNoaXBwaW5nLFwiJnR0XCI6cC50YXgsXCImdGNjXCI6cC5jb3Vwb24sXCImY3VcIjpwLmN1cnJlbmN5fSkscC5wcm9kdWN0cy5mb3JFYWNoKGU9PntDQyhcIml0ZW1cIix7XCImdGlcIjpwLm9yZGVyX2lkLFwiJmluXCI6ZS5uYW1lLFwiJmljXCI6ZS5za3UsXCImaXZcIjpgJHtlLmNhdGVnb3J5fWAsXCImaXBcIjplLnByaWNlLFwiJmlxXCI6ZS5xdWFudGl0eX0pfSksdGhpcy5hbmFseXRpY3NFeHRyYUl0ZW1zTWFuYWdlci5jbGVhckV4dHJhSXRlbURhdGEobCk7dGhpcy5hbmFseXRpY3MudHJhY2soXCJPcmRlciBDb21wbGV0ZWRcIixwKSx0aGlzLmFuYWx5dGljc0V4dHJhSXRlbXNNYW5hZ2VyLmNsZWFyRXh0cmFJdGVtRGF0YShsKX10cmFja1N0ZXBWaWV3ZWQoZSl7Y29uc3QgdD10aGlzLmdldElkRnJvbVN0ZXAoZSk7dCYmIXRoaXMuaGFzU3RlcFZpZXdlZCh0KSYmKHRoaXMudHJhY2tWaWV3ZWQodCksdGhpcy5iYWNrZmlsbCh0KSl9dHJhY2tTdGVwQ29tcGxldGVkKGUpe2NvbnN0IHQ9dGhpcy5nZXRJZEZyb21TdGVwKGUpO3QmJiF0aGlzLmhhc1N0ZXBDb21wbGV0ZWQodCkmJih0aGlzLmJhY2tmaWxsKHQpLHRoaXMudHJhY2tDb21wbGV0ZWQodCkpfWJhY2tmaWxsKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMuX2FuYWx5dGljU3RlcE9yZGVyKXtjb25zdCBuPXRoaXMuZ2V0SWRGcm9tU3RlcCh0KTtpZighbilicmVhaztpZih0aGlzLmhhc1N0ZXBWaWV3ZWQobil8fHRoaXMudHJhY2tWaWV3ZWQobiksbj09PWUpYnJlYWs7dGhpcy5oYXNTdGVwQ29tcGxldGVkKG4pfHx0aGlzLnRyYWNrQ29tcGxldGVkKG4pfX10cmFja0NvbXBsZXRlZChlKXtjb25zdCB0PXRoaXMuZ2V0U2VsZWN0ZWRTaGlwcGluZ09wdGlvbigpLHtjb2RlOm49XCJcIn09dGhpcy5nZXRTaG9wcGVyQ3VycmVuY3koKXx8e30saT10aGlzLmdldFBheW1lbnRNZXRob2ROYW1lKCkscj17c3RlcDplLGN1cnJlbmN5Om59O3QmJihyLnNoaXBwaW5nX21ldGhvZD10LmRlc2NyaXB0aW9uKSxpJiYoci5wYXltZW50X21ldGhvZD1pKSxyLnNoaXBwaW5nX21ldGhvZHx8ci5wYXltZW50X21ldGhvZHx8KHIuc2hpcHBpbmdfbWV0aG9kPVwiIFwiKSx0aGlzLmFuYWx5dGljcy50cmFjayhcIkNoZWNrb3V0IFN0ZXAgQ29tcGxldGVkXCIscik7Y29uc3Qgbz10P3QuaWQ6XCJcIixhPWU9PT1QQy5TSElQUElORz9gJHtlfS0ke299YDplO3RoaXMuX2NvbXBsZXRlZFN0ZXBzW2FdPSEwfWdldFRyYWNraW5nUGF5bG9hZCh7b3JkZXJJZDplLHJldmVudWU6dCxzaGlwcGluZzpuLHRheDppLGRpc2NvdW50OnIsY291cG9uczpvLGV4dHJhSXRlbXNEYXRhOmEsbGluZUl0ZW1zOnN9KXtjb25zdHtjb2RlOmQ9XCJcIn09dGhpcy5nZXRTaG9wcGVyQ3VycmVuY3koKXx8e30se3N0b3JlTmFtZTpjPVwiXCJ9PXRoaXMuZ2V0U3RvcmVQcm9maWxlKCl8fHt9O3JldHVybntvcmRlcl9pZDpTdHJpbmcoZSksYWZmaWxpYXRpb246YyxyZXZlbnVlOnRoaXMudG9TaG9wcGVyQ3VycmVuY3kodCksc2hpcHBpbmc6dGhpcy50b1Nob3BwZXJDdXJyZW5jeShuKSx0YXg6dGhpcy50b1Nob3BwZXJDdXJyZW5jeShpKSxkaXNjb3VudDp0aGlzLnRvU2hvcHBlckN1cnJlbmN5KHIpLGNvdXBvbjoob3x8W10pLm1hcChlPT5lLmNvZGUudG9VcHBlckNhc2UoKSkuam9pbihcIixcIiksY3VycmVuY3k6ZCxwcm9kdWN0czp0aGlzLmdldFByb2R1Y3RzKGEscyl9fWhhc1N0ZXBDb21wbGV0ZWQoZSl7Y29uc3QgdD10aGlzLmdldFNlbGVjdGVkU2hpcHBpbmdPcHRpb24oKSxuPXQ/dC5pZDpcIlwiO3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5fY29tcGxldGVkU3RlcHMsZSl8fGU9PT1QQy5TSElQUElORyYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuX2NvbXBsZXRlZFN0ZXBzLGAke2V9LSR7bn1gKX1oYXNTdGVwVmlld2VkKGUpe3JldHVybiEhdGhpcy5fdmlld2VkU3RlcHNbZV19Z2V0SWRGcm9tU3RlcChlKXtjb25zdCB0PWUuc3BsaXQoXCIuXCIpO3JldHVybiBPQ1t0WzBdXXx8bnVsbH10cmFja1ZpZXdlZChlKXtjb25zdCB0PXRoaXMuZ2V0U2hvcHBlckN1cnJlbmN5KCk7dGhpcy5hbmFseXRpY3MudHJhY2soXCJDaGVja291dCBTdGVwIFZpZXdlZFwiLHtzdGVwOmUsY3VycmVuY3k6dD90LmNvZGU6XCJcIn0pLHRoaXMuX3ZpZXdlZFN0ZXBzW2VdPSEwfWdldE9yZGVyKCl7Y29uc3R7ZGF0YTp7Z2V0T3JkZXI6ZX19PXRoaXMuY2hlY2tvdXRTZXJ2aWNlLmdldFN0YXRlKCk7cmV0dXJuIGUoKX1nZXRDaGVja291dCgpe2NvbnN0e2RhdGE6e2dldENoZWNrb3V0OmV9fT10aGlzLmNoZWNrb3V0U2VydmljZS5nZXRTdGF0ZSgpO3JldHVybiBlKCl9Z2V0U2hvcHBlckN1cnJlbmN5KCl7Y29uc3R7ZGF0YTp7Z2V0Q29uZmlnOmV9fT10aGlzLmNoZWNrb3V0U2VydmljZS5nZXRTdGF0ZSgpLHQ9ZSgpO3JldHVybiB0JiZ0LnNob3BwZXJDdXJyZW5jeX1nZXRTdG9yZVByb2ZpbGUoKXtjb25zdHtkYXRhOntnZXRDb25maWc6ZX19PXRoaXMuY2hlY2tvdXRTZXJ2aWNlLmdldFN0YXRlKCksdD1lKCk7cmV0dXJuIHQmJnQuc3RvcmVQcm9maWxlfXRvU2hvcHBlckN1cnJlbmN5KGUpe2NvbnN0e2V4Y2hhbmdlUmF0ZTp0PTF9PXRoaXMuZ2V0U2hvcHBlckN1cnJlbmN5KCl8fHt9O3JldHVybiBNYXRoLnJvdW5kKGUqdCoxMDApLzEwMH1nZXRTZWxlY3RlZFNoaXBwaW5nT3B0aW9uKCl7Y29uc3R7ZGF0YTplfT10aGlzLmNoZWNrb3V0U2VydmljZS5nZXRTdGF0ZSgpLHQ9ZS5nZXRTZWxlY3RlZFNoaXBwaW5nT3B0aW9uKCk7cmV0dXJuIHQmJnQuaWQmJnQuZGVzY3JpcHRpb24/dDpudWxsfWdldFBheW1lbnRNZXRob2ROYW1lKCl7Y29uc3R7ZGF0YTplfT10aGlzLmNoZWNrb3V0U2VydmljZS5nZXRTdGF0ZSgpLHQ9ZS5nZXRTZWxlY3RlZFBheW1lbnRNZXRob2QoKTtyZXR1cm4gdCYmdC5jb25maWcmJnQuY29uZmlnLmRpc3BsYXlOYW1lfHxcIlwifWdldFByb2R1Y3RzKGUsdCl7Y29uc3Qgbj0odC5jdXN0b21JdGVtc3x8W10pLm1hcChlPT4oe3Byb2R1Y3RfaWQ6ZS5pZCxza3U6ZS5za3UscHJpY2U6ZS5saXN0UHJpY2UscXVhbnRpdHk6ZS5xdWFudGl0eSxuYW1lOmUubmFtZX0pKSxpPXQuZ2lmdENlcnRpZmljYXRlcy5tYXAoZT0+KHtwcm9kdWN0X2lkOmUuaWQscHJpY2U6dGhpcy50b1Nob3BwZXJDdXJyZW5jeShlLmFtb3VudCksbmFtZTplLm5hbWUscXVhbnRpdHk6MX0pKTtyZXR1cm5bLi4ubiwuLi5bLi4udC5waHlzaWNhbEl0ZW1zLC4uLnQuZGlnaXRhbEl0ZW1zXS5tYXAodD0+e2xldCBuO3Qub3B0aW9ucyYmdC5vcHRpb25zLmxlbmd0aCYmKG49dC5vcHRpb25zLm1hcChlPT5gJHtlLm5hbWV9OiR7ZS52YWx1ZX1gKSxuLnNvcnQoKSk7Y29uc3QgaT1BcnJheS5pc0FycmF5KG4pJiZuLmxlbmd0aD9uLmpvaW4oXCIsIFwiKTpcInNpbmdsZS1wcm9kdWN0LW9wdGlvblwiLHI9ZVt0LnByb2R1Y3RJZF0mJmVbdC5wcm9kdWN0SWRdLmJyYW5kO3JldHVybiBPYmplY3QuYXNzaWduKHtwcm9kdWN0X2lkOlN0cmluZyh0LnByb2R1Y3RJZCksc2t1OnQuc2t1LHByaWNlOnQuc2FsZVByaWNlLGltYWdlX3VybDp0LmltYWdlVXJsLG5hbWU6dC5uYW1lLHF1YW50aXR5OnQucXVhbnRpdHksY2F0ZWdvcnk6ZVt0LnByb2R1Y3RJZF0/ZVt0LnByb2R1Y3RJZF0uY2F0ZWdvcnk6XCJcIix2YXJpYW50Oml9LHImJnticmFuZDpyfSl9KSwuLi5pXX19Y2xhc3MgQUN7dHJhY2tDaGVja291dFN0YXJ0ZWQoKXt9dHJhY2tPcmRlckNvbXBsZXRlKCl7fXRyYWNrU3RlcFZpZXdlZCgpe310cmFja1N0ZXBDb21wbGV0ZWQoKXt9fWZ1bmN0aW9uIGtDKGUsdCl7Y29uc3R7ZGF0YTpufT1lLmdldFN0YXRlKCksaT1uLmdldENvbmZpZygpO2lmKCFpKXRocm93IG5ldyBRZShXZS5NaXNzaW5nQ2hlY2tvdXRDb25maWcpO2NvbnN0e2lzQW5hbHl0aWNzRW5hYmxlZDpyfT1pLmNoZWNrb3V0U2V0dGluZ3M7cmV0dXJuIHImJkpjKHdpbmRvdyk/bmV3IEVDKGUsbmV3IEtjKGtlKSx3aW5kb3cuYW5hbHl0aWNzLHQpOm5ldyBBQ31mdW5jdGlvbiBUQyhlKXtyZXR1cm4gQm9vbGVhbihlLmhhc093blByb3BlcnR5KFwiYnJhaW50cmVlRmFzdGxhbmVcIikpfWNsYXNzIERDe2NvbnN0cnVjdG9yKGUpe3RoaXMuY2hlY2tvdXRTZXJ2aWNlPWUsdGhpcy5fc2VsZWN0ZWRQYXltZW50TWV0aG9kSWQ9XCJcIn1jdXN0b21lclBheW1lbnRNZXRob2RFeGVjdXRlZCgpe3RoaXMuX3Nob3VsZFRyYWNrRmFzdGxhbmVFdmVudCgpJiZ0aGlzLl90cmFja0VtYWlsU3VibWl0dGVkKCl9cGF5bWVudENvbXBsZXRlKCl7dGhpcy5fc2hvdWxkVHJhY2tGYXN0bGFuZUV2ZW50KCkmJnRoaXMuX3RyYWNrT3JkZXJQbGFjZWQodGhpcy5fc2VsZWN0ZWRQYXltZW50TWV0aG9kSWQpfXNlbGVjdGVkUGF5bWVudE1ldGhvZChlKXt0aGlzLl9zaG91bGRUcmFja0Zhc3RsYW5lRXZlbnQoKSYmZSYmKHRoaXMuX3NlbGVjdGVkUGF5bWVudE1ldGhvZElkPWUsdGhpcy5fdHJhY2tBcG1TZWxlY3RlZChlLCExKSl9d2FsbGV0QnV0dG9uQ2xpY2soZSl7dGhpcy5fc2hvdWxkVHJhY2tGYXN0bGFuZUV2ZW50KCkmJmUmJih0aGlzLl9zZWxlY3RlZFBheW1lbnRNZXRob2RJZD1lLHRoaXMuX3RyYWNrQXBtU2VsZWN0ZWQoZSwhMCkpfV9zaG91bGRUcmFja0Zhc3RsYW5lRXZlbnQoKXtjb25zdCBlPXRoaXMuY2hlY2tvdXRTZXJ2aWNlLmdldFN0YXRlKCksdD1lLmRhdGEuZ2V0UGF5bWVudE1ldGhvZChcImJyYWludHJlZVwiKXx8ZS5kYXRhLmdldFBheW1lbnRNZXRob2QoXCJicmFpbnRyZWVhY2NlbGVyYXRlZGNoZWNrb3V0XCIpLG49bnVsbD09dD92b2lkIDA6dC5pbml0aWFsaXphdGlvbkRhdGEuaXNCcmFpbnRyZWVBbmFseXRpY3NWMkVuYWJsZWQsaT1UQyh3aW5kb3cpJiZ3aW5kb3cuYnJhaW50cmVlRmFzdGxhbmUuZXZlbnRzO3JldHVybiBuJiZpfV9nZXRCcmFpbnRyZWVFdmVudHNPclRocm93KCl7aWYoVEMod2luZG93KSlyZXR1cm4gd2luZG93LmJyYWludHJlZUZhc3RsYW5lLmV2ZW50czt0aHJvdyBuZXcgWHR9X3RyYWNrRW1haWxTdWJtaXR0ZWQoKXtjb25zdHtlbWFpbFN1Ym1pdHRlZDplfT10aGlzLl9nZXRCcmFpbnRyZWVFdmVudHNPclRocm93KCk7ZSh0aGlzLl9nZXRFbWFpbFN1Ym1pdHRlZEV2ZW50T3B0aW9ucygpKX1fdHJhY2tBcG1TZWxlY3RlZChlLHQpe2NvbnN0e2FwbVNlbGVjdGVkOm59PXRoaXMuX2dldEJyYWludHJlZUV2ZW50c09yVGhyb3coKTtuKHRoaXMuX2dldEFwbVNlbGVjdGVkRXZlbnRPcHRpb25zKGUsdCkpfV90cmFja09yZGVyUGxhY2VkKGUpe2NvbnN0e29yZGVyUGxhY2VkOnR9PXRoaXMuX2dldEJyYWludHJlZUV2ZW50c09yVGhyb3coKTt0KHRoaXMuX2dldE9yZGVyUGxhY2VkRXZlbnRPcHRpb25zKGUpKX1fZ2V0RXZlbnRDb21tb25PcHRpb25zKCl7dmFyIGUsdDtjb25zdCBuPXRoaXMuY2hlY2tvdXRTZXJ2aWNlLmdldFN0YXRlKCksaT1uLmRhdGEuZ2V0Q2FydCgpLHI9bnVsbD09PShlPW4uZGF0YS5nZXRDb25maWcoKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuc3RvcmVQcm9maWxlLG89bnVsbD09PSh0PW4uZGF0YS5nZXRDdXN0b21lcigpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5pc0d1ZXN0LGE9bi5kYXRhLmdldFBheW1lbnRNZXRob2QoXCJicmFpbnRyZWVhY2NlbGVyYXRlZGNoZWNrb3V0XCIpLHM9W3t0cmVhdG1lbnRfZ3JvdXA6IW4uZXJyb3JzLmdldExvYWRQYXltZW50TWV0aG9kRXJyb3IoXCJicmFpbnRyZWVhY2NlbGVyYXRlZGNoZWNrb3V0XCIpJiYobnVsbD09YT92b2lkIDA6YS5pbml0aWFsaXphdGlvbkRhdGEuc2hvdWxkUnVuQWNjZWxlcmF0ZWRDaGVja291dCk/XCJ0ZXN0XCI6XCJjb250cm9sXCJ9XTtyZXR1cm57Y29udGV4dF90eXBlOlwiY3NfaWRcIixjb250ZXh0X2lkOihudWxsPT1pP3ZvaWQgMDppLmlkKXx8XCJcIixwYWdlX3R5cGU6XCJjaGVja291dF9wYWdlXCIscGFnZV9uYW1lOndpbmRvdy5kb2N1bWVudC50aXRsZSxwYXJ0bmVyX25hbWU6XCJiaWdjXCIsdXNlcl90eXBlOm8/XCJzdG9yZV9ndWVzdFwiOlwic3RvcmVfbWVtYmVyXCIsc3RvcmVfaWQ6KG51bGw9PXI/dm9pZCAwOnIuc3RvcmVJZCl8fFwiXCIsbWVyY2hhbnRfbmFtZToobnVsbD09cj92b2lkIDA6ci5zdG9yZU5hbWUpfHxcIlwiLGV4cGVyaW1lbnQ6SlNPTi5zdHJpbmdpZnkocyl9fV9nZXRFbWFpbFN1Ym1pdHRlZEV2ZW50T3B0aW9ucygpe2NvbnN0IGU9KHRoaXMuY2hlY2tvdXRTZXJ2aWNlLmdldFN0YXRlKCkuZGF0YS5nZXRQYXltZW50TWV0aG9kcygpfHxbXSkubWFwKCh7aWQ6ZX0pPT5lKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuX2dldEV2ZW50Q29tbW9uT3B0aW9ucygpKSx7dXNlcl9lbWFpbF9zYXZlZDohMSxhcG1fc2hvd246ZS5sZW5ndGg+MT9cIjFcIjpcIjBcIixhcG1fbGlzdDplLmpvaW4oXCIsXCIpfSl9X2dldEFwbVNlbGVjdGVkRXZlbnRPcHRpb25zKGUsdCl7Y29uc3Qgbj0odGhpcy5jaGVja291dFNlcnZpY2UuZ2V0U3RhdGUoKS5kYXRhLmdldFBheW1lbnRNZXRob2RzKCl8fFtdKS5tYXAoKHtpZDplfSk9PmUpO3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5fZ2V0RXZlbnRDb21tb25PcHRpb25zKCkpLHthcG1fc2hvd246bi5sZW5ndGg+MT9cIjFcIjpcIjBcIixhcG1fbGlzdDpuLmpvaW4oXCIsXCIpLGFwbV9zZWxlY3RlZDplLGFwbV9sb2NhdGlvbjp0P1wicHJlLWVtYWlsIHNlY3Rpb25cIjpcInBheW1lbnQgc2VjdGlvblwifSl9X2dldE9yZGVyUGxhY2VkRXZlbnRPcHRpb25zKGUpe2NvbnN0IHQ9dGhpcy5jaGVja291dFNlcnZpY2UuZ2V0U3RhdGUoKS5kYXRhLmdldENhcnQoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuX2dldEV2ZW50Q29tbW9uT3B0aW9ucygpKSx7c2VsZWN0ZWRfcGF5bWVudF9tZXRob2Q6ZSxjdXJyZW5jeV9jb2RlOihudWxsPT10P3ZvaWQgMDp0LmN1cnJlbmN5LmNvZGUpfHxcIlwifSl9fWZ1bmN0aW9uIE1DKGUpe3JldHVybiBuZXcgREMoZSl9Y2xhc3MgekN7Y29uc3RydWN0b3IoZSl7dGhpcy5fY2hlY2tvdXRTZXJ2aWNlPWUsdGhpcy5fc2VsZWN0ZWRQYXltZW50TWV0aG9kSWQ9XCJcIn1jdXN0b21lclBheW1lbnRNZXRob2RFeGVjdXRlZCgpe3RoaXMuX3Nob3VsZFRyYWNrRmFzdGxhbmVFdmVudCgpJiZ0aGlzLl90cmFja0VtYWlsU3VibWl0dGVkKCl9cGF5bWVudENvbXBsZXRlKCl7dGhpcy5fc2hvdWxkVHJhY2tGYXN0bGFuZUV2ZW50KCkmJnRoaXMuX3RyYWNrT3JkZXJQbGFjZWQodGhpcy5fc2VsZWN0ZWRQYXltZW50TWV0aG9kSWQpfXNlbGVjdGVkUGF5bWVudE1ldGhvZChlKXt0aGlzLl9zaG91bGRUcmFja0Zhc3RsYW5lRXZlbnQoKSYmZSYmKHRoaXMuX3NlbGVjdGVkUGF5bWVudE1ldGhvZElkPWUsdGhpcy5fdHJhY2tBcG1TZWxlY3RlZChlLCExKSl9d2FsbGV0QnV0dG9uQ2xpY2soZSl7dGhpcy5fc2hvdWxkVHJhY2tGYXN0bGFuZUV2ZW50KCkmJmUmJih0aGlzLl9zZWxlY3RlZFBheW1lbnRNZXRob2RJZD1lLHRoaXMuX3RyYWNrQXBtU2VsZWN0ZWQoZSwhMCkpfV9zaG91bGRUcmFja0Zhc3RsYW5lRXZlbnQoKXtjb25zdCBlPXRoaXMuX2NoZWNrb3V0U2VydmljZS5nZXRTdGF0ZSgpLmRhdGEuZ2V0UGF5bWVudE1ldGhvZChcInBheXBhbGNvbW1lcmNlXCIpLHQ9KChudWxsPT1lP3ZvaWQgMDplLmluaXRpYWxpemF0aW9uRGF0YSl8fHt9KS5pc1BheVBhbENvbW1lcmNlQW5hbHl0aWNzVjJFbmFibGVkLG49d2luZG93LGk9ISFuLnBheXBhbEZhc3RsYW5lJiYhIW4ucGF5cGFsRmFzdGxhbmUuZXZlbnRzO3JldHVybiB0JiZpfV9nZXRQYXlQYWxFdmVudHNPclRocm93KCl7Y29uc3QgZT13aW5kb3c7aWYoZS5wYXlwYWxGYXN0bGFuZSYmZS5wYXlwYWxGYXN0bGFuZS5ldmVudHMpcmV0dXJuIGUucGF5cGFsRmFzdGxhbmUuZXZlbnRzO3Rocm93IG5ldyBYdH1fdHJhY2tFbWFpbFN1Ym1pdHRlZCgpe2NvbnN0e2VtYWlsU3VibWl0dGVkOmV9PXRoaXMuX2dldFBheVBhbEV2ZW50c09yVGhyb3coKTtlKHRoaXMuX2dldEVtYWlsU3VibWl0dGVkRXZlbnRPcHRpb25zKCkpfV90cmFja0FwbVNlbGVjdGVkKGUsdCl7Y29uc3R7YXBtU2VsZWN0ZWQ6bn09dGhpcy5fZ2V0UGF5UGFsRXZlbnRzT3JUaHJvdygpO24odGhpcy5fZ2V0QXBtU2VsZWN0ZWRFdmVudE9wdGlvbnMoZSx0KSl9X3RyYWNrT3JkZXJQbGFjZWQoZSl7Y29uc3R7b3JkZXJQbGFjZWQ6dH09dGhpcy5fZ2V0UGF5UGFsRXZlbnRzT3JUaHJvdygpO3QodGhpcy5fZ2V0T3JkZXJQbGFjZWRFdmVudE9wdGlvbnMoZSkpfV9nZXRFdmVudENvbW1vbk9wdGlvbnMoKXt2YXIgZSx0O2NvbnN0IG49dGhpcy5fY2hlY2tvdXRTZXJ2aWNlLmdldFN0YXRlKCksaT1uLmRhdGEuZ2V0Q2FydCgpLHI9bnVsbD09PShlPW4uZGF0YS5nZXRDb25maWcoKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuc3RvcmVQcm9maWxlLG89bnVsbD09PSh0PW4uZGF0YS5nZXRDdXN0b21lcigpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5pc0d1ZXN0LGE9XCJwYXlwYWxjb21tZXJjZWFjY2VsZXJhdGVkY2hlY2tvdXRcIixzPW4uZGF0YS5nZXRQYXltZW50TWV0aG9kKGEpLGQ9W3t0cmVhdG1lbnRfZ3JvdXA6IW4uZXJyb3JzLmdldExvYWRQYXltZW50TWV0aG9kRXJyb3IoYSkmJihudWxsPT1zP3ZvaWQgMDpzLmluaXRpYWxpemF0aW9uRGF0YS5zaG91bGRSdW5BY2NlbGVyYXRlZENoZWNrb3V0KT9cInRlc3RcIjpcImNvbnRyb2xcIn1dO3JldHVybntjb250ZXh0X3R5cGU6XCJjc19pZFwiLGNvbnRleHRfaWQ6KG51bGw9PWk/dm9pZCAwOmkuaWQucmVwbGFjZSgvLS9nLFwiXCIpKXx8XCJcIixwYWdlX3R5cGU6XCJjaGVja291dF9wYWdlXCIscGFnZV9uYW1lOndpbmRvdy5kb2N1bWVudC50aXRsZSxwYXJ0bmVyX25hbWU6XCJiaWdjXCIsdXNlcl90eXBlOm8/XCJzdG9yZV9ndWVzdFwiOlwic3RvcmVfbWVtYmVyXCIsc3RvcmVfaWQ6KG51bGw9PXI/dm9pZCAwOnIuc3RvcmVJZCl8fFwiXCIsbWVyY2hhbnRfbmFtZToobnVsbD09cj92b2lkIDA6ci5zdG9yZU5hbWUpfHxcIlwiLGV4cGVyaW1lbnQ6SlNPTi5zdHJpbmdpZnkoZCl9fV9nZXRFbWFpbFN1Ym1pdHRlZEV2ZW50T3B0aW9ucygpe2NvbnN0IGU9KHRoaXMuX2NoZWNrb3V0U2VydmljZS5nZXRTdGF0ZSgpLmRhdGEuZ2V0UGF5bWVudE1ldGhvZHMoKXx8W10pLm1hcCgoe2lkOmV9KT0+ZSk7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLl9nZXRFdmVudENvbW1vbk9wdGlvbnMoKSkse3VzZXJfZW1haWxfc2F2ZWQ6ITEsYXBtX3Nob3duOmUubGVuZ3RoPjE/XCIxXCI6XCIwXCIsYXBtX2xpc3Q6ZS5qb2luKFwiLFwiKX0pfV9nZXRBcG1TZWxlY3RlZEV2ZW50T3B0aW9ucyhlLHQpe2NvbnN0IG49KHRoaXMuX2NoZWNrb3V0U2VydmljZS5nZXRTdGF0ZSgpLmRhdGEuZ2V0UGF5bWVudE1ldGhvZHMoKXx8W10pLm1hcCgoe2lkOmV9KT0+ZSk7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLl9nZXRFdmVudENvbW1vbk9wdGlvbnMoKSkse2FwbV9zaG93bjpuLmxlbmd0aD4xP1wiMVwiOlwiMFwiLGFwbV9saXN0Om4uam9pbihcIixcIiksYXBtX3NlbGVjdGVkOmUsYXBtX2xvY2F0aW9uOnQ/XCJwcmUtZW1haWwgc2VjdGlvblwiOlwicGF5bWVudCBzZWN0aW9uXCJ9KX1fZ2V0T3JkZXJQbGFjZWRFdmVudE9wdGlvbnMoZSl7Y29uc3QgdD10aGlzLl9jaGVja291dFNlcnZpY2UuZ2V0U3RhdGUoKS5kYXRhLmdldENhcnQoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuX2dldEV2ZW50Q29tbW9uT3B0aW9ucygpKSx7c2VsZWN0ZWRfcGF5bWVudF9tZXRob2Q6ZSxjdXJyZW5jeV9jb2RlOihudWxsPT10P3ZvaWQgMDp0LmN1cnJlbmN5LmNvZGUpfHxcIlwifSl9fWZ1bmN0aW9uIE5DKGUpe3JldHVybiBuZXcgekMoZSl9dmFyIHhDO2NsYXNzIEZDe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5faG9zdD1lLHRoaXMuX2hvc3RlZEZvcm1GYWN0b3J5PXR9c3VibWl0U3RvcmVkQ2FyZChlLHQpe3JldHVybiBuPXRoaXMsaT12b2lkIDAsbz1mdW5jdGlvbiooKXtjb25zdCBuPXRoaXMuX2hvc3RlZEZvcm07aWYoIW4pdGhyb3cgbmV3IENzKGZzLlBheW1lbnROb3RJbml0aWFsaXplZCk7eWllbGQgbi52YWxpZGF0ZSgpLnRoZW4oKCk9Pm4uc3VibWl0U3RvcmVkQ2FyZCh7ZmllbGRzOmUsZGF0YTp0fSkpfSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYShlKXt0cnl7ZChvLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2Qoby50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiByP246bmV3IHIoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGEscyl9ZCgobz1vLmFwcGx5KG4saXx8W10pKS5uZXh0KCkpfSk7dmFyIG4saSxyLG99aW5pdGlhbGl6ZShlKXtjb25zdCB0PXRoaXMuX2hvc3RlZEZvcm1GYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LGUpO3JldHVybiB0LmF0dGFjaCgpLnRoZW4oKCk9Pnt0aGlzLl9ob3N0ZWRGb3JtPXR9KX1kZWluaXRpYWxpemUoKXt0aGlzLl9ob3N0ZWRGb3JtJiZ0aGlzLl9ob3N0ZWRGb3JtLmRldGFjaCgpfX1mdW5jdGlvbiBSQyhlKXtjb25zdCB0PXJfKCk7cmV0dXJuIG5ldyBGQyhlLG5ldyBGbSh0KSl9IWZ1bmN0aW9uKGUpe2UuQ1VTVE9NRVI9XCJjdXN0b21lclwiLGUuU0hJUFBJTkc9XCJzaGlwcGluZ1wiLGUuQklMTElORz1cImJpbGxpbmdcIixlLlBBWU1FTlQ9XCJwYXltZW50XCJ9KHhDfHwoeEM9e30pKTtjb25zdCBMQz1beEMuQ1VTVE9NRVIseEMuU0hJUFBJTkcseEMuQklMTElORyx4Qy5QQVlNRU5UXTtjbGFzcyBCQ3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuc3Vic2NyaWJlPWUsdGhpcy5ib2RsRXZlbnRzPXQsdGhpcy5fY2hlY2tvdXRTdGFydGVkPSExLHRoaXMuX2VtYWlsRW50cnlCZWdhbj0hMSx0aGlzLl9zaGlwcGluZ09wdGlvbnNTaG93bj0hMSx0aGlzLl9jb21wbGV0ZWRTdGVwcz17fSx0aGlzLnN1YnNjcmliZShlPT57dmFyIHQ7aWYodGhpcy5zZXRTdGF0ZShlLmRhdGEpLCEobnVsbD09PSh0PXRoaXMuc3RhdGUpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmdldENvbmZpZygpKSl0aHJvdyBuZXcgUWUoV2UuTWlzc2luZ0NoZWNrb3V0Q29uZmlnKX0pfXNldFN0YXRlKGUpe3RoaXMuc3RhdGU9ZX1jaGVja291dEJlZ2luKCl7Y29uc3QgZT10aGlzLl9nZXRDb21tb25DaGVja291dERhdGEoKTshdGhpcy5fY2hlY2tvdXRTdGFydGVkJiZlJiYodGhpcy5ib2RsRXZlbnRzLmVtaXRDaGVja291dEJlZ2luRXZlbnQoZSksdGhpcy5fY2hlY2tvdXRTdGFydGVkPSEwKX1vcmRlclB1cmNoYXNlZCgpe3ZhciBlO2NvbnN0IHQ9bnVsbD09PShlPXRoaXMuc3RhdGUpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldE9yZGVyKCk7aWYoIXQpcmV0dXJuO2NvbnN0e2N1cnJlbmN5Om4saXNDb21wbGV0ZTppLG9yZGVySWQ6cixvcmRlckFtb3VudDpvLHNoaXBwaW5nQ29zdFRvdGFsOmEsbGluZUl0ZW1zOnMsY2FydElkOmQsY291cG9uczpjLGNoYW5uZWxJZDpsLHRheFRvdGFsOnV9PXQ7aSYmdGhpcy5ib2RsRXZlbnRzLmVtaXRPcmRlclB1cmNoYXNlZEV2ZW50KHtldmVudF9pZDpkLGN1cnJlbmN5Om4uY29kZSxvcmRlcl9pZDpyLHRheDp1LGNoYW5uZWxfaWQ6bCxjYXJ0X3ZhbHVlOm8sY291cG9uX2NvZGVzOmMubWFwKGU9PmUuY29kZS50b1VwcGVyQ2FzZSgpKSxzaGlwcGluZ19jb3N0OmEsbGluZV9pdGVtczp0aGlzLl9nZXRQcm9kdWN0cyhzLG4uY29kZSl9KX1zdGVwQ29tcGxldGVkKGUpe2UmJkxDLnNvbWUodD0+KHRoaXMuX2hhc1N0ZXBDb21wbGV0ZWQodCl8fHRoaXMuX3RyYWNrQ29tcGxldGVkU3RlcCh0KSx0PT09ZSkpfWN1c3RvbWVyRW1haWxFbnRyeShlKXshdGhpcy5fZW1haWxFbnRyeUJlZ2FuJiYobnVsbD09ZT92b2lkIDA6ZS5sZW5ndGgpJiYodGhpcy5fZW1haWxFbnRyeUJlZ2FuPSEwLHRoaXMuYm9kbEV2ZW50cy5lbWl0KFwiYm9kbF9jaGVja291dF9lbWFpbF9lbnRyeV9iZWdhblwiKSl9Y3VzdG9tZXJTdWdnZXN0aW9uSW5pdChlKXt0aGlzLmJvZGxFdmVudHMuZW1pdChcImJvZGxfY2hlY2tvdXRfY3VzdG9tZXJfc3VnZ2VzdGlvbl9pbml0aWFsaXphdGlvblwiLGUpfWN1c3RvbWVyU3VnZ2VzdGlvbkV4ZWN1dGUoKXt0aGlzLmJvZGxFdmVudHMuZW1pdChcImJvZGxfY2hlY2tvdXRfY3VzdG9tZXJfc3VnZ2VzdGlvbl9leGVjdXRlXCIpfWN1c3RvbWVyUGF5bWVudE1ldGhvZEV4ZWN1dGVkKGUpe3RoaXMuYm9kbEV2ZW50cy5lbWl0KFwiYm9kbF9jaGVja291dF9jdXN0b21lcl9wYXltZW50X21ldGhvZF9leGVjdXRlZFwiLGUpfXNob3dTaGlwcGluZ01ldGhvZHMoKXt0aGlzLl9zaGlwcGluZ09wdGlvbnNTaG93bnx8KHRoaXMuX3NoaXBwaW5nT3B0aW9uc1Nob3duPSEwLHRoaXMuYm9kbEV2ZW50cy5lbWl0KFwiYm9kbF9jaGVja291dF9zaG93X3NoaXBwaW5nX29wdGlvbnNcIikpfXNlbGVjdGVkUGF5bWVudE1ldGhvZChlKXtjb25zdCB0PXRoaXMuX2dldENvbW1vbkNoZWNrb3V0RGF0YSgpO3QmJmUmJnRoaXMuYm9kbEV2ZW50cy5lbWl0UGF5bWVudERldGFpbHNQcm92aWRlZEV2ZW50KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7cGF5bWVudF90eXBlOmV9KSl9Y2xpY2tQYXlCdXR0b24oZSl7dGhpcy5ib2RsRXZlbnRzLmVtaXQoXCJib2RsX2NoZWNrb3V0X2NsaWNrX3BheV9idXR0b25cIixlKX1wYXltZW50UmVqZWN0ZWQoKXt0aGlzLmJvZGxFdmVudHMuZW1pdChcImJvZGxfY2hlY2tvdXRfcGF5bWVudF9yZWplY3RlZFwiKX1wYXltZW50Q29tcGxldGUoKXt0aGlzLmJvZGxFdmVudHMuZW1pdChcImJvZGxfY2hlY2tvdXRfcGF5bWVudF9jb21wbGV0ZVwiKX1leGl0Q2hlY2tvdXQoKXt0aGlzLmJvZGxFdmVudHMuZW1pdChcImJvZGxfY2hlY2tvdXRfZXhpdFwiKX1fdHJhY2tDb21wbGV0ZWRTdGVwKGUpe3RoaXMuX2NvbXBsZXRlZFN0ZXBzW2VdPSEwO2NvbnN0IHQ9e1t4Qy5TSElQUElOR106dGhpcy5fdHJhY2tTaGlwcGluZ1N0ZXBDb21wbGV0ZWQuYmluZCh0aGlzKX1bZV07dD90KCk6dGhpcy5ib2RsRXZlbnRzLmVtaXQoXCJib2RsX2NoZWNrb3V0X3N0ZXBfY29tcGxldGVkXCIse3N0ZXA6ZX0pfV90cmFja1NoaXBwaW5nU3RlcENvbXBsZXRlZCgpe3ZhciBlLHQ7Y29uc3Qgbj1udWxsPT09KHQ9bnVsbD09PShlPXRoaXMuc3RhdGUpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldFNlbGVjdGVkU2hpcHBpbmdPcHRpb24oKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZGVzY3JpcHRpb24saT10aGlzLl9nZXRDb21tb25DaGVja291dERhdGEoKTtpJiZuJiZ0aGlzLmJvZGxFdmVudHMuZW1pdFNoaXBwaW5nRGV0YWlsc1Byb3ZpZGVkRXZlbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGkpLHtzaGlwcGluZ19tZXRob2Q6bn0pKX1fZ2V0Q29tbW9uQ2hlY2tvdXREYXRhKCl7dmFyIGU7Y29uc3QgdD1udWxsPT09KGU9dGhpcy5zdGF0ZSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuZ2V0Q2hlY2tvdXQoKTtpZighdClyZXR1cm4gbnVsbDtjb25zdHtjYXJ0OntjYXJ0QW1vdW50Om4sY3VycmVuY3k6aSxsaW5lSXRlbXM6cixpZDpvLGNvdXBvbnM6YX0sY2hhbm5lbElkOnN9PXQ7cmV0dXJue2V2ZW50X2lkOm8sY3VycmVuY3k6aS5jb2RlLGNhcnRfdmFsdWU6bixjb3Vwb25fY29kZXM6YS5tYXAoZT0+ZS5jb2RlLnRvVXBwZXJDYXNlKCkpLGxpbmVfaXRlbXM6dGhpcy5fZ2V0UHJvZHVjdHMocixpLmNvZGUpLGNoYW5uZWxfaWQ6c319X2dldFByb2R1Y3RzKGUsdCl7Y29uc3Qgbj0oZS5jdXN0b21JdGVtc3x8W10pLm1hcChlPT4oe3Byb2R1Y3RfaWQ6ZS5pZCxza3U6ZS5za3UsYmFzZV9wcmljZTplLmxpc3RQcmljZSxzYWxlX3ByaWNlOmUubGlzdFByaWNlLHB1cmNoYXNlX3ByaWNlOmUubGlzdFByaWNlLHF1YW50aXR5OmUucXVhbnRpdHkscHJvZHVjdF9uYW1lOmUubmFtZSxjdXJyZW5jeTp0fSkpLGk9ZS5naWZ0Q2VydGlmaWNhdGVzLm1hcChlPT4oe3Byb2R1Y3RfaWQ6ZS5pZCxnaWZ0X2NlcnRpZmljYXRlX2lkOmUuaWQsYmFzZV9wcmljZTplLmFtb3VudCxzYWxlX3ByaWNlOmUuYW1vdW50LHB1cmNoYXNlX3ByaWNlOmUuYW1vdW50LHByb2R1Y3RfbmFtZTplLm5hbWUsZ2lmdF9jZXJ0aWZpY2F0ZV9uYW1lOmUubmFtZSxnaWZ0X2NlcnRpZmljYXRlX3RoZW1lOmUudGhlbWUscXVhbnRpdHk6MSxjdXJyZW5jeTp0fSkpO3JldHVyblsuLi5uLC4uLlsuLi5lLnBoeXNpY2FsSXRlbXMsLi4uZS5kaWdpdGFsSXRlbXNdLm1hcChlPT57bGV0IG47cmV0dXJuIGUub3B0aW9ucyYmZS5vcHRpb25zLmxlbmd0aCYmKG49ZS5vcHRpb25zLm1hcChlPT5gJHtlLm5hbWV9OiR7ZS52YWx1ZX1gKSxuLnNvcnQoKSkse3Byb2R1Y3RfaWQ6ZS5wcm9kdWN0SWQscXVhbnRpdHk6ZS5xdWFudGl0eSxwcm9kdWN0X25hbWU6ZS5uYW1lLGJhc2VfcHJpY2U6ZS5saXN0UHJpY2Usc2FsZV9wcmljZTplLnNhbGVQcmljZSxwdXJjaGFzZV9wcmljZTplLnNhbGVQcmljZT4wP2Uuc2FsZVByaWNlOmUubGlzdFByaWNlLHNrdTplLnNrdSx2YXJpYW50X2lkOmUudmFyaWFudElkLGRpc2NvdW50OmUuZGlzY291bnRBbW91bnQsY291cG9uX2Ftb3VudDplLmNvdXBvbkFtb3VudCxicmFuZF9uYW1lOmUuYnJhbmQsY3VycmVuY3k6dCxjYXRlZ29yeV9uYW1lczooaT1lLEFycmF5LmlzQXJyYXkoaS5jYXRlZ29yeU5hbWVzKT9pLmNhdGVnb3J5TmFtZXM6QXJyYXkuaXNBcnJheShpLmNhdGVnb3JpZXMpP0MoaS5jYXRlZ29yaWVzKS5tYXAoKHtuYW1lOmV9KT0+ZSk6W10pLHJldGFpbF9wcmljZTplLnJldGFpbFByaWNlfTt2YXIgaX0pLC4uLmldLm1hcChlPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3Byb2R1Y3RfaWQ6U3RyaW5nKGUucHJvZHVjdF9pZCl9KSl9X2hhc1N0ZXBDb21wbGV0ZWQoZSl7cmV0dXJuIHRoaXMuX2NvbXBsZXRlZFN0ZXBzW2VdfX1jbGFzcyBqQ3tjaGVja291dEJlZ2luKCl7fW9yZGVyUHVyY2hhc2VkKCl7fXN0ZXBDb21wbGV0ZWQoKXt9Y3VzdG9tZXJFbWFpbEVudHJ5KCl7fWN1c3RvbWVyU3VnZ2VzdGlvbkluaXQoKXt9Y3VzdG9tZXJTdWdnZXN0aW9uRXhlY3V0ZSgpe31jdXN0b21lclBheW1lbnRNZXRob2RFeGVjdXRlZCgpe31zaG93U2hpcHBpbmdNZXRob2RzKCl7fXNlbGVjdGVkUGF5bWVudE1ldGhvZCgpe31jbGlja1BheUJ1dHRvbigpe31wYXltZW50UmVqZWN0ZWQoKXt9cGF5bWVudENvbXBsZXRlKCl7fWV4aXRDaGVja291dCgpe319ZnVuY3Rpb24gVUMoZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVyblwiYm9kbEV2ZW50c1wiaW4gZX0od2luZG93KT9uZXcgQkMoZSx3aW5kb3cuYm9kbEV2ZW50cy5jaGVja291dCk6bmV3IGpDfWV4cG9ydHtacyBhcyBFeHRlbnNpb25Db21tYW5kVHlwZSxRcyBhcyBFeHRlbnNpb25RdWVyeVR5cGUsVUMgYXMgY3JlYXRlQm9kbFNlcnZpY2UsTUMgYXMgY3JlYXRlQnJhaW50cmVlQW5hbHl0aWNUcmFja2VyLFl3IGFzIGNyZWF0ZUNoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZXIsb18gYXMgY3JlYXRlQ2hlY2tvdXRTZXJ2aWNlLF9DIGFzIGNyZWF0ZUN1cnJlbmN5U2VydmljZSxoQyBhcyBjcmVhdGVFbWJlZGRlZENoZWNrb3V0TWVzc2VuZ2VyLHZDIGFzIGNyZWF0ZUxhbmd1YWdlU2VydmljZSxOQyBhcyBjcmVhdGVQYXlQYWxDb21tZXJjZUFuYWx5dGljVHJhY2tlcixrQyBhcyBjcmVhdGVTdGVwVHJhY2tlcixSQyBhcyBjcmVhdGVTdG9yZWRDYXJkSG9zdGVkRm9ybVNlcnZpY2UsaSBhcyBjcmVhdGVUaW1lb3V0LG9DIGFzIGVtYmVkQ2hlY2tvdXR9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hlY2tvdXQtc2RrLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/checkout-sdk/dist/esm/checkout-sdk.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/data-store/lib/combine-reducers.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@bigcommerce/data-store/lib/combine-reducers.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar lodash_1 = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\nvar shallowEqual = __webpack_require__(/*! shallowequal */ \"./node_modules/shallowequal/index.js\");\nfunction combineReducers(reducers, options) {\n    var _a = (options || {}).equalityCheck, equalityCheck = _a === void 0 ? shallowEqual : _a;\n    return function (state, action) {\n        return Object.keys(reducers).reduce(function (result, key) {\n            var _a;\n            var reducer = reducers[key];\n            var currentState = state ? state[key] : undefined;\n            var newState = reducer(currentState, action);\n            if (equalityCheck(currentState, newState) && result) {\n                return result;\n            }\n            return lodash_1.assign({}, result, (_a = {}, _a[key] = newState, _a));\n        }, state || {});\n    };\n}\nexports[\"default\"] = combineReducers;\n//# sourceMappingURL=combine-reducers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2NvbWJpbmUtcmVkdWNlcnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsZUFBZSxtQkFBTyxDQUFDLCtDQUFRO0FBQy9CLG1CQUFtQixtQkFBTyxDQUFDLDBEQUFjO0FBQ3pDO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxrQkFBa0I7QUFDdkQsU0FBUyxhQUFhO0FBQ3RCO0FBQ0E7QUFDQSxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2NvbWJpbmUtcmVkdWNlcnMuanM/ZjY4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBsb2Rhc2hfMSA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG52YXIgc2hhbGxvd0VxdWFsID0gcmVxdWlyZShcInNoYWxsb3dlcXVhbFwiKTtcbmZ1bmN0aW9uIGNvbWJpbmVSZWR1Y2VycyhyZWR1Y2Vycywgb3B0aW9ucykge1xuICAgIHZhciBfYSA9IChvcHRpb25zIHx8IHt9KS5lcXVhbGl0eUNoZWNrLCBlcXVhbGl0eUNoZWNrID0gX2EgPT09IHZvaWQgMCA/IHNoYWxsb3dFcXVhbCA6IF9hO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMocmVkdWNlcnMpLnJlZHVjZShmdW5jdGlvbiAocmVzdWx0LCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciByZWR1Y2VyID0gcmVkdWNlcnNba2V5XTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50U3RhdGUgPSBzdGF0ZSA/IHN0YXRlW2tleV0gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB2YXIgbmV3U3RhdGUgPSByZWR1Y2VyKGN1cnJlbnRTdGF0ZSwgYWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChlcXVhbGl0eUNoZWNrKGN1cnJlbnRTdGF0ZSwgbmV3U3RhdGUpICYmIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbG9kYXNoXzEuYXNzaWduKHt9LCByZXN1bHQsIChfYSA9IHt9LCBfYVtrZXldID0gbmV3U3RhdGUsIF9hKSk7XG4gICAgICAgIH0sIHN0YXRlIHx8IHt9KTtcbiAgICB9O1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gY29tYmluZVJlZHVjZXJzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tYmluZS1yZWR1Y2Vycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/data-store/lib/combine-reducers.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/data-store/lib/compose-reducers.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@bigcommerce/data-store/lib/compose-reducers.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nvar lodash_1 = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\nvar shallowEqual = __webpack_require__(/*! shallowequal */ \"./node_modules/shallowequal/index.js\");\nfunction composeReducers() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var reducers = args;\n    var options = {};\n    if (typeof args[args.length - 1] === 'object') {\n        reducers = args.slice(0, -1);\n        options = tslib_1.__assign({}, options, args[args.length - 1]);\n    }\n    var _a = options.equalityCheck, equalityCheck = _a === void 0 ? shallowEqual : _a;\n    return function (state, action) {\n        var newState = lodash_1.flowRight(reducers.map(function (reducer) { return lodash_1.curryRight(reducer, 2)(action); }))(state);\n        return equalityCheck(state, newState) ? state : newState;\n    };\n}\nexports[\"default\"] = composeReducers;\n//# sourceMappingURL=compose-reducers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2NvbXBvc2UtcmVkdWNlcnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsY0FBYyxtQkFBTyxDQUFDLGlEQUFPO0FBQzdCLGVBQWUsbUJBQU8sQ0FBQywrQ0FBUTtBQUMvQixtQkFBbUIsbUJBQU8sQ0FBQywwREFBYztBQUN6QztBQUNBO0FBQ0EscUJBQXFCLHVCQUF1QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLGlEQUFpRDtBQUM3SDtBQUNBO0FBQ0E7QUFDQSxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2NvbXBvc2UtcmVkdWNlcnMuanM/NzQxYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xudmFyIGxvZGFzaF8xID0gcmVxdWlyZShcImxvZGFzaFwiKTtcbnZhciBzaGFsbG93RXF1YWwgPSByZXF1aXJlKFwic2hhbGxvd2VxdWFsXCIpO1xuZnVuY3Rpb24gY29tcG9zZVJlZHVjZXJzKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgcmVkdWNlcnMgPSBhcmdzO1xuICAgIHZhciBvcHRpb25zID0ge307XG4gICAgaWYgKHR5cGVvZiBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJlZHVjZXJzID0gYXJncy5zbGljZSgwLCAtMSk7XG4gICAgICAgIG9wdGlvbnMgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBvcHRpb25zLCBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0pO1xuICAgIH1cbiAgICB2YXIgX2EgPSBvcHRpb25zLmVxdWFsaXR5Q2hlY2ssIGVxdWFsaXR5Q2hlY2sgPSBfYSA9PT0gdm9pZCAwID8gc2hhbGxvd0VxdWFsIDogX2E7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICAgIHZhciBuZXdTdGF0ZSA9IGxvZGFzaF8xLmZsb3dSaWdodChyZWR1Y2Vycy5tYXAoZnVuY3Rpb24gKHJlZHVjZXIpIHsgcmV0dXJuIGxvZGFzaF8xLmN1cnJ5UmlnaHQocmVkdWNlciwgMikoYWN0aW9uKTsgfSkpKHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIGVxdWFsaXR5Q2hlY2soc3RhdGUsIG5ld1N0YXRlKSA/IHN0YXRlIDogbmV3U3RhdGU7XG4gICAgfTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IGNvbXBvc2VSZWR1Y2Vycztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbXBvc2UtcmVkdWNlcnMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/data-store/lib/compose-reducers.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/data-store/lib/create-action.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@bigcommerce/data-store/lib/create-action.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nvar lodash_1 = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\nfunction createAction(type, payload, meta) {\n    if (typeof type !== 'string' || type === '') {\n        throw new Error('`type` must be a string');\n    }\n    return tslib_1.__assign({ type: type }, lodash_1.omitBy({ payload: payload, meta: meta }, function (value) { return value === undefined; }));\n}\nexports[\"default\"] = createAction;\n//# sourceMappingURL=create-action.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2NyZWF0ZS1hY3Rpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsY0FBYyxtQkFBTyxDQUFDLGlEQUFPO0FBQzdCLGVBQWUsbUJBQU8sQ0FBQywrQ0FBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixZQUFZLG9CQUFvQiw4QkFBOEIscUJBQXFCLDZCQUE2QjtBQUM5STtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvZGF0YS1zdG9yZS9saWIvY3JlYXRlLWFjdGlvbi5qcz8yZWFlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG52YXIgbG9kYXNoXzEgPSByZXF1aXJlKFwibG9kYXNoXCIpO1xuZnVuY3Rpb24gY3JlYXRlQWN0aW9uKHR5cGUsIHBheWxvYWQsIG1ldGEpIHtcbiAgICBpZiAodHlwZW9mIHR5cGUgIT09ICdzdHJpbmcnIHx8IHR5cGUgPT09ICcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignYHR5cGVgIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRzbGliXzEuX19hc3NpZ24oeyB0eXBlOiB0eXBlIH0sIGxvZGFzaF8xLm9taXRCeSh7IHBheWxvYWQ6IHBheWxvYWQsIG1ldGE6IG1ldGEgfSwgZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkOyB9KSk7XG59XG5leHBvcnRzLmRlZmF1bHQgPSBjcmVhdGVBY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGUtYWN0aW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/data-store/lib/create-action.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/data-store/lib/create-data-store.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@bigcommerce/data-store/lib/create-data-store.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar combine_reducers_1 = __webpack_require__(/*! ./combine-reducers */ \"./node_modules/@bigcommerce/data-store/lib/combine-reducers.js\");\nvar data_store_1 = __webpack_require__(/*! ./data-store */ \"./node_modules/@bigcommerce/data-store/lib/data-store.js\");\nfunction createDataStore(reducer, initialState, options) {\n    if (typeof reducer === 'function') {\n        return new data_store_1.default(reducer, initialState, options);\n    }\n    return new data_store_1.default(combine_reducers_1.default(reducer, { equalityCheck: options && options.equalityCheck }), initialState, options);\n}\nexports[\"default\"] = createDataStore;\n//# sourceMappingURL=create-data-store.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2NyZWF0ZS1kYXRhLXN0b3JlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHlCQUF5QixtQkFBTyxDQUFDLDBGQUFvQjtBQUNyRCxtQkFBbUIsbUJBQU8sQ0FBQyw4RUFBYztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBFQUEwRSxpREFBaUQ7QUFDM0g7QUFDQSxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2NyZWF0ZS1kYXRhLXN0b3JlLmpzP2U1OGIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgY29tYmluZV9yZWR1Y2Vyc18xID0gcmVxdWlyZShcIi4vY29tYmluZS1yZWR1Y2Vyc1wiKTtcbnZhciBkYXRhX3N0b3JlXzEgPSByZXF1aXJlKFwiLi9kYXRhLXN0b3JlXCIpO1xuZnVuY3Rpb24gY3JlYXRlRGF0YVN0b3JlKHJlZHVjZXIsIGluaXRpYWxTdGF0ZSwgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgcmVkdWNlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbmV3IGRhdGFfc3RvcmVfMS5kZWZhdWx0KHJlZHVjZXIsIGluaXRpYWxTdGF0ZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgZGF0YV9zdG9yZV8xLmRlZmF1bHQoY29tYmluZV9yZWR1Y2Vyc18xLmRlZmF1bHQocmVkdWNlciwgeyBlcXVhbGl0eUNoZWNrOiBvcHRpb25zICYmIG9wdGlvbnMuZXF1YWxpdHlDaGVjayB9KSwgaW5pdGlhbFN0YXRlLCBvcHRpb25zKTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IGNyZWF0ZURhdGFTdG9yZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS1kYXRhLXN0b3JlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/data-store/lib/create-data-store.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/data-store/lib/create-error-action.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@bigcommerce/data-store/lib/create-error-action.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nvar create_action_1 = __webpack_require__(/*! ./create-action */ \"./node_modules/@bigcommerce/data-store/lib/create-action.js\");\nfunction createErrorAction(type, payload, meta) {\n    return tslib_1.__assign({}, create_action_1.default(type, payload, meta), { error: true });\n}\nexports[\"default\"] = createErrorAction;\n//# sourceMappingURL=create-error-action.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2NyZWF0ZS1lcnJvci1hY3Rpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsY0FBYyxtQkFBTyxDQUFDLGlEQUFPO0FBQzdCLHNCQUFzQixtQkFBTyxDQUFDLG9GQUFpQjtBQUMvQztBQUNBLDhCQUE4QixrREFBa0QsYUFBYTtBQUM3RjtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvZGF0YS1zdG9yZS9saWIvY3JlYXRlLWVycm9yLWFjdGlvbi5qcz80NmNlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG52YXIgY3JlYXRlX2FjdGlvbl8xID0gcmVxdWlyZShcIi4vY3JlYXRlLWFjdGlvblwiKTtcbmZ1bmN0aW9uIGNyZWF0ZUVycm9yQWN0aW9uKHR5cGUsIHBheWxvYWQsIG1ldGEpIHtcbiAgICByZXR1cm4gdHNsaWJfMS5fX2Fzc2lnbih7fSwgY3JlYXRlX2FjdGlvbl8xLmRlZmF1bHQodHlwZSwgcGF5bG9hZCwgbWV0YSksIHsgZXJyb3I6IHRydWUgfSk7XG59XG5leHBvcnRzLmRlZmF1bHQgPSBjcmVhdGVFcnJvckFjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS1lcnJvci1hY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/data-store/lib/create-error-action.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/data-store/lib/data-store.js":
/*!****************************************************************!*\
  !*** ./node_modules/@bigcommerce/data-store/lib/data-store.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nvar lodash_1 = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\nvar rxjs_1 = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm5/index.js\");\nvar operators_1 = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/_esm5/operators/index.js\");\nvar shallowEqual = __webpack_require__(/*! shallowequal */ \"./node_modules/shallowequal/index.js\");\nvar deep_freeze_1 = __webpack_require__(/*! ./deep-freeze */ \"./node_modules/@bigcommerce/data-store/lib/deep-freeze.js\");\nvar is_observable_action_like_1 = __webpack_require__(/*! ./is-observable-action-like */ \"./node_modules/@bigcommerce/data-store/lib/is-observable-action-like.js\");\nvar noop_action_transformer_1 = __webpack_require__(/*! ./noop-action-transformer */ \"./node_modules/@bigcommerce/data-store/lib/noop-action-transformer.js\");\nvar noop_state_transformer_1 = __webpack_require__(/*! ./noop-state-transformer */ \"./node_modules/@bigcommerce/data-store/lib/noop-state-transformer.js\");\nvar DataStore = (function () {\n    function DataStore(reducer, initialState, options) {\n        if (initialState === void 0) { initialState = {}; }\n        var _this = this;\n        this._reducer = reducer;\n        this._options = tslib_1.__assign({ actionTransformer: noop_action_transformer_1.default, equalityCheck: shallowEqual, shouldWarnMutation: true, stateTransformer: noop_state_transformer_1.default }, options);\n        this._state$ = new rxjs_1.BehaviorSubject(this._options.stateTransformer(initialState));\n        this._notification$ = new rxjs_1.Subject();\n        this._dispatchers = {};\n        this._dispatchQueue$ = new rxjs_1.Subject();\n        this._errors = {};\n        this._dispatchQueue$\n            .pipe(operators_1.mergeMap(function (dispatcher$) { return dispatcher$.pipe(operators_1.concatMap(function (action$) { return action$; })); }), operators_1.filter(function (action) { return !!action.type; }), operators_1.scan(function (states, action) {\n            return _this._transformStates(states, action);\n        }, {\n            state: initialState,\n            transformedState: this._state$.getValue(),\n        }), operators_1.distinctUntilChanged(function (_a, _b) {\n            var stateA = _a.state;\n            var stateB = _b.state;\n            return _this._options.equalityCheck(stateA, stateB);\n        }), operators_1.map(function (_a) {\n            var transformedState = _a.transformedState;\n            return transformedState;\n        }))\n            .subscribe(this._state$);\n        this.dispatch({ type: 'INIT' });\n    }\n    DataStore.prototype.dispatch = function (action, options) {\n        if (is_observable_action_like_1.default(action)) {\n            return this._dispatchObservableAction(action, options);\n        }\n        if (typeof action === 'function') {\n            return this._dispatchThunkAction(action, options);\n        }\n        return this._dispatchAction(action);\n    };\n    DataStore.prototype.getState = function () {\n        return this._state$.getValue();\n    };\n    DataStore.prototype.notifyState = function () {\n        this._notification$.next(this.getState());\n    };\n    DataStore.prototype.subscribe = function (subscriber) {\n        var _this = this;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var options = typeof args[0] === 'object' ? args[0] : undefined;\n        var filters = options ? (options.filters || []) : args;\n        var state$ = this._state$;\n        if (filters.length > 0) {\n            state$ = state$.pipe(operators_1.distinctUntilChanged(function (stateA, stateB) {\n                return filters.every(function (filterFn) {\n                    return _this._options.equalityCheck(filterFn(stateA), filterFn(stateB));\n                });\n            }));\n        }\n        if (options && options.initial === false) {\n            state$ = state$.pipe(operators_1.skip(1));\n        }\n        var subscriptions = [\n            state$.subscribe(subscriber),\n            this._notification$.subscribe(subscriber),\n        ];\n        return function () { return subscriptions.forEach(function (subscription) { return subscription.unsubscribe(); }); };\n    };\n    DataStore.prototype._transformStates = function (states, action) {\n        try {\n            var newState = this._options.shouldWarnMutation === false ?\n                this._reducer(states.state, action) :\n                deep_freeze_1.default(this._reducer(states.state, action), {\n                    equalityCheck: this._options.equalityCheck,\n                    previousValue: states.state,\n                });\n            var transformedState = this._options.stateTransformer(newState);\n            return { state: newState, transformedState: transformedState };\n        }\n        catch (error) {\n            this._getDispatchError(action.meta && action.meta.queueId).next(error);\n            return { state: states.state, transformedState: states.transformedState };\n        }\n    };\n    DataStore.prototype._dispatchAction = function (action) {\n        return this._dispatchObservableAction(action.error ? rxjs_1.throwError(action) : rxjs_1.of(action));\n    };\n    DataStore.prototype._dispatchObservableAction = function (action$, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        return new Promise(function (resolve, reject) {\n            var error$ = _this._getDispatchError(options.queueId);\n            var transformedAction$ = _this._options.actionTransformer(rxjs_1.from(action$).pipe(operators_1.map(function (action) {\n                return options.queueId ?\n                    lodash_1.merge({}, action, { meta: { queueId: options.queueId } }) :\n                    action;\n            })));\n            _this._getDispatcher(options.queueId).next(rxjs_1.from(transformedAction$)\n                .pipe(operators_1.map(function (action, index) {\n                if (index === 0) {\n                    error$.pipe(operators_1.first()).subscribe(reject);\n                }\n                if (action.error) {\n                    reject(action.payload);\n                }\n                return action;\n            }), operators_1.catchError(function (action) {\n                reject(action instanceof Error ? action : action.payload);\n                return rxjs_1.of(action);\n            }), operators_1.tap({\n                complete: function () {\n                    resolve(_this.getState());\n                },\n            })));\n        });\n    };\n    DataStore.prototype._dispatchThunkAction = function (thunkAction, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        return this._dispatchObservableAction(rxjs_1.defer(function () { return thunkAction(_this); }), options);\n    };\n    DataStore.prototype._getDispatcher = function (queueId) {\n        if (queueId === void 0) { queueId = 'default'; }\n        if (!this._dispatchers[queueId]) {\n            this._dispatchers[queueId] = new rxjs_1.Subject();\n            this._dispatchQueue$.next(this._dispatchers[queueId]);\n        }\n        return this._dispatchers[queueId];\n    };\n    DataStore.prototype._getDispatchError = function (queueId) {\n        if (queueId === void 0) { queueId = 'default'; }\n        if (!this._errors[queueId]) {\n            this._errors[queueId] = new rxjs_1.Subject();\n        }\n        return this._errors[queueId];\n    };\n    return DataStore;\n}());\nexports[\"default\"] = DataStore;\n//# sourceMappingURL=data-store.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2RhdGEtc3RvcmUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsY0FBYyxtQkFBTyxDQUFDLGlEQUFPO0FBQzdCLGVBQWUsbUJBQU8sQ0FBQywrQ0FBUTtBQUMvQixhQUFhLG1CQUFPLENBQUMsZ0RBQU07QUFDM0Isa0JBQWtCLG1CQUFPLENBQUMsb0VBQWdCO0FBQzFDLG1CQUFtQixtQkFBTyxDQUFDLDBEQUFjO0FBQ3pDLG9CQUFvQixtQkFBTyxDQUFDLGdGQUFlO0FBQzNDLGtDQUFrQyxtQkFBTyxDQUFDLDRHQUE2QjtBQUN2RSxnQ0FBZ0MsbUJBQU8sQ0FBQyx3R0FBMkI7QUFDbkUsK0JBQStCLG1CQUFPLENBQUMsc0dBQTBCO0FBQ2pFO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBLDJDQUEyQyxpS0FBaUs7QUFDNU07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLG1FQUFtRSxpQkFBaUIsS0FBSywwQ0FBMEMsdUJBQXVCO0FBQzFOO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx3QkFBd0IsY0FBYztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVEQUF1RCxvQ0FBb0M7QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsWUFBWSxRQUFRLDRCQUE0QjtBQUNyRjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLHlFQUF5RSw0QkFBNEI7QUFDckc7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9kYXRhLXN0b3JlL2xpYi9kYXRhLXN0b3JlLmpzP2M2OTkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbnZhciBsb2Rhc2hfMSA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG52YXIgcnhqc18xID0gcmVxdWlyZShcInJ4anNcIik7XG52YXIgb3BlcmF0b3JzXzEgPSByZXF1aXJlKFwicnhqcy9vcGVyYXRvcnNcIik7XG52YXIgc2hhbGxvd0VxdWFsID0gcmVxdWlyZShcInNoYWxsb3dlcXVhbFwiKTtcbnZhciBkZWVwX2ZyZWV6ZV8xID0gcmVxdWlyZShcIi4vZGVlcC1mcmVlemVcIik7XG52YXIgaXNfb2JzZXJ2YWJsZV9hY3Rpb25fbGlrZV8xID0gcmVxdWlyZShcIi4vaXMtb2JzZXJ2YWJsZS1hY3Rpb24tbGlrZVwiKTtcbnZhciBub29wX2FjdGlvbl90cmFuc2Zvcm1lcl8xID0gcmVxdWlyZShcIi4vbm9vcC1hY3Rpb24tdHJhbnNmb3JtZXJcIik7XG52YXIgbm9vcF9zdGF0ZV90cmFuc2Zvcm1lcl8xID0gcmVxdWlyZShcIi4vbm9vcC1zdGF0ZS10cmFuc2Zvcm1lclwiKTtcbnZhciBEYXRhU3RvcmUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERhdGFTdG9yZShyZWR1Y2VyLCBpbml0aWFsU3RhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGluaXRpYWxTdGF0ZSA9PT0gdm9pZCAwKSB7IGluaXRpYWxTdGF0ZSA9IHt9OyB9XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX3JlZHVjZXIgPSByZWR1Y2VyO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gdHNsaWJfMS5fX2Fzc2lnbih7IGFjdGlvblRyYW5zZm9ybWVyOiBub29wX2FjdGlvbl90cmFuc2Zvcm1lcl8xLmRlZmF1bHQsIGVxdWFsaXR5Q2hlY2s6IHNoYWxsb3dFcXVhbCwgc2hvdWxkV2Fybk11dGF0aW9uOiB0cnVlLCBzdGF0ZVRyYW5zZm9ybWVyOiBub29wX3N0YXRlX3RyYW5zZm9ybWVyXzEuZGVmYXVsdCB9LCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5fc3RhdGUkID0gbmV3IHJ4anNfMS5CZWhhdmlvclN1YmplY3QodGhpcy5fb3B0aW9ucy5zdGF0ZVRyYW5zZm9ybWVyKGluaXRpYWxTdGF0ZSkpO1xuICAgICAgICB0aGlzLl9ub3RpZmljYXRpb24kID0gbmV3IHJ4anNfMS5TdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoZXJzID0ge307XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoUXVldWUkID0gbmV3IHJ4anNfMS5TdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuX2Vycm9ycyA9IHt9O1xuICAgICAgICB0aGlzLl9kaXNwYXRjaFF1ZXVlJFxuICAgICAgICAgICAgLnBpcGUob3BlcmF0b3JzXzEubWVyZ2VNYXAoZnVuY3Rpb24gKGRpc3BhdGNoZXIkKSB7IHJldHVybiBkaXNwYXRjaGVyJC5waXBlKG9wZXJhdG9yc18xLmNvbmNhdE1hcChmdW5jdGlvbiAoYWN0aW9uJCkgeyByZXR1cm4gYWN0aW9uJDsgfSkpOyB9KSwgb3BlcmF0b3JzXzEuZmlsdGVyKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuICEhYWN0aW9uLnR5cGU7IH0pLCBvcGVyYXRvcnNfMS5zY2FuKGZ1bmN0aW9uIChzdGF0ZXMsIGFjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLl90cmFuc2Zvcm1TdGF0ZXMoc3RhdGVzLCBhY3Rpb24pO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBzdGF0ZTogaW5pdGlhbFN0YXRlLFxuICAgICAgICAgICAgdHJhbnNmb3JtZWRTdGF0ZTogdGhpcy5fc3RhdGUkLmdldFZhbHVlKCksXG4gICAgICAgIH0pLCBvcGVyYXRvcnNfMS5kaXN0aW5jdFVudGlsQ2hhbmdlZChmdW5jdGlvbiAoX2EsIF9iKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGVBID0gX2Euc3RhdGU7XG4gICAgICAgICAgICB2YXIgc3RhdGVCID0gX2Iuc3RhdGU7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuX29wdGlvbnMuZXF1YWxpdHlDaGVjayhzdGF0ZUEsIHN0YXRlQik7XG4gICAgICAgIH0pLCBvcGVyYXRvcnNfMS5tYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtZWRTdGF0ZSA9IF9hLnRyYW5zZm9ybWVkU3RhdGU7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWRTdGF0ZTtcbiAgICAgICAgfSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKHRoaXMuX3N0YXRlJCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2goeyB0eXBlOiAnSU5JVCcgfSk7XG4gICAgfVxuICAgIERhdGFTdG9yZS5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoYWN0aW9uLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChpc19vYnNlcnZhYmxlX2FjdGlvbl9saWtlXzEuZGVmYXVsdChhY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGlzcGF0Y2hPYnNlcnZhYmxlQWN0aW9uKGFjdGlvbiwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBhY3Rpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kaXNwYXRjaFRodW5rQWN0aW9uKGFjdGlvbiwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc3BhdGNoQWN0aW9uKGFjdGlvbik7XG4gICAgfTtcbiAgICBEYXRhU3RvcmUucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGUkLmdldFZhbHVlKCk7XG4gICAgfTtcbiAgICBEYXRhU3RvcmUucHJvdG90eXBlLm5vdGlmeVN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9ub3RpZmljYXRpb24kLm5leHQodGhpcy5nZXRTdGF0ZSgpKTtcbiAgICB9O1xuICAgIERhdGFTdG9yZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2YgYXJnc1swXSA9PT0gJ29iamVjdCcgPyBhcmdzWzBdIDogdW5kZWZpbmVkO1xuICAgICAgICB2YXIgZmlsdGVycyA9IG9wdGlvbnMgPyAob3B0aW9ucy5maWx0ZXJzIHx8IFtdKSA6IGFyZ3M7XG4gICAgICAgIHZhciBzdGF0ZSQgPSB0aGlzLl9zdGF0ZSQ7XG4gICAgICAgIGlmIChmaWx0ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHN0YXRlJCA9IHN0YXRlJC5waXBlKG9wZXJhdG9yc18xLmRpc3RpbmN0VW50aWxDaGFuZ2VkKGZ1bmN0aW9uIChzdGF0ZUEsIHN0YXRlQikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJzLmV2ZXJ5KGZ1bmN0aW9uIChmaWx0ZXJGbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX29wdGlvbnMuZXF1YWxpdHlDaGVjayhmaWx0ZXJGbihzdGF0ZUEpLCBmaWx0ZXJGbihzdGF0ZUIpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmluaXRpYWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBzdGF0ZSQgPSBzdGF0ZSQucGlwZShvcGVyYXRvcnNfMS5za2lwKDEpKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IFtcbiAgICAgICAgICAgIHN0YXRlJC5zdWJzY3JpYmUoc3Vic2NyaWJlciksXG4gICAgICAgICAgICB0aGlzLl9ub3RpZmljYXRpb24kLnN1YnNjcmliZShzdWJzY3JpYmVyKSxcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1YnNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7IHJldHVybiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsgfSk7IH07XG4gICAgfTtcbiAgICBEYXRhU3RvcmUucHJvdG90eXBlLl90cmFuc2Zvcm1TdGF0ZXMgPSBmdW5jdGlvbiAoc3RhdGVzLCBhY3Rpb24pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBuZXdTdGF0ZSA9IHRoaXMuX29wdGlvbnMuc2hvdWxkV2Fybk11dGF0aW9uID09PSBmYWxzZSA/XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVkdWNlcihzdGF0ZXMuc3RhdGUsIGFjdGlvbikgOlxuICAgICAgICAgICAgICAgIGRlZXBfZnJlZXplXzEuZGVmYXVsdCh0aGlzLl9yZWR1Y2VyKHN0YXRlcy5zdGF0ZSwgYWN0aW9uKSwge1xuICAgICAgICAgICAgICAgICAgICBlcXVhbGl0eUNoZWNrOiB0aGlzLl9vcHRpb25zLmVxdWFsaXR5Q2hlY2ssXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWU6IHN0YXRlcy5zdGF0ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1lZFN0YXRlID0gdGhpcy5fb3B0aW9ucy5zdGF0ZVRyYW5zZm9ybWVyKG5ld1N0YXRlKTtcbiAgICAgICAgICAgIHJldHVybiB7IHN0YXRlOiBuZXdTdGF0ZSwgdHJhbnNmb3JtZWRTdGF0ZTogdHJhbnNmb3JtZWRTdGF0ZSB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5fZ2V0RGlzcGF0Y2hFcnJvcihhY3Rpb24ubWV0YSAmJiBhY3Rpb24ubWV0YS5xdWV1ZUlkKS5uZXh0KGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7IHN0YXRlOiBzdGF0ZXMuc3RhdGUsIHRyYW5zZm9ybWVkU3RhdGU6IHN0YXRlcy50cmFuc2Zvcm1lZFN0YXRlIH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERhdGFTdG9yZS5wcm90b3R5cGUuX2Rpc3BhdGNoQWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzcGF0Y2hPYnNlcnZhYmxlQWN0aW9uKGFjdGlvbi5lcnJvciA/IHJ4anNfMS50aHJvd0Vycm9yKGFjdGlvbikgOiByeGpzXzEub2YoYWN0aW9uKSk7XG4gICAgfTtcbiAgICBEYXRhU3RvcmUucHJvdG90eXBlLl9kaXNwYXRjaE9ic2VydmFibGVBY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uJCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIGVycm9yJCA9IF90aGlzLl9nZXREaXNwYXRjaEVycm9yKG9wdGlvbnMucXVldWVJZCk7XG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtZWRBY3Rpb24kID0gX3RoaXMuX29wdGlvbnMuYWN0aW9uVHJhbnNmb3JtZXIocnhqc18xLmZyb20oYWN0aW9uJCkucGlwZShvcGVyYXRvcnNfMS5tYXAoZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLnF1ZXVlSWQgP1xuICAgICAgICAgICAgICAgICAgICBsb2Rhc2hfMS5tZXJnZSh7fSwgYWN0aW9uLCB7IG1ldGE6IHsgcXVldWVJZDogb3B0aW9ucy5xdWV1ZUlkIH0gfSkgOlxuICAgICAgICAgICAgICAgICAgICBhY3Rpb247XG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgX3RoaXMuX2dldERpc3BhdGNoZXIob3B0aW9ucy5xdWV1ZUlkKS5uZXh0KHJ4anNfMS5mcm9tKHRyYW5zZm9ybWVkQWN0aW9uJClcbiAgICAgICAgICAgICAgICAucGlwZShvcGVyYXRvcnNfMS5tYXAoZnVuY3Rpb24gKGFjdGlvbiwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IkLnBpcGUob3BlcmF0b3JzXzEuZmlyc3QoKSkuc3Vic2NyaWJlKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhY3Rpb24uZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGFjdGlvbi5wYXlsb2FkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbjtcbiAgICAgICAgICAgIH0pLCBvcGVyYXRvcnNfMS5jYXRjaEVycm9yKGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICByZWplY3QoYWN0aW9uIGluc3RhbmNlb2YgRXJyb3IgPyBhY3Rpb24gOiBhY3Rpb24ucGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ4anNfMS5vZihhY3Rpb24pO1xuICAgICAgICAgICAgfSksIG9wZXJhdG9yc18xLnRhcCh7XG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5nZXRTdGF0ZSgpKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBEYXRhU3RvcmUucHJvdG90eXBlLl9kaXNwYXRjaFRodW5rQWN0aW9uID0gZnVuY3Rpb24gKHRodW5rQWN0aW9uLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNwYXRjaE9ic2VydmFibGVBY3Rpb24ocnhqc18xLmRlZmVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRodW5rQWN0aW9uKF90aGlzKTsgfSksIG9wdGlvbnMpO1xuICAgIH07XG4gICAgRGF0YVN0b3JlLnByb3RvdHlwZS5fZ2V0RGlzcGF0Y2hlciA9IGZ1bmN0aW9uIChxdWV1ZUlkKSB7XG4gICAgICAgIGlmIChxdWV1ZUlkID09PSB2b2lkIDApIHsgcXVldWVJZCA9ICdkZWZhdWx0JzsgfVxuICAgICAgICBpZiAoIXRoaXMuX2Rpc3BhdGNoZXJzW3F1ZXVlSWRdKSB7XG4gICAgICAgICAgICB0aGlzLl9kaXNwYXRjaGVyc1txdWV1ZUlkXSA9IG5ldyByeGpzXzEuU3ViamVjdCgpO1xuICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2hRdWV1ZSQubmV4dCh0aGlzLl9kaXNwYXRjaGVyc1txdWV1ZUlkXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc3BhdGNoZXJzW3F1ZXVlSWRdO1xuICAgIH07XG4gICAgRGF0YVN0b3JlLnByb3RvdHlwZS5fZ2V0RGlzcGF0Y2hFcnJvciA9IGZ1bmN0aW9uIChxdWV1ZUlkKSB7XG4gICAgICAgIGlmIChxdWV1ZUlkID09PSB2b2lkIDApIHsgcXVldWVJZCA9ICdkZWZhdWx0JzsgfVxuICAgICAgICBpZiAoIXRoaXMuX2Vycm9yc1txdWV1ZUlkXSkge1xuICAgICAgICAgICAgdGhpcy5fZXJyb3JzW3F1ZXVlSWRdID0gbmV3IHJ4anNfMS5TdWJqZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yc1txdWV1ZUlkXTtcbiAgICB9O1xuICAgIHJldHVybiBEYXRhU3RvcmU7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gRGF0YVN0b3JlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YS1zdG9yZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/data-store/lib/data-store.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/data-store/lib/deep-freeze.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@bigcommerce/data-store/lib/deep-freeze.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar lodash_1 = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\nvar shallowEqual = __webpack_require__(/*! shallowequal */ \"./node_modules/shallowequal/index.js\");\nfunction deepFreeze(object, options) {\n    try {\n        var _a = options || {}, _b = _a.equalityCheck, equalityCheck_1 = _b === void 0 ? shallowEqual : _b, _c = _a.previousValue, previousValue_1 = _c === void 0 ? null : _c;\n        if (equalityCheck_1(object, previousValue_1) && Object.isFrozen(previousValue_1)) {\n            return previousValue_1;\n        }\n        if (Object.isFrozen(object) || (!Array.isArray(object) && !lodash_1.isPlainObject(object))) {\n            return object;\n        }\n        if (Array.isArray(object)) {\n            return Object.freeze(object.map(function (value, index) {\n                return deepFreeze(value, {\n                    equalityCheck: equalityCheck_1,\n                    previousValue: Array.isArray(previousValue_1) ? previousValue_1[index] : undefined,\n                });\n            }));\n        }\n        return Object.freeze(Object.getOwnPropertyNames(object).reduce(function (result, key) {\n            result[key] = deepFreeze(object[key], {\n                equalityCheck: equalityCheck_1,\n                previousValue: previousValue_1 && previousValue_1.hasOwnProperty(key) ?\n                    previousValue_1[key] :\n                    undefined,\n            });\n            return result;\n        }, {}));\n    }\n    catch (error) {\n        if (error instanceof TypeError) {\n            return object;\n        }\n        throw error;\n    }\n}\nexports[\"default\"] = deepFreeze;\n//# sourceMappingURL=deep-freeze.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2RlZXAtZnJlZXplLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGVBQWUsbUJBQU8sQ0FBQywrQ0FBUTtBQUMvQixtQkFBbUIsbUJBQU8sQ0FBQywwREFBYztBQUN6QztBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvZGF0YS1zdG9yZS9saWIvZGVlcC1mcmVlemUuanM/OGY2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBsb2Rhc2hfMSA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG52YXIgc2hhbGxvd0VxdWFsID0gcmVxdWlyZShcInNoYWxsb3dlcXVhbFwiKTtcbmZ1bmN0aW9uIGRlZXBGcmVlemUob2JqZWN0LCBvcHRpb25zKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIF9hID0gb3B0aW9ucyB8fCB7fSwgX2IgPSBfYS5lcXVhbGl0eUNoZWNrLCBlcXVhbGl0eUNoZWNrXzEgPSBfYiA9PT0gdm9pZCAwID8gc2hhbGxvd0VxdWFsIDogX2IsIF9jID0gX2EucHJldmlvdXNWYWx1ZSwgcHJldmlvdXNWYWx1ZV8xID0gX2MgPT09IHZvaWQgMCA/IG51bGwgOiBfYztcbiAgICAgICAgaWYgKGVxdWFsaXR5Q2hlY2tfMShvYmplY3QsIHByZXZpb3VzVmFsdWVfMSkgJiYgT2JqZWN0LmlzRnJvemVuKHByZXZpb3VzVmFsdWVfMSkpIHtcbiAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1ZhbHVlXzE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9iamVjdC5pc0Zyb3plbihvYmplY3QpIHx8ICghQXJyYXkuaXNBcnJheShvYmplY3QpICYmICFsb2Rhc2hfMS5pc1BsYWluT2JqZWN0KG9iamVjdCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZnJlZXplKG9iamVjdC5tYXAoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWVwRnJlZXplKHZhbHVlLCB7XG4gICAgICAgICAgICAgICAgICAgIGVxdWFsaXR5Q2hlY2s6IGVxdWFsaXR5Q2hlY2tfMSxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZTogQXJyYXkuaXNBcnJheShwcmV2aW91c1ZhbHVlXzEpID8gcHJldmlvdXNWYWx1ZV8xW2luZGV4XSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZShPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmplY3QpLnJlZHVjZShmdW5jdGlvbiAocmVzdWx0LCBrZXkpIHtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gZGVlcEZyZWV6ZShvYmplY3Rba2V5XSwge1xuICAgICAgICAgICAgICAgIGVxdWFsaXR5Q2hlY2s6IGVxdWFsaXR5Q2hlY2tfMSxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlOiBwcmV2aW91c1ZhbHVlXzEgJiYgcHJldmlvdXNWYWx1ZV8xLmhhc093blByb3BlcnR5KGtleSkgP1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlXzFba2V5XSA6XG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSwge30pKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFR5cGVFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBkZWVwRnJlZXplO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVlcC1mcmVlemUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/data-store/lib/deep-freeze.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/data-store/lib/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@bigcommerce/data-store/lib/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar data_store_1 = __webpack_require__(/*! ./data-store */ \"./node_modules/@bigcommerce/data-store/lib/data-store.js\");\nexports.DataStore = data_store_1.default;\nvar combine_reducers_1 = __webpack_require__(/*! ./combine-reducers */ \"./node_modules/@bigcommerce/data-store/lib/combine-reducers.js\");\nexports.combineReducers = combine_reducers_1.default;\nvar compose_reducers_1 = __webpack_require__(/*! ./compose-reducers */ \"./node_modules/@bigcommerce/data-store/lib/compose-reducers.js\");\nexports.composeReducers = compose_reducers_1.default;\nvar create_action_1 = __webpack_require__(/*! ./create-action */ \"./node_modules/@bigcommerce/data-store/lib/create-action.js\");\nexports.createAction = create_action_1.default;\nvar create_data_store_1 = __webpack_require__(/*! ./create-data-store */ \"./node_modules/@bigcommerce/data-store/lib/create-data-store.js\");\nexports.createDataStore = create_data_store_1.default;\nvar create_error_action_1 = __webpack_require__(/*! ./create-error-action */ \"./node_modules/@bigcommerce/data-store/lib/create-error-action.js\");\nexports.createErrorAction = create_error_action_1.default;\nvar deep_freeze_1 = __webpack_require__(/*! ./deep-freeze */ \"./node_modules/@bigcommerce/data-store/lib/deep-freeze.js\");\nexports.deepFreeze = deep_freeze_1.default;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG1CQUFtQixtQkFBTyxDQUFDLDhFQUFjO0FBQ3pDLGlCQUFpQjtBQUNqQix5QkFBeUIsbUJBQU8sQ0FBQywwRkFBb0I7QUFDckQsdUJBQXVCO0FBQ3ZCLHlCQUF5QixtQkFBTyxDQUFDLDBGQUFvQjtBQUNyRCx1QkFBdUI7QUFDdkIsc0JBQXNCLG1CQUFPLENBQUMsb0ZBQWlCO0FBQy9DLG9CQUFvQjtBQUNwQiwwQkFBMEIsbUJBQU8sQ0FBQyw0RkFBcUI7QUFDdkQsdUJBQXVCO0FBQ3ZCLDRCQUE0QixtQkFBTyxDQUFDLGdHQUF1QjtBQUMzRCx5QkFBeUI7QUFDekIsb0JBQW9CLG1CQUFPLENBQUMsZ0ZBQWU7QUFDM0Msa0JBQWtCO0FBQ2xCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2luZGV4LmpzPzdkZmMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgZGF0YV9zdG9yZV8xID0gcmVxdWlyZShcIi4vZGF0YS1zdG9yZVwiKTtcbmV4cG9ydHMuRGF0YVN0b3JlID0gZGF0YV9zdG9yZV8xLmRlZmF1bHQ7XG52YXIgY29tYmluZV9yZWR1Y2Vyc18xID0gcmVxdWlyZShcIi4vY29tYmluZS1yZWR1Y2Vyc1wiKTtcbmV4cG9ydHMuY29tYmluZVJlZHVjZXJzID0gY29tYmluZV9yZWR1Y2Vyc18xLmRlZmF1bHQ7XG52YXIgY29tcG9zZV9yZWR1Y2Vyc18xID0gcmVxdWlyZShcIi4vY29tcG9zZS1yZWR1Y2Vyc1wiKTtcbmV4cG9ydHMuY29tcG9zZVJlZHVjZXJzID0gY29tcG9zZV9yZWR1Y2Vyc18xLmRlZmF1bHQ7XG52YXIgY3JlYXRlX2FjdGlvbl8xID0gcmVxdWlyZShcIi4vY3JlYXRlLWFjdGlvblwiKTtcbmV4cG9ydHMuY3JlYXRlQWN0aW9uID0gY3JlYXRlX2FjdGlvbl8xLmRlZmF1bHQ7XG52YXIgY3JlYXRlX2RhdGFfc3RvcmVfMSA9IHJlcXVpcmUoXCIuL2NyZWF0ZS1kYXRhLXN0b3JlXCIpO1xuZXhwb3J0cy5jcmVhdGVEYXRhU3RvcmUgPSBjcmVhdGVfZGF0YV9zdG9yZV8xLmRlZmF1bHQ7XG52YXIgY3JlYXRlX2Vycm9yX2FjdGlvbl8xID0gcmVxdWlyZShcIi4vY3JlYXRlLWVycm9yLWFjdGlvblwiKTtcbmV4cG9ydHMuY3JlYXRlRXJyb3JBY3Rpb24gPSBjcmVhdGVfZXJyb3JfYWN0aW9uXzEuZGVmYXVsdDtcbnZhciBkZWVwX2ZyZWV6ZV8xID0gcmVxdWlyZShcIi4vZGVlcC1mcmVlemVcIik7XG5leHBvcnRzLmRlZXBGcmVlemUgPSBkZWVwX2ZyZWV6ZV8xLmRlZmF1bHQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/data-store/lib/index.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/data-store/lib/is-observable-action-like.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@bigcommerce/data-store/lib/is-observable-action-like.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nfunction isObservableActionLike(action) {\n    return (typeof action.subscribe === 'function' ||\n        typeof action.then === 'function');\n}\nexports[\"default\"] = isObservableActionLike;\n//# sourceMappingURL=is-observable-action-like.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2lzLW9ic2VydmFibGUtYWN0aW9uLWxpa2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL2lzLW9ic2VydmFibGUtYWN0aW9uLWxpa2UuanM/MDQ1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIGlzT2JzZXJ2YWJsZUFjdGlvbkxpa2UoYWN0aW9uKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgYWN0aW9uLnN1YnNjcmliZSA9PT0gJ2Z1bmN0aW9uJyB8fFxuICAgICAgICB0eXBlb2YgYWN0aW9uLnRoZW4gPT09ICdmdW5jdGlvbicpO1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gaXNPYnNlcnZhYmxlQWN0aW9uTGlrZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzLW9ic2VydmFibGUtYWN0aW9uLWxpa2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/data-store/lib/is-observable-action-like.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/data-store/lib/noop-action-transformer.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@bigcommerce/data-store/lib/noop-action-transformer.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nfunction noopActionTransformer(action) {\n    return action;\n}\nexports[\"default\"] = noopActionTransformer;\n//# sourceMappingURL=noop-action-transformer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL25vb3AtYWN0aW9uLXRyYW5zZm9ybWVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvZGF0YS1zdG9yZS9saWIvbm9vcC1hY3Rpb24tdHJhbnNmb3JtZXIuanM/MjE4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIG5vb3BBY3Rpb25UcmFuc2Zvcm1lcihhY3Rpb24pIHtcbiAgICByZXR1cm4gYWN0aW9uO1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gbm9vcEFjdGlvblRyYW5zZm9ybWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm9vcC1hY3Rpb24tdHJhbnNmb3JtZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/data-store/lib/noop-action-transformer.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/data-store/lib/noop-state-transformer.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@bigcommerce/data-store/lib/noop-state-transformer.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nfunction noopStateTransformer(state) {\n    return state;\n}\nexports[\"default\"] = noopStateTransformer;\n//# sourceMappingURL=noop-state-transformer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2RhdGEtc3RvcmUvbGliL25vb3Atc3RhdGUtdHJhbnNmb3JtZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9kYXRhLXN0b3JlL2xpYi9ub29wLXN0YXRlLXRyYW5zZm9ybWVyLmpzP2VkNjYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5mdW5jdGlvbiBub29wU3RhdGVUcmFuc2Zvcm1lcihzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IG5vb3BTdGF0ZVRyYW5zZm9ybWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm9vcC1zdGF0ZS10cmFuc2Zvcm1lci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/data-store/lib/noop-state-transformer.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/form-poster/lib/create-form-poster.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@bigcommerce/form-poster/lib/create-form-poster.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports[\"default\"] = createFormPoster;\nvar form_builder_1 = __webpack_require__(/*! ./form-builder */ \"./node_modules/@bigcommerce/form-poster/lib/form-builder.js\");\nvar form_poster_1 = __webpack_require__(/*! ./form-poster */ \"./node_modules/@bigcommerce/form-poster/lib/form-poster.js\");\nfunction createFormPoster(options) {\n    var formBuilder = new form_builder_1.default();\n    var formPoster = new form_poster_1.default(formBuilder, options);\n    return formPoster;\n}\n//# sourceMappingURL=create-form-poster.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyL2xpYi9jcmVhdGUtZm9ybS1wb3N0ZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0JBQWU7QUFDZixxQkFBcUIsbUJBQU8sQ0FBQyxtRkFBZ0I7QUFDN0Msb0JBQW9CLG1CQUFPLENBQUMsaUZBQWU7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyL2xpYi9jcmVhdGUtZm9ybS1wb3N0ZXIuanM/ODUwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGNyZWF0ZUZvcm1Qb3N0ZXI7XG52YXIgZm9ybV9idWlsZGVyXzEgPSByZXF1aXJlKFwiLi9mb3JtLWJ1aWxkZXJcIik7XG52YXIgZm9ybV9wb3N0ZXJfMSA9IHJlcXVpcmUoXCIuL2Zvcm0tcG9zdGVyXCIpO1xuZnVuY3Rpb24gY3JlYXRlRm9ybVBvc3RlcihvcHRpb25zKSB7XG4gICAgdmFyIGZvcm1CdWlsZGVyID0gbmV3IGZvcm1fYnVpbGRlcl8xLmRlZmF1bHQoKTtcbiAgICB2YXIgZm9ybVBvc3RlciA9IG5ldyBmb3JtX3Bvc3Rlcl8xLmRlZmF1bHQoZm9ybUJ1aWxkZXIsIG9wdGlvbnMpO1xuICAgIHJldHVybiBmb3JtUG9zdGVyO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlLWZvcm0tcG9zdGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/form-poster/lib/create-form-poster.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/form-poster/lib/form-builder.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@bigcommerce/form-poster/lib/form-builder.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar FormBuilder = (function () {\n    function FormBuilder() {\n    }\n    FormBuilder.prototype.build = function (url, data, target) {\n        var _this = this;\n        var form = document.createElement('form');\n        form.style.display = 'none';\n        form.setAttribute('action', url);\n        form.setAttribute('method', 'POST');\n        form.setAttribute('target', target || '_top');\n        Object.keys(data)\n            .forEach(function (key) {\n            var value = data[key];\n            form.appendChild(_this._createInput(value, key));\n        });\n        return form;\n    };\n    FormBuilder.prototype._createInput = function (value, key) {\n        var input = document.createElement('input');\n        input.setAttribute('name', key);\n        input.setAttribute('type', 'hidden');\n        input.setAttribute('value', value);\n        return input;\n    };\n    return FormBuilder;\n}());\nexports[\"default\"] = FormBuilder;\n//# sourceMappingURL=form-builder.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyL2xpYi9mb3JtLWJ1aWxkZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyL2xpYi9mb3JtLWJ1aWxkZXIuanM/ZjBjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBGb3JtQnVpbGRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRm9ybUJ1aWxkZXIoKSB7XG4gICAgfVxuICAgIEZvcm1CdWlsZGVyLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uICh1cmwsIGRhdGEsIHRhcmdldCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICAgICAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBmb3JtLnNldEF0dHJpYnV0ZSgnYWN0aW9uJywgdXJsKTtcbiAgICAgICAgZm9ybS5zZXRBdHRyaWJ1dGUoJ21ldGhvZCcsICdQT1NUJyk7XG4gICAgICAgIGZvcm0uc2V0QXR0cmlidXRlKCd0YXJnZXQnLCB0YXJnZXQgfHwgJ190b3AnKTtcbiAgICAgICAgT2JqZWN0LmtleXMoZGF0YSlcbiAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGRhdGFba2V5XTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoX3RoaXMuX2NyZWF0ZUlucHV0KHZhbHVlLCBrZXkpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmb3JtO1xuICAgIH07XG4gICAgRm9ybUJ1aWxkZXIucHJvdG90eXBlLl9jcmVhdGVJbnB1dCA9IGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsIGtleSk7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICdoaWRkZW4nKTtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH07XG4gICAgcmV0dXJuIEZvcm1CdWlsZGVyO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IEZvcm1CdWlsZGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Zm9ybS1idWlsZGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/form-poster/lib/form-builder.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/form-poster/lib/form-poster.js":
/*!******************************************************************!*\
  !*** ./node_modules/@bigcommerce/form-poster/lib/form-poster.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar url_utils_1 = __webpack_require__(/*! ./url-utils */ \"./node_modules/@bigcommerce/form-poster/lib/url-utils.js\");\nvar FormPoster = (function () {\n    function FormPoster(_formBuilder, _options) {\n        this._formBuilder = _formBuilder;\n        this._options = _options;\n    }\n    FormPoster.prototype.postForm = function (url, data, callback, target) {\n        var form = this._formBuilder.build(this._prependHost(url), data, target);\n        window.addEventListener('unload', function handleUnload() {\n            window.removeEventListener('unload', handleUnload);\n            if (callback) {\n                callback();\n            }\n        });\n        document.body.appendChild(form);\n        form.submit();\n    };\n    FormPoster.prototype._prependHost = function (url) {\n        if (!this._options || !this._options.host || (0, url_utils_1.isAbsoluteUrl)(url)) {\n            return url;\n        }\n        return (0, url_utils_1.joinPaths)(this._options.host, url);\n    };\n    return FormPoster;\n}());\nexports[\"default\"] = FormPoster;\n//# sourceMappingURL=form-poster.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyL2xpYi9mb3JtLXBvc3Rlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxrQkFBa0IsbUJBQU8sQ0FBQyw2RUFBYTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlci9saWIvZm9ybS1wb3N0ZXIuanM/NjBmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB1cmxfdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3VybC11dGlsc1wiKTtcbnZhciBGb3JtUG9zdGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBGb3JtUG9zdGVyKF9mb3JtQnVpbGRlciwgX29wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fZm9ybUJ1aWxkZXIgPSBfZm9ybUJ1aWxkZXI7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBfb3B0aW9ucztcbiAgICB9XG4gICAgRm9ybVBvc3Rlci5wcm90b3R5cGUucG9zdEZvcm0gPSBmdW5jdGlvbiAodXJsLCBkYXRhLCBjYWxsYmFjaywgdGFyZ2V0KSB7XG4gICAgICAgIHZhciBmb3JtID0gdGhpcy5fZm9ybUJ1aWxkZXIuYnVpbGQodGhpcy5fcHJlcGVuZEhvc3QodXJsKSwgZGF0YSwgdGFyZ2V0KTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VubG9hZCcsIGZ1bmN0aW9uIGhhbmRsZVVubG9hZCgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd1bmxvYWQnLCBoYW5kbGVVbmxvYWQpO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgICAgIGZvcm0uc3VibWl0KCk7XG4gICAgfTtcbiAgICBGb3JtUG9zdGVyLnByb3RvdHlwZS5fcHJlcGVuZEhvc3QgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIGlmICghdGhpcy5fb3B0aW9ucyB8fCAhdGhpcy5fb3B0aW9ucy5ob3N0IHx8ICgwLCB1cmxfdXRpbHNfMS5pc0Fic29sdXRlVXJsKSh1cmwpKSB7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoMCwgdXJsX3V0aWxzXzEuam9pblBhdGhzKSh0aGlzLl9vcHRpb25zLmhvc3QsIHVybCk7XG4gICAgfTtcbiAgICByZXR1cm4gRm9ybVBvc3Rlcjtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBGb3JtUG9zdGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Zm9ybS1wb3N0ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/form-poster/lib/form-poster.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/form-poster/lib/index.js":
/*!************************************************************!*\
  !*** ./node_modules/@bigcommerce/form-poster/lib/index.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FormPoster = exports.createFormPoster = void 0;\nvar create_form_poster_1 = __webpack_require__(/*! ./create-form-poster */ \"./node_modules/@bigcommerce/form-poster/lib/create-form-poster.js\");\nObject.defineProperty(exports, \"createFormPoster\", ({ enumerable: true, get: function () { return create_form_poster_1.default; } }));\nvar form_poster_1 = __webpack_require__(/*! ./form-poster */ \"./node_modules/@bigcommerce/form-poster/lib/form-poster.js\");\nObject.defineProperty(exports, \"FormPoster\", ({ enumerable: true, get: function () { return form_poster_1.default; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyL2xpYi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxrQkFBa0IsR0FBRyx3QkFBd0I7QUFDN0MsMkJBQTJCLG1CQUFPLENBQUMsK0ZBQXNCO0FBQ3pELG9EQUFtRCxFQUFFLHFDQUFxQyx3Q0FBd0MsRUFBQztBQUNuSSxvQkFBb0IsbUJBQU8sQ0FBQyxpRkFBZTtBQUMzQyw4Q0FBNkMsRUFBRSxxQ0FBcUMsaUNBQWlDLEVBQUM7QUFDdEgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXIvbGliL2luZGV4LmpzPzE3ZmYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZvcm1Qb3N0ZXIgPSBleHBvcnRzLmNyZWF0ZUZvcm1Qb3N0ZXIgPSB2b2lkIDA7XG52YXIgY3JlYXRlX2Zvcm1fcG9zdGVyXzEgPSByZXF1aXJlKFwiLi9jcmVhdGUtZm9ybS1wb3N0ZXJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJjcmVhdGVGb3JtUG9zdGVyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVfZm9ybV9wb3N0ZXJfMS5kZWZhdWx0OyB9IH0pO1xudmFyIGZvcm1fcG9zdGVyXzEgPSByZXF1aXJlKFwiLi9mb3JtLXBvc3RlclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkZvcm1Qb3N0ZXJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZvcm1fcG9zdGVyXzEuZGVmYXVsdDsgfSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/form-poster/lib/index.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/form-poster/lib/url-utils.js":
/*!****************************************************************!*\
  !*** ./node_modules/@bigcommerce/form-poster/lib/url-utils.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.isAbsoluteUrl = isAbsoluteUrl;\nexports.joinPaths = joinPaths;\nfunction isAbsoluteUrl(url) {\n    return /^https?:\\/\\//.test(url);\n}\nfunction joinPaths(pathA, pathB) {\n    return \"\".concat(removeTrailingSlash(pathA), \"/\").concat(removeLeadingSlash(pathB));\n}\nfunction removeTrailingSlash(path) {\n    return path.replace(/\\/$/, '');\n}\nfunction removeLeadingSlash(path) {\n    return path.replace(/^\\//, '');\n}\n//# sourceMappingURL=url-utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyL2xpYi91cmwtdXRpbHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlci9saWIvdXJsLXV0aWxzLmpzP2Q2YzUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmlzQWJzb2x1dGVVcmwgPSBpc0Fic29sdXRlVXJsO1xuZXhwb3J0cy5qb2luUGF0aHMgPSBqb2luUGF0aHM7XG5mdW5jdGlvbiBpc0Fic29sdXRlVXJsKHVybCkge1xuICAgIHJldHVybiAvXmh0dHBzPzpcXC9cXC8vLnRlc3QodXJsKTtcbn1cbmZ1bmN0aW9uIGpvaW5QYXRocyhwYXRoQSwgcGF0aEIpIHtcbiAgICByZXR1cm4gXCJcIi5jb25jYXQocmVtb3ZlVHJhaWxpbmdTbGFzaChwYXRoQSksIFwiL1wiKS5jb25jYXQocmVtb3ZlTGVhZGluZ1NsYXNoKHBhdGhCKSk7XG59XG5mdW5jdGlvbiByZW1vdmVUcmFpbGluZ1NsYXNoKHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9cXC8kLywgJycpO1xufVxuZnVuY3Rpb24gcmVtb3ZlTGVhZGluZ1NsYXNoKHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9eXFwvLywgJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXJsLXV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/form-poster/lib/url-utils.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/memoize/lib/cache-key-maps.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@bigcommerce/memoize/lib/cache-key-maps.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.isTerminalCacheKeyMap = isTerminalCacheKeyMap;\nexports.isRootCacheKeyMap = isRootCacheKeyMap;\nfunction isTerminalCacheKeyMap(map) {\n    return map.hasOwnProperty('cacheKey');\n}\nfunction isRootCacheKeyMap(map) {\n    return map.hasOwnProperty('parentMap');\n}\n//# sourceMappingURL=cache-key-maps.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL21lbW9pemUvbGliL2NhY2hlLWtleS1tYXBzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvbWVtb2l6ZS9saWIvY2FjaGUta2V5LW1hcHMuanM/YzMzMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaXNUZXJtaW5hbENhY2hlS2V5TWFwID0gaXNUZXJtaW5hbENhY2hlS2V5TWFwO1xuZXhwb3J0cy5pc1Jvb3RDYWNoZUtleU1hcCA9IGlzUm9vdENhY2hlS2V5TWFwO1xuZnVuY3Rpb24gaXNUZXJtaW5hbENhY2hlS2V5TWFwKG1hcCkge1xuICAgIHJldHVybiBtYXAuaGFzT3duUHJvcGVydHkoJ2NhY2hlS2V5Jyk7XG59XG5mdW5jdGlvbiBpc1Jvb3RDYWNoZUtleU1hcChtYXApIHtcbiAgICByZXR1cm4gbWFwLmhhc093blByb3BlcnR5KCdwYXJlbnRNYXAnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhY2hlLWtleS1tYXBzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/memoize/lib/cache-key-maps.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/memoize/lib/cache-key-resolver.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@bigcommerce/memoize/lib/cache-key-resolver.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nvar lodash_1 = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\nvar shallowequal_1 = tslib_1.__importDefault(__webpack_require__(/*! shallowequal */ \"./node_modules/shallowequal/index.js\"));\nvar cache_key_maps_1 = __webpack_require__(/*! ./cache-key-maps */ \"./node_modules/@bigcommerce/memoize/lib/cache-key-maps.js\");\nvar CacheKeyResolver = /** @class */ (function () {\n    function CacheKeyResolver(options) {\n        this._lastId = 0;\n        this._map = { maps: [] };\n        this._usedMaps = [];\n        this._options = tslib_1.__assign({ isEqual: shallowequal_1.default, maxSize: 0, onExpire: lodash_1.noop }, options);\n    }\n    CacheKeyResolver.prototype.getKey = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var result = this._resolveMap.apply(this, args);\n        var index = result.index, parentMap = result.parentMap;\n        var map = result.map;\n        if (map && map.cacheKey) {\n            map.usedCount++;\n        }\n        else {\n            map = this._generateMap(parentMap, args.slice(index));\n        }\n        // Keep track of the least used map so we can remove it if the size of\n        // the stack exceeds the maximum size.\n        this._removeLeastUsedMap(map);\n        return map.cacheKey;\n    };\n    CacheKeyResolver.prototype.getUsedCount = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var map = this._resolveMap.apply(this, args).map;\n        return map ? map.usedCount : 0;\n    };\n    CacheKeyResolver.prototype._resolveMap = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var index = 0;\n        var parentMap = this._map;\n        // Traverse the tree to find the linked list of maps that match the\n        // arguments of the call. Each intermediate or terminal map contains a\n        // value that could be used to match with the arguments. The last map in\n        // the list (the terminal) should contain a cache key. If it can does\n        // not exist, we will return a falsy value so that the caller could\n        // handle and generate a new cache key.\n        while (parentMap.maps.length) {\n            var isMatched = false;\n            for (var mapIndex = 0; mapIndex < parentMap.maps.length; mapIndex++) {\n                var map = parentMap.maps[mapIndex];\n                if (!this._options.isEqual(map.value, args[index])) {\n                    continue;\n                }\n                // Move the most recently used map to the top of the stack for\n                // quicker access\n                (_a = parentMap.maps).unshift.apply(_a, parentMap.maps.splice(mapIndex, 1));\n                if ((args.length === 0 || index === args.length - 1) && (0, cache_key_maps_1.isTerminalCacheKeyMap)(map)) {\n                    return { index: index, map: map, parentMap: parentMap };\n                }\n                isMatched = true;\n                parentMap = map;\n                index++;\n                break;\n            }\n            if (!isMatched) {\n                break;\n            }\n        }\n        return { index: index, parentMap: parentMap };\n    };\n    CacheKeyResolver.prototype._generateMap = function (parent, args) {\n        var index = 0;\n        var parentMap = parent;\n        var map;\n        do {\n            map = {\n                maps: [],\n                parentMap: parentMap,\n                usedCount: 1,\n                value: args[index],\n            };\n            // Continue to build the tree of maps so that it could be resolved\n            // next time when the function is called with the same set of\n            // arguments.\n            parentMap.maps.unshift(map);\n            parentMap = map;\n            index++;\n        } while (index < args.length);\n        var terminalMap = map;\n        terminalMap.cacheKey = \"\".concat(++this._lastId);\n        return terminalMap;\n    };\n    CacheKeyResolver.prototype._removeLeastUsedMap = function (recentlyUsedMap) {\n        if (!this._options.maxSize) {\n            return;\n        }\n        var index = this._usedMaps.indexOf(recentlyUsedMap);\n        this._usedMaps.splice(index === -1 ? 0 : index, index === -1 ? 0 : 1, recentlyUsedMap);\n        if (this._usedMaps.length <= this._options.maxSize) {\n            return;\n        }\n        var map = this._usedMaps.pop();\n        if (!map) {\n            return;\n        }\n        this._removeMap(map);\n        this._options.onExpire(map.cacheKey);\n    };\n    CacheKeyResolver.prototype._removeMap = function (map) {\n        if (!map.parentMap) {\n            return;\n        }\n        map.parentMap.maps.splice(map.parentMap.maps.indexOf(map), 1);\n        if ((0, cache_key_maps_1.isRootCacheKeyMap)(map.parentMap)) {\n            return;\n        }\n        this._removeMap(map.parentMap);\n    };\n    return CacheKeyResolver;\n}());\nexports[\"default\"] = CacheKeyResolver;\n//# sourceMappingURL=cache-key-resolver.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL21lbW9pemUvbGliL2NhY2hlLWtleS1yZXNvbHZlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxjQUFjLG1CQUFPLENBQUMsaURBQU87QUFDN0IsZUFBZSxtQkFBTyxDQUFDLCtDQUFRO0FBQy9CLDZDQUE2QyxtQkFBTyxDQUFDLDBEQUFjO0FBQ25FLHVCQUF1QixtQkFBTyxDQUFDLG1GQUFrQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSwyQ0FBMkMsc0VBQXNFO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsa0NBQWtDO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvbWVtb2l6ZS9saWIvY2FjaGUta2V5LXJlc29sdmVyLmpzP2Y4YWUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbnZhciBsb2Rhc2hfMSA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG52YXIgc2hhbGxvd2VxdWFsXzEgPSB0c2xpYl8xLl9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwic2hhbGxvd2VxdWFsXCIpKTtcbnZhciBjYWNoZV9rZXlfbWFwc18xID0gcmVxdWlyZShcIi4vY2FjaGUta2V5LW1hcHNcIik7XG52YXIgQ2FjaGVLZXlSZXNvbHZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDYWNoZUtleVJlc29sdmVyKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fbGFzdElkID0gMDtcbiAgICAgICAgdGhpcy5fbWFwID0geyBtYXBzOiBbXSB9O1xuICAgICAgICB0aGlzLl91c2VkTWFwcyA9IFtdO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gdHNsaWJfMS5fX2Fzc2lnbih7IGlzRXF1YWw6IHNoYWxsb3dlcXVhbF8xLmRlZmF1bHQsIG1heFNpemU6IDAsIG9uRXhwaXJlOiBsb2Rhc2hfMS5ub29wIH0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICBDYWNoZUtleVJlc29sdmVyLnByb3RvdHlwZS5nZXRLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX3Jlc29sdmVNYXAuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIHZhciBpbmRleCA9IHJlc3VsdC5pbmRleCwgcGFyZW50TWFwID0gcmVzdWx0LnBhcmVudE1hcDtcbiAgICAgICAgdmFyIG1hcCA9IHJlc3VsdC5tYXA7XG4gICAgICAgIGlmIChtYXAgJiYgbWFwLmNhY2hlS2V5KSB7XG4gICAgICAgICAgICBtYXAudXNlZENvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtYXAgPSB0aGlzLl9nZW5lcmF0ZU1hcChwYXJlbnRNYXAsIGFyZ3Muc2xpY2UoaW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBsZWFzdCB1c2VkIG1hcCBzbyB3ZSBjYW4gcmVtb3ZlIGl0IGlmIHRoZSBzaXplIG9mXG4gICAgICAgIC8vIHRoZSBzdGFjayBleGNlZWRzIHRoZSBtYXhpbXVtIHNpemUuXG4gICAgICAgIHRoaXMuX3JlbW92ZUxlYXN0VXNlZE1hcChtYXApO1xuICAgICAgICByZXR1cm4gbWFwLmNhY2hlS2V5O1xuICAgIH07XG4gICAgQ2FjaGVLZXlSZXNvbHZlci5wcm90b3R5cGUuZ2V0VXNlZENvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLl9yZXNvbHZlTWFwLmFwcGx5KHRoaXMsIGFyZ3MpLm1hcDtcbiAgICAgICAgcmV0dXJuIG1hcCA/IG1hcC51c2VkQ291bnQgOiAwO1xuICAgIH07XG4gICAgQ2FjaGVLZXlSZXNvbHZlci5wcm90b3R5cGUuX3Jlc29sdmVNYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgcGFyZW50TWFwID0gdGhpcy5fbWFwO1xuICAgICAgICAvLyBUcmF2ZXJzZSB0aGUgdHJlZSB0byBmaW5kIHRoZSBsaW5rZWQgbGlzdCBvZiBtYXBzIHRoYXQgbWF0Y2ggdGhlXG4gICAgICAgIC8vIGFyZ3VtZW50cyBvZiB0aGUgY2FsbC4gRWFjaCBpbnRlcm1lZGlhdGUgb3IgdGVybWluYWwgbWFwIGNvbnRhaW5zIGFcbiAgICAgICAgLy8gdmFsdWUgdGhhdCBjb3VsZCBiZSB1c2VkIHRvIG1hdGNoIHdpdGggdGhlIGFyZ3VtZW50cy4gVGhlIGxhc3QgbWFwIGluXG4gICAgICAgIC8vIHRoZSBsaXN0ICh0aGUgdGVybWluYWwpIHNob3VsZCBjb250YWluIGEgY2FjaGUga2V5LiBJZiBpdCBjYW4gZG9lc1xuICAgICAgICAvLyBub3QgZXhpc3QsIHdlIHdpbGwgcmV0dXJuIGEgZmFsc3kgdmFsdWUgc28gdGhhdCB0aGUgY2FsbGVyIGNvdWxkXG4gICAgICAgIC8vIGhhbmRsZSBhbmQgZ2VuZXJhdGUgYSBuZXcgY2FjaGUga2V5LlxuICAgICAgICB3aGlsZSAocGFyZW50TWFwLm1hcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgaXNNYXRjaGVkID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBtYXBJbmRleCA9IDA7IG1hcEluZGV4IDwgcGFyZW50TWFwLm1hcHMubGVuZ3RoOyBtYXBJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IHBhcmVudE1hcC5tYXBzW21hcEluZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX29wdGlvbnMuaXNFcXVhbChtYXAudmFsdWUsIGFyZ3NbaW5kZXhdKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gTW92ZSB0aGUgbW9zdCByZWNlbnRseSB1c2VkIG1hcCB0byB0aGUgdG9wIG9mIHRoZSBzdGFjayBmb3JcbiAgICAgICAgICAgICAgICAvLyBxdWlja2VyIGFjY2Vzc1xuICAgICAgICAgICAgICAgIChfYSA9IHBhcmVudE1hcC5tYXBzKS51bnNoaWZ0LmFwcGx5KF9hLCBwYXJlbnRNYXAubWFwcy5zcGxpY2UobWFwSW5kZXgsIDEpKTtcbiAgICAgICAgICAgICAgICBpZiAoKGFyZ3MubGVuZ3RoID09PSAwIHx8IGluZGV4ID09PSBhcmdzLmxlbmd0aCAtIDEpICYmICgwLCBjYWNoZV9rZXlfbWFwc18xLmlzVGVybWluYWxDYWNoZUtleU1hcCkobWFwKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBpbmRleDogaW5kZXgsIG1hcDogbWFwLCBwYXJlbnRNYXA6IHBhcmVudE1hcCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpc01hdGNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHBhcmVudE1hcCA9IG1hcDtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc01hdGNoZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBpbmRleDogaW5kZXgsIHBhcmVudE1hcDogcGFyZW50TWFwIH07XG4gICAgfTtcbiAgICBDYWNoZUtleVJlc29sdmVyLnByb3RvdHlwZS5fZ2VuZXJhdGVNYXAgPSBmdW5jdGlvbiAocGFyZW50LCBhcmdzKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBwYXJlbnRNYXAgPSBwYXJlbnQ7XG4gICAgICAgIHZhciBtYXA7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIG1hcCA9IHtcbiAgICAgICAgICAgICAgICBtYXBzOiBbXSxcbiAgICAgICAgICAgICAgICBwYXJlbnRNYXA6IHBhcmVudE1hcCxcbiAgICAgICAgICAgICAgICB1c2VkQ291bnQ6IDEsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGFyZ3NbaW5kZXhdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIENvbnRpbnVlIHRvIGJ1aWxkIHRoZSB0cmVlIG9mIG1hcHMgc28gdGhhdCBpdCBjb3VsZCBiZSByZXNvbHZlZFxuICAgICAgICAgICAgLy8gbmV4dCB0aW1lIHdoZW4gdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIHRoZSBzYW1lIHNldCBvZlxuICAgICAgICAgICAgLy8gYXJndW1lbnRzLlxuICAgICAgICAgICAgcGFyZW50TWFwLm1hcHMudW5zaGlmdChtYXApO1xuICAgICAgICAgICAgcGFyZW50TWFwID0gbWFwO1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfSB3aGlsZSAoaW5kZXggPCBhcmdzLmxlbmd0aCk7XG4gICAgICAgIHZhciB0ZXJtaW5hbE1hcCA9IG1hcDtcbiAgICAgICAgdGVybWluYWxNYXAuY2FjaGVLZXkgPSBcIlwiLmNvbmNhdCgrK3RoaXMuX2xhc3RJZCk7XG4gICAgICAgIHJldHVybiB0ZXJtaW5hbE1hcDtcbiAgICB9O1xuICAgIENhY2hlS2V5UmVzb2x2ZXIucHJvdG90eXBlLl9yZW1vdmVMZWFzdFVzZWRNYXAgPSBmdW5jdGlvbiAocmVjZW50bHlVc2VkTWFwKSB7XG4gICAgICAgIGlmICghdGhpcy5fb3B0aW9ucy5tYXhTaXplKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fdXNlZE1hcHMuaW5kZXhPZihyZWNlbnRseVVzZWRNYXApO1xuICAgICAgICB0aGlzLl91c2VkTWFwcy5zcGxpY2UoaW5kZXggPT09IC0xID8gMCA6IGluZGV4LCBpbmRleCA9PT0gLTEgPyAwIDogMSwgcmVjZW50bHlVc2VkTWFwKTtcbiAgICAgICAgaWYgKHRoaXMuX3VzZWRNYXBzLmxlbmd0aCA8PSB0aGlzLl9vcHRpb25zLm1heFNpemUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFwID0gdGhpcy5fdXNlZE1hcHMucG9wKCk7XG4gICAgICAgIGlmICghbWFwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVtb3ZlTWFwKG1hcCk7XG4gICAgICAgIHRoaXMuX29wdGlvbnMub25FeHBpcmUobWFwLmNhY2hlS2V5KTtcbiAgICB9O1xuICAgIENhY2hlS2V5UmVzb2x2ZXIucHJvdG90eXBlLl9yZW1vdmVNYXAgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIGlmICghbWFwLnBhcmVudE1hcCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG1hcC5wYXJlbnRNYXAubWFwcy5zcGxpY2UobWFwLnBhcmVudE1hcC5tYXBzLmluZGV4T2YobWFwKSwgMSk7XG4gICAgICAgIGlmICgoMCwgY2FjaGVfa2V5X21hcHNfMS5pc1Jvb3RDYWNoZUtleU1hcCkobWFwLnBhcmVudE1hcCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZW1vdmVNYXAobWFwLnBhcmVudE1hcCk7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FjaGVLZXlSZXNvbHZlcjtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBDYWNoZUtleVJlc29sdmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGUta2V5LXJlc29sdmVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/memoize/lib/cache-key-resolver.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/memoize/lib/index.js":
/*!********************************************************!*\
  !*** ./node_modules/@bigcommerce/memoize/lib/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.memoizeOne = exports.memoize = void 0;\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nvar memoize_1 = __webpack_require__(/*! ./memoize */ \"./node_modules/@bigcommerce/memoize/lib/memoize.js\");\nObject.defineProperty(exports, \"memoize\", ({ enumerable: true, get: function () { return tslib_1.__importDefault(memoize_1).default; } }));\nObject.defineProperty(exports, \"memoizeOne\", ({ enumerable: true, get: function () { return memoize_1.memoizeOne; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL21lbW9pemUvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGtCQUFrQixHQUFHLGVBQWU7QUFDcEMsY0FBYyxtQkFBTyxDQUFDLGlEQUFPO0FBQzdCLGdCQUFnQixtQkFBTyxDQUFDLHFFQUFXO0FBQ25DLDJDQUEwQyxFQUFFLHFDQUFxQyxzREFBc0QsRUFBQztBQUN4SSw4Q0FBNkMsRUFBRSxxQ0FBcUMsZ0NBQWdDLEVBQUM7QUFDckgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvbWVtb2l6ZS9saWIvaW5kZXguanM/ZDk2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubWVtb2l6ZU9uZSA9IGV4cG9ydHMubWVtb2l6ZSA9IHZvaWQgMDtcbnZhciB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xudmFyIG1lbW9pemVfMSA9IHJlcXVpcmUoXCIuL21lbW9pemVcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJtZW1vaXplXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYl8xLl9faW1wb3J0RGVmYXVsdChtZW1vaXplXzEpLmRlZmF1bHQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJtZW1vaXplT25lXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBtZW1vaXplXzEubWVtb2l6ZU9uZTsgfSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/memoize/lib/index.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/memoize/lib/memoize.js":
/*!**********************************************************!*\
  !*** ./node_modules/@bigcommerce/memoize/lib/memoize.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports[\"default\"] = memoize;\nexports.memoizeOne = memoizeOne;\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nvar lodash_memoize_1 = tslib_1.__importDefault(__webpack_require__(/*! lodash.memoize */ \"./node_modules/lodash.memoize/index.js\")); // tslint:disable-line:match-default-export-name\nvar shallowequal_1 = tslib_1.__importDefault(__webpack_require__(/*! shallowequal */ \"./node_modules/shallowequal/index.js\"));\nvar cache_key_resolver_1 = tslib_1.__importDefault(__webpack_require__(/*! ./cache-key-resolver */ \"./node_modules/@bigcommerce/memoize/lib/cache-key-resolver.js\"));\nfunction memoize(fn, options) {\n    var _a = tslib_1.__assign({ maxSize: 0, isEqual: shallowequal_1.default }, options), maxSize = _a.maxSize, isEqual = _a.isEqual;\n    var cache = new Map();\n    var resolver = new cache_key_resolver_1.default({\n        isEqual: isEqual,\n        maxSize: maxSize,\n        onExpire: function (key) { return cache.delete(key); },\n    });\n    var memoized = (0, lodash_memoize_1.default)(fn, function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return resolver.getKey.apply(resolver, args);\n    });\n    memoized.cache = cache;\n    return memoized;\n}\nfunction memoizeOne(fn, options) {\n    return memoize(fn, tslib_1.__assign(tslib_1.__assign({}, options), { maxSize: 1 }));\n}\n//# sourceMappingURL=memoize.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL21lbW9pemUvbGliL21lbW9pemUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0JBQWU7QUFDZixrQkFBa0I7QUFDbEIsY0FBYyxtQkFBTyxDQUFDLGlEQUFPO0FBQzdCLCtDQUErQyxtQkFBTyxDQUFDLDhEQUFnQixJQUFJO0FBQzNFLDZDQUE2QyxtQkFBTyxDQUFDLDBEQUFjO0FBQ25FLG1EQUFtRCxtQkFBTyxDQUFDLDJGQUFzQjtBQUNqRjtBQUNBLGdDQUFnQyw2Q0FBNkM7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsMkJBQTJCO0FBQzlELEtBQUs7QUFDTDtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsY0FBYyxZQUFZO0FBQ3JGO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvbWVtb2l6ZS9saWIvbWVtb2l6ZS5qcz9lMTFlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gbWVtb2l6ZTtcbmV4cG9ydHMubWVtb2l6ZU9uZSA9IG1lbW9pemVPbmU7XG52YXIgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbnZhciBsb2Rhc2hfbWVtb2l6ZV8xID0gdHNsaWJfMS5fX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImxvZGFzaC5tZW1vaXplXCIpKTsgLy8gdHNsaW50OmRpc2FibGUtbGluZTptYXRjaC1kZWZhdWx0LWV4cG9ydC1uYW1lXG52YXIgc2hhbGxvd2VxdWFsXzEgPSB0c2xpYl8xLl9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwic2hhbGxvd2VxdWFsXCIpKTtcbnZhciBjYWNoZV9rZXlfcmVzb2x2ZXJfMSA9IHRzbGliXzEuX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2NhY2hlLWtleS1yZXNvbHZlclwiKSk7XG5mdW5jdGlvbiBtZW1vaXplKGZuLCBvcHRpb25zKSB7XG4gICAgdmFyIF9hID0gdHNsaWJfMS5fX2Fzc2lnbih7IG1heFNpemU6IDAsIGlzRXF1YWw6IHNoYWxsb3dlcXVhbF8xLmRlZmF1bHQgfSwgb3B0aW9ucyksIG1heFNpemUgPSBfYS5tYXhTaXplLCBpc0VxdWFsID0gX2EuaXNFcXVhbDtcbiAgICB2YXIgY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgdmFyIHJlc29sdmVyID0gbmV3IGNhY2hlX2tleV9yZXNvbHZlcl8xLmRlZmF1bHQoe1xuICAgICAgICBpc0VxdWFsOiBpc0VxdWFsLFxuICAgICAgICBtYXhTaXplOiBtYXhTaXplLFxuICAgICAgICBvbkV4cGlyZTogZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gY2FjaGUuZGVsZXRlKGtleSk7IH0sXG4gICAgfSk7XG4gICAgdmFyIG1lbW9pemVkID0gKDAsIGxvZGFzaF9tZW1vaXplXzEuZGVmYXVsdCkoZm4sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzb2x2ZXIuZ2V0S2V5LmFwcGx5KHJlc29sdmVyLCBhcmdzKTtcbiAgICB9KTtcbiAgICBtZW1vaXplZC5jYWNoZSA9IGNhY2hlO1xuICAgIHJldHVybiBtZW1vaXplZDtcbn1cbmZ1bmN0aW9uIG1lbW9pemVPbmUoZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbWVtb2l6ZShmbiwgdHNsaWJfMS5fX2Fzc2lnbih0c2xpYl8xLl9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBtYXhTaXplOiAxIH0pKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lbW9pemUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/memoize/lib/memoize.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/request-sender/esm/cache.js":
/*!***************************************************************!*\
  !*** ./node_modules/@bigcommerce/request-sender/esm/cache.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultCache: () => (/* binding */ DefaultCache)\n/* harmony export */ });\n/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! query-string */ \"./node_modules/@bigcommerce/request-sender/node_modules/query-string/index.js\");\n\nvar DefaultCache = (function () {\n    function DefaultCache() {\n        this._cache = {};\n    }\n    DefaultCache.prototype.read = function (url, options) {\n        var cacheKey = this.getKey(url, options.params);\n        return this._cache[cacheKey] || null;\n    };\n    DefaultCache.prototype.write = function (url, options, response) {\n        var cacheKey = this.getKey(url, options.params);\n        this._cache[cacheKey] = response;\n    };\n    DefaultCache.prototype.getKey = function (url, params) {\n        if (params === void 0) { params = {}; }\n        if (Object.keys(params).length === 0) {\n            return url;\n        }\n        return \"\".concat(url, \"?\").concat(query_string__WEBPACK_IMPORTED_MODULE_0__.stringify(params));\n    };\n    return DefaultCache;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS9jYWNoZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsbURBQXFCO0FBQy9EO0FBQ0E7QUFDQSxDQUFDO0FBQ3VCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS9jYWNoZS5qcz82YzZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHF1ZXJ5U3RyaW5nIGZyb20gJ3F1ZXJ5LXN0cmluZyc7XG52YXIgRGVmYXVsdENhY2hlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWZhdWx0Q2FjaGUoKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlID0ge307XG4gICAgfVxuICAgIERlZmF1bHRDYWNoZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGNhY2hlS2V5ID0gdGhpcy5nZXRLZXkodXJsLCBvcHRpb25zLnBhcmFtcyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZVtjYWNoZUtleV0gfHwgbnVsbDtcbiAgICB9O1xuICAgIERlZmF1bHRDYWNoZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zLCByZXNwb25zZSkge1xuICAgICAgICB2YXIgY2FjaGVLZXkgPSB0aGlzLmdldEtleSh1cmwsIG9wdGlvbnMucGFyYW1zKTtcbiAgICAgICAgdGhpcy5fY2FjaGVbY2FjaGVLZXldID0gcmVzcG9uc2U7XG4gICAgfTtcbiAgICBEZWZhdWx0Q2FjaGUucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uICh1cmwsIHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zID09PSB2b2lkIDApIHsgcGFyYW1zID0ge307IH1cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHBhcmFtcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlwiLmNvbmNhdCh1cmwsIFwiP1wiKS5jb25jYXQocXVlcnlTdHJpbmcuc3RyaW5naWZ5KHBhcmFtcykpO1xuICAgIH07XG4gICAgcmV0dXJuIERlZmF1bHRDYWNoZTtcbn0oKSk7XG5leHBvcnQgeyBEZWZhdWx0Q2FjaGUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/request-sender/esm/cache.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/request-sender/esm/create-request-sender.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@bigcommerce/request-sender/esm/create-request-sender.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ createRequestSender)\n/* harmony export */ });\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ \"./node_modules/js-cookie/src/js.cookie.js\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _payload_transformer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./payload-transformer */ \"./node_modules/@bigcommerce/request-sender/esm/payload-transformer.js\");\n/* harmony import */ var _request_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./request-factory */ \"./node_modules/@bigcommerce/request-sender/esm/request-factory.js\");\n/* harmony import */ var _request_sender__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./request-sender */ \"./node_modules/@bigcommerce/request-sender/esm/request-sender.js\");\n\n\n\n\nfunction createRequestSender(options) {\n    return new _request_sender__WEBPACK_IMPORTED_MODULE_3__[\"default\"](new _request_factory__WEBPACK_IMPORTED_MODULE_2__[\"default\"](), new _payload_transformer__WEBPACK_IMPORTED_MODULE_1__[\"default\"](), js_cookie__WEBPACK_IMPORTED_MODULE_0__, options);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS9jcmVhdGUtcmVxdWVzdC1zZW5kZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9DO0FBQ21CO0FBQ1I7QUFDRjtBQUM5QjtBQUNmLGVBQWUsdURBQWEsS0FBSyx3REFBYyxRQUFRLDREQUFrQixJQUFJLHNDQUFNO0FBQ25GIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS9jcmVhdGUtcmVxdWVzdC1zZW5kZXIuanM/ZDZmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjb29raWUgZnJvbSAnanMtY29va2llJztcbmltcG9ydCBQYXlsb2FkVHJhbnNmb3JtZXIgZnJvbSAnLi9wYXlsb2FkLXRyYW5zZm9ybWVyJztcbmltcG9ydCBSZXF1ZXN0RmFjdG9yeSBmcm9tICcuL3JlcXVlc3QtZmFjdG9yeSc7XG5pbXBvcnQgUmVxdWVzdFNlbmRlciBmcm9tICcuL3JlcXVlc3Qtc2VuZGVyJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RTZW5kZXIob3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgUmVxdWVzdFNlbmRlcihuZXcgUmVxdWVzdEZhY3RvcnkoKSwgbmV3IFBheWxvYWRUcmFuc2Zvcm1lcigpLCBjb29raWUsIG9wdGlvbnMpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/request-sender/esm/create-request-sender.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/request-sender/esm/create-timeout.js":
/*!************************************************************************!*\
  !*** ./node_modules/@bigcommerce/request-sender/esm/create-timeout.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ createTimeout)\n/* harmony export */ });\n/* harmony import */ var _timeout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timeout */ \"./node_modules/@bigcommerce/request-sender/esm/timeout.js\");\n\nfunction createTimeout(delay) {\n    return new _timeout__WEBPACK_IMPORTED_MODULE_0__[\"default\"](delay);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS9jcmVhdGUtdGltZW91dC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnQztBQUNqQjtBQUNmLGVBQWUsZ0RBQU87QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXIvZXNtL2NyZWF0ZS10aW1lb3V0LmpzP2RiZjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRpbWVvdXQgZnJvbSAnLi90aW1lb3V0JztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVRpbWVvdXQoZGVsYXkpIHtcbiAgICByZXR1cm4gbmV3IFRpbWVvdXQoZGVsYXkpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/request-sender/esm/create-timeout.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/request-sender/esm/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@bigcommerce/request-sender/esm/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RequestSender: () => (/* reexport safe */ _request_sender__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n/* harmony export */   Timeout: () => (/* reexport safe */ _timeout__WEBPACK_IMPORTED_MODULE_3__[\"default\"]),\n/* harmony export */   createRequestSender: () => (/* reexport safe */ _create_request_sender__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   createTimeout: () => (/* reexport safe */ _create_timeout__WEBPACK_IMPORTED_MODULE_1__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _create_request_sender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./create-request-sender */ \"./node_modules/@bigcommerce/request-sender/esm/create-request-sender.js\");\n/* harmony import */ var _create_timeout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./create-timeout */ \"./node_modules/@bigcommerce/request-sender/esm/create-timeout.js\");\n/* harmony import */ var _request_sender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./request-sender */ \"./node_modules/@bigcommerce/request-sender/esm/request-sender.js\");\n/* harmony import */ var _timeout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./timeout */ \"./node_modules/@bigcommerce/request-sender/esm/timeout.js\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF5RTtBQUNiO0FBQ0E7QUFDYiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlci9lc20vaW5kZXguanM/NzBkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBkZWZhdWx0IGFzIGNyZWF0ZVJlcXVlc3RTZW5kZXIgfSBmcm9tICcuL2NyZWF0ZS1yZXF1ZXN0LXNlbmRlcic7XG5leHBvcnQgeyBkZWZhdWx0IGFzIGNyZWF0ZVRpbWVvdXQgfSBmcm9tICcuL2NyZWF0ZS10aW1lb3V0JztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUmVxdWVzdFNlbmRlciB9IGZyb20gJy4vcmVxdWVzdC1zZW5kZXInO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBUaW1lb3V0IH0gZnJvbSAnLi90aW1lb3V0JztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/request-sender/esm/index.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/request-sender/esm/is-promise.js":
/*!********************************************************************!*\
  !*** ./node_modules/@bigcommerce/request-sender/esm/is-promise.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ isPromise)\n/* harmony export */ });\nfunction isPromise(promise) {\n    return !!promise &&\n        (typeof promise === 'object' || typeof promise === 'function') &&\n        typeof promise.then === 'function';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS9pcy1wcm9taXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS9pcy1wcm9taXNlLmpzP2VkMjkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQcm9taXNlKHByb21pc2UpIHtcbiAgICByZXR1cm4gISFwcm9taXNlICYmXG4gICAgICAgICh0eXBlb2YgcHJvbWlzZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHByb21pc2UgPT09ICdmdW5jdGlvbicpICYmXG4gICAgICAgIHR5cGVvZiBwcm9taXNlLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/request-sender/esm/is-promise.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/request-sender/esm/payload-transformer.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@bigcommerce/request-sender/esm/payload-transformer.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _to_form_url_encoded__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./to-form-url-encoded */ \"./node_modules/@bigcommerce/request-sender/esm/to-form-url-encoded.js\");\n\n\nvar JSON_CONTENT_TYPE_REGEXP = /application\\/(\\w+\\+)?json/;\nvar FORM_URLENCODED_CONTENT_TYPE_REGEXP = /application\\/x-www-form-urlencoded/;\nvar PayloadTransformer = (function () {\n    function PayloadTransformer() {\n    }\n    PayloadTransformer.prototype.toRequestBody = function (options) {\n        var contentType = options.headers ? this._getHeader(options.headers, 'Content-Type') : '';\n        if (options.body) {\n            if (JSON_CONTENT_TYPE_REGEXP.test(contentType)) {\n                return JSON.stringify(options.body);\n            }\n            if (FORM_URLENCODED_CONTENT_TYPE_REGEXP.test(contentType)) {\n                return (0,_to_form_url_encoded__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(options.body);\n            }\n        }\n        return options.body;\n    };\n    PayloadTransformer.prototype.toResponse = function (xhr) {\n        var headers = this._parseResponseHeaders(xhr.getAllResponseHeaders());\n        var body = this._parseResponseBody('response' in xhr ? xhr.response : xhr.responseText, headers);\n        return {\n            body: body,\n            headers: headers,\n            status: xhr.status,\n            statusText: xhr.statusText,\n        };\n    };\n    PayloadTransformer.prototype._parseResponseBody = function (body, headers) {\n        var contentType = this._getHeader(headers, 'Content-Type');\n        if (body && JSON_CONTENT_TYPE_REGEXP.test(contentType)) {\n            return JSON.parse(body);\n        }\n        return body;\n    };\n    PayloadTransformer.prototype._parseResponseHeaders = function (rawHeaders) {\n        var lines = rawHeaders ? rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ').split(/\\r?\\n/) : [];\n        return lines.reduce(function (headers, line) {\n            var _a;\n            var parts = line.split(':');\n            var key = (parts.shift() || '').trim();\n            if (!key) {\n                return headers;\n            }\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, headers), (_a = {}, _a[key.toLowerCase()] = parts.join(':').trim(), _a));\n        }, {});\n    };\n    PayloadTransformer.prototype._getHeader = function (headers, key) {\n        if (!headers || !key) {\n            return '';\n        }\n        return headers[key] || headers[key.toLowerCase()] || '';\n    };\n    return PayloadTransformer;\n}());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PayloadTransformer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS9wYXlsb2FkLXRyYW5zZm9ybWVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNvQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0VBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsb0JBQW9CO0FBQzNELFNBQVMsSUFBSTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsaUVBQWUsa0JBQWtCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXIvZXNtL3BheWxvYWQtdHJhbnNmb3JtZXIuanM/OWE2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHRvRm9ybVVybEVuY29kZWQgZnJvbSAnLi90by1mb3JtLXVybC1lbmNvZGVkJztcbnZhciBKU09OX0NPTlRFTlRfVFlQRV9SRUdFWFAgPSAvYXBwbGljYXRpb25cXC8oXFx3K1xcKyk/anNvbi87XG52YXIgRk9STV9VUkxFTkNPREVEX0NPTlRFTlRfVFlQRV9SRUdFWFAgPSAvYXBwbGljYXRpb25cXC94LXd3dy1mb3JtLXVybGVuY29kZWQvO1xudmFyIFBheWxvYWRUcmFuc2Zvcm1lciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUGF5bG9hZFRyYW5zZm9ybWVyKCkge1xuICAgIH1cbiAgICBQYXlsb2FkVHJhbnNmb3JtZXIucHJvdG90eXBlLnRvUmVxdWVzdEJvZHkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgY29udGVudFR5cGUgPSBvcHRpb25zLmhlYWRlcnMgPyB0aGlzLl9nZXRIZWFkZXIob3B0aW9ucy5oZWFkZXJzLCAnQ29udGVudC1UeXBlJykgOiAnJztcbiAgICAgICAgaWYgKG9wdGlvbnMuYm9keSkge1xuICAgICAgICAgICAgaWYgKEpTT05fQ09OVEVOVF9UWVBFX1JFR0VYUC50ZXN0KGNvbnRlbnRUeXBlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvcHRpb25zLmJvZHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEZPUk1fVVJMRU5DT0RFRF9DT05URU5UX1RZUEVfUkVHRVhQLnRlc3QoY29udGVudFR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvRm9ybVVybEVuY29kZWQob3B0aW9ucy5ib2R5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0aW9ucy5ib2R5O1xuICAgIH07XG4gICAgUGF5bG9hZFRyYW5zZm9ybWVyLnByb3RvdHlwZS50b1Jlc3BvbnNlID0gZnVuY3Rpb24gKHhocikge1xuICAgICAgICB2YXIgaGVhZGVycyA9IHRoaXMuX3BhcnNlUmVzcG9uc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG4gICAgICAgIHZhciBib2R5ID0gdGhpcy5fcGFyc2VSZXNwb25zZUJvZHkoJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0LCBoZWFkZXJzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxuICAgICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBQYXlsb2FkVHJhbnNmb3JtZXIucHJvdG90eXBlLl9wYXJzZVJlc3BvbnNlQm9keSA9IGZ1bmN0aW9uIChib2R5LCBoZWFkZXJzKSB7XG4gICAgICAgIHZhciBjb250ZW50VHlwZSA9IHRoaXMuX2dldEhlYWRlcihoZWFkZXJzLCAnQ29udGVudC1UeXBlJyk7XG4gICAgICAgIGlmIChib2R5ICYmIEpTT05fQ09OVEVOVF9UWVBFX1JFR0VYUC50ZXN0KGNvbnRlbnRUeXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYm9keSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJvZHk7XG4gICAgfTtcbiAgICBQYXlsb2FkVHJhbnNmb3JtZXIucHJvdG90eXBlLl9wYXJzZVJlc3BvbnNlSGVhZGVycyA9IGZ1bmN0aW9uIChyYXdIZWFkZXJzKSB7XG4gICAgICAgIHZhciBsaW5lcyA9IHJhd0hlYWRlcnMgPyByYXdIZWFkZXJzLnJlcGxhY2UoL1xccj9cXG5bXFx0IF0rL2csICcgJykuc3BsaXQoL1xccj9cXG4vKSA6IFtdO1xuICAgICAgICByZXR1cm4gbGluZXMucmVkdWNlKGZ1bmN0aW9uIChoZWFkZXJzLCBsaW5lKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICB2YXIga2V5ID0gKHBhcnRzLnNoaWZ0KCkgfHwgJycpLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICgha2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhlYWRlcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIGhlYWRlcnMpLCAoX2EgPSB7fSwgX2Fba2V5LnRvTG93ZXJDYXNlKCldID0gcGFydHMuam9pbignOicpLnRyaW0oKSwgX2EpKTtcbiAgICAgICAgfSwge30pO1xuICAgIH07XG4gICAgUGF5bG9hZFRyYW5zZm9ybWVyLnByb3RvdHlwZS5fZ2V0SGVhZGVyID0gZnVuY3Rpb24gKGhlYWRlcnMsIGtleSkge1xuICAgICAgICBpZiAoIWhlYWRlcnMgfHwgIWtleSkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWFkZXJzW2tleV0gfHwgaGVhZGVyc1trZXkudG9Mb3dlckNhc2UoKV0gfHwgJyc7XG4gICAgfTtcbiAgICByZXR1cm4gUGF5bG9hZFRyYW5zZm9ybWVyO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFBheWxvYWRUcmFuc2Zvcm1lcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/request-sender/esm/payload-transformer.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/request-sender/esm/request-factory.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@bigcommerce/request-sender/esm/request-factory.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! query-string */ \"./node_modules/@bigcommerce/request-sender/node_modules/query-string/index.js\");\n\nvar RequestFactory = (function () {\n    function RequestFactory() {\n    }\n    RequestFactory.prototype.createRequest = function (url, options) {\n        var xhr = new XMLHttpRequest();\n        this._configureRequest(xhr, url, options);\n        return xhr;\n    };\n    RequestFactory.prototype._configureRequest = function (xhr, url, options) {\n        if (options === void 0) { options = {}; }\n        xhr.open(options.method || 'GET', this._formatUrl(url, options.params, options.encodeParams), true);\n        if (options.headers) {\n            this._configureRequestHeaders(xhr, options.headers);\n        }\n        if (typeof options.credentials === 'boolean') {\n            xhr.withCredentials = options.credentials;\n        }\n        if (typeof options.timeout === 'number') {\n            xhr.timeout = options.timeout;\n        }\n    };\n    RequestFactory.prototype._configureRequestHeaders = function (xhr, headers) {\n        Object.keys(headers)\n            .filter(function (key) { return headers[key] !== null; })\n            .forEach(function (key) {\n            xhr.setRequestHeader(key, headers[key]);\n        });\n    };\n    RequestFactory.prototype._formatUrl = function (url, params, encodeParams) {\n        if (encodeParams === void 0) { encodeParams = true; }\n        if (!params || Object.keys(params).length === 0) {\n            return url;\n        }\n        return \"\".concat(url, \"?\").concat(query_string__WEBPACK_IMPORTED_MODULE_0__.stringify(params, { encode: encodeParams }));\n    };\n    return RequestFactory;\n}());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RequestFactory);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS9yZXF1ZXN0LWZhY3RvcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLCtCQUErQjtBQUNwRTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLG1EQUFxQixXQUFXLHNCQUFzQjtBQUNoRztBQUNBO0FBQ0EsQ0FBQztBQUNELGlFQUFlLGNBQWMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlci9lc20vcmVxdWVzdC1mYWN0b3J5LmpzPzJhYWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcXVlcnlTdHJpbmcgZnJvbSAncXVlcnktc3RyaW5nJztcbnZhciBSZXF1ZXN0RmFjdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVxdWVzdEZhY3RvcnkoKSB7XG4gICAgfVxuICAgIFJlcXVlc3RGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVSZXF1ZXN0ID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHRoaXMuX2NvbmZpZ3VyZVJlcXVlc3QoeGhyLCB1cmwsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4geGhyO1xuICAgIH07XG4gICAgUmVxdWVzdEZhY3RvcnkucHJvdG90eXBlLl9jb25maWd1cmVSZXF1ZXN0ID0gZnVuY3Rpb24gKHhociwgdXJsLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHhoci5vcGVuKG9wdGlvbnMubWV0aG9kIHx8ICdHRVQnLCB0aGlzLl9mb3JtYXRVcmwodXJsLCBvcHRpb25zLnBhcmFtcywgb3B0aW9ucy5lbmNvZGVQYXJhbXMpLCB0cnVlKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuaGVhZGVycykge1xuICAgICAgICAgICAgdGhpcy5fY29uZmlndXJlUmVxdWVzdEhlYWRlcnMoeGhyLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jcmVkZW50aWFscyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMudGltZW91dCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHhoci50aW1lb3V0ID0gb3B0aW9ucy50aW1lb3V0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSZXF1ZXN0RmFjdG9yeS5wcm90b3R5cGUuX2NvbmZpZ3VyZVJlcXVlc3RIZWFkZXJzID0gZnVuY3Rpb24gKHhociwgaGVhZGVycykge1xuICAgICAgICBPYmplY3Qua2V5cyhoZWFkZXJzKVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBoZWFkZXJzW2tleV0gIT09IG51bGw7IH0pXG4gICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIGhlYWRlcnNba2V5XSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUmVxdWVzdEZhY3RvcnkucHJvdG90eXBlLl9mb3JtYXRVcmwgPSBmdW5jdGlvbiAodXJsLCBwYXJhbXMsIGVuY29kZVBhcmFtcykge1xuICAgICAgICBpZiAoZW5jb2RlUGFyYW1zID09PSB2b2lkIDApIHsgZW5jb2RlUGFyYW1zID0gdHJ1ZTsgfVxuICAgICAgICBpZiAoIXBhcmFtcyB8fCBPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJcIi5jb25jYXQodXJsLCBcIj9cIikuY29uY2F0KHF1ZXJ5U3RyaW5nLnN0cmluZ2lmeShwYXJhbXMsIHsgZW5jb2RlOiBlbmNvZGVQYXJhbXMgfSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFJlcXVlc3RGYWN0b3J5O1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFJlcXVlc3RGYWN0b3J5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/request-sender/esm/request-factory.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/request-sender/esm/request-sender.js":
/*!************************************************************************!*\
  !*** ./node_modules/@bigcommerce/request-sender/esm/request-sender.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.merge */ \"./node_modules/lodash.merge/index.js\");\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _cache__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cache */ \"./node_modules/@bigcommerce/request-sender/esm/cache.js\");\n/* harmony import */ var _is_promise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./is-promise */ \"./node_modules/@bigcommerce/request-sender/esm/is-promise.js\");\n/* harmony import */ var _timeout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./timeout */ \"./node_modules/@bigcommerce/request-sender/esm/timeout.js\");\n\n\n\n\n\nvar RequestSender = (function () {\n    function RequestSender(_requestFactory, _payloadTransformer, _cookie, _options) {\n        if (_options === void 0) { _options = {}; }\n        this._requestFactory = _requestFactory;\n        this._payloadTransformer = _payloadTransformer;\n        this._cookie = _cookie;\n        this._options = _options;\n        this._cache = this._options.cache || new _cache__WEBPACK_IMPORTED_MODULE_1__.DefaultCache();\n    }\n    RequestSender.prototype.sendRequest = function (url, options) {\n        var _this = this;\n        var requestOptions = this._mergeDefaultOptions(url, options);\n        var cachedRequest = this._getCachedRequest(url, requestOptions);\n        if (cachedRequest) {\n            return Promise.resolve(cachedRequest);\n        }\n        var request = this._requestFactory.createRequest(this._prependHost(url), requestOptions);\n        return new Promise(function (resolve, reject) {\n            var requestHandler = function () {\n                var response = _this._payloadTransformer.toResponse(request);\n                if (response.status >= 200 && response.status < 300) {\n                    _this._cacheRequest(url, requestOptions, response);\n                    resolve(response);\n                }\n                else {\n                    reject(response);\n                }\n            };\n            request.onload = requestHandler;\n            request.onerror = requestHandler;\n            request.onabort = requestHandler;\n            request.ontimeout = requestHandler;\n            if (requestOptions.timeout instanceof _timeout__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n                requestOptions.timeout.onComplete(function () { return request.abort(); });\n                requestOptions.timeout.start();\n            }\n            if ((0,_is_promise__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(requestOptions.timeout)) {\n                requestOptions.timeout.then(function () { return request.abort(); });\n            }\n            request.send(_this._payloadTransformer.toRequestBody(requestOptions));\n        });\n    };\n    RequestSender.prototype.get = function (url, options) {\n        return this.sendRequest(url, (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)({}, options), { method: 'GET' }));\n    };\n    RequestSender.prototype.post = function (url, options) {\n        return this.sendRequest(url, (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)({}, options), { method: 'POST' }));\n    };\n    RequestSender.prototype.put = function (url, options) {\n        return this.sendRequest(url, (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)({}, options), { method: 'PUT' }));\n    };\n    RequestSender.prototype.patch = function (url, options) {\n        return this.sendRequest(url, (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)({}, options), { method: 'PATCH' }));\n    };\n    RequestSender.prototype.delete = function (url, options) {\n        return this.sendRequest(url, (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)({}, options), { method: 'DELETE' }));\n    };\n    RequestSender.prototype._mergeDefaultOptions = function (url, options) {\n        var defaultOptions = {\n            credentials: true,\n            encodeParams: true,\n            headers: {\n                Accept: 'application/json, text/plain, */*',\n            },\n            method: 'GET',\n        };\n        var csrfToken = this._cookie.get('XSRF-TOKEN');\n        if (csrfToken && defaultOptions.headers && !this._isAssetRequest(url, options) && this._isLocalRequest(url)) {\n            defaultOptions.headers['X-XSRF-TOKEN'] = csrfToken;\n        }\n        if (options && options.body && defaultOptions.headers) {\n            defaultOptions.headers['Content-Type'] = 'application/json';\n        }\n        return lodash_merge__WEBPACK_IMPORTED_MODULE_0___default()({}, defaultOptions, options);\n    };\n    RequestSender.prototype._prependHost = function (url) {\n        if (!this._options.host || /^https?:\\/\\//.test(url)) {\n            return url;\n        }\n        return \"\".concat(this._options.host.replace(/\\/$/, ''), \"/\").concat(url.replace(/^\\//, ''));\n    };\n    RequestSender.prototype._shouldCacheRequest = function (options) {\n        var method = options.method || 'GET';\n        return method.toUpperCase() === 'GET' && Boolean(options.cache);\n    };\n    RequestSender.prototype._getCachedRequest = function (url, options) {\n        if (this._shouldCacheRequest(options)) {\n            return this._cache.read(url, options);\n        }\n        return null;\n    };\n    RequestSender.prototype._cacheRequest = function (url, options, response) {\n        if (this._shouldCacheRequest(options)) {\n            this._cache.write(url, options, response);\n        }\n    };\n    RequestSender.prototype._isAssetRequest = function (url, options) {\n        if (options && options.method && options.method.toUpperCase() !== 'GET') {\n            return false;\n        }\n        return /\\.(png|gif|jpe?g|css|js|json|svg|html?)$/.test(url.split('?')[0]);\n    };\n    RequestSender.prototype._isLocalRequest = function (url) {\n        if (url.match(new RegExp('^(https?:)?\\/\\/' + window.location.hostname))) {\n            return true;\n        }\n        return !url.match(new RegExp('^(https?:)?\\/\\/'));\n    };\n    return RequestSender;\n}());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RequestSender);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS9yZXF1ZXN0LXNlbmRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWlDO0FBQ0E7QUFDTTtBQUNGO0FBQ0w7QUFDaEM7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxnREFBWTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZ0RBQU87QUFDekQsZ0VBQWdFLHlCQUF5QjtBQUN6RjtBQUNBO0FBQ0EsZ0JBQWdCLHVEQUFTO0FBQ3pCLDBEQUEwRCx5QkFBeUI7QUFDbkY7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EscUNBQXFDLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxjQUFjLGVBQWU7QUFDdEY7QUFDQTtBQUNBLHFDQUFxQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsY0FBYyxnQkFBZ0I7QUFDdkY7QUFDQTtBQUNBLHFDQUFxQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsY0FBYyxlQUFlO0FBQ3RGO0FBQ0E7QUFDQSxxQ0FBcUMsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLGNBQWMsaUJBQWlCO0FBQ3hGO0FBQ0E7QUFDQSxxQ0FBcUMsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLGNBQWMsa0JBQWtCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbURBQUssR0FBRztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGlFQUFlLGFBQWEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlci9lc20vcmVxdWVzdC1zZW5kZXIuanM/MzM2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IG1lcmdlIGZyb20gJ2xvZGFzaC5tZXJnZSc7XG5pbXBvcnQgeyBEZWZhdWx0Q2FjaGUgfSBmcm9tICcuL2NhY2hlJztcbmltcG9ydCBpc1Byb21pc2UgZnJvbSAnLi9pcy1wcm9taXNlJztcbmltcG9ydCBUaW1lb3V0IGZyb20gJy4vdGltZW91dCc7XG52YXIgUmVxdWVzdFNlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVxdWVzdFNlbmRlcihfcmVxdWVzdEZhY3RvcnksIF9wYXlsb2FkVHJhbnNmb3JtZXIsIF9jb29raWUsIF9vcHRpb25zKSB7XG4gICAgICAgIGlmIChfb3B0aW9ucyA9PT0gdm9pZCAwKSB7IF9vcHRpb25zID0ge307IH1cbiAgICAgICAgdGhpcy5fcmVxdWVzdEZhY3RvcnkgPSBfcmVxdWVzdEZhY3Rvcnk7XG4gICAgICAgIHRoaXMuX3BheWxvYWRUcmFuc2Zvcm1lciA9IF9wYXlsb2FkVHJhbnNmb3JtZXI7XG4gICAgICAgIHRoaXMuX2Nvb2tpZSA9IF9jb29raWU7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBfb3B0aW9ucztcbiAgICAgICAgdGhpcy5fY2FjaGUgPSB0aGlzLl9vcHRpb25zLmNhY2hlIHx8IG5ldyBEZWZhdWx0Q2FjaGUoKTtcbiAgICB9XG4gICAgUmVxdWVzdFNlbmRlci5wcm90b3R5cGUuc2VuZFJlcXVlc3QgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciByZXF1ZXN0T3B0aW9ucyA9IHRoaXMuX21lcmdlRGVmYXVsdE9wdGlvbnModXJsLCBvcHRpb25zKTtcbiAgICAgICAgdmFyIGNhY2hlZFJlcXVlc3QgPSB0aGlzLl9nZXRDYWNoZWRSZXF1ZXN0KHVybCwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICBpZiAoY2FjaGVkUmVxdWVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjYWNoZWRSZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVxdWVzdCA9IHRoaXMuX3JlcXVlc3RGYWN0b3J5LmNyZWF0ZVJlcXVlc3QodGhpcy5fcHJlcGVuZEhvc3QodXJsKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHJlcXVlc3RIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IF90aGlzLl9wYXlsb2FkVHJhbnNmb3JtZXIudG9SZXNwb25zZShyZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NhY2hlUmVxdWVzdCh1cmwsIHJlcXVlc3RPcHRpb25zLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVxdWVzdC5vbmxvYWQgPSByZXF1ZXN0SGFuZGxlcjtcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IHJlcXVlc3RIYW5kbGVyO1xuICAgICAgICAgICAgcmVxdWVzdC5vbmFib3J0ID0gcmVxdWVzdEhhbmRsZXI7XG4gICAgICAgICAgICByZXF1ZXN0Lm9udGltZW91dCA9IHJlcXVlc3RIYW5kbGVyO1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RPcHRpb25zLnRpbWVvdXQgaW5zdGFuY2VvZiBUaW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdE9wdGlvbnMudGltZW91dC5vbkNvbXBsZXRlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlcXVlc3QuYWJvcnQoKTsgfSk7XG4gICAgICAgICAgICAgICAgcmVxdWVzdE9wdGlvbnMudGltZW91dC5zdGFydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUHJvbWlzZShyZXF1ZXN0T3B0aW9ucy50aW1lb3V0KSkge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RPcHRpb25zLnRpbWVvdXQudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiByZXF1ZXN0LmFib3J0KCk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxdWVzdC5zZW5kKF90aGlzLl9wYXlsb2FkVHJhbnNmb3JtZXIudG9SZXF1ZXN0Qm9keShyZXF1ZXN0T3B0aW9ucykpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJlcXVlc3RTZW5kZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QodXJsLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0aW9ucyksIHsgbWV0aG9kOiAnR0VUJyB9KSk7XG4gICAgfTtcbiAgICBSZXF1ZXN0U2VuZGVyLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdCh1cmwsIF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBtZXRob2Q6ICdQT1NUJyB9KSk7XG4gICAgfTtcbiAgICBSZXF1ZXN0U2VuZGVyLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KHVybCwgX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IG1ldGhvZDogJ1BVVCcgfSkpO1xuICAgIH07XG4gICAgUmVxdWVzdFNlbmRlci5wcm90b3R5cGUucGF0Y2ggPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KHVybCwgX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IG1ldGhvZDogJ1BBVENIJyB9KSk7XG4gICAgfTtcbiAgICBSZXF1ZXN0U2VuZGVyLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KHVybCwgX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IG1ldGhvZDogJ0RFTEVURScgfSkpO1xuICAgIH07XG4gICAgUmVxdWVzdFNlbmRlci5wcm90b3R5cGUuX21lcmdlRGVmYXVsdE9wdGlvbnMgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgICAgZW5jb2RlUGFyYW1zOiB0cnVlLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNzcmZUb2tlbiA9IHRoaXMuX2Nvb2tpZS5nZXQoJ1hTUkYtVE9LRU4nKTtcbiAgICAgICAgaWYgKGNzcmZUb2tlbiAmJiBkZWZhdWx0T3B0aW9ucy5oZWFkZXJzICYmICF0aGlzLl9pc0Fzc2V0UmVxdWVzdCh1cmwsIG9wdGlvbnMpICYmIHRoaXMuX2lzTG9jYWxSZXF1ZXN0KHVybCkpIHtcbiAgICAgICAgICAgIGRlZmF1bHRPcHRpb25zLmhlYWRlcnNbJ1gtWFNSRi1UT0tFTiddID0gY3NyZlRva2VuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYm9keSAmJiBkZWZhdWx0T3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgICAgICBkZWZhdWx0T3B0aW9ucy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVyZ2Uoe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICB9O1xuICAgIFJlcXVlc3RTZW5kZXIucHJvdG90eXBlLl9wcmVwZW5kSG9zdCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9vcHRpb25zLmhvc3QgfHwgL15odHRwcz86XFwvXFwvLy50ZXN0KHVybCkpIHtcbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KHRoaXMuX29wdGlvbnMuaG9zdC5yZXBsYWNlKC9cXC8kLywgJycpLCBcIi9cIikuY29uY2F0KHVybC5yZXBsYWNlKC9eXFwvLywgJycpKTtcbiAgICB9O1xuICAgIFJlcXVlc3RTZW5kZXIucHJvdG90eXBlLl9zaG91bGRDYWNoZVJlcXVlc3QgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgbWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgJ0dFVCc7XG4gICAgICAgIHJldHVybiBtZXRob2QudG9VcHBlckNhc2UoKSA9PT0gJ0dFVCcgJiYgQm9vbGVhbihvcHRpb25zLmNhY2hlKTtcbiAgICB9O1xuICAgIFJlcXVlc3RTZW5kZXIucHJvdG90eXBlLl9nZXRDYWNoZWRSZXF1ZXN0ID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5fc2hvdWxkQ2FjaGVSZXF1ZXN0KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGUucmVhZCh1cmwsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgUmVxdWVzdFNlbmRlci5wcm90b3R5cGUuX2NhY2hlUmVxdWVzdCA9IGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMsIHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICh0aGlzLl9zaG91bGRDYWNoZVJlcXVlc3Qob3B0aW9ucykpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlLndyaXRlKHVybCwgb3B0aW9ucywgcmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSZXF1ZXN0U2VuZGVyLnByb3RvdHlwZS5faXNBc3NldFJlcXVlc3QgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubWV0aG9kICYmIG9wdGlvbnMubWV0aG9kLnRvVXBwZXJDYXNlKCkgIT09ICdHRVQnKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC9cXC4ocG5nfGdpZnxqcGU/Z3xjc3N8anN8anNvbnxzdmd8aHRtbD8pJC8udGVzdCh1cmwuc3BsaXQoJz8nKVswXSk7XG4gICAgfTtcbiAgICBSZXF1ZXN0U2VuZGVyLnByb3RvdHlwZS5faXNMb2NhbFJlcXVlc3QgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIGlmICh1cmwubWF0Y2gobmV3IFJlZ0V4cCgnXihodHRwcz86KT9cXC9cXC8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhdXJsLm1hdGNoKG5ldyBSZWdFeHAoJ14oaHR0cHM/Oik/XFwvXFwvJykpO1xuICAgIH07XG4gICAgcmV0dXJuIFJlcXVlc3RTZW5kZXI7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgUmVxdWVzdFNlbmRlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/request-sender/esm/request-sender.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/request-sender/esm/timeout.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@bigcommerce/request-sender/esm/timeout.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar Timeout = (function () {\n    function Timeout(_delay) {\n        var _this = this;\n        this._delay = _delay;\n        this._promise = new Promise(function (resolve) {\n            _this._resolve = resolve;\n        });\n    }\n    Timeout.prototype.onComplete = function (callback) {\n        this._promise.then(callback);\n    };\n    Timeout.prototype.complete = function () {\n        this._resolve();\n        if (this._timeoutToken !== undefined) {\n            clearTimeout(this._timeoutToken);\n        }\n    };\n    Timeout.prototype.start = function () {\n        var _this = this;\n        if (this._delay !== undefined) {\n            this._timeoutToken = setTimeout(function () { return _this.complete(); }, this._delay);\n        }\n    };\n    return Timeout;\n}());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Timeout);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS90aW1lb3V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsMEJBQTBCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxpRUFBZSxPQUFPLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXIvZXNtL3RpbWVvdXQuanM/NDUxNSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgVGltZW91dCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVGltZW91dChfZGVsYXkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5fZGVsYXkgPSBfZGVsYXk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgX3RoaXMuX3Jlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgVGltZW91dC5wcm90b3R5cGUub25Db21wbGV0ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9wcm9taXNlLnRoZW4oY2FsbGJhY2spO1xuICAgIH07XG4gICAgVGltZW91dC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmUoKTtcbiAgICAgICAgaWYgKHRoaXMuX3RpbWVvdXRUb2tlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dFRva2VuKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVGltZW91dC5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLl9kZWxheSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLl90aW1lb3V0VG9rZW4gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmNvbXBsZXRlKCk7IH0sIHRoaXMuX2RlbGF5KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbWVvdXQ7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgVGltZW91dDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/request-sender/esm/timeout.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/request-sender/esm/to-form-url-encoded.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@bigcommerce/request-sender/esm/to-form-url-encoded.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ toFormUrlEncoded)\n/* harmony export */ });\nfunction toFormUrlEncoded(data) {\n    if (typeof data !== 'object' || data === null) {\n        return data;\n    }\n    return Object.keys(data)\n        .filter(function (key) { return data[key] !== undefined; })\n        .map(function (key) {\n        var value = data[key];\n        if (typeof value === 'string') {\n            return \"\".concat(key, \"=\").concat(encodeURIComponent(value));\n        }\n        return \"\".concat(key, \"=\").concat(encodeURIComponent(JSON.stringify(value) || ''));\n    })\n        .join('&');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL2VzbS90by1mb3JtLXVybC1lbmNvZGVkLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlDQUFpQztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlci9lc20vdG8tZm9ybS11cmwtZW5jb2RlZC5qcz9mNTk2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvRm9ybVVybEVuY29kZWQoZGF0YSkge1xuICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcgfHwgZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGRhdGEpXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZGF0YVtrZXldICE9PSB1bmRlZmluZWQ7IH0pXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBkYXRhW2tleV07XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIi5jb25jYXQoa2V5LCBcIj1cIikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlwiLmNvbmNhdChrZXksIFwiPVwiKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHZhbHVlKSB8fCAnJykpO1xuICAgIH0pXG4gICAgICAgIC5qb2luKCcmJyk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/request-sender/esm/to-form-url-encoded.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/request-sender/node_modules/query-string/index.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/request-sender/node_modules/query-string/index.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nconst strictUriEncode = __webpack_require__(/*! strict-uri-encode */ \"./node_modules/strict-uri-encode/index.js\");\nconst decodeComponent = __webpack_require__(/*! decode-uri-component */ \"./node_modules/decode-uri-component/index.js\");\nconst splitOnFirst = __webpack_require__(/*! split-on-first */ \"./node_modules/split-on-first/index.js\");\nconst filterObject = __webpack_require__(/*! filter-obj */ \"./node_modules/filter-obj/index.js\");\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === null || value === undefined || value.length === 0) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);\n\t\t\t\tconst isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));\n\t\t\t\tvalue = isEncodedArray ? decode(value, options) : value;\n\t\t\t\tconst newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(query, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof query !== 'string') {\n\t\treturn ret;\n\t}\n\n\tquery = query.trim().replace(/^[?#&]/, '');\n\n\tif (!query) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of query.split('&')) {\n\t\tif (param === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : ['comma', 'separator'].includes(options.arrayFormat) ? value : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ','\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key])) ||\n\t\t(options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const key of Object.keys(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = object[key];\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (url, options) => {\n\toptions = Object.assign({\n\t\tdecode: true\n\t}, options);\n\n\tconst [url_, hash] = splitOnFirst(url, '#');\n\n\treturn Object.assign(\n\t\t{\n\t\t\turl: url_.split('?')[0] || '',\n\t\t\tquery: parse(extract(url), options)\n\t\t},\n\t\toptions && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}\n\t);\n};\n\nexports.stringifyUrl = (object, options) => {\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true\n\t}, options);\n\n\tconst url = removeHash(object.url).split('?')[0] || '';\n\tconst queryFromUrl = exports.extract(object.url);\n\tconst parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});\n\n\tconst query = Object.assign(parsedQueryFromUrl, object.query);\n\tlet queryString = exports.stringify(query, options);\n\tif (queryString) {\n\t\tqueryString = `?${queryString}`;\n\t}\n\n\tlet hash = getHash(object.url);\n\tif (object.fragmentIdentifier) {\n\t\thash = `#${encode(object.fragmentIdentifier, options)}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n};\n\nexports.pick = (input, filter, options) => {\n\toptions = Object.assign({\n\t\tparseFragmentIdentifier: true\n\t}, options);\n\n\tconst {url, query, fragmentIdentifier} = exports.parseUrl(input, options);\n\treturn exports.stringifyUrl({\n\t\turl,\n\t\tquery: filterObject(query, filter),\n\t\tfragmentIdentifier\n\t}, options);\n};\n\nexports.exclude = (input, filter, options) => {\n\tconst exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);\n\n\treturn exports.pick(input, exclusionFilter, options);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL25vZGVfbW9kdWxlcy9xdWVyeS1zdHJpbmcvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYix3QkFBd0IsbUJBQU8sQ0FBQyxvRUFBbUI7QUFDbkQsd0JBQXdCLG1CQUFPLENBQUMsMEVBQXNCO0FBQ3RELHFCQUFxQixtQkFBTyxDQUFDLDhEQUFnQjtBQUM3QyxxQkFBcUIsbUJBQU8sQ0FBQyxzREFBWTs7QUFFekM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjs7QUFFQSxlQUFlO0FBQ2YsYUFBYTs7QUFFYixpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTtBQUNGOztBQUVBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCx3REFBd0QsMkNBQTJDO0FBQ25HO0FBQ0E7O0FBRUEsb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLHlEQUF5RCxZQUFZOztBQUVyRTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsWUFBWTtBQUNoQzs7QUFFQTtBQUNBO0FBQ0EsYUFBYSwyQ0FBMkM7QUFDeEQ7O0FBRUEsV0FBVyxJQUFJLEVBQUUsWUFBWSxFQUFFLEtBQUs7QUFDcEM7O0FBRUEsWUFBWTtBQUNaO0FBQ0E7QUFDQSxFQUFFOztBQUVGLFFBQVEsZ0NBQWdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBLGVBQWU7QUFDZjs7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyL25vZGVfbW9kdWxlcy9xdWVyeS1zdHJpbmcvaW5kZXguanM/M2NlMyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5jb25zdCBzdHJpY3RVcmlFbmNvZGUgPSByZXF1aXJlKCdzdHJpY3QtdXJpLWVuY29kZScpO1xuY29uc3QgZGVjb2RlQ29tcG9uZW50ID0gcmVxdWlyZSgnZGVjb2RlLXVyaS1jb21wb25lbnQnKTtcbmNvbnN0IHNwbGl0T25GaXJzdCA9IHJlcXVpcmUoJ3NwbGl0LW9uLWZpcnN0Jyk7XG5jb25zdCBmaWx0ZXJPYmplY3QgPSByZXF1aXJlKCdmaWx0ZXItb2JqJyk7XG5cbmNvbnN0IGlzTnVsbE9yVW5kZWZpbmVkID0gdmFsdWUgPT4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZDtcblxuZnVuY3Rpb24gZW5jb2RlckZvckFycmF5Rm9ybWF0KG9wdGlvbnMpIHtcblx0c3dpdGNoIChvcHRpb25zLmFycmF5Rm9ybWF0KSB7XG5cdFx0Y2FzZSAnaW5kZXgnOlxuXHRcdFx0cmV0dXJuIGtleSA9PiAocmVzdWx0LCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRjb25zdCBpbmRleCA9IHJlc3VsdC5sZW5ndGg7XG5cblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdHZhbHVlID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwTnVsbCAmJiB2YWx1ZSA9PT0gbnVsbCkgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwRW1wdHlTdHJpbmcgJiYgdmFsdWUgPT09ICcnKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJ1snLCBpbmRleCwgJ10nXS5qb2luKCcnKV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdC4uLnJlc3VsdCxcblx0XHRcdFx0XHRbZW5jb2RlKGtleSwgb3B0aW9ucyksICdbJywgZW5jb2RlKGluZGV4LCBvcHRpb25zKSwgJ109JywgZW5jb2RlKHZhbHVlLCBvcHRpb25zKV0uam9pbignJylcblx0XHRcdFx0XTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdicmFja2V0Jzpcblx0XHRcdHJldHVybiBrZXkgPT4gKHJlc3VsdCwgdmFsdWUpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdHZhbHVlID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwTnVsbCAmJiB2YWx1ZSA9PT0gbnVsbCkgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwRW1wdHlTdHJpbmcgJiYgdmFsdWUgPT09ICcnKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJ1tdJ10uam9pbignJyldO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJ1tdPScsIGVuY29kZSh2YWx1ZSwgb3B0aW9ucyldLmpvaW4oJycpXTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdjb21tYSc6XG5cdFx0Y2FzZSAnc2VwYXJhdG9yJzpcblx0XHRcdHJldHVybiBrZXkgPT4gKHJlc3VsdCwgdmFsdWUpID0+IHtcblx0XHRcdFx0aWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChyZXN1bHQubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFtbZW5jb2RlKGtleSwgb3B0aW9ucyksICc9JywgZW5jb2RlKHZhbHVlLCBvcHRpb25zKV0uam9pbignJyldO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFtbcmVzdWx0LCBlbmNvZGUodmFsdWUsIG9wdGlvbnMpXS5qb2luKG9wdGlvbnMuYXJyYXlGb3JtYXRTZXBhcmF0b3IpXTtcblx0XHRcdH07XG5cblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGtleSA9PiAocmVzdWx0LCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0dmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBOdWxsICYmIHZhbHVlID09PSBudWxsKSB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBFbXB0eVN0cmluZyAmJiB2YWx1ZSA9PT0gJycpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgZW5jb2RlKGtleSwgb3B0aW9ucyldO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJz0nLCBlbmNvZGUodmFsdWUsIG9wdGlvbnMpXS5qb2luKCcnKV07XG5cdFx0XHR9O1xuXHR9XG59XG5cbmZ1bmN0aW9uIHBhcnNlckZvckFycmF5Rm9ybWF0KG9wdGlvbnMpIHtcblx0bGV0IHJlc3VsdDtcblxuXHRzd2l0Y2ggKG9wdGlvbnMuYXJyYXlGb3JtYXQpIHtcblx0XHRjYXNlICdpbmRleCc6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdHJlc3VsdCA9IC9cXFsoXFxkKilcXF0kLy5leGVjKGtleSk7XG5cblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoL1xcW1xcZCpcXF0kLywgJycpO1xuXG5cdFx0XHRcdGlmICghcmVzdWx0KSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0ge307XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhY2N1bXVsYXRvcltrZXldW3Jlc3VsdFsxXV0gPSB2YWx1ZTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdicmFja2V0Jzpcblx0XHRcdHJldHVybiAoa2V5LCB2YWx1ZSwgYWNjdW11bGF0b3IpID0+IHtcblx0XHRcdFx0cmVzdWx0ID0gLyhcXFtcXF0pJC8uZXhlYyhrZXkpO1xuXHRcdFx0XHRrZXkgPSBrZXkucmVwbGFjZSgvXFxbXFxdJC8sICcnKTtcblxuXHRcdFx0XHRpZiAoIXJlc3VsdCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoYWNjdW11bGF0b3Jba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFt2YWx1ZV07XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFtdLmNvbmNhdChhY2N1bXVsYXRvcltrZXldLCB2YWx1ZSk7XG5cdFx0XHR9O1xuXG5cdFx0Y2FzZSAnY29tbWEnOlxuXHRcdGNhc2UgJ3NlcGFyYXRvcic6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGlzQXJyYXkgPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmluY2x1ZGVzKG9wdGlvbnMuYXJyYXlGb3JtYXRTZXBhcmF0b3IpO1xuXHRcdFx0XHRjb25zdCBpc0VuY29kZWRBcnJheSA9ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmICFpc0FycmF5ICYmIGRlY29kZSh2YWx1ZSwgb3B0aW9ucykuaW5jbHVkZXMob3B0aW9ucy5hcnJheUZvcm1hdFNlcGFyYXRvcikpO1xuXHRcdFx0XHR2YWx1ZSA9IGlzRW5jb2RlZEFycmF5ID8gZGVjb2RlKHZhbHVlLCBvcHRpb25zKSA6IHZhbHVlO1xuXHRcdFx0XHRjb25zdCBuZXdWYWx1ZSA9IGlzQXJyYXkgfHwgaXNFbmNvZGVkQXJyYXkgPyB2YWx1ZS5zcGxpdChvcHRpb25zLmFycmF5Rm9ybWF0U2VwYXJhdG9yKS5tYXAoaXRlbSA9PiBkZWNvZGUoaXRlbSwgb3B0aW9ucykpIDogdmFsdWUgPT09IG51bGwgPyB2YWx1ZSA6IGRlY29kZSh2YWx1ZSwgb3B0aW9ucyk7XG5cdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSBuZXdWYWx1ZTtcblx0XHRcdH07XG5cblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIChrZXksIHZhbHVlLCBhY2N1bXVsYXRvcikgPT4ge1xuXHRcdFx0XHRpZiAoYWNjdW11bGF0b3Jba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSBbXS5jb25jYXQoYWNjdW11bGF0b3Jba2V5XSwgdmFsdWUpO1xuXHRcdFx0fTtcblx0fVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUFycmF5Rm9ybWF0U2VwYXJhdG9yKHZhbHVlKSB7XG5cdGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnIHx8IHZhbHVlLmxlbmd0aCAhPT0gMSkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ2FycmF5Rm9ybWF0U2VwYXJhdG9yIG11c3QgYmUgc2luZ2xlIGNoYXJhY3RlciBzdHJpbmcnKTtcblx0fVxufVxuXG5mdW5jdGlvbiBlbmNvZGUodmFsdWUsIG9wdGlvbnMpIHtcblx0aWYgKG9wdGlvbnMuZW5jb2RlKSB7XG5cdFx0cmV0dXJuIG9wdGlvbnMuc3RyaWN0ID8gc3RyaWN0VXJpRW5jb2RlKHZhbHVlKSA6IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG5cdH1cblxuXHRyZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGRlY29kZSh2YWx1ZSwgb3B0aW9ucykge1xuXHRpZiAob3B0aW9ucy5kZWNvZGUpIHtcblx0XHRyZXR1cm4gZGVjb2RlQ29tcG9uZW50KHZhbHVlKTtcblx0fVxuXG5cdHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24ga2V5c1NvcnRlcihpbnB1dCkge1xuXHRpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0XHRyZXR1cm4gaW5wdXQuc29ydCgpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcpIHtcblx0XHRyZXR1cm4ga2V5c1NvcnRlcihPYmplY3Qua2V5cyhpbnB1dCkpXG5cdFx0XHQuc29ydCgoYSwgYikgPT4gTnVtYmVyKGEpIC0gTnVtYmVyKGIpKVxuXHRcdFx0Lm1hcChrZXkgPT4gaW5wdXRba2V5XSk7XG5cdH1cblxuXHRyZXR1cm4gaW5wdXQ7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUhhc2goaW5wdXQpIHtcblx0Y29uc3QgaGFzaFN0YXJ0ID0gaW5wdXQuaW5kZXhPZignIycpO1xuXHRpZiAoaGFzaFN0YXJ0ICE9PSAtMSkge1xuXHRcdGlucHV0ID0gaW5wdXQuc2xpY2UoMCwgaGFzaFN0YXJ0KTtcblx0fVxuXG5cdHJldHVybiBpbnB1dDtcbn1cblxuZnVuY3Rpb24gZ2V0SGFzaCh1cmwpIHtcblx0bGV0IGhhc2ggPSAnJztcblx0Y29uc3QgaGFzaFN0YXJ0ID0gdXJsLmluZGV4T2YoJyMnKTtcblx0aWYgKGhhc2hTdGFydCAhPT0gLTEpIHtcblx0XHRoYXNoID0gdXJsLnNsaWNlKGhhc2hTdGFydCk7XG5cdH1cblxuXHRyZXR1cm4gaGFzaDtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdChpbnB1dCkge1xuXHRpbnB1dCA9IHJlbW92ZUhhc2goaW5wdXQpO1xuXHRjb25zdCBxdWVyeVN0YXJ0ID0gaW5wdXQuaW5kZXhPZignPycpO1xuXHRpZiAocXVlcnlTdGFydCA9PT0gLTEpIHtcblx0XHRyZXR1cm4gJyc7XG5cdH1cblxuXHRyZXR1cm4gaW5wdXQuc2xpY2UocXVlcnlTdGFydCArIDEpO1xufVxuXG5mdW5jdGlvbiBwYXJzZVZhbHVlKHZhbHVlLCBvcHRpb25zKSB7XG5cdGlmIChvcHRpb25zLnBhcnNlTnVtYmVycyAmJiAhTnVtYmVyLmlzTmFOKE51bWJlcih2YWx1ZSkpICYmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRyaW0oKSAhPT0gJycpKSB7XG5cdFx0dmFsdWUgPSBOdW1iZXIodmFsdWUpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMucGFyc2VCb29sZWFucyAmJiB2YWx1ZSAhPT0gbnVsbCAmJiAodmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnIHx8IHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICdmYWxzZScpKSB7XG5cdFx0dmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XG5cdH1cblxuXHRyZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIHBhcnNlKHF1ZXJ5LCBvcHRpb25zKSB7XG5cdG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcblx0XHRkZWNvZGU6IHRydWUsXG5cdFx0c29ydDogdHJ1ZSxcblx0XHRhcnJheUZvcm1hdDogJ25vbmUnLFxuXHRcdGFycmF5Rm9ybWF0U2VwYXJhdG9yOiAnLCcsXG5cdFx0cGFyc2VOdW1iZXJzOiBmYWxzZSxcblx0XHRwYXJzZUJvb2xlYW5zOiBmYWxzZVxuXHR9LCBvcHRpb25zKTtcblxuXHR2YWxpZGF0ZUFycmF5Rm9ybWF0U2VwYXJhdG9yKG9wdGlvbnMuYXJyYXlGb3JtYXRTZXBhcmF0b3IpO1xuXG5cdGNvbnN0IGZvcm1hdHRlciA9IHBhcnNlckZvckFycmF5Rm9ybWF0KG9wdGlvbnMpO1xuXG5cdC8vIENyZWF0ZSBhbiBvYmplY3Qgd2l0aCBubyBwcm90b3R5cGVcblx0Y29uc3QgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuXHRpZiAodHlwZW9mIHF1ZXJ5ICE9PSAnc3RyaW5nJykge1xuXHRcdHJldHVybiByZXQ7XG5cdH1cblxuXHRxdWVyeSA9IHF1ZXJ5LnRyaW0oKS5yZXBsYWNlKC9eWz8jJl0vLCAnJyk7XG5cblx0aWYgKCFxdWVyeSkge1xuXHRcdHJldHVybiByZXQ7XG5cdH1cblxuXHRmb3IgKGNvbnN0IHBhcmFtIG9mIHF1ZXJ5LnNwbGl0KCcmJykpIHtcblx0XHRpZiAocGFyYW0gPT09ICcnKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRsZXQgW2tleSwgdmFsdWVdID0gc3BsaXRPbkZpcnN0KG9wdGlvbnMuZGVjb2RlID8gcGFyYW0ucmVwbGFjZSgvXFwrL2csICcgJykgOiBwYXJhbSwgJz0nKTtcblxuXHRcdC8vIE1pc3NpbmcgYD1gIHNob3VsZCBiZSBgbnVsbGA6XG5cdFx0Ly8gaHR0cDovL3czLm9yZy9UUi8yMDEyL1dELXVybC0yMDEyMDUyNC8jY29sbGVjdC11cmwtcGFyYW1ldGVyc1xuXHRcdHZhbHVlID0gdmFsdWUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBbJ2NvbW1hJywgJ3NlcGFyYXRvciddLmluY2x1ZGVzKG9wdGlvbnMuYXJyYXlGb3JtYXQpID8gdmFsdWUgOiBkZWNvZGUodmFsdWUsIG9wdGlvbnMpO1xuXHRcdGZvcm1hdHRlcihkZWNvZGUoa2V5LCBvcHRpb25zKSwgdmFsdWUsIHJldCk7XG5cdH1cblxuXHRmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhyZXQpKSB7XG5cdFx0Y29uc3QgdmFsdWUgPSByZXRba2V5XTtcblx0XHRpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuXHRcdFx0Zm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHZhbHVlKSkge1xuXHRcdFx0XHR2YWx1ZVtrXSA9IHBhcnNlVmFsdWUodmFsdWVba10sIG9wdGlvbnMpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXRba2V5XSA9IHBhcnNlVmFsdWUodmFsdWUsIG9wdGlvbnMpO1xuXHRcdH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnNvcnQgPT09IGZhbHNlKSB7XG5cdFx0cmV0dXJuIHJldDtcblx0fVxuXG5cdHJldHVybiAob3B0aW9ucy5zb3J0ID09PSB0cnVlID8gT2JqZWN0LmtleXMocmV0KS5zb3J0KCkgOiBPYmplY3Qua2V5cyhyZXQpLnNvcnQob3B0aW9ucy5zb3J0KSkucmVkdWNlKChyZXN1bHQsIGtleSkgPT4ge1xuXHRcdGNvbnN0IHZhbHVlID0gcmV0W2tleV07XG5cdFx0aWYgKEJvb2xlYW4odmFsdWUpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHQvLyBTb3J0IG9iamVjdCBrZXlzLCBub3QgdmFsdWVzXG5cdFx0XHRyZXN1bHRba2V5XSA9IGtleXNTb3J0ZXIodmFsdWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXN1bHRba2V5XSA9IHZhbHVlO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0sIE9iamVjdC5jcmVhdGUobnVsbCkpO1xufVxuXG5leHBvcnRzLmV4dHJhY3QgPSBleHRyYWN0O1xuZXhwb3J0cy5wYXJzZSA9IHBhcnNlO1xuXG5leHBvcnRzLnN0cmluZ2lmeSA9IChvYmplY3QsIG9wdGlvbnMpID0+IHtcblx0aWYgKCFvYmplY3QpIHtcblx0XHRyZXR1cm4gJyc7XG5cdH1cblxuXHRvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG5cdFx0ZW5jb2RlOiB0cnVlLFxuXHRcdHN0cmljdDogdHJ1ZSxcblx0XHRhcnJheUZvcm1hdDogJ25vbmUnLFxuXHRcdGFycmF5Rm9ybWF0U2VwYXJhdG9yOiAnLCdcblx0fSwgb3B0aW9ucyk7XG5cblx0dmFsaWRhdGVBcnJheUZvcm1hdFNlcGFyYXRvcihvcHRpb25zLmFycmF5Rm9ybWF0U2VwYXJhdG9yKTtcblxuXHRjb25zdCBzaG91bGRGaWx0ZXIgPSBrZXkgPT4gKFxuXHRcdChvcHRpb25zLnNraXBOdWxsICYmIGlzTnVsbE9yVW5kZWZpbmVkKG9iamVjdFtrZXldKSkgfHxcblx0XHQob3B0aW9ucy5za2lwRW1wdHlTdHJpbmcgJiYgb2JqZWN0W2tleV0gPT09ICcnKVxuXHQpO1xuXG5cdGNvbnN0IGZvcm1hdHRlciA9IGVuY29kZXJGb3JBcnJheUZvcm1hdChvcHRpb25zKTtcblxuXHRjb25zdCBvYmplY3RDb3B5ID0ge307XG5cblx0Zm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMob2JqZWN0KSkge1xuXHRcdGlmICghc2hvdWxkRmlsdGVyKGtleSkpIHtcblx0XHRcdG9iamVjdENvcHlba2V5XSA9IG9iamVjdFtrZXldO1xuXHRcdH1cblx0fVxuXG5cdGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3RDb3B5KTtcblxuXHRpZiAob3B0aW9ucy5zb3J0ICE9PSBmYWxzZSkge1xuXHRcdGtleXMuc29ydChvcHRpb25zLnNvcnQpO1xuXHR9XG5cblx0cmV0dXJuIGtleXMubWFwKGtleSA9PiB7XG5cdFx0Y29uc3QgdmFsdWUgPSBvYmplY3Rba2V5XTtcblxuXHRcdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gJyc7XG5cdFx0fVxuXG5cdFx0aWYgKHZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRyZXR1cm4gZW5jb2RlKGtleSwgb3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0aWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWVcblx0XHRcdFx0LnJlZHVjZShmb3JtYXR0ZXIoa2V5KSwgW10pXG5cdFx0XHRcdC5qb2luKCcmJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVuY29kZShrZXksIG9wdGlvbnMpICsgJz0nICsgZW5jb2RlKHZhbHVlLCBvcHRpb25zKTtcblx0fSkuZmlsdGVyKHggPT4geC5sZW5ndGggPiAwKS5qb2luKCcmJyk7XG59O1xuXG5leHBvcnRzLnBhcnNlVXJsID0gKHVybCwgb3B0aW9ucykgPT4ge1xuXHRvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG5cdFx0ZGVjb2RlOiB0cnVlXG5cdH0sIG9wdGlvbnMpO1xuXG5cdGNvbnN0IFt1cmxfLCBoYXNoXSA9IHNwbGl0T25GaXJzdCh1cmwsICcjJyk7XG5cblx0cmV0dXJuIE9iamVjdC5hc3NpZ24oXG5cdFx0e1xuXHRcdFx0dXJsOiB1cmxfLnNwbGl0KCc/JylbMF0gfHwgJycsXG5cdFx0XHRxdWVyeTogcGFyc2UoZXh0cmFjdCh1cmwpLCBvcHRpb25zKVxuXHRcdH0sXG5cdFx0b3B0aW9ucyAmJiBvcHRpb25zLnBhcnNlRnJhZ21lbnRJZGVudGlmaWVyICYmIGhhc2ggPyB7ZnJhZ21lbnRJZGVudGlmaWVyOiBkZWNvZGUoaGFzaCwgb3B0aW9ucyl9IDoge31cblx0KTtcbn07XG5cbmV4cG9ydHMuc3RyaW5naWZ5VXJsID0gKG9iamVjdCwgb3B0aW9ucykgPT4ge1xuXHRvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG5cdFx0ZW5jb2RlOiB0cnVlLFxuXHRcdHN0cmljdDogdHJ1ZVxuXHR9LCBvcHRpb25zKTtcblxuXHRjb25zdCB1cmwgPSByZW1vdmVIYXNoKG9iamVjdC51cmwpLnNwbGl0KCc/JylbMF0gfHwgJyc7XG5cdGNvbnN0IHF1ZXJ5RnJvbVVybCA9IGV4cG9ydHMuZXh0cmFjdChvYmplY3QudXJsKTtcblx0Y29uc3QgcGFyc2VkUXVlcnlGcm9tVXJsID0gZXhwb3J0cy5wYXJzZShxdWVyeUZyb21VcmwsIHtzb3J0OiBmYWxzZX0pO1xuXG5cdGNvbnN0IHF1ZXJ5ID0gT2JqZWN0LmFzc2lnbihwYXJzZWRRdWVyeUZyb21VcmwsIG9iamVjdC5xdWVyeSk7XG5cdGxldCBxdWVyeVN0cmluZyA9IGV4cG9ydHMuc3RyaW5naWZ5KHF1ZXJ5LCBvcHRpb25zKTtcblx0aWYgKHF1ZXJ5U3RyaW5nKSB7XG5cdFx0cXVlcnlTdHJpbmcgPSBgPyR7cXVlcnlTdHJpbmd9YDtcblx0fVxuXG5cdGxldCBoYXNoID0gZ2V0SGFzaChvYmplY3QudXJsKTtcblx0aWYgKG9iamVjdC5mcmFnbWVudElkZW50aWZpZXIpIHtcblx0XHRoYXNoID0gYCMke2VuY29kZShvYmplY3QuZnJhZ21lbnRJZGVudGlmaWVyLCBvcHRpb25zKX1gO1xuXHR9XG5cblx0cmV0dXJuIGAke3VybH0ke3F1ZXJ5U3RyaW5nfSR7aGFzaH1gO1xufTtcblxuZXhwb3J0cy5waWNrID0gKGlucHV0LCBmaWx0ZXIsIG9wdGlvbnMpID0+IHtcblx0b3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuXHRcdHBhcnNlRnJhZ21lbnRJZGVudGlmaWVyOiB0cnVlXG5cdH0sIG9wdGlvbnMpO1xuXG5cdGNvbnN0IHt1cmwsIHF1ZXJ5LCBmcmFnbWVudElkZW50aWZpZXJ9ID0gZXhwb3J0cy5wYXJzZVVybChpbnB1dCwgb3B0aW9ucyk7XG5cdHJldHVybiBleHBvcnRzLnN0cmluZ2lmeVVybCh7XG5cdFx0dXJsLFxuXHRcdHF1ZXJ5OiBmaWx0ZXJPYmplY3QocXVlcnksIGZpbHRlciksXG5cdFx0ZnJhZ21lbnRJZGVudGlmaWVyXG5cdH0sIG9wdGlvbnMpO1xufTtcblxuZXhwb3J0cy5leGNsdWRlID0gKGlucHV0LCBmaWx0ZXIsIG9wdGlvbnMpID0+IHtcblx0Y29uc3QgZXhjbHVzaW9uRmlsdGVyID0gQXJyYXkuaXNBcnJheShmaWx0ZXIpID8ga2V5ID0+ICFmaWx0ZXIuaW5jbHVkZXMoa2V5KSA6IChrZXksIHZhbHVlKSA9PiAhZmlsdGVyKGtleSwgdmFsdWUpO1xuXG5cdHJldHVybiBleHBvcnRzLnBpY2soaW5wdXQsIGV4Y2x1c2lvbkZpbHRlciwgb3B0aW9ucyk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/request-sender/node_modules/query-string/index.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/script-loader/lib/browser-support.js":
/*!************************************************************************!*\
  !*** ./node_modules/@bigcommerce/script-loader/lib/browser-support.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar BrowserSupport = (function () {\n    function BrowserSupport() {\n    }\n    BrowserSupport.prototype.canSupportRel = function (rel) {\n        var link = document.createElement('link');\n        return !!(link.relList &&\n            link.relList.supports &&\n            link.relList.supports(rel));\n    };\n    return BrowserSupport;\n}());\nexports[\"default\"] = BrowserSupport;\n//# sourceMappingURL=browser-support.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXIvbGliL2Jyb3dzZXItc3VwcG9ydC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXIvbGliL2Jyb3dzZXItc3VwcG9ydC5qcz9kMTc3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEJyb3dzZXJTdXBwb3J0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCcm93c2VyU3VwcG9ydCgpIHtcbiAgICB9XG4gICAgQnJvd3NlclN1cHBvcnQucHJvdG90eXBlLmNhblN1cHBvcnRSZWwgPSBmdW5jdGlvbiAocmVsKSB7XG4gICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICByZXR1cm4gISEobGluay5yZWxMaXN0ICYmXG4gICAgICAgICAgICBsaW5rLnJlbExpc3Quc3VwcG9ydHMgJiZcbiAgICAgICAgICAgIGxpbmsucmVsTGlzdC5zdXBwb3J0cyhyZWwpKTtcbiAgICB9O1xuICAgIHJldHVybiBCcm93c2VyU3VwcG9ydDtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBCcm93c2VyU3VwcG9ydDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyb3dzZXItc3VwcG9ydC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/script-loader/lib/browser-support.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/script-loader/lib/create-script-loader.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@bigcommerce/script-loader/lib/create-script-loader.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports[\"default\"] = createScriptLoader;\nvar request_sender_1 = __webpack_require__(/*! @bigcommerce/request-sender */ \"./node_modules/@bigcommerce/request-sender/esm/index.js\");\nvar browser_support_1 = __webpack_require__(/*! ./browser-support */ \"./node_modules/@bigcommerce/script-loader/lib/browser-support.js\");\nvar script_loader_1 = __webpack_require__(/*! ./script-loader */ \"./node_modules/@bigcommerce/script-loader/lib/script-loader.js\");\nfunction createScriptLoader() {\n    return new script_loader_1.default(new browser_support_1.default(), (0, request_sender_1.createRequestSender)());\n}\n//# sourceMappingURL=create-script-loader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXIvbGliL2NyZWF0ZS1zY3JpcHQtbG9hZGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGtCQUFlO0FBQ2YsdUJBQXVCLG1CQUFPLENBQUMsNEZBQTZCO0FBQzVELHdCQUF3QixtQkFBTyxDQUFDLDJGQUFtQjtBQUNuRCxzQkFBc0IsbUJBQU8sQ0FBQyx1RkFBaUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlci9saWIvY3JlYXRlLXNjcmlwdC1sb2FkZXIuanM/NDM2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGNyZWF0ZVNjcmlwdExvYWRlcjtcbnZhciByZXF1ZXN0X3NlbmRlcl8xID0gcmVxdWlyZShcIkBiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlclwiKTtcbnZhciBicm93c2VyX3N1cHBvcnRfMSA9IHJlcXVpcmUoXCIuL2Jyb3dzZXItc3VwcG9ydFwiKTtcbnZhciBzY3JpcHRfbG9hZGVyXzEgPSByZXF1aXJlKFwiLi9zY3JpcHQtbG9hZGVyXCIpO1xuZnVuY3Rpb24gY3JlYXRlU2NyaXB0TG9hZGVyKCkge1xuICAgIHJldHVybiBuZXcgc2NyaXB0X2xvYWRlcl8xLmRlZmF1bHQobmV3IGJyb3dzZXJfc3VwcG9ydF8xLmRlZmF1bHQoKSwgKDAsIHJlcXVlc3Rfc2VuZGVyXzEuY3JlYXRlUmVxdWVzdFNlbmRlcikoKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGUtc2NyaXB0LWxvYWRlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/script-loader/lib/create-script-loader.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/script-loader/lib/create-stylesheet-loader.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@bigcommerce/script-loader/lib/create-stylesheet-loader.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports[\"default\"] = createStylesheetLoader;\nvar request_sender_1 = __webpack_require__(/*! @bigcommerce/request-sender */ \"./node_modules/@bigcommerce/request-sender/esm/index.js\");\nvar browser_support_1 = __webpack_require__(/*! ./browser-support */ \"./node_modules/@bigcommerce/script-loader/lib/browser-support.js\");\nvar stylesheet_loader_1 = __webpack_require__(/*! ./stylesheet-loader */ \"./node_modules/@bigcommerce/script-loader/lib/stylesheet-loader.js\");\nfunction createStylesheetLoader() {\n    return new stylesheet_loader_1.default(new browser_support_1.default(), (0, request_sender_1.createRequestSender)());\n}\n//# sourceMappingURL=create-stylesheet-loader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXIvbGliL2NyZWF0ZS1zdHlsZXNoZWV0LWxvYWRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxrQkFBZTtBQUNmLHVCQUF1QixtQkFBTyxDQUFDLDRGQUE2QjtBQUM1RCx3QkFBd0IsbUJBQU8sQ0FBQywyRkFBbUI7QUFDbkQsMEJBQTBCLG1CQUFPLENBQUMsK0ZBQXFCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXIvbGliL2NyZWF0ZS1zdHlsZXNoZWV0LWxvYWRlci5qcz9iNDI0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gY3JlYXRlU3R5bGVzaGVldExvYWRlcjtcbnZhciByZXF1ZXN0X3NlbmRlcl8xID0gcmVxdWlyZShcIkBiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlclwiKTtcbnZhciBicm93c2VyX3N1cHBvcnRfMSA9IHJlcXVpcmUoXCIuL2Jyb3dzZXItc3VwcG9ydFwiKTtcbnZhciBzdHlsZXNoZWV0X2xvYWRlcl8xID0gcmVxdWlyZShcIi4vc3R5bGVzaGVldC1sb2FkZXJcIik7XG5mdW5jdGlvbiBjcmVhdGVTdHlsZXNoZWV0TG9hZGVyKCkge1xuICAgIHJldHVybiBuZXcgc3R5bGVzaGVldF9sb2FkZXJfMS5kZWZhdWx0KG5ldyBicm93c2VyX3N1cHBvcnRfMS5kZWZhdWx0KCksICgwLCByZXF1ZXN0X3NlbmRlcl8xLmNyZWF0ZVJlcXVlc3RTZW5kZXIpKCkpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlLXN0eWxlc2hlZXQtbG9hZGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/script-loader/lib/create-stylesheet-loader.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/script-loader/lib/get-script-loader.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@bigcommerce/script-loader/lib/get-script-loader.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports[\"default\"] = getScriptLoader;\nvar create_script_loader_1 = __webpack_require__(/*! ./create-script-loader */ \"./node_modules/@bigcommerce/script-loader/lib/create-script-loader.js\");\nvar instance;\nfunction getScriptLoader() {\n    if (!instance) {\n        instance = (0, create_script_loader_1.default)();\n    }\n    return instance;\n}\n//# sourceMappingURL=get-script-loader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXIvbGliL2dldC1zY3JpcHQtbG9hZGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGtCQUFlO0FBQ2YsNkJBQTZCLG1CQUFPLENBQUMscUdBQXdCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlci9saWIvZ2V0LXNjcmlwdC1sb2FkZXIuanM/ZmJkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGdldFNjcmlwdExvYWRlcjtcbnZhciBjcmVhdGVfc2NyaXB0X2xvYWRlcl8xID0gcmVxdWlyZShcIi4vY3JlYXRlLXNjcmlwdC1sb2FkZXJcIik7XG52YXIgaW5zdGFuY2U7XG5mdW5jdGlvbiBnZXRTY3JpcHRMb2FkZXIoKSB7XG4gICAgaWYgKCFpbnN0YW5jZSkge1xuICAgICAgICBpbnN0YW5jZSA9ICgwLCBjcmVhdGVfc2NyaXB0X2xvYWRlcl8xLmRlZmF1bHQpKCk7XG4gICAgfVxuICAgIHJldHVybiBpbnN0YW5jZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldC1zY3JpcHQtbG9hZGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/script-loader/lib/get-script-loader.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/script-loader/lib/get-stylesheet-loader.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@bigcommerce/script-loader/lib/get-stylesheet-loader.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports[\"default\"] = getStylesheetLoader;\nvar create_stylesheet_loader_1 = __webpack_require__(/*! ./create-stylesheet-loader */ \"./node_modules/@bigcommerce/script-loader/lib/create-stylesheet-loader.js\");\nvar instance;\nfunction getStylesheetLoader() {\n    if (!instance) {\n        instance = (0, create_stylesheet_loader_1.default)();\n    }\n    return instance;\n}\n//# sourceMappingURL=get-stylesheet-loader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXIvbGliL2dldC1zdHlsZXNoZWV0LWxvYWRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxrQkFBZTtBQUNmLGlDQUFpQyxtQkFBTyxDQUFDLDZHQUE0QjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXIvbGliL2dldC1zdHlsZXNoZWV0LWxvYWRlci5qcz83ZDdlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZ2V0U3R5bGVzaGVldExvYWRlcjtcbnZhciBjcmVhdGVfc3R5bGVzaGVldF9sb2FkZXJfMSA9IHJlcXVpcmUoXCIuL2NyZWF0ZS1zdHlsZXNoZWV0LWxvYWRlclwiKTtcbnZhciBpbnN0YW5jZTtcbmZ1bmN0aW9uIGdldFN0eWxlc2hlZXRMb2FkZXIoKSB7XG4gICAgaWYgKCFpbnN0YW5jZSkge1xuICAgICAgICBpbnN0YW5jZSA9ICgwLCBjcmVhdGVfc3R5bGVzaGVldF9sb2FkZXJfMS5kZWZhdWx0KSgpO1xuICAgIH1cbiAgICByZXR1cm4gaW5zdGFuY2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtc3R5bGVzaGVldC1sb2FkZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/script-loader/lib/get-stylesheet-loader.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/script-loader/lib/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@bigcommerce/script-loader/lib/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.getStylesheetLoader = exports.createStylesheetLoader = exports.StylesheetLoader = exports.getScriptLoader = exports.createScriptLoader = exports.ScriptLoader = void 0;\nvar script_loader_1 = __webpack_require__(/*! ./script-loader */ \"./node_modules/@bigcommerce/script-loader/lib/script-loader.js\");\nObject.defineProperty(exports, \"ScriptLoader\", ({ enumerable: true, get: function () { return script_loader_1.default; } }));\nvar create_script_loader_1 = __webpack_require__(/*! ./create-script-loader */ \"./node_modules/@bigcommerce/script-loader/lib/create-script-loader.js\");\nObject.defineProperty(exports, \"createScriptLoader\", ({ enumerable: true, get: function () { return create_script_loader_1.default; } }));\nvar get_script_loader_1 = __webpack_require__(/*! ./get-script-loader */ \"./node_modules/@bigcommerce/script-loader/lib/get-script-loader.js\");\nObject.defineProperty(exports, \"getScriptLoader\", ({ enumerable: true, get: function () { return get_script_loader_1.default; } }));\nvar stylesheet_loader_1 = __webpack_require__(/*! ./stylesheet-loader */ \"./node_modules/@bigcommerce/script-loader/lib/stylesheet-loader.js\");\nObject.defineProperty(exports, \"StylesheetLoader\", ({ enumerable: true, get: function () { return stylesheet_loader_1.default; } }));\nvar create_stylesheet_loader_1 = __webpack_require__(/*! ./create-stylesheet-loader */ \"./node_modules/@bigcommerce/script-loader/lib/create-stylesheet-loader.js\");\nObject.defineProperty(exports, \"createStylesheetLoader\", ({ enumerable: true, get: function () { return create_stylesheet_loader_1.default; } }));\nvar get_stylesheet_loader_1 = __webpack_require__(/*! ./get-stylesheet-loader */ \"./node_modules/@bigcommerce/script-loader/lib/get-stylesheet-loader.js\");\nObject.defineProperty(exports, \"getStylesheetLoader\", ({ enumerable: true, get: function () { return get_stylesheet_loader_1.default; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXIvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDJCQUEyQixHQUFHLDhCQUE4QixHQUFHLHdCQUF3QixHQUFHLHVCQUF1QixHQUFHLDBCQUEwQixHQUFHLG9CQUFvQjtBQUNySyxzQkFBc0IsbUJBQU8sQ0FBQyx1RkFBaUI7QUFDL0MsZ0RBQStDLEVBQUUscUNBQXFDLG1DQUFtQyxFQUFDO0FBQzFILDZCQUE2QixtQkFBTyxDQUFDLHFHQUF3QjtBQUM3RCxzREFBcUQsRUFBRSxxQ0FBcUMsMENBQTBDLEVBQUM7QUFDdkksMEJBQTBCLG1CQUFPLENBQUMsK0ZBQXFCO0FBQ3ZELG1EQUFrRCxFQUFFLHFDQUFxQyx1Q0FBdUMsRUFBQztBQUNqSSwwQkFBMEIsbUJBQU8sQ0FBQywrRkFBcUI7QUFDdkQsb0RBQW1ELEVBQUUscUNBQXFDLHVDQUF1QyxFQUFDO0FBQ2xJLGlDQUFpQyxtQkFBTyxDQUFDLDZHQUE0QjtBQUNyRSwwREFBeUQsRUFBRSxxQ0FBcUMsOENBQThDLEVBQUM7QUFDL0ksOEJBQThCLG1CQUFPLENBQUMsdUdBQXlCO0FBQy9ELHVEQUFzRCxFQUFFLHFDQUFxQywyQ0FBMkMsRUFBQztBQUN6SSIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyL2xpYi9pbmRleC5qcz9jMzdlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRTdHlsZXNoZWV0TG9hZGVyID0gZXhwb3J0cy5jcmVhdGVTdHlsZXNoZWV0TG9hZGVyID0gZXhwb3J0cy5TdHlsZXNoZWV0TG9hZGVyID0gZXhwb3J0cy5nZXRTY3JpcHRMb2FkZXIgPSBleHBvcnRzLmNyZWF0ZVNjcmlwdExvYWRlciA9IGV4cG9ydHMuU2NyaXB0TG9hZGVyID0gdm9pZCAwO1xudmFyIHNjcmlwdF9sb2FkZXJfMSA9IHJlcXVpcmUoXCIuL3NjcmlwdC1sb2FkZXJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTY3JpcHRMb2FkZXJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNjcmlwdF9sb2FkZXJfMS5kZWZhdWx0OyB9IH0pO1xudmFyIGNyZWF0ZV9zY3JpcHRfbG9hZGVyXzEgPSByZXF1aXJlKFwiLi9jcmVhdGUtc2NyaXB0LWxvYWRlclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImNyZWF0ZVNjcmlwdExvYWRlclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlX3NjcmlwdF9sb2FkZXJfMS5kZWZhdWx0OyB9IH0pO1xudmFyIGdldF9zY3JpcHRfbG9hZGVyXzEgPSByZXF1aXJlKFwiLi9nZXQtc2NyaXB0LWxvYWRlclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImdldFNjcmlwdExvYWRlclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0X3NjcmlwdF9sb2FkZXJfMS5kZWZhdWx0OyB9IH0pO1xudmFyIHN0eWxlc2hlZXRfbG9hZGVyXzEgPSByZXF1aXJlKFwiLi9zdHlsZXNoZWV0LWxvYWRlclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlN0eWxlc2hlZXRMb2FkZXJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0eWxlc2hlZXRfbG9hZGVyXzEuZGVmYXVsdDsgfSB9KTtcbnZhciBjcmVhdGVfc3R5bGVzaGVldF9sb2FkZXJfMSA9IHJlcXVpcmUoXCIuL2NyZWF0ZS1zdHlsZXNoZWV0LWxvYWRlclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImNyZWF0ZVN0eWxlc2hlZXRMb2FkZXJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZV9zdHlsZXNoZWV0X2xvYWRlcl8xLmRlZmF1bHQ7IH0gfSk7XG52YXIgZ2V0X3N0eWxlc2hlZXRfbG9hZGVyXzEgPSByZXF1aXJlKFwiLi9nZXQtc3R5bGVzaGVldC1sb2FkZXJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJnZXRTdHlsZXNoZWV0TG9hZGVyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXRfc3R5bGVzaGVldF9sb2FkZXJfMS5kZWZhdWx0OyB9IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/script-loader/lib/index.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/script-loader/lib/script-loader.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@bigcommerce/script-loader/lib/script-loader.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar ScriptLoader = (function () {\n    function ScriptLoader(_browserSupport, _requestSender) {\n        this._browserSupport = _browserSupport;\n        this._requestSender = _requestSender;\n        this._scripts = {};\n        this._preloadedScripts = {};\n    }\n    ScriptLoader.prototype.loadScript = function (src, options) {\n        var _this = this;\n        if (!this._scripts[src]) {\n            this._scripts[src] = new Promise(function (resolve, reject) {\n                var script = document.createElement('script');\n                var _a = options || {}, _b = _a.async, async = _b === void 0 ? false : _b, _c = _a.attributes, attributes = _c === void 0 ? {} : _c;\n                Object.keys(attributes)\n                    .forEach(function (key) {\n                    script.setAttribute(key, attributes[key]);\n                });\n                script.onload = function () { return resolve(); };\n                script.onreadystatechange = function () { return resolve(); };\n                script.onerror = function (event) {\n                    delete _this._scripts[src];\n                    reject(event);\n                };\n                script.async = async;\n                script.src = src;\n                document.body.appendChild(script);\n            });\n        }\n        return this._scripts[src];\n    };\n    ScriptLoader.prototype.loadScripts = function (urls, options) {\n        var _this = this;\n        return Promise.all(urls.map(function (url) { return _this.loadScript(url, options); }))\n            .then(function () { return undefined; });\n    };\n    ScriptLoader.prototype.preloadScript = function (url, options) {\n        var _this = this;\n        if (!this._preloadedScripts[url]) {\n            this._preloadedScripts[url] = new Promise(function (resolve, reject) {\n                var _a = (options || {}).prefetch, prefetch = _a === void 0 ? false : _a;\n                var rel = prefetch ? 'prefetch' : 'preload';\n                if (_this._browserSupport.canSupportRel(rel)) {\n                    var preloadedScript = document.createElement('link');\n                    preloadedScript.as = 'script';\n                    preloadedScript.rel = rel;\n                    preloadedScript.href = url;\n                    preloadedScript.onload = function () {\n                        resolve();\n                    };\n                    preloadedScript.onerror = function () {\n                        delete _this._preloadedScripts[url];\n                        reject();\n                    };\n                    document.head.appendChild(preloadedScript);\n                }\n                else {\n                    _this._requestSender.get(url, {\n                        credentials: false,\n                        headers: { Accept: 'application/javascript' },\n                    })\n                        .then(function () { return resolve(); })\n                        .catch(reject);\n                }\n            });\n        }\n        return this._preloadedScripts[url];\n    };\n    ScriptLoader.prototype.preloadScripts = function (urls, options) {\n        var _this = this;\n        return Promise.all(urls.map(function (url) { return _this.preloadScript(url, options); }))\n            .then(function () { return undefined; });\n    };\n    return ScriptLoader;\n}());\nexports[\"default\"] = ScriptLoader;\n//# sourceMappingURL=script-loader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXIvbGliL3NjcmlwdC1sb2FkZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHlHQUF5RztBQUMvSTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsOENBQThDO0FBQzlDLDBEQUEwRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELHdDQUF3QztBQUM3RixnQ0FBZ0MsbUJBQW1CO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGtDQUFrQztBQUNyRSxxQkFBcUI7QUFDckIsNENBQTRDLG1CQUFtQjtBQUMvRDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsMkNBQTJDO0FBQ2hHLGdDQUFnQyxtQkFBbUI7QUFDbkQ7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXIvbGliL3NjcmlwdC1sb2FkZXIuanM/YjljOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBTY3JpcHRMb2FkZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNjcmlwdExvYWRlcihfYnJvd3NlclN1cHBvcnQsIF9yZXF1ZXN0U2VuZGVyKSB7XG4gICAgICAgIHRoaXMuX2Jyb3dzZXJTdXBwb3J0ID0gX2Jyb3dzZXJTdXBwb3J0O1xuICAgICAgICB0aGlzLl9yZXF1ZXN0U2VuZGVyID0gX3JlcXVlc3RTZW5kZXI7XG4gICAgICAgIHRoaXMuX3NjcmlwdHMgPSB7fTtcbiAgICAgICAgdGhpcy5fcHJlbG9hZGVkU2NyaXB0cyA9IHt9O1xuICAgIH1cbiAgICBTY3JpcHRMb2FkZXIucHJvdG90eXBlLmxvYWRTY3JpcHQgPSBmdW5jdGlvbiAoc3JjLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5fc2NyaXB0c1tzcmNdKSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JpcHRzW3NyY10gPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IG9wdGlvbnMgfHwge30sIF9iID0gX2EuYXN5bmMsIGFzeW5jID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2IsIF9jID0gX2EuYXR0cmlidXRlcywgYXR0cmlidXRlcyA9IF9jID09PSB2b2lkIDAgPyB7fSA6IF9jO1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpXG4gICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUoKTsgfTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzb2x2ZSgpOyB9O1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fc2NyaXB0c1tzcmNdO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgc2NyaXB0LmFzeW5jID0gYXN5bmM7XG4gICAgICAgICAgICAgICAgc2NyaXB0LnNyYyA9IHNyYztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fc2NyaXB0c1tzcmNdO1xuICAgIH07XG4gICAgU2NyaXB0TG9hZGVyLnByb3RvdHlwZS5sb2FkU2NyaXB0cyA9IGZ1bmN0aW9uICh1cmxzLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbCh1cmxzLm1hcChmdW5jdGlvbiAodXJsKSB7IHJldHVybiBfdGhpcy5sb2FkU2NyaXB0KHVybCwgb3B0aW9ucyk7IH0pKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9KTtcbiAgICB9O1xuICAgIFNjcmlwdExvYWRlci5wcm90b3R5cGUucHJlbG9hZFNjcmlwdCA9IGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLl9wcmVsb2FkZWRTY3JpcHRzW3VybF0pIHtcbiAgICAgICAgICAgIHRoaXMuX3ByZWxvYWRlZFNjcmlwdHNbdXJsXSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSAob3B0aW9ucyB8fCB7fSkucHJlZmV0Y2gsIHByZWZldGNoID0gX2EgPT09IHZvaWQgMCA/IGZhbHNlIDogX2E7XG4gICAgICAgICAgICAgICAgdmFyIHJlbCA9IHByZWZldGNoID8gJ3ByZWZldGNoJyA6ICdwcmVsb2FkJztcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX2Jyb3dzZXJTdXBwb3J0LmNhblN1cHBvcnRSZWwocmVsKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJlbG9hZGVkU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICAgICAgICAgICAgICBwcmVsb2FkZWRTY3JpcHQuYXMgPSAnc2NyaXB0JztcbiAgICAgICAgICAgICAgICAgICAgcHJlbG9hZGVkU2NyaXB0LnJlbCA9IHJlbDtcbiAgICAgICAgICAgICAgICAgICAgcHJlbG9hZGVkU2NyaXB0LmhyZWYgPSB1cmw7XG4gICAgICAgICAgICAgICAgICAgIHByZWxvYWRlZFNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHByZWxvYWRlZFNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLl9wcmVsb2FkZWRTY3JpcHRzW3VybF07XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChwcmVsb2FkZWRTY3JpcHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3JlcXVlc3RTZW5kZXIuZ2V0KHVybCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JyB9LFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzb2x2ZSgpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByZWxvYWRlZFNjcmlwdHNbdXJsXTtcbiAgICB9O1xuICAgIFNjcmlwdExvYWRlci5wcm90b3R5cGUucHJlbG9hZFNjcmlwdHMgPSBmdW5jdGlvbiAodXJscywgb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwodXJscy5tYXAoZnVuY3Rpb24gKHVybCkgeyByZXR1cm4gX3RoaXMucHJlbG9hZFNjcmlwdCh1cmwsIG9wdGlvbnMpOyB9KSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gU2NyaXB0TG9hZGVyO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFNjcmlwdExvYWRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjcmlwdC1sb2FkZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/script-loader/lib/script-loader.js\n");

/***/ }),

/***/ "./node_modules/@bigcommerce/script-loader/lib/stylesheet-loader.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@bigcommerce/script-loader/lib/stylesheet-loader.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar StylesheetLoader = (function () {\n    function StylesheetLoader(_browserSupport, _requestSender) {\n        this._browserSupport = _browserSupport;\n        this._requestSender = _requestSender;\n        this._stylesheets = {};\n        this._preloadedStylesheets = {};\n    }\n    StylesheetLoader.prototype.loadStylesheet = function (src, options) {\n        var _this = this;\n        if (!this._stylesheets[src]) {\n            this._stylesheets[src] = new Promise(function (resolve, reject) {\n                var stylesheet = document.createElement('link');\n                var _a = options || {}, _b = _a.prepend, prepend = _b === void 0 ? false : _b, _c = _a.attributes, attributes = _c === void 0 ? {} : _c;\n                Object.keys(attributes)\n                    .forEach(function (key) {\n                    stylesheet.setAttribute(key, attributes[key]);\n                });\n                stylesheet.onload = function () { return resolve(); };\n                stylesheet.onerror = function (event) {\n                    delete _this._stylesheets[src];\n                    reject(event);\n                };\n                stylesheet.rel = 'stylesheet';\n                stylesheet.href = src;\n                if (prepend && document.head.children[0]) {\n                    document.head.insertBefore(stylesheet, document.head.children[0]);\n                }\n                else {\n                    document.head.appendChild(stylesheet);\n                }\n            });\n        }\n        return this._stylesheets[src];\n    };\n    StylesheetLoader.prototype.loadStylesheets = function (urls, options) {\n        var _this = this;\n        return Promise.all(urls.map(function (url) { return _this.loadStylesheet(url, options); }))\n            .then(function () { return undefined; });\n    };\n    StylesheetLoader.prototype.preloadStylesheet = function (url, options) {\n        var _this = this;\n        if (!this._preloadedStylesheets[url]) {\n            this._preloadedStylesheets[url] = new Promise(function (resolve, reject) {\n                var _a = (options || {}).prefetch, prefetch = _a === void 0 ? false : _a;\n                var rel = prefetch ? 'prefetch' : 'preload';\n                if (_this._browserSupport.canSupportRel(rel)) {\n                    var preloadedStylesheet = document.createElement('link');\n                    preloadedStylesheet.as = 'style';\n                    preloadedStylesheet.rel = prefetch ? 'prefetch' : 'preload';\n                    preloadedStylesheet.href = url;\n                    preloadedStylesheet.onload = function () {\n                        resolve();\n                    };\n                    preloadedStylesheet.onerror = function (event) {\n                        delete _this._preloadedStylesheets[url];\n                        reject(event);\n                    };\n                    document.head.appendChild(preloadedStylesheet);\n                }\n                else {\n                    _this._requestSender.get(url, {\n                        credentials: false,\n                        headers: { Accept: 'text/css' },\n                    })\n                        .then(function () { return resolve(); })\n                        .catch(reject);\n                }\n            });\n        }\n        return this._preloadedStylesheets[url];\n    };\n    StylesheetLoader.prototype.preloadStylesheets = function (urls, options) {\n        var _this = this;\n        return Promise.all(urls.map(function (url) { return _this.preloadStylesheet(url, options); }))\n            .then(function () { return undefined; });\n    };\n    return StylesheetLoader;\n}());\nexports[\"default\"] = StylesheetLoader;\n//# sourceMappingURL=stylesheet-loader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXIvbGliL3N0eWxlc2hlZXQtbG9hZGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyw2R0FBNkc7QUFDbko7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCw0Q0FBNEM7QUFDakcsZ0NBQWdDLG1CQUFtQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxvQkFBb0I7QUFDdkQscUJBQXFCO0FBQ3JCLDRDQUE0QyxtQkFBbUI7QUFDL0Q7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELCtDQUErQztBQUNwRyxnQ0FBZ0MsbUJBQW1CO0FBQ25EO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vbm9kZV9tb2R1bGVzL0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyL2xpYi9zdHlsZXNoZWV0LWxvYWRlci5qcz85Mzg1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFN0eWxlc2hlZXRMb2FkZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0eWxlc2hlZXRMb2FkZXIoX2Jyb3dzZXJTdXBwb3J0LCBfcmVxdWVzdFNlbmRlcikge1xuICAgICAgICB0aGlzLl9icm93c2VyU3VwcG9ydCA9IF9icm93c2VyU3VwcG9ydDtcbiAgICAgICAgdGhpcy5fcmVxdWVzdFNlbmRlciA9IF9yZXF1ZXN0U2VuZGVyO1xuICAgICAgICB0aGlzLl9zdHlsZXNoZWV0cyA9IHt9O1xuICAgICAgICB0aGlzLl9wcmVsb2FkZWRTdHlsZXNoZWV0cyA9IHt9O1xuICAgIH1cbiAgICBTdHlsZXNoZWV0TG9hZGVyLnByb3RvdHlwZS5sb2FkU3R5bGVzaGVldCA9IGZ1bmN0aW9uIChzcmMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLl9zdHlsZXNoZWV0c1tzcmNdKSB7XG4gICAgICAgICAgICB0aGlzLl9zdHlsZXNoZWV0c1tzcmNdID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHZhciBzdHlsZXNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IG9wdGlvbnMgfHwge30sIF9iID0gX2EucHJlcGVuZCwgcHJlcGVuZCA9IF9iID09PSB2b2lkIDAgPyBmYWxzZSA6IF9iLCBfYyA9IF9hLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMgPSBfYyA9PT0gdm9pZCAwID8ge30gOiBfYztcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKVxuICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlc2hlZXQuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdHlsZXNoZWV0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUoKTsgfTtcbiAgICAgICAgICAgICAgICBzdHlsZXNoZWV0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLl9zdHlsZXNoZWV0c1tzcmNdO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgc3R5bGVzaGVldC5yZWwgPSAnc3R5bGVzaGVldCc7XG4gICAgICAgICAgICAgICAgc3R5bGVzaGVldC5ocmVmID0gc3JjO1xuICAgICAgICAgICAgICAgIGlmIChwcmVwZW5kICYmIGRvY3VtZW50LmhlYWQuY2hpbGRyZW5bMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVzaGVldCwgZG9jdW1lbnQuaGVhZC5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlc2hlZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9zdHlsZXNoZWV0c1tzcmNdO1xuICAgIH07XG4gICAgU3R5bGVzaGVldExvYWRlci5wcm90b3R5cGUubG9hZFN0eWxlc2hlZXRzID0gZnVuY3Rpb24gKHVybHMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHVybHMubWFwKGZ1bmN0aW9uICh1cmwpIHsgcmV0dXJuIF90aGlzLmxvYWRTdHlsZXNoZWV0KHVybCwgb3B0aW9ucyk7IH0pKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9KTtcbiAgICB9O1xuICAgIFN0eWxlc2hlZXRMb2FkZXIucHJvdG90eXBlLnByZWxvYWRTdHlsZXNoZWV0ID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuX3ByZWxvYWRlZFN0eWxlc2hlZXRzW3VybF0pIHtcbiAgICAgICAgICAgIHRoaXMuX3ByZWxvYWRlZFN0eWxlc2hlZXRzW3VybF0gPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hID0gKG9wdGlvbnMgfHwge30pLnByZWZldGNoLCBwcmVmZXRjaCA9IF9hID09PSB2b2lkIDAgPyBmYWxzZSA6IF9hO1xuICAgICAgICAgICAgICAgIHZhciByZWwgPSBwcmVmZXRjaCA/ICdwcmVmZXRjaCcgOiAncHJlbG9hZCc7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLl9icm93c2VyU3VwcG9ydC5jYW5TdXBwb3J0UmVsKHJlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZWxvYWRlZFN0eWxlc2hlZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG4gICAgICAgICAgICAgICAgICAgIHByZWxvYWRlZFN0eWxlc2hlZXQuYXMgPSAnc3R5bGUnO1xuICAgICAgICAgICAgICAgICAgICBwcmVsb2FkZWRTdHlsZXNoZWV0LnJlbCA9IHByZWZldGNoID8gJ3ByZWZldGNoJyA6ICdwcmVsb2FkJztcbiAgICAgICAgICAgICAgICAgICAgcHJlbG9hZGVkU3R5bGVzaGVldC5ocmVmID0gdXJsO1xuICAgICAgICAgICAgICAgICAgICBwcmVsb2FkZWRTdHlsZXNoZWV0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcHJlbG9hZGVkU3R5bGVzaGVldC5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMuX3ByZWxvYWRlZFN0eWxlc2hlZXRzW3VybF07XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHByZWxvYWRlZFN0eWxlc2hlZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3JlcXVlc3RTZW5kZXIuZ2V0KHVybCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyBBY2NlcHQ6ICd0ZXh0L2NzcycgfSxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUoKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wcmVsb2FkZWRTdHlsZXNoZWV0c1t1cmxdO1xuICAgIH07XG4gICAgU3R5bGVzaGVldExvYWRlci5wcm90b3R5cGUucHJlbG9hZFN0eWxlc2hlZXRzID0gZnVuY3Rpb24gKHVybHMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHVybHMubWFwKGZ1bmN0aW9uICh1cmwpIHsgcmV0dXJuIF90aGlzLnByZWxvYWRTdHlsZXNoZWV0KHVybCwgb3B0aW9ucyk7IH0pKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9KTtcbiAgICB9O1xuICAgIHJldHVybiBTdHlsZXNoZWV0TG9hZGVyO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFN0eWxlc2hlZXRMb2FkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdHlsZXNoZWV0LWxvYWRlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/script-loader/lib/stylesheet-loader.js\n");

/***/ })

}]);